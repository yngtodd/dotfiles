webpackJsonp([5],{100:function(e,t){var r=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=r)},1005:function(e,t,r){"use strict";t["a"]=b;var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(21708);var m=r(21717);function b(e){return function(t){v()(r,t);function r(t){n()(this,r);var a=c()(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));a.uniqueId=Object(p["uniqueId"])();a.name=Object(p["snakeCase"])(e.name);a.logMetrics=Object(m["a"])(1);return a}s()(r,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&f["d"]("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&f["f"]("react_"+this.name+"_mount","react_"+this.name+"_mount_mark_"+this.uniqueId)}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&f["d"]("react_"+this.name+"_update_mark_"+this.uniqueId);for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)&&(t=u()(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&f["f"]("react_"+this.name+"_update","react_"+this.name+"_update_mark_"+this.uniqueId)}}]);return r}(e)}},1006:function(e,t,r){"use strict";r.d(t,"b",function(){return c});r.d(t,"a",function(){return l});r.d(t,"c",function(){return u});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.prefs.setMultiPrefsByAPI",a["noop"]);var o=Object(i["c"])("TS.prefs.setPrefByAPI",a["noop"]);var c=Object(i["c"])("TS.prefs.onPrefChanged",a["noop"]);var l=Object(i["c"])("TS.prefs.sidebar_theme_changed_sig.dispatch",a["noop"]);var u=Object(i["c"])("TS.prefs.removeTeamFromEnterpriseExcludeTeamPref",a["noop"])},1008:function(e,t,r){"use strict";var a=r(1564);r.d(t,"a",function(){return a["a"]});t["b"]=a["b"]},1009:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(8);var l=r.n(c);var u=r(5);var d=new u["b"]("messages");var v={ghost:n.a.bool};var p={ghost:false};function h(e){var t=e.ghost;return s.a.createElement("div",{className:l()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},s.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),s.a.createElement("span",{className:"c-message_list__unread_divider__label"},d.t("new messages")))}h.displayName="UnreadDivider";h.defaultProps=p;t["a"]=Object(o["pure"])(h)},101:function(e,t,r){var a=r(240);var n=r(106);e.exports=function(e){return a(n(e))}},1013:function(e,t,r){"use strict";var a=r(1573);var n=r(1014);var i=r(1018);var s=r(1019);var o=r(1581);var c=r(1020);var l=r(1582);var u=r(1022);var d=r(22192);r.d(t,"a",function(){return n["a"]});r.d(t,"b",function(){return i["a"]});r.d(t,"c",function(){return s["a"]});r.d(t,"d",function(){return o["a"]});r.d(t,"e",function(){return c["a"]});r.d(t,"h",function(){return u["a"]});r.d(t,"i",function(){return l["a"]});r.d(t,"f",function(){return d["b"]});r.d(t,"g",function(){return d["a"]});t["j"]=a["a"]},1014:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(21697);var _=r(21698);var y=r(5);var O=r(215);var k=r(907);var j=r(3203);var C=r(440);var E=r(21796);var S=r(3241);var w=r(1015);var I=r(1017);var T=new y["b"]("message_pane_foreword");var N={channelId:v.a.string,purpose:v.a.string,creatorIsYou:v.a.bool,createdById:v.a.string,dateCreated:v.a.number,isPrivate:v.a.bool,isUserRestricted:v.a.bool};var R={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var A=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){var t=this.props.channelId;var r={inherit:true,align:"baseline"};return h.a.createElement("h1",{className:"p-message_pane__foreword__title"},h.a.createElement(S["a"],{channelId:t,inline:true,iconProps:r}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.createdById,n=t.creatorIsYou,i=t.dateCreated,s=t.isPrivate,o=t.purpose,c=t.isUserRestricted;var l=void 0;if(i){l=Object(O["f"])(i);l=Object(O["b"])(i)||Object(O["c"])(i)?l.toLowerCase():T.t("on {date}",{date:l})}else l=T.rt("on {date}",{date:h.a.createElement(C["a"],{type:"unknown"})});var u={inherit:true,align:"baseline"};var d=h.a.createElement(S["a"],{channelId:r,inline:true,iconProps:u,className:"bold"});var v=void 0;if(n)v=s?T.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:l,name:d}):T.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:l,name:d});else{var p=a?h.a.createElement(E["a"],{id:a,showTooltip:true}):h.a.createElement(C["a"],{type:"unknown"});v=s?T.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:l,name:d}):T.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:l,name:d})}return h.a.createElement(I["a"],{channelId:r,description:v,purpose:o,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var n=b()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return h.a.createElement("div",{className:n},this.renderTitle(),this.renderDescription(),h.a.createElement(w["a"],{channelId:r}))}}]);return t}(p["PureComponent"]);A.displayName="ChannelForeword";A.defaultProps=R;function M(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};var n=Object(_["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(k["isPrivateChannel"])(a);return{purpose:i,creatorIsYou:n&&n.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:s,isUserRestricted:Object(j["R"])(n)}}t["a"]=Object(f["connect"])(M)(A)},1015:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(21697);var _=r(21698);var y=r(907);var O=r(3203);var k=r(1016);var j=r(1577);var C=r(1031);var E=r(1578);var S=r(58);var w=r(21713);var I=r(91);var T=r(1574);var N=r(1575);var R=r(1576);var A={channelId:h.a.string,purpose:h.a.string,isUserRestricted:h.a.bool,isUserUltraRestricted:h.a.bool,isOrgShared:h.a.bool,channelType:h.a.string};var M={channelId:null,purpose:null,isUserRestricted:false,isUserUltraRestricted:false,isOrgShared:false,channelType:null};var P=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);r.onInviteButtonClick=r.onInviteButtonClick.bind(r);r.onAppButtonClick=r.onAppButtonClick.bind(r);return r}c()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(k["a"])(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props.channelId;Object(j["a"])(t)}},{key:"onAppButtonClick",value:function e(){var t;var r=this.props.channelId;var a=w["h"].CHANNEL_FOREWORD;var i=(t={},n()(t,w["n"].action,w["m"].CLICK),n()(t,w["n"].ui_element,w["o"].BTN_ADD_APPS),t);Object(I["b"])(a,{contexts:n()({},w["b"].ui_context,i)});Object(E["a"])()?Object(C["g"])(a,i):Object(S["g"])("/apps/new?channel="+r,"new")}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isOrgShared,n=t.isUserRestricted,i=t.isUserUltraRestricted,s=t.purpose,o=t.channelType;var c=void 0;s||n||(c=m.a.createElement(R["a"],{channelId:r,onClick:this.onPurposeButtonClick}));var l=void 0;a||n||(l=m.a.createElement(T["a"],{onClick:this.onAppButtonClick}));var u=void 0;(!i||"channel"===o&&"private"===o)&&(u=m.a.createElement(N["a"],{onClick:this.onInviteButtonClick,isPrivate:"private"===o}));return m.a.createElement("div",{className:"p-message_pane__foreword__buttons"},c,l,u)}}]);return t}(f["PureComponent"]);P.displayName="ChannelForewordButtons";P.defaultProps=M;function x(e,t){var r=t.channelId;var a=Object(g["getChannelById"])(e,r);if(!a)return{};var n=Object(_["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(y["isOrgSharedPublicOrPrivateChannel"])(a);return{purpose:i,isUserRestricted:Object(O["R"])(n),isUserUltraRestricted:Object(O["W"])(n),isOrgShared:s,channelType:Object(y["getChannelType"])(a)}}t["a"]=Object(b["connect"])(x)(P)},1016:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.ui.purpose_dialog.start",n.a.noop)},1017:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(77);var m=r(3184);var b=r(5);var g=r(1016);var _=new b["b"]("message_pane_foreword");var y={channelId:v.a.string,description:v.a.node,purpose:v.a.string,isUserRestricted:v.a.bool};var O={channelId:null,description:null,purpose:null,isUserRestricted:false};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPurposeButtonClick=r.onPurposeButtonClick.bind(r);return r}s()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;Object(g["a"])(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props.purpose;if(!t)return null;return h.a.createElement("span",null," ",_.t("Purpose:")," ",h.a.createElement(f["a"],{text:t}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,r=t.purpose,a=t.isUserRestricted;if(!r||a)return null;return h.a.createElement("span",{className:"no_wrap"}," ","(",h.a.createElement(m["a"],{type:"link",onClick:this.onPurposeButtonClick},_.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return h.a.createElement("div",{className:"p-message_pane__foreword__description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(p["PureComponent"]);k.displayName="ChannelForewordDescription";k.defaultProps=O;t["a"]=k},1018:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(21697);var b=r(12);var g=r(21698);var _=r(907);var y=r(3203);var O=r(5);var k=r(3284);var j=r(90);var C=r(21796);var E=r(21750);var S=r(1579);var w=new O["b"]("message_pane_foreword");var I={isAppSpaceEnabled:v.a.bool.isRequired,memberId:v.a.string,type:v.a.oneOf(["self","bot","member"]).isRequired};var T={memberId:null};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMemberClick=r.onMemberClick.bind(r);return r}s()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var r=this.props.memberId;Object(j["g"])(r)}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},h.a.createElement(E["a"],{id:t,size:"large",onClick:this.onMemberClick,showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.memberId,a=t.type;if("self"===a)return h.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},w.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var n=w.rt("This is the very beginning of your direct message history with {name}",{name:h.a.createElement(C["a"],{id:r,showTooltip:true})});return h.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},n)}},{key:"renderButtons",value:function e(){var t=this.props,r=t.isAppSpaceEnabled,a=t.memberId,n=t.type;if("bot"===n&&r)return h.a.createElement("div",{className:"p-message_pane__foreword__buttons"},h.a.createElement(S["a"],{botId:a}));return null}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(p["PureComponent"]);N.displayName="BaseImForeword";N.defaultProps=T;function R(e,t){var r=t.channelId;var a=Object(m["getChannelById"])(e,r);if(!a)return{};var n=Object(g["getMemberById"])(e,Object(_["getMemberIdFromIm"])(a));var i=Object(b["getCurrentUserId"])(e);var s=void 0;s=Object(_["getMemberIdFromIm"])(a)===i?"self":Object(y["z"])(n)?"bot":"member";return{isAppSpaceEnabled:Object(k["isAppSpaceEnabled"])(e),memberId:Object(_["getMemberIdFromIm"])(a),type:s}}var A=Object(f["connect"])(R)(N);A.propTypes={channelId:v.a.string};A.defaultProps={channelId:null};t["a"]=A},1019:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(21697);var b=r(21698);var g=r(3271);var _=r(907);var y=r(3203);var O=r(21703);var k=r(21750);var j=r(21796);var C=r(21777);var E=r(5);var S=new E["b"]("message_pane_foreword");var w={memberId:v.a.string,sharedTeam:v.a.object};var I={memberId:void 0,sharedTeam:void 0};var T=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return h.a.createElement("div",{className:"p-message_pane__foreword__avatars"},h.a.createElement(k["a"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,r=t.sharedTeam,a=t.memberId;var n=!r||Object(O["isUnknown"])(r)?h.a.createElement(C["a"],{type:"unknown"}):h.a.createElement("strong",null,Object(O["getTeamDisplayName"])(r));var i=S.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:h.a.createElement(j["a"],{id:a,showTooltip:true}),team:n});return h.a.createElement("div",{className:"p-message_pane__foreword__description"},i)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(p["PureComponent"]);T.displayName="ImSharedForeword";T.defaultProps=I;function N(e,t){var r=t.channelId;var a=Object(m["getChannelById"])(e,r);if(!a)return null;var n=Object(b["getMemberById"])(e,Object(_["getMemberIdFromIm"])(a));var i=Object(y["p"])(n);var s=Object(g["getTeamById"])(e,i);return{memberId:Object(_["getMemberIdFromIm"])(a),sharedTeam:s}}t["a"]=Object(f["connect"])(N)(T)},1020:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(263);var _=r.n(g);var y=r(12);var O=r(21697);var k=r(3287);var j=r(907);var C=r(2329);var E=r(21703);var S=r(3270);var w=r(21796);var I=r(21777);var T=r(265);var N=r(3184);var R=r(5);var A=r(3214);var M=r(3208);var P=r(22929);var x=new R["b"]("message_pane_foreword");var D={channelId:h.a.string.isRequired,teamId:h.a.string,memberIds:h.a.arrayOf(h.a.string),sharedTeams:h.a.arrayOf(h.a.object),notificationPermission:h.a.string,notificationSetting:h.a.oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:h.a.bool};var F={teamId:void 0,memberIds:[],sharedTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openPrefsDialog=r.openPrefsDialog.bind(r);r.openChannelPrefsDialog=r.openChannelPrefsDialog.bind(r);r.state=Object(C["g"])();return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(C["g"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var r=this.state,a=r.notificationsEnabled,n=r.notificationDisabledType;if(a)return null;switch(n){case"not_yet_allowed":return x.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var r=e.key,a=e.text;return m.a.createElement(N["a"],{onClick:t.openPrefsDialog,key:r,type:"link"},a)});case"not_allowed":return x.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return x.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,r=e.text;return m.a.createElement("a",{target:"_blank",key:t,href:"/downloads"},r)});default:return null}}},{key:"openPrefsDialog",value:function e(){Object(M["a"])("notifications")}},{key:"openChannelPrefsDialog",value:function e(){Object(A["a"])(this.props.channelId)}},{key:"renderAvatars",value:function e(){var t=this.props.memberIds;var r=t.map(function(e){return m.a.createElement(T["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56})});return m.a.createElement("div",{className:"p-message_pane__foreword__avatars"},r)}},{key:"renderTeamName",value:function e(t){if(Object(E["isUnknown"])(t))return m.a.createElement(I["a"],{type:"unknown"});return Object(E["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.teamId,a=t.memberIds,n=t.sharedTeams,i=t.featureReactMessages;var s=Object(d["reject"])(n,{id:r});if(s.length&&i){var o=n.map(this.renderTeamName);var c=x.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(R["e"])(o,{noEscape:true,react:true,strong:true})});return m.a.createElement("div",{className:"p-message_pane__foreword__description"},c,this.renderDescriptionActions())}var l=a.map(function(e){return m.a.createElement(w["a"],{id:e,showTooltip:true})});var u=x.rt("This is the very beginning of your direct message history with {names}",{names:Object(R["e"])(l,{noEscape:true,react:true})});return m.a.createElement("div",{className:"p-message_pane__foreword__description"},u,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return m.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var r=this.props.notificationSetting;if("everything"===r)return m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},x.rt("You\u2019ll be notified for <strong>every new message</strong>.")," ",this.renderEditButton());if("mentions_dms"===r)return m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},x.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},x.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return m.a.createElement(N["a"],{onClick:this.openChannelPrefsDialog,type:"link"},x.rt("Edit"))}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(f["PureComponent"]);L.displayName="BaseMpimForeword";L.defaultProps=F;var B=Object(g["createSelector"])(function(e,t){var r=t.channelId;return Object(O["getChannelById"])(e,r)},y["getCurrentUserId"],function(e,t){var r=Object(j["getMemberIdsFromMpim"])(e);return Object(d["without"])(r,t)});function U(e,t){var r=t.channelId;return{teamId:Object(S["getTeamId"])(e),memberIds:B(e,{channelId:r}),sharedTeams:Object(P["a"])(e,{channelId:r}),notificationPermission:Object(k["getNotificationPermission"])(e),notificationSetting:Object(C["c"])(e,r),featureReactMessages:Object(y["isFeatureEnabled"])(e,"feature_react_messages")}}var q=Object(b["connect"])(U)(L);q.propTypes={channelId:h.a.string};q.defaultProps={channelId:null};t["a"]=q},1022:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(9);var k=r(21697);var j=r(3271);var C=r(3270);var E=r(21698);var S=r(907);var w=r(21703);var I=r(5);var T=r(21777);var N=r(3241);var R=r(442);var A=r(1015);var M=r(1017);var P=r(22929);var x=new I["b"]("message_pane_foreword");var D={channel:m.a.object,channelId:m.a.string,isPrivate:m.a.bool,isPendingShared:m.a.bool,currentTeam:m.a.shape({id:m.a.string.isRequired,name:m.a.string.isRequired}),sharedTeams:m.a.arrayOf(m.a.shape({id:m.a.string.isRequired,name:m.a.string})),purpose:m.a.string,isUserRestricted:m.a.bool};var F={channel:null,channelId:null,isPrivate:false,isPendingShared:false,currentTeam:null,sharedTeams:[],purpose:null,isUserRestricted:false};var L=function(e){v()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}c()(t,[{key:"renderTitle",value:function e(){var t=this.props.channel;var r={inherit:true,align:"baseline"};return g.a.createElement("h1",{className:"p-message_pane__foreword__title"},g.a.createElement(N["a"],{channel:t,inline:true,iconProps:r}))}},{key:"renderAvatars",value:function e(){var t=this.props,r=t.sharedTeams,a=t.currentTeam,i=t.isPendingShared;if(h.a.isEmpty(r))return null;var s=h.a.uniqBy([a].concat(n()(r)),"id");var o=s.map(function(e){var t=e.id;var r=a.id!==t&&i;return g.a.createElement(R["b"],{key:t,id:t,size:56,isPendingShared:r,className:"p-message_pane__foreword__avatar"})});return g.a.createElement("div",{className:"p-message_pane__foreword__avatars"},o)}},{key:"renderTeamName",value:function e(t){if(Object(w["isUnknown"])(t))return g.a.createElement(T["a"],{type:"unknown"});return Object(w["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.channelId,a=t.purpose,i=t.currentTeam,s=t.sharedTeams,o=t.isPendingShared,c=t.isUserRestricted;var l=[i].concat(n()(s));var u=l.map(this.renderTeamName);1===u.length&&u.push(g.a.createElement(T["a"],{type:"unknown"}));var d=Object(I["e"])(u,{noEscape:true,react:true,strong:true});var v=o?x.rt("This is a shared channel. Waiting for {names} to join...",{names:d}):x.rt("This is a shared channel between {names}.",{names:d});return g.a.createElement(M["a"],{channelId:r,description:v,purpose:a,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.isPrivate;var n=y()("p-message_pane__foreword",{"p-message_pane__foreword--private":a});return g.a.createElement("div",{className:n},this.renderAvatars(),this.renderTitle(),this.renderDescription(),g.a.createElement(A["a"],{channelId:r}))}}]);return t}(b["PureComponent"]);L.displayName="SharedForeword";L.defaultProps=F;function B(e,t){var r=t.channelId;var a=Object(k["getChannelById"])(e,r);if(!a)return null;var n=Object(E["getCurrentMember"])(e);var i=a.purpose?a.purpose.value:null;var s=Object(S["isPrivateChannel"])(a);var o=Object(S["isPendingExternallySharedChannel"])(a);var c=Object(P["a"])(e,{channelId:r});var l=Object(j["getTeamById"])(e,Object(C["getTeamId"])(e));return{currentTeam:l,channel:a,purpose:i,isPrivate:s,isPendingShared:o,sharedTeams:c,isUserRestricted:n.is_restricted}}t["a"]=Object(O["connect"])(B)(L)},1024:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"uploadStarting",function(){return d});r.d(t,"progressUpdate",function(){return v});r.d(t,"uploadCanceled",function(){return p});r.d(t,"uploadComplete",function(){return h});r.d(t,"uploadQueueEmptied",function(){return f});r.d(t,"IDLE",function(){return m});r.d(t,"UPLOADING",function(){return b});r.d(t,"COMPLETE",function(){return g});r.d(t,"CANCELED",function(){return _});r.d(t,"getFileUploadState",function(){return k});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u;var d=Object(l["a"])("Started uploading a file");d.propTypes={fileName:c.a.string.isRequired,isRetry:c.a.bool.isRequired,cancelable:c.a.bool.isRequired};var v=Object(l["a"])("Update to the file upload % complete");v.propTypes={percentComplete:c.a.number.isRequired};var p=Object(l["a"])("Canceled the file upload");p.propTypes=null;var h=Object(l["a"])("Finished the file upload");h.propTypes=null;var f=Object(l["a"])("Done all uploads");f.propTypes=null;var m=0;var b=1;var g=2;var _=3;var y={status:m,fileName:null,percentComplete:0,cancelable:false,isRetry:false};var O=Object(l["c"])((u={},n()(u,d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fileName,a=t.isRetry,n=t.cancelable;return{status:b,fileName:r,isRetry:a,percentComplete:0,cancelable:n}}),n()(u,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.percentComplete;return s()({},e,{percentComplete:r})}),n()(u,p,function(e){return s()({},e,{status:_})}),n()(u,h,function(e){return s()({},e,{status:g})}),n()(u,f,function(e){return s()({},e,{status:m})}),u),y);t["default"]=O;var k=Object(l["d"])(function(e){return e&&e.fileUpload})},1025:function(e,t,r){"use strict";t["a"]=k;var a=r(1);var n=r.n(a);var i=r(43);var s=r(21697);var o=r(3273);var c=r(3277);var l=r(12);var u=r(124);var d=r(21714);var v=r(21702);var p=r(54);var h=r(428);var f=r(907);var m=r(211);var b=r(3226);var g=r(329);var _=r(90);var y=r(282);var O=r(88);function k(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=r();if(!Object(h["isFullyBooted"])(n)){N("Not marking "+e+" because not fully booted");return}var i=Object(d["getPrimaryView"])(n);if(i!==e){Object(y["c"])(2005,"Not marking because "+e+" is not active");return}if(Object(u["didUserSetUnreadPoint"])(n)){N("Not marking "+e+" because unread point was set manually");return}if(Object(g["b"])()){N("Not marking "+e+" because active channel is hidden");return}if(!Object(_["e"])()){N("Not marking "+e+" because attention not on chat ("+Object(_["b"])()+")");a||t(Object(u["setGhostLastRead"])(null));return}var c=Object(s["getChannelById"])(n,e);var p=Object(o["getTimestampsByChannelId"])(n,e),b=p.timestamps;var O=Object(f["getLatestTs"])(c,b);var k=Object(f["isRead"])(c);if(Object(f["getLastReadTs"])(c)>=O&&k){N("Not marking "+e+" because last_read >= latest && channel is read");return}var C=j(n);var E=Object(u["isUnreadLineVisible"])(n);var S=Object(f["getLastReadTs"])(c)>=O;var w=Object(v["getMessageByTimestamp"])(n,e,O);var I=Object(l["getCurrentUserId"])(n);var T=w&&w.user===I;if(C||E||S||k&&T){N(C?"Marking "+e+" because mark_msgs_read_immediately pref":E?"Marking "+e+" because unread line is visible":S?"Marking "+e+" because last_read >= latest":"Marking "+e+" because channel is read and last message is from self");t(Object(s["markMostRecentMsgRead"])({channelId:e,saveGhost:a&&!k,reason:m["MARKED_REASONS"].VIEWED}))}else if(!C){N("Not marking "+e+", clearing ghost last_read");t(Object(u["setGhostLastRead"])(null))}}function j(e){return Object(p["getUserPref"])(e,"mark_msgs_read_immediately")&&!Object(p["getUserPref"])(e,"start_scroll_at_oldest")}var C=n.a.debounce(function(e,t,r){var a=r();var n=Object(s["getChannelById"])(a,e);if(j(a)||!Object(f["isRead"])(n)){N("Checking unreads after debounced channel change to "+e);k(e,t,r)}},500);function E(e,t,r){var a=r();if(!Object(l["useReactMessages"])(a))return;var n=e.payload.channelId;if(!n)return;C(n,t,r)}function S(e,t,r){var a=r();if(!Object(l["useReactMessages"])(a))return;var n=Object(d["getPrimaryView"])(a);if(!Object(b["a"])(n))return;var i=Object(c["isWindowFocused"])(a);i&&requestAnimationFrame(function(){N("Checking unreads after window became focused");k(n,t,r)})}var w=n.a.debounce(function(e,t,r){var a=Object(u["isUnreadLineVisible"])(r());if(a){N("Checking unreads after unread line became visible");k(e,t,r)}},350);function I(e,t,r){var a=r();if(!Object(l["useReactMessages"])(a))return;var n=Object(d["getPrimaryView"])(a);if(!Object(b["a"])(n))return;if(j(a))return;w(n,t,r)}function T(e,t,r){var a=r();if(!Object(l["useReactMessages"])(a))return;var i=Object(d["getPrimaryView"])(a);if(!Object(b["a"])(i))return;n.a.defer(function(){N("Checking unreads after fully booted");k(i,t,r)})}Object(O["b"])({actions:[u["setActiveChannel"]],sideEffect:E});Object(O["b"])({actions:[c["updateFocus"]],sideEffect:S});Object(O["b"])({actions:[u["setUnreadLineVisibility"]],sideEffect:I});Object(O["b"])({actions:[h["setFullyBooted"]],sideEffect:T});function N(e){Object(i["info"])("CHECK-UNREADS",e)}},1027:function(e,t,r){"use strict";t["a"]=k;t["b"]=j;t["c"]=I;t["d"]=T;t["e"]=N;var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(85);var u=r(3043);var d=r(396);var v=r(115);var p=r(3182);var h=r(331);var f=r(3270);var m=r(49);var b=u["a"];var g=v["d"];var _=d["a"];var y={};var O="EVENTLOG";function k(e){y[e]||(y[e]=new w(e))}function j(e){return y[e]}function C(e){switch(e.type){case"file_change":if(e.file&&e.file.id)return e.type+"_"+e.file.id;break;case"user_change":if(e.user&&e.user.id)return e.type+"_"+e.user.id;break;case"emoji_changed":if("add"===e.subtype&&Object(o["isString"])(e.name)&&Object(o["isString"])(e.value)){var t={name:e.name,value:e.value};return"emoji_changed_add_"+JSON.stringify(t)}if("remove"===e.subtype&&Object(o["isArray"])(e.names))return"emoji_changed_remove_"+JSON.stringify(e.names);return e.type;case"message.channel_history_changed":case"message.group_history_changed":case"message.mpim_history_changed":case"message.im_history_changed":if(Object(o["isString"])(e.channel))return e.type+"_"+e.channel;break;default:}return}function E(e,t){return Object(o["reduceRight"])(e,function(e,r){t(r)&&e.unshift(r);return e},[])}function S(e){var t={};var r=void 0;var a=E(e,function(e){if("slack_broadcast"===e.type){(!r||!r.force_reload&&e.force_reload)&&(r=e);return false}var a=C(e);if(!a)return true;if(t[a])return false;t[a]=true;return true});return r?[r].concat(a):a}var w=function(){function e(t){n()(this,e);if(!t)throw new Error("Eventlog requires a teamId");this._teamId=t;this._lastAttemptWasCancelled=false;this._lastEventTimestamp=void 0;this._lastEventTimestampBeforeDisconnection=void 0;this._eventlogHistoryP=void 0;Object(h["a"])(this)}s()(e,[{key:"_dispatchReduxAction",value:function e(t){Object(m["a"])(this._teamId,t)}},{key:"_info",value:function e(t){this._dispatchReduxAction(Object(p["info"])(O,t))}},{key:"_warn",value:function e(t){this._dispatchReduxAction(Object(p["warn"])(O,t))}},{key:"_eventlogErrorHandler",value:function e(t){var r=t&&t.data?t.data.error:null;if("timestamp_too_old"===r){_({reason:"eventlog.history timestamp_too_old"});return}this._warn("eventlog: encountered error");g(t,"eventlog")}},{key:"_eventlogOKHandler",value:function e(t){var r=this;var a=t.data;if(a.has_more){_({reason:"eventlog.history has_more"});return}if(!a.events){this._warn("eventlog: history call did not include events");return}if(!a.events.length){this._info("nothing to process");return}a.events.forEach(function(e){e._from_evt_log=true});var n=S(a.events);this._info("processing "+n.length+" events out of a total set of "+a.events.length);n.forEach(function(e){r._dispatchReduxAction(Object(l["socketMessageReceived"])(e))});if(n.length>0){var i=n[n.length-1].event_ts;i&&i>(this._lastEventTimestamp||0)&&this.setLastEventTimestamp(i)}}},{key:"onSocketConnected",value:function e(t){var r=this;if(!this._lastEventTimestampBeforeDisconnection)return;this._info("fr="+t+", lc="+this._lastAttemptWasCancelled+", lt="+this._lastEventTimestampBeforeDisconnection);if(t&&!this._lastAttemptWasCancelled)return;this._info("fetching events since "+this._lastEventTimestampBeforeDisconnection+" ("+(Math.ceil(Date.now()/1e3)-this._lastEventTimestampBeforeDisconnection)+" seconds ago)");var a=b({start:this._lastEventTimestampBeforeDisconnection,count:2e3,no_payload_if_has_more:true,batch_deleted_files:true}).then(function(e){return r._eventlogOKHandler(e)}).catch(function(e){return r._eventlogErrorHandler(e)});a.finally(function(){r._eventlogHistoryP=void 0;r._info("fetched finish (cancelled? "+a.isCancelled()+")");r._lastAttemptWasCancelled=!!a.isCancelled();if(!a.isCancelled()){r._info("dispatching signal and clearing timestamp");r._lastEventTimestampBeforeDisconnection=void 0}});this._eventlogHistoryP=a}},{key:"onSocketDisconnected",value:function e(){this._lastEventTimestampBeforeDisconnection=this._lastEventTimestampBeforeDisconnection||this._lastEventTimestamp;if(this._eventlogHistoryP){this._info("socket was closed while we were fetching history; cancelling our request");this._eventlogHistoryP.cancel();this._eventlogHistoryP=void 0}}},{key:"setLastEventTimestamp",value:function e(t){this._lastEventTimestamp=t}}]);return e}();function I(e,t){var r=e();var a=Object(f["getTeamId"])(r);var n=y[a];if(!n)return;n.onSocketConnected(t)}function T(e){var t=e();var r=Object(f["getTeamId"])(t);var a=y[r];if(!a)return;a.onSocketDisconnected()}function N(e,t){var r=t.event_ts;if(!r)return;var a=e();var n=Object(f["getTeamId"])(a);var i=y[n];if(!i)return;i.setLastEventTimestamp(r)}var R={};Object.defineProperty(R,"fetchEventlogHistory",{get:function e(){return b},set:function e(t){b=t}});Object.defineProperty(R,"instances",{get:function e(){return y},set:function e(t){y=t}});Object.defineProperty(R,"logError",{get:function e(){return g},set:function e(t){g=t}});Object.defineProperty(R,"onSocketConnected",{get:function e(){return I},set:function e(t){I=t}});Object.defineProperty(R,"onSocketDisconnected",{get:function e(){return T},set:function e(t){T=t}});Object.defineProperty(R,"onSocketMessage",{get:function e(){return N},set:function e(t){N=t}});Object.defineProperty(R,"reload",{get:function e(){return _},set:function e(t){_=t}})},1031:function(e,t,r){"use strict";r.d(t,"e",function(){return s});r.d(t,"f",function(){return o});r.d(t,"c",function(){return c});r.d(t,"a",function(){return l});r.d(t,"b",function(){return u});r.d(t,"g",function(){return d});r.d(t,"d",function(){return v});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.ui.apps_browser.routeAppOpen",n.a.noop);var o=Object(i["c"])("TS.ui.apps_browser.showAppTutorial",n.a.noop);var c=Object(i["c"])("TS.ui.apps_browser.canAppBeAdded",n.a.noop);var l=Object(i["c"])("TS.ui.apps_browser.addAppToChannel",n.a.noop);var u=Object(i["c"])("TS.ui.apps_browser.buildAddAppsTitle",n.a.noop);var d=Object(i["c"])("TS.ui.apps_browser.startAddApps",n.a.noop);var v=Object(i["c"])("TS.ui.apps_browser.ensureAppMembershipIsKnown",n.a.noop)},105:function(e,t){var r=Math.ceil;var a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:r)(e)}},106:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},1061:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"syncDownloads",function(){return f});r.d(t,"fetchFileInfo",function(){return m});r.d(t,"getDownloads",function(){return _});r.d(t,"getDownloadIds",function(){return y});var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(21706);var d=r(12);var v=r(1501);var p=r(139);var h=r(58);var f=Object(l["a"])("Sync downloads from desktop");f.propTypes=c.a.object.isRequired;var m=Object(l["e"])("Fetch multiple files by ID and upsert them",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.ids;if(Object(d["isFeatureEnabled"])(t(),"feature_modern_files_info"))return e(Object(v["c"])({fileIds:a,reason:"downloads-store.fetchFileInfo"}));return Object(p["g"])(a).then(function(t){return e(Object(u["bulkAddFiles"])(t))}).catch(function(){return Object(h["f"])("Failed to fetch files",a)})});m.propTypes={ids:c.a.arrayOf(c.a.string).isRequired};var b={};var g=Object(l["c"])(n()({},f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t}),b);t["default"]=g;var _=Object(l["d"])(function(e){return s.a.values(e&&e.downloads)});var y=Object(l["d"])(function(e){return e&&e.downloads&&Object.keys(e.downloads)})},1066:function(e,t,r){"use strict";r.d(t,"a",function(){return M});var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(54);var O=r(60);var k=r(128);var j=r(296);var C=r(297);var E=r(5);var S=r(21906);var w=r(20168);var I=r.n(w);var T=new E["b"]("message");var N={timestamp:h.a.string.isRequired,link:h.a.string,full:h.a.bool,relative:h.a.bool,time24:h.a.bool,onClick:h.a.func};var R={link:null,relative:false,full:false,time24:false,onClick:g["noop"]};var A=function e(t){var r=t.timestamp,a=t.time24;return T.t("{date} at {time}",{date:Object(C["a"])(r,{shortenMonth:true}),time:Object(k["a"])(r,{do24hrTime:a,includeSeconds:true})})};var M=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={now:Date.now()};return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props.relative;t&&this.startRelativeTimestampUpdater()}},{key:"componentDidUpdate",value:function e(t){!t.relative&&this.props.relative?this.startRelativeTimestampUpdater():t.relative&&!this.props.relative&&this.stopRelativeTimestampUpdater()}},{key:"componentWillUnmount",value:function e(){this.stopRelativeTimestampUpdater()}},{key:"startRelativeTimestampUpdater",value:function e(){var t=this;this.stopRelativeTimestampUpdater();this.relativeTimestampUpdater=setInterval(function(){t.setState(function(){return{now:Date.now()}})},6e4)}},{key:"stopRelativeTimestampUpdater",value:function e(){clearInterval(this.relativeTimestampUpdater)}},{key:"render",value:function e(){var t=this.props,r=t.timestamp,a=t.full,i=t.relative,s=t.link,o=t.time24,c=t.onClick;var l=m.a.createElement(A,{timestamp:r,time24:o});var u=void 0;u=a?l:i?Object(j["a"])(r):Object(k["a"])(r,{do24hrTime:o});var d=s?"a":"span";var v=m.a.createElement(d,n()({className:"c-timestamp",href:s||null,tabIndex:s?"-1":null,onClick:c},Object(S["a"])(this.props)),m.a.createElement("span",{className:"c-timestamp__label","data-stringify-prefix":"[","data-stringify-suffix":"]"},u));if(a)return v;return m.a.createElement(O["d"],{delay:O["a"],tip:l},v)}}]);return t}(f["Component"]);M.displayName="Timestamp";M.defaultProps=R;A.propTypes={timestamp:h.a.string.isRequired,time24:h.a.bool};A.defaultProps=R;var P=function e(t,r){return n()({},r,{time24:Object(y["getUserPref"])(t,"time24")})};t["b"]=Object(b["connect"])(P)(M)},1067:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=["channel_join","channel_leave","group_join","group_leave"];var c=["app_conversation_join","app_conversation_leave"];var l=function e(t){return"channel_join"===t||"group_join"===t};var u=function e(t){var r={};var a=[];for(var i=0;i<t.length;i++){var u=t[i];a.push(u);s.a.includes(c,u.subtype)&&(r[u.ts]=n()({},u.user,{action:"app_conversation_join"===u.subtype?"join":"leave",inviter:u.inviter,ts:u.ts}));if(s.a.includes(o,u.subtype)){r[u.ts]=n()({},u.user,{actions:[u.subtype],inviter:u.inviter,ts:u.ts});while(i+1<t.length){var d=t[i+1];if(!s.a.includes(o,d.subtype))break;var v=r[u.ts][d.user]&&r[u.ts][d.user].actions;if(v&&v.length){if(1===v.length&&d.subtype!==v[0]){v.push(d.subtype);d.inviter&&(r[u.ts][d.user].inviter=d.inviter)}else if(2===v.length&&d.subtype!==v[1]){r[u.ts][d.user].actions=[v[1],d.subtype];d.inviter&&(r[u.ts][d.user].inviter=d.inviter)}}else r[u.ts][d.user]={actions:[d.subtype],inviter:d.inviter,ts:d.ts};i+=1}r[u.ts]=s.a.mapValues(r[u.ts],function(e){var t=e.actions,r=e.inviter,a=e.ts;return{action:t.map(function(e){return l(e)?"join":"leave"}).join(","),inviter:r,ts:a}})}}return{messages:a,rollups:r}};t["a"]=u},1068:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"requestPropType",function(){return E});r.d(t,"responsePropType",function(){return I});r.d(t,"setEditableRequestQueryFilterOnly",function(){return N});r.d(t,"getEditableRequestQuery",function(){return R});r.d(t,"getRequestQuery",function(){return A});r.d(t,"clearResponse",function(){return M});r.d(t,"setRequestFromEditableRequest",function(){return x});r.d(t,"getEditableRequestQueryFilter",function(){return D});r.d(t,"setEditableRequestChannelObjects",function(){return F});r.d(t,"resetEditableRequest",function(){return L});r.d(t,"setResponse",function(){return B});r.d(t,"appendResponse",function(){return U});r.d(t,"setFilterSuggestions",function(){return q});r.d(t,"clearFilterSuggestions",function(){return H});r.d(t,"setLastFetchAllRequestId",function(){return W});r.d(t,"setEditableRequestQueryThenRequest",function(){return V});r.d(t,"toggleEditableRequestQueryFilterFromItem",function(){return z});r.d(t,"toggleEditableRequestQueryFilterInItem",function(){return K});r.d(t,"setEditableRequestQueryFilterBefore",function(){return Q});r.d(t,"setEditableRequestQueryFilterAfter",function(){return Y});r.d(t,"setEditableRequestQueryFilterFileType",function(){return J});r.d(t,"reset",function(){return Z});r.d(t,"resetSearchAfterUnknownUIError",function(){return X});r.d(t,"getEditableRequest",function(){return re});r.d(t,"getEditableRequestQueryFilterHistory",function(){return ae});r.d(t,"getEditableRequestQueryFilterFrom",function(){return ne});r.d(t,"getEditableRequestQueryFilterIn",function(){return ie});r.d(t,"getEditableRequestQueryFilterAfter",function(){return se});r.d(t,"getEditableRequestQueryFilterBefore",function(){return oe});r.d(t,"getEditableRequestChannelObjects",function(){return ce});r.d(t,"getEditableRequestQueryFilterFileType",function(){return le});r.d(t,"getRequest",function(){return ue});r.d(t,"getPreviousRequest",function(){return de});r.d(t,"getPreviousRequestQuery",function(){return ve});r.d(t,"getResponse",function(){return pe});r.d(t,"getResponseModule",function(){return he});r.d(t,"getResponseQuery",function(){return fe});r.d(t,"getLastFetchAllRequestId",function(){return me});r.d(t,"getFilterSuggestions",function(){return be});r.d(t,"getRequestIdForModule",function(){return ge});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v=r(21725);var p=r(268);var h=r(21742);var f=r(21870);var m=r(21721);var b=r(21938);var g=r(21768);var _=r(1592);var y=r(21743);var O;function k(e,t){var r=Object(d["a"])(e);r.propTypes=t;return r}var j=c.a.shape({from:c.a.arrayOf(c.a.string).isRequired,in:c.a.arrayOf(c.a.string).isRequired,after:c.a.string,before:c.a.string});var C={query:c.a.string.isRequired,queryFilter:j.isRequired,channelObjects:c.a.object,requestInstanceId:c.a.string};var E=c.a.shape(C);var S=c.a.shape({pagination:c.a.shape({page:c.a.number.isRequired,first:c.a.number,last:c.a.number,page_count:c.a.number,per_page:c.a.number,total_count:c.a.number}).isRequired,items:c.a.arrayOf(c.a.shape({channel:c.a.shape({id:c.a.string}),iid:c.a.string,messages:c.a.arrayOf(c.a.shape({ts:c.a.string,text:c.a.string,permalink:c.a.string,user:c.a.string}))})).isRequired,filters:c.a.oneOfType([c.a.shape({from:c.a.arrayOf(c.a.string),in:c.a.arrayOf(c.a.string),after:c.a.string,before:c.a.string}),c.a.array]),query:c.a.string,request_id:c.a.string});var w={query:c.a.string.isRequired,module:c.a.string.isRequired,result:S.isRequired};var I=c.a.shape(w);var T=k("Set the query string for the editable request query",{query:c.a.string.isRequired});var N=k("Set the query filter object on the editable request",{queryFilter:j.isRequired});var R=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.query});var A=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.request&&e.searchResults.request.query});var M=k("Remove results modules for the search",{});var P=k("Promote the editable request to become the request",{});var x=Object(d["e"])("Set a request from the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fetchSuggestions,n=void 0===a||a;e(P());var i=A(t());e(M());e(Object(_["a"])({query:i,fetchSuggestions:n}));i&&Object(_["i"])(i)});x.propTypes={fetchSuggestions:c.a.bool};var D=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter});var F=k("Set the map of channel objects we need in order to render the channel filter.",{channels:c.a.object.isRequired});var L=k("Reset the editable request",{});var B=k("Set the search results",w);var U=k("Adds to the search results",{module:c.a.string.isRequired,result:S.isRequired});var q=Object(d["a"])("Set the suggestions for the current search query");q.propTypes={suggestions:c.a.shape({from:c.a.arrayOf(c.a.string),in:c.a.arrayOf(c.a.string)})};var H=Object(d["a"])("Clear the suggestions for the current search query");H.propTypes=null;var W=Object(d["a"])("Set the request ID for the current fetchAllSearchResults call");W.propTypes={id:c.a.string.isRequired};var G=Object(d["e"])("Set the query filter object on the editable request and update the query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.queryFilter;var n=t();var i=Object(f["c"])(n,R(n),a);Object(b["a"])(n,i).then(function(t){e(T({query:t}));e(Object(v["setSearchInputBoxDisplayQuery"])({displayQuery:i}));e(N({queryFilter:a}));e(x({fetchSuggestions:false}))});e(Object(p["setQuerySessionId"])({querySessionId:Object(m["a"])()}));e(Object(g["a"])())});G.propTypes={queryFilter:j};var V=Object(d["e"])("Set the query in the request which is being edited",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=t();e(M());e(Object(p["resetScrollPosition"])());e(Object(p["setLoadingModule"])({moduleType:y["a"].relevantMessages,loading:true}));e(Object(p["setLoadingModule"])({moduleType:y["a"].recentMessages,loading:true}));e(Object(p["setLoadingModule"])({moduleType:"files",loading:true}));var i=Object(f["b"])(n,a);e(N({queryFilter:i}));Object(b["a"])(n,a).then(function(t){e(T({query:t}));e(x({fetchSuggestions:true}))})});V.propTypes={query:c.a.string.isRequired};var z=Object(d["e"])("Update a `from` filters for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;var n=t();var i=D(n);var o=i&&i.from||[];Object(l["includes"])(o,a)?o=o.filter(function(e){return e!==a}):o.push(a);e(G({queryFilter:s()({},i,{from:o})}))});z.propTypes={memberId:c.a.string.isRequired};var K=Object(d["e"])("Update a `in` filters for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();var i=D(n);var o=i&&i.in||[];Object(l["includes"])(o,a)?o=o.filter(function(e){return e!==a}):o.push(a);e(G({queryFilter:s()({},i,{in:o})}))});K.propTypes={channelId:c.a.string.isRequired};var Q=Object(d["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dateString;e(G({queryFilter:s()({},D(t()),{before:a})}))});Q.propTypes={dateString:c.a.string};var Y=Object(d["e"])("Set the (possibly undefined) before filter date string on the editable request",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.dateString;e(G({queryFilter:s()({},D(t()),{after:a})}))});Y.propTypes={dateString:c.a.string};var J=Object(d["e"])("Update the file type for the search",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fileType;e(G({queryFilter:s()({},D(t()),{fileType:a})}))});J.propTypes={fileType:c.a.string.isRequired};var Z=Object(d["a"])("Reset search result redux state");Z.propTypes={};var X=Object(d["e"])("Reset all search related redux and displays an error message after an error is caught in the view",function(e){e(Object(h["reset"])());e(Object(v["reset"])());e(Z());e(Object(p["reset"])());e(Object(p["setErrorForAllModules"])({error:p["MODULE_ERROR_STATE"].RenderErrorCaught,loading:false}));e(Object(p["setInterfaceIsVisibleOnly"])({visible:true}));e(Object(p["setInterfaceMode"])({interfaceMode:p["interfaceModes"].SEARCH_RESULTS}))});X.propTypes={};var $={previousRequest:void 0,request:void 0,editableRequest:{query:"",queryFilter:{from:[],in:[],after:void 0,before:void 0},queryFilterHistory:{from:[],in:[],fileType:void 0},channelObjects:{}},suggestions:{from:[],in:[]},response:void 0,lastFetchAllRequestId:""};var ee=Object(d["c"])((O={},n()(O,Z,function(){return $}),n()(O,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query;return s()({},e,{editableRequest:s()({},e.editableRequest,{query:r})})}),n()(O,N,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.queryFilter;return s()({},e,{editableRequest:s()({},e.editableRequest,{queryFilter:r,queryFilterHistory:s()({},e.editableRequest.queryFilterHistory,{from:Object(l["uniq"])(Object(l["concat"])(e.editableRequest.queryFilterHistory.from||[],r.from||[])),in:Object(l["uniq"])(Object(l["concat"])(e.editableRequest.queryFilterHistory.in||[],r.in||[]))})}),suggestions:s()({},e.suggestions,{from:Object(l["uniq"])(Object(l["concat"])(e.suggestions&&e.suggestions.from||[],r.from||[])),in:Object(l["uniq"])(Object(l["concat"])(e.suggestions&&e.suggestions.in||[],r.in||[]))})})}),n()(O,F,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels;return s()({},e,{editableRequest:s()({},e.editableRequest,{channelObjects:r})})}),n()(O,L,function(e){return s()({},e,{editableRequest:s()({},$.editableRequest,{queryFilter:{from:[],in:[],before:void 0,after:void 0,fileType:void 0},queryFilterHistory:{from:[],in:[]}}),suggestions:{from:[],in:[]}})}),n()(O,P,function(e){return s()({},e,{previousRequest:e&&e.request,request:s()({},e.editableRequest,{requestInstanceId:Object(m["a"])()})})}),n()(O,B,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query,a=t.module,i=t.result;return s()({},e,{response:s()({},e.response||{},{query:r,results:s()({},e.response&&e.response.results||{},n()({},a,s()({},i,{items:n()({},i.pagination.page,i.items),requestIds:{1:i.request_id}}))),filters:i.filters?i.filters:{}})})}),n()(O,U,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module,a=t.result,i=t.page;return s()({},e,{response:s()({},e.response||{},{results:s()({},e.response&&e.response.results||{},n()({},r,s()({},e.response&&e.response.results&&e.response.results[r]||{},{items:s()({},e.response.results[r].items,n()({},a.pagination.page,a.items)),pagination:te(e.response.results[r].pagination,a.pagination),requestIds:s()({},e.response.results[r].requestIds,n()({},i,a.request_id))})))})})}),n()(O,M,function(e){return s()({},e,{response:$.response})}),n()(O,q,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.suggestions;return s()({},e,{suggestions:r})}),n()(O,H,function(e){return s()({},e,{suggestions:$.suggestions})}),n()(O,W,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return s()({},e,{lastFetchAllRequestId:r})}),O),$);t["default"]=ee;function te(e,t){return s()({},e,{last:t.last,total_count:t.total_count})}var re=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest});var ae=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilterHistory});var ne=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.from});var ie=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.in});var se=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.after});var oe=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.before});var ce=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.channelObjects});var le=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.editableRequest&&e.searchResults.editableRequest.queryFilter&&e.searchResults.editableRequest.queryFilter.fileType});var ue=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.request});var de=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest});var ve=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.previousRequest&&e.searchResults.previousRequest.query});var pe=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.response});var he=Object(d["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[r]});var fe=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.query});var me=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.lastFetchAllRequestId});var be=Object(d["d"])(function(e){return e&&e.searchResults&&e.searchResults.suggestions});var ge=Object(d["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.module,a=t.page,n=void 0===a?1:a;return e&&e.searchResults&&e.searchResults.response&&e.searchResults.response.results&&e.searchResults.response.results[r]&&e.searchResults.response.results[r].requestIds&&e.searchResults.response.results[r].requestIds[n]})},107:function(e,t,r){var a=r(86);e.exports=function(e,t,r){a(e);if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,a){return e.call(t,r,a)};case 3:return function(r,a,n){return e.call(t,r,a,n)}}return function(){return e.apply(t,arguments)}}},1074:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(20154);var y=r.n(_);var O={className:h.a.string};var k={className:null};var j=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props.className;var r=g()("c-input_radio",t);return m.a.createElement("input",n()({},this.props,{className:r,type:"radio"}))}}]);return t}(f["PureComponent"]);j.displayName="Radio";j.defaultProps=k;t["a"]=j},1075:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(335);var y=r(336);var O=r(3171);var k=r(20156);var j=r.n(k);var C={children:v.a.node.isRequired,className:v.a.string,errorId:v.a.string,errorLevel:v.a.oneOf(Object(b["values"])(_["b"])),errorText:v.a.string,errorType:v.a.oneOf(Object(b["values"])(_["c"])),hintText:v.a.string,hintId:v.a.string,isDisabled:v.a.bool,isRequired:v.a.bool,legendId:v.a.string,legendText:v.a.string};var E={className:null,errorId:null,errorLevel:_["b"].error,errorText:null,errorType:_["c"].nestedBox,hintText:null,hintId:null,isDisabled:false,isRequired:false,legendId:null,legendText:null};var S=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getAriaLabelledById",value:function e(){var t=this.props,r=t.legendId,a=t.errorId;if(!r&&!a)return null;return[r,a].join(" ").trim()}},{key:"renderErrorMaybe",value:function e(){var t=this.props,r=t.errorId,a=t.errorLevel,n=t.errorText,i=t.errorType;if(n)return h.a.createElement(_["d"],{id:r,level:a,type:i,className:"c-alert--error"},n);return null}},{key:"renderHintMaybe",value:function e(){var t=this.props,r=t.hintId,a=t.hintText;if(a)return h.a.createElement(y["a"],{id:r},a);return null}},{key:"renderLegendMaybe",value:function e(){var t=this.props,r=t.legendId,a=t.legendText;if(a)return h.a.createElement(O["a"],{id:r},a);return null}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.errorText,n=t.hintId,i=t.hintText,s=t.isDisabled,o=t.isRequired;var c=m()("c-radiogroup",{"c-radiogroup--with_error":a,"c-radiogroup--with_hint":i},r);var l=h.a.createElement("fieldset",{"aria-describedby":n,"aria-invalid":a?"true":"false","aria-labelledby":this.getAriaLabelledById(),"aria-required":o,className:c,disabled:s},this.renderLegendMaybe(),this.props.children);return h.a.createElement("div",null,l,this.renderErrorMaybe(),this.renderHintMaybe())}}]);return t}(h.a.Component);S.displayName="Radiogroup";S.defaultProps=E;t["a"]=S},108:function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},1081:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(21703);var m={additionalItemCopy:v.a.string,item:v.a.object};var b={additionalItemCopy:"",item:{}};var g=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalItemCopy,a=t.item;var n=a.team.icon.image_44+" 1x, "+a.team.icon.image_88+" 2x";return h.a.createElement("div",{className:"c-lazy_filter_select__team_item",key:"team-list-item-"+a.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_list_icon",src:a.team.icon.image_44,srcSet:n}),h.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(f["getTeamDisplayName"])(a.team)," ",r&&h.a.createElement("span",null," - ",r)))}}]);return t}(p["PureComponent"]);g.displayName="LazyFilterSelectTeamListItem";t["a"]=g;g.defaultProps=b},1082:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(21703);var m={additionalItemCopy:v.a.string,item:v.a.object};var b={additionalItemCopy:"",item:{}};var g=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalItemCopy,a=t.item;return h.a.createElement("div",{className:"c-lazy_filter_select__team_token",key:"team-token-"+a.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_token_icon",src:a.team.icon.image_44}),h.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(f["getTeamDisplayName"])(a.team)," ",r&&h.a.createElement("span",null," - ",r)))}}]);return t}(p["PureComponent"]);g.displayName="LazyFilterSelectTeamToken";t["a"]=g;g.defaultProps=b},1083:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={item:v.a.object};var m={item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;var r=t.member.profile.image_48+" 1x, "+t.member.profile.image_72+" 2x";return h.a.createElement("div",{className:"c-lazy_filter_select__member_item"},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_list_icon",src:t.member.profile.image_48,srcSet:r}),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},"@",t.member.name))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectMemberListItem";t["a"]=b;b.defaultProps=m},1084:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={item:v.a.object};var m={item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;return h.a.createElement("div",{className:"c-lazy_filter_select__member_token",key:t.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_token_icon",src:t.member.profile.image_48}),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},t.member.profile.real_name))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectMemberToken";t["a"]=b;b.defaultProps=m},1085:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(2095);var m=r(2096);var b=r(2097);var g={select:"select",text:"text",textarea:"textarea"};var _={error:v.a.string,dialogId:v.a.string.isRequired,input:v.a.object.isRequired,isSubmitting:v.a.bool,onBlur:v.a.func.isRequired,onChange:v.a.func.isRequired,onFocus:v.a.func.isRequired,value:v.a.string};var y={error:null,isSubmitting:false,value:""};var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,c=t.onFocus,l=t.value;var u={error:r,dialogId:a,input:n,isSubmitting:i,onBlur:s,onChange:o,onFocus:c,value:l};switch(n.type){case g.select:return h.a.createElement(f["a"],u);case g.text:return h.a.createElement(m["a"],u);case g.textarea:return h.a.createElement(b["a"],u);default:return}}}]);return t}(h.a.Component);O.displayName="AppDialogInput";t["b"]=O;O.defaultProps=y},1087:function(e,t,r){"use strict";var a=r(1088);t["a"]=a["a"]},1088:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(1);var l=r.n(c);var u=r(271);var d=r(5);var v=new d["b"]("generic_dialog");var p={children:n.a.any.isRequired,cancelButtonText:n.a.string,"data-qa":n.a.string,goButtonText:n.a.string,goButtonType:n.a.string,onCancel:n.a.func,onGo:n.a.func,showCancelButton:n.a.bool,title:n.a.string,truncateTitle:n.a.bool};var h={cancelButtonText:null,"data-qa":"alert_dialog",goButtonText:null,goButtonType:"primary",onCancel:c["noop"],onGo:c["noop"],showCancelButton:false,title:null,truncateTitle:true};function f(e){var t=e.children,r=e.cancelButtonText,a=e["data-qa"],n=e.goButtonText,i=e.goButtonType,o=e.onCancel,c=e.onGo,l=e.showCancelButton,d=e.title,p=e.truncateTitle;return s.a.createElement(u["a"],{cancelText:r||v.t("Cancel"),"data-qa":a,goButtonText:n||v.t("OK"),goButtonType:i,onCancel:o,onGo:c,role:"alertdialog",showCancelButton:l,title:d,truncateTitle:p},t)}f.displayName="AlertDialog";f.defaultProps=h;t["a"]=Object(o["pure"])(f)},109:function(e,t,r){var a=r(81);var n=r(76);var i=r(241)("IE_PROTO");var s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=n(e);if(a(e,i))return e[i];if("function"==typeof e.constructor&&e instanceof e.constructor)return e.constructor.prototype;return e instanceof Object?s:null}},1090:function(e,t,r){"use strict";t["a"]=o;var a=r(1395);var n=r.n(a);var i=r(1);var s=r.n(i);function o(e,t){return s()(e.split(/(\ue000[^\ue001]+\ue001)/g)).chunk(2).map(function(e,r){var a=n()(e,2),i=a[0],s=a[1];return[i,s?t(s.replace(/\ue000/g,"").replace(/\ue001/g,""),r):""]}).flatten().value()}},1094:function(e,t,r){"use strict";var a=r(2181);t["a"]=a["a"]},1099:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(20183);var y=r.n(_);var O={types:v.a.arrayOf(v.a.shape({name:v.a.string,id:v.a.id})).isRequired,onSelection:v.a.func,selected:v.a.string};var k={onSelection:f["noop"],selected:""};var j=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSwitchItem=r.renderSwitchItem.bind(r);return r}s()(t,[{key:"renderSwitchItem",value:function e(t){var r=this;var a=t.name,n=t.id;return h.a.createElement("button",{key:n,className:g()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.selected===n}),onClick:function e(){return r.props.onSelection(n)},"aria-selected":this.props.selected===n,role:"tab"},a)}},{key:"render",value:function e(){var t=this;return h.a.createElement("div",{role:"tablist",className:"c-search__tabs c-tabs__tab_menu"},this.props.types.map(function(e){return t.renderSwitchItem(e)}))}}]);return t}(p["PureComponent"]);j.displayName="SearchTypeSwitch";t["a"]=j;j.defaultProps=k},1100:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(1102);var g=r(1101);var _=r(20238);var y=r.n(_);var O={os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,keyboardLocale:h.a.string,id:h.a.string,title:h.a.string,shortcuts:h.a.arrayOf(h.a.shape({os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,title:h.a.string,keys:h.a.array,keysLinux:h.a.array,keysWin:h.a.array,hasInfoButton:h.a.bool,infoButtonMessage:h.a.string,id:h.a.string,isSsbOnly:h.a.bool,browserBlackList:h.a.array,localeBlackList:h.a.array}))};var k={os:null,browser:null,keyboardLocale:null,title:null,id:null,shortcuts:[]};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderShortcuts",value:function e(){var t=this;return m.a.map(this.props.shortcuts,function(e){return v.a.createElement(g["a"],{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,localeBlackList:e.localeBlackList,key:e.title+e.keys,title:e.title,isSsbOnly:e.isSsbOnly,keys:e.keys,keysLinux:e.keysLinux,keysWin:e.keysWin,hasInfoButton:e.hasInfoButton,infoButtonMessage:e.infoButtonMessage,id:e.id,browserBlackList:e.browserBlackList})})}},{key:"render",value:function e(){if("all_unreads"===this.props.id&&!Object(b["b"])())return null;if("workspaces"===this.props.id&&"ssb"!==this.props.os)return null;return v.a.createElement("div",{className:"p-shortcuts_flexpane__section_container"},v.a.createElement("h3",{className:"p-shortcuts_flexpane__title"},this.props.title),v.a.createElement("ul",{className:"p-shortcuts_flexpane__list"},this.renderShortcuts()))}}]);return t}(v.a.PureComponent);j.displayName="ShortcutsSection";j.defaultProps=k;t["a"]=j},1101:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(60);var y=r(37);var O=r(1102);var k=r(21708);var j=r(20236);var C=r.n(j);var E=r(20286);var S=r.n(E);var w={os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,keyboardLocale:h.a.string,localeBlackList:h.a.array,title:h.a.string,keys:h.a.array,keysLinux:h.a.array,keysWin:h.a.array,hasInfoButton:h.a.bool,infoButtonMessage:h.a.string,id:h.a.string,isSsbOnly:h.a.bool,browserBlackList:h.a.array};var I={os:null,browser:null,keyboardLocale:null,localeBlackList:null,title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:false,infoButtonMessage:"",id:null,isSsbOnly:false,browserBlackList:[]};var T={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"};var N=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getKeys",value:function e(){var t=this.props,r=t.keys,a=t.keysWin,n=t.keysLinux,i=t.os;if(null!=a&&"windows"===i)return a;if(null!=n&&"linux"===i)return n;return r}},{key:"execShortcut",value:function e(t){Object(O["a"])(t);Object(k["c"])("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function e(t){var r=this.props.os;var a="windows"===r||"linux"===r;if(T[t])return v.a.createElement(y["a"],{type:T[t]});if(("Cmd"===t||"Control"===t)&&a)return"Ctrl";if("Option"===t&&a)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t}},{key:"renderKeys",value:function e(){var t=this;return this.getKeys().map(function(e){var r=e.split("key_")[1];if(!r)return e;var a=!!T[r];var n=m()({"p-shortcuts_flexpane__arrow_key":a,"c-keyboard_key":true});return v.a.createElement("div",{key:t.props.title+" "+e,className:n},t.renderKeyLabel(r))})}},{key:"renderInfoButton",value:function e(){if(this.props.hasInfoButton)return v.a.createElement(_["d"],{tip:this.props.infoButtonMessage,delay:_["b"]},v.a.createElement(y["a"],{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}));return null}},{key:"renderTitle",value:function e(){var t=this;if(null==this.props.id)return v.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},v.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title",key:"title "+this.props.title},this.props.title,this.renderInfoButton()));var r=m()("p-shortcuts_flexpane__shortcut_title","btn_link",this.props.id);return v.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},v.a.createElement("button",{type:"button",onClick:function e(){return t.execShortcut(t.props.id)},className:r,key:this.props.title+" shortcut_title"},this.props.title,this.renderInfoButton()))}},{key:"render",value:function e(){var t="ssb"===this.props.browser;if(this.props.isSsbOnly&&!t)return null;var r=null==this.props.browserBlackList?[]:this.props.browserBlackList;var a=Object(b["includes"])(r,this.props.browser)||Object(b["includes"])(r,this.props.os);if(a)return null;var n=null==this.props.localeBlackList?[]:this.props.localeBlackList;var i=Object(b["includes"])(n,this.props.keyboardLocale);if(i)return null;if("open_all_unreads"===this.props.id&&!Object(O["b"])())return null;var s=null==this.props.id?"":"p-shortcuts_flexpane__shortcut_hoverable";var o=m()("p-shortcuts_flexpane__shortcut",s);return v.a.createElement("li",{className:o,key:this.props.title+" shortcut"},this.renderTitle(),v.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys",key:this.props.title+" shortcut_keys"},this.renderKeys()))}}]);return t}(v.a.PureComponent);N.displayName="Shortcut";N.defaultProps=I;t["a"]=N},1102:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(10);var n=Object(a["c"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var i=Object(a["c"])("TS.client.unread.isEnabled",function(){return null})},1103:function(e,t,r){"use strict";t["a"]=u;var a=r(5);var n=r(1);var i=r.n(n);var s=r(21720);var o=r(3044);var c=r(168);var l=new a["b"]("shortcuts_flexpane");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.featureTextyFormattingCommands,a=t.featureJumpToUnreadShortcut,i=t.featureA11yCustomStatus,u=t.featureThreadsCopyChange;var d=[{title:l.t("Basics"),id:"basics",shortcuts:[{title:l.t("Quick Switcher"),keys:["key_Cmd","key_K","  or  ","key_T"],hasInfoButton:true,infoButtonMessage:l.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",isSsbOnly:true},{title:l.t("Quick Switcher"),keys:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:l.t("Jump to another conversation by just typing its name",{fallbackHash:"137fbaf2c3cf03812df6ffc1116ae35390b63057"}),id:"quick_switcher",browserBlackList:["ssb"]},{title:l.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:l.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:l.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:l.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:l.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:u?l.t("Threads"):l.t("All Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:l.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:l.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:l.t("Navigation"),id:"navigation",shortcuts:[{title:l.t("Move focus to the next element"),keys:["key_Tab"]},{title:l.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:l.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:l.t("Move focus to the next section"),keys:Object(c["a"])()?["key_F6"]:["key_Cmd","key_F6"]},{title:l.t("Move focus to the previous section"),keys:Object(c["a"])()?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:l.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:l.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:l.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:l.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:l.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:l.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:l.t("Open or close right pane"),keys:["key_Cmd","key_"+Object(s["c"])(".",{kb:e})]},{title:l.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:l.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome_desktop","chrome_mobile"]},{title:l.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["ff"]},{title:l.t("Starred items"),keys:i?["key_Cmd","key_Option","key_S"]:["key_Cmd","key_Shift","key_S"],keysWin:i?["key_Cmd","key_Alt","key_S"]:["key_Cmd","key_Shift","key_S"],keysLinux:i?["key_Cmd","key_Alt","key_S"]:["key_Cmd","key_Shift","key_S"]},{title:l.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:l.t("Messaging"),id:"messaging",shortcuts:[{title:l.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:l.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:l.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:l.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(s["c"])("\\",{kb:e})]},{title:l.t("Autocomplete @username"),keys:["key_@"]},{title:l.t("Autocomplete channel"),keys:["key_#"]},{title:l.t("Autocomplete emoji"),keys:["key_:"]}]},{title:l.t("Mark Messages Read and Unread"),shortcuts:[{title:l.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:l.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:l.t("Mark a message as unread"),keys:["key_Alt",l.t("  and click message")]}]},{title:l.t("Channels & Direct Messages"),shortcuts:[{title:l.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:l.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:l.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:l.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:l.t("All Unreads"),id:"all_unreads",shortcuts:[{title:l.t("Next channel"),keys:["key_\u2192"]},{title:l.t("Previous channel"),keys:["key_\u2190"]},{title:l.t("Mark channel as read"),keys:["key_R"]}]},{title:l.t("Files and Snippets"),shortcuts:[{title:l.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:l.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:l.t("Calls"),shortcuts:[{title:l.t("Toggle mute"),keys:["key_M"]},{title:l.t("Toggle video"),keys:["key_V"]},{title:l.t("Invite list"),keys:["key_+",l.t("  or  "),"key_A"]},{title:l.t("Emoji reactions"),keys:["key_E",l.t("  then 1-9")]}]},{title:l.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:l.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["]},{title:l.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"]},{title:l.t("A specific workspace"),keys:["key_Cmd",l.t("  and 1-9")]}]}];var v=d[Object(n["findIndex"])(d,["id","basics"])].shortcuts;var p=d[Object(n["findIndex"])(d,["id","navigation"])].shortcuts;var h=d[Object(n["findIndex"])(d,["id","messaging"])].shortcuts;a&&Object(c["a"])()&&p.push({title:l.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});if(r){h.push({title:l.t("Bold text"),keys:["key_Cmd","key_B"]});h.push({title:l.t("Italic text"),keys:["key_Cmd","key_I"]});h.push({title:l.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});h.push({title:l.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!Object(c["a"])()||Object(o["isSSBAndAtLeastVersion"])("3.0.0")){h.push({title:l.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});h.push({title:l.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}h.push({title:l.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]})}i&&v.push({title:i?l.t("Set a status"):"",keys:["key_Cmd","key_Shift","key_S"]});return d}},1104:function(e,t,r){"use strict";r.d(t,"c",function(){return o});r.d(t,"b",function(){return c});r.d(t,"a",function(){return u});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.client.ui.search_in_react.getPopoverPosition",n.a.noop);var o=Object(i["c"])("TS.client.ui.search_in_react.close",n.a.noop);var c=Object(i["c"])("TS.client.ui.search_in_react.clearLegacySearchInput",n.a.noop);var l=Object(i["c"])("TS.templates.search_menu_unified_autocomplete",n.a.noop);var u=Object(i["c"])("TS.templates.search_menu_unified_autocomplete_token_list",n.a.noop)},1105:function(e,t,r){t.f=r(53)},1106:function(e,t,r){var a=r(101);var n=r(247).f;var i={}.toString;var s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var o=function(e){try{return n(e)}catch(e){return s.slice()}};e.exports.f=function e(t){return s&&"[object Window]"==i.call(t)?o(t):n(a(t))}},1107:function(e,t,r){"use strict";var a=r(159);var n=r(416);var i=r(362);var s=r(76);var o=r(240);var c=Object.assign;e.exports=!c||r(51)(function(){var e={};var t={};var r=Symbol();var a="abcdefghijklmnopqrst";e[r]=7;a.split("").forEach(function(e){t[e]=e});return 7!=c({},e)[r]||Object.keys(c({},t)).join("")!=a})?function e(t,r){var c=s(t);var l=arguments.length;var u=1;var d=n.f;var v=i.f;while(l>u){var p=o(arguments[u++]);var h=d?a(p).concat(d(p)):a(p);var f=h.length;var m=0;var b;while(f>m)v.call(p,b=h[m++])&&(c[b]=p[b])}return c}:c},1108:function(e,t,r){"use strict";var a=r(86);var n=r(52);var i=r(1109);var s=[].slice;var o={};var c=function(e,t,r){if(!(t in o)){for(var a=[],n=0;n<t;n++)a[n]="a["+n+"]";o[t]=Function("F,a","return new F("+a.join(",")+")")}return o[t](e,r)};e.exports=Function.bind||function e(t){var r=a(this);var o=s.call(arguments,1);var l=function(){var e=o.concat(s.call(arguments));return this instanceof l?c(r,e.length,e):i(r,e,t)};n(r.prototype)&&(l.prototype=r.prototype);return l}},1109:function(e,t){e.exports=function(e,t,r){var a=void 0===r;switch(t.length){case 0:return a?e():e.call(r);case 1:return a?e(t[0]):e.call(r,t[0]);case 2:return a?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},1113:function(e,t,r){var a=r(52);var n=Math.floor;e.exports=function e(t){return!a(t)&&isFinite(t)&&n(t)===t}},1114:function(e,t){e.exports=Math.log1p||function e(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},1115:function(e,t,r){var a=r(762);var n=Math.pow;var i=n(2,-52);var s=n(2,-23);var o=n(2,127)*(2-s);var c=n(2,-126);var l=function(e){return e+1/i-1/i};e.exports=Math.fround||function e(t){var r=Math.abs(t);var n=a(t);var u,d;if(r<c)return n*l(r/c/s)*c*s;u=(1+s/i)*r;d=u-(u-r);if(d>o||d!=d)return Infinity*n;return n*d}},1117:function(e,t,r){"use strict";var a=r(76);var n=r(160);var i=r(67);e.exports=[].copyWithin||function e(t,r){var s=a(this);var o=i(s.length);var c=n(t,o);var l=n(r,o);var u=arguments.length>2?arguments[2]:void 0;var d=Math.min((void 0===u?o:n(u,o))-l,o-c);var v=1;if(l<c&&c<l+d){v=-1;l+=d-1;c+=d-1}while(d-- >0){l in s?s[c]=s[l]:delete s[c];c+=v;l+=v}return s}},1118:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},1119:function(e,t,r){r(62)&&"g"!=/./g.flags&&r(61).f(RegExp.prototype,"flags",{configurable:true,get:r(419)})},1122:function(e,t,r){"use strict";var a=r(1123);var n=r(281);var i="Map";e.exports=r(422)(i,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function e(t){var r=a.getEntry(n(this,i),t);return r&&r.v},set:function e(t,r){return a.def(n(this,i),0===t?0:t,r)}},a,true)},1123:function(e,t,r){"use strict";var a=r(61).f;var n=r(158);var i=r(251);var s=r(107);var o=r(249);var c=r(250);var l=r(348);var u=r(1118);var d=r(248);var v=r(62);var p=r(197).fastKey;var h=r(281);var f=v?"_s":"size";var m=function(e,t){var r=p(t);var a;if("F"!==r)return e._i[r];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,r,l){var u=e(function(e,a){o(e,u,t,"_i");e._t=t;e._i=n(null);e._f=void 0;e._l=void 0;e[f]=0;void 0!=a&&c(a,r,e[l],e)});i(u.prototype,{clear:function e(){for(var r=h(this,t),a=r._i,n=r._f;n;n=n.n){n.r=true;n.p&&(n.p=n.p.n=void 0);delete a[n.i]}r._f=r._l=void 0;r[f]=0},delete:function(e){var r=h(this,t);var a=m(r,e);if(a){var n=a.n;var i=a.p;delete r._i[a.i];a.r=true;i&&(i.n=n);n&&(n.p=i);r._f==a&&(r._f=n);r._l==a&&(r._l=i);r[f]--}return!!a},forEach:function e(r){h(this,t);var a=s(r,arguments.length>1?arguments[1]:void 0,3);var n;while(n=n?n.n:this._f){a(n.v,n.k,this);while(n&&n.r)n=n.p}},has:function e(r){return!!m(h(this,t),r)}});v&&a(u.prototype,"size",{get:function(){return h(this,t)[f]}});return u},def:function(e,t,r){var a=m(e,t);var n,i;if(a)a.v=r;else{e._l=a={i:i=p(t,true),k:t,v:r,p:n=e._l,n:void 0,r:false};e._f||(e._f=a);n&&(n.n=a);e[f]++;"F"!==i&&(e._i[i]=a)}return e},getEntry:m,setStrong:function(e,t,r){l(e,t,function(e,r){this._t=h(e,t);this._k=r;this._l=void 0},function(){var e=this;var t=e._k;var r=e._l;while(r&&r.r)r=r.p;if(!e._t||!(e._l=r=r?r.n:e._t._f)){e._t=void 0;return u(1)}if("keys"==t)return u(0,r.k);if("values"==t)return u(0,r.v);return u(0,[r.k,r.v])},r?"entries":"values",!r,true);d(t)}}},1124:function(e,t,r){"use strict";var a=r(1123);var n=r(281);var i="Set";e.exports=r(422)(i,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function e(t){return a.def(n(this,i),t=0===t?0:t,t)}},a)},1125:function(e,t,r){"use strict";var a=r(143)(0);var n=r(92);var i=r(197);var s=r(1107);var o=r(1126);var c=r(52);var l=r(51);var u=r(281);var d="WeakMap";var v=i.getWeak;var p=Object.isExtensible;var h=o.ufstore;var f={};var m;var b=function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}};var g={get:function e(t){if(c(t)){var r=v(t);if(true===r)return h(u(this,d)).get(t);return r?r[this._i]:void 0}},set:function e(t,r){return o.def(u(this,d),t,r)}};var _=e.exports=r(422)(d,b,g,o,true,true);if(l(function(){return 7!=(new _).set((Object.freeze||Object)(f),7).get(f)})){m=o.getConstructor(b,d);s(m.prototype,g);i.NEED=true;a(["delete","has","get","set"],function(e){var t=_.prototype;var r=t[e];n(t,e,function(t,a){if(c(t)&&!p(t)){this._f||(this._f=new m);var n=this._f[e](t,a);return"set"==e?this:n}return r.call(this,t,a)})})}},1126:function(e,t,r){"use strict";var a=r(251);var n=r(197).getWeak;var i=r(47);var s=r(52);var o=r(249);var c=r(250);var l=r(143);var u=r(81);var d=r(281);var v=l(5);var p=l(6);var h=0;var f=function(e){return e._l||(e._l=new m)};var m=function(){this.a=[]};var b=function(e,t){return v(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var r=b(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});~t&&this.a.splice(t,1);return!!~t}};e.exports={getConstructor:function(e,t,r,i){var l=e(function(e,a){o(e,l,t,"_i");e._t=t;e._i=h++;e._l=void 0;void 0!=a&&c(a,r,e[i],e)});a(l.prototype,{delete:function(e){if(!s(e))return false;var r=n(e);if(true===r)return f(d(this,t))["delete"](e);return r&&u(r,this._i)&&delete r[this._i]},has:function e(r){if(!s(r))return false;var a=n(r);if(true===a)return f(d(this,t)).has(r);return a&&u(a,this._i)}});return l},def:function(e,t,r){var a=n(i(t),true);true===a?f(e).set(t,r):a[e._i]=r;return e},ufstore:f}},1127:function(e,t,r){var a=r(105);var n=r(67);e.exports=function(e){if(void 0===e)return 0;var t=a(e);var r=n(t);if(t!==r)throw RangeError("Wrong length!");return r}},1128:function(e,t,r){var a=r(247);var n=r(416);var i=r(47);var s=r(48).Reflect;e.exports=s&&s.ownKeys||function e(t){var r=a.f(i(t));var s=n.f;return s?r.concat(s(t)):r}},1130:function(e,t,r){var a=r(67);var n=r(761);var i=r(106);e.exports=function(e,t,r,s){var o=String(i(e));var c=o.length;var l=void 0===r?" ":String(r);var u=a(t);if(u<=c||""==l)return o;var d=u-c;var v=n.call(l,Math.ceil(d/l.length));v.length>d&&(v=v.slice(0,d));return s?v+o:o+v}},1131:function(e,t,r){var a=r(159);var n=r(101);var i=r(362).f;e.exports=function(e){return function(t){var r=n(t);var s=a(r);var o=s.length;var c=0;var l=[];var u;while(o>c)i.call(r,u=s[c++])&&l.push(e?[u,r[u]]:r[u]);return l}}},1138:function(e,t,r){"use strict";t["a"]=n;var a=r(363);function n(e){var t=e.storage;var r=""+(void 0!==e.keyPrefix?e.keyPrefix:a["c"])+e.key;return t.removeItem(r,i)}function i(e){e&&false}},1139:function(e,t,r){"use strict";t["a"]=n;var a=r(363);function n(e){var t=e.transforms||[];var r=""+(void 0!==e.keyPrefix?e.keyPrefix:a["c"])+e.key;var n=e.storage;var s=e.debug;var o=false===e.serialize?function(e){return e}:i;return n.getItem(r).then(function(e){if(!e)return;try{var r={};var a=o(e);Object.keys(a).forEach(function(e){r[e]=t.reduceRight(function(t,r){return r.out(t,e,a)},o(a[e]))});return r}catch(e){false;throw e}})}function i(e){return JSON.parse(e)}},1141:function(e,t,r){"use strict";t["a"]=c;var a=r(21700);var n=r(1007);var i=1.75;var s=10;function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;var l=e.channelId,u=e.ts,d=e.broadcastDelete;if(Object(n["isTempTs"])(u)){t(new Error("message_not_found"));return}var v={channel:l,ts:u};d&&(v.broadcast_delete=true);Object(a["c"])("chat.delete",v).then(function(){t()}).catch(function(a){var n=a.data;if("message_not_found"===n.error&&r<s){var l=r+1;var u=c*i;setTimeout(function(){o(e,t,l,u)},u)}else t(new Error(n.error||"unknown_error"))})}function c(e){return new Promise(function(t,r){o(e,function(e){e?r(e):t()})})}},122:function(e,t,r){var a=r(52);e.exports=function(e,t){if(!a(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!a(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!a(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!a(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},1224:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.client.stats.isEnabled",function(){return false})},1225:function(e,t,r){"use strict";r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return c});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.client.msg_input.populate",n.a.noop);var o=Object(i["c"])("TS.client.msg_input.focusMsgInput",n.a.noop);var c=Object(i["c"])("TS.client.msg_input.value",function(){return""})},1226:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.channels.read_only.stashAndFetchChannelPostingUpdates",a["noop"])},123:function(e,t,r){var a=r(362);var n=r(135);var i=r(101);var s=r(122);var o=r(81);var c=r(406);var l=Object.getOwnPropertyDescriptor;t.f=r(62)?l:function e(t,r){t=i(t);r=s(r,true);if(c)try{return l(t,r)}catch(e){}if(o(t,r))return n(!a.f.call(t,r),t[r])}},13041:function(e,t,r){var a={"./accessibility-store.js":21948,"./all-unreads-store.js":377,"./boot-data-store.js":12,"./channel-sidebar-folders-store.js":21865,"./channel-sidebar-store.js":190,"./custom-emoji-store.js":21795,"./deleted-messages-store.js":905,"./desktop-store.ts":21746,"./dnd-store.js":975,"./downloads-store.js":1061,"./expandables-store.js":191,"./experiments-store.js":22259,"./file-refresh-store.js":3089,"./file-update-store.js":21754,"./file-upload-store.js":1024,"./files-flexpane-store.js":21822,"./flexpane-store.js":21751,"./global-nav-store.ts":21874,"./i18n-store.js":21942,"./incremental-boot-store.js":428,"./inline-file-previews-store.js":385,"./message-edit-store.js":3051,"./message-pane-banner-store.js":21808,"./message-pane-store.js":124,"./modal-store.js":21705,"./navigation-history-store.ts":21782,"./noop-store.js":1597,"./pending-open-channel-store.js":21797,"./pins-store.js":284,"./prefs-store.js":54,"./presence-store.js":376,"./search-autocomplete-store.js":21742,"./search-input-box-store.js":21725,"./search-results-store.js":1068,"./search-ui-store.js":268,"./slash-command-store.js":21789,"./socket-store.js":85,"./thread-sub-store.js":21806,"./threads-flexpane-store.js":21951,"./toast-store.js":21727,"./typing-store.js":974,"./users-counts-store.js":21877};function n(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=13041},13042:function(e,t,r){var a={"./admin-members-store.js":21735,"./app-actions-store.js":21731,"./app-permissions-store.js":21733,"./app-profiles-store.js":21728,"./apps-store.js":3284,"./bots-store.js":3275,"./calls-store.ts":23009,"./canvases-store.js":3279,"./customize-emoji-store.js":22975,"./developer-actions-store.js":21813,"./developer-apps-store.js":22245,"./emoji-store.js":3288,"./enterprise-store.js":3278,"./environment-store.js":3287,"./idp-groups-store.js":21819,"./last-network-send-store.js":21857,"./member-counts-store.js":21722,"./membership-store.js":21749,"./messages-meta-store.js":3274,"./notifications-store.ts":21863,"./reactions-store.ts":21740,"./sli-realtime-priority-store.js":21866,"./team-id-store.js":3270,"./teams-store.js":3271,"./window-store.js":3277};function n(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=13042},135:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},136:function(e,t){var r=0;var a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+a).toString(36))}},13671:function(e,t,r){"use strict";t["a"]=d;var a=r(363);var n=r(13673);var i=r(13672);var s=r(1139);var o=r(1138);var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function l(e,t){var r={};for(var a in e){if(t.indexOf(a)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,a))continue;r[a]=e[a]}return r}var u=5e3;function d(e,t){false;var r=void 0!==e.version?e.version:a["a"];var d=e.debug||false;var v=void 0===e.stateReconciler?n["a"]:e.stateReconciler;var p=e.getStoredState||s["a"];var h=void 0!==e.timeout?e.timeout:u;var f=null;var m=false;var b=true;var g=function e(t){t._persist.rehydrated&&f&&!b&&f.update(t);return t};return function(n,s){var u=n||{},d=u._persist,_=l(u,["_persist"]);var y=_;if(s.type===a["e"]){var O=false;var k=function t(r,a){false;if(!O){s.rehydrate(e.key,r,a);O=true}};h&&setTimeout(function(){!O&&k(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},h);b=false;f||(f=Object(i["a"])(e));if(d)return n;if("function"!==typeof s.rehydrate||"function"!==typeof s.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");s.register(e.key);p(e).then(function(t){var a=e.migrate||function(e,t){return Promise.resolve(e)};a(t,r).then(function(e){k(e)},function(e){false;k(void 0,e)})},function(e){k(void 0,e)});return c({},t(y,s),{_persist:{version:r,rehydrated:false}})}if(s.type===a["f"]){m=true;s.result(Object(o["a"])(e));return c({},t(y,s),{_persist:d})}if(s.type===a["b"]){s.result(f&&f.flush());return c({},t(y,s),{_persist:d})}if(s.type===a["d"])b=true;else if(s.type===a["h"]){if(m)return c({},y,{_persist:c({},d,{rehydrated:true})});if(s.key===e.key){var j=t(y,s);var C=s.payload;var E=false!==v&&void 0!==C?v(C,n,j,e):j;var S=c({},E,{_persist:c({},d,{rehydrated:true})});return g(S)}}if(!d)return t(n,s);var w=t(y,s);if(w===y)return n;w._persist=d;return g(w)}}},13672:function(e,t,r){"use strict";t["a"]=n;var a=r(363);function n(e){var t=e.blacklist||null;var r=e.whitelist||null;var n=e.transforms||[];var s=e.throttle||0;var o=""+(void 0!==e.keyPrefix?e.keyPrefix:a["c"])+e.key;var c=e.storage;var l=false===e.serialize?function(e){return e}:i;var u={};var d={};var v=[];var p=null;var h=null;var f=function e(t){Object.keys(t).forEach(function(e){var r=t[e];if(!g(e))return;if(u[e]===t[e])return;if(-1!==v.indexOf(e))return;v.push(e)});null===p&&(p=setInterval(m,s));u=t};function m(){if(0===v.length){p&&clearInterval(p);p=null;return}var e=v.shift();var t=n.reduce(function(t,r){return r.in(t,e,u)},u[e]);"undefined"!==typeof t&&b(e,t)}function b(e,t){try{d[e]=l(t)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}if(0===v.length){Object.keys(d).forEach(function(e){void 0===u[e]&&delete d[e]});h=c.setItem(o,l(d)).catch(_)}}function g(e){if(r&&-1===r.indexOf(e)&&"_persist"!==e)return false;if(t&&-1!==t.indexOf(e))return false;return true}function _(e){e&&false}var y=function e(){while(0!==v.length)m();return h||Promise.resolve()};return{update:f,flush:y}}function i(e){return JSON.stringify(e)}},13673:function(e,t,r){"use strict";t["a"]=i;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function i(e,t,r,i){var s=i.debug;var o=n({},r);e&&"object"===("undefined"===typeof e?"undefined":a(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}o[a]=e[a]});false;return o}},13674:function(e,t,r){"use strict";t["a"]=s;var a=r(295);var n=r(13671);var i=r(13675);function s(e,t){e.stateReconciler=void 0===e.stateReconciler?i["a"]:e.stateReconciler;return Object(n["a"])(e,Object(a["combineReducers"])(t))}},13675:function(e,t,r){"use strict";t["a"]=i;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function i(e,t,r,i){var o=i.debug;var c=n({},r);e&&"object"===("undefined"===typeof e?"undefined":a(e))&&Object.keys(e).forEach(function(a){if("_persist"===a)return;if(t[a]!==r[a]){false;return}if(s(r[a])){c[a]=n({},c[a],e[a]);return}c[a]=e[a]});false;return c}function s(e){return null!==e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":a(e))}},13676:function(e,t,r){"use strict";t["a"]=n;var a=r(363);function n(e,t){var r=t||{},n=r.debug;return function(t,r){if(!t){false;return Promise.resolve(void 0)}var n=t._persist&&void 0!==t._persist.version?t._persist.version:a["a"];if(n===r){false;return Promise.resolve(t)}if(n>r){false;return Promise.resolve(t)}var i=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return r>=e&&e>n}).sort(function(e,t){return e-t});false;try{var s=i.reduce(function(t,r){false;return e[r](t)},t);return Promise.resolve(s)}catch(e){return Promise.reject(e)}}}},13677:function(e,t,r){"use strict";t.__esModule=true;var a=r(13678);var n=i(a);function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)("local")},13678:function(e,t,r){"use strict";t.__esModule=true;t.default=s;var a=r(13679);var n=i(a);function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=(0,n.default)(e);return{getItem:function e(r){return new Promise(function(e,a){e(t.getItem(r))})},setItem:function e(r,a){return new Promise(function(e,n){e(t.setItem(r,a))})},removeItem:function e(r){return new Promise(function(e,a){e(t.removeItem(r))})}}}},13679:function(e,t,r){"use strict";t.__esModule=true;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;function n(){}var i={getItem:n,setItem:n,removeItem:n};function s(e){if("object"!==("undefined"===typeof self?"undefined":a(self))||!(e in self))return false;try{var t=self[e];var r="redux-persist "+e+" test";t.setItem(r,"test");t.getItem(r);t.removeItem(r)}catch(e){false;return false}return true}function o(e){var t=e+"Storage";if(s(t))return self[t];false;return i}},141:function(e,t){e.exports={}},1412:function(e,t,r){"use strict";var a=r(1413);t["a"]=a["a"]},1413:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(9);var s=r(1);var o=r.n(s);var c=r(428);var l=r(190);var u=r(21865);var d=r(54);var v=r(21697);var p=r(3276);var h=r(377);var f=r(21698);var m=r(12);var b=r(21866);var g=r(21761);var _=r(21714);var y=r(1457);var O=r(21708);var k=r(2215);var j=r(21717);var C=r(22968);var E=r(144);var S=r(21701);var w=r(1455);var I=r(1456);var T=r(1414);var N="react_channel_sidebar_selector_factory";var R=Object(j["a"])(1);var A=function e(t){return R&&Object(O["d"])(t+"_mark")};var M=function e(t){return R&&Object(O["f"])(t,t+"_mark")};var P=function e(t){if(!Object(y["c"])(t))return false;var r=o()(Object(f["getAllMembers"])(t)).filter(function(e){return!e.is_slackbot}).size();if(r>25)return false;if(r>=2)return"dim";return true};var x=function e(t){var r=Object(C["b"])(t);var a=Object(m["isFeatureEnabled"])(t,"feature_sidebar_filters")&&"collapsible"===Object(k["a"])("collapsible_sidebar");var n=a?Object(w["a"])(t):Object(w["b"])(t),i=n.sidebarSections,s=n.sidebarSectionsOrdered,o=n.idsNeedingPresenceSubscription;var c="enabled"===Object(k["a"])("folders_sidebar")&&Object(d["getUserPref"])(t,"folders_enabled");var l=c?Object(u["getFolders"])(t):[];var v=Object(I["a"])({hasQuickswitcherButton:!Object(S["a"])()&&!r&&Object(d["getUserPref"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(d["getUserPref"])(t,"enable_unread_view"),hasInvitePeopleLink:P(t),sidebarFiltersIsEnabled:a,sidebarSectionsOrdered:s,sidebarSections:i,sidebarFoldersIsEnabled:c,sidebarFolders:l}),p=v.rows,h=v.rowsMap,f=v.rowIds;return{rows:p,rowsMap:h,rowIds:f,idsNeedingPresenceSubscription:o}};var D=function e(t){var r=void 0;var a=void 0;var i=void 0;var s=void 0;var f=void 0;var y=void 0;var O=void 0;var j=void 0;var w=void 0;var I=void 0;var T=void 0;var R=void 0;var P=void 0;return function(e,D){A(N);var F=Object(c["isFullyBooted"])(e);if(!F)return{isBooted:F};var L=Object(_["getPrimaryView"])(e);var B=D.onItemSelect;var U=x(e),q=U.rows,H=U.rowsMap,W=U.rowIds,G=U.idsNeedingPresenceSubscription;var V=o.a.filter(W,function(t){return Object(v["isMentionById"])(e,t)&&!Object(p["isChannelMutedById"])(e,t)});var z=o.a.filter(W,function(t){return Object(v["isUnreadById"])(e,t)&&!Object(p["isChannelMutedById"])(e,t)});var K=o.a.filter(W,function(t){return Object(v["isMentionById"])(e,t)&&Object(p["isChannelMutedById"])(e,t)});Object(h["getThreadsMentionCount"])(e)&&V.unshift("Vall_threads");Object(h["hasUnreadThreads"])(e)&&z.unshift("Vall_threads");var Q=Object(l["getJumperCoachmarkState"])(e);var Y=Object(m["isFeatureEnabled"])(e,"feature_sidebar_filters")&&"collapsible"===Object(k["a"])("collapsible_sidebar");var J=Object(d["getUserPref"])(e,"sidebar_behavior");var Z="enabled"===Object(k["a"])("folders_sidebar")&&Object(d["getUserPref"])(e,"folders_enabled");var X=Object(C["b"])(e);var $=Object(m["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var ee=Object(l["getSections"])(e);if(L===a&&Object(E["a"])(z,i)&&Object(E["a"])(V,s)&&Object(E["a"])(K,f)&&Object(E["a"])(W,y)&&Q===O&&Y===j&&J===w&&Z===I&&X===T&&Object(E["a"])(R,ee)&&Object(E["a"])(D,P))return r;var te=n()({},D,{isBooted:F,rows:q,rowsMap:H,rowIds:W,selectedItemId:L,unreadIds:z,mentionIds:V,mutedMentionIds:K,sidebarFiltersIsEnabled:Y,jumperCoachmarkState:Q,useGlobalNav:X,getSectionFilter:function t(r){return Object(l["getSectionFilter"])(e,r)},idsNeedingPresenceSubscription:G,featureSonicPresenceManager:$,setSectionFilterDataFromLS:function e(){t(Object(l["setSectionFilterDataFromLS"])(J))},sidebarFoldersIsEnabled:Z,initializeFolderData:function e(){return t(Object(u["initializeFolderData"])())},dragFolderOrChannel:function e(r){var a=r.src,n=r.dest;t(Object(u["dragFolderOrChannel"])({src:a,dest:n}));t(Object(u["saveFolderData"])())},createFolder:function e(){return t(Object(u["createFolder"])())},fetchChannelRealtimePriority:function e(r){return t(Object(b["fetchChannelRealtimePriority"])(r))},onItemSelect:function e(r){Object(S["a"])()?t(Object(_["setPrimaryView"])({id:r})):B&&B(r).then(function(){t(Object(g["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:r}))}).catch(o.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label"});r=te;a=L;i=z;s=V;f=K;y=W;O=Q;j=Y;w=J;I=Z;T=X;R=ee;P=D;M(N);return te}};var F={withRef:true};t["a"]=Object(i["connectAdvanced"])(D,F)(T["a"])},1414:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(21708);var k=r(144);var j=r(21717);var C=r(5);var E=r(21759);var S=r(977);var w=r(1454);var I=r(388);var T=r(378);var N=r(21741);var R=r(3184);var A=r(140);var M=r(1415);var P=r(1449);var x=r(1450);var D=r(20180);var F=r.n(D);var L=new C["b"]("channel_sidebar");var B="react_channel_sidebar_update";var U=Object(j["a"])(1);var q=2;var H=10;var W=24;var G={isBooted:m.a.bool,selectedItemId:m.a.string,unreadIds:m.a.arrayOf(m.a.string),mutedMentionIds:m.a.arrayOf(m.a.string),rows:m.a.arrayOf(m.a.object).isRequired,rowsMap:m.a.object.isRequired,rowIds:m.a.arrayOf(m.a.string).isRequired,idsNeedingPresenceSubscription:m.a.arrayOf(m.a.string),onItemSelect:m.a.func,onInviteClick:m.a.func,onBrowseChannelsClick:m.a.func,onBrowseSharedChannelsClick:m.a.func,onCreateChannelClick:m.a.func,onCreateSharedChannelClick:m.a.func,onOpenDMClick:m.a.func,onBrowseAppsClick:m.a.func,jumperCoachmarkState:m.a.string,useGlobalNav:m.a.bool,sidebarFiltersIsEnabled:m.a.bool,getSectionFilter:m.a.func,setSectionFilterDataFromLS:m.a.func,sidebarFoldersIsEnabled:m.a.bool,initializeFolderData:m.a.func,createFolder:m.a.func,dragFolderOrChannel:m.a.func,ariaLandmarkLabel:m.a.string,fetchChannelRealtimePriority:m.a.func,onDevToolsClick:m.a.func,featureSonicPresenceManager:m.a.bool};var V={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:h.a.noop,onInviteClick:h.a.noop,onBrowseChannelsClick:h.a.noop,onBrowseSharedChannelsClick:h.a.noop,onCreateChannelClick:h.a.noop,onCreateSharedChannelClick:h.a.noop,onOpenDMClick:h.a.noop,onBrowseAppsClick:h.a.noop,jumperCoachmarkState:null,useGlobalNav:false,sidebarFiltersIsEnabled:false,getSectionFilter:h.a.noop,setSectionFilterDataFromLS:h.a.noop,sidebarFoldersIsEnabled:false,initializeFolderData:h.a.noop,createFolder:h.a.noop,dragFolderOrChannel:h.a.noop,ariaLandmarkLabel:null,fetchChannelRealtimePriority:h.a.noop,onDevToolsClick:h.a.noop,featureSonicPresenceManager:false};var z={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var K=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.ensureRowInView=r.ensureRowInView.bind(r);r.onResize=r.onResize.bind(r);r.onScroll=r.onScroll.bind(r);r.onItemSelect=r.onItemSelect.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onFocusWithin=r.onFocusWithin.bind(r);r.onDragStart=r.onDragStart.bind(r);r.onDragEnd=r.onDragEnd.bind(r);r.onDragOver=r.onDragOver.bind(r);r.onDrop=r.onDrop.bind(r);r.onCreateFolder=r.onCreateFolder.bind(r);r.state=n()({},r.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasLoadedFilterDataFromLS:false,hasInitializedFolderData:false,hasKeyboardFocus:z.NOT_FOCUSED});r.presenceList=Object(S["a"])(r.props.idsNeedingPresenceSubscription);r.commands=[{keys:["option+up"],handler:r.gotoNext.bind(r,"up",false)},{keys:["option+down"],handler:r.gotoNext.bind(r,"down",false)},{keys:["option+shift+up"],handler:r.gotoNext.bind(r,"up",true)},{keys:["option+shift+down"],handler:r.gotoNext.bind(r,"down",true)}];r.pendingEnsureRowInView=false;return r}c()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new A["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadSectionFilterDataFromLS();this.maybeLoadFolderData()}},{key:"componentWillReceiveProps",value:function e(t){var r=this;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(E["a"])()&&!Object(k["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var a="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var i=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(a||i)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0);this.setState(function(e){var a=n()({},e,r.getUnreadRows(t));r.ChannelList&&r.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,t.rows);return n()({},a,r.getBannerState(a))})}},{key:"componentWillUpdate",value:function e(){U&&Object(O["d"])(B+"_mark")}},{key:"componentDidUpdate",value:function e(t){var r=this.props,a=r.selectedItemId,n=r.isBooted,i=r.jumperCoachmarkState;var s="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var o=t.selectedItemId!==a;var c=n&&!t.isBooted;s||!o&&!c||this.ensureRowInView(a);this.maybeLoadSectionFilterDataFromLS();this.maybeLoadFolderData();this.props.sidebarFiltersIsEnabled&&this.props.unreadIds.length>0&&this.props.fetchChannelRealtimePriority({channelIds:this.props.unreadIds,time:Date.now()});U&&Object(O["f"])(B,B+"_mark")}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var r=t.dataTransfer;r.effectAllowed="move";r.dropEffect="move";var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;var n={src:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){var r=this;if(!this.props.sidebarFoldersIsEnabled)return;var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;this.setState(function(){return{dragData:n()({},r.state.dragData,{dest:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var r=this;var a=t.height;this.setState(function(e){var t=n()({},e,{listHeight:a});return n()({},t,r.getBannerState(t))},function(){false!==r.pendingEnsureRowInView&&r.ensureRowInView(r.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent,a=t.target,n=t.currentTarget;if(r&&"mousedown"===r.type)return;var i=a===n?z.CONTAINER_FOCUSED:z.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:z.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:z.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){return this.props.onItemSelect(t)}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=t.rowsMap,a=t.unreadIds,n=t.mentionIds;return{firstUnread:r[h.a.first(a)],lastUnread:r[h.a.last(a)],firstMention:r[h.a.first(n)],lastMention:r[h.a.last(n)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,r=t.firstMention,a=t.firstUnread,n=t.lastMention,i=t.lastUnread,s=t.listHeight;var o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var c=a&&a.scrollBottom-H<=o;var l=i&&i.scrollTop+H>=o+s;var u=r&&r.scrollBottom-H-(c?W:0)<=o;var d=n&&n.scrollTop+H+(l?W:0)>=o+s;return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:c,scrolledAboveLastMention:d,scrolledAboveLastUnread:l}}},{key:"maybeLoadSectionFilterDataFromLS",value:function e(){if(this.props.sidebarFiltersIsEnabled&&!this.state.hasLoadedFilterDataFromLS){this.props.setSectionFilterDataFromLS();this.setState(function(e){return n()({},e,{hasLoadedFilterDataFromLS:true})})}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return n()({},e,{hasInitializedFolderData:true})})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var r=this.props,a=r.rows,n=r.rowsMap,i=r.rowIds;var s=n[t];if(!s)return;var o=this.ChannelList.currentScrollTop;var c=this.state.listHeight;if(0===c){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var l=Math.max(i.indexOf(t)-q,0);var u=a[l].scrollTop;if(u<o){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+q,a.length-1);var v=a[d].scrollBottom-c;v>o&&this.ChannelList.scrollToTarget(v)}},{key:"gotoNext",value:function e(t,r){var a=this;var i=Object(w["a"])();var s=Object(I["e"])(i);if(Object(I["f"])(i)&&s>0){if(Object(I["h"])(i))return;var o=Object(I["b"])(i).start;if("up"===t&&0!==o)return;if("down"===t&&o!==s)return}var c=this.props,l=c.rows,u=c.rowIds,d=c.selectedItemId;var v=u.indexOf(d);var p=h()(l).map(function(e,t){return n()({},e,{index:t})}).filter(function(e){return"channel"===e.type}).filter(function(e){return!r||h.a.indexOf(a.props.unreadIds,e.id)>=0||h.a.indexOf(a.props.mutedMentionIds,e.id)>=0}).value();if(0===p.length)return;var f=void 0;f="down"===t?h.a.find(p,function(e){return e.index>v}):h.a.findLast(p,function(e){return e.index<v});void 0===f&&(f="down"===t?h.a.first(p):h.a.last(p));this.props.onItemSelect(f.id)}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===z.CONTAINER_FOCUSED)return y.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,r=t.rows,a=t.onInviteClick,n=t.onBrowseChannelsClick,i=t.onBrowseSharedChannelsClick,s=t.onCreateChannelClick,o=t.onCreateSharedChannelClick,c=t.onOpenDMClick,l=t.onBrowseAppsClick,u=t.selectedItemId,d=t.useGlobalNav,v=t.sidebarFiltersIsEnabled,p=t.getSectionFilter,h=t.sidebarFoldersIsEnabled,f=t.ariaLandmarkLabel,m=t.onDevToolsClick;var b=this.state,_=b.scrolledBelowFirstMention,O=b.scrolledBelowFirstUnread,k=b.scrolledAboveLastMention,j=b.scrolledAboveLastUnread,C=b.firstMention,E=b.firstUnread,S=b.lastMention,w=b.lastUnread;var I=this.state.hasKeyboardFocus!==z.NOT_FOCUSED;var A=this.state.hasKeyboardFocus===z.CONTAINER_FOCUSED?"-1":null;var D=g()("p-channel_sidebar",{focusablesection:I,"p-channel_sidebar--global_nav":d});return y.a.createElement(N["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},y.a.createElement("nav",{className:D,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":u,"data-is-focusable-section":true,"aria-labelledby":f,tabIndex:A},y.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},L.t("Channel Sidebar")),y.a.createElement(x["a"],null),d&&y.a.createElement("div",{className:"p-global_nav__sidebar_divider"}),y.a.createElement("div",{className:"p-channel_sidebar__list"},y.a.createElement(P["a"],{position:"top",isShowing:_||O,isMention:_,linkedId:_&&C.id||O&&E.id,ensureRowInView:this.ensureRowInView}),y.a.createElement(M["a"],{rows:r,onItemSelect:this.onItemSelect,onInviteClick:a,onBrowseChannelsClick:n,onBrowseSharedChannelsClick:i,onCreateChannelClick:s,onCreateSharedChannelClick:o,onOpenDMClick:c,onBrowseAppsClick:l,onScroll:this.onScroll,onResize:this.onResize,sidebarFiltersIsEnabled:v,sidebarFoldersIsEnabled:h,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,getSectionFilter:p,ref:this.setRef}),y.a.createElement(P["a"],{position:"bottom",isShowing:k||j,isMention:k,linkedId:k&&S.id||j&&w.id,ensureRowInView:this.ensureRowInView})),y.a.createElement(T["a"],{enabled:["feature_redux_dev_tools"]},y.a.createElement(R["d"],{size:"small",onClick:m},"Redux Dev Tools")),this.renderFocusOutline()))}}]);return t}(_["PureComponent"]);K.displayName="ChannelSidebar";K.defaultProps=V;t["a"]=K},1415:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(333);var g=r(43);var _=r(290);var y=r(5);var O=r(497);var k=r(1420);var j=r(1451);var C=r(1439);var E=r(1440);var S=r(1441);var w=r(22383);var I=r(1442);var T=r(260);var N=r(1443);var R=r(1444);var A=r(22384);var M=r(22385);var P=r(1447);var x=r(1448);var D=new y["b"]("channel_sidebar");var F={rows:h.a.arrayOf(h.a.shape({type:h.a.string,scrollBottom:h.a.number})).isRequired,onItemSelect:h.a.func,onInviteClick:h.a.func,onBrowseChannelsClick:h.a.func,onBrowseSharedChannelsClick:h.a.func,onCreateChannelClick:h.a.func,onCreateSharedChannelClick:h.a.func,onOpenDMClick:h.a.func,onBrowseAppsClick:h.a.func,onResize:h.a.func,onScroll:h.a.func,sidebarFiltersIsEnabled:h.a.bool,getSectionFilter:h.a.func,sidebarFoldersIsEnabled:h.a.bool,onDragStart:h.a.func,onDragEnd:h.a.func,onDrop:h.a.func,onDragOver:h.a.func,onCreateFolder:h.a.func};var L={rows:[],onItemSelect:v.a.noop,selectedItemId:"",onItemClick:v.a.noop,onInviteClick:v.a.noop,onBrowseChannelsClick:v.a.noop,onBrowseSharedChannelsClick:v.a.noop,onCreateChannelClick:v.a.noop,onCreateSharedChannelClick:v.a.noop,onOpenDMClick:v.a.noop,onBrowseAppsClick:v.a.noop,onResize:v.a.noop,onScroll:v.a.noop,sidebarFiltersIsEnabled:false,getSectionFilter:v.a.noop,sidebarFoldersIsEnabled:false,onDragStart:v.a.noop,onDragEnd:v.a.noop,onDrop:v.a.noop,onDragOver:v.a.noop,onCreateFolder:v.a.noop};var B=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={currentlyHoveredSection:null};r.setScrollbarRef=r.setScrollbarRef.bind(r);r.getCurrentScrollTop=r.getCurrentScrollTop.bind(r);r.resetCurrentScrollTopMaybe=r.resetCurrentScrollTopMaybe.bind(r);r.setListRef=r.setListRef.bind(r);r.onResize=r.onResize.bind(r);r.onScroll=r.onScroll.bind(r);r.onItemClick=r.onItemClick.bind(r);r.onInviteClick=r.onInviteClick.bind(r);r.onMouseLeaveRow=r.onMouseLeaveRow.bind(r);r.renderRow=r.renderRow.bind(r);r.renderRowWithWrapper=r.renderRowWithWrapper.bind(r);r.currentScrollTop=0;r.height=0;return r}s()(t,[{key:"componentDidUpdate",value:function e(t){this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights()}},{key:"onMouseEnterRow",value:function e(t){this.setState(function(){return{currentlyHoveredSection:t.sectionName||null}})}},{key:"onMouseLeaveRow",value:function e(){this.setState(function(){return{currentlyHoveredSection:null}})}},{key:"onResize",value:function e(t){var r=t.height;this.resetCurrentScrollTopMaybe(r);this.height=r;this.props.onResize({height:r})}},{key:"onScroll",value:function e(t,r){var a=r.scrollTop;this.currentScrollTop=a;this.List&&this.List.Grid.handleScrollEvent({scrollTop:a});this.props.onScroll&&this.props.onScroll(a)}},{key:"onItemClick",value:function e(t,r){t.preventDefault();this.props.onItemSelect(r)}},{key:"onInviteClick",value:function e(t,r){this.props.onInviteClick(r)}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(r)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var r=this;var a=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(_["a"])({fromValue:this.currentScrollTop,toValue:a,duration:200,easing:"easeOutQuad",onTick:function e(t){var a=t.value,n=t.nextTick;r.Scrollbar.scrollTop(a);n()}})}},{key:"renderRowWithWrapper",value:function e(t,r){var a=this;var n=t.height,i=t.id,s=t.type;var o=i||r+"-"+s;var c={quickswitcherButton:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",sectionHeading:"listitem",channel:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[s];return this.props.sidebarFiltersIsEnabled?m.a.createElement("div",{key:o,style:{height:n},onMouseEnter:function e(){return a.onMouseEnterRow(t)},onMouseLeave:this.onMouseLeaveRow,role:c},this.renderRow(t)):m.a.createElement("div",{key:o,style:{height:n},role:c},this.renderRow(t))}},{key:"renderRow",value:function e(t){var r=this.props.onItemSelect;switch(t.type){case"quickswitcherButton":return m.a.createElement(j["a"],null);case"allUnreadsLink":return m.a.createElement(C["a"],{selectItem:r});case"allThreadsLink":return m.a.createElement(E["a"],{selectItem:r});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t.id,t.index);case"invitePeopleLink":return m.a.createElement(S["a"],{selectItem:this.onInviteClick,dim:t.dim});case"installAppsLink":return m.a.createElement(w["a"],null);case"spacer":return null;case"topPadding":return null;case"emptyState":return this.renderEmptyState(t.name);default:Object(g["warn"])("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var r=this.props,a=r.onBrowseChannelsClick,n=r.onBrowseSharedChannelsClick,i=r.onCreateChannelClick,s=r.onCreateSharedChannelClick,o=r.onOpenDMClick,c=r.onBrowseAppsClick;var l=this.state.currentlyHoveredSection;switch(t){case"starred":if(this.props.sidebarFoldersIsEnabled)return m.a.createElement(T["a"],{supportsHighlightsMode:true,label:D.t("Starred"),qaLabel:"starred",id:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return m.a.createElement(I["a"],{supportsHighlightsMode:true,isCurrentlyHovered:"starred"===l});case"sharedChannels":return m.a.createElement(N["a"],{id:"sharedChannels",onLabelClick:n,onPlusClick:s,supportsHighlightsMode:true,isCurrentlyHovered:"sharedChannels"===l});case"channels":return m.a.createElement(R["a"],{id:"channels",onLabelClick:a,onPlusClick:i,supportsHighlightsMode:true,isCurrentlyHovered:"channels"===l});case"orgWideChannels":return m.a.createElement(M["a"],{supportsHighlightsMode:true,isCurrentlyHovered:"orgWideChannels"===l});case"ims":return m.a.createElement(P["a"],{id:"ims",onLabelClick:o,onPlusClick:o,isCurrentlyHovered:"ims"===l});case"apps":return m.a.createElement(x["a"],{id:"apps",onLabelClick:c,onPlusClick:c,isCurrentlyHovered:"apps"===l});default:return null}}},{key:"renderFolderHeading",value:function e(t){return m.a.createElement(A["a"],{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderEmptyState",value:function e(t){var r=void 0;r="real_time_sort"===this.props.getSectionFilter(t)?"No unread mentions":"No unreads";return m.a.createElement("div",{className:"p-channel_sidebar__empty_state"},r)}},{key:"renderChannel",value:function e(t,r){if(this.props.sidebarFoldersIsEnabled)return m.a.createElement(k["a"],{key:t,id:t,selectItem:this.props.onItemSelect,index:r,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var a=m.a.createElement(k["a"],{key:t,id:t,selectItem:this.props.onItemSelect,index:r});return a}},{key:"render",value:function e(){var t=this;return m.a.createElement(b["a"],{onResize:this.onResize},function(e){var r=e.width,a=e.height;return m.a.createElement(O["a"],{width:r,height:a,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef},m.a.createElement("div",{className:"p-channel_sidebar__static_list","aria-label":D.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(m.a.PureComponent);B.displayName="ChannelList";B.defaultProps=L;t["a"]=B},142:function(e,t,r){var a=r(6);var n=r(100);var i=r(51);e.exports=function(e,t){var r=(n.Object||{})[e]||Object[e];var s={};s[e]=t(r);a(a.S+a.F*i(function(){r(1)}),"Object",s)}},1420:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(9);var s=r(21714);var o=r(21697);var c=r(3276);var l=r(974);var u=r(376);var d=r(12);var v=r(54);var p=r(907);var h=r(1421);var f={closeIM:o["closeChannelApi"]};var m=function e(t,r){var a=r.id;var i=Object(o["getChannelById"])(t,a);if(!i)return{id:a,featureSidebarContextMenu:Object(d["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var h=Object(p["isMpim"])(i)?Math.min(Math.max(n.a.get(i,"members.length",1)-1,2),9):0;var f=Object(p["getChannelType"])(i);var m="im"===f&&Object(v["getUserPref"])(t,"show_typing")&&Object(l["getTyperIdsInChannel"])(t,a).length>0;var b="im"!==f||"active"===Object(u["getPresenceByMemberId"])(t,Object(p["getMemberIdFromIm"])(i));var g=Object(d["getCurrentUserId"])(t);var _="mpim"===f&&Object(p["getMemberIdsFromMpim"])(i)&&n.a.filter(Object(p["getMemberIdsFromMpim"])(i),function(e){return e!==g});var y="mpim"===f&&_&&n.a.map(_,function(e){return Object(u["getPresenceByMemberId"])(t,e)});var O=!Object(p["isMpim"])(i)&&!Object(p["isIm"])(i)||Object(p["isPrivateChannel"])(i);var k=!Object(p["isMpim"])(i)&&!Object(p["isIm"])(i);var j=Object(p["isMemberOfChannel"])(i)||Object(p["isPrivateChannel"])(i);return{isSelected:Object(s["getPrimaryView"])(t)===a,isPendingShared:Object(p["isPendingExternallySharedChannel"])(i),isShared:Object(p["isExternallySharedChannel"])(i),isOrgShared:Object(p["isOrgShared"])(i),isSlackbot:Object(p["isSlackbot"])(i),isYou:Object(p["isYou"])(g,i),isMuted:Object(c["isChannelMutedById"])(t,a),hasUnreads:!!Object(p["getUnreadCount"])(i),hasDraft:Object(p["getHasDraft"])(i),isArchived:Object(p["isArchived"])(i),sharedTeamIds:Object(p["getMaybePendingSharedTeamIds"])(i),displayName:Object(p["getDisplayName"])(i),unreadCount:Object(p["getUnreadCount"])(i),badgeCount:Object(o["getBadgeCount"])(t,i),userCount:h,userId:Object(p["getMemberIdFromIm"])(i)||i.user_id,userActive:b,type:f,id:a,isTyping:m,isStarred:Object(p["isStarred"])(i),members:_||null,memberPresences:y||null,name:Object(p["getDisplayName"])(i),priority:i.priority,isPrivateChannel:Object(p["isPrivateChannel"])(i),isMemberOfChannel:p["isMemberOfChannel"],canMute:O,canLeave:j,isChannel:k,featureSidebarContextMenu:Object(d["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureSonicPresenceManager:Object(d["isFeatureEnabled"])(t,"feature_sonic_presence_manager")}};t["a"]=Object(i["connect"])(m,f)(h["a"])},1421:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(43);var k=r(253);var j=r(91);var C=r(5);var E=r(21759);var S=r(3184);var w=r(37);var I=r(1059);var T=r(978);var N=r(980);var R=r(603);var A=r(60);var M=r(1433);var P=r(22262);var x=r(22145);var D=r(472);var F=r(1434);var L=new C["b"]("channel_sidebar");var B={isPendingShared:m.a.bool,isShared:m.a.bool,isOrgShared:m.a.bool,type:m.a.oneOf(["channel","private","im","mpim"]),isSlackbot:m.a.bool,isYou:m.a.bool,isMuted:m.a.bool,hasUnreads:m.a.bool,hasDraft:m.a.bool,isArchived:m.a.bool,sharedTeamIds:m.a.arrayOf(m.a.string),displayName:m.a.string,isSelected:m.a.bool,unreadCount:m.a.number,badgeCount:m.a.number,userCount:m.a.number,userId:m.a.string,userActive:m.a.bool,id:m.a.string.isRequired,priority:m.a.number,selectItem:m.a.func,closeIM:m.a.func,isTyping:m.a.bool,isStarred:m.a.bool,members:m.a.arrayOf(m.a.string),memberPresences:m.a.arrayOf(m.a.string),onContextMenu:m.a.func,featureSidebarContextMenu:m.a.bool.isRequired,index:m.a.number.isRequired,sidebarFoldersIsEnabled:m.a.bool,onDragStart:m.a.func,onDragEnd:m.a.func,onDrop:m.a.func,onDragOver:m.a.func,featureSonicPresenceManager:m.a.bool};var U={isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,isArchived:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:g.a.noop,closeIM:g.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:g.a.noop,sidebarFoldersIsEnabled:false,onDragStart:g.a.noop,onDragEnd:g.a.noop,onDrop:g.a.noop,onDragOver:g.a.noop,featureSonicPresenceManager:false};var q=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.closeIM=r.closeIM.bind(r);return r}c()(t,[{key:"onClick",value:function e(t){t.preventDefault();Object(O["action"])(D["a"],"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();Object(O["action"])(D["a"],"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"clogClick",value:function e(){var t=this.props,r=t.id,a=t.index,n=t.isMuted,i=t.isStarred,s=t.hasUnreads,o=t.isArchived,c=t.isSelected,l=t.badgeCount;Object(j["b"])("SIDEBAR_ITEM_CLICK",{item_type:r[0],item_id:r,index:a,is_muted:n,is_starred:i,has_unreads:s,is_archived:o,is_selected:c,badge_count:l})}},{key:"shouldShowPresence",value:function e(){var t=this.props,r=t.type,a=t.isSlackbot,n=t.isSelected,i=t.hasDraft,s=t.isTyping,o=t.isArchived;if("im"!==r)return false;if(a)return false;if(i&&!n)return false;if(s&&!n)return false;if(o)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,r=t.type,a=t.hasUnreads;if("im"!==r&&"mpim"!==r)return false;if(a)return false;return true}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,r=t.isShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,r=t.isOrgShared,a=t.type;return r&&!("im"===a||"mpim"===a)}},{key:"buildName",value:function e(){var t=this.props.type;if("im"===t)return this.buildImName();if("mpim"===t)return this.buildMpimName();return h.a.createElement("span",{className:"p-channel_sidebar__name"},this.props.displayName)}},{key:"buildImName",value:function e(){var t=this.props,r=t.userId,a=t.isYou,n=t.userActive;var i=h.a.createElement(R["a"],{id:r});var s=h.a.createElement(T["a"],{memberId:r});var o=a&&h.a.createElement("span",{className:"p-channel_sidebar__you_label"},L.t("(you)"));return h.a.createElement("span",{className:y()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":!n})},s,i,o)}},{key:"buildMpimName",value:function e(){var t=this.props,r=t.type,a=t.members,n=t.memberPresences;if("mpim"!==r||!a||!n)return null;var i=g.a.flatMap(a,function(e,t){return[h.a.createElement(R["a"],{id:e,key:e}),t<a.length-1?", ":null]});return h.a.createElement(A["d"],{tip:i,position:"top-left",delay:A["a"]},h.a.createElement("span",{className:"p-channel_sidebar__name"},i))}},{key:"buildAriaLabel",value:function e(){var t=this.props,r=t.type,a=t.displayName,n=t.isShared,i=t.isOrgShared,s=t.isYou,o=t.isMuted,c=t.hasUnreads,l=t.hasDraft,u=t.isArchived,d=t.unreadCount,v=t.badgeCount,p=t.isSelected,h=t.userActive,f=t.isTyping;return Object(P["a"])({type:r,displayName:a,isShared:n,isOrgShared:i,isYou:s,isMuted:o,hasUnreads:c,hasDraft:l,isArchived:u,unreadCount:d,badgeCount:v,isSelected:p,userActive:h,isTyping:f})}},{key:"renderPresence",value:function e(t){return h.a.createElement(I["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(E["a"])(),inline:false})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.id,i=r.type,s=r.isPendingShared,o=r.isSlackbot,c=r.isYou,l=r.isMuted,u=r.hasUnreads,d=r.hasDraft,v=r.isArchived,p=r.badgeCount,f=r.isSelected,m=r.userCount,b=r.displayName,g=r.userId,_=r.priority,O=r.isTyping,k=r.isStarred,j=r.sharedTeamIds,C=r.onContextMenu,E=r.featureSidebarContextMenu;var I=y()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===i,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===i,"p-channel_sidebar__channel--im":"im"===i,"p-channel_sidebar__channel--im-slackbot":o,"p-channel_sidebar__channel--im-you":c,"p-channel_sidebar__channel--selected":f,"p-channel_sidebar__channel--muted":l,"p-channel_sidebar__channel--unread":u&&!v,"p-channel_sidebar__channel--draft":d&&!f,"p-channel_sidebar__channel--archived":v,"p-channel_sidebar__channel--typing":O&&!f});var T=h.a.createElement(x["a"],{count:p,className:"p-channel_sidebar__badge"});var R={"data-user-count":m};var A=this.shouldShowPresence()&&this.renderPresence(g);var P=this.buildName();var D=this.shouldShowExternalSharedIcon()&&h.a.createElement(N["a"],{tooltip:true,sharedTeamIds:j,className:"p-channel_sidebar__icon",pending:s});var B=h.a.createElement("a",n()({href:"/messages/"+a,className:I,onClick:this.onClick,onContextMenu:C},R,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-id":a,"data-qa-channel-sidebar-channel-type":i,"data-qa-channel-sidebar-is-starred":k,"data-qa-channel-sidebar-priority":_,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":a,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),A,P,T,D);if(this.shouldShowClose()){var U=h.a.createElement(S["c"],{onClick:this.closeIM,className:"p-channel_sidebar__close","aria-label":L.t("Close Direct Message with {name}",{name:b})},h.a.createElement(w["a"],{type:"times-circle-medium"}));B=h.a.createElement("div",{className:"p-channel_sidebar__close_container"},B,U)}if(E){var q=function e(){return Object(F["a"])(t.props)};return h.a.createElement(M["a"],{getTemplate:q},B)}return B}}]);return t}(k["a"]);q.displayName="Channel";q.propTypes=B;q.defaultProps=U;t["a"]=q},143:function(e,t,r){var a=r(107);var n=r(240);var i=r(76);var s=r(67);var o=r(766);e.exports=function(e,t){var r=1==e;var c=2==e;var l=3==e;var u=4==e;var d=6==e;var v=5==e||d;var p=t||o;return function(t,o,h){var f=i(t);var m=n(f);var b=a(o,h,3);var g=s(m.length);var _=0;var y=r?p(t,g):c?p(t,0):void 0;var O,k;for(;g>_;_++)if(v||_ in m){O=m[_];k=b(O,_,f);if(e)if(r)y[_]=k;else if(k)switch(e){case 3:return true;case 5:return O;case 6:return _;case 2:y.push(O)}else if(u)return false}return d?-1:l||u?u:y}}},1432:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(9);var g=r(12);var _=r(3271);var y=r(21703);var O=r(60);var k=r(37);var j=r(21777);var C=r(5);var E=new C["b"]("shared_channels");var S={className:v.a.string,sharedTeamNames:v.a.arrayOf(v.a.node),tooltip:v.a.bool,tooltipPosition:v.a.string,pending:v.a.bool,inherit:v.a.bool,inline:v.a.bool};var w={className:void 0,sharedTeamNames:[],tooltip:false,tooltipPosition:"top",pending:false,inherit:false,inline:false};var I=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.className,a=t.sharedTeamNames,n=t.tooltip,i=t.tooltipPosition,s=t.pending,o=t.inherit,c=t.inline;var l=h.a.createElement(k["b"],{type:s?"shared_channels_pending":"shared_channels",className:m()("p-shared_channels_icon",r),size:o?"inherit":void 0,inline:c});if(n&&a&&a.length){var u=s?E.rt('<span className="sk_light_grey">Waiting for</span> {sharedTeamNames} <span className="sk_light_grey">to join</span>',{sharedTeamNames:Object(C["e"])(a,{noEscape:true,react:true})}):E.rt('<span className="sk_light_grey">Shared with</span> {sharedTeamNames}',{sharedTeamNames:Object(C["e"])(a,{noEscape:true,react:true})});return h.a.createElement(O["d"],{tip:u,position:i},l)}return l}}]);return t}(h.a.Component);I.displayName="SharedChannelsIcon";var T=function e(t,r){var a=r.sharedTeamIds,n=r.tooltip,i=r.tooltipPosition;var s=void 0;s=Object(g["isFeatureEnabled"])(t,"feature_lazy_teams")?a&&a.map(function(e){var r=Object(_["getTeamById"])(t,e);return Object(y["isUnknown"])(r)?h.a.createElement(j["a"],{type:"unknown",subtler:true}):Object(y["getTeamDisplayName"])(r)}):a&&a.map(function(e){return Object(y["getTeamDisplayName"])(Object(_["getTeamById"])(t,e))}).filter(function(e){return!!e});return{sharedTeamNames:s,tooltip:n,tooltipPosition:i}};I.defaultProps=w;t["a"]=Object(b["connect"])(T)(I)},1433:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(900);var g=r(438);var _=r(398);var y={className:h.a.string,children:h.a.node.isRequired,renderWebappMenu:h.a.func,getTemplate:h.a.func.isRequired};var O={className:"",renderWebappMenu:null};var k=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDesktopContextMenu=r.onDesktopContextMenu.bind(r);r.renderWebappMenu=r.renderWebappMenu.bind(r);return r}c()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this;return function(){var e=t.props.getTemplate();window.desktop.contextMenu(e)}}},{key:"renderWebappMenu",value:function e(t){if(this.props.renderWebappMenu)return this.props.renderWebappMenu(t);return m.a.createElement(g["a"],n()({},t,{template:this.props.getTemplate(),width:200}))}},{key:"render",value:function e(){var t=this;if(_["isDesktop"]){if(window.desktop.contextMenu){var r=m.a.Children.map(this.props.children,function(e){return m.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu()})});return r[0]}return this.props.children}var a=this.props.className;return m.a.createElement(b["a"],n()({},this.props,{useMouseCoordinatesAsTargetBounds:true,onContextMenu:this.renderWebappMenu,className:a,renderMenu:this.renderWebappMenu}),this.props.children)}}]);return t}(f["PureComponent"]);k.displayName="ContextMenuTrigger";t["a"]=k;k.defaultProps=O},1434:function(e,t,r){"use strict";r.d(t,"a",function(){return u});r.d(t,"b",function(){return d});var a=r(1395);var n=r.n(a);var i=r(1435);var s=r(981);var o=r(982);var c=r(5);var l=new c["b"]("menu");var u=function e(t){var r=t.id,a=t.name,n=t.isChannel,c=t.isStarred,u=t.canMute,d=t.canLeave;var v=void 0;var p=void 0;var h=void 0;var f=void 0;var m=void 0;if(n){v=l.t("Star Channel");p=l.t("Unstar Channel");h=l.t("Mute {channel}",{channel:"#"+a});f=l.t("Unmute {channel}",{channel:"#"+a});m=l.t("Leave {channel}",{channel:"#"+a})}else{v=l.t("Star Conversation");p=l.t("Unstar Conversation");h=l.t("Mute Conversation");f=l.t("Unmute Conversation");m=l.t("Leave Conversation")}var b=[{label:c?p:v,click:function e(){return Object(o["a"])(null,r)},id:"star:"+r}];d&&b.push({label:m,click:function e(){return Object(i["n"])(r)},id:"leave:"+r});u&&b.push({label:Object(s["b"])(r)?f:h,click:function e(){return Object(s["c"])(r)},id:"mute:"+r});return b};var d=function e(t){var r=t.split(":"),a=n()(r,2),c=a[0],l=a[1];switch(c){case"star":Object(o["a"])(null,l);break;case"mute":Object(s["c"])(l);break;case"leave":Object(i["n"])(l);break;default:break}}},1436:function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(10);var n=Object(a["c"])("TS.groups.member_left_sig.dispatch");var i=Object(a["c"])("TS.groups.member_joined_sig.dispatch")},1439:function(e,t,r){"use strict";var a=r(9);var n=r(377);var i=r(21714);var s=r(5);var o=r(291);var c=new s["b"]("channel_sidebar");var l="Vall_unreads";var u=function e(t){return{id:l,label:c.t("All Unreads"),hasUnreads:Object(n["hasUnreads"])(t),isSelected:Object(i["getPrimaryView"])(t)===l}};var d=Object(a["connect"])(u)(o["a"]);t["a"]=d},1440:function(e,t,r){"use strict";var a=r(9);var n=r(377);var i=r(21714);var s=r(12);var o=r(5);var c=r(291);var l=new o["b"]("channel_sidebar");var u="Vall_threads";var d=function e(t){return{id:u,label:Object(s["isFeatureEnabled"])(t,"feature_threads_copy_change")?l.t("Threads"):l.t("All Threads"),labelUnread:Object(s["isFeatureEnabled"])(t,"feature_threads_copy_change")?l.t("Threads"):l.t("New Threads"),hasUnreads:Object(n["hasUnreadThreads"])(t),badgeCount:Object(n["getThreadsMentionCount"])(t),isSelected:Object(i["getPrimaryView"])(t)===u}};var v=Object(a["connect"])(d)(c["a"]);t["a"]=v},1441:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(1);var l=r.n(c);var u=r(5);var d=r(291);var v=new u["b"]("channel_sidebar");var p=function e(t){var r=t.selectItem,a=t.dim;return s.a.createElement(d["a"],{key:"Vinvites",id:"Vinvites",label:v.t("Invite People"),selectItem:r,isDim:a})};p.displayName="InviteLink";p.defaultProps={selectItem:l.a.noop,dim:true};t["a"]=Object(o["pure"])(p)},1442:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(5);var l=r(260);var u=new c["b"]("channel_sidebar");var d=function e(t){return s.a.createElement(l["a"],n()({},t,{label:u.t("Starred"),qaLabel:"starred",id:"starred"}))};d.displayName="StarredHeading";t["a"]=Object(o["pure"])(d)},1443:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(45);var u=r(9);var d=r(54);var v=r(5);var p=r(473);var h=r(260);var f=new v["b"]("channel_sidebar");var m=f.t("Create a shared channel");var b={sharedChannelsEnabled:c.a.bool};var g={sharedChannelsEnabled:false};var _=function e(t){return{sharedChannelsEnabled:1===Object(d["getTeamPref"])(t,"enable_shared_channels")}};var y=function e(t){return s.a.createElement(h["a"],n()({},t,{tooltip:f.t("Browse all shared channels"),tooltipArrowOffset:50,label:f.t("Shared Channels"),qaLabel:"shared_channels",showPlus:t.sharedChannelsEnabled&&Object(p["i"])(),plusTooltip:m}))};y.displayName="SharedChannelsHeading";y.defaultProps=g;var O=Object(l["pure"])(y);t["a"]=Object(u["connect"])(_)(O)},1444:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(9);var u=r(5);var d=r(473);var v=r(260);var p=new u["b"]("channel_sidebar");var h=p.t("Create a channel");var f={showPlus:c.a.bool};var m={showPlus:true};var b=function e(t){return s.a.createElement(v["a"],n()({},t,{label:p.t("Channels"),qaLabel:"channels",tooltip:p.t("Browse all channels"),tooltipArrowOffset:30,showPlus:t.showPlus,plusTooltip:h}))};b.displayName="ChannelsHeading";b.defaultProps=m;var g=function e(){return{showPlus:Object(d["b"])()||Object(d["d"])()}};t["a"]=Object(l["connect"])(g)(b)},1445:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(45);var u=r(5);var d=r(260);var v=new u["b"]("channel_sidebar");var p={orgName:c.a.string.isRequired};var h={orgName:""};var f=function e(t){return s.a.createElement(d["a"],n()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:v.t("Organization Channels"),qaLabel:"org_wide_channels",id:"orgWideChannels",tooltip:v.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};f.displayName="OrgWideChannelsHeading";f.defaultProps=h;t["a"]=Object(l["pure"])(f)},1447:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(5);var l=r(260);var u=new c["b"]("channel_sidebar");var d=function e(t){return s.a.createElement(l["a"],n()({},t,{label:u.t("Direct Messages"),qaLabel:"ims",tooltip:u.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:u.t("Open a direct message")}))};d.displayName="DirectMessagesHeading";t["a"]=Object(o["pure"])(d)},1448:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(5);var l=r(260);var u=new c["b"]("channel_sidebar");var d=function e(t){return s.a.createElement(l["a"],n()({},t,{label:u.t("Apps"),qaLabel:"apps",tooltip:u.t("Browse apps"),tooltipArrowOffset:16,showPlus:true,plusTooltip:u.t("Browse apps")}))};d.displayName="AppsHeading";t["a"]=Object(o["pure"])(d)},1449:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3184);var y=r(37);var O=r(5);var k=new O["b"]("channel_sidebar");var j={isShowing:v.a.bool.isRequired,linkedId:v.a.oneOfType([v.a.string,v.a.bool]),isMention:v.a.bool,position:v.a.oneOf(["top","bottom"]),ensureRowInView:v.a.func};var C={isShowing:false,linkedId:null,isMention:false,position:"top",ensureRowInView:g.a.noop};var E=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}s()(t,[{key:"onClick",value:function e(t){var r=this.props,a=r.linkedId,n=r.ensureRowInView;t.preventDefault();a&&n(a)}},{key:"render",value:function e(){var t=this.props,r=t.isShowing,a=t.position,n=t.isMention,i=t.linkedId;if(!r)return null;var s=m()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":n,"p-channel_sidebar__banner--unreads":!n,"p-channel_sidebar__banner--top":"top"===a,"p-channel_sidebar__banner--bottom":"bottom"===a});var o="top"===a?"up":"down";var c=n?k.t("Unread Mentions"):k.t("More Unreads");return h.a.createElement(_["c"],{className:s,onClick:this.onClick,"data-qa-linked-id":i},c,h.a.createElement(y["b"],{type:"arrow_"+o,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(h.a.PureComponent);E.displayName="UnreadBanner";E.defaultProps=C;t["a"]=E},1450:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(54);var l=r(22968);var u=r(22386);var d=r(115);var v={theme:n.a.oneOf(["custom_theme","default","default_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme"]),custom:n.a.object,useGlobalNav:n.a.bool};var p={theme:"default_theme",custom:{},useGlobalNav:false};var h={default_theme:u["a"],hoth_theme:{column_bg:"#F8F8FA",menu_bg:"#F8F8FA",active_item:"#2D9EE0",active_item_text:"#FFFFFF",hover_item:"#FFFFFF",text_color:"#383F45",active_presence:"#60D156",badge:"#DC5960"},monument_theme:{column_bg:"#0D7E83",menu_bg:"#076570",active_item:"#F79F66",active_item_text:"#FFFFFF",hover_item:"#D37C71",text_color:"#FFFFFF",active_presence:"#F79F66",badge:"#F15340"},chocolate_theme:{column_bg:"#544538",menu_bg:"#42362B",active_item:"#5DB09D",active_item_text:"#FFFFFF",hover_item:"#4A3C30",text_color:"#FFFFFF",active_presence:"#FFFFFF",badge:"#5DB09D"},ocean_theme:{column_bg:"#303E4D",menu_bg:"#2C3849",active_item:"#6698C8",active_item_text:"#FFFFFF",hover_item:"#4A5664",text_color:"#FFFFFF",active_presence:"#94E864",badge:"#78AF8F"},workhard_theme:{column_bg:"#4D5250",menu_bg:"#444A47",active_item:"#D39B46",active_item_text:"#FFFFFF",hover_item:"#434745",text_color:"#FFFFFF",active_presence:"#99D04A",badge:"#DB6668"},solanum_theme:{column_bg:"#4F2F4C",menu_bg:"#452842",active_item:"#8C5888",active_item_text:"#FFFFFF",hover_item:"#1C0B1A",text_color:"#FFFFFF",active_presence:"#D0FF00",badge:"#889100"},brinjal_theme:{column_bg:"#4F2F4C",menu_bg:"#452842",active_item:"#8C5888",active_item_text:"#FFFFFF",hover_item:"#1C0B1A",text_color:"#FFFFFF",active_presence:"#00FFB7",badge:"#DE4C0D"},cotton_theme:{column_bg:"#BB6A76",menu_bg:"#AD5B67",active_item:"#62B791",active_item_text:"#FFFFFF",hover_item:"#A5516A",text_color:"#FFFFFF",active_presence:"#68F798",badge:"#694464"},eco_theme:{column_bg:"#86A34E",menu_bg:"#94AF63",active_item:"#FFFFFF",active_item_text:"#6D8B42",hover_item:"#94AF63",text_color:"#FFFFFF",active_presence:"#FFB10A",badge:"#DFA044"}};var f=function e(t,r){if("custom_theme"===t)return r;if("default"===t)return h.default_theme;if(!t)return h.default_theme;return h[t]||h.default_theme};var m=function e(t){var r=f(t.theme,t.custom);if(!r){Object(d["h"])('Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var a=Object(u["c"])(r,{useGlobalNav:t.useGlobalNav});var n=r.text_color;var i=Object(u["b"])(r.column_bg,25);var o=Object(u["b"])(r.column_bg,35);var c=Object(l["a"])(r);var v="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+r.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+a+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+i+";\n\t\t\tcolor: "+a+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+r.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+r.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+r.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(u["d"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: 0 0 0 3px "+n+";\n\t\t}\n\t\t.p-channel_sidebar__channel.focus-ring,\n\t\t.p-channel_sidebar__link.focus-ring {\n\t\t\tbox-shadow: 0 0 0 3px "+n+" inset;\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+i+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+o+";\n\t\t}\n\n\t\t/** Global Nav (WIP) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+c.nav_bar_bg+";\n\t\t\tcolor: "+c.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+r.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+c.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+r.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\t";return s.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},v)};m.displayName="Theme";m.defaultProps=p;var b=function e(t){var r=Object(c["getUserPref"])(t,"sidebar_theme");var a=JSON.parse(Object(c["getUserPref"])(t,"sidebar_theme_custom_values")||"{}");return{theme:r,custom:a,useGlobalNav:Object(l["b"])(t)}};t["a"]=Object(o["connect"])(b)(m)},1451:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(190);var O=r(21769);var k=r(37);var j=r(149);var C=r(5);var E=r(3184);var S=r(3044);var w=r(1452);var I=r(3164);var T=r(91);var N=r(20180);var R=r.n(N);var A=new C["b"]("channel_sidebar");var M={coachmarkState:m.a.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:m.a.func,setUserPrefByApi:m.a.func};var P={coachmarkState:void 0,setJumperCoachmarkState:g["noop"],setUserPrefByApi:g["noop"]};var x=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.hideCoachmark=r.hideCoachmark.bind(r);r.hideButton=r.hideButton.bind(r);r.onShowContinue=r.onShowContinue.bind(r);r.onShowSkip=r.onShowSkip.bind(r);r.onHideContinue=r.onHideContinue.bind(r);r.onHideSkip=r.onHideSkip.bind(r);r.onButtonClick=r.onButtonClick.bind(r);return r}c()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,r){t.stopPropagation();switch(r){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){Object(T["b"])("QUICKSWITCHER_ACTION",{trigger:"sidebar_btn",action:"opened"});Object(w["a"])()}},{key:"clog",value:function e(t){var r={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[this.props.coachmarkState];Object(T["b"])("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:r}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var r={SHOW:{title:A.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,r=e.key;if("sparkles"===t)return h.a.createElement(j["a"],{key:r,text:":sparkles:"});return null}),content:A.rt("To jump to any channel or conversation, try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(S["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:A.t("Hide the sidebar button"),continueButtonText:A.t("OK")},HIDE:{title:A.t("You\u2019re a pro at keyboard shortcuts"),content:A.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(S["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:A.t("No thanks, I like the button"),continueButtonText:A.t("Hide Button")}};var a={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return h.a.createElement(I["a"],n()({},a,r.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return h.a.createElement(I["a"],n()({},a,r.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=h.a.createElement(E["c"],{type:"button",className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":A.t("Open the Quick Switcher to jump to a conversation.")},h.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},h.a.createElement(k["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),A.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),h.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(S["isMac"])()?"\u2318K":"ctrl+K"));return this.maybeRenderCoachmark(t)}}]);return t}(p["Component"]);x.displayName="QuickswitcherButton";x.defaultProps=P;var D=function e(t){return{coachmarkState:Object(y["getJumperCoachmarkState"])(t)}};var F={setJumperCoachmarkState:y["setJumperCoachmarkState"],setUserPrefByApi:O["c"]};t["a"]=Object(b["connect"])(D,F)(x)},1452:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.jumper.start",function(){return null});var i={start:n}},1455:function(e,t,r){"use strict";r.d(t,"a",function(){return W});var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(263);var c=r.n(o);var l=r(3276);var u=r(21698);var d=r(3284);var v=r(54);var p=r(21697);var h=r(21866);var f=r(3271);var m=r(190);var b=r(21714);var g=r(12);var _=r(907);var y=r(3203);var O=r(5);var k=r(2215);var j=["starred","sharedChannels","channels","orgWideChannels","ims","apps"];var C={starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var E=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"];var S=s.a.invert(E);var w={default:E.map(function(){return[]}),muted:E.map(function(){return[]})};var I=function e(t){var r=t.channel,a=t.members,n=t.isCurrentlySelected,i=t.isMuted,s=t.shouldHideReadChannels,o=t.shouldHideReadChannelsUnlessStarred,c=t.featureReactMessages;if(n)return true;if(Object(_["isArchived"])(r))return false;if(Object(_["isUnknownOrNonExistent"])(r))return false;if(Object(_["isImAndIsMemberDeleted"])(r,a[Object(_["getMemberIdFromIm"])(r)]))return false;if(Object(_["isPublicChannel"])(r)&&!Object(_["isMemberOfChannel"])(r))return false;if((Object(_["isIm"])(r)||Object(_["isMpim"])(r))&&!Object(_["isOpen"])(r)&&Object(_["isRead"])(r))return false;if(Object(_["isIm"])(r)&&!Object(y["v"])({members:a,dangerouslyOverrideCreateSelectorSanityCheck:true},[Object(_["getMemberIdFromIm"])(r)]))return false;if(Object(_["isMpim"])(r)&&!Object(y["v"])({members:a,dangerouslyOverrideCreateSelectorSanityCheck:true},Object(_["getMemberIdsFromMpim"])(r)))return false;if(o&&Object(_["isStarred"])(r))return true;if(Object(_["getHasDraft"])(r))return true;if(i&&Object(_["shouldShowWithoutUnreads"])(r)&&!c)return true;if((o||s)&&Object(_["isRead"])(r))return false;return true};var T=function e(t){var r=t.channel,a=t.isApp,n=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels;if(Object(_["isStarred"])(r))return"starred";if(Object(_["isSharedPublicOrPrivateChannel"])(r)&&i)return"sharedChannels";if(Object(_["isOrgGlobalSharedPublicOrPrivateChannel"])(r)&&!Object(_["isPrivateChannel"])(r)&&s)return"orgWideChannels";if(a&&n)return"apps";if(Object(_["isIm"])(r)||Object(_["isMpim"])(r))return"ims";return"channels"};var N=function e(t){var r=t.channel,a=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(_["isSlackbot"])(r))return S.slackbot;if(Object(_["isUserId"])(r,a))return S.you;if(Object(_["isIm"])(r)||Object(_["isMpim"])(r))return s?S.imsMentions:S.ims;if(n&&Object(_["isPrivateChannel"])(r))return s?S.privateMentions:S.private;if(i&&Object(_["isSharedPublicOrPrivateChannel"])(r))return s?S.sharedMentions:S.shared;return s?S.defaultMentions:S.default};var R=function e(t,r){return Object(O["m"])(Object(_["getDisplayName"])(t),Object(_["getDisplayName"])(r))};var A=function e(t,r){var a=t.priority||-1;var n=r.priority||-1;if(a===n)return R(t,r);return n-a};var M=function e(t){var r=t.sortPref,a=t.currentTeam;if("priority"===r&&""!==a.plan)return A;return R};var P=function e(t){var r=t.channel,a=t.members;var n=Object(_["getMemberIdFromIm"])(r);var i=a&&a[n]||null;return Object(y["z"])(i)};var x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channels,a=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.sidebarFiltersIsEnabled,c=t.featureReactMessages;var l=!o&&"hide_read_channels"===s;var u=!o&&"hide_read_channels_unless_starred"===s;var d=[];var v=false;var p=false;var h=false;var f=Object.keys(r);for(var m=0;m<f.length;m+=1){var b=r[f[m]];var g=I({channel:b,members:i,isCurrentlySelected:a===b.id,isMuted:!!n[b.id],shouldHideReadChannels:l,shouldHideReadChannelsUnlessStarred:u,featureReactMessages:c});g&&d.push(b);v||(v=Object(_["isSharedPublicOrPrivateChannel"])(b)&&(Object(_["isMemberOfChannel"])(b)||a===b.id));p||(p=Object(_["isOrgGlobalSharedPublicOrPrivateChannel"])(b)&&!Object(_["isPrivateChannel"])(b));h||(h=Object(_["isStarred"])(b))}return{channelsVisible:d,belongsToOrPreviewingAnySharedChannels:v,belongsToAnyOrgChannels:p,hasAStarredChannel:h}};var D=function e(t){return Object(v["getUserPref"])(t,"sidebar_behavior")};var F=function e(t){return Object(v["getUserPref"])(t,"channel_sort")};var L=function e(t){return Object(v["getUserPref"])(t,"separate_private_channels")};var B=function e(t){return Object(v["getUserPref"])(t,"separate_shared_channels")};var U=function e(t){return Object(v["getUserPref"])(t,"ent_org_wide_channels_sidebar")};var q=function e(t){return Object(g["isFeatureEnabled"])(t,"feature_sidebar_filters")&&"collapsible"===Object(k["a"])("collapsible_sidebar")};var H=Object(o["createSelector"])([g["useReactMessages"],q,f["getCurrentTeam"],D,F,L,B,U,p["getAllChannels"],l["getMutedChannels"],u["getAllMembers"],b["getPrimaryView"],g["getCurrentUserId"],d["isAppSpaceEnabled"]],function(e,t,r,a,i,o,c,l,u,d,v,p,h,f){var m={};var b=j.concat();b.forEach(function(e){m[e]=n()({},C[e]);m[e].channelsOrdered=s.a.cloneDeep(w)});var g=x({channels:u,currentlySelectedId:p,mutedChannels:d,members:v,sidebarBehaviorPref:a,sidebarFiltersIsEnabled:t,featureReactMessages:e}),y=g.channelsVisible,O=g.belongsToOrPreviewingAnySharedChannels;var k=M({sortPref:i,currentTeam:r});var E=y.sort(k);var S=[];E.forEach(function(t){Object(_["isIm"])(t)&&S.push(Object(_["getMemberIdFromIm"])(t));var r=T({channel:t,isApp:P({channel:t,members:v}),isAppSpaceEnabled:f,shouldSeparateSharedChannels:c,shouldSeparateOrgWideChannels:l});var a=!!d[t.id];var n=Object(_["getBadgeCountWithMuted"])(t,a,e);var s=n>0;var u=N({channel:t,currentUserId:h,shouldSeparatePrivateChannels:o,shouldSeparateSharedChannels:c,shouldBumpMention:"priority"===i&&s});var p=a?"muted":"default";var b=m[r].channelsOrdered[p][u];b.push(t.id)});var I=s.a.mapValues(m,function(e){return n()({},e,{channelsOrdered:s.a.flatten(e.channelsOrdered.default.concat(e.channelsOrdered.muted))})});if(I.starred.channelsOrdered.length<1){delete I.starred;s.a.remove(b,function(e){return"starred"===e})}if(!c||!O){delete I.sharedChannels;s.a.remove(b,function(e){return"sharedChannels"===e})}if(!l||I.orgWideChannels.channelsOrdered.length<1){delete I.orgWideChannels;s.a.remove(b,function(e){return"orgWideChannels"===e})}if(!f){delete I.apps;s.a.remove(b,function(e){return"apps"===e})}return{sidebarSectionsOrdered:b,sidebarSections:I,idsNeedingPresenceSubscription:S}});var W=Object(o["createSelector"])([g["useReactMessages"],q,f["getCurrentTeam"],D,F,L,B,U,p["getAllChannels"],l["getMutedChannels"],u["getAllMembers"],b["getPrimaryView"],m["getSections"],h["getChannelRealtimePriorities"],g["getCurrentUserId"],d["isAppSpaceEnabled"]],function(e,t,r,a,i,o,c,l,u,d,v,p,h,f,m,b){var g={};var y=j.concat();y.forEach(function(e){g[e]=n()({},C[e]);g[e].channelsOrdered=s.a.cloneDeep(w);t&&(g[e].currentFilter=h[e])});var O=x({channels:u,currentlySelectedId:p,mutedChannels:d,members:v,sidebarBehaviorPref:a,sidebarFiltersIsEnabled:t,featureReactMessages:e}),k=O.channelsVisible,E=O.belongsToOrPreviewingAnySharedChannels,S=O.belongsToAnyOrgChannels,I=O.hasAStarredChannel;var R=M({sortPref:i,currentTeam:r});var A=k.sort(R);var D=[];A.forEach(function(t){var r=T({channel:t,isApp:P({channel:t,members:v}),isAppSpaceEnabled:b,shouldSeparateSharedChannels:c,shouldSeparateOrgWideChannels:l});var a=!!d[t.id];var n=Object(_["getBadgeCountWithMuted"])(t,a,e);var s=n>0;var u=N({channel:t,currentUserId:m,shouldSeparatePrivateChannels:o,shouldSeparateSharedChannels:c,shouldBumpMention:"priority"===i&&s});var h=a?"muted":"default";if("unreads"===g[r].currentFilter){if((Object(_["isRead"])(t)||a&&!s)&&p!==t.id&&!Object(_["getHasDraft"])(t))return}else if("real_time_sort"===g[r].currentFilter&&!s&&p!==t.id&&!Object(_["getHasDraft"])(t)){var y=f[t.id]&&f[t.id].score?f[t.id].score:0;if(Object(_["isRead"])(t)||a||y<.75)return}var O=g[r].channelsOrdered[h][u];O.push(t.id)});var F=s.a.mapValues(g,function(e){return n()({},e,{channelsOrdered:s.a.flatten(e.channelsOrdered.default.concat(e.channelsOrdered.muted))})});if(!I){delete F.starred;s.a.remove(y,function(e){return"starred"===e})}if(!c||!E){delete F.sharedChannels;s.a.remove(y,function(e){return"sharedChannels"===e})}if(!l||!S){delete F.orgWideChannels;s.a.remove(y,function(e){return"orgWideChannels"===e})}if(!b){delete F.apps;s.a.remove(y,function(e){return"apps"===e})}return{sidebarSectionsOrdered:y,sidebarSections:F,idsNeedingPresenceSubscription:D}});t["b"]=H},1456:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(263);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21701);var u=12;var d=18;var v=26;var p=52;var h={id:null,type:"topPadding",height:u};var f={id:null,type:"spacer",height:d};var m={id:"Vquick_switcher",type:"quickswitcherButton",height:p};var b={id:"Vall_unreads",type:"allUnreadsLink",height:v};var g={id:"Vall_threads",type:"allThreadsLink",height:v};var _={id:null,type:"sectionHeading",name:"",height:v};var y={id:null,type:"folderHeading",name:"",height:v};var O={id:null,type:"channel",index:null,height:v};var k={id:null,type:"invitePeopleLink",dim:false,height:v};var j={id:null,type:"installAppsLink",dim:false,height:v};var C={id:null,type:"emptyState",index:null,height:v};var E=Object(i["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];var d=[];var v={};var p=0;e?d.push(n()({},m,{scrollTop:p,scrollBottom:p+=m.height})):d.push(n()({},h,{scrollTop:p,scrollBottom:p+=h.height}));t&&!Object(l["a"])()&&d.push(n()({},b,{scrollTop:p,scrollBottom:p+=b.height}));Object(l["a"])()||d.push(n()({},g,{scrollTop:p,scrollBottom:p+=g.height}));var E=0;c&&u.forEach(function(e){"folderHeading"!==Object(o["last"])(d).type&&d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));d.push(n()({},y,{id:e.name,name:e.name}));e.channelIds.forEach(function(t){var r=false;i.forEach(function(e){var a=s[e]||{};var n=a.channelsOrdered||[];r=r||n.filter(function(e){return e===t}).length>0});if(!r)return;if(!e.isCollapsed){d.push(n()({},O,{id:t,index:E,scrollTop:p,scrollBottom:p+=O.height,sectionName:e.name}));E+=1}v[t]=true})});i.forEach(function(e,t){var i=s[e]||{};var c=i.channelsOrdered||[];!("sectionHeading"!==Object(o["last"])(d).type||c.length>0)||Object(l["a"])()&&0===t||d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));i.hasHeading&&d.push(n()({},_,{name:e,scrollTop:p,scrollBottom:p+=_.height,sectionName:e}));a&&i.hasHeading&&0===c.length&&d.push(n()({},C,{name:e,scrollTop:p,scrollBottom:p+=C.height}));i.channelsOrdered.forEach(function(t){if(v[t])return;d.push(n()({},O,{id:t,index:E,scrollTop:p,scrollBottom:p+=O.height,sectionName:e}));E+=1});if("ims"===e&&r){d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));d.push(n()({},k,{dim:"dim"===r,height:k.height,scrollTop:p,scrollBottom:p+=k.height}))}if("apps"===e){d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));d.push(n()({},j,{height:j.height,scrollTop:p,scrollBottom:p+=j.height}))}});d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));d.push(n()({},f,{scrollTop:p,scrollBottom:p+=f.height}));return{rows:d,rowsMap:Object(o["keyBy"])(d,"id"),rowIds:Object(o["map"])(d,"id")}});t["a"]=E},1458:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(10);var n=Object(a["c"])("TS.ui.admin_invites.start",function(){return null});var i=Object(a["c"])("TS.ui.admin_invites.updateCode")},1461:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(9);var s=r(1);var o=r.n(s);var c=r(3);var l=r.n(c);var u=r(3182);var d=r(21696);var v=r(21702);var p=r(22503);var h=r(21778);var f=r(3275);var m=r(21697);var b=r(21706);var g=r(54);var _=r(3274);var y=r(3051);var O=r(12);var k=r(907);var j=r(1007);var C=r(252);var E=r(1559);var S=r(391);var w=r(21755);var I=r(1560);var T=r(64);var N=r(387);var R=r(192);var A=r(21946);var M=r(21996);var P=r(906);var x=r(985);function D(e,t,r){if(!r)return true;if(Object(S["a"])(t.subtype)||Object(S["a"])(r.subtype))return true;if(Object(w["b"])(t.subtype)||Object(w["b"])(r.subtype))return true;if("thread_broadcast"===t.subtype)return true;if(r.reply_count||t.reply_count)return true;var a=Object(T["a"])(t.ts);var n=Object(T["a"])(r.ts);var i=Object(N["a"])(a,n);var s=Object(R["a"])(a,n);if(i>5||!s)return true;var o=Object(j["getMsgSenderEntity"])(e,t);var c=Object(j["getMsgSenderEntity"])(e,r);if(o.userId&&o.userId===c.userId)return false;if(o.botId&&!o.userId&&o.botId===c.botId){if(o.username&&o.username!==c.username)return true;return false}if(o.username&&o.username===c.username)return false;return true}function F(e,t){var r=t.message;var a=Object(j["shouldRenderFileThread"])(r,{featureFileThreads:Object(O["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(O["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var n=a?null:r.file;var i=a?r.files:null;var o=a?Object(b["getFileById"])(e,Object(s["first"])(i)):Object(b["getFileById"])(e,n);return{fileId:n,fileIds:i,file:o}}var L=function e(t,r){var a=r.ts,i=r.channelId,s=r.previousMessageTs;var o=Object(v["getMessageByTimestamp"])(t,i,a);var c=Object(g["getUserMessagesTheme"])(t);var l=Object(g["getUserPref"])(t,"threads_everything");var u=Object(g["getUserPref"])(t,"expand_inline_imgs");var d=Object(g["getUserPref"])(t,"expand_non_media_attachments");var p=Object(m["getChannelById"])(t,i);var h=Object(O["isFeatureEnabled"])(t,"feature_file_threads");var S=Object(O["isFeatureEnabled"])(t,"feature_file_threads_dark_launch");var w=Object(O["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");if(!o)return{channelId:i,featureTinyspeck:Object(O["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:h,featureHideUnfurlUrls:w,messageNotFound:true};var T=F(t,{message:o}),N=T.file,R=T.fileId,A=T.fileIds;var x=Object(v["getMessageByTimestamp"])(t,i,s);var L=D(t,o,x);var B=Object(M["a"])(o,x);var U=Object(E["b"])(o,N);var q=Object(E["c"])(o,N);var H=Object(j["getMsgSenderEntity"])(t,o);var W=H.botId&&Object(f["getBotByMsg"])(t,o);var G=W?W.app_id:null;var V=o.slackbot_feels||null;var z=o.comment&&N&&Object(b["getFileCommentById"])(t,N.id,o.comment.id)||o.comment;N&&"file_share"===o.subtype&&o.upload&&(z=N.initial_comment);var K=Object(_["getMessageMetaData"])(t,{channelId:i,ts:a}),Q=K.isDeleting,Y=K.sliHighlight;var J=Object(y["getMessageEditData"])(t,{channelId:i,ts:a}),Z=J.isEditing;var X=N?Object(C["getFilePinnedInfoByChannelId"])({file:N,channelId:i}):Object(j["getMessagePinnedInfo"])(o);var $=X?X.pinnedBy:null;var ee=void 0;if(x){var te=F(t,{message:x});var re=te.file?Object(C["getFilePinnedInfoByChannelId"])({file:te.file,channelId:i}):Object(j["getMessagePinnedInfo"])(x);var ae=re?re.pinnedBy:null;ee={previousMessageIsStarred:Object(j["isStarred"])(x),previousMessageIsPinned:Object(P["b"])(x,p),previousMessageIsEphemeral:Object(j["isEphemeral"])(x),previousMessageSubtype:x.subtype,previousMessageSliHighlight:x.sliHighlight,previousMessagePinnedByMemberId:ae}}var ne=o.thread_ts;var ie=void 0;if(ne){ie={replyCount:o.reply_count};if(o.replies)ie.replies=o.replies;else{ie.replyUsers=o.reply_users;ie.replyUsersCount=o.reply_users_count;ie.latestReply=o.latest_reply}}var se=Object(O["getCurrentUserId"])(t);return n()({channelId:i,alertType:o.alert_type,subtype:o.subtype,text:o.text,noSpecials:false===o.mrkdwn,theme:c},H,{appId:G,hasAdHocSender:Object(I["a"])(o)},ie,{threadTs:ne,threadsEverythingPref:l,expandInlineImgsPref:u,expandNonMediaAttachmentsPref:d,attachments:o.attachments,fileId:R,fileIds:A,comment:z,isUpload:o.upload,reactionKey:U,reactionKeyForInitialFileComment:q,showUser:L,isFileFollowup:B,edited:o.edited,isStarred:Object(j["isStarred"])(o,N,"file_comment"===o.subtype&&z,h),isPinned:Object(P["b"])(o,p),currentUserId:se,pinnedByMemberId:$,sliHighlight:Y,botProfile:o.bot_profile,slackbotFeels:V,icons:o.icons,isEditing:Z,isUnprocessed:Object(j["isTempMsg"])(o)&&!Object(j["isEphemeral"])(o),isEphemeral:Object(j["isEphemeral"])(o),isDeleting:Q,showResend:o.showResend,showCancel:o.showCancel,isSlackbotIm:Object(k["isSlackbot"])(p),isSelfIm:Object(k["isYou"])(se,p)},ee,{featureTinyspeck:Object(O["isFeatureEnabled"])(t,"feature_tinyspeck"),featureFileThreads:h,featureHideUnfurlUrls:w,renderFileThread:Object(j["shouldRenderFileThread"])(o,{featureFileThreads:h,featureFileThreadsDarkLaunch:S}),ariaAssertive:Object(j["isDisconnectedFeedback"])(o)})};var B=Object(d["e"])("log message to console (for debugging)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var s=Object(v["getMessageByTimestamp"])(i,a,n);var o=Object(m["getChannelById"])(i,a);if(s){e(Object(u["warn"])(s));e(Object(A["b"])({message:s,modelObject:o}))}});B.propTypes={channelId:l.a.string.isRequired,ts:l.a.string.isRequired};var U={logMessage:B,maybeStartEditingMessage:y["maybeStartEditingMessage"],removeMsg:h["a"],resendMsg:p["a"]};t["a"]=Object(i["connect"])(L,U)(x["a"])},1465:function(e,t,r){"use strict";var a=r(1466);t["a"]=a["a"]},1472:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(10);var n=Object(a["c"])("TS.bots.ensureBotsArePresent");var i=Object(a["c"])("TS.bots.legacyBatchUpsertAndSignal")},1490:function(e,t,r){"use strict";var a=r(9);var n=r(21698);var i=r(3275);var s=r(12);var o=r(54);var c=r(3203);var l=r(21936);var u=r(1491);var d=function e(t,r){var a=r.userId,u=r.botId,d=r.username,v=r.botProfile;var p=void 0;var h=void 0;var f="";var m=true;var b=false;var g=true;var _=v?v.team_id:null;var y=Object(l["a"])(t,{userId:a,botId:u,username:d,botProfile:v});if(a){var O=Object(n["getMemberById"])(t,a);if(O){m=Object(c["X"])(O);b=Object(c["N"])(O);h=Object(c["f"])(O);f="/team/"+O.id;g=!Object(c["z"])(O);p=Object(c["d"])(O)}}else if(d&&!u)m=false;else if(u){var k=Object(i["getBotById"])(t,u);f="/services/"+k.id;m=!d&&!v&&!!k.isUnknown;b=!d&&!v&&!!k.isNonExistent;g=false}var j=Object(s["isFeatureEnabled"])(t,"feature_better_web_app_model");var C=Object(s["isFeatureEnabled"])(t,"feature_app_profile_card_trigger_shared_channels");return{theme:Object(o["getUserMessagesTheme"])(t),name:y,userId:a,color:h,botId:u||p,botTeamId:_,href:f,isUnknown:m,isNonExistent:b,memberIsHuman:g,featureBetterWebAppModel:j,featureAppProfileCardTriggerSharedChannels:C}};var v=function e(t,r){if(!Object(s["isFeatureEnabled"])(t,"feature_app_profile_card_trigger_shared_channels"))return d(t,r);var a=r.userId,n=r.botId,u=r.username,v=r.botProfile;var p=Object(i["maybeGetBotAndMemberByIds"])(t,{userId:a,botId:n,botProfile:v}),h=p.member,f=p.bot,m=p.memberIsHuman;var b=void 0;var g="";var _=true;var y=false;var O=v?v.team_id:null;var k=Object(l["a"])(t,{userId:a,botId:n,username:u,botProfile:v});if(h){_=!!h.isUnknown;y=!!h.isNonExistent;b=Object(c["f"])(h);g="/team/"+h.id}else if(f){g="/services/"+f.id;_=!!f.isUnknown;y=!!f.isNonExistent}u&&(_=false);var j=Object(s["isFeatureEnabled"])(t,"feature_better_web_app_model");var C=Object(s["isFeatureEnabled"])(t,"feature_app_profile_card_trigger_shared_channels");return{theme:Object(o["getUserMessagesTheme"])(t),name:k,userId:h?h.id:a,color:b,botId:f?f.id:n,botTeamId:O,href:g,isUnknown:_,isNonExistent:y,memberIsHuman:m,featureBetterWebAppModel:j,featureAppProfileCardTriggerSharedChannels:C}};t["a"]=Object(a["connect"])(v)(u["a"])},1491:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(21897);var g=r(440);var _=r(978);var y=r(23064);var O=r(200);var k=r(366);var j=r(21734);var C={name:v.a.string,theme:v.a.string,color:v.a.string,userId:v.a.string,botId:v.a.string,botTeamId:v.a.string,href:v.a.string,isUnknown:v.a.bool,isNonExistent:v.a.bool,isInteractive:v.a.bool,memberIsHuman:v.a.bool,clogLinkClick:v.a.func,featureBetterWebAppModel:v.a.bool,featureAppProfileCardTriggerSharedChannels:v.a.bool};var E={name:null,ts:null,color:null,theme:"light",userId:null,botId:null,botTeamId:null,href:null,isUnknown:true,isNonExistent:false,isInteractive:true,memberIsHuman:true,clogLinkClick:f["noop"],featureBetterWebAppModel:false,featureAppProfileCardTriggerSharedChannels:false};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){if(Object(j["a"])(t))return;var r=this.props,a=r.userId,n=r.botId,i=r.botTeamId,s=r.clogLinkClick,o=r.memberIsHuman,c=r.featureBetterWebAppModel,l=r.featureAppProfileCardTriggerSharedChannels;if(!a&&!n)return;t.preventDefault();t.persist();if(!o&&n){if(l&&c)return;Object(k["a"])(t,n,i)}else Object(O["a"])(t,this.props.userId);s()}},{key:"renderBotLabel",value:function e(){if(this.props.memberIsHuman)return null;return h.a.createElement("span",{className:"margin_left_25"},h.a.createElement(y["a"],null))}},{key:"render",value:function e(){var t=this.props,r=t.botId,a=t.botTeamId,n=t.memberIsHuman,i=t.featureBetterWebAppModel,s=t.featureAppProfileCardTriggerSharedChannels;if(this.props.isUnknown)return h.a.createElement(g["a"],{type:"unknown"});if(this.props.isNonExistent)return h.a.createElement(g["a"],{type:"non-existent"});var o={};"dense"===this.props.theme&&this.props.color&&(o.color="#"+this.props.color);var c=void 0;if(this.props.href&&this.props.isInteractive){var l=!n&&i&&s;c=h.a.createElement("a",{className:"c-message__sender_link",style:o,href:this.props.href,target:"_blank",rel:"noopener noreferrer",onClick:l?f["noop"]:this.onClick,"data-stringify-suffix":" ","data-message-sender":this.props.userId},this.props.name);l&&(c=h.a.createElement(b["a"],{serviceId:r,homeWorkspaceId:a,onClick:this.onClick},c))}else c=h.a.createElement("span",{"data-stringify-suffix":" "},this.props.name);return h.a.createElement("span",{className:"c-message__sender",style:o},c,h.a.createElement(_["a"],{memberId:this.props.userId}),this.renderBotLabel())}}]);return t}(p["PureComponent"]);S.displayName="MessageSender";S.defaultProps=E;t["a"]=S},1494:function(e,t,r){"use strict";var a=r(1495);var n=r(994);var i=r(992);t["a"]=a["a"]},1495:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(21740);var _=r(12);var y=r(21756);var O=r(5);var k=r(298);var j=r(21741);var C=r(992);var E=r(994);var S=r(20186);var w=r.n(S);var I=new O["b"]("reactions");var T={reactions:v.a.arrayOf(v.a.shape(C["b"])),reactionKey:v.a.string,currentUser:v.a.string,className:v.a.string,emojiMode:v.a.string,changeReactionFromUserAction:v.a.func.isRequired};var N={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null};var R=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onAddReaction=e.onAddReaction.bind(e);e.onReactionClick=e.onReactionClick.bind(e);e.onFocusEnter=e.onFocusEnter.bind(e);e.onFocusLeave=e.onFocusLeave.bind(e);e.state={hasKeyboardFocus:false};return e}s()(t,[{key:"onAddReaction",value:function e(t){Object(k["a"])({e:t,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function e(t,r){var a=this.props.reactionKey;this.props.changeReactionFromUserAction({key:a,name:t,adding:!r})}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.reactions,n=r.reactionKey,i=r.currentUser,s=r.emojiMode;if(!a||0===a.length)return null;var o=a.map(function(e){var r=e.count,a=e.name,o=e.users,c=e.url;return h.a.createElement(C["a"],{name:a,count:r,users:o,url:c,currentUser:i,key:a,reactionKey:n,onClick:t.onReactionClick,emojiMode:s})}).concat(h.a.createElement(E["a"],{onClick:this.onAddReaction,key:"reaction-add-button"}));var c=b()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus});var l=I.t("Reactions",{note:"Screenreader: Label for blind users"});return h.a.createElement(j["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},h.a.createElement("div",{className:c,role:"group","aria-label":l},o))}}]);return t}(h.a.PureComponent);R.displayName="ReactionBar";R.defaultProps=N;var A=function e(t,r){return{reactions:Object(g["getReactionsForKey"])(t,r.reactionKey),currentUser:Object(_["getCurrentUserId"])(t),emojiMode:Object(y["a"])(t)}};var M={changeReactionFromUserAction:g["changeReactionFromUserAction"]};t["a"]=Object(f["connect"])(A,M)(R)},1496:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(1);var l=r.n(c);var u=r(12);var d=r(21698);var v=r(3203);var p=r(5);var h=r(212);var f=r(440);var m=new p["b"]("reactions");var b={users:n.a.arrayOf(n.a.node),emoji:n.a.string.isRequired,count:n.a.number.isRequired,reacted:n.a.bool};var g={users:[],reacted:false};function _(e){var t=e.users,r=e.emoji,a=e.count,n=e.reacted;var i=":"+r+":";p["n"]!==p["b"].DEFAULT_LOCALE&&(i=Object(h["m"])(i));if(1===a){if(n)return m.rt('You (click to remove) <span className="c-reaction__tip_subtitle">reacted with {emoji}</span>',{emoji:i});return m.rt('{user} <span className="c-reaction__tip_subtitle">reacted with {emoji}</span>',{user:t[0],emoji:i})}a!==t.length&&t.push(m.t("others"));var s=Object(p["e"])(t,{noEscape:true,react:true});if(n)return m.rt('{users_and_you} <span className="c-reaction__tip_subtitle">reacted with {emoji}</span>',{users_and_you:s,emoji:i});return m.rt('{users} <span className="c-reaction__tip_subtitle">reacted with {emoji}</span>',{users:s,emoji:i})}var y=function e(t){var r=t.users,a=t.emoji,n=t.count,i=t.reacted;var o=_({users:r,emoji:a,count:n,reacted:i});return s.a.createElement("span",{className:"c-reaction__tip"},o)};y.displayName="ReactionTip";y.defaultProps=g;var O=function e(t,r){var a=Object(u["getCurrentUserId"])(t);var n=l.a.compact(r.users).slice(0,50);var i=l.a.map(n,function(e,r){if(e===a)return 0===r?m.t("You"):m.t("you");var n=Object(d["getMemberById"])(t,e);if(Object(v["X"])(n))return s.a.createElement(f["a"],{type:"unknown",subtler:true});if(Object(v["N"])(n))return s.a.createElement(f["a"],{type:"non-existent",subtler:true});return Object(v["s"])(t,e)});return{users:i}};t["a"]=Object(o["connect"])(O)(y)},1498:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(54);var O=r(21712);var k=r(5);var j=r(21741);var C=r(265);var E=r(37);var S=r(93);var w=r(128);var I=r(296);var T=r(192);var N=r(64);var R=r(1056);var A=new k["b"]("threads");var M={replies:h.a.array,replyCount:h.a.number.isRequired,replyUsers:h.a.arrayOf(h.a.string),replyUsersCount:h.a.number,latestReply:h.a.string,channelId:h.a.string.isRequired,threadTs:h.a.string.isRequired,do24hrTime:h.a.bool,showThread:h.a.func};var P={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThread:v.a.noop};function x(e,t){var r=Object(R["a"])(e);return m.a.createElement(C["b"],{key:e,userId:r?null:e,botId:r?e:null,size:24,additionalOverlay:t,showCard:true,ariaHidden:"true",tabIndex:"-1"})}x.displayName="renderSingleAvatar";var D=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.state={hasKeyboardFocus:false};return r}s()(t,[{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=v.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThread({channelId:this.props.channelId,threadTs:this.props.threadTs})}},{key:"renderFaces",value:function e(){var t=void 0;t=this.props.replyUsers&&this.props.replyUsers.length?v.a.reject(this.props.replyUsers,function(e){return"B00"===e}):v()(this.props.replies).map("user").reject(function(e){return"B00"===e}).uniq().value();var r=this.props.replyUsersCount?this.props.replyUsersCount:t.length;if(t.length>5)return v()(t).take(4).map(function(e){return x(e)}).value().concat(x(t[4],r-5));return v.a.map(t,function(e){return x(e)})}},{key:"render",value:function e(){var t=A.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:this.props.replyCount});var r=Object(S["c"])(this.props.channelId,this.props.threadTs);var a=this.getLastReplyTs();var n="";n=Object(T["a"])(Object(N["a"])(a),new Date)?1===this.props.replyCount?A.t("Today at {time}",{time:Object(w["a"])(a,{do24hrTime:this.props.do24hrTime})}):A.t("Last reply today at {time}",{time:Object(w["a"])(a,{do24hrTime:this.props.do24hrTime})}):1===this.props.replyCount?Object(I["a"])(a):A.t("Last reply {time_ago}",{time_ago:Object(I["a"])(a)});var i=_()("c-message__reply_bar",{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});return m.a.createElement(j["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{role:"presentation",className:i,onClick:this.openThread},this.renderFaces(),m.a.createElement("a",{className:"c-message__reply_count",href:r,target:"_blank",rel:"noopener noreferrer"},t),m.a.createElement("div",{className:"c-message__reply_bar_description"},m.a.createElement("span",{className:"c-message__reply_bar_last_reply"},n),m.a.createElement("span",{className:"c-message__reply_bar_view_thread"},A.t("View thread"))),m.a.createElement(E["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}(m.a.PureComponent);D.displayName="ReplyBar";D.defaultProps=P;function F(e){return{do24hrTime:Object(y["getUserPref"])(e,"time24")}}t["a"]=Object(b["connect"])(F,{showThread:O["d"]})(D)},14989:function(e,t,r){(function(t){e.exports=t["EXIF"]=r(14990)}).call(t,r(7))},14990:function(e,t,r){var a,i;(function(){var r=false;var s=this;var o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.EXIFwrapped=e};true;"undefined"!==typeof e&&e.exports&&(t=e.exports=o);t.EXIF=o;var c=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var l=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var v=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function p(e,t,r){e.addEventListener?e.addEventListener(t,r,false):e.attachEvent&&e.attachEvent("on"+t,r)}function h(e){return!!e.exifdata}function f(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var r=atob(e);var a=r.length;var n=new ArrayBuffer(a);var i=new Uint8Array(n);for(var s=0;s<a;s++)i[s]=r.charCodeAt(s);return n}function m(e,t){var r=new XMLHttpRequest;r.open("GET",e,true);r.responseType="blob";r.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};r.send()}function b(e,t){function a(r){var a=g(r);e.exifdata=a||{};var n=_(r);e.iptcdata=n||{};if(o.isXmpEnabled){var i=I(r);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=f(e.src);a(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){a(e.target.result)};m(e.src,function(e){i.readAsArrayBuffer(e)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(s.response);s=null};s.open("GET",e.src,true);s.responseType="arraybuffer";s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){r&&console.log("Got file of length "+e.target.result.byteLength);a(e.target.result)};i.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i;while(a<n){if(255!=t.getUint8(a)){r&&console.log("Not a valid marker at offset "+a+", found: "+t.getUint8(a));return false}i=t.getUint8(a+1);r&&console.log(i);if(225==i){r&&console.log("Found 0xFFE1 marker");return w(t,a+4,t.getUint16(a+2)-2)}a+=2+t.getUint16(a+2)}}function _(e){var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(a<n){if(i(t,a)){var s=t.getUint8(a+7);s%2!==0&&(s+=1);0===s&&(s=4);var o=a+8+s;var c=t.getUint16(a+6+s);return O(e,o,c)}a++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function O(e,t,r){var a=new DataView(e);var n={};var i,s,o,c,l;var u=t;while(u<t+r){if(28===a.getUint8(u)&&2===a.getUint8(u+1)){c=a.getUint8(u+2);if(c in y){o=a.getInt16(u+3);l=o+5;s=y[c];i=S(a,u+5,o);n.hasOwnProperty(s)?n[s]instanceof Array?n[s].push(i):n[s]=[n[s],i]:n[s]=i}}u++}return n}function k(e,t,a,n,i){var s=e.getUint16(a,!i),o={},c,l,u;for(u=0;u<s;u++){c=a+12*u+2;l=n[e.getUint16(c,!i)];!l&&r&&console.log("Unknown tag: "+e.getUint16(c,!i));o[l]=j(e,c,t,a,i)}return o}function j(e,t,r,a,n){var i=e.getUint16(t+2,!n),s=e.getUint32(t+4,!n),o=e.getUint32(t+8,!n)+r,c,l,u,d,v,p;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8,!n);c=s>4?o:t+8;l=[];for(d=0;d<s;d++)l[d]=e.getUint8(c+d);return l;case 2:c=s>4?o:t+8;return S(e,c,s-1);case 3:if(1==s)return e.getUint16(t+8,!n);c=s>2?o:t+8;l=[];for(d=0;d<s;d++)l[d]=e.getUint16(c+2*d,!n);return l;case 4:if(1==s)return e.getUint32(t+8,!n);l=[];for(d=0;d<s;d++)l[d]=e.getUint32(o+4*d,!n);return l;case 5:if(1==s){v=e.getUint32(o,!n);p=e.getUint32(o+4,!n);u=new Number(v/p);u.numerator=v;u.denominator=p;return u}l=[];for(d=0;d<s;d++){v=e.getUint32(o+8*d,!n);p=e.getUint32(o+4+8*d,!n);l[d]=new Number(v/p);l[d].numerator=v;l[d].denominator=p}return l;case 9:if(1==s)return e.getInt32(t+8,!n);l=[];for(d=0;d<s;d++)l[d]=e.getInt32(o+4*d,!n);return l;case 10:if(1==s)return e.getInt32(o,!n)/e.getInt32(o+4,!n);l=[];for(d=0;d<s;d++)l[d]=e.getInt32(o+8*d,!n)/e.getInt32(o+4+8*d,!n);return l}}function C(e,t,r){var a=e.getUint16(t,!r);return e.getUint32(t+2+12*a,!r)}function E(e,t,r,a){var n=C(e,t+r,a);if(!n)return{};if(n>e.byteLength)return{};var i=k(e,t,t+n,d,a);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var s=t+i.JpegIFOffset;var o=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,s,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function S(e,t,r){var a="";for(n=t;n<t+r;n++)a+=String.fromCharCode(e.getUint8(n));return a}function w(e,t){if("Exif"!=S(e,t,4)){r&&console.log("Not valid EXIF data! "+S(e,t,4));return false}var a,n,i,s,o,d=t+6;if(18761==e.getUint16(d))a=false;else{if(19789!=e.getUint16(d)){r&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}a=true}if(42!=e.getUint16(d+2,!a)){r&&console.log("Not valid TIFF data! (no 0x002A)");return false}var p=e.getUint32(d+4,!a);if(p<8){r&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!a));return false}n=k(e,d,d+p,l,a);if(n.ExifIFDPointer){s=k(e,d,d+n.ExifIFDPointer,c,a);for(i in s){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=v[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=v.Components[s[i][0]]+v.Components[s[i][1]]+v.Components[s[i][2]]+v.Components[s[i][3]];break}n[i]=s[i]}}if(n.GPSInfoIFDPointer){o=k(e,d,d+n.GPSInfoIFDPointer,u,a);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3];break}n[i]=o[i]}}n["thumbnail"]=E(e,d,p,a);return n}function I(e){if(!("DOMParser"in self))return;var t=new DataView(e);r&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){r&&console.log("Not a valid JPEG");return false}var a=2,n=e.byteLength,i=new DOMParser;while(a<n-4){if("http"==S(t,a,4)){var s=a-1;var o=t.getUint16(a-2)-1;var c=S(t,s,o);var l=c.indexOf("xmpmeta>")+8;c=c.substring(c.indexOf("<x:xmpmeta"),l);var u=c.indexOf("x:xmpmeta")+10;c=c.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+c.slice(u);var d=i.parseFromString(c,"text/xml");return N(d)}a++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var r=0;r<e.attributes.length;r++){var a=e.attributes.item(r);t["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);var s=i.nodeName;if(null==t[s])t[s]=T(i);else{if(null==t[s].push){var o=t[s];t[s]=[];t[s].push(o)}t[s].push(T(i))}}return t}function N(e){try{var t={};if(e.children.length>0)for(var r=0;r<e.children.length;r++){var a=e.children.item(r);var n=a.attributes;for(var i in n){var s=n[i];var o=s.nodeName;var c=s.nodeValue;void 0!==o&&(t[o]=c)}var l=a.nodeName;if("undefined"==typeof t[l])t[l]=T(a);else{if("undefined"==typeof t[l].push){var u=t[l];t[l]=[];t[l].push(u)}t[l].push(T(a))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}o.enableXmp=function(){o.isXmpEnabled=true};o.disableXmp=function(){o.isXmpEnabled=false};o.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;h(e)?t&&t.call(e):b(e,t);return true};o.getTag=function(e,t){if(!h(e))return;return e.exifdata[t]};o.getIptcTag=function(e,t){if(!h(e))return;return e.iptcdata[t]};o.getAllTags=function(e){if(!h(e))return{};var t,r=e.exifdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.getAllIptcTags=function(e){if(!h(e))return{};var t,r=e.iptcdata,a={};for(t in r)r.hasOwnProperty(t)&&(a[t]=r[t]);return a};o.pretty=function(e){if(!h(e))return"";var t,r=e.exifdata,a="";for(t in r)r.hasOwnProperty(t)&&("object"==typeof r[t]?r[t]instanceof Number?a+=t+" : "+r[t]+" ["+r[t].numerator+"/"+r[t].denominator+"]\r\n":a+=t+" : ["+r[t].length+" values]\r\n":a+=t+" : "+r[t]+"\r\n");return a};o.readFromBinaryFile=function(e){return g(e)};true;!(a=[],i=function(){return o}.apply(t,a),void 0!==i&&(e.exports=i))}).call(this)},1527:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21706);var _=r(21698);var y=r(21712);var O=r(3203);var k=r(21734);var j=r(113);var C=r(148);var E=r(200);var S=r(21995);var w={file:j["a"].File(["name","permalink"]).isRequired,followup:v.a.bool,userId:v.a.string,userName:v.a.string,previewFile:v.a.func};var I={followup:false,userId:null,userName:null,previewFile:m["noop"]};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.previewFile=r.previewFile.bind(r);r.onUserClick=r.onUserClick.bind(r);return r}s()(t,[{key:"onUserClick",value:function e(t){if(Object(k["a"])(t))return;t.preventDefault();Object(E["a"])(t,this.props.file.user)}},{key:"previewFile",value:function e(t){if(Object(k["a"])(t))return;t.preventDefault();this.props.previewFile({fileId:this.props.file.id})}},{key:"renderUserLink",value:function e(){var t=this.props,r=t.userId,a=t.userName;return h.a.createElement("a",{className:"c-message__file_meta_user member",href:"/team/"+r,"data-member-id":r,onClick:this.onUserClick},a)}},{key:"renderFileLink",value:function e(){var t=this.props.file;return h.a.createElement("a",{className:"c-message__file_link file_preview_link",href:t.permalink,"data-file-id":t.id,onClick:this.previewFile},h.a.createElement(C["c"],{file:t}))}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.followup,n=t.userId,i=t.userName;var s=Object(S["a"])({plainText:false,isFollowup:a,fileMode:r.mode,fileLink:this.renderFileLink(),userId:n,userName:i,userLink:this.renderUserLink()});return h.a.createElement("span",{className:"c-message__file_meta"},s)}}]);return t}(p["PureComponent"]);T.displayName="FileCommentMeta";T.defaultProps=I;var N=function e(t,r){var a=r.fileId,n=r.comment;if(!a||!n)return{};var i=Object(g["getFileById"])(t,a);if(!i)return{};if(i.user===n.user)return{file:i};var s=i.user;var o=Object(_["getMemberById"])(t,s);return{file:i,userId:s,userName:Object(O["r"])(t,o)}};t["a"]=Object(f["connect"])(N,{previewFile:y["b"]})(T)},1528:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(189);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(3203);var O=r(113);var k=r(60);var j=r(144);var C=r(5);var E=r(200);var S=r(21697);var w=r(21698);var I=r(12);var T=r(21999);var N=r(22e3);var R=new C["b"]("message");var A={rollup:O["a"].Rollup(),channel:m.a.shape({name:m.a.string.isRequired}).isRequired,user:m.a.string.isRequired,isAppUser:m.a.bool.isRequired,featureWtaClientSupport:m.a.bool.isRequired,featureBetterJoinLeaveStrings:m.a.bool.isRequired};var M={rollup:null};var P=function e(t,r,a,n){var i=n.tag,s=n.text,o=n.key;var c={className:"c-message__rollup_member",target:"_blank",rel:"noopener noreferrer"};switch(i){case"user":return h.a.createElement("a",v()({href:"/team/"+t.id,key:o,onClick:D(t.id)},c),s);case"inviter":return h.a.createElement("a",v()({href:"/team/"+r.id,key:o,onClick:D(r.id)},c),s);case"other":return h.a.createElement("a",v()({href:"/team/"+a[0].id,key:o,onClick:D(a[0].id)},c),s);case"others":var l=F(a);return h.a.createElement(k["d"],{tip:l,key:o},h.a.createElement("span",{className:"no_wrap"},s));default:return s}};var x=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"shouldComponentUpdate",value:function e(t){return!Object(j["a"])(t,this.props,3)}},{key:"render",value:function e(){var t=this.props,r=t.rollup,a=t.channel,n=t.user,i=t.isAppUser,s=t.featureWtaClientSupport,o=t.featureBetterJoinLeaveStrings;if(!r||0===r.length)return null;var c=Object(T["a"])({plainText:false,rollup:r,channel:a,user:n,isAppUser:i,featureWtaClientSupport:s,i18nReplaceCallback:P,featureBetterJoinLeaveStrings:o});return h.a.createElement("span",{className:"c-message__body c-message__body--automated"},c)}}]);return t}(p["Component"]);x.displayName="Rollup";x.defaultProps=M;function D(e){return function(t){t.preventDefault();Object(E["a"])(t,e)}}function F(e){var t=100;var r=_.a.take(e,t).map(function(e){return e.name});e.length>t&&r.push(R.t("{count, plural, =1 {# other} other {# others}}",{count:e.length-t}));return Object(C["e"])(r,{noEscape:true}).join("")}var L=function e(t,r){var a=r.rollup,n=r.user,i=r.channelId;return{channel:Object(S["getChannelById"])(t,i),rollup:Object(N["a"])(t,a),isAppUser:Object(y["A"])(Object(w["getMemberById"])(t,n)),featureWtaClientSupport:Object(I["isFeatureEnabled"])(t,"feature_wta_client_support"),featureBetterJoinLeaveStrings:Object(I["isFeatureEnabled"])(t,"feature_better_join_leave_strings")}};t["a"]=Object(b["connect"])(L)(x)},1529:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(12159);var c=r.n(o);var l=r(8);var u=r.n(l);var d=r(9);var v=r(45);var p=r(1007);var h=r(21697);var f=r(21702);var m=r(21698);var b=r(12);var g=r(2215);var _=r(77);var y=r(21994);var O=r(1530);var k={subtype:s.a.string.isRequired,channelPurpose:s.a.string,channelTopic:s.a.string,channelName:s.a.string,channelOldName:s.a.string,channelNewName:s.a.string,orgName:s.a.string,channelIsMoved:s.a.bool,text:s.a.string,callId:s.a.string,msgTs:s.a.string,memberId:s.a.string,currentMemberId:s.a.string,featureSliChannelArchiveSuggestions:s.a.bool,inSliChannelArchiveSuggestionsExperiment:s.a.bool};var j={channelPurpose:null,channelTopic:null,channelName:null,channelOldName:null,channelNewName:null,orgName:null,channelIsMoved:false,text:"",callId:null,msgTs:null,memberId:null,currentMemberId:null,featureSliChannelArchiveSuggestions:false,inSliChannelArchiveSuggestionsExperiment:false};var C=function e(t){var r=t.subtype,a=t.text,i=t.callId,s=t.msgTs,o=t.memberId;var l=u()("c-message__body","c-message__body--automated",{"c-message__body--call":"sh_room_shared"===r||"sh_room_created"===r});if("sh_room_shared"===r||"sh_room_created"===r)return c.a.createElement(O["a"],{subtype:r,callId:i,msgTs:s});var d={text:a};if("reminder_add"===r||"reminder_delete"===r){d.doInlineImages=true;d.enableSlackActionLinks=true}if("bot_add"===r||"bot_enable"===r||"bot_updated"===r||"bot_disable"===r||"bot_remove"===r){d.noHighlights=true;d.doInlineImages=true;d.enableSlackActionLinks=true;d.explicitlyRenameBotLink=true;d.memberId=o}return c.a.createElement(_["a"],n()({className:l},d))};C.displayName="TestableAutomatedSubtype";C.defaultProps=j;var E=Object(v["pure"])(C);var S=function e(t,r){var a=r.subtype,n=r.channelId,i=r.timestamp;var s=Object(b["isFeatureEnabled"])(t,"feature_sli_channel_archive_suggestions");var o=s&&"sli_channel_archive_suggestions"===Object(g["a"])("sli_channel_archive_suggestions");var c=Object(h["getChannelById"])(t,n);var l=Object(f["getMessageByTimestamp"])(t,n,i);var u=Object(m["getCurrentMember"])(t);var d=Object(y["a"])({message:l,channel:c,member:u,inSliChannelArchiveSuggestionsExperiment:o});return{subtype:a,text:d,callId:l._call_id,msgTs:l.ts,memberId:Object(p["getMessageMemberId"])(l)}};var w=Object(d["connect"])(S)(C);w.propTypes={channelId:s.a.string.isRequired,subtype:s.a.string.isRequired,timestamp:s.a.string.isRequired};t["a"]=w},1530:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(21698);var O=r(23009);var k=r(12);var j=r(264);var C=r(3203);var E=r(215);var S=r(253);var w=r(5);var I=r(1535);var T=r(37);var N=r(1531);var R=r(440);var A=r(265);var M=r(60);var P=r(77);var x=r(478);var D=r(476);var F=r(22001);var L=new w["b"]("calls");var B={participants:v.a.array,dateEnd:v.a.number,dateStart:v.a.number,isDmCall:v.a.bool,wasMissed:v.a.bool,wasRejected:v.a.bool,isCreator:v.a.bool,callName:v.a.string,dmCallName:v.a.string,isParticipant:v.a.bool,callId:v.a.string,msgTs:v.a.string,subtype:v.a.oneOf(["sh_room_shared","sh_room_created"])};var U={participants:[],dateEnd:null,isDmCall:false,wasMissed:false,wasRejected:false,isCreator:false,callName:"",dmCallName:"",isParticipant:false,callId:"",dateStart:null,msgTs:"",subtype:"sh_room_created"};var q=function e(t,r){return m()(r).compact().map(function(e){if(e&&e.isUnknown)return h.a.createElement(R["a"],{key:e.id,type:"unknown"});if(e)return Object(C["r"])(t,e);return}).reduce(function(e,t,a){var n=r[a-1];n&&e.push(", ");e.push(t);return e},[])};var H=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.onCallClick=r.onCallClick.bind(r);return r}s()(t,[{key:"setRef",value:function e(t){this.ref=t}},{key:"onCallClick",value:function e(t){t.preventDefault();this.props.dateEnd||Object(I["b"])(this.ref.querySelector(".c-message__call_description"))}},{key:"render",value:function e(){var t=this.props,r=t.participants,a=t.dateEnd,n=t.isDmCall,i=t.wasMissed,s=t.wasRejected,o=t.isCreator,c=t.callName,l=t.dmCallName,u=t.isParticipant,d=t.callId,v=t.dateStart,p=t.msgTs,f=t.subtype,m=t.featureReactMessages,b=t.participantList,g=t.participantNames;var y=n&&2===r.length;var O=!a&&n&&o;var k=!a&&n;var C=Object(F["a"])({dateEnd:a,isDmCall:n,wasMissed:i,wasRejected:s,isCreator:o,isParticipant:u,dmCallName:l,participantsCount:r.length});var S=a?"c-message__call_icon--ended c-icon--calls-ended":"c-icon--calls";var w=document.location.origin+"/call/"+d;var I=h.a.createElement("span",{className:"c-message__call_description"},C);var R=c?h.a.createElement(P["a"],{text:c,className:"c-message__call_name",noJumbomoji:true}):null;var B=!O&&!k||y?null:h.a.createElement(N["a"],null);if(!a){I=h.a.createElement("a",{href:w,className:"c-message__call_description c-message__call_description--linked","data-qa":"call_attachment_link"},C,B);R=c?h.a.createElement("a",{href:w,className:"c-message__call_name c-message__call_name--linked"},h.a.createElement(P["a"],{text:c,noJumbomoji:true})):null}var U=h.a.createElement("div",{className:"c-message__call_title"},I);R&&(U=h.a.createElement("div",{className:"c-message__call_title"},R,I));var q="";if(n&&a&&v&&i||n&&!a&&v||!n&&0===r.length||O||k)q=h.a.createElement("div",{className:"c-message__call_sub"},L.t("Started at {time}",{time:Object(E["i"])(v)}));else if(n&&a&&v&&!i&&m)q=h.a.createElement("div",{className:"c-message__call_sub"},L.rt("Started at {time} and lasted {duration}",{time:Object(E["i"])(v),duration:h.a.createElement("strong",null,Object(E["j"])(a-v))}));else if(!n&&a&&m)q=h.a.createElement("div",{className:"c-message__call_sub"},L.rt("Lasted {duration} with {participants}",{duration:h.a.createElement("strong",null,Object(E["j"])(a-v)),participants:h.a.createElement("div",{className:"c-message__call_participants"},b)}));else if(!n&&r.length>0){var H=r.map(function(e){var t=e.isUnknown?L.t("Loading\u2026"):g[e.id];return h.a.createElement(M["d"],{tip:t,key:e.id},h.a.createElement("span",{className:"c-message__call_avatar"},h.a.createElement(A["b"],{userId:e.id,size:16})))});q=h.a.createElement("div",{className:"c-message__call_sub"},h.a.createElement("span",null,L.rt("Started at {time}",{time:Object(E["i"])(v)}),h.a.createElement("span",{className:"c-message__call_participant_count"},h.a.createElement(T["a"],{type:"user",className:"c-message__call_user_icon",align:"baseline"})," ",r.length)),h.a.createElement("div",{className:"c-message__call_participants"},H))}var W="sh_room_shared"===f?L.t("Shared a call"):L.t("Started a call");var G=Object(j["a"])("call",p,{id:d});var V=_()("c-message__call",{"c-message__call--active":!a,"c-message__call--ended":a});return h.a.createElement("div",{className:V,ref:this.setRef,onClick:this.onCallClick,role:"presentation","data-qa":"call_attachment"},h.a.createElement("div",{className:"c-message__body c-message__body--automated"},W," ",h.a.createElement(D["a"],{expandableKey:G,useAttachmentRules:false}),h.a.createElement(x["a"],{expandableKey:G,useAttachmentRules:false},h.a.createElement("div",{className:"c-message__call_attachment"},h.a.createElement(T["a"],{className:"c-message__call_icon "+S}),h.a.createElement("div",{className:"c-message__call_info","data-qa":"call_attachment"},U,q)))))}}]);return t}(S["a"]);H.displayName="CallSubtype";H.propTypes=B;H.defaultProps=U;var W=function e(t,r){var a=Object(k["isFeatureEnabled"])(t,"feature_react_messages");var n=Object(O["getCallById"])(t,r.callId);if(!n)return{featureReactMessages:a};var i=Object(k["getCurrentUserId"])(t);var s=Object(O["getMembersOfCall"])(n)||[];var o=s.map(function(e){return Object(y["getMemberById"])(t,e)});var c={};o.forEach(function(e){c[e.id]=Object(C["r"])(t,e)});var l=r.dmCallName;l||(l=Object(O["getOtherMemberNameInDmCall"])(n));return{participants:o,participantList:q(t,o),participantNames:c,dateEnd:n.dateEnd,dateStart:n.dateStart,isDmCall:n.isDmCall,wasMissed:Object(O["wasCallMissed"])(n),wasRejected:Object(O["wasCallRejected"])(n),isCreator:i===n.createdBy,callName:n.name,dmCallName:l,isParticipant:!!m.a.find(o,{id:i}),featureReactMessages:a}};t["a"]=Object(b["connect"])(W)(H)},1531:function(e,t,r){"use strict";var a=r(1532);t["a"]=a["a"]},1532:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(20240);var s=r.n(i);var o=function e(){return n.a.createElement("span",{className:"c-animated_ellipsis"},n.a.createElement("span",{className:"c-animated_ellipsis__fullstop"},"."),n.a.createElement("span",{className:"c-animated_ellipsis__fullstop"},"."),n.a.createElement("span",{className:"c-animated_ellipsis__fullstop"},"."))};o.displayName="AnimatedEllipsis";t["a"]=o},1536:function(e,t,r){"use strict";var a=r(9);var n=r(1);var i=r.n(n);var s=r(54);var o=r(12);var c=r(21702);var l=r(21706);var u=r(1007);var d=r(21712);var v=r(1537);function p(e,t){var r=t.threadTs,a=t.channelId;var n=Object(c["getMessageByTimestamp"])(e,a,r);if(!n)return{};var d=n.reply_count;var v=n.replies||[];var p=void 0;p=n.reply_users?n.reply_users:i()(v).map("user").uniq().value();var h=n.reply_users_count?n.reply_users_count:p.length;var f=Object(u["getMessageRootText"])(n);var m=Object(o["isFeatureEnabled"])(e,"feature_file_threads");if(m&&n.files&&n.files.length){var b=i.a.first(n.files);var g=Object(l["getFileById"])(e,b);f=Object(u["getMessageRootText"])(n,g)}return{rootText:f,replyCount:d,replyUsers:p,replyUsersCount:h,theme:Object(s["getUserMessagesTheme"])(e),featureFileThreads:m}}var h={showThread:d["d"]};t["a"]=Object(a["connect"])(p,h)(v["a"])},1537:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(253);var g=r(5);var _=r(1007);var y=r(37);var O=r(77);var k=r(21998);var j=r(22281);var C=new g["b"]("threads");var E={ts:h.a.string.isRequired,threadTs:h.a.string.isRequired,channelId:h.a.string.isRequired,rootText:h.a.string,theme:h.a.string,replyCount:h.a.number,replyUsers:h.a.arrayOf(h.a.string),replyUsersCount:h.a.number,featureFileThreads:h.a.bool,showThread:h.a.func};var S={rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,featureFileThreads:false,showThread:d["noop"]};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openThread=r.openThread.bind(r);return r}s()(t,[{key:"openThread",value:function e(t){var r=this.props,a=r.showThread,n=r.channelId,i=r.threadTs,s=r.ts;t.preventDefault();a({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRepliersSummary",value:function e(t){var r=this.props,a=r.replyCount,n=r.replyUsers,i=r.replyUsersCount,s=r.featureFileThreads;if(!a||!i)return null;return m.a.createElement("div",{className:"c-message__broadcast_repliers"},s?null:m.a.createElement(y["a"],{type:"comment_alt",className:"c-message__broadcast_repliers_icon"}),m.a.createElement("a",{className:"c-message__broadcast_repliers_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},m.a.createElement(j["a"],{replyCount:a,replyUsers:n,replyUsersCount:i,prefixWithReplyCount:true,broadcastPreabmle:true})))}},{key:"render",value:function e(){var t=this;var r=Object(_["constructMsgPermalink"])(this.props.channelId,this.props.ts,this.props.threadTs);var a=void 0;if(this.props.rootText)a=m.a.createElement("div",{className:"c-message__broadcast_preamble"},m.a.createElement("span",{className:"c-message__broadcast_preamble_meta"},Object(k["a"])()),m.a.createElement("a",{className:"c-message__broadcast_preamble_link",href:r,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},m.a.createElement(O["a"],{text:this.props.rootText,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026"})));else{var n=C.rt("replied to <a>a thread</a>",null,function(e){var a=e.key,n=e.text;return m.a.createElement("a",{className:"c-message__broadcast_preamble_link",key:a,href:r,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},n)});a=m.a.createElement("div",{className:"c-message__broadcast_preamble"},n)}if("light"===this.props.theme)return m.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},a,this.renderRepliersSummary(r));return a}}]);return t}(b["a"]);w.displayName="ThreadBroadcastPreamble";w.propTypes=E;w.defaultProps=S;t["a"]=w},1538:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(21713);var j=r(91);var C=r(284);var E=r(1544);var S=r(12);var w=r(21706);var I=r(21697);var T=r(3270);var N=r(21712);var R=r(1543);var A=r(1007);var M=r(391);var P=r(334);var x=r(5);var D=r(21755);var F=r(298);var L=r(1546);var B=r(3087);var U=r(1003);var q=r(93);var H=r(22190);var W=r(22175);var G=r(21744);var V=r(21705);var z=r(266);var K=r(22279);var Q=r(1539);var Y=r(1541);var J=r(1542);var Z=new x["b"]("message");var X={reactionKey:m.a.string,fileId:m.a.string,fileIds:m.a.arrayOf(m.a.string),comment:m.a.string,replies:m.a.arrayOf(m.a.shape({ts:m.a.string,user:m.a.string})),replyCount:m.a.number,teamId:m.a.string.isRequired,ts:m.a.string,threadsEverythingPref:m.a.bool,threadTs:m.a.string,channel:m.a.object,file:m.a.object,subtype:m.a.string,channelId:m.a.string,theme:m.a.oneOf(["dense","light"]),isStarred:m.a.bool,isPinned:m.a.bool,isEphemeral:m.a.bool,isFileAuthorExternal:m.a.bool,messageContainerType:m.a.string,editHandler:m.a.func,unreadHandler:m.a.func,onMenuOpen:m.a.func,onMenuClose:m.a.func,pinMessage:m.a.func,unpinMessage:m.a.func,updateStar:m.a.func,featureAppActionsFe:m.a.bool,featureFileThreads:m.a.bool,renderMenuBelowTrigger:m.a.bool,renderOffscreen:m.a.bool.isRequired,openModal:m.a.func,previewFile:m.a.func,showThread:m.a.func};var $={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,threadsEverythingPref:null,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,messageContainerType:void 0,editHandler:_.a.noop,unreadHandler:_.a.noop,onMenuOpen:_.a.noop,onMenuClose:_.a.noop,pinMessage:_.a.noop,unpinMessage:_.a.noop,updateStar:_.a.noop,featureAppActionsFe:false,featureFileThreads:false,renderMenuBelowTrigger:false,renderOffscreen:false,openModal:_.a.noop,previewFile:_.a.noop,showThread:_.a.noop};var ee={x:0,y:-8};var te={x:4,y:-16};var re={x:50,y:0};var ae=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(g["bindAll"])(r,["onAddReaction","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onSubscribe","renderMoreActionsMenu"]);return r}c()(t,[{key:"onStar",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.fileId,i=t.fileIds,s=t.featureFileThreads,o=t.comment,c=t.subtype,l=t.isStarred;var u={channel:r,timestamp:a};n&&(u={file:n});if(o&&"file_comment"===c){var d=s&&i&&i[0]||n;u={file_comment:o,file_comment_file:d}}this.props.updateStar(!l,u);var v=l?k["o"].UNSTAR_MESSAGE_BUTTON:k["o"].STAR_MESSAGE_BUTTON;this.trackAction(v)}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(F["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(k["o"].ADD_REACTION_BUTTON)}},{key:"onComment",value:function e(){if(this.props.fileId&&!this.props.featureFileThreads)this.props.previewFile({fileId:this.props.fileId});else{var t=this.props.threadTs||this.props.ts;this.props.showThread({channelId:this.props.channel.id,threadTs:t})}var r=this.state.subscribed?k["o"].REPLY_TO_THREAD_BUTTON:k["o"].START_A_THREAD_BUTTON;this.trackAction(r)}},{key:"onShare",value:function e(){this.props.fileId&&"file_comment"!==this.props.subtype?Object(B["a"])(this.props.fileId,false,false,this.props.channel,true):Object(L["a"])(this.props.ts,this.props.channel);this.trackAction(k["o"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(k["o"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:h.a.createElement(W["a"],{channelId:r,ts:a})});this.trackAction(k["o"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(k["o"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var r=this.props,a=r.channel,n=r.ts,i=r.subtype;this.trackAction(k["o"].REMIND_ME_BUTTON,true);return function(){Object(R["a"])({time:t,message_channel:a.id,message_ts:n,respond_in_channel:"thread_broadcast"===i})}}},{key:"onSubscribe",value:function e(){var t=this.props,r=t.replies,a=t.ts,n=t.channel;var i=this.state.subscribed;var s=r.length&&r[r.length-1].ts;Object(U["d"])(n.id,a,!i,s);var o=i?k["o"].UNFOLLOW_MESSAGE_BUTTON:k["o"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"onPin",value:function e(){var t=this.props,r=t.ts,a=t.channel,n=t.isPinned,i=t.pinMessage,s=t.unpinMessage;if(n){s({ts:r,channelId:a.id});this.trackAction(k["o"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{i({ts:r,channelId:a.id});this.trackAction(k["o"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,r=t.channel,a=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(q["b"])(r.id,a,n);i&&"file_comment"!==s&&(o=i.permalink);Object(P["writeText"])(o);this.trackAction(k["o"].COPY_LINK_BUTTON,true)}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.props.openModal({element:h.a.createElement(H["a"],{channelId:r,ts:a})});this.trackAction(k["o"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){var t=this;this.setState(function(){return{moreActionsMenuOpen:true}});var r=this.props,a=r.channelId,n=r.ts,i=r.featureAppActionsFe;i||Object(U["c"])(a,n).then(function(e){t.setState(function(){return{subscribed:e&&e.subscribed}})});this.props.onMenuOpen();this.trackAction(k["o"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,r){if(r.id===G["a"].editMessage){this.onEdit(t);return true}return false}},{key:"isAutomated",value:function e(){return Object(M["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={action:k["m"].CLICK,ui_element:t};r&&(a.step=k["p"].MORE_ACTIONS_MENU);Object(j["b"])(k["h"].MSG_ACTION,{contexts:{ui_context:a}})}},{key:"renderStar",value:function e(){var t=this.props,r=t.fileId,a=t.subtype,n=t.isStarred,i=t.isEphemeral;if(i||"tombstone"===a)return null;var s="message";r&&(s="file_comment"===a?"file comment":"file");var o=void 0;o=n?"file"===s?Z.t("Unstar file"):"file comment"===s?Z.t("Unstar file comment"):Z.t("Unstar message"):"file"===s?Z.t("Star file"):"file comment"===s?Z.t("Star file comment"):Z.t("Star message");return h.a.createElement(Y["a"],{iconType:n?"small-star-filled":"small-star",label:o,onClick:this.onStar,"data-qa":"star_message"})}},{key:"renderShare",value:function e(){var t=this.props,r=t.ts,a=t.subtype,n=t.featureFileThreads,i=t.isEphemeral;if(i||"tombstone"===a||Object(A["isTempTs"])(r))return null;if(n&&"file_comment"===a)return null;var s="file_share"===a||"file_mention"===a?Z.t("Share file \u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):Z.t("Share message \u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return h.a.createElement(Y["a"],{iconType:"share-action",label:s,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;return h.a.createElement(Y["a"],{iconType:"small-reaction",label:Z.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderComment",value:function e(){if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||this.props.isEphemeral)return null;if(this.props.featureFileThreads&&Object(D["b"])(this.props.subtype))return null;var t=void 0;t=this.props.fileId&&!this.props.featureFileThreads?Z.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):this.props.replyCount||"thread_broadcast"===this.props.subtype?Z.t("Reply to thread"):Z.t("Start a thread");return h.a.createElement(Y["a"],{iconType:"small-reply",label:t,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props.renderMenuBelowTrigger;return h.a.createElement(z["d"],{renderMenu:this.renderMoreActionsMenu,position:t?"right-bottom":"top-right",allowanceX:t?re.x:0,offsetX:t?te.x:ee.x,offsetY:t?te.y:ee.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},h.a.createElement(Y["a"],{className:"c-message_actions__button--last-child",iconType:"small-ellipsis",label:Z.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"}),tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var r=this.props,a=r.channel,i=r.ts,s=r.subtype,o=r.replyCount,c=r.threadsEverythingPref,l=r.isPinned,u=r.isEphemeral,d=r.featureAppActionsFe,v=r.messageContainerType;var p=t.onTriggerClose,f=t.onMenuItemSelected;if(d)return h.a.createElement(K["a"],{ts:i,channelId:a.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:p,onMenuItemSelected:f,messageContainerType:v});return h.a.createElement(J["a"],n()({},t,{channel:a,ts:i,subtype:s,isSubscribed:this.state.subscribed,replyCount:o,threadsEverythingPref:c,isPinned:l,isEphemeral:u,onSubscribe:this.onSubscribe,onStar:this.onStar,onCopyLink:this.onCopyLink,onMarkUnread:this.onMarkUnread,onPin:this.onPin,onEdit:this.onEdit,onDelete:this.onDelete,onRemoveBroadcast:this.onRemoveBroadcast,onRemind:this.onRemind}))}},{key:"render",value:function e(){var t=O()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var r=Z.t("Message actions");return h.a.createElement(Q["a"],{className:t,ariaLabel:r},this.renderReaction(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(p["PureComponent"]);ae.displayName="MessageActions";ae.defaultProps=$;var ne=function e(t,r){var a=r.fileId,n=r.channelId;return{channel:Object(I["getChannelById"])(t,n),file:Object(w["getFileById"])(t,a),isFileAuthorExternal:Object(w["isFileAuthorExternal"])(t,a),featureAppActionsFe:Object(S["isFeatureEnabled"])(t,"feature_app_actions_fe"),featureFileThreads:Object(S["isFeatureEnabled"])(t,"feature_file_threads"),renderMenuBelowTrigger:Object(S["isFeatureEnabled"])(t,"feature_app_actions_fe"),teamId:Object(T["getTeamId"])(t)}};var ie={pinMessage:C["pinMessage"],unpinMessage:C["unpinMessage"],updateStar:E["a"],openModal:V["openModal"],previewFile:N["b"],showThread:N["d"]};t["a"]=Object(b["connect"])(ne,ie)(ae)},1539:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(8);var l=r.n(c);var u=r(20146);var d=r.n(u);var v={children:n.a.node,className:n.a.string,ariaLabel:n.a.string};var p={children:null,className:null,ariaLabel:null};var h=function e(t){var r=t.className,a=t.children,n=t.ariaLabel;return s.a.createElement("div",{className:l()("c-message_actions__container",r),role:"group","aria-label":n},a)};h.displayName="MessageActionContainer";h.defaultProps=p;t["a"]=Object(o["pure"])(h)},1541:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(45);var y=r(3184);var O=r(37);var k=r(60);var j=r(20146);var C=r.n(j);var E={className:v.a.string,iconType:v.a.string,label:v.a.string.isRequired,tooltipPosition:v.a.string,onClick:v.a.func,ariaHasPopup:v.a.bool,"data-qa":v.a.string};var S={className:"",onClick:m.a.noop,iconType:null,tooltipPosition:"top",ariaHasPopup:true,"data-qa":void 0};var w=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=g()("c-message_actions__button",this.props.className);return h.a.createElement(k["d"],{tip:this.props.label,position:this.props.tooltipPosition,delay:k["b"]},h.a.createElement(y["c"],{className:t,onClick:this.props.onClick,"aria-label":this.props.label,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"]},h.a.createElement(O["b"],{type:this.props.iconType})))}}]);return t}(p["PureComponent"]);w.displayName="MessageActionButton";w.defaultProps=S;t["a"]=Object(_["pure"])(w)},1542:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(21702);var O=r(12);var k=r(907);var j=r(5);var C=r(93);var E=r(1003);var S=r(266);var w=r(438);var I=r(998);var T=new j["b"]("message");var N={message:m.a.object.isRequired,channel:m.a.object.isRequired,subtype:m.a.string,isSubscribed:m.a.oneOf(["loading",true,false]),replyCount:m.a.number,threadsEverythingPref:m.a.bool,isPinned:m.a.bool,isEphemeral:m.a.bool,onSubscribe:m.a.func,onCopyLink:m.a.func,onMarkUnread:m.a.func,onPin:m.a.func,onEdit:m.a.func,onDelete:m.a.func,onRemoveBroadcast:m.a.func,onRemind:m.a.func,featureReactMessages:m.a.bool.isRequired,featureFileThreads:m.a.bool.isRequired,featureThreadsCopyChange:m.a.bool.isRequired};var R={subtype:null,isPinned:false,replyCount:null,threadsEverythingPref:false,isSubscribed:"loading",isEphemeral:false,onSubscribe:g["noop"],onCopyLink:g["noop"],onMarkUnread:g["noop"],onPin:g["noop"],onEdit:g["noop"],onDelete:g["noop"],onRemoveBroadcast:g["noop"],onRemind:g["noop"]};var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["bindAll"])(r,["renderRemindSubmenu"]);return r}c()(t,[{key:"getItems",value:function e(){var t=this.props,r=t.channel,a=t.isEphemeral,n=t.isPinned,i=t.message,s=t.onCopyLink,o=t.onMarkUnread,c=t.onPin,l=t.onEdit,u=t.onDelete,d=t.onRemoveBroadcast,v=t.subtype,p=t.featureFileThreads;var h=Object(C["f"])(i,r);var f=p&&"file_comment"===v;return[Object(E["a"])(r,i)?this.getThreadItem():{show:false},{type:"separator",key:"separator-threads"},{label:p?T.t("Copy link to message"):T.t("Copy link"),show:h.copy_link&&!f,click:s,dataQa:"copy_link"},{label:T.t("Mark unread"),show:h.mark_unread&&!a&&!Object(k["isArchived"])(r),click:o,dataQa:"mark_unread"},{type:"submenu",label:T.t("Remind me about this"),show:h.remind_me&&!f,renderSubmenu:this.renderRemindSubmenu},{label:Object(I["a"])(n,Object(k["getDisplayName"])(r),Object(k["getChannelType"])(r)),show:h.pin_msg||h.unpin_msg,click:c,dataQa:"pin_message"},{type:"separator",key:"separator-admin"},{label:T.t("Edit message"),show:h.edit_msg,click:l,dataQa:"edit_message"},{label:T.t("Delete message"),danger:true,show:h.delete_msg&&!h.remove_broadcast,click:u,dataQa:"delete_message"},{label:Object(k["isPublicChannel"])(r)||Object(k["isPrivateChannel"])(r)?T.t("Remove from channel"):T.t("Remove from conversation"),show:h.remove_broadcast,click:d,dataQa:"remove_broadcast"}]}},{key:"getThreadItem",value:function e(){var t=this.props,r=t.isSubscribed,a=t.replyCount,n=t.threadsEverythingPref,i=t.onSubscribe,s=t.featureThreadsCopyChange;if("loading"===r)return{label:T.t("Loading \u2026"),description:"\xa0",show:true};var o=void 0;var c=void 0;var l=void 0;if(r)if(a){o=T.t("Unfollow thread");l=s?T.t("This will be removed from Threads"):T.t("This will be removed from All Threads");c=n?T.t("You won\u2019t be notified about new replies"):l}else{o=T.t("Unfollow message");l=s?T.t("Replies will be excluded from Threads"):T.t("Replies will be excluded from All Threads");c=n?T.t("You won\u2019t be notified about replies"):l}else if(a){o=T.t("Follow thread");l=s?T.t("New replies will appear in Threads"):T.t("New replies will appear in All Threads");c=n?T.t("You\u2019ll be notified about new replies"):l}else{o=T.t("Follow message");l=s?T.t("Any replies will show up in Threads"):T.t("Any replies will show up in All Threads");c=n?T.t("You\u2019ll be notified about any replies"):l}return{label:o,description:c,show:true,click:i,dataQa:"follow_message"}}},{key:"renderRemindSubmenu",value:function e(t){return h.a.createElement(S["e"],n()({},t,{width:"auto"}),h.a.createElement(S["b"],{label:T.t("in 20 minutes"),onSelected:this.props.onRemind("in 20 minutes")}),h.a.createElement(S["b"],{label:T.t("in 1 hour"),onSelected:this.props.onRemind("in 1 hour")}),h.a.createElement(S["b"],{label:T.t("in 3 hours"),onSelected:this.props.onRemind("in 3 hours")}),h.a.createElement(S["b"],{label:T.t("Tomorrow"),onSelected:this.props.onRemind("tomorrow")}),h.a.createElement(S["b"],{label:T.t("Next Week"),onSelected:this.props.onRemind("next week")}))}},{key:"render",value:function e(){var t=this.getItems().filter(function(e){return e.show||"separator"===e.type});return h.a.createElement(w["a"],n()({},this.props,{template:t,stripTerminalSeparators:true}))}}]);return t}(p["PureComponent"]);A.displayName="MessageActionsMenu";A.defaultProps=R;var M=function e(t,r){return{message:Object(y["getMessageByTimestamp"])(t,r.channel.id,r.ts),featureReactMessages:Object(O["isFeatureEnabled"])(t,"feature_react_messages"),featureFileThreads:Object(O["isFeatureEnabled"])(t,"feature_file_threads"),featureThreadsCopyChange:Object(O["isFeatureEnabled"])(t,"feature_threads_copy_change")}};t["a"]=Object(b["connect"])(M)(A)},1543:function(e,t,r){"use strict";t["a"]=n;var a=r(21700);function n(e){return Object(a["c"])("reminders.addFromMessage",e)}},1546:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.share_message_dialog.start",function(){return null});var i={start:n}},1547:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(9);var y=r(21705);var O=r(12);var k=r(21702);var j=r(21697);var C=r(54);var E=r(21698);var S=r(3051);var w=r(22190);var I=r(22175);var T=r(1549);var N=r(907);var R=r(113);var A=r(3184);var M=r(37);var P=r(604);var x=r(5);var D=r(1057);var F=r(93);var L=r(211);var B=r(215);var U=r(104);var q=r(298);var H=r(388);var W=r(1087);var G=60;var V=1e3;var z=new x["b"]("message");var K={ts:m.a.string.isRequired,text:m.a.string.isRequired,saveMessageEdit:m.a.func,channelId:m.a.string,isSelfIm:m.a.bool,setDidRequestToStopEditing:m.a.func,updateEditState:m.a.func,stopEditingMessage:m.a.func,updateHasUnsavedChanges:m.a.func,subtype:m.a.string,threadTs:m.a.string,file:R["a"].File(),isEphemeral:m.a.bool,userId:m.a.string,initialEditText:m.a.string,didRequestToStopEditing:m.a.bool,editWindowMin:m.a.number,isAdminUser:m.a.bool,useJumbomoji:m.a.bool,featureMessageInputByteLimit:m.a.bool.isRequired,messageContainerType:m.a.string,openModal:m.a.func};var Q={saveMessageEdit:h.a.noop,channelId:null,isSelfIm:false,setDidRequestToStopEditing:h.a.noop,updateEditState:h.a.noop,stopEditingMessage:h.a.noop,updateHasUnsavedChanges:h.a.noop,subtype:null,threadTs:null,file:null,isEphemeral:false,userId:null,initialEditText:null,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:h.a.noop};var Y="message_pane_edit_input";function J(e){Object(q["a"])({e:e,input_to_fill:"#"+Y,offset_y:-8})}var Z=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setTextyRef=r.setTextyRef.bind(r);r.maybeSave=r.maybeSave.bind(r);r.onTimerInterval=r.onTimerInterval.bind(r);r.renderTimeoutErrorDialog=r.renderTimeoutErrorDialog.bind(r);r.renderLengthErrorDialog=r.renderLengthErrorDialog.bind(r);r.renderUnknownErrorDialog=r.renderUnknownErrorDialog.bind(r);r.stopEditingMessage=r.stopEditingMessage.bind(r);r.handleSaveEditError=r.handleSaveEditError.bind(r);r.onEnter=r.onEnter.bind(r);r.onTextChange=r.onTextChange.bind(r);r.texty=null;r.syncEditStateOnUnmount=true;r.editWindowTimeout=null;r.componentDidUnmount=false;r.enableBroadcastKeywords=!(r.props.messageContainerType===L["MESSAGE_CONTAINERS"].THREADS_FLEXPANE);r.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";Object(D["a"])(t,r.texty.container)},completers:["channels","emoji","members"]}};r.state={editSecondsRemaining:r.countRemainingSeconds(),numCharsOverLimit:r.countCharsOverLimit()};return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin;a>=0&&!r&&(this.editWindowTimeout=setInterval(this.onTimerInterval,V))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,r){var a=r.editSecondsRemaining;a<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){var t=this.props,r=t.channelId,a=t.ts;if(this.syncEditStateOnUnmount){var n=this.texty.value();var i=this.hasUnsavedChanges();this.props.updateEditState({channelId:r,ts:a,editText:n,hasUnsavedChanges:i})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,r=t.didRequestToStopEditing,a=t.channelId,i=t.ts;var s=this.state.numCharsOverLimit;var o=this.countCharsOverLimit();(o>0||s>0)&&this.setState(function(){return{numCharsOverLimit:o}});this.props.updateHasUnsavedChanges({channelId:a,ts:i,hasUnsavedChanges:this.hasUnsavedChanges()});r&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(n()({},a,n()({},i,false)))}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props,r=t.initialEditText,a=t.text;if(this.texty)return Object(H["i"])(this.texty.value(),{enableBroadcastKeywords:this.enableBroadcastKeywords});if(h.a.isString(r))return r;return a}},{key:"countRemainingSeconds",value:function e(){var t=this.props,r=t.isSelfIm,a=t.editWindowMin,n=t.ts;if(a<0||r)return null;var i=Object(B["g"])(n);var s=60*a*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"countCharsOverLimit",value:function e(){var t=this.getEditText();if(this.props.featureMessageInputByteLimit)return Object(F["a"])(t,L["MAX_MESSAGE_INPUT_BYTES"]);return Math.max(0,t.length-L["MAX_MESSAGE_INPUT_LENGTH"])}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,r=t.initialEditText,a=t.text;if(this.texty)return this.texty.value()!==a;return h.a.isString(r)&&a!==r}},{key:"startDelete",value:function e(){var t=this.props,r=t.channelId,a=t.text,n=t.file,i=t.isEphemeral,s=t.subtype,o=t.threadTs,c=t.ts,l=t.userId,u=t.messageContainerType;var d={file:n,is_ephemeral:i,subtype:s,thread_ts:o,ts:c,user:l};var v=Object(F["f"])(d,null,u);if(v){var p=v.delete_msg;var h=v.remove_broadcast;if(h||p){h?this.props.openModal({element:g.a.createElement(w["a"],{channelId:r,ts:c})}):this.props.openModal({element:g.a.createElement(I["a"],{channelId:r,ts:c})});return}}var f=a.replace(/~/g,"");var m="~"+f+"~";this.props.saveMessageEdit({channelId:r,text:m,ts:c}).catch(this.handleSaveEditError)}},{key:"maybeSave",value:function e(){var t=this.props,r=t.channelId,a=t.text,n=t.ts;var i=this.state,s=i.editSecondsRemaining,o=i.numCharsOverLimit;if(o>0)return false;if(h.a.isNumber(s)&&s<=0)return false;var c=this.getEditText();if(c===a){this.stopEditingMessage();return false}if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:r,text:Object(U["a"])(c),ts:n}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var r=t.message;switch(r){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,r=t.channelId,a=t.ts;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({channelId:r,ts:a})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return h.a.isNumber(t)&&t<G}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var r=h.a.isNumber(t)&&t<=0;return r||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,r=t.editWindowMin,a=t.isAdminUser;var n=Object(B["j"])(r,{units:"minutes"});var i=z.t("Message editing failed");var s=z.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:g.a.createElement("b",null,n)});var o=void 0;a&&(o=z.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return g.a.createElement("a",{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:g.a.createElement(W["a"],{title:i},g.a.createElement("p",null,s),o)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=z.t("Message editing failed");var r=z.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:g.a.createElement(W["a"],{title:t},r)})}},{key:"renderLengthErrorDialog",value:function e(){var t=z.t("Message editing failed");var r=z.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:g.a.createElement(W["a"],{title:t},r)})}},{key:"renderLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;var r=void 0;r=this.props.featureMessageInputByteLimit?z.t("Your message is {diffCount, plural, =1{# character}other{# characters}} too long",{diffCount:t}):z.t("text is too long!");return g.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},r)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var r=void 0;t<=0?r=z.t("(your time to edit ran out)"):t<=G&&(r=z.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return g.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},r)}},{key:"renderUnsavedWarning",value:function e(){var t=z.rt("Finish editing this message first! Or press <b>escape</b> if you\u2018ve changed your mind.");return g.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var r=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var a=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!r&&!a)return null;return g.a.createElement("div",{className:"c-message__editor__messages"},t,r,a)}},{key:"render",value:function e(){var t=this.props,r=t.initialEditText,a=t.text,n=t.useJumbomoji,i=t.channelId;var s=h.a.isString(r)?r:a;var o=Object(U["e"])(s,null,{for_edit:true});var c=z.t("Edit message");return g.a.createElement("div",{className:"c-message__editor"},g.a.createElement("div",{className:"c-message__editor__input_container"},g.a.createElement(P["g"],{id:Y,ref:this.setTextyRef,className:"c-message__editor__input",modules:this.textyModules,ariaLabel:c,placeholder:c,initialText:o,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:n,focusOnMount:true,useLegacyCreate:true,channelId:i,enableBroadcastKeywords:this.enableBroadcastKeywords}),g.a.createElement(A["c"],{onClick:J,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},g.a.createElement(M["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),g.a.createElement(M["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),g.a.createElement(M["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"}))),g.a.createElement("div",{className:"c-message__editor__footer"},g.a.createElement(A["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},z.t("Cancel")),g.a.createElement(A["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},g.a.createElement(M["a"],{type:"enter",className:"margin_right_50"}),z.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(b["PureComponent"]);Z.displayName="BaseEditMessage";Z.defaultProps=Q;function X(e,t){var r=t.ts,a=t.channelId;var n=Object(k["getMessageByTimestamp"])(e,a,r);if(!n)return{featureMessageInputByteLimit:Object(O["isFeatureEnabled"])(e,"feature_message_input_byte_limit")};var i=Object(j["getChannelById"])(e,a);var s=Object(C["getTeamPref"])(e,"msg_edit_window_mins");var o=Object(E["getCurrentMember"])(e);var c=Object(C["getUserPref"])(e,"jumbomoji");var l=Object(S["getMessageEditData"])(e,{channelId:a,ts:r}),u=l.editText,d=l.didRequestToStopEditing;return{channelId:i.id,isSelfIm:Object(N["isYou"])(o.id,i),file:n.file,isEphemeral:n.is_ephemeral,subtype:n.subtype,text:n.text||"",threadTs:n.thread_ts,userId:n.user,ts:r,editWindowMin:s,isAdminUser:o.is_admin,initialEditText:u,didRequestToStopEditing:d,featureMessageInputByteLimit:Object(O["isFeatureEnabled"])(e,"feature_message_input_byte_limit"),useJumbomoji:c}}var $={saveMessageEdit:T["a"],setDidRequestToStopEditing:S["setDidRequestToStopEditing"],updateEditState:S["updateEditState"],stopEditingMessage:S["stopEditingMessage"],updateHasUnsavedChanges:S["updateHasUnsavedChanges"],openModal:y["openModal"]};var ee=Object(_["connect"])(X,$)(Z);ee.propTypes={ts:m.a.string.isRequired,channelId:m.a.string.isRequired};t["a"]=ee},1549:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21696);var s=r(1550);var o=r(21702);var c=r(12);var l=r(3051);var u=new Error("unknown_error");var d=Object(i["e"])("Optimistically save edits to a message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.text,i=r.ts,d=r._commitMessageEdit,v=void 0===d?s["a"]:d;e(Object(l["stopEditingMessage"])({channelId:a,ts:i}));var p=t();var h=Object(c["getCurrentUserId"])(p);var f=Object(o["getMessageByTimestamp"])(p,a,i)||{};e(Object(o["editMessage"])({ts:i,channelId:a,text:n,memberId:h}));return v({channelId:a,text:n,ts:i}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;if("message_not_found"===t.message)e(Object(o["removeMessage"])({channel:a,ts:i}));else{var r=f.edited||{};e(Object(o["editMessage"])({ts:i,channelId:a,text:f.text,memberId:r.user,editTs:r.ts}))}throw t})});d.propTypes={channelId:n.a.string.isRequired,text:n.a.string,ts:n.a.string,_commitMessageEdit:n.a.func};t["a"]=d},1550:function(e,t,r){"use strict";t["a"]=c;var a=r(21700);var n=r(1007);var i=1.75;var s=10;function o(e,t){var r=e.channelId,c=e.ts,l=e.text;var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;if(Object(n["isTempTs"])(c)){t(new Error("message_not_found"));return}Object(a["c"])("chat.update",{channel:r,text:l,ts:c}).then(function(){t()}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.data,n=void 0===a?{}:a;if("message_not_found"===n.error&&u<s){var v=u+1;var p=d*i;setTimeout(function(){o({channelId:r,ts:c,text:l},t,v,p)},p)}else t(new Error(n.error||"unknown_error"))})}function c(e){return new Promise(function(t,r){o(e,function(e){e?r(e):t()})})}},1552:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(45);var c=r(1);var l=r.n(c);var u=r(5);var d=r(378);var v=r(988);var p=r(383);var h=new u["b"]("attachments");var f={isExpanded:s.a.bool,onClick:s.a.func,attachmentsOverLimitCount:s.a.number};var m={isExpanded:false,onClick:c["noop"],attachmentsOverLimitCount:0};var b=function e(t){var r=t.isExpanded,a=t.onClick,i=t.attachmentsOverLimitCount;return n.a.createElement(d["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(v["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(p["a"],{onClick:a,text:r?h.t("Show fewer items"):h.t("{count, plural, =1 {Show remaining # item} other {Show remaining # items}}",{count:i})}))))};b.displayName="MessageAttachmentOverLimitButton";b.defaultProps=m;t["a"]=Object(o["pure"])(b)},1553:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(12);var _=r(1554);var y=r(54);var O=r(383);var k=r(60);var j=r(115);var C=r(5);var E=new C["b"]("string_format");var S={buttonSidebarTheme:v.a.object,currentSidebarTheme:v.a.object,featureSidebarThemeUndo:v.a.bool,onThemeInstall:v.a.func,clogLinkClick:v.a.func};var w={buttonSidebarTheme:null,currentSidebarTheme:null,featureSidebarThemeUndo:null,onThemeInstall:m["noop"],clogLinkClick:m["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.onUndoClick=r.onUndoClick.bind(r);r.state={showUndoButton:false,previousSidebarTheme:null};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=this.state.showUndoButton;var a=this.props,n=a.buttonSidebarTheme,i=a.featureSidebarThemeUndo;var s=t.currentSidebarTheme;if(!i)return;if(r&&Object(m["isEqual"])(n,s))return;this.setState(function(){return{showUndoButton:false}})}},{key:"onClick",value:function e(){var t=this.props,r=t.onThemeInstall,a=t.clogLinkClick,n=t.currentSidebarTheme,i=t.buttonSidebarTheme,s=t.featureSidebarThemeUndo;if(s){if(this.matchesCurrentTheme())return;this.setState(function(){return{previousSidebarTheme:n,showUndoButton:true}})}r(i);a()}},{key:"onUndoClick",value:function e(){var t=this.props,r=t.clogLinkClick,a=t.onThemeInstall,n=t.featureSidebarThemeUndo;var i=this.state.previousSidebarTheme;if(!n)return;this.setState(function(){return{previousSidebarTheme:null,showUndoButton:false}});a(i);r()}},{key:"shouldShowUndoButton",value:function e(){var t=this.props,r=t.currentSidebarTheme,a=t.featureSidebarThemeUndo;var n=this.state,i=n.showUndoButton,s=n.previousSidebarTheme;return a&&i&&s&&!Object(m["isEqual"])(s,r)}},{key:"matchesCurrentTheme",value:function e(){var t=this.props,r=t.currentSidebarTheme,a=t.buttonSidebarTheme;return Object(m["isEqual"])(r,a)}},{key:"renderSwitchSidebarThemeButton",value:function e(){var t=this.props,r=t.featureSidebarThemeUndo,a=t.buttonSidebarTheme;return h.a.createElement(O["a"],{"data-qa-theme":Object(m["values"])(a).join(),onClick:this.onClick,text:E.t("Switch sidebar theme"),isDisabled:r&&this.matchesCurrentTheme()})}},{key:"renderMatchesCurrentSidebarButton",value:function e(){var t=this.props.featureSidebarThemeUndo;if(!t)return null;return h.a.createElement(k["d"],{tip:E.t("This is your current sidebar theme")},h.a.createElement("span",null,this.renderSwitchSidebarThemeButton()))}},{key:"render",value:function e(){var t=this.props,r=t.featureSidebarThemeUndo,a=t.buttonSidebarTheme;if(!a){Object(j["d"])("Error getting formatted sidebar theme colors. Not rendering attachment button.");return null}if(r){if(this.shouldShowUndoButton())return h.a.createElement(O["a"],{onClick:this.onUndoClick,text:E.t("Undo")});if(this.matchesCurrentTheme())return this.renderMatchesCurrentSidebarButton()}return this.renderSwitchSidebarThemeButton()}}]);return t}(p["PureComponent"]);I.displayName="ThemeInstallButton";I.defaultProps=w;function T(e){if(!Object(m["isArray"])(e)||8!==e.length)return null;return{column_bg:e[0],menu_bg:e[1],active_item:e[2],active_item_text:e[3],hover_item:e[4],text_color:e[5],active_presence:e[6],badge:e[7]}}function N(e,t){var r=t.colors;var a=null;try{a=JSON.parse(Object(y["getUserPref"])(e,"sidebar_theme_custom_values"))}catch(e){Object(j["d"])("Error parsing sidebar_theme_custom_values for sidebar theme button: "+e)}return{featureSidebarThemeUndo:Object(g["isFeatureEnabled"])(e,"feature_sidebar_theme_undo"),buttonSidebarTheme:T(r),currentSidebarTheme:a}}var R={onThemeInstall:_["a"]};t["a"]=Object(f["connect"])(N,R)(I)},1554:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21696);var c=r(21769);var l=r(1006);var u=r(22506);var d=Object(o["e"])("Install a custom theme",function(e,t,r){if(!n.a.isObject(r)||8!==Object.keys(r).length)return;Object(u["a"])("custom_theme");var a={sidebar_theme:"custom_theme",sidebar_theme_custom_values:JSON.stringify(r)};e(Object(c["a"])(a));Object(l["a"])()});d.propTypes=s.a.object.isRequired;t["a"]=d},1556:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3274);var m=r(5);var b=r(1557);var g=r(37);var _=r(3184);var y=r(1558);var O=r(21796);var k=new m["b"]("message");var j=function e(){return Object(b["c"])("stars")};var C={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var E={isPinned:v.a.bool,isStarred:v.a.bool,isEphemeral:v.a.bool,isCustomResponse:v.a.bool,isSliHighlight:v.a.bool,isSelfIm:v.a.bool,isSlackbotIm:v.a.bool,primaryType:v.a.oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:v.a.shape({loading:v.a.bool,isHighlight:v.a.bool,feedbackOptions:v.a.object,justification:v.a.string,feedback:v.a.string}),isHovered:v.a.bool,channelId:v.a.string,ts:v.a.string,currentUserId:v.a.string,pinnedByMemberId:v.a.string};var S={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderStarButton=r.renderStarButton.bind(r);return r}s()(t,[{key:"getPinnedText",value:function e(){var t=this.props,r=t.currentUserId,a=t.pinnedByMemberId;if(a){if(a===r)return k.t("Pinned by you");return k.rt("Pinned by {member}",{member:h.a.createElement(O["a"],{id:a,className:"c-message__label_link"})})}return k.t("Pinned")}},{key:"getStarredText",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.long,a=void 0!==r&&r;if(a)return k.rt("<star>Added to your starred items</star>",null,this.renderStarButton);return k.rt("<star>starred</star>",null,this.renderStarButton)}},{key:"getLabelText",value:function e(){var t=this.props,r=t.isPinned,a=t.isStarred,n=t.isEphemeral,i=t.isCustomResponse,s=t.isSliHighlight,o=t.isSelfIm,c=t.isSlackbotIm;if(n){if(!o&&!c)return k.t("Only visible to you");return null}if(i){if(r&&a)return k.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:this.getPinnedText(),starred:this.getStarredText()});if(a)return k.rt("{starred} \u2219 Custom response",{starred:this.getStarredText({long:true})});if(r)return k.rt("{pinned} \u2219 Custom response",{pinned:this.getPinnedText()});return k.t("Custom response")}if(s){if(r&&a)return k.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:this.renderHighlight(),pinned:this.getPinnedText(),starred:this.getStarredText()});if(a)return k.rt("{starred} \u2219 {highlight}",{highlight:this.renderHighlight(),starred:this.getStarredText({long:true})});if(r)return k.rt("{pinned} \u2219 {highlight}",{highlight:this.renderHighlight(),pinned:this.getPinnedText()});return k.rt("{highlight}",{highlight:this.renderHighlight()})}if(r&&a)return k.rt("{pinned} \u2219 {starred}",{pinned:this.getPinnedText(),starred:this.getStarredText()});if(r)return this.getPinnedText();if(a)return this.getStarredText({long:true});return null}},{key:"renderHighlight",value:function e(){var t=this.props,r=t.sliHighlight,a=t.channelId,n=t.ts,i=t.isHovered;if(!Object(f["shouldShowHighlightsLabel"])(r))return null;return h.a.createElement(y["a"],{channelId:a,ts:n,isHovered:i,sliHighlight:r})}},{key:"renderStarButton",value:function e(t){var r=t.text;return h.a.createElement(_["c"],{onClick:j,className:"c-message__label_button"},r)}},{key:"render",value:function e(){var t=this.props.primaryType;var r=this.getLabelText();if(!r)return null;var a=C[t];return h.a.createElement("div",{className:"c-message__label"},h.a.createElement("div",{className:"c-message__label__gutter"},a&&h.a.createElement(g["b"],{type:a,className:"c-message__label__icon",size:"inherit",inline:true})),h.a.createElement("div",{className:"c-message__label__text"},r))}}]);return t}(p["PureComponent"]);w.displayName="MessageLabel";w.defaultProps=S;t["a"]=w},1558:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(3274);var O=r(60);var k=r(5);var j=r(37);var C=r(3184);var E=r(77);var S=r(266);var w=new k["b"]("message");var I={channelId:v.a.string.isRequired,ts:v.a.string.isRequired,isHovered:v.a.bool,sliHighlight:v.a.shape({loading:v.a.bool,isHighlight:v.a.bool,feedbackOptions:v.a.object,justification:v.a.string,feedback:v.a.string}),onSliHighlightsDefaultFeedback:v.a.func,onSliHighlightsSecondaryFeedbackOption:v.a.func};var T={isHovered:false,justification:null,sliHighlight:null,onSliHighlightsDefaultFeedback:_.a.noop,onSliHighlightsSecondaryFeedbackOption:_.a.noop};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSliHighlightsFeedbackDefaultPositive=r.onSliHighlightsFeedbackDefaultPositive.bind(r);r.onSliHighlightsFeedbackDefaultNegative=r.onSliHighlightsFeedbackDefaultNegative.bind(r);r.renderNegativeFeedbackMenu=r.renderNegativeFeedbackMenu.bind(r);return r}s()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return h.a.createElement("span",null,h.a.createElement("span",{className:"c-message__label__highlight_title"},w.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,r=t.isHovered,a=t.sliHighlight;var n="default_positive"===a.feedback;if(r){var i=b()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=b()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return h.a.createElement("span",null,w.t("Is this helpful?"),h.a.createElement(O["d"],{tip:n?w.t("Thank you!"):w.t("This was helpful")},h.a.createElement(C["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},h.a.createElement(j["b"],{type:"thumbs-up",size:"inherit",inline:true}))),h.a.createElement(O["d"],{tip:w.t("This wasn\u2019t helpful")},h.a.createElement(C["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},h.a.createElement(j["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return h.a.createElement(E["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return h.a.createElement("span",null,h.a.createElement("strong",null,w.t("What\u2019s not working about this highlight?"))," ",w.t("Let us know, and we\u2019ll adjust."),"\xa0",h.a.createElement(S["d"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},h.a.createElement(C["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},w.t("Give Feedback")," ",h.a.createElement(j["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var r=this;var a=this.props.sliHighlight.feedbackOptions;if(_.a.isEmpty(a))return null;return h.a.createElement(S["e"],t,_.a.map(a.negative,function(e){return h.a.createElement(S["b"],{key:e.args.ts,label:h.a.createElement(E["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return r.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(p["PureComponent"]);N.displayName="SliHighlightsMessageLabel";N.defaultProps=T;function R(e,t){var r=t.channelId,a=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(y["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(y["setFeedbackForHighlight"])({channelId:r,ts:a,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(f["connect"])(null,R)(N)},156:function(e,t,r){"use strict";var a=r(1461);t["a"]=a["a"]},1560:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e){if(!n.a.isObject(e))return false;return!e.bot_id&&!e.user&&!!e.username}},1561:function(e,t,r){"use strict";var a=r(1562);t["a"]=a["a"]},1562:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(9);var s=r(263);var o=r.n(s);var c=r(124);var l=r(3276);var u=r(21731);var d=r(3274);var v=r(3273);var p=r(21697);var h=r(21702);var f=r(54);var m=r(12);var b=r(21761);var g=r(3278);var _=r(21714);var y=r(1007);var O=r(907);var k=r(3182);var j=r(144);var C=r(3270);var E=r(3277);var S=r(21948);var w=r(22542);var I=r(21993);var T=r(3051);var N=r(22968);var R=r(1563);var A=r(1067);var M=Object(s["createSelectorCreator"])(s["defaultMemoize"],j["a"]);var P=20;var x=M([v["getPotentiallyOutdatedTimestamps"],h["getMessagesByChannelId"],function(e,t,r){return r}],function(e,t,r){var a=e.timestamps,i=e.start,s=e.end,o=e.reachedStart,c=e.reachedEnd,l=e.prevReachedEnd;if(!c&&!l&&a&&a.length-n.a.sortedLastIndex(a,r)<P)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var u=n()(a).map(function(e){return t[e]}).reject(y["isHidden"]).value();var d=Object(A["a"])(u),v=d.rollups,p=d.messages;return{messages:p,timestamps:n.a.map(p,function(e){return e.ts}),rollups:v,reachedStart:o,reachedEnd:c,prevReachedEnd:l,oldest:i,latest:s}});function D(e){var t=e.state,r=e.channelId,a=e.timestamps,i=e.rollups,s=e.lastReadTs;return n.a.find(a,function(e){var a=Object(h["getMessageByTimestamp"])(t,r,e);var o=Object(m["getCurrentUserId"])(t);if(!a)return false;if(i[e]){var c=n.a.values(i[e]);var l=n.a.map(c,"ts");var u=n.a.map(l,function(e){return Object(h["getMessageByTimestamp"])(t,r,e)});return n.a.some(u,function(e){return Object(y["isMessageUnread"])(e,s,o)})}return Object(y["isMessageUnread"])(a,s,o)})}var F=function e(t){var r=Object(_["getPrimaryView"])(t);var a=Object(p["getChannelById"])(t,r);var i=Object(m["isFeatureEnabled"])(t,"feature_react_messages");var s=Object(m["isFeatureEnabled"])(t,"feature_tinyspeck");var o=Object(m["isFeatureEnabled"])(t,"feature_modernize_banners");var u=Object(m["isFeatureEnabled"])(t,"feature_jump_to_unread_shortcut");var d=Object(m["isFeatureEnabled"])(t,"feature_lazy_channels");var h=Object(N["b"])(t);var y=Object(m["isFeatureEnabled"])(t,"feature_aria_application_mode");var k=Object(m["getCurrentUserId"])(t);var j=Object(C["getTeamId"])(t);var R=Object(g["getEnterpriseId"])(t);var A=Object(c["getChannelSessionId"])(t);var M=Object(b["getChannelTriggers"])(t);var P=Object(c["getHasMessagePaneUnmounted"])(t);var F=Object(E["getWindowLastBlurEvent"])(t);var L=Object(E["getWindowLastFocusEvent"])(t);if(!a)return{featureReactMessages:i,featureTinyspeck:s,featureModernizeBanners:o,featureLazyChannels:d,currentUserId:k,teamId:j,enterpriseId:R,sessionId:A,msgTriggers:M,hasMessagePaneUnmounted:P,windowLastBlurEvent:F,windowLastFocusEvent:L};var B=Object(v["getLoading"])(t,r);var U=Object(v["getLoadingOlder"])(t,r);var q=Object(O["getLastReadTs"])(a);var H=false;var W=Object(c["getGhostLastRead"])(t);if(W&&W!==q){q=W;H=true}var G=Object(c["getMessagePaneStartTs"])(t);var V=Object(c["getMessagePaneStartTsOffset"])(t);var z=Object(c["getMessagePaneHighlightTs"])(t);var K=Object(c["getMessagePaneHighlightLazy"])(t);var Q=Object(O["getUnreadCount"])(a);var Y=Object(v["getTimestampsByChannelId"])(t,r,q);var J=Y&&Y.reachedEnd;var Z=Object(c["getChannelSessionId"])(t);var X=Object(c["getPrevChannelSwitchTs"])(t);var $=Object(f["getUserMessagesTheme"])(t);var ee=x(t,r,G),te=ee.timestamps,re=ee.rollups,ae=ee.reachedStart,ne=ee.reachedEnd,ie=ee.prevReachedEnd,se=ee.oldest,oe=ee.latest;(Object(O["isPublicChannel"])(a)&&!Object(O["isMemberOfChannel"])(a)||Object(O["isArchived"])(a))&&(q=n.a.last(te));var ce=D({state:t,channelId:r,timestamps:te,rollups:re,lastReadTs:q});var le=Object(S["isScreenReaderEnabled"])(t);var ue=function(){return function(e){var a=e.ts,n=e.previousMessageTs,i=e.rollup,s=e.hasFocus;var o=Object(T["getMessageEditData"])(t,{channelId:r,ts:a}),c=o.isEditing;if(c)return;if(!(le||s))return;var l=Object(I["a"])(t,{ts:a,channelId:r,previousMessageTs:n,rollup:i});return Object(w["a"])(l)}}();return{channelId:r,type:Object(O["getChannelType"])(a),channelDisplayName:Object(O["getDisplayName"])(a),timestamps:te,reachedStart:ae,reachedEnd:ne,prevReachedEnd:ie,oldest:se,latest:oe,lastReadTs:q,isGhostLastRead:H,unreadCount:Q,unreadCountKnown:J,startTs:G,startTsOffset:V,highlightTs:z,highlightLazy:K,rollups:re,isArchived:Object(O["isArchived"])(a),isLoading:B,isLoadingOlder:U,isLimited:Object(v["getIsLimited"])(t,r),isSlackbotIm:Object(O["isSlackbot"])(a),overlayVisible:Object(c["isOverlayVisible"])(t),channelSessionId:Z,prevChannelSwitchTs:X,theme:$,newxpOnboardingStep:Object(c["getNewxpOnboardingStep"])(t),firstUnreadTs:ce,featureReactMessages:i,featureTinyspeck:s,featureModernizeBanners:o,featureJumpToUnreadShortcut:u,featureLazyChannels:d,useGlobalNav:h,featureAriaApplicationMode:y,teamId:j,enterpriseId:R,sessionId:A,msgTriggers:M,hasMessagePaneUnmounted:P,windowLastBlurEvent:F,windowLastFocusEvent:L,currentUserId:k,badgeCount:Object(p["getBadgeCount"])(t,a),isShared:Object(O["isExternallySharedChannel"])(a),isOrgShared:Object(O["isOrgShared"])(a),isYou:Object(O["isYou"])(t,a),isMuted:Object(l["isChannelMutedById"])(t,r),hasUnreads:!!Object(O["getUnreadCount"])(a),hasDraft:Object(O["getHasDraft"])(a),makeMessageSummary:ue,isScreenReaderEnabled:le}};function L(e){return function(t,r){var a=Object(c["isUnreadLineVisible"])(r());if(a!==e){t(Object(k["info"])("CHECK-UNREADS","unreadLineVisible updated: "+a+" -> "+e));t(Object(c["setUnreadLineVisibility"])(e))}}}var B={fetchHistory:c["fetchHistory"],fetchSliHighlights:d["fetchSliHighlights"],setUnreadPoint:p["setUnreadPoint"],markMostRecentMsgRead:p["markMostRecentMsgRead"],setUnreadLineVisibility:L,clearHighlightTs:c["clearHighlightTs"],jumpToTimestamp:c["jumpToTimestamp"],saveScrollmark:c["maybeSaveScrollmark"],onMount:Object(m["ifFeatureEnabled"])("feature_app_actions_fe",u["ensureFresh"]),setMessagePaneHasUnmounted:c["setMessagePaneHasUnmounted"]};t["a"]=Object(i["connect"])(F,B)(R["a"])},1563:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(194);var C=r.n(j);var E=r(113);var S=r(3182);var w=r(49);var I=r(21708);var T=r(22288);var N=r(22260);var R=r(21713);var A=r(211);var M=r(115);var P=r(90);var x=r(1008);var D=r(22544);var F=r(23058);var L=r(22262);var B=r(1588);var U=r(1590);var q=r(1591);var H=r(3207);var W=r(22192);var G=r(20187);var V=r.n(G);var z={channelId:g.a.string,channelDisplayName:g.a.string,type:g.a.oneOf(["channel","private","im","mpim"]),theme:g.a.oneOf(["light","dense"]),timestamps:g.a.arrayOf(g.a.string),reachedStart:g.a.bool,reachedEnd:g.a.bool,prevReachedEnd:g.a.bool,oldest:g.a.string,latest:g.a.string,fetchHistory:g.a.func,fetchSliHighlights:g.a.func,onMount:g.a.func,lastReadTs:g.a.string,isGhostLastRead:g.a.bool,unreadCount:g.a.number,unreadCountKnown:g.a.bool,startTs:g.a.string,startTsOffset:g.a.number,highlightTs:g.a.string,highlightLazy:g.a.bool,rollups:g.a.objectOf(E["a"].Rollup()),isLoading:g.a.bool,isLoadingOlder:g.a.bool,setUnreadPoint:g.a.func,markMostRecentMsgRead:g.a.func,setUnreadLineVisibility:g.a.func,clearHighlightTs:g.a.func,jumpToTimestamp:g.a.func,saveScrollmark:g.a.func,isArchived:g.a.bool,isLimited:g.a.bool,isSlackbotIm:g.a.bool,overlayVisible:g.a.bool,channelSessionId:g.a.string,prevChannelSwitchTs:g.a.string,newxpOnboardingStep:g.a.string,firstUnreadTs:g.a.string,featureReactMessages:g.a.bool,featureTinyspeck:g.a.bool,featureModernizeBanners:g.a.bool,featureJumpToUnreadShortcut:g.a.bool,featureLazyChannels:g.a.bool,useGlobalNav:g.a.bool,featureAriaApplicationMode:g.a.bool,teamId:g.a.string,enterpriseId:g.a.string,sessionId:g.a.string,msgTriggers:g.a.object,hasMessagePaneUnmounted:g.a.bool,setMessagePaneHasUnmounted:g.a.func,currentUserId:g.a.string,isShared:g.a.bool,isOrgShared:g.a.bool,isYou:g.a.bool,isMuted:g.a.bool,hasUnreads:g.a.bool,hasDraft:g.a.bool,badgeCount:g.a.number,screenReaderOverride:g.a.bool,windowLastBlurEvent:g.a.number,windowLastFocusEvent:g.a.number,makeMessageSummary:g.a.func,isScreenReaderEnabled:g.a.bool};var K={channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:m.a.noop,fetchSliHighlights:m.a.noop,onMount:m.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:m.a.noop,markMostRecentMsgRead:m.a.noop,setUnreadLineVisibility:m.a.noop,clearHighlightTs:m.a.noop,jumpToTimestamp:m.a.noop,saveScrollmark:m.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureModernizeBanners:false,featureJumpToUnreadShortcut:false,featureLazyChannels:false,useGlobalNav:false,featureAriaApplicationMode:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:m.a.noop,currentUserId:null,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false};var Q=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.list=null;r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onVisibleRowsChanged=r.onVisibleRowsChanged.bind(r);r.setListRef=r.setListRef.bind(r);r.shouldIgnoreScrollKeys=r.shouldIgnoreScrollKeys.bind(r);r.shouldIgnoreArrowKeys=r.shouldIgnoreArrowKeys.bind(r);r.requestHistory=r.requestHistory.bind(r);r.jumpToMostRecent=r.jumpToMostRecent.bind(r);r.jumpToUnread=r.jumpToUnread.bind(r);r.state={showingArchiveBanner:false,unreadPlacement:x["a"].VISIBLE};r.historyRequests={};r.prqMetrics={usableVisible:{}};r.sendSessionFrameStats=r.sendSessionFrameStats.bind(r);r.recordSessionFrameStats=r.recordSessionFrameStats.bind(r);return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var r=!!this.props.timestamps.length;var a=!!(this.props.unreadCount||this.props.unreadCountKnown);r&&a&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:m.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.props.channelId;this.setState(function(e){var a=r.getUnreadLinePlacement();if(!t.isLoading&&!m.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return s()({},e,{unreadPlacement:a,showingArchiveBanner:n})}if(e.unreadPlacement!==a)return s()({},e,{unreadPlacement:a});return e});if(a&&t.channelId!==a){var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:a,scrollmark:n});this.historyRequests={};this.recordAndTrackTimeToUsable(R["l"].ABANDONED)}var i=this.props.timestamps.length!==t.timestamps.length;var o=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!o||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:m.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(R["l"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true)}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(){if(!this.list)return;var t=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:t}});var r=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(r)}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return x["a"].VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var t=Object(I["e"])("prq_time_to_visible","navigationStart",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.usableVisible=n()({},this.props.channelId,t);Object(T["i"])(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop,this.props.featureLazyChannels);this.props.setMessagePaneHasUnmounted(true)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var r=Object(I["e"])("prq_time_to_usable","navigationStart",null,{return_unprocessed:true}).unprocessed;Object(T["h"])(r,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t,window.desktop,this.props.featureLazyChannels);this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);Object(T["d"])(this.props.teamId,this.props.enterpriseId,R["h"].PRQ_SESSION_FRAME_STATS)&&Object(N["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(N["e"])())return;Object(N["i"])();var t=Object(N["a"])();if(0===t.durationMs)return;Object(T["g"])(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var r=t.target;var a=r===document.body;var n=this.hasFocus;var i=Object(P["d"])();return!(a||n||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var r=t.target;var a=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=a&&a.contains(r);var s=n&&n.contains(r);return!Object(P["e"])()||s||i||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,r=t.isGhostLastRead,a=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!r&&this.list.getUnreadLinePlacement()===x["a"].VISIBLE)return true;if(!a&&n&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var r=t?t.message:"";var a=t?t.stack:"";Object(w["a"])(this.props.teamId,Object(S["error"])("MessagePane componentDidCatch: "+r));a&&Object(w["a"])(this.props.teamId,Object(S["error"])(a))}},{key:"requestHistory",value:function e(t){var r=t.oldest,a=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,c=n.reachedEnd;if(o&&c)return false;var l=r;var u=a;if(u&&o){if(!l)return false;u=null}if(l&&c){if(!u)return false;l=null}if(this.shouldPreventHistoryRequest({oldest:r,latest:a})){Object(M["d"])({channelId:i,latestTs:u,oldestTs:l},"message_pane_request_rate_limited");return false}var d="message-pane/requestHistory";var v=this.props.fetchHistory({channelId:i,type:s,oldest:l,latest:u,reason:d});v&&this.logHistoryRequest({oldest:l,latest:u});return v}},{key:"logHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=r+"_"+a;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var r=t.oldest,a=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[r+"_"+a];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(m.a.isEmpty(t))return null;return y.a.createElement(B["a"],{firstTimestamp:m.a.first(t),lastTimestamp:m.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,r=t.unreadCount,a=t.unreadCountKnown,n=t.lastReadTs,i=t.channelId,s=t.isGhostLastRead,o=t.markMostRecentMsgRead,c=t.timestamps,l=t.reachedEnd,u=t.newxpOnboardingStep,d=t.overlayVisible,v=t.isArchived,p=t.featureJumpToUnreadShortcut;if(d)return null;if(u)return null;if(v)return null;var h=c.length&&l?c.filter(function(e){return e>n}).length:r;return y.a.createElement(q["a"],{channelId:i,hasUnreads:r>0,displayCount:h,known:a,since:n,ghost:s,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:o,featureJumpToUnreadShortcut:p})}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,r=t.newxpOnboardingStep,a=t.overlayVisible;if(!this.props.featureModernizeBanners)return null;if(a)return null;if(r)return null;return y.a.createElement(D["a"],null)}},{key:"render",value:function e(){if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===W["a"].START)return y.a.createElement(W["b"],{step:this.props.newxpOnboardingStep});if(!this.props.channelId)return null;var t=C.a.msie||C.a.msedge;var r=!this.props.overlayVisible&&!t;var a=k()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--global-nav":this.props.useGlobalNav});var n=this.props,i=n.type,s=n.channelDisplayName,o=n.isShared,c=n.isOrgShared,l=n.isYou,u=n.isMuted,d=n.hasUnreads,v=n.hasDraft,p=n.isArchived,h=n.unreadCount,f=n.badgeCount;var m=Object(L["a"])({type:i,displayName:s,isShared:o,isOrgShared:c,isYou:l,isMuted:u,hasUnreads:d,hasDraft:v,isArchived:p,unreadCount:h,badgeCount:f,isSelected:false,userActive:false,isTyping:false});return y.a.createElement(F["a"],{component:this,order:1},y.a.createElement("div",{className:a},y.a.createElement("div",{className:"p-message_pane__top_banners"},y.a.createElement(H["a"],null),y.a.createElement(U["a"],null),this.renderUnreadBanner()),this.renderMessagePaneBannerContainer(),y.a.createElement(x["b"],{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:m,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:r,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:A["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureJumpToUnreadShortcut:this.props.featureJumpToUnreadShortcut,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave}),this.renderArchivesBanner()))}}]);return t}(_["PureComponent"]);Q.displayName="MessagePane";Q.defaultProps=K;t["a"]=Q},1564:function(e,t,r){"use strict";r.d(t,"a",function(){return te});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(333);var g=r(8);var _=r.n(g);var y=r(113);var O=r(21708);var k=r(22288);var j=r(3182);var C=r(49);var E=r(253);var S=r(21717);var w=r(21854);var I=r(64);var T=r(1005);var N=r(1013);var R=r(1583);var A=r(1566);var M=r(3256);var P=r(1570);var x=r(1572);var D=r(156);var F=r(37);var L=r(386);var B=r(168);var U=r(1009);var q=r(1584);var H=r(22543);var W=r(20245);var G=r.n(W);var V=A["a"];var z=M["a"];var K={channelId:h.a.string,timestamps:h.a.arrayOf(h.a.string),requestHistory:h.a.func,lastReadTs:h.a.string,isGhostLastRead:h.a.bool,startTs:h.a.string,startTsOffset:h.a.number,highlightTs:h.a.string,rollups:h.a.objectOf(y["a"].Rollup()),setUnreadPoint:h.a.func,isLoading:h.a.bool,isLoadingOlder:h.a.bool,reachedStart:h.a.bool,reachedEnd:h.a.bool,prevReachedEnd:h.a.bool,oldest:h.a.string,latest:h.a.string,onScroll:h.a.func,onVisibleRowsChanged:h.a.func,doneHighlighting:h.a.func,isLimited:h.a.bool,isSlackbotIm:h.a.bool,useStickyDayDividers:h.a.bool,shouldIgnoreScrollKeys:h.a.func,shouldIgnoreArrowKeys:h.a.func,channelSessionId:h.a.string,theme:h.a.string,firstUnreadTs:h.a.string,featureReactMessages:h.a.bool,featureTinyspeck:h.a.bool,featureJumpToUnreadShortcut:h.a.bool,featureAriaApplicationMode:h.a.bool,messageContainerType:h.a.string,ariaLabel:h.a.string.isRequired,teamId:h.a.string,enterpriseId:h.a.string,sessionId:h.a.string,msgTriggers:h.a.object,currentUserId:h.a.string,jumpToTimestamp:h.a.func,makeMessageSummary:h.a.func,isScreenReaderEnabled:h.a.bool,windowLastFocusEvent:h.a.number,onFocusEnter:h.a.func,onFocusLeave:h.a.func};var Q={channelId:null,timestamps:[],requestHistory:v.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,rollups:null,setUnreadPoint:v.a.noop,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:v.a.noop,onVisibleRowsChanged:v.a.noop,doneHighlighting:v.a.noop,isLimited:false,isSlackbotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureJumpToUnreadShortcut:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:v.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:v.a.noop,onFocusLeave:v.a.noop};var Y=80;var J=60;var Z=21;var X=64;var $=120;var ee="MESSAGE-LIST";var te={ABOVE:1,VISIBLE:2,BELOW:3};var re="0000000000.000000";var ae=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=ne();r.state={degraded:a,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false};r.DEFAULT_ROW_HEIGHT="light"===e.theme?Y:J;r.STICKY_EPSILON=r.DEFAULT_ROW_HEIGHT/2;r.ANCHOR_OFFSET=a?$:X;r.heightCache=new x["a"]({DEFAULT_HEIGHT:r.DEFAULT_ROW_HEIGHT});r.layout=new P["a"]({heightCache:r.heightCache,stickToBottom:e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:r.isFirstRowLimitedHistoryForeword.bind(r),STICKY_EPSILON:r.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:r.ANCHOR_OFFSET});r.keys=[];r.rows=[];r.visibleRows=[];r.unreadIndex=null;r.list=null;r.useAnchor=true;r.useScroll=false;r.width=0;r.hasRenderedOneMessage=false;r.requestAround=r.requestAround.bind(r);r.requestOlder=r.requestOlder.bind(r);r.requestNewer=r.requestNewer.bind(r);r.renderRow=r.renderRow.bind(r);r.setListRef=r.setListRef.bind(r);r.getAriaLabelForRow=r.getAriaLabelForRow.bind(r);r.onScroll=r.onScroll.bind(r);r.onListScrolled=r.onListScrolled.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.debouncedOnListScrolled=Object(w["a"])(r.onListScrolled,150);r.shouldFocusNextItem=r.shouldFocusNextItem.bind(r);r.onSelectionChange=r.onSelectionChange.bind(r);r.onJumpToUnreadShortcut=r.onJumpToUnreadShortcut.bind(r);r.onPageUp=r.onPageUp.bind(r);r.onPageDown=r.onPageDown.bind(r);r.onHome=r.onHome.bind(r);r.onEnd=r.onEnd.bind(r);r.scrollToOffset=v.a.throttle(r.scrollToOffset.bind(r),200);r.unfurlLinkCache=new L["a"];r.messagesRendered={};r.loadingHistoriesSeen=0;r.loadingHistoriesSeenHighEnd=0;r.loadingHistoriesPerHowManyMessages=84;r.loadingHistoriesPerHowManyMessagesHighEnd=500;r.scrollMetricsGatheringEnabled=Object(S["a"])(1)||r.props.featureTinyspeck;if(r.scrollMetricsGatheringEnabled){r.debounceBatchMessagesSeen=v.a.debounce(function(){Object(O["g"])("modern_history_load_seen_per_84_messages",r.loadingHistoriesSeen,{allow_zero:true});r.loadingHistoriesSeen=0},1e3);r.debounceBatchMessagesSeenHighEnd=v.a.debounce(function(){Object(O["g"])("modern_history_load_seen_per_500_messages",r.loadingHistoriesSeenHighEnd,{allow_zero:true});r.loadingHistoriesSeenHighEnd=0},1e3)}r.debounceCountHistoryLoadSeen=v.a.debounce(function(){r.loadingHistoriesSeen+=1;r.loadingHistoriesSeenHighEnd+=1},1e3);r.prqMetrics={channelSwitch:{}};return r}s()(t,[{key:"componentDidMount",value:function e(){this.trackFirstMessagePaint()}},{key:"componentDidUpdate",value:function e(t){this.trackFirstMessagePaint();if(this.useScroll&&this.list){this.list.scrollToKey(this.useScroll,{anim:true,lazy:this.lazyScroll});this.useScroll=false}this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t)}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var r=false;this.trackChannelSwitchWithSync(k["f"],r)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var a=true;this.trackChannelSwitchWithSync(k["e"],a)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){Object(k["e"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);Object(k["f"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}var r="start_channel_change_"+this.props.channelId;var a=Object(O["e"])("channel_change_react_msgs",r,null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:a,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:k["c"],hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,r){var a="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;t(Object(O["e"])("channel_change_not_stored",a,null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,k["a"],this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);if(r){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"trackFirstMessagePaint",value:function e(){if(!v.a.get(window,"performance.timing.fetchStart"))return;if(this.props.timestamps.length>0&&false===this.hasRenderedOneMessage){this.hasRenderedOneMessage=true;Object(C["a"])(this.props.teamId,Object(j["info"])("BOOT-TIMING","First meaningful paint: "+(Date.now()-window.performance.timing.fetchStart)+"ms"))}}},{key:"getTimestampForStartTs",value:function e(){var t=this.props,r=t.startTs,a=t.timestamps;if(!a.length)return false;if(!r)return null;return v.a.find(a,function(e){return e>=r})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var r=this.props,a=r.lastReadTs,n=r.jumpToTimestamp,i=r.isScreenReaderEnabled;var s=t&&"keydown"===t.type&&(i||this.hasKeyboardFocus);var o=v.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(s){this.focusFirstUnreadMsgAfterUpdate=true;if(o){this.forceUpdate();return}n({ts:a});return}if(o){this.list.scrollToKey(o,{anim:true});return}n({ts:a})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var r=this.layout.getTotalHeight();var a=this.height;return t+a>=Math.floor(r)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return te.ABOVE;if(!this.list)return te.ABOVE;var t=this.list.getVisibleRange(),r=t.start,a=t.end;if(this.unreadIndex<r)return te.ABOVE;if(this.unreadIndex<a)return te.VISIBLE;return te.BELOW}},{key:"getVisibleRows",value:function e(){if(!this.list)return[];var t=this.list.getVisibleRange(),r=t.start,a=t.end;var n=this.rows.slice(r,a);return n}},{key:"getScrollmarkForFocusedItem",value:function e(t){var r=t===re?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(r)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.list.getItemForScrollmark();if(t)return this.getScrollmarkForFocusedItem(t);var r=this.list.getScrollTop();if(this.layout.shouldStickToBottom(r))return null;var a=this.props.timestamps;var n=this.layout.findAnchor(a,a,r+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-r;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"shouldFocusNextItem",value:function e(t){var r=this.rows[t.index];return r&&("message"===r.type||"foreword"===r.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows();if(v.a.isEqual(t,this.visibleRows))return;this.visibleRows=t;this.props.onVisibleRowsChanged(t)}},{key:"onPageUp",value:function e(){this.scrollToOffset(this.list.getScrollTop()-(this.height-Z),{animate:true})}},{key:"onPageDown",value:function e(){this.scrollToOffset(this.list.getScrollTop()+(this.height-Z),{animate:true})}},{key:"onHome",value:function e(){this.scrollToOffset(0,{absolute:true})}},{key:"onEnd",value:function e(){this.props.reachedEnd?this.scrollToOffset(Infinity,{absolute:true}):this.props.jumpToTimestamp({ts:null})}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!this.props.featureJumpToUnreadShortcut)return;if(!B["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){this.hasKeyboardFocus=t.isKeyboardFocus;this.props.onFocusEnter(t)}},{key:"onFocusLeave",value:function e(t){this.hasKeyboardFocus=false;this.props.onFocusLeave(t)}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&a}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,r=t.isLimited,a=t.isSlackbotIm;return r&&!a}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=v.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(C["a"])(this.props.teamId,Object(j["info"])(ee,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+v.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd));var r=this.props,a=r.oldest,n=r.latest,i=r.timestamps,s=r.startTs;if(v.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=a||i&&v.a.first(i)||s;var c=n||i&&v.a.last(i)||s;var l=this.props.requestHistory({latest:o,oldest:c});if(l){this.prqMetrics.channelSwitch.fetchHistoryState!==k["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=k["b"]);l.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=k["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return l}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.oldest,n=r.timestamps,i=r.startTs;var s=a||n&&v.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==k["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=k["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=k["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.latest,n=r.timestamps,i=r.startTs;var s=a||n&&v.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==k["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=k["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=k["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,r){var a=r.hasFocus,n=r.isHovered;var i=t.ts,s=t.previousMessageTs;var o=v.a.last(this.props.timestamps);var c=i&&i===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var l=v.a.keys(this.messagesRendered).length;l%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();l%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}var u=m.a.createElement(D["a"],{ts:i,key:i,channelId:this.props.channelId,previousMessageTs:s,isLast:i===o,rollup:this.props.rollups[i],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:c,doneHighlighting:this.props.doneHighlighting,unfurlLinkCache:this.unfurlLinkCache,channelSessionId:this.props.channelSessionId,isHovered:n,messageContainerType:this.props.messageContainerType,renderActions:n||a,hasFocus:a,renderActionsOffscreen:this.hasKeyboardFocus});if(a)return[u,m.a.createElement(H["a"],{key:"message-list-focus-indicator"})];return u}},{key:"renderForeword",value:function e(t){var r=t.hasFocus;var a=m.a.createElement(N["j"],{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()});if(r)return[a,m.a.createElement(H["a"],{key:"message-list-focus-indicator"})];return a}},{key:"renderRow",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.hasFocus,n=r.isHovered;var i=this.rows[t];if(!i||!i.type)return null;switch(i.type){case"message":return this.renderMessage(i,{hasFocus:a,isHovered:n});case"dayDividerLabel":return m.a.createElement(q["b"],{key:i.day,date:i.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return m.a.createElement(q["a"],{key:i.day,date:i.day,isUnread:i.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return m.a.createElement(U["a"],{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();return m.a.createElement("div",{key:"loading",className:_()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme)});case"loadingSpinner":return m.a.createElement("div",{className:"c-message_list__spinner"},m.a.createElement(F["a"],{type:"spinner",animation:"spin"}));case"foreword":return this.renderForeword({hasFocus:a});case"limited_history":return m.a.createElement(R["a"],null);default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var r=this.rows[t];if(!r||!r.type)return;if("message"!==r.type)return;var a=r.ts,n=r.previousMessageTs;var i=this.props.makeMessageSummary;var s=this.props.rollups[a];if(i)return i({ts:a,previousMessageTs:n,rollup:s,hasFocus:this.hasKeyboardFocus})}},{key:"componentWillReceiveProps",value:function e(t){var r=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(C["a"])(r.props.teamId,Object(j["info"])(ee,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+v.a.size(t.timestamps)));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var a=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(v.a.inRange(a,v.a.floor(v.a.first(n)),v.a.ceil(v.a.last(n)))&&t.channelId===this.props.channelId){var s=v.a.findLast(i,function(e){return e<=t.startTs});this.useScroll=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.unfurlLinkCache=new L["a"];this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(C["a"])(this.props.teamId,Object(j["info"])(ee,"Switching channels: "+t.channelId+" timestamps: "+v.a.size(t.timestamps)))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"render",value:function e(){var t=this;var r=v.a.groupBy(this.props.timestamps,function(e){var t=Object(I["a"])(e);var r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r.getTime()});var a=v.a.keys(r).sort();var n=[];var i=[];var s=[];var o=this.getTimestampForStartTs();var c=this.props.firstUnreadTs;var l=o;if(this.props.reachedStart){i.push(re);n.push({type:"foreword",ts:re});if(this.shouldShowLimitedHistoryAlert()){i.push("limited_history");n.push({type:"limited_history"})}}this.unreadIndex=null;var u=v.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;v.a.forEach(a,function(e,a){var o=parseInt(e,10);var d=r[e];var p=e+"."+t.props.channelId;var h=u&&v.a.first(d)===c;if(h){t.unreadIndex=n.length;t.props.startTs===t.props.lastReadTs&&(l=p)}n.push({type:"dayDividerLabel",day:o,showDayDividerAsUnread:h});t.props.useStickyDayDividers&&s.push({key:p,index:i.length});i.push(p);if(a>0||t.props.reachedStart||t.state.degraded){n.push({type:"dayDivider",day:o,showDayDividerAsUnread:h});i.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===a&&t.state.isLoadingOlder){i.push("loading");n.push({type:"loading"})}var f=void 0;v.a.forEach(d,function(e,r){if(u&&0!==r&&e===c){t.unreadIndex=n.length;var a="unreadDivider";i.push(a);n.push({type:"unread"});t.props.startTs===t.props.lastReadTs&&(l=c)}n.push({type:"message",ts:e,previousMessageTs:f});i.push(e);f=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){i.push("loadingSpinner");n.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&l,this.useAnchor&&this.props.startTsOffset);this.keys=i;this.rows=n;var d={firstVisibleUnreadTs:c,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:v.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers};var p=this.state.degraded?z:V;var h=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut}];var f=function(){if(t.focusFirstUnreadMsgAfterUpdate&&c){t.focusFirstUnreadMsgAfterUpdate=false;return c}return}();var g=function(){if(t.state.isLoading)return p.FIRST_ITEM_IN_VIEW;var e=n[n.length-1];var r=e&&e.type;var a=t.props.startTs===re||false===o&&"foreword"===r;if(a)return re;if(null===o&&"message"===r)return e.ts;if(c)return c;if(o)return o;return p.FIRST_ITEM_IN_VIEW}();return m.a.createElement(b["a"],null,function(e){var r=e.width,a=e.height;if(0===r||0===a)return null;if(r!==t.width){t.heightCache.invalidate();t.width=r}t.height=a;return m.a.createElement(p,{ref:t.setListRef,className:"c-message_list",ariaLabel:t.props.ariaLabel,height:a,width:r,keys:i,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,itemToFocus:f,stickyItems:s,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onPageUp:t.onPageUp,onPageDown:t.onPageDown,onHome:t.onHome,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,keyCommands:h,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,shouldFocusNextItem:t.shouldFocusNextItem,unrelatedUpdateProps:d,featureReactMessages:t.props.featureReactMessages,initialActiveItem:g,useAriaApplicationMode:t.props.featureAriaApplicationMode})})}}]);return t}(E["a"]);ae.displayName="MessageList";ae.propTypes=K;ae.defaultProps=Q;t["b"]=Object(T["a"])(ae);function ne(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},1566:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(189);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(3254);var k=r(1010);function j(e){var t={};for(var r=0;r<e.length;r++)t[e[r].key]={index:e[r].index,next:y.a.get(e[r+1],"key")};return t}var C=h()({},O["a"].propTypes,{stickyItems:g.a.arrayOf(g.a.shape({key:g.a.string,index:g.a.number})),stickyOffsetTop:g.a.number,stickyZIndex:g.a.number});var E=h()({},O["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var S=function(e){v()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.stickyItems=j(e.stickyItems);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(r){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,r);this.stickyItems=j(r.stickyItems)}},{key:"renderItem",value:function e(r,a){if(!(r in this.stickyItems))return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,r,a);var n=0===a?-100:this.getTop(r);var i=this.layout.getHeight(r);var s=this.layout.getHeightValidity(r);var o=this.getContentHeight();var c=this.stickyItems[r].next;var l=c?this.getTop(c):o;var d=Math.max(0,o-l);var v=this.props.getAriaLabelForRow;var p=v&&v(a);return m.a.createElement("div",{key:""+r+n+d,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:n,bottom:d}},m.a.createElement(k["a"],{id:r,height:i,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},onHeightChange:this.setHeight,ariaLabel:p},this.props.rowRenderer(a)))}},{key:"renderItems",value:function e(){var r=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.state.start;var n=y.a.sortedIndexBy(this.props.stickyItems,{index:a},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&r.unshift(this.renderItem(i.key,i.index));return r}}]);return t}(O["a"]);t["a"]=S;S.propTypes=C;S.defaultProps=E},157:function(e,t){e.exports=false},1570:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(1571);var m=function(e){v()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));h.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(r.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return r}s()(t,[{key:"layout",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var r=this.containerHeight-this.totalHeight;this.tops=h.a.mapValues(this.tops,function(e){return e+r});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[h.a.first(this.keys)]=0)}}]);return t}(f["a"]);t["a"]=m},1571:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1011);var h=function(e){v()(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.keys,a=e.heightCache,i=e.containerHeight,s=void 0===i?0:i,o=e.stickToBottom,l=void 0!==o&&o,u=e.bottomMargin,d=void 0===u?0:u,v=e.ANCHOR_OFFSET,p=void 0===v?0:v,h=e.STICKY_EPSILON,f=void 0===h?2:h,m=e.STICKY_EPSILON_SETHEIGHT,b=void 0===m?2:m;n()(this,t);var g=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{keys:r,heightCache:a}));g.containerHeight=s;g.stickToBottom=l;g.bottomMargin=d;g.STICKY_EPSILON=f;g.STICKY_EPSILON_SETHEIGHT=b;g.ANCHOR_OFFSET=p;g.anchorOffset=p;g.anchor=false;return g}s()(t,[{key:"getOffsetForKey",value:function e(t){if(!t)return this.totalHeight;var r=this.getTop(t);if(void 0===r)return 0;return r-this.anchorOffset}},{key:"setHeight",value:function e(r,a,n){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(n,this.STICKY_EPSILON_SETHEIGHT)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(Infinity)}var i=n;var s=this.getBottom(r);if(s<=n+this.anchorOffset){var o=a-this.getHeight(r);i+=o}u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,r,a);return this.bracketScrollTop(i)}},{key:"setKeys",value:function e(r,a){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(a)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(Infinity)}var n=a+this.anchorOffset;var i=this.findAnchor(this.keys,r,n);if(!i){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);return this.bracketScrollTop(a)}var s=this.getTop(i)-n;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,r);var o=this.getTop(i)-n;var c=s-o;return this.bracketScrollTop(a-c)}},{key:"setContainerHeight",value:function e(t,r){if(false!==this.anchor){this.containerHeight=t;this.layout();return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(r)){this.containerHeight=t;this.layout();return this.bracketScrollTop(Infinity)}this.containerHeight=t;this.layout();return r}},{key:"setBottomMargin",value:function e(t){this.bottomMargin=t}},{key:"setStickToBottom",value:function e(t){this.stickToBottom=t}},{key:"setAnchor",value:function e(t,r){this.anchor=t;this.anchorOffset="number"!==typeof r?this.ANCHOR_OFFSET:r}},{key:"findAnchor",value:function e(t,r,a){for(var n=0;n<t.length;n++){var i=t[n];if(this.getBottom(i)>a)for(var s=0;s<r.length;s++)if(r[s]===i)return i}return null}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.totalHeight-this.containerHeight+this.bottomMargin,t))}},{key:"shouldStickToBottom",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STICKY_EPSILON;if(!this.stickToBottom)return false;return t>=this.totalHeight-this.containerHeight-r+this.bottomMargin}}]);return t}(p["a"]);t["a"]=h},1573:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(21697);var b=r(124);var g=r(907);var _=r(43);var y=r(1013);var O={channelId:v.a.string,channelType:v.a.string,hasLimitedHistory:v.a.bool,isShared:v.a.bool,isSlackbotIm:v.a.bool,newxpOnboardingStep:v.a.string};var k={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,newxpOnboardingStep:null};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.channelType,n=t.hasLimitedHistory,i=t.isShared,s=t.isSlackbotIm,o=t.newxpOnboardingStep;if(s){if(o&&o!==y["g"].COMPLETE)return h.a.createElement(y["f"],{step:o});return h.a.createElement(y["i"],null)}if(n)return h.a.createElement(y["d"],{channelId:r});if("channel"===a||"private"===a){if(i)return h.a.createElement(y["h"],{channelId:r});return h.a.createElement(y["a"],{channelId:r})}if("im"===a){if(i)return h.a.createElement(y["c"],{channelId:r});return h.a.createElement(y["b"],{channelId:r})}if("mpim"===a)return h.a.createElement(y["e"],{channelId:r});Object(_["warn"])('Unknown foreword type "'+a+'"');return null}}]);return t}(p["PureComponent"]);j.displayName="Foreword";j.defaultProps=k;function C(e,t){var r=t.channelId;var a=Object(m["getChannelById"])(e,r);if(!a)return null;return{isShared:Object(g["isExternallySharedChannel"])(a),isSlackbotIm:Object(g["isSlackbot"])(a),newxpOnboardingStep:Object(b["getNewxpOnboardingStep"])(e)}}t["a"]=Object(f["connect"])(C)(j)},1574:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(37);var _=r(3184);var y=new b["b"]("message_pane_foreword");var O={onClick:v.a.func};var k={onClick:m.a.noop};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.onClick;return h.a.createElement(_["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},h.a.createElement(g["a"],{type:"plus",inherit:true})," ",y.t("Add an app"))}}]);return t}(p["PureComponent"]);j.displayName="AppButton";j.defaultProps=k;t["a"]=j},1575:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(37);var _=r(3184);var y=new b["b"]("message_pane_foreword");var O={isPrivate:v.a.bool,onClick:v.a.func};var k={isPrivate:false,onClick:m.a.noop};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.isPrivate,a=t.onClick;var n=void 0;n=r?y.t("Invite others to this private channel"):y.t("Invite others to this channel");return h.a.createElement(_["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:a},h.a.createElement(g["a"],{type:"user",inherit:true})," ",n)}}]);return t}(p["PureComponent"]);j.displayName="InviteButton";j.defaultProps=k;t["a"]=j},1576:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(37);var _=r(3184);var y=new b["b"]("message_pane_foreword");var O={onClick:v.a.func};var k={onClick:m.a.noop};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.onClick;return h.a.createElement(_["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:t},h.a.createElement(g["a"],{type:"pencil",inherit:true})," ",y.t("Set a purpose"))}}]);return t}(p["PureComponent"]);j.displayName="PurposeButton";j.defaultProps=k;t["a"]=j},1577:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.ui.channel_invite_modal.startInviteToChannelModal",n.a.noop)},1578:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});var a=r(10);var n=Object(a["c"])("TS.apps.permissions.areXoxaAppsInstalled",function(){return false});var i=Object(a["c"])("TS.apps.permissions.app_resource_membership_changed_sig.dispatch");var s=Object(a["c"])("TS.apps.permissions.app_wildcard_changed_sig.dispatch")},1579:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(21698);var b=r(5);var g=r(37);var _=r(3184);var y=r(3203);var O=r(1580);var k=r(91);var j=new b["b"]("message_pane_foreword");var C={botName:v.a.string};var E={botName:null};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(){Object(O["a"])("about");Object(k["b"])("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return h.a.createElement(_["a"],{type:"link",className:"p-message_pane__foreword__button",onClick:this.onClick},h.a.createElement(g["a"],{type:"lightbulb-o",inherit:true})," ",j.t("How does {name} work?",{name:t}))}}]);return t}(p["PureComponent"]);S.displayName="AppHelpButton";S.defaultProps=E;function w(e,t){var r=t.botId;var a=Object(m["getMemberById"])(e,r);if(!a)return{};var n=Object(y["g"])(a);return{botName:n}}t["a"]=Object(f["connect"])(w)(S)},158:function(e,t,r){var a=r(47);var n=r(407);var i=r(275);var s=r(241)("IE_PROTO");var o=function(){};var c="prototype";var l=function(){var e=r(273)("iframe");var t=i.length;var a="<";var n=">";var s;e.style.display="none";r(350).appendChild(e);e.src="javascript:";s=e.contentWindow.document;s.open();s.write(a+"script"+n+"document.F=Object"+a+"/script"+n);s.close();l=s.F;while(t--)delete l[c][i[t]];return l()};e.exports=Object.create||function e(t,r){var i;if(null!==t){o[c]=a(t);i=new o;o[c]=null;i[s]=t}else i=l();return void 0===r?i:n(i,r)}},1581:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(21697);var b=r(907);var g=r(5);var _=r(91);var y=r(149);var O=r(3184);var k=new g["b"]("message_pane_foreword");var j={channelType:v.a.string.isRequired,channelName:v.a.string};var C={channelName:""};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLearnMoreClick=r.clogLearnMoreClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(_["b"])("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"clogLearnMoreClick",value:function e(){Object(_["b"])("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}})}},{key:"render",value:function e(){var t=this.props,r=t.channelName,a=t.channelType;var n="";var i="";var s=void 0;"private"===a?s=r:"channel"===a&&(s="#"+r);if("mpim"===a||"im"===a){i=k.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");n=k.t("There\u2019s more to this conversation")}else{n=k.t("There\u2019s more to the conversation in {name}",{name:s});i=k.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}var o="/pricing?ui_step=42&ui_element="+this.getClogUiElementVal();return h.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},h.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},h.a.createElement(y["a"],{text:":speech_balloon:"})," ",n),h.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},i),h.a.createElement(O["a"],{href:o,onClick:this.clogLearnMoreClick,target:"_blank","data-qa":"learn_more_btn",size:"small"},k.t("Learn More")))}}]);return t}(p["PureComponent"]);E.displayName="LimitedHistoryForeword";E.defaultProps=C;function S(e,t){var r=t.channelId;var a=Object(m["getChannelById"])(e,r);if(!a)return{};return{channelType:Object(b["getChannelType"])(a),channelName:Object(b["getDisplayName"])(a)}}t["a"]=Object(f["connect"])(S)(E)},1582:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(8);var h=r.n(p);var f=r(265);var m=r(5);var b=new m["b"]("message_pane_foreword");var g="USLACKBOT";var _=v.a.createElement("h1",{className:"p-message_pane__foreword__title"},b.t("Hi, Slackbot here!"));var y=v.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},v.a.createElement(f["b"],{userId:g,size:48,className:"p-message_pane__foreword__avatar"}),v.a.createElement("div",null,v.a.createElement("p",null,b.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),v.a.createElement("p",{className:"margin_0"},b.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,r=e.text;return v.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},r)}))));var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=h()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return v.a.createElement("div",{className:t},_,y)}}]);return t}(d["Component"]);O.displayName="SlackbotForeword";t["a"]=O},1583:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(149);var h=r(5);var f=r(91);var m=new h["b"]("message_pane_foreword");var b=35;var g=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){Object(f["b"])("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:b}}})}},{key:"render",value:function e(){var t="/pricing?ui_step=42&ui_element="+b;return v.a.createElement("div",{className:"p-message_pane__limited_history_alert"},v.a.createElement(p["a"],{text:":speech_balloon:"}),"\xa0",m.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",v.a.createElement("a",{href:t,target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},m.t("Learn More")))}}]);return t}(d["PureComponent"]);g.displayName="LimitedHistoryAlert";t["a"]=g},1584:function(e,t,r){"use strict";r.d(t,"a",function(){return _});r.d(t,"b",function(){return y});var a=r(374);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(12159);var c=r.n(o);var l=r(45);var u=r(8);var d=r.n(u);var v=r(235);var p=r(399);var h=r(1009);var f={date:s.a.number.isRequired,isUnread:s.a.bool,ghost:s.a.bool};var m={isUnread:false,ghost:false};function b(e){var t=e.isUnread,r=n()(e,["isUnread"]);var a=t?c.a.createElement(h["a"],{ghost:r.ghost}):c.a.createElement("hr",{className:"c-message_list__day_divider__line"});return c.a.createElement("div",{className:"c-message_list__day_divider"},a)}b.displayName="DayDivider";b.defaultProps=m;function g(e){var t=e.date,r=e.sticky;var a=t/1e3;var n=Object(p["a"])(a,"{day_divider_pretty}");var i=Object(v["a"])(a,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var s=d()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!r});return c.a.createElement("div",{className:s,"aria-label":i},c.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}g.displayName="DayDividerLabel";g.defaultProps={sticky:true};var _=Object(l["pure"])(b);var y=Object(l["pure"])(g)},1588:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(37);var m=r(5);var b=r(147);var g=r(20187);var _=r.n(g);var y=new m["b"]("messages");var O={firstTimestamp:h.a.string.isRequired,lastTimestamp:h.a.string.isRequired,jumpToRecent:h.a.func.isRequired};var k={};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=Object(b["a"])(this.props.firstTimestamp,{shortenMonth:true});var r=Object(b["a"])(this.props.lastTimestamp,{shortenMonth:true});return v.a.createElement("div",{className:"p-archives_banner"},v.a.createElement("span",{className:"p-archives_banner__date_range"},y.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:r})),v.a.createElement("button",{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},y.t("Jump to recent messages"),v.a.createElement(f["a"],{type:"arrow_down"})))}}]);return t}(d["PureComponent"]);j.displayName="ArchivesBanner";t["a"]=j;j.defaultProps=k},159:function(e,t,r){var a=r(408);var n=r(275);e.exports=Object.keys||function e(t){return a(t,n)}},1590:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(3);var O=r.n(y);var k=r(1024);var j=r(5);var C=r(3184);var E=r(139);var S=new j["b"]("files");var w={status:O.a.oneOf([k["IDLE"],k["UPLOADING"],k["COMPLETE"],k["CANCELED"]]),fileName:O.a.string,percentComplete:O.a.number,cancelable:O.a.bool,cancelUpload:O.a.func,isRetry:O.a.bool};var I={fileName:"",percentComplete:0,status:k["UPLOADING"],cancelable:false,cancelUpload:h.a.noop,isRetry:false};var T=function(e){v()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=S.t("Processing uploaded file\u2026 complete!");return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},m.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){s()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.cancel=r.cancel.bind(r);r.clearOverrides=r.clearOverrides.bind(r);r.doneProlongingStatus=r.doneProlongingStatus.bind(r);r.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return r}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=[k["COMPLETE"],k["CANCELED"]];this.props.status!==t.status&&h.a.includes(a,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(r.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var r=this.state.statusOverride;return r||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var r=this.state.fileNameOverride;return r||t}},{key:"cancel",value:function e(){var t=this;setTimeout(function(){t.props.cancelUpload()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===k["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderCanceled",value:function e(){var t=this.getFileName();var r=S.t("Canceling {fileName}\u2026",{fileName:t});return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},m.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderUploading",value:function e(){var t=this.props,r=t.fileName,a=t.percentComplete,n=t.cancelable,i=t.isRetry;var s=a>=99;var o=void 0;if(s)o=S.t("Processing uploaded file\u2026");else{o=i?S.t("Re-uploading {fileName}",{fileName:r}):S.t("Uploading {fileName}",{fileName:r});o+="\u2026"+a+"%"}var c=_()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":s});var l={width:a+"%"};var u=null;n&&!s&&(u=m.a.createElement(C["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},S.t("cancel")));return[m.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},m.a.createElement("span",{className:c,style:l})),m.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},o),u]}},{key:"render",value:function e(){var r=this.getStatus();var a=this.state.fading;if(r===k["IDLE"])return null;var n=void 0;n=r===k["UPLOADING"]?this.renderUploading():r===k["COMPLETE"]?t.renderComplete():this.renderCanceled();var i=_()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return m.a.createElement("div",{className:i},n)}}]);return t}(f["PureComponent"]);T.displayName="FileUploadBanner";T.defaultProps=I;function N(e){var t=Object(k["getFileUploadState"])(e);return n()({},t,{cancelUpload:E["a"]})}t["a"]=Object(b["connect"])(N)(T)},1591:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(43);var O=r(21697);var k=r(54);var j=r(37);var C=r(60);var E=r(1008);var S=r(5);var w=r(147);var I=r(128);var T=r(290);var N=r(211);var R=r(3184);var A=r(3181);var M=r(168);var P=r(3044);var x=new S["b"]("messages");var D=3e3;var F=100;var L={hasUnreads:v.a.bool.isRequired,displayCount:v.a.number,since:v.a.oneOfType([v.a.string,v.a.number]),known:v.a.bool,do24hrTime:v.a.bool,channelId:v.a.string,ghost:v.a.bool,unreadPlacement:v.a.oneOf(Object(g["values"])(E["a"])),jumpToUnread:v.a.func,markMostRecentMsgRead:v.a.func,featureJumpToUnreadShortcut:v.a.bool};var B={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:E["a"].VISIBLE,jumpToUnread:g["noop"],markMostRecentMsgRead:g["noop"],featureJumpToUnreadShortcut:false};var U=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.startFade=r.startFade.bind(r);r.onAnimationTick=r.onAnimationTick.bind(r);r.onAnimationEnd=r.onAnimationEnd.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.jumpOrMark=r.jumpOrMark.bind(r);r.markAsRead=r.markAsRead.bind(r);r.animation=null;r.delay=null;r.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){clearTimeout(this.delay);if(this.state.hasUnreads&&!t.hasUnreads){if(t.ghost){this.delay=setTimeout(this.startFade,D);return}this.startFade();return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.delay);this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:r}});a()}},{key:"onAnimationEnd",value:function e(){this.setState(function(){return{hasUnreads:false,opacity:1}})}},{key:"onKeyDown",value:function e(t){var r=[A["c"],A["h"]];Object(g["includes"])(r,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(){this.animation=Object(T["a"])({fromValue:1,toValue:0,duration:F,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(y["action"])("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:N["MARKED_REASONS"].CLICKED});clearTimeout(this.delay);this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===E["a"].VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return x.t("Jump");if(!Object(M["a"])())return x.t("Jump");var t=Object(P["isMac"])()?x.t("Cmd"):x.t("Ctrl");return x.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,r=e.key;return h.a.createElement("span",{key:r,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!this.props.featureJumpToUnreadShortcut)return;if(!Object(M["a"])())return;var t=Object(P["isMac"])()?x.t("Cmd"):x.t("Ctrl");return x.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===E["a"].VISIBLE)return null;var r=t===E["a"].ABOVE?"arrow_up":"arrow_down";var a=this.makeJumpLabel();var n=this.makeJumpAriaLabel();return h.a.createElement(R["c"],{ariaLabel:n,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},h.a.createElement(j["a"],{type:r,className:"p-message_pane__unread_banner__jump__arrow"}),a)}},{key:"renderClose",value:function e(){var t=b()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==E["a"].VISIBLE});return h.a.createElement(C["d"],{tip:x.t("Mark as read (esc)"),position:"bottom-right"},h.a.createElement(R["c"],{className:t,onClick:this.markAsRead,ariaLabel:x.t("Mark as read")},h.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},x.t("Mark as read")),h.a.createElement(j["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,r=t.hasUnreads,a=t.since,n=t.displayCount;var i=this.props,s=i.do24hrTime,o=i.known;if(!r||!a)return null;var c=Math.floor(parseFloat(a));if(!c)return null;var l=Object(w["a"])(c,{excludeYear:true});var u=Object(I["a"])(c,{do24hrTime:s});var d=o?"":"+";var v=n;!o&&v>10&&(v=10*Math.floor(v/10));var p=x.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:d,count:v,time:u,date:l});v&&(1!==v||o)||(p=x.t("New messages since {time} on {date}",{time:u,date:l}));return h.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},h.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),h.a.createElement(R["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},p)),this.renderClose())}}]);return t}(p["PureComponent"]);U.displayName="UnreadBanner";U.defaultProps=B;var q=function e(t,r){var a=r.since;if("0000000000.000000"===a){var n=Object(O["getChannelById"])(t,r.channelId);a=n.created}return{do24hrTime:Object(k["getUserPref"])(t,"time24"),since:a}};t["a"]=Object(f["connect"])(q)(U)},1592:function(e,t,r){"use strict";t["d"]=A;r.d(t,"h",function(){return M});t["f"]=x;t["e"]=D;t["i"]=F;t["g"]=L;r.d(t,"a",function(){return B});r.d(t,"c",function(){return U});r.d(t,"b",function(){return W});var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21700);var v=r(43);var p=r(21721);var h=r(21696);var f=r(268);var m=r(1068);var b=r(21742);var g=r(12);var _=r(3270);var y=r(21711);var O=r(21714);var k=r(21726);var j=r(907);var C=r(54);var E=r(21805);var S=r(21743);var w=r(139);var I=r(21725);var T=2;var N=1e4;var R=Object(h["b"])("Fetch search data for a specific module (messages, files, etc.)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.module,i=r.query,o=r.page,c=void 0===o?1:o,l=s()(r,["module","query","page"]);var u=t();Object(E["f"])(a,l&&l.sort||"unknown",c);var v=Object(f["getQuerySessionId"])(u);var p=Object(f["getSearchSessionId"])(u);return e(Object(d["a"])({method:"search.modules",args:n()({module:a,query:i,page:c,client_req_id:v,search_session_id:p,extracts:1,highlight:1,max_extract_len:200,extra_message_data:1,no_user_profile:1},l)})).timeout(N).then(function(e){Object(E["g"])(a,l&&l.sort||"unknown",c);return e})});R.propTypes={module:c.a.string.isRequired,query:c.a.string.isRequired,page:c.a.number};function A(e,t){return Object(d["c"])("search.autocomplete",{query:e,limit:t})}var M=Object(h["e"])("Precache visibility filters for this user before they kick off a search",function(e,t){var r=t();var a=Object(g["pageNeedsEnterprise"])(r);var n=Object(g["getFromBootData"])(r,"enterprise_api_token");return Object(d["c"])("search.precache",a&&n?{enterprise_token:n}:{})});M.propTypes={};function P(e,t){return Object(d["c"])("search.autocomplete.data",{query:e,limit:t})}function x(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;return Object(d["c"])("search.autocomplete.querySuggestions",{limit:e,version:t,return_experts:r?1:0,new_scale:true,query_batch_min:a,query_batches:n})}function D(e,t){return Object(d["c"])("search.autocomplete.fileSuggestions",{limit:e,version:t})}function F(e){return Object(d["c"])("search.save",{terms:e}).catch(function(e){return Object(v["error"])(e)}).finally(function(){k["n"].flushAll()})}function L(e,t,r){return Object(d["c"])("search.delete",{terms:e,search_session_id:t,client_request_id:r}).catch(function(e){return Object(v["error"])(e)}).finally(function(){k["n"].flushAll()})}var B=Object(h["e"])("Fetch page 1 of all search results for a given query and filters",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query,i=r.fetchSuggestions,s=void 0!==i&&i;var o=t();var c=Object(p["a"])();e(Object(m["setLastFetchAllRequestId"])({id:c}));e(Object(f["resetScrollPosition"])());e(Object(f["setStateForModule"])({moduleType:S["a"].relevantMessages,moduleState:{loading:true,page:1,error:f["MODULE_ERROR_STATE"].None}}));e(Object(f["setStateForModule"])({moduleType:S["a"].recentMessages,moduleState:{loading:true,page:1,error:f["MODULE_ERROR_STATE"].None}}));e(Object(f["setStateForModule"])({moduleType:"files",moduleState:{loading:true,page:1,error:f["MODULE_ERROR_STATE"].None}}));if(s){e(Object(m["clearFilterSuggestions"])());e(Object(f["setLoadingModule"])({moduleType:"suggestions",loading:true}))}e(R(n()({module:"messages",query:a,sort:"score"},G(o)))).then(function(r){if(V(t(),c)){var a=t();e(Object(m["setResponse"])({query:r.query,module:S["a"].relevantMessages,result:r}));e(Object(m["setEditableRequestQueryFilterOnly"])({queryFilter:K(a,r.filters)}));e(Object(f["setLoadingModule"])({moduleType:S["a"].relevantMessages,loading:false}));q(r.items);if(s){var i=z(a,r.filter_suggestions);Object(l["isEmpty"])(i.channelObjects)||e(Object(m["setEditableRequestChannelObjects"])({channels:n()({},Object(m["getEditableRequestChannelObjects"])(a),i.channelObjects)}));e(Object(m["setFilterSuggestions"])({suggestions:Object(l["omit"])(i,"channelObjects")}));e(Object(f["setLoadingModule"])({moduleType:"suggestions",loading:false}))}}}).catch(Promise.TimeoutError,function(){e(Object(f["setErrorForModule"])({moduleType:S["a"].relevantMessages,error:f["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(t){Object(v["error"])(t);e(Object(f["setErrorForModule"])({moduleType:S["a"].relevantMessages,error:f["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(R(n()({module:"messages",query:a,sort:"timestamp"},G(o)))).then(function(r){if(V(t(),c)){e(Object(m["setResponse"])({query:r.query,module:S["a"].recentMessages,result:r}));e(Object(m["setEditableRequestQueryFilterOnly"])({queryFilter:K(o,r.filters)}));e(Object(f["setLoadingModule"])({moduleType:S["a"].recentMessages,loading:false}));q(r.items)}}).catch(Promise.TimeoutError,function(){e(Object(f["setErrorForModule"])({moduleType:S["a"].recentMessages,error:f["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(t){Object(v["error"])(t);e(Object(f["setErrorForModule"])({moduleType:S["a"].recentMessages,error:f["MODULE_ERROR_STATE"].Unknown,loading:false}))});e(R(n()({module:"files",query:a},G(o)))).then(function(r){if(V(t(),c)){e(Object(m["setResponse"])({query:r.query,module:"files",result:r}));e(Object(m["setEditableRequestQueryFilterOnly"])({queryFilter:K(o,r.filters)}));e(Object(f["setLoadingModule"])({moduleType:"files",loading:false}));if(r&&r.items&&r.items.length){var a=r.items;a.map(function(e){return Object(w["s"])(Object(l["omit"])(e,["search_title","iid","search_preview"])).file})}}}).catch(Promise.TimeoutError,function(){e(Object(f["setErrorForModule"])({moduleType:"files",error:f["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(t){Object(v["error"])(t);e(Object(f["setErrorForModule"])({moduleType:"files",error:f["MODULE_ERROR_STATE"].Unknown,loading:false}))})});B.propTypes={query:c.a.string.isRequired};var U=Object(h["e"])("fetch search results by module",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.module,i=r.query,o=r.page,c=void 0===o?1:o,u=s()(r,["module","query","page"]);var d=t();e(Object(f["setStateForModule"])({moduleType:a,moduleState:{loading:true,page:c,error:f["MODULE_ERROR_STATE"].None}}));e(R(n()({module:u&&u.apiModule||a,query:i,page:c},G(d),u))).then(function(t){if(1===c){e(Object(m["setResponse"])({query:t.query,module:a,result:t}));e(Object(m["setEditableRequestQueryFilterOnly"])({queryFilter:K(d,t.filters)}))}else e(Object(m["appendResponse"])({module:a,result:t,page:c}));e(Object(f["setLoadingModule"])({moduleType:a,loading:false}));if("files"===a&&t&&t.items&&t.items.length){var r=t.items;r.map(function(e){return Object(w["s"])(Object(l["omit"])(e,["search_title","iid","search_preview"])).file})}else"messages"===a&&q(t.items)}).catch(Promise.TimeoutError,function(){e(Object(f["setErrorForModule"])({moduleType:a,error:f["MODULE_ERROR_STATE"].Timeout,loading:false}))}).catch(function(t){Object(v["error"])(t);e(Object(f["setErrorForModule"])({moduleType:S["a"].relevantMessages,error:f["MODULE_ERROR_STATE"].Unknown,loading:false}))})});U.propTypes={module:c.a.string,query:c.a.string.isRequired,page:c.a.number};function q(e){var t=[];e.forEach(function(e){e.messages.forEach(function(e){e.files&&e.files.length&&e.files.forEach(function(e){return t.push(e)})})});t.map(function(e){return Object(w["s"])(Object(l["omit"])(e,["search_title","iid","search_preview"])).file})}var H=5;var W=Object(h["e"])("Fetch the list of suggestions from search autocomplete",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=t();Object(E["c"])();return Object(k["q"])(n,a,H,Object(k["l"])(n)).then(function(r){Object(E["d"])();var a=t();e(Object(b["setSearchAutocompleteSuggestions"])({suggestions:Object(k["p"])(a,r,Object(I["getSearchInputBoxDisplayQuery"])(a))}))})});W.propTypes={query:c.a.string.isRequired};function G(e){var t=Object(g["pageNeedsEnterprise"])(e);var r=Object(m["getRequest"])(e)||{},a=r.queryFilterHistory;var n={max_filter_suggestions:10,request_context:JSON.stringify({active_cid:Object(O["getPrimaryView"])(e),recent_filter_in:a.in,recent_filter_from:a.from})};if(t){n.enterprise_token=Object(g["getFromBootData"])(e,"enterprise_api_token");n.team=Object(_["getTeamId"])(e)}return n}function V(e,t){return Object(m["getLastFetchAllRequestId"])(e)===t}function z(e,t){var r={};var a=Object(_["getTeamId"])(e);var n=Object(l["split"])(Object(C["getUserPref"])(e,"search_exclude_channels")||"",",");var i=Object(m["getRequest"])(e)||{},s=i.queryFilter,o=i.queryFilterHistory;var c=s||{from:[],in:[]},u=c.from,d=c.in;var v=Object(y["e"])(e,Object(O["getPrimaryView"])(e));var p=Object(j["getMemberIdFromIm"])(v)||v&&v.id;var h=Object(g["getCurrentUserId"])(e);var f=Object(l["chain"])([]).concat(h).concat(Object(l["chain"])(t.from).filter(function(e){return!e.checked&&e.id!==h}).map("id").take(T).value()).concat(o.from).concat(u).uniq().value();var b=Object(l["chain"])([]).concat(p||[]).concat(Object(l["chain"])(t.in).filter(function(e){return!e.checked&&e.id!==p}).take(T).tap(function(t){if(!Object(g["pageNeedsEnterprise"])(e))return;t.forEach(function(e){if(Object(j["isIm"])(e))return;e.channel.teams&&-1===e.channel.teams.indexOf(a)&&(r[e.channel.id]=e.channel)})}).map("id").value()).concat(o.in||[]).concat(d||[]).uniq().difference(n).value();return{from:f,in:b,channelObjects:r}}function K(e,t){return{from:t.from||[],in:t.in||[],before:t.before||void 0,after:t.after||void 0,fileType:t.file_types&&t.file_types[0]||void 0}}},1593:function(e,t,r){"use strict";t["a"]=E;var a=r(1);var n=r.n(a);var i=r(295);var s=r(3031);var o=r(21732);var c=r(3182);var l=r(3270);var u=r(49);var d=r(22202);var v=r(21701);var p=r(21717);var h=r(21708);var f=r(22203);var m=r(22206);var b=r(22008);var g=r(22010);var _=r(21699);var y=r(21847);var O=r(21849);var k=r(21848);var j=r(21719);var C=Object(p["a"])(100);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.reducers,n=void 0===r?m:r,p=e.middlewares,_=void 0===p?b["a"]:p,y=e.customEnhancers,O=void 0===y?g["a"]:y,k=e.initialState,j=void 0===k?{}:k;if(!t)throw new Error("configureStore must be called with a teamId parameter");var E=Object(f["a"])({teamId:t,customEnhancers:O,middlewares:_});var S=Object(i["combineReducers"])(n);var w=void 0;if(Object(v["a"])()){var I=Object(d["c"])(t);S=Object(s["persistReducer"])(I,S);w=Object(s["createPersistoid"])(I)}var T=Object(i["createStore"])(S,j,E);Object(v["a"])()&&T.subscribe(Object(a["throttle"])(function(){Object(u["a"])(t,Object(c["info"])(d["d"],"Persisting state to storage"));C&&Object(h["d"])(d["a"]+"_persistence_write_mark");var e=void 0;w.update(T.getState());if(C){e=Object(h["f"])(d["a"],d["a"]+"_persistence_write_mark");Object(u["a"])(t,Object(c["info"])(d["d"],"Persisted state"+(e?": "+e.toFixed(1)+"ms":"")))}},d["b"]));T._initStore=function e(){T.dispatch(Object(l["setTeamId"])(t))};T._initStore();Object(u["d"])(t,T);Object(o["c"])(t,"redux",T);return T}var S=void 0;Object(o["b"])("redux",function(){if(S)return S;var e=function e(t,r){var n=t.replace("@slack/redux/","").replace(/\.js$/,"").replace(/-middleware$/,"").replace(/\//,"_");return Object(a["camelCase"])(n+"_"+r)};var t=function t(r){var a={};Object.values(r).forEach(function(t){a[e(t.meta.file,t.meta.name)]=t});return a};var r=function e(t){var r={};Object.values(t).forEach(function(e){r[e.meta.name]=e});return r};S={actions:t(Object(y["a"])()),middlewares:r(Object(j["a"])()),reducers:t(Object(k["a"])()),selectors:t(Object(O["a"])()),thunks:t(Object(_["a"])())};return S})},1594:function(e,t,r){"use strict";t.__esModule=true;function a(e){return function(t){var r=t.dispatch,a=t.getState;return function(t){return function(n){if("function"===typeof n)return n(r,a,e);return t(n)}}}}var n=a();n.withExtraArgument=a;t["default"]=n},1597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"noopAction",function(){return s});var a=r(20615);var n=r.n(a);var i=r(21696);var s=Object(i["a"])("NOOP");s.propTypes=null;var o=0;var c=Object(i["c"])(n()({},s,function(e){return e+1}),o);t["default"]=c},160:function(e,t,r){var a=r(105);var n=Math.max;var i=Math.min;e.exports=function(e,t){e=a(e);return e<0?n(e+t,0):i(e,t)}},1601:function(e,t,r){"use strict";var a=r(12);var n=r(124);var i=r(21714);var s=r(21697);var o=r(21698);var c=r(907);var l=r(908);var u=r(88);function d(e,t){if(!Object(c["isIm"])(e))return false;var r=Object(o["getMemberById"])(t(),Object(c["getMemberIdFromIm"])(e));return r&&r.deleted}function v(e){return Object(c["isPublicChannel"])(e)&&!Object(c["isMemberOfChannel"])(e)}function p(e,t){Object(l["c"])();(v(e)||Object(c["isArchived"])(e)||d(e,t))&&Object(l["a"])(e)}function h(e,t,r){var n=r();if(!Object(a["useReactMessages"])(n))return;var o=Object(i["getPrimaryView"])(n);var c=Object(s["getChannelById"])(n,o);if(!c)return;p(c,r)}function f(e,t,r){var n=r();if(!Object(a["useReactMessages"])(n))return;var o=Object(i["getPrimaryView"])(n);var c=false;var l=e&&e.payload&&e.payload.channels;if(!l||!l.length)return;l.forEach(function(e){e&&e.id===o&&(c=true)});if(!c)return;var u=Object(s["getChannelById"])(n,o);if(!u)return;p(u,r)}function m(e,t,r){var n=r();if(!Object(a["useReactMessages"])(n))return;var o=e.payload;var l=Object(i["getPrimaryView"])(n);var u=Object(s["getChannelById"])(n,l);var d=Object(c["getMemberIdFromIm"])(u);if(!u||!Object(c["isIm"])(u)||!d)return;d===o.id&&p(u,r)}Object(u["b"])({actions:[n["setActiveChannel"]],sideEffect:h});Object(u["b"])({actions:[o["addMember"]],sideEffect:m});Object(u["b"])({actions:[s["addOrReplaceChannels"]],sideEffect:f,reasons:[s["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,s["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,s["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL,s["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL,s["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL]})},1602:function(e,t,r){"use strict";var a=r(85);var n=r(1027);var i=r(21701);var s=r(88);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(Object(i["a"])())return;Object(n["c"])(a,t)}function c(e,t,r){if(Object(i["a"])())return;Object(n["d"])(r)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(Object(i["a"])())return;Object(n["e"])(a,t)}Object(s["a"])([{actions:[a["connected"]],sideEffect:o},{actions:[a["disconnected"]],sideEffect:c},{actions:[a["socketMessageReceived"]],sideEffect:l}])},1603:function(e,t,r){"use strict";var a=r(191);var n=r(1604);var i=r(88);function s(e,t,r){var i=r();Object(n["d"])(Object(a["getExpandables"])(i))}Object(i["b"])({actions:[a["setExpanded"],a["bulkSetExpanded"]],sideEffect:s})},1605:function(e,t,r){"use strict";var a=r(85);var n=r(1606);var i=r(88);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(n["a"])(t)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(n["c"])(t)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(n["d"])(t)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(n["e"])(t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(n["g"])(t)}function d(){n["b"].apply(void 0,arguments)}function v(){n["f"].apply(void 0,arguments)}Object(i["a"])([{actions:[a["connected"]],sideEffect:s},{actions:[a["disconnected"]],sideEffect:d},{actions:[a["provisionallyConnected"]],sideEffect:o},{actions:[a["socketErrorMessageReceived"]],sideEffect:c},{actions:[a["socketMessageReceived"]],sideEffect:l},{actions:[a["troubleConnecting"]],sideEffect:v},{actions:[a["waitingForRateLimit"]],sideEffect:u}])},1606:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});r.d(t,"d",function(){return o});r.d(t,"e",function(){return c});r.d(t,"f",function(){return l});r.d(t,"g",function(){return u});var a=r(10);var n=Object(a["c"])("TS.redux.socket.connectedSig.dispatch");var i=Object(a["c"])("TS.redux.socket.disconnectedSig.dispatch");var s=Object(a["c"])("TS.redux.socket.provisionallyConnectedSig.dispatch");var o=Object(a["c"])("TS.redux.socket.socketErrorMessageReceivedSig.dispatch");var c=Object(a["c"])("TS.redux.socket.socketMessageReceivedSig.dispatch");var l=Object(a["c"])("TS.redux.socket.troubleConnectingSig.dispatch");var u=Object(a["c"])("TS.redux.socket.waitingForRateLimitSig.dispatch")},1609:function(e,t,r){"use strict";var a=r(21697);var n=r(3273);var i=r(21702);var s=r(12);var o=r(85);var c=r(124);var l=r(21714);var u=r(21745);var d=r(1036);var v=r(907);var p=r(21701);var h=r(3088);var f=r(88);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var i=a();if(!Object(s["useReactMessages"])(i))return;if(t)return;var c=Object(o["isFirstConnection"])(i);if(c&&!Object(p["a"])())return;if(Object(p["a"])()&&false===navigator.onLine)return;r(Object(n["resetReachedEnd"])())}function b(e,t,r){var a=r();if(!Object(s["useReactMessages"])(a))return;var i=e.payload,o=i.channelId,c=i.append;var u=Object(l["getPrimaryView"])(a);if(!c)return;o!==u&&t(Object(n["truncateChannelHistory"])({channelId:o}))}function g(e,t,r){var i=r();if(!Object(s["useReactMessages"])(i))return;var o=e.payload.prevChannelId;if(!o)return;var c=Object(l["getPrimaryView"])(i);if(c===o)return;var p=Object(a["getChannelById"])(i,o);if(!p)return;var f=Object(a["getChannelById"])(i,c);if(f&&Object(v["isPublicChannel"])(f)&&!Object(v["isMemberOfChannel"])(f)&&Object(s["isFeatureEnabled"])(i,"feature_lazy_channels")){var m=[c];t(Object(d["e"])({ids:m})).then(function(){return Object(h["b"])()})}else if(f&&Object(v["isPublicChannel"])(f)&&!Object(v["isMemberOfChannel"])(f)){var b="message-history/onChannelChange";t(Object(d["i"])({channelId:c,noMembers:true,reason:b})).then(function(e){if(!e||!e.channel)return;t(Object(u["F"])({channel:e.channel}));Object(h["b"])()})}Object(v["isArchived"])(p)||Object(v["isPublicChannel"])(p)&&!Object(v["isMemberOfChannel"])(p)?t(Object(n["removeAllTimestamps"])({channelId:o})):t(Object(n["truncateChannelHistory"])({channelId:o}))}function _(e,t,r){var a=r();if(!Object(s["useReactMessages"])(a))return;var i=e&&e.payload&&e.payload.channels;if(!i||!i.length)return;i.forEach(function(e){if(!e)return;t(Object(n["removeAllTimestamps"])({channelId:e.id}))})}function y(e,t,r){var o=void 0;e.type===a["removeChannels"].getType()?o=e&&e.payload&&e.payload.ids:e.type===u["p"].getType()&&(o=[e&&e.payload&&e.payload.id]);if(!o||!o.length)return;var c=r();if(!Object(s["useReactMessages"])(c))return;o.forEach(function(e){if(!e)return;t(Object(n["removeAllTimestamps"])({channelId:e}));t(Object(i["removeAllMessages"])({channelId:e}))})}Object(f["b"])({actions:[n["addTimestamps"]],sideEffect:b});Object(f["b"])({actions:[c["setActiveChannel"]],sideEffect:g});Object(f["b"])({actions:[a["addOrReplaceChannels"]],sideEffect:_,reasons:[a["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL,a["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]});Object(f["b"])({actions:[a["removeChannels"],u["p"]],sideEffect:y});Object(f["b"])({actions:[o["connected"]],sideEffect:m})},161:function(e,t,r){var a=r(61).f;var n=r(81);var i=r(53)("toStringTag");e.exports=function(e,t,r){e&&!n(e=r?e:e.prototype,i)&&a(e,i,{configurable:true,value:t})}},1612:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(3274);var c=r(124);var l=r(12);var u=r(21697);var d=r(883);var v=r(3201);var p=r(88);function h(e){Object(v["a"])(e.payload);Object(d["c"])(e.payload)}function f(e,t,r){if(!e.payload.prevChannelId||e.payload.channelId===e.payload.prevChannelId)return;var a=r();if(!Object(l["useReactMessages"])(a))return;var i=false;var c=Object(u["getChannelById"])(a,e.payload.prevChannelId,i);if(!c||!c.last_read)return;var d=Object(o["getHighlightedTimestampsPriorToTimestamp"])(a,{channelId:e.payload.prevChannelId,beforeTs:c.last_read});if(!d.length)return;var v=s.a.reduce(d,function(e,t){e[t]={sliHighlight:{isHighlight:false}};return e},{});t(Object(o["setHighlightsForMessages"])(n()({},e.payload.prevChannelId,v)))}Object(p["b"])({actions:[o["setFeedbackForHighlight"]],sideEffect:h});Object(p["b"])({actions:[c["setActiveChannel"]],sideEffect:f})},1614:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21714);var u=r(774);var d=r(12);var v=r(376);var p=r(85);var h=r(21697);var f=r(3273);var m=r(21702);var b=r(21698);var g=r(54);var _=r(284);var y=r(3270);var O=r(21877);var k=r(377);var j=r(1615);var C=r(903);var E=r(1036);var S=r(1007);var w=r(907);var I=r(43);var T=r(21708);var N=r(1616);var R=r(282);var A=r(93);var M=r(21984);var P=r(2215);var x=r(21701);var D=r(88);var F=r(1025);function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.channel,a=e.messages,n=e.userIsAway,i=e.userPresenceLastChanged,s=e.currentUserId,o=e.highlightWords;var c=0;var l=0;a.forEach(function(e){if(!e)return;if(Object(S["isMessageUnread"])(e,Object(w["getLastReadTs"])(r),s)){c+=1;Object(S["shouldMessageBadgeChannel"])({msg:e,channel:r,currentUserId:s,userIsAway:n,userPresenceLastChanged:i,highlightWords:o,isAppMsg:Object(S["isAppMessage"])(t,e),featureWtaNotifications:Object(d["isFeatureEnabled"])(t,"feature_wta_notifications")})&&(l+=1)}});return{unreadCnt:c,unreadHighlightCnt:l}}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,r=e.start,a=e.reachedStart,n=e.reachedEnd,i=e.initialCounts,s=e.messages,o=e.channel,c=e.currentUser,l=e.userIsAway,u=e.userPresenceLastChanged,d=e.highlightWords;var v=0;var p=0;var h=true;if(n){var f=L({state:t,channel:o,messages:s,userIsAway:l,userPresenceLastChanged:u,currentUserId:c.id,highlightWords:d});v=f.unreadCnt;p=f.unreadHighlightCnt;if(r<=Object(w["getLastReadTs"])(o))h=false;else{i&&v<i.unreadCnt&&(v=i.unreadCnt);i&&p<i.unreadHighlightCnt&&(p=i.unreadHighlightCnt);h=s.length<42&&!a}}else if(i){v=i.unreadCnt;p=i.unreadHighlightCnt}return{unreadCnt:v,unreadHighlightCnt:p,needFetch:h}}function U(e){if(!e.was_archived_this_session){if(Object(w["isArchived"])(e))return false;if(Object(w["isPublicChannel"])(e)&&!Object(w["isMemberOfChannel"])(e))return false}return true}function q(e,t,r){var a=r();Object(d["isFeatureEnabled"])(a,"feature_tinyspeck")&&Object(T["d"])("rmsgs_updateUnreadCounts");var n=false;var i=Object(h["getChannelById"])(a,e,n);if(!i)return true;if(!U(i))return true;var s=Object(f["getTimestampsByChannelId"])(a,e,null),o=s.timestamps,l=s.start,u=s.reachedStart,p=s.reachedEnd;var _=Object(O["getInitialUnreadCountsByChannelId"])(a,e);var y=c.a.map(o||[],function(e){return Object(m["getMessageByTimestamp"])(a,i.id,e)});var k=Object(b["getCurrentMember"])(a);var j="away"===Object(v["getPresenceByMemberId"])(a,k.id);var C=k._presence_last_changed||Object(d["getFromBootData"])(a,"start_ms");var E=B({state:a,start:l,reachedStart:u,reachedEnd:p,initialCounts:_,messages:y,channel:i,currentUser:k,userIsAway:j,userPresenceLastChanged:C,highlightWords:Object(g["getUserHighlightWords"])(a)}),S=E.unreadCnt,I=E.unreadHighlightCnt,N=E.needFetch;if(S!==Object(w["getUnreadCount"])(i)){ie("Updated unread_cnt for "+i.id+": "+S);t(Object(h["updateOneKeyForChannel"])({id:i.id,unread_cnt:S}))}if(I!==i.unread_highlight_cnt){ie("Updated unread_highlight_cnt for "+i.id+": "+I);t(Object(h["updateOneKeyForChannel"])({id:i.id,unread_highlight_cnt:I}))}Object(d["isFeatureEnabled"])(a,"feature_tinyspeck")&&Object(T["f"])("rmsgs_updateUnreadCounts","rmsgs_updateUnreadCounts");return!N}var H={};function W(e){H[e]||G(e);return H[e]}function G(e){H[e]={}}var V={};function z(e){V[e]||(V[e]={});return V[e]}function K(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unread-counts/fetchHistoryForCounting";var i=r();var s=Object(y["getTeamId"])(i);var o=W(s);if(o[e.id]){Object(I["warn"])("Ignoring new unread counting history request for "+e.id);return}var l=z(s);var d=l[e.id];if(d){if(!a||!c.a.isNumber(d)){ie("Dropping unread history request for "+e.id+" since there is already one pending");return}ie("Cancelling timer and making history request for "+e.id+" now");clearTimeout(l[e.id])}var v=a?0:c.a.random(2500,1e4);ie("Fetching history for unread counting: "+e.id+", waiting "+v+" ms");l[e.id]=setTimeout(function(){var i=!a&&q(e.id,t,r);if(i){delete l[e.id];return}Object(I["info"])("HISTORY-FETCH","Fetching history for unread counting: "+e.id);l[e.id]=t(Object(C["b"])({channelId:e.id,type:Object(w["getChannelType"])(e),oldest:null,latest:null,reason:n})).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.msgs,n=r.hasMore,i=r.pinCount;o[e.id]=true;var s=c.a.map(a,"ts");t(Object(u["a"])({msgs:a,channelId:e.id,latest:c.a.max(s),oldest:c.a.min(s),hasMore:{hasMoreStart:n,hasMoreEnd:false},forceUnreadCount:true}));c.a.isNumber(i)&&t(Object(_["updatePinCount"])({channelId:e.id,count:i}))}).finally(function(){delete l[e.id]})},v)}function Q(e,t,r){var a=[];var n=r();var i={};var s=[];var o=Object(d["isFeatureEnabled"])(n,"feature_fetch_missing_channels_in_unread_counts");e.forEach(function(e){var t=Object(h["getChannelById"])(n,e.id,o);if(!t||Object(w["isNonExistent"])(t)){Object(R["d"])({id:e.id,has_unreads:e.has_unreads||!!e.dm_count||!!e.unread_count_display,nonExistent:Object(w["isNonExistent"])(t)},"updateWithCountsFromApi_missing_channel");return}o&&Object(w["isUnknown"])(t)&&Object(I["warn"])("Unknown channel "+t.id+" in updateWithCountsFromApi");if(Object(w["isArchived"])(t))return;if(Object(w["isPublicChannel"])(t)&&!Object(w["isMemberOfChannel"])(t))return;var r={};var l=e.latest;l&&l!==t.latest&&!Object(P["a"])("flannel_start_latest")&&(r.latest=l);var u=Object(f["getTimestampsByChannelId"])(n,t.id),v=u.timestamps,p=u.reachedEnd;var m=Object(d["isFeatureEnabled"])(n,"feature_never_skip_unread_counts");if(m||!p||c.a.isEmpty(v)){var b=e.has_unreads;var g=b?1:0;var _=0;var y=0;var O=false;if(Object(w["isIm"])(t))_=e.dm_count||g;else if(Object(w["isMpim"])(t))_=e.unread_count_display||g;else{O=true;_=g;y=e.mention_count_display||0}if(!_&&y){Object(I["warn"])("Ignoring positive mention_count_display because has_unreads == false for "+t.id);y=0}i[t.id]={unreadCnt:_,unreadHighlightCnt:y};var k=m&&p;if(k)s.push(t.id);else{_!==Object(w["getUnreadCount"])(t)&&(r.unread_cnt=_);O&&y!==t.unread_highlight_cnt&&(r.unread_highlight_cnt=y)}}else Object(I["info"])("UNREAD-COUNTS","Skipped "+t.id+" in updateWithCountsFromApi. reachedEnd: "+p+", timestamps: "+(v&&v.length));if(!c.a.isEmpty(r)){r.id=t.id;a.push(r)}});c.a.isEmpty(a)||t(Object(h["bulkUpdateChannels"])({channels:a}));t(Object(O["setInitialUnreadCounts"])(i));s.forEach(function(e){q(e,t,r)})}var Y={};function J(e){Y[e]||(Y[e]={});return Y[e]}function Z(e,t,r){var a=e.id;var n=J(Object(y["getTeamId"])(r()));if(n[a]){ie("Ignoring redundant initial count sync request for "+e.id);return}n[a]=true;var i=c.a.random(2500,1e4);ie("Syncing initial counts for "+e.id+" in "+i+" ms");setTimeout(function(){t(Object(E["g"])({channelId:a})).then(function(r){var n=r.has_unreads?1:0;var i=c.a.isNumber(r.mention_count)?r.mention_count:0;var s=Object(w["isIm"])(e)||Object(w["isMpim"])(e)?i:n;t(Object(O["setInitialUnreadCountsForChannel"])({channelId:a,unreadCnt:s,unreadHighlightCnt:i}))}).finally(function(){delete n[a]})},i)}function X(e,t,r){var a=r();if(!Object(d["useReactMessages"])(a)||!Object(d["isClientApp"])(a))return;var i=Object(p["wasLastConnectFast"])(a);if(i)return;var o=Object(y["getTeamId"])(r());G(o);if(Object(x["a"])()&&Object(p["isFirstConnection"])(a))return;t(Object(O["setInitialUnreadCounts"])({}));t(Object(j["a"])()).then(function(e){if(!e)return;var i=e.ok,o=s()(e,["ok"]);Object(x["a"])()||t(Object(O["setUsersCounts"])(n()({},o)));var l=c.a.compact(e.channels.concat(e.groups).concat(e.ims).concat(e.mpims));Q(l,t,r);var u=e.threads;if(u){Object(N["b"])(u.has_unreads,u.mention_count,u.mention_count_by_channel);if(Object(d["isFeatureEnabled"])(a,"feature_react_threads")){ie("Threads has_unreads:"+u.has_unreads+" mention_count:"+u.mention_count);t(Object(k["updateUnreadThreads"])({hasUnreads:u.has_unreads,mentionCountByChannel:c.a.isArray(u.mention_count_by_channel)?{}:u.mention_count_by_channel}))}}Object(A["d"])();Object(M["a"])();ie("Completed users.counts processing")})}function $(e,t,r){var a=r();if(!Object(d["useReactMessages"])(a))return;var n=e.payload,i=n.channelId,s=n.timestamps,o=n.forceUnreadCount,u=n.append,v=n.fromEvtLog;if(c.a.isEmpty(s))return;if(v)return;var p=false;var f=Object(h["getChannelById"])(a,i,p);if(!f)return;var m=Object(w["getLastReadTs"])(f);var b=Object(w["isRead"])(f);var g=c.a.some(s,function(e){return e>=m});if(!g&&!o)return;var _=i===Object(l["getPrimaryView"])(a);_&&ie("Counting unreads in "+i+" because ("+s.length+") timestamps added");var y=q(i,t,r);if(!y){var k=false;var j="unread-counts/onAddTimestamps";ee(r,f,s)&&K(f,t,r,k,j)}if(s&&s.length>1&&b){var C=Object(h["getChannelById"])(r(),i);Object(w["isUnread"])(C)&&Object(R["d"])({id:i,initial:Object(O["getInitialUnreadCountsByChannelId"])(r(),i)},"unexpected_unread_after_loading_history",null,true)}if(s&&1===s.length&&s[0]>m){var E=!u;_&&ie("Checking unreads in "+i+" after a new message");Object(F["a"])(i,t,r,E)}}function ee(e,t,r){if(Object(w["isIm"])(t)||Object(w["isMpim"])(t))return true;var a=e();var n=c.a.map(r||[],function(e){return Object(m["getMessageByTimestamp"])(a,t.id,e)});return c.a.some(n,function(e){if(!e)return false;var t=Object(A["g"])(e);return t.non_channel_mentions})}function te(e,t,r){var a=r();if(!Object(d["useReactMessages"])(a))return;var n=e.payload,i=n.channelId,s=n.timestamp,o=n.forceUnreadCount,c=n.fromEvtLog;if(c)return;if(!s)return;var l=false;var u=Object(h["getChannelById"])(a,i,l);if(!u)return;var v=Object(w["getLastReadTs"])(u);if(s<v&&!o)return;ie("Counting unreads in "+i+" because message removed");var p=q(i,t,r);p||re({dispatch:t,getState:r,channel:u,timestamp:s})&&Z(u,t,r)}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getState,r=e.channel,a=e.timestamp;var n=Object(f["getTimestampsByChannelId"])(t(),r.id,null),i=n.timestamps,s=n.start;var o=Object(w["getLatestTs"])(r,i);var c=s||o+1e-6;return a<c}function ae(e,t,r){if(!e.payload.last_read)return;var a=r();if(!Object(d["useReactMessages"])(a))return;var n=e.payload.id;var i=false;var s=Object(h["getChannelById"])(a,n,i);if(!s)return;ie("Counting unreads in "+n+" because last_read changed to "+e.payload.last_read);var o=q(n,t,r);if(!o){var c=true;var l="unread-counts/onLastReadUpdated";K(s,t,r,c,l)}}function ne(e,t,r){var a=r();if(!Object(d["useReactMessages"])(a))return;var n=e.payload,i=n.channelId,s=n.unreadCnt,o=n.unreadHighlightCnt;var c=false;var l=Object(h["getChannelById"])(a,i,c);if(!l)return;ie("Counting unreads in "+i+" because initial counts updated to {"+s+", "+o+"}");q(i,t,r)}Object(D["b"])({actions:[p["connected"]],sideEffect:X});Object(D["b"])({actions:[f["addTimestamps"]],sideEffect:$});Object(D["b"])({actions:[f["removeTimestamp"]],sideEffect:te});Object(D["b"])({actions:[h["lastReadUpdated"]],sideEffect:ae});Object(D["b"])({actions:[O["setInitialUnreadCountsForChannel"]],sideEffect:ne});function ie(e){Object(I["info"])("UNREAD-COUNTS",e)}var se={shouldFetchHistoryAfterTimestampsAdded:ee,shouldFetchHistoryAfterTimestampRemoved:re,calcChannelUnreadState:B,syncInitialCounts:Z}},1615:function(e,t,r){"use strict";var a=r(21704);var n=r(21700);var i=Object(a["a"])("Calls users.counts endpoint",function(e){return e(Object(n["a"])({method:"users.counts",args:{mpim_aware:true,only_relevant_ims:true,simple_unreads:true,include_threads:true}}))});t["a"]=i},1616:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return o});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.client.threads.setThreadsUnreadDataFromUsersCounts",n.a.noop);var o=Object(i["c"])("TS.client.threads.getMessage")},184:function(e,t,r){"use strict";if(r(62)){var a=r(157);var n=r(48);var i=r(51);var s=r(6);var o=r(423);var c=r(772);var l=r(107);var u=r(249);var d=r(135);var v=r(83);var p=r(251);var h=r(105);var f=r(67);var m=r(1127);var b=r(160);var g=r(122);var _=r(81);var y=r(243);var O=r(52);var k=r(76);var j=r(351);var C=r(158);var E=r(109);var S=r(247).f;var w=r(353);var I=r(136);var T=r(53);var N=r(143);var R=r(274);var A=r(421);var M=r(768);var P=r(141);var x=r(276);var D=r(248);var F=r(767);var L=r(1117);var B=r(61);var U=r(123);var q=B.f;var H=U.f;var W=n.RangeError;var G=n.TypeError;var V=n.Uint8Array;var z="ArrayBuffer";var K="Shared"+z;var Q="BYTES_PER_ELEMENT";var Y="prototype";var J=Array[Y];var Z=c.ArrayBuffer;var X=c.DataView;var $=N(0);var ee=N(2);var te=N(3);var re=N(4);var ae=N(5);var ne=N(6);var ie=R(true);var se=R(false);var oe=M.values;var ce=M.keys;var le=M.entries;var ue=J.lastIndexOf;var de=J.reduce;var ve=J.reduceRight;var pe=J.join;var he=J.sort;var fe=J.slice;var me=J.toString;var be=J.toLocaleString;var ge=T("iterator");var _e=T("toStringTag");var ye=I("typed_constructor");var Oe=I("def_constructor");var ke=o.CONSTR;var je=o.TYPED;var Ce=o.VIEW;var Ee="Wrong length!";var Se=N(1,function(e,t){return Re(A(e,e[Oe]),t)});var we=i(function(){return 1===new V(new Uint16Array([1]).buffer)[0]});var Ie=!!V&&!!V[Y].set&&i(function(){new V(1).set({})});var Te=function(e,t){var r=h(e);if(r<0||r%t)throw W("Wrong offset!");return r};var Ne=function(e){if(O(e)&&je in e)return e;throw G(e+" is not a typed array!")};var Re=function(e,t){if(!(O(e)&&ye in e))throw G("It is not a typed array constructor!");return new e(t)};var Ae=function(e,t){return Me(A(e,e[Oe]),t)};var Me=function(e,t){var r=0;var a=t.length;var n=Re(e,a);while(a>r)n[r]=t[r++];return n};var Pe=function(e,t,r){q(e,t,{get:function(){return this._d[r]}})};var xe=function e(t){var r=k(t);var a=arguments.length;var n=a>1?arguments[1]:void 0;var i=void 0!==n;var s=w(r);var o,c,u,d,v,p;if(void 0!=s&&!j(s)){for(p=s.call(r),u=[],o=0;!(v=p.next()).done;o++)u.push(v.value);r=u}i&&a>2&&(n=l(n,arguments[2],2));for(o=0,c=f(r.length),d=Re(this,c);c>o;o++)d[o]=i?n(r[o],o):r[o];return d};var De=function e(){var t=0;var r=arguments.length;var a=Re(this,r);while(r>t)a[t]=arguments[t++];return a};var Fe=!!V&&i(function(){be.call(new V(1))});var Le=function e(){return be.apply(Fe?fe.call(Ne(this)):Ne(this),arguments)};var Be={copyWithin:function e(t,r){return L.call(Ne(this),t,r,arguments.length>2?arguments[2]:void 0)},every:function e(t){return re(Ne(this),t,arguments.length>1?arguments[1]:void 0)},fill:function e(t){return F.apply(Ne(this),arguments)},filter:function e(t){return Ae(this,ee(Ne(this),t,arguments.length>1?arguments[1]:void 0))},find:function e(t){return ae(Ne(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function e(t){return ne(Ne(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function e(t){$(Ne(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function e(t){return se(Ne(this),t,arguments.length>1?arguments[1]:void 0)},includes:function e(t){return ie(Ne(this),t,arguments.length>1?arguments[1]:void 0)},join:function e(t){return pe.apply(Ne(this),arguments)},lastIndexOf:function e(t){return ue.apply(Ne(this),arguments)},map:function e(t){return Se(Ne(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function e(t){return de.apply(Ne(this),arguments)},reduceRight:function e(t){return ve.apply(Ne(this),arguments)},reverse:function e(){var t=this;var r=Ne(t).length;var a=Math.floor(r/2);var n=0;var i;while(n<a){i=t[n];t[n++]=t[--r];t[r]=i}return t},some:function e(t){return te(Ne(this),t,arguments.length>1?arguments[1]:void 0)},sort:function e(t){return he.call(Ne(this),t)},subarray:function e(t,r){var a=Ne(this);var n=a.length;var i=b(t,n);return new(A(a,a[Oe]))(a.buffer,a.byteOffset+i*a.BYTES_PER_ELEMENT,f((void 0===r?n:b(r,n))-i))}};var Ue=function e(t,r){return Ae(this,fe.call(Ne(this),t,r))};var qe=function e(t){Ne(this);var r=Te(arguments[1],1);var a=this.length;var n=k(t);var i=f(n.length);var s=0;if(i+r>a)throw W(Ee);while(s<i)this[r+s]=n[s++]};var He={entries:function e(){return le.call(Ne(this))},keys:function e(){return ce.call(Ne(this))},values:function e(){return oe.call(Ne(this))}};var We=function(e,t){return O(e)&&e[je]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)};var Ge=function e(t,r){return We(t,r=g(r,true))?d(2,t[r]):H(t,r)};var Ve=function e(t,r,a){if(We(t,r=g(r,true))&&O(a)&&_(a,"value")&&!_(a,"get")&&!_(a,"set")&&!a.configurable&&(!_(a,"writable")||a.writable)&&(!_(a,"enumerable")||a.enumerable)){t[r]=a.value;return t}return q(t,r,a)};if(!ke){U.f=Ge;B.f=Ve}s(s.S+s.F*!ke,"Object",{getOwnPropertyDescriptor:Ge,defineProperty:Ve});i(function(){me.call({})})&&(me=be=function e(){return pe.call(this)});var ze=p({},Be);p(ze,He);v(ze,ge,He.values);p(ze,{slice:Ue,set:qe,constructor:function(){},toString:me,toLocaleString:Le});Pe(ze,"buffer","b");Pe(ze,"byteOffset","o");Pe(ze,"byteLength","l");Pe(ze,"length","e");q(ze,_e,{get:function(){return this[je]}});e.exports=function(e,t,r,c){c=!!c;var l=e+(c?"Clamped":"")+"Array";var d="get"+e;var p="set"+e;var h=n[l];var b=h||{};var g=h&&E(h);var _=!h||!o.ABV;var k={};var j=h&&h[Y];var w=function(e,r){var a=e._d;return a.v[d](r*t+a.o,we)};var I=function(e,r,a){var n=e._d;c&&(a=(a=Math.round(a))<0?0:a>255?255:255&a);n.v[p](r*t+n.o,a,we)};var T=function(e,t){q(e,t,{get:function(){return w(this,t)},set:function(e){return I(this,t,e)},enumerable:true})};if(_){h=r(function(e,r,a,n){u(e,h,l,"_d");var i=0;var s=0;var o,c,d,p;if(O(r)){if(!(r instanceof Z||(p=y(r))==z||p==K))return je in r?Me(h,r):xe.call(h,r);o=r;s=Te(a,t);var b=r.byteLength;if(void 0===n){if(b%t)throw W(Ee);c=b-s;if(c<0)throw W(Ee)}else{c=f(n)*t;if(c+s>b)throw W(Ee)}d=c/t}else{d=m(r);c=d*t;o=new Z(c)}v(e,"_d",{b:o,o:s,l:c,e:d,v:new X(o)});while(i<d)T(e,i++)});j=h[Y]=C(ze);v(j,"constructor",h)}else if(!i(function(){h(1)})||!i(function(){new h(-1)})||!x(function(e){new h;new h(null);new h(1.5);new h(e)},true)){h=r(function(e,r,a,n){u(e,h,l);var i;if(!O(r))return new b(m(r));if(r instanceof Z||(i=y(r))==z||i==K)return void 0!==n?new b(r,Te(a,t),n):void 0!==a?new b(r,Te(a,t)):new b(r);if(je in r)return Me(h,r);return xe.call(h,r)});$(g!==Function.prototype?S(b).concat(S(g)):S(b),function(e){e in h||v(h,e,b[e])});h[Y]=j;a||(j.constructor=h)}var N=j[ge];var R=!!N&&("values"==N.name||void 0==N.name);var A=He.values;v(h,ye,true);v(j,je,l);v(j,Ce,true);v(j,Oe,h);(c?new h(1)[_e]==l:_e in j)||q(j,_e,{get:function(){return l}});k[l]=h;s(s.G+s.W+s.F*(h!=b),k);s(s.S,l,{BYTES_PER_ELEMENT:t});s(s.S+s.F*i(function(){b.of.call(h,1)}),l,{from:xe,of:De});Q in j||v(j,Q,t);s(s.P,l,Be);D(l);s(s.P+s.F*Ie,l,{set:qe});s(s.P+s.F*!R,l,He);a||j.toString==me||(j.toString=me);s(s.P+s.F*i(function(){new h(1).slice()}),l,{slice:Ue});s(s.P+s.F*(i(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!i(function(){j.toLocaleString.call([1,2])})),l,{toLocaleString:Le});P[l]=R?N:A;a||R||v(j,ge,A)}}else e.exports=function(){}},190:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"toggleSectionFilter",function(){return h});r.d(t,"setSectionFilter",function(){return f});r.d(t,"setFilterState",function(){return m});r.d(t,"setJumperCoachmarkState",function(){return b});r.d(t,"setSectionFilterDataFromLS",function(){return g});r.d(t,"getSectionFilter",function(){return k});r.d(t,"getSections",function(){return j});r.d(t,"getJumperCoachmarkState",function(){return C});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(21696);var v=r(1604);var p;var h=Object(d["a"])("Toggle between sidebar filters");h.propTypes={sectionId:u.a.string.isRequired};var f=Object(d["a"])("Set the sidebar filter to a specific state");f.propTypes={sectionId:u.a.string.isRequired,filter:u.a.string.isRequired};var m=Object(d["a"])("Set the entire filter state (e.g. from localStorage)");m.propTypes={sections:u.a.object.isRequired};var b=Object(d["a"])("Set the jumper button coachmark state");b.propTypes=u.a.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]);var g=Object(d["e"])("Set Section Filter Data From LocalStorage",function(e,t,r){var a=void 0;a=Object(v["c"])();a&&!c.a.isEmpty(a)||("hide_read_channels"===r?a={starred:"unreads",sharedChannels:"unreads",orgWideChannels:"unreads",channels:"unreads",ims:"unreads",apps:"unreads"}:"hide_read_channels_unless_starred"===r&&(a={starred:"all",sharedChannels:"unreads",orgWideChannels:"unreads",channels:"unreads",ims:"unreads",apps:"unreads"}));e(m({sections:a}))});g.propTypes=u.a.string.isRequired;var _={selectedItemId:void 0,sections:{}};var y=function e(t,r){if(!t||"all"===t)return"unreads";if("unreads"===t&&"ims"!==r&&"apps"!==r)return"real_time_sort";return"all"};var O=Object(d["c"])((p={},n()(p,h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sectionId;return s()({},e,{sections:s()({},e.sections,n()({},r,y(e.sections[r],r)))})}),n()(p,f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sectionId,a=t.filter;return s()({},e,{sections:s()({},e.sections,n()({},r,a))})}),n()(p,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sections;return s()({},e,{sections:r})}),n()(p,b,function(e,t){return s()({},e,{jumperCoachmark:t})}),p),_);t["default"]=O;var k=Object(d["d"])(function(e,t){return e&&e.channelSidebar&&e.channelSidebar.sections&&e.channelSidebar.sections[t]});var j=Object(d["d"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.sections});var C=Object(d["d"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.jumperCoachmark})},196:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(8);var s=r.n(i);var o=r(907);var c=r(37);var l=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(o["getDisplayName"])(r);var i=null;if(Object(o["isPublicChannel"])(r)||Object(o["isPrivateChannel"])(r)){var l=s()({"c-icon--align-hashmark":!Object(o["isPrivateChannel"])(r)});i=n.a.createElement(c["a"],{className:l,inherit:true,align:"baseline",type:Object(o["isPrivateChannel"])(r)?"lock":"channel"})}var u=null;Object(o["isOrgSharedPublicOrPrivateChannel"])(r)?u=n.a.createElement(c["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(o["isPendingExternallySharedChannel"])(r)?u=n.a.createElement(c["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(o["isSharedPublicOrPrivateChannel"])(r)&&(u=n.a.createElement(c["a"],{align:"baseline",inherit:true,type:"shared_channels"}));return n.a.createElement("span",{key:t},i,a,u)};l.displayName="formatChannelName";t["a"]=l},197:function(e,t,r){var a=r(136)("meta");var n=r(52);var i=r(81);var s=r(61).f;var o=0;var c=Object.isExtensible||function(){return true};var l=!r(51)(function(){return c(Object.preventExtensions({}))});var u=function(e){s(e,a,{value:{i:"O"+ ++o,w:{}}})};var d=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,a)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[a].i};var v=function(e,t){if(!i(e,a)){if(!c(e))return true;if(!t)return false;u(e)}return e[a].w};var p=function(e){l&&h.NEED&&c(e)&&!i(e,a)&&u(e);return e};var h=e.exports={KEY:a,NEED:false,fastKey:d,getWeak:v,onFreeze:p}},1977:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2942);var n=r.n(a);var i=r(2944);var s=r.n(i);var o=r(2945);var c=r.n(o);var l=r(2946);var u=r.n(l);var d=r(2947);var v=r.n(d);var p=r(2948);var h=r.n(p);var f=r(2949);var m=r.n(f);var b=r(2950);var g=r.n(b);var _=r(2951);var y=r.n(_);var O=r(2952);var k=r.n(O);var j=r(1122);var C=r.n(j);var E=r(1124);var S=r.n(E);var w=r(1125);var I=r.n(w);var T=r(2941);var N=r.n(T);var R=r(2953);var A=r.n(R);var M=r(2954);var P=r.n(M);var x=r(2955);var D=r.n(x);var F=r(2956);var L=r.n(F);var B=r(2958);var U=r.n(B);var q=r(2959);var H=r.n(q);var W=r(2960);var G=r.n(W);var V=r(2961);var z=r.n(V);var K=r(2962);var Q=r.n(K);var Y=r(2963);var J=r.n(Y);var Z=r(2964);var X=r.n(Z);var $=r(2965);var ee=r.n($);var te=r(2966);var re=r.n(te);var ae=r(2832);var ne=r.n(ae);var ie=r(2841);var se=r.n(ie);var oe=r(2842);var ce=r.n(oe);var le=r(2843);var ue=r.n(le);var de=r(2844);var ve=r.n(de);var pe=r(2845);var he=r.n(pe);var fe=r(2846);var me=r.n(fe);var be=r(2837);var ge=r.n(be);var _e=r(2838);var ye=r.n(_e);var Oe=r(2839);var ke=r.n(Oe);var je=r(2840);var Ce=r.n(je);var Ee=r(2847);var Se=r.n(Ee);var we=r(2848);var Ie=r.n(we);var Te=r(2853);var Ne=r.n(Te);var Re=r(2887);var Ae=r.n(Re);var Me=r(2886);var Pe=r.n(Me);var xe=r(2889);var De=r.n(xe);var Fe=r(2892);var Le=r.n(Fe);var Be=r(2893);var Ue=r.n(Be);var qe=r(2890);var He=r.n(qe);var We=r(2891);var Ge=r.n(We);var Ve=r(1119);var ze=r.n(Ve);var Ke=r(2936);var Qe=r.n(Ke);var Ye=r(2937);var Je=r.n(Ye);var Ze=r(2939);var Xe=r.n(Ze);var $e=r(2938);var et=r.n($e);var tt=r(698);var rt=r.n(tt);var at=r(2915);var nt=r.n(at);var it=r(2929);var st=r.n(it);var ot=r(2931);var ct=r.n(ot);var lt=r(2932);var ut=r.n(lt);var dt=r(2930);var vt=r.n(dt);var pt=r(768);var ht=r.n(pt);var ft=r(2861);var mt=r.n(ft);var bt=r(2862);var gt=r.n(bt);var _t=r(2864);var yt=r.n(_t);var Ot=r(2863);var kt=r.n(Ot);var jt=r(2860);var Ct=r.n(jt);var Et=r(2866);var St=r.n(Et);var wt=r(2865);var It=r.n(wt);var Tt=r(2869);var Nt=r.n(Tt);var Rt=r(2870);var At=r.n(Rt);var Mt=r(2871);var Pt=r.n(Mt);var xt=r(2872);var Dt=r.n(xt);var Ft=r(2873);var Lt=r.n(Ft);var Bt=r(2874);var Ut=r.n(Bt);var qt=r(2875);var Ht=r.n(qt);var Wt=r(2876);var Gt=r.n(Wt);var Vt=r(2877);var zt=r.n(Vt);var Kt=r(2878);var Qt=r.n(Kt);var Yt=r(2880);var Jt=r.n(Yt);var Zt=r(2879);var Xt=r.n(Zt);var $t=r(2881);var er=r.n($t);var tr=r(2882);var rr=r.n(tr);var ar=r(2883);var nr=r.n(ar);var ir=r(2884);var sr=r.n(ir);var or=r(2885);var cr=r.n(or);var lr=r(2967);var ur=r.n(lr);var dr=r(2979);var vr=r.n(dr);var pr=r(2980);var hr=r.n(pr);var fr=r(2978);var mr=r.n(fr);var br=r(2971);var gr=r.n(br);var _r=r(2972);var yr=r.n(_r);var Or=r(3023);var kr=r.n(Or);var jr=r(3024);var Cr=r.n(jr);var Er=r(3025);var Sr=r.n(Er);var wr=r(3147);var Ir=r.n(wr);var Tr=r(12159);var Nr=r.n(Tr);var Rr=r(50);var Ar=r.n(Rr);var Mr=r(21814);var Pr=r(22253);var xr=r(21730);var Dr=r(84);var Fr=r(394);Object(xr["a"])({ToastContainer:Mr["a"],DndButton:Pr["a"]});Object(Fr["a"])(r(20503));window.React=Nr.a;window.ReactDOM=Ar.a;window.moment=Dr["a"]},198:function(e,t,r){var a=r(53)("unscopables");var n=Array.prototype;void 0==n[a]&&r(83)(n,a,{});e.exports=function(e){n[a][e]=true}},1980:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(277);var i=r(21856);Object(a["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["c"],markLastRead:i["b"],markDelayedWithAPI:i["a"]})},1981:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(43);Object(i["a"])("interop.console",n()({},s))},1982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(211);Object(i["a"])("interop.constants",n()({},s))},1983:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(1984);Object(l["a"])("interop.createWorkspaceModal",{render:function e(t,r,a){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},1984:function(e,t,r){"use strict";var a=r(1985);t["a"]=a["a"]},1985:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(412);var k=r(5);var j=r(708);var C=r(2013);var E=r(1986);var S=r(2002);var w=r(20189);var I=r.n(w);var T=new k["b"]("enterprise_dashboard");var N={workspaceName:h.a.string,workspaceDomain:h.a.string,accessSetting:h.a.string,workspaceDesc:h.a.string,apiCallCount:h.a.number,errors:h.a.object,ui:h.a.object,open:h.a.bool,onSubmit:h.a.func.isRequired,onCancel:h.a.func.isRequired};var R={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",apiCallCount:null,errors:{},ui:{},open:true,onSubmit:b["noop"],onCancel:b["noop"]};var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={workspaceName:r.props.workspaceName,workspaceDomain:r.props.workspaceDomain,workspaceDesc:r.props.workspaceDesc,accessSetting:r.props.accessSetting,isPending:false};Object(b["bindAll"])(r,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return r}c()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnApiCountChange(t);this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,r){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},r)}},{key:"setAccessSetting",value:function e(t,r){this.setState(function(){return{accessSetting:t}},r)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnApiCountChange",value:function e(t){var r=t.apiCallCount!==this.props.apiCallCount;if(r){var a=t.apiCallCount>0;this.setPendingState(a)}}},{key:"updateOnModalClose",value:function e(t){var r=this.props.open&&!t.open;r&&this.reset()}},{key:"reset",value:function e(){var t=R.workspaceName,r=R.workspaceDomain,a=R.workspaceDesc,n=R.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:r,workspaceDesc:a},b["noop"]);this.setAccessSetting(n);this.setPendingState(R.isPending)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function e(t){this.props.onSubmit(t)}},{key:"buildModalSteps",value:function e(){var t=this;var r=function e(){var r={header:T.t("Set up your workspace"),subtitle:T.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(r)};var a=function e(){var r={header:T.t("Set access for this workspace"),subtitle:T.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(r)};var n=function e(){var r=function e(){var r=t.state,a=r.workspaceName,n=r.workspaceDomain;Object(O["b"])(Object(O["a"])().teams.getWorkspaceInfoAvailability({workspaceName:a,workspaceDomain:n}))};t.chooseNameForm.submit(r)};var i=function e(){var r=t.getWorkspaceInfo();t.setPendingState(true);t.submit(Object(C["a"])(r));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:r,goButtonText:T.t("Next"),title:T.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel},{children:a,goButtonText:T.t("Create Workspace"),title:T.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(O["b"])(Object(O["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:T.t("Cancel"),onCancel:this.props.onCancel}];return o}},{key:"renderSubtitle",value:function e(t){if(t)return m.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var r=this.state,a=r.workspaceName,n=r.workspaceDomain,i=r.workspaceDesc;var s=this.props.errors;return m.a.createElement(E["d"],{workspaceName:a,workspaceDomain:n,workspaceDesc:i,errors:s,onSubmit:this.setWorkspaceInfo,ref:function e(r){t.chooseNameForm=r}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var r=this.state.accessSetting;return m.a.createElement(S["a"],{accessSetting:r,onSubmit:this.setAccessSetting,ref:function e(r){t.accessSettingForm=r}})}},{key:"renderModalPane",value:function e(t){var r=t.header,a=t.subtitle,n=t.renderInnerPane;var i=y()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":a});return m.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},m.a.createElement("div",{className:"p-ent_workspace_create__pane"},m.a.createElement("div",{className:"p-ent_workspace_create__form"},m.a.createElement("h3",{className:i},r),this.renderSubtitle(a),n())))}},{key:"render",value:function e(){var t=this;var r=T.t("Set up");var a=T.t("Set access");var i=[r,a];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return m.a.createElement(j["a"],n()({},s,{ref:function e(r){t.createWorkspaceModalRef=r}}))}}]);return t}(f["Component"]);A.displayName="CreateWorkspaceModal";A.defaultProps=R;t["a"]=A},1986:function(e,t,r){"use strict";r.d(t,"b",function(){return A});r.d(t,"c",function(){return M});r.d(t,"a",function(){return P});var a=r(374);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(5);var C=r(195);var E=r(410);var S=r(411);var w=r(412);var I=r(2001);var T=new j["b"]("enterprise_dashboard");var N={workspaceName:g.a.string,workspaceDomain:g.a.string,workspaceDesc:g.a.string,errors:g.a.object,onSubmit:g.a.func.isRequired};var R={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null,onSubmit:O["noop"]};var A=21;var M=255;var P=255;var x=function e(t){Object(w["b"])(Object(w["a"])().teams.setCreateTeamErrors(t))};var D=function e(t,r){Object(w["b"])(Object(w["a"])().teams.setCreateTeamError(t,r))};var F=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={values:{workspaceDomain:r.props.workspaceDomain,workspaceName:r.props.workspaceName,workspaceDesc:r.props.workspaceDesc},errors:r.props.errors};return r}v()(t,[{key:"onInputChanged",value:function e(t,r){this.setFormValue(t,r);D(t,"")}},{key:"setFormValue",value:function e(t,r){this.setState(function(e){return{values:c()({},e.values,s()({},t,r))}})}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"submit",value:function e(t){var r=Object(I["a"])(this.state.values);if(!Object(O["isEmpty"])(r)){x(r);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var r=t.suffix,a=t.name,i=n()(t,["suffix","name"]);return y.a.createElement(E["a"],c()({},i,{name:a,suffix:r,onChange:this.bindArgs(this.onInputChanged,a)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var r=Object(O["get"])(this.props.errors,"workspaceName");var a="workspace_input_name";var n={name:"workspaceName",inputLabel:T.t("Workspace Name"),maxCharacterLimit:M,value:t,id:a,labelId:a+"_label"};r&&(n=c()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var r=Object(O["get"])(this.props.errors,"workspaceDomain");var a="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:T.t("Workspace Domain"),hintText:T.t("Letters, numbers, and hyphens only."),maxCharacterLimit:A,suffix:T.t(".slack.com"),placeholder:T.t("workspace-url"),value:t,id:a,labelId:a+"_label"};r&&(n=c()({},n,{errorText:r}));return this.renderTextElement(n)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var r=Object(O["get"])(this.props.errors,"workspaceDesc");var a="workspace_input_description";var n={name:"workspaceDesc",inputLabel:T.t("Workspace Description"),hintText:T.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:P,value:t,id:a,labelId:a+"_label"};r&&(n=c()({},n,{errorText:r}));return this.renderTextareaElement(n)}},{key:"renderTextareaElement",value:function e(t){var r=t.labelId,a=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=n()(t,["labelId","inputLabel","sublabelText","id","name"]);return y.a.createElement(C["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},y.a.createElement(S["a"],c()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var r=t.inputLabel,a=t.labelId,i=t.sublabelText,s=t.id,o=n()(t,["inputLabel","labelId","sublabelText","id"]);return y.a.createElement(C["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},this.renderTextInput(c()({id:s},o)))}},{key:"render",value:function e(){return y.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(_["Component"]);F.displayName="CreateWorkspaceModalNameForm";F.defaultProps=R;t["d"]=F},1997:function(e,t,r){"use strict";r.d(t,"a",function(){return E});var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(20148);var C=r.n(j);var E={medium:"medium",large:"large"};var S={ariaDescribedby:m.a.string,ariaInvalid:m.a.bool,ariaLabelledby:m.a.string,ariaRequired:m.a.bool,className:m.a.string,id:m.a.string.isRequired,isDisabled:m.a.bool,name:m.a.string.isRequired,onChange:m.a.func,resize:m.a.string,size:m.a.oneOf(Object(O["values"])(E)),value:m.a.string};var w={ariaDescribedby:"",ariaInvalid:false,ariaLabelledby:"",ariaRequired:false,className:null,isDisabled:false,onChange:O["noop"],resize:null,size:E.medium,value:""};var I=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);return r}u()(t,[{key:"onChange",value:function e(t){this.props.onChange(t.target.value)}},{key:"focus",value:function e(){this.input.focus()}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.ariaDescribedby,i=r.ariaInvalid,o=r.ariaLabelledby,c=r.ariaRequired,l=r.className,u=r.id,d=r.isDisabled,v=r.name,p=r.resize,h=r.size,f=s()(r,["ariaDescribedby","ariaInvalid","ariaLabelledby","ariaRequired","className","id","isDisabled","name","resize","size"]);var m=y()("c-input_textarea",{"c-input_textarea--large":h===E.large,"c-input_textarea--resize_none":"none"===p,"c-input_textarea--resize_both":"both"===p,"c-input_textarea--resize_h":"horizontal"===p},l);return g.a.createElement("textarea",n()({},f,{"aria-describedby":a,"aria-invalid":i,"aria-labelledby":o,"aria-required":c,className:m,disabled:d,id:u,name:v,onChange:this.onChange,ref:function e(r){t.input=r},value:this.props.value}))}}]);return t}(g.a.Component);I.displayName="Textarea";I.defaultProps=w;t["b"]=I},2001:function(e,t,r){"use strict";t["a"]=C;var a=r(1);var n=r.n(a);var i=r(594);var s=r(5);var o=r(1986);var c=new s["b"]("enterprise_dashboard");var l=/^[a-z0-9-]+$/i;var u=/[a-z]+/i;var d=/^[a-z0-9]/i;var v=/[a-z0-9]$/i;var p=void 0;function h(){p={empty_domain:c.t("Please fill in a workspace domain."),invalid_domain_characters:c.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:c.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:c.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(i["b"])(o["b"]),empty_name:c.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(i["b"])(o["c"]),empty_description:c.t("Please fill in a workspace description."),maximum_description_length_reached:Object(i["b"])(o["a"])};return null}function f(e){return v.test(e)}function m(e){return e.length<=o["b"]}function b(e){return e.length<=o["c"]}function g(e){return e.length<=o["a"]}function _(e){return d.test(e)}function y(e){return e.trim().length>0}function O(e){if(Object(a["isNull"])(e)||Object(a["isUndefined"])(e))return"";if(!y(e))return p.empty_name;if(!b(e))return p.maximum_workspace_name_length_reached;return""}function k(e){if(Object(a["isNull"])(e)||Object(a["isUndefined"])(e))return"";if(!y(e)||"organization"===e)return p.empty_domain;if(!m(e))return p.maximum_domain_length_reached;if(!l.test(e))return p.invalid_domain_characters;if(!u.test(e))return p.domain_minimum_one_letter;if(!_(e)||!f(e))return p.domain_no_start_end_dash;return""}function j(e){if(Object(a["isNull"])(e)||Object(a["isUndefined"])(e))return"";if(!y(e))return p.empty_description;if(!g(e))return p.maximum_description_length_reached;return""}function C(e){h();var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc;var n=O(t);var i=k(r);var s=j(a);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var E={};Object.defineProperty(E,"isValidWorkspaceName",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(E,"isValidWorkspaceDomain",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(E,"isValidWorkspaceDescription",{get:function e(){return j},set:function e(t){j=t}})},2002:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(195);var g=r(1074);var _=r(1075);var y=r(5);var O=new y["b"]("enterprise_dashboard");var k={accessSetting:v.a.string,onSubmit:v.a.func.isRequired};var j={accessSetting:null,onSubmit:f["noop"]};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={accessSetting:r.props.accessSetting};Object(f["bindAll"])(r,["renderAccessSettingRadio","handleAccessSettingChange"]);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var r=t.accessSetting!==this.props.accessSetting;r&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var r=this.getAccessSetting();this.props.onSubmit(r,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var r=this.state.accessSetting;var a=t.accessType,n=t.accessName,i=t.descriptionText;return h.a.createElement("div",{key:a},h.a.createElement(b["a"],{id:a,htmlFor:"workspace_access_type_"+a,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:n,subtext:i},h.a.createElement(g["a"],{id:"workspace_access_type_"+a,value:a,onChange:this.handleAccessSettingChange,checked:a===r})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:O.t("Open"),descriptionText:O.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:O.t("By Request"),descriptionText:O.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:O.t("Invite Only"),descriptionText:O.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:O.t("Hidden"),descriptionText:O.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var r=t.map(this.renderAccessSettingRadio);return h.a.createElement(_["a"],{field:"workspaceAccessSetting",noTouch:true},r)}},{key:"render",value:function e(){return h.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(p["Component"]);C.displayName="CreateWorkspaceModalAccessForm";C.defaultProps=j;t["a"]=C},2006:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(189);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(1076);var y={stepIndex:h.a.number,steps:h.a.arrayOf(h.a.shape(v()({},_["a"].propTypes))).isRequired,isSteppingBack:h.a.bool,breadcrumbTitles:h.a.arrayOf(h.a.string),modalClasses:h.a.string,onCancel:h.a.func.isRequired,position:h.a.string,isOpen:h.a.bool,showOpenTransition:h.a.bool,showCloseTransition:h.a.bool};var O={stepIndex:0,isSteppingBack:false,breadcrumbTitles:[],modalClasses:"",position:null,isOpen:true,showOpenTransition:true,showCloseTransition:true};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickBack=r.onClickBack.bind(r);r.onClickGo=r.onClickGo.bind(r);r.state={stepIndex:r.props.stepIndex,isSteppingBack:r.props.isSteppingBack};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateStepState(t.stepIndex)}},{key:"onClickGo",value:function e(){var t=this.state.stepIndex;var r=this.getStep(t);if(r.onGo){r.onGo();return}this.goToNextStep()}},{key:"onClickBack",value:function e(){var t=this.state.stepIndex;var r=this.getStep(t);if(r.onBack){r.onBack();return}this.goToPreviousStep()}},{key:"setStepDirection",value:function e(t){this.setState(function(){return{isSteppingBack:t}})}},{key:"getIndex",value:function e(){return this.state.stepIndex}},{key:"setIndex",value:function e(t){this.setState(function(){return{stepIndex:t}})}},{key:"getStepNumber",value:function e(){return this.getIndex()+1}},{key:"setStepNumber",value:function e(t){this.setIndex(t-1)}},{key:"getCurrentStep",value:function e(){return this.getStep(this.state.stepIndex)}},{key:"getStep",value:function e(t){var r=this.props.steps;return r[t]}},{key:"getStepContent",value:function e(){var t=this.getCurrentStep();if(Object(b["isFunction"])(t.children))return t.children();return t.children}},{key:"maybeUpdateStepState",value:function e(t){var r=t!==this.props.stepIndex;if(r){this.setIndex(t);var a=t<this.props.stepIndex;this.setStepDirection(a)}}},{key:"isModalSteppingBack",value:function e(){return this.state.isSteppingBack}},{key:"goToNextStep",value:function e(){var t=this.props.steps;this.setState(function(e){var r=e.stepIndex+1;if(r<t.length)return{stepIndex:r,isSteppingBack:false};return e})}},{key:"goToPreviousStep",value:function e(){this.setState(function(e){var t=e.stepIndex-1;if(e.stepIndex>=0)return{stepIndex:t,isSteppingBack:true};return e})}},{key:"render",value:function e(){var t=this.getCurrentStep();var r=this.getIndex();var a=this.isModalSteppingBack();var n=this.props,i=n.breadcrumbTitles,s=n.isOpen,o=n.showOpenTransition,c=n.showCloseTransition,l=n.position;var u=v()({},t,{isSteppingBack:a,currentStepIndex:r,breadcrumbTitles:i,isOpen:s,showCloseTransition:c,showOpenTransition:o,position:l,onGo:this.onClickGo,onBack:this.onClickBack,modalClasses:this.props.modalClasses,onCancel:this.props.onCancel});return m.a.createElement(_["a"],u,this.getStepContent())}}]);return t}(f["PureComponent"]);k.displayName="SteppedFullscreenModal";k.defaultProps=O;t["a"]=k},20121:function(e,t){},20124:function(e,t){},20125:function(e,t){},2013:function(e,t,r){"use strict";t["a"]=i;var a=r(189);var n=r.n(a);function i(e){var t=e.workspaceName,r=e.workspaceDomain,a=e.workspaceDesc,i=e.accessSetting;var s={name:t,domain:r};if(a||i)return n()({},s,{description:a,access_setting:i});return s}},20131:function(e,t){},20146:function(e,t){},20148:function(e,t){},20149:function(e,t){},20150:function(e,t){},20152:function(e,t){},20153:function(e,t){},20154:function(e,t){},20155:function(e,t){},20156:function(e,t){},20157:function(e,t){},20158:function(e,t){},20159:function(e,t){},2016:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(2017);Object(l["a"])("interop.appManagement",{render:function e(t,r,a){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},20160:function(e,t){},20161:function(e,t){},20168:function(e,t){},20169:function(e,t){},2017:function(e,t,r){"use strict";var a=r(2018);t["a"]=a["a"]},20170:function(e,t){},20171:function(e,t){},20175:function(e,t){},20176:function(e,t){},20177:function(e,t){},20178:function(e,t){},20179:function(e,t){},2018:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(5);var y=r(3096);var O=r(2019);var k=r(22325);var j=r(22332);var C=r(20157);var E=r.n(C);var S=new _["b"]("enterprise_dashboard");var w={orgName:h.a.string.isRequired,tabActionOnClick:h.a.func,defaultTabId:h.a.string,profileIsOpen:h.a.bool,orgApps:h.a.array,orgAppsApiCursor:h.a.string,orgAppsApiTotal:h.a.number,orgAppsSortDir:h.a.string,orgAppsSortBy:h.a.string,orgAppsLoading:h.a.bool,searchQuery:h.a.string,featureEntAppManagementRestriction:h.a.bool};var I={tabActionOnClick:m.a,defaultTabId:"",profileIsOpen:false,orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var T=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return v.a.createElement("div",null,v.a.createElement(k["a"],t))}},{key:"renderRestrictedAppsContent",value:function e(){return v.a.createElement(j["a"],null)}},{key:"render",value:function e(){var t=this.props,r=t.tabActionOnClick,a=t.defaultTabId;var n=[{title:S.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:r}];this.props.featureEntAppManagementRestriction&&n.push({title:S.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:r});var i=g()("p-app-panel",{open:this.props.profileIsOpen});return v.a.createElement("div",{className:"p-app_management padding_top_200"},v.a.createElement(O["a"],null),v.a.createElement(y["a"],{tabs:n,defaultTabId:a}),v.a.createElement("div",{"data-enterprise-app-profile-container":true,className:i}))}}]);return t}(d["PureComponent"]);T.displayName="AppManagement";T.defaultProps=I;t["a"]=T},20180:function(e,t){},20181:function(e,t){},20182:function(e,t){},20183:function(e,t){},20184:function(e,t){},20185:function(e,t){},20186:function(e,t){},20187:function(e,t){},20188:function(e,t){},20189:function(e,t){},2019:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(5);var h=new p["b"]("enterprise_dashboard");var f=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=h.t("Apps");return v.a.createElement("div",{className:"c-app_management_indent"},v.a.createElement("h1",null,t))}}]);return t}(d["Component"]);f.displayName="AppManagementHeader";t["a"]=f},20190:function(e,t){},20191:function(e,t){},20192:function(e,t){},20193:function(e,t){},20194:function(e,t){},20195:function(e,t){},20196:function(e,t){},20197:function(e,t){},20198:function(e,t){},20199:function(e,t){},2020:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(2021);Object(l["a"])("interop.dashboardNav",{render:function e(t,r,a){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},20200:function(e,t){},20201:function(e,t){},20202:function(e,t){},20203:function(e,t){},20204:function(e,t){},20205:function(e,t){},20206:function(e,t){},20207:function(e,t){},20208:function(e,t){},2021:function(e,t,r){"use strict";var a=r(2022);t["a"]=a["a"]},20210:function(e,t){},20211:function(e,t){},20212:function(e,t){},20213:function(e,t){},20214:function(e,t){},20215:function(e,t){},20216:function(e,t){},20217:function(e,t){},20218:function(e,t){},2022:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(2023);var y=r(2027);var O=r(2039);var k=r(20197);var j=r.n(k);var C={header:v.a.shape({name:v.a.string,avatar:v.a.string,onClick:v.a.oneOfType([v.a.func,v.a.string]).isRequired,scrollTop:v.a.bool}).isRequired,navItems:v.a.arrayOf(v.a.shape({isOpen:v.a.bool,toClose:v.a.bool,icon:v.a.string.isRequired,iconColor:v.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:v.a.string.isRequired,onClick:v.a.func.isRequired,subItems:v.a.array})).isRequired,userMenu:v.a.shape({avatar:v.a.string,name:v.a.string,onClick:v.a.func.isRequired}).isRequired};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderNavItems=r.renderNavItems.bind(r);r.makeScrollable=r.makeScrollable.bind(r);r.onWindowResize=r.onWindowResize.bind(r);r.state={scrollTop:false,scrollBottom:false};return r}s()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var r=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(r===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=g.a.map(this.props.navItems,function(e){return h.a.createElement(y["a"],{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var r=this.props.header,a=r.name,n=r.avatar,i=r.onClick;var s=m()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return h.a.createElement("div",{className:"p-ent_nav"},h.a.createElement(_["a"],{name:a,avatar:n,onClick:i,scrollTop:this.state.scrollTop}),h.a.createElement("div",{ref:function e(r){t.element=r},onScroll:this.makeScrollable,className:s},this.renderNavItems()),h.a.createElement(O["a"],{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(p["PureComponent"]);E.displayName="DashboardNav";t["a"]=E},20224:function(e,t){},20225:function(e,t){},20226:function(e,t){},20227:function(e,t){},20228:function(e,t){},20229:function(e,t){},2023:function(e,t,r){"use strict";var a=r(2024);t["a"]=a["a"]},20230:function(e,t){},20231:function(e,t){},20232:function(e,t){},20233:function(e,t){},20234:function(e,t){},20235:function(e,t){},20236:function(e,t){},20238:function(e,t){},20239:function(e,t){},2024:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(3184);var g=r(20192);var _=r.n(g);var y={name:v.a.string,avatar:v.a.string,onClick:v.a.oneOfType([v.a.func,v.a.string]).isRequired,scrollTop:v.a.bool};var O={name:"",avatar:"",scrollTop:false};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this;var r=m()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var a={backgroundImage:"url('"+this.props.avatar+"')"};return h.a.createElement("div",{className:r},h.a.createElement(b["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:a,type:"link"}),h.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(p["PureComponent"]);k.displayName="DashboardNavHeader";k.defaultProps=O;t["a"]=k},20240:function(e,t){},20241:function(e,t){},20242:function(e,t){},20243:function(e,t){},20244:function(e,t){},20245:function(e,t){},20246:function(e,t){},20247:function(e,t){},20248:function(e,t){},20249:function(e,t){},20250:function(e,t){},20251:function(e,t){},20253:function(e,t){},20254:function(e,t){},20255:function(e,t){},2027:function(e,t,r){"use strict";var a=r(2028);t["a"]=a["a"]},2028:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(2029);var k=r(2033);var j=r(20195);var C=r.n(j);var E={isOpen:h.a.bool,animateClose:h.a.bool,icon:h.a.string.isRequired,iconColor:h.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:h.a.string.isRequired,onClick:h.a.func.isRequired,subItems:h.a.array};var S={isOpen:false,animateClose:false,subItems:null};var w=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleAnimation=r.toggleAnimation.bind(r);r.shouldAnimateClosed=r.shouldAnimateClosed.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=y.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var r=y.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=y.a.head(r)+"px");this.props.isOpen&&(t.style.maxHeight=y.a.sum(r)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var r=y.a.head(t.children).offsetHeight;var a=1;var n=r-a;var i=r+a;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var r=n()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var a=g()("p-ent_nav_item",r);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=m.a.createElement(k["a"],{subItems:this.props.subItems,animateClose:this.props.animateClose}));return m.a.createElement("div",{ref:function e(r){t.element=r},className:a},m.a.createElement(O["a"],{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),m.a.createElement("div",null,i))}}]);return t}(f["PureComponent"]);w.displayName="DashboardNavItem";w.defaultProps=S;t["a"]=w},20286:function(e,t){},2029:function(e,t,r){"use strict";var a=r(2030);t["a"]=a["a"]},2030:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(3184);var k=r(37);var j=r(20193);var C=r.n(j);var E={isOpen:h.a.bool,icon:h.a.string.isRequired,iconColor:h.a.oneOf(["blue","yellow","red","green","purple"]).isRequired,name:h.a.string.isRequired,onClick:h.a.func.isRequired};var S={isOpen:false};var w=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t,r=this;var a=g()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},n()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),n()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-"+Object(_["camelCase"])(this.props.name);return m.a.createElement(O["c"],{onClick:function e(){return r.props.onClick(r.props.name)},className:a,"data-qa":i},m.a.createElement(k["a"],{type:this.props.icon}),m.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(f["PureComponent"]);w.displayName="DashboardNavItemPrimary";w.defaultProps=S;t["a"]=w},20315:function(e,t){},20318:function(e,t){},2033:function(e,t,r){"use strict";var a=r(2034);t["a"]=a["a"]},2034:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3184);var y=r(37);var O=r(20194);var k=r.n(O);var j={subItems:v.a.array.isRequired,animateClose:v.a.bool};var C={animateClose:false};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSecondaryItems=r.renderSecondaryItems.bind(r);return r}s()(t,[{key:"renderSecondaryItems",value:function e(){var t=g.a.map(this.props.subItems,function(e){var t=m()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var r="ent-nav-"+g.a.camelCase(e.name);return h.a.createElement(_["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:t,"data-qa":r},e.name," ",h.a.createElement(y["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return t}},{key:"render",value:function e(){var t=m()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return h.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(p["PureComponent"]);E.displayName="DashboardNavItemSecondary";E.defaultProps=C;t["a"]=E},2039:function(e,t,r){"use strict";var a=r(2040);t["a"]=a["a"]},2040:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(37);var m=r(20196);var b=r.n(m);var g={avatar:v.a.string,name:v.a.string,onClick:v.a.func.isRequired};var _={name:"",avatar:""};var y=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this;var r={backgroundImage:"url('"+this.props.avatar+"')"};return h.a.createElement("button",{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-popover-trigger":"user_menu"},h.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:r}),h.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),h.a.createElement(f["a"],{type:"chevron-down"}))}}]);return t}(p["PureComponent"]);y.displayName="DashboardNavUserMenu";y.defaultProps=_;t["a"]=y},2045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(2046);Object(l["a"])("interop.moveChannelsCustomMessage",{render:function e(t,r,a){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},2046:function(e,t,r){"use strict";var a=r(2047);t["a"]=a["a"]},2047:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(1058);var g=r(412);var _=r(195);var y=r(411);var O=r(1078);var k=r(5);var j=new k["b"]("enterprise_moving_channels");var C=/\r?\n|\r/g;var E={onInputChange:v.a.func,onCheckboxChange:v.a.func,customMessageError:v.a.string,featureDeleteMovedChannels:v.a.bool.isRequired};var S={onInputChange:f["noop"],onCheckboxChange:f["noop"],customMessageError:null};var w=300;var I=void 0;var T=function e(t){return I[t]};var N=function e(t){t&&t.length>w?Object(g["b"])(Object(g["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(g["b"])(Object(g["a"])().channels.setMoveChannelMessageError())};var R=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={includeCustomMessage:false,customMessage:""};r.onInputChange=r.onInputChange.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.onCheckboxChange=r.onCheckboxChange.bind(r);r.props.featureDeleteMovedChannels&&(I={message_too_long:j.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:w}),message_empty:j.t("Please fill in a custom message.")});return r}s()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var r=t.replace(C," ");this.setCustomMessage(r);this.props.onInputChange(r);N(r)}},{key:"onCheckboxChange",value:function e(t){t.persist();var r=t.target.checked;this.setIncludeCustomMessage(r);this.props.onCheckboxChange(r);r?N(this.state.customMessage):Object(g["b"])(Object(g["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;var r=j.t("Add a custom message to channel members");var a=j.t("This message will appear within the Slackbot notification that each member will receive.");return h.a.createElement("div",null,h.a.createElement(_["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:r,subtext:a,type:"inline"},h.a.createElement(O["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange})))}},{key:"renderCustomMessageTextarea",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.customMessage;var r=this.props.customMessageError;var a=j.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return h.a.createElement("div",{className:"margin_left_150"},h.a.createElement(y["a"],{id:"ent_mvch_custom_message",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:a,maxCharacterLimit:w,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:T(r)||r,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;return h.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(p["PureComponent"]);R.displayName="MoveChannelsCustomMessage";R.defaultProps=S;t["a"]=Object(b["a"])("feature_delete_moved_channels")(R)},20477:function(e,t){},20481:function(e,t){},2049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(2050);Object(l["a"])("interop.orgWideSettingsPane",{render:function e(t,r,a){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},20491:function(e,t){},2050:function(e,t,r){"use strict";var a=r(2051);t["a"]=a["a"]},20501:function(e,t){},20503:function(e,t,r){var a={"./actions.js":1980,"./api.js":22316,"./apps.js":22320,"./automount.js":22321,"./bots.js":22322,"./channels.js":22323,"./console.js":1981,"./constants.js":1982,"./enterprise.js":22324,"./enterprise/mount-create-workspace-modal.jsx":1983,"./enterprise/mount-dashboard-app-management.jsx":2016,"./enterprise/mount-dashboard-app-profile.jsx":22335,"./enterprise/mount-dashboard-nav.jsx":2020,"./enterprise/mount-dashboard-team-apps.jsx":22346,"./enterprise/mount-migration-table.jsx":22353,"./enterprise/mount-move-channels-custom-message.jsx":2045,"./enterprise/mount-org-wide-settings-pane.jsx":2049,"./enterprise/mount-terms-of-service.jsx":22356,"./enterprise/mount-workspace-directory.jsx":22358,"./eventlog.js":22370,"./experiments.js":22371,"./flannel.js":2073,"./greetings-earth.js":2074,"./infra/beacon-api-call.js":22372,"./infra/boot/index.js":2079,"./infra/connectivity.js":2080,"./infra/metrics.js":3109,"./infra/rtm.js":22375,"./infra/socket-manager.js":2082,"./infra/token-to-team-id.js":2083,"./lazy-filter-select.jsx":2084,"./member-counts.js":22376,"./members.js":3202,"./membership.js":22378,"./metrics-responsiveness.js":22379,"./mount-apps-browser.js":2134,"./mount-channel-notification-settings.js":3221,"./mount-channel-options-dialog.js":2175,"./mount-channel-sidebar.js":2213,"./mount-connected-workspaces.js":22388,"./mount-custom-status-input.js":22393,"./mount-downloads-view.js":2222,"./mount-emoji-picker.js":2235,"./mount-file-upload-banner.js":22405,"./mount-files-flexpane.js":22407,"./mount-global-nav.js":22424,"./mount-image-viewer.js":22488,"./mount-keyboard-shortcuts.js":2282,"./mount-lazy-filter-select.js":2294,"./mount-menu.js":2296,"./mount-message-actions-menu.js":22493,"./mount-message-pane-banner.js":22526,"./mount-message-pane-drag-overlay.js":22538,"./mount-message-pane.js":2298,"./mount-migration-blocker.js":22545,"./mount-modal-container.js":22549,"./mount-notification-bar.js":22551,"./mount-oauth-confirm.jsx":22555,"./mount-org-retention-request.js":2300,"./mount-pricing-calculator.js":22559,"./mount-redox.js":22561,"./mount-scrollbar.js":22567,"./mount-search.js":2313,"./mount-service-import-mapping-form.js":22569,"./mount-thread-drag-overlay.js":22576,"./mount-threads-flexpane.js":22579,"./mount-toast.js":2321,"./mount-tooltip-tip.js":2323,"./mount-user-groups-flexpane.js":22584,"./mpims.js":22597,"./open-app-dialog.js":22598,"./open-app-management-modal.js":22599,"./open-app-permission-dialog.js":22600,"./open-app-remove-dialog.js":22601,"./open-channel-notification-settings-dialog.js":22603,"./prefs.js":22605,"./presence-manager.js":22980,"./reactions.js":22606,"./redux.js":2325,"./rules.js":2327,"./rules/files.js":22621,"./rules/notifications.js":2328,"./search.js":22622,"./searcher.js":22623,"./send-message.js":22625,"./set-app-element-for-react-modal.js":3093,"./slash-command.js":22626,"./teams.js":22962,"./texty.js":2330,"./typing.js":22642,"./user-groups.js":22643,"./utility/a11y.js":22644,"./utility/broadcast-keywords.js":23063,"./utility/client-action-token.js":2331,"./utility/clipboard.js":2332,"./utility/clog.js":3045,"./utility/currency.js":22648,"./utility/date-time.js":2333,"./utility/desktop.js":22649,"./utility/environment.js":22650,"./utility/format.js":2334,"./utility/i18n.js":2335,"./utility/messages.js":2336,"./utility/search/autocomplete-suggestions.js":22652,"./utility/search/autocomplete.js":22653,"./utility/search/conversions.js":22654,"./utility/threads.js":22655,"./utility/url.js":716,"./utility/utility.js":2337,"./utility/versions.js":22658,"./utility/webapp.js":3192};function n(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=20503},2051:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(5);var m=r(2052);var b=r(2055);var g=r(20204);var _=r.n(g);var y=new f["b"]("enterprise_settings");var O={loading:v.a.bool,saving:v.a.bool,customTos:v.a.bool,membersTos:v.a.string,guestsTos:v.a.string,membersContentType:v.a.string,guestsContentType:v.a.string};var k={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text"};var j=function e(){return h.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};j.displayName="renderLoadingContainer";var C=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,r=t.saving,a=t.customTos,n=t.membersTos,i=t.guestsTos,s=t.membersContentType,o=t.guestsContentType;var c={saving:r,customTos:a,membersTos:n,guestsTos:i,membersContentType:s,guestsContentType:o};return h.a.createElement(b["a"],c)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-org_wide_settings_pane"},h.a.createElement(m["a"],{title:y.t("Organization Settings")}),j(),this.maybeRenderCustomTOS())}}]);return t}(p["PureComponent"]);C.displayName="OrgWideSettingsPane";C.defaultProps=k;var E=C;t["a"]=C},20519:function(e,t){},2052:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(20199);var m=r.n(f);var b={title:v.a.string,subtitle:v.a.string,description:v.a.node};var g={title:"",subtitle:"",description:null};var _=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return h.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return h.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return h.a.createElement("p",{className:"padding_top_50 margin_0 sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(p["PureComponent"]);_.displayName="SettingsHeader";_.defaultProps=g;t["a"]=_},2055:function(e,t,r){"use strict";var a=r(2056);t["a"]=a["a"]},2056:function(e,t,r){"use strict";var a=r(374);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(5);var j=r(412);var C=r(21705);var E=r(271);var S=r(708);var w=r(2057);var I=r(2058);var T=r(2062);var N=new k["b"]("enterprise_settings");var R="text";var A="url";var M={saving:m.a.bool,customTos:m.a.bool,membersTos:m.a.string,membersContentType:m.a.string,guestsTos:m.a.string,guestsContentType:m.a.string,openModal:m.a.func};var P={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:y["noop"]};var x=function e(t){var r=t.customTos,a=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===A?a:"",membersText:n===R?a:"",membersShowAll:!r,membersContentType:n,guestsUrl:s===A?i:"",guestsText:s===R?i:"",guestsShowAll:!r,guestsContentType:s}};var D=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state=s()({},x(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(y["bindAll"])(r,["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","onConfirmDisable","onConfirmEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return r}u()(t,[{key:"componentDidUpdate",value:function e(t,r){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&r.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}})}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}})}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}})}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onConfirmDisable",value:function e(){this.setIsPending(true);Object(j["b"])(Object(j["a"])().settings.deactivateOrgCustomTOSSettings())}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,c=t.guestsText,l=t.guestsShowAll,u=t.guestsContentType;var d=s===R?n:a;var v=this.props.customTos;var p={customTos:v,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:l};if(!r){var h=u===R?c:o;p.guestsTos=h;p.guestsContentType=u}Object(j["b"])(Object(j["a"])().settings.createOrgCustomTOSSettings(p))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y["noop"];this.setState(function(){return t},r)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var r=this;this.setState(function(){return s()({},x(r.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var r=this.renderInputForm();var a=this.renderAcceptForm();var n=function e(){return t.props.customTos?N.t("Edit Custom Terms of Service"):N.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?N.t("Update Custom Terms of Service"):N.t("Enable Custom Terms of Service")};var s=N.t("Next");var o=N.t("Cancel");var c=this.state.isPending;return[{children:r,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:a,goButtonText:i(),goButtonIsPending:c,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;return g.a.createElement(S["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,steps:this.buildEnableSteps(),position:"fixed",ref:function e(r){t.settingsModalRef=r}})}},{key:"renderDisable",value:function e(){var t=N.t("Disable");var r="danger";var a=N.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var n=N.t("Disable Custom Terms of Service");var i=this.state.isPending;return g.a.createElement(E["a"],{goButtonText:t,goButtonType:r,goButtonIsPending:i,title:n,onGo:this.onConfirmDisable,shouldCloseOnGo:false},g.a.createElement("p",null,a))}},{key:"renderInputForm",value:function e(){var t=this;var r=this.state,a=r.all,i=r.isValid,o=r.isPending,c=r.showEnable,l=r.showEdit,u=n()(r,["all","isValid","isPending","showEnable","showEdit"]);var d=s()({},u,{onSubmit:this.setFormSettings});return g.a.createElement(I["a"],s()({},d,{ref:function e(r){t.inputForm=r}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var r=!this.props.customTos;var a={membersShowAll:r,guestsShowAll:r,onSubmit:this.setFormSettings};return g.a.createElement(w["a"],s()({},a,{ref:function e(r){t.acceptForm=r}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var r={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var a=N.t("Custom Terms of Service");var n=t?N.t("Enabled"):N.t("Disabled");var i=N.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return g.a.createElement(T["a"],{label:a,state:n,description:i,onClick:this.onClick,control:r})}},{key:"render",value:function e(){return g.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting(),this.maybeRenderEnable())}}]);return t}(b["PureComponent"]);D.displayName="CustomTOSSetting";D.defaultProps=P;var F={openModal:C["openModal"]};t["a"]=Object(_["connect"])(null,F)(D)},2057:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(1078);var _=r(195);var y=new b["b"]("enterprise_settings");var O={membersShowAll:v.a.bool,guestsShowAll:v.a.bool,onSubmit:v.a.func.isRequired};var k={membersShowAll:true,guestsShowAll:true,onSubmit:f["noop"]};var j=function e(t){var r=t.type,a=t.value,n=t.label,i=t.onChange;return h.a.createElement(_["a"],{id:"tos_accept_all_"+r+"_label",htmlFor:"tos_accept_all_"+r+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:n},h.a.createElement(g["a"],{id:"tos_accept_all_"+r+"_checkbox",checked:a,onChange:i}))};j.displayName="renderCheckbox";var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={membersShowAll:r.props.membersShowAll,guestsShowAll:r.props.guestsShowAll};Object(f["bindAll"])(r,["onMembersShowAllChange","onGuestsShowAllChange"]);return r}s()(t,[{key:"onMembersShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{membersShowAll:r}})}},{key:"onGuestsShowAllChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{guestsShowAll:r}})}},{key:"submit",value:function e(t){var r=this.state,a=r.membersShowAll,n=r.guestsShowAll;var i={membersShowAll:a,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:y.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return j(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:y.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return j(t)}},{key:"render",value:function e(){var t=y.t("Require existing members to accept the new Terms of Service?");var r=y.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return h.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},h.a.createElement("h3",{className:"margin_bottom_100"},t),h.a.createElement("p",{className:"margin_bottom_200"},r),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(p["PureComponent"]);C.displayName="CustomTOSAcceptForm";C.defaultProps=k;t["a"]=C},2058:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(20615);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(8);var C=r.n(j);var E=r(2059);var S=r(5);var w=r(37);var I=r(195);var T=r(283);var N=r(1074);var R=r(1075);var A=r(410);var M=r(411);var P=r(20200);var x=r.n(P);var D=new S["b"]("enterprise_settings");var F="members";var L="guests";var B="text";var U="url";var q="all";var H="not_all";var W="/custom_tos_view";var G=16e3;var V={membersUrl:g.a.string,membersText:g.a.string,membersContentType:g.a.oneOf([B,U]),guestsUrl:g.a.string,guestsText:g.a.string,guestsContentType:g.a.oneOf([B,U]),onSubmit:g.a.func.isRequired};var z={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text",onSubmit:O["noop"]};var K=D.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,r=e.key,a=e.text;return"a"===t?y.a.createElement("a",{key:r,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},a):null});var Q=function e(t){var r=t.error,a=t.url,n=t.type,i=t.onChange;var s=D.t("https://\u2026");return y.a.createElement(A["a"],{id:"tos_"+n+"_input",name:"tos_"+n+"_input",value:a,onChange:i,errorText:r,errorLevel:"error",placeholder:s})};Q.displayName="renderInput";var Y=function e(t){var r=t.error,a=t.text,n=t.type,i=t.onChange;return y.a.createElement(M["a"],{resize:"none",id:"tos_"+n+"_textarea",name:"tos_"+n+"_textarea",value:a,hintText:K,onChange:i,errorText:r,errorLevel:"error"})};Y.displayName="renderTextarea";var J=function e(t,r){if(!Object(E["d"])(r)){if(t===F)return D.t("Please enter Terms of Service for Members.");if(t===L)return D.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(r.length>=G)return D.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:G});return""};var Z=function e(t,r){if(!Object(E["d"])(r)){if(t===F)return D.t("Please enter Terms of Service URL for Members.");if(t===L)return D.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(E["b"])(r))return D.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var X=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={all:r.props.guestsText||r.props.guestsUrl?H:q,membersUrl:r.props.membersUrl,membersText:r.props.membersText,membersContentType:r.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:r.props.guestsUrl,guestsText:r.props.guestsText,guestsContentType:r.props.guestsContentType,guestsUrlError:"",guestsTextError:""};r.onAllChange=r.onAllChange.bind(r);r.onMembersTextChange=r.onTextChange.bind(r,F);r.onGuestsTextChange=r.onTextChange.bind(r,L);r.onMembersUrlChange=r.onUrlChange.bind(r,F);r.onGuestsUrlChange=r.onUrlChange.bind(r,L);r.onMembersToggle=r.onToggle.bind(r,F);r.onGuestsToggle=r.onToggle.bind(r,L);return r}v()(t,[{key:"onAllChange",value:function e(t){var r=t.target.value;this.setState(function(){return{all:r}})}},{key:"onToggle",value:function e(t){var r=this;var a=t+"ContentType";this.setState(function(){return c()({},a,r.state[a]===B?U:B)})}},{key:"onTextChange",value:function e(t,r){this.setState(function(){var e;return e={},c()(e,t+"Text",r),c()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,r){this.setState(function(){var e;return e={},c()(e,t+"Url",r),c()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var r=this.state,a=r.all,n=r.membersUrl,i=r.membersText,s=r.membersContentType,o=r.guestsUrl,c=r.guestsText,l=r.guestsContentType;var u={};s===B&&(u.membersTextError=J(F,i));s===U&&(u.membersUrlError=Z(F,n));if(a!==q){l===B&&(u.guestsTextError=J(L,c));l===U&&(u.guestsUrlError=Z(L,o))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var r=this.state,a=r.all,i=s()(r,["all"]);var o=n()({all:a===q},i);this.props.onSubmit(o,t)}},{key:"isValid",value:function e(){var t=this.state,r=t.all,a=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,c=t.guestsUrl,l=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,v=t.guestsTextError;var p=i===B&&n&&!o||i===U&&a&&!s;if(r===q||!p)return p;var h=u===B&&l&&!v||u===U&&c&&!d;return h}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==U)return null;var t=this.state,r=t.membersUrl,a=t.membersUrlError;var n={error:a,url:r,type:F,onChange:this.onMembersUrlChange};return Q(n)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===q)return null;if(this.state.guestsContentType!==U)return null;var t=this.state,r=t.guestsUrl,a=t.guestsUrlError;var n={error:a,url:r,type:L,onChange:this.onGuestsUrlChange};return Q(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==B)return null;var t=this.state,r=t.membersText,a=t.membersTextError;var n={error:a,text:r,type:F,onChange:this.onMembersTextChange};return Y(n)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===q)return null;if(this.state.guestsContentType!==B)return null;var t=this.state,r=t.guestsText,a=t.guestsTextError;var n={error:a,text:r,type:L,onChange:this.onGuestsTextChange};return Y(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,r=t.all,a=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(r===q)return null;var s=!n&&i===B||!a&&i===U;var o={previewIsDisabled:s,contentType:i,content:i===B?n:a,type:L,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,r=t.membersUrl,a=t.membersText,n=t.membersContentType;var i=!a&&n===B||!r&&n===U;var s={previewIsDisabled:i,contentType:n,content:n===B?a:r,type:F,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var r=this;var a=t.previewIsDisabled,n=t.contentType,i=t.content,s=t.type;var o=D.t("Preview");var c=n===U;var l=c?function(){var e=window.open((Object(O["startsWith"])(i.toLowerCase(),"http")?"":"http://")+i,"_blank");e.opener=null}:function(){return r["tos_preview_"+s].submit()};var u=C()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:a});var d=y.a.createElement(T["a"],{disabled:a,onClick:l},y.a.createElement("span",{className:u},o," ",y.a.createElement(w["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return d;return y.a.createElement("form",{action:W,method:"POST",ref:function e(t){r["tos_preview_"+s]=t},target:"_blank"},y.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:i}),d)}},{key:"renderInputBar",value:function e(t){var r=t.contentType,a=t.onToggle;var n=D.t("Terms of Service");var i=r===B?D.t("Enter URL"):D.t("Enter text");var s=C()("p-ent_custom_tos_input_form__small_text","padding_left_50");return y.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},y.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},n),this.renderPreviewButton(t),y.a.createElement(T["a"],{onClick:a},y.a.createElement("span",{className:s},i)))}},{key:"renderRadio",value:function e(t){var r=this.state.all;var a=t.value,n=t.label;return y.a.createElement("div",{key:"tos_type_"+a},y.a.createElement(I["a"],{id:"tos_type_"+a+"_label",htmlFor:"tos_type_"+a+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:n},y.a.createElement(N["a"],{id:"tos_type_"+a+"_radio",value:a,onChange:this.onAllChange,checked:a===r})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:q,label:D.t("Use the same Terms of Service as Full Members")},{value:H,label:D.t("Use a different Terms of Service")}];return y.a.createElement(R["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=D.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var r=D.t("Full Members");var a=D.t("Guests");return y.a.createElement("div",null,y.a.createElement("p",null,t),y.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),y.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(_["PureComponent"]);X.displayName="CustomTOSInputForm";X.defaultProps=z;t["a"]=X},20584:function(e,t){},2059:function(e,t,r){"use strict";r.d(t,"d",function(){return i});r.d(t,"b",function(){return c});r.d(t,"a",function(){return l});r.d(t,"c",function(){return u});var a=r(10);var n=Object(a["c"])("TS.validation.firstalphanumeric",function(){return true});var i=Object(a["c"])("TS.validation.required",function(){return true});var s=Object(a["c"])("TS.validation.team_name_with_errors",function(){return true});var o=Object(a["c"])("TS.validation.pattern",function(){return true});var c=Object(a["c"])("TS.validation.isurl",function(){return true});var l=Object(a["c"])("TS.ui.validation.getErrorMessage",function(){return null});var u=Object(a["c"])("TS.ui.validation.maybeConvertNameErrorCode",function(){return null})},2062:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(2063);var g=r(2066);var _=r(20203);var y=r.n(_);var O={label:v.a.string.isRequired,state:v.a.string.isRequired,type:v.a.string.isRequired,description:v.a.node,onClick:v.a.func,control:v.a.object.isRequired};var k={label:"",state:"",type:"",description:null,onClick:f["noop"],control:{}};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLabel",value:function e(){return h.a.createElement(b["a"],{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,r=t.state,a=t.description;return h.a.createElement(b["a"],{title:r,description:a,className:"bold"})}},{key:"renderButtonControl",value:function e(){var t=this.props.control,r=t.enabled,a=t.onEnable,n=t.onDisable,i=t.onEdit;return h.a.createElement(g["a"],{enabled:r,onEnable:a,onDisable:n,onEdit:i})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-ent_settings_item",onClick:this.props.onClick,role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(p["PureComponent"]);j.displayName="SettingsItem";j.defaultProps=k;t["a"]=j},2063:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(20201);var g=r.n(b);var _={title:v.a.string,titleClass:v.a.string,description:v.a.node,className:v.a.string};var y={title:"",titleClass:"",description:null,className:""};var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,r=t.titleClass,a=t.className;var n=m()(a,r);return h.a.createElement("h4",{className:n},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return h.a.createElement("span",{className:"sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription())}}]);return t}(p["PureComponent"]);O.displayName="SettingsItemHeader";O.defaultProps=y;t["a"]=O},20630:function(e,t){},2066:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(3184);var _=r(20202);var y=r.n(_);var O=new b["b"]("enterprise_settings");var k={enabled:v.a.bool,onEnable:v.a.func.isRequired,onDisable:v.a.func.isRequired,onEdit:v.a.func.isRequired};var j={enabled:false,onEnable:f["noop"],onDisable:f["noop"],onEdit:f["noop"]};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEnable=r.onEnable.bind(r);r.onDisable=r.onDisable.bind(r);r.onEdit=r.onEdit.bind(r);return r}s()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=O.t("Enable");return h.a.createElement("div",{className:"p-ent_settings_item_button_control"},h.a.createElement(g["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=O.t("Disable");var r=O.t("Edit");return h.a.createElement("div",{className:"p-ent_settings_item_button_control"},h.a.createElement(g["d"],{type:"danger",size:"small",onClick:this.onDisable},t),h.a.createElement(g["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},r))}},{key:"renderButtonControls",value:function e(){return this.props.enabled?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(p["PureComponent"]);C.displayName="SettingsItemButtonControl";C.defaultProps=j;t["a"]=C},2073:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(269);var n=r(42);var i=r(21781);Object(n["a"])("interop.Flannel",{debugSetResponseDelay:a["b"],query:function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(a["e"])({commandType:t,args:r,attemptNumber:n}))},fetchRawMembersWithQuery:function e(t,r){return TS.redux.dispatch(Object(i["d"])({query:t,limit:r}))},fetchRawChannelsWithQuery:function e(t,r){return TS.redux.dispatch(Object(i["b"])({query:t,limit:r}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(i["c"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(i["a"])({ids:t}))},getSocketStartArgs:function e(){return Object(a["d"])(TS.redux.getState())},useSocket:function e(){return Object(a["g"])(TS.redux.getState())},getFlannelConnectionUrl:a["c"]})},2074:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(2075);Object(a["a"])("interop.greetingsEarth",{greet:n["a"],takeMeToYourLeader:n["b"]})},2075:function(e,t,r){"use strict";t["a"]=n;t["b"]=i;var a=r(43);function n(){Object(a["info"])("Greetings Earth!")}function i(){Object(a["info"])("\ud83d\udc7d")}},2077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"hydrateStartData",function(){return j});var a=r(189);var n=r.n(a);var i=r(172);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21699);var u=r(3);var d=r.n(u);var v=r(907);var p=r(21781);var h=r(22374);var f=r(439);var m=r(1036);var b=r(3204);var g=r(115);var _=r(21698);var y=r(21697);var O=r(12);var k=r(2078);var j=Object(l["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(i["method"])(function(e,t,r){var a=r.startData;var i=t();var s=c.a.assign({},a.rtm_start);var o=c.a.get(a,"self",c.a.get(s,"self"));var l=c.a.get(o,"id");var u=Object(O["isFeatureEnabled"])(i,"feature_flannel_start_channel_rows")?s.channels:a.channels;if(u&&a.my_channels){var d=a.my_channels,p=void 0===d?{}:d,h=a.rtm_start,f=void 0===h?{}:h;var m=f.last_read,b=void 0===m?{}:m,j=f.channels_priority,S=void 0===j?{}:j,w=f.is_open,I=void 0===w?[]:w,T=f.starred,N=void 0===T?[]:T;var R=I.reduce(function(e,t){e[t]=true;return e},{});var A=N.reduce(function(e,t){e[t]=true;return e},{});var M=[];var P=[];var x=u.length;for(var D=0;D<x;D++){var F=u[D];var L=F.id;var B=p[L];var U=!!B;var q=b[L];var H=S[L];var W=!!A[L];var G=!!R[L];var V=Object(v["isMpim"])(F)?n()({},F,{is_member:U,latest:B,last_read:q,priority:H,is_starred:W,is_open:G}):n()({},F,{is_member:U,latest:B,last_read:q,priority:H,is_starred:W});(F.is_group?M:P).push(V)}s.groups=M;s.channels=P}delete s.users;delete s.updated_users;delete s.updated_bots;s.bots=[];if(Object(O["isFeatureEnabled"])(i,"feature_legacy_cfm")){s.users=[o];return Promise.resolve(s)}var z=void 0;var K=Object(O["getFromBootData"])(i,"file");if(K){var Q=c.a.map(K.comments||[],"user");z=Q.concat(K.user)}var Y=void 0;var J=void 0;if(!Object(k["a"])()){Y=c.a.map(Object(_["getAllMembers"])(i),"id");J=Object(O["isFeatureEnabled"])(i,"feature_lazy_channels")?c.a.map(Object(y["getAllChannels"])(i),"id"):[]}var Z=c()([l]).concat(z).concat(Y).uniq().compact().value();var X=Object(O["isFeatureEnabled"])(i,"feature_lazy_channels")?c.a.difference(J,c.a.keys(a.my_channels)):[];if(!Z.length&&!X.length){Object(g["c"])(123,"Got rtm.start data and don't need to fetch anything");s.users=[];return Promise.resolve(s)}Object(g["c"])(123,"Got rtm.start data but need to fetch "+Z.length+" members and "+X.length+" channels");if(Object(g["g"])(1989)){Object(g["c"])(1989,Z.join(", "));Object(g["c"])(1989,X.join(", "))}C(e,t,Z).catch(function(e){Object(g["a"])("Got error while trying to fetch "+Z.length+" members for runaway start data :(",e);Object(g["b"])("Members we were trying to fetch: "+Z.join(", "))});Object(O["isFeatureEnabled"])(i,"feature_lazy_channels")&&E(e,t,X).catch(function(e){Object(g["a"])("Got error while trying to fetch "+X.length+" channels for runaway start data :(",e);Object(g["b"])("Channels we were trying to fetch: "+X.join(", "))});s.users=[o];return Promise.resolve(s)});return function(t,r,a){return e.apply(this,arguments)}}());j.propTypes={startData:u["PropTypes"].object.isRequired};function C(e,t,r){return e(Object(p["c"])({ids:r})).catch(function(t){Object(g["d"])("infra/boot/data: Got error from fetchMembersById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var a="infra/boot/data: fetchMembersById failed";return e(Object(b["g"])({ids:r,reason:a})).then(function(e){var t=e.members;return{objects:t}})}).tap(function(){return Object(h["a"])()}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.objects;return Object(f["i"])(t)})}function E(e,t,r){return e(Object(p["a"])({ids:r})).catch(function(t){Object(g["d"])("infra/boot/data: Got error from fetchChannelsById; falling back to version with API fallback. Error: "+t+". Stack: "+t.stack);var a="infra/boot/data: fetchChannelsById failed";return e(Object(m["l"])({ids:r,reason:a})).then(function(e){var t=e.channels;return{objects:t}})}).tap(function(){return Object(h["a"])()}).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.objects;return e(Object(y["upsertChannels"])({channels:r}))})}},2079:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2077);var n=r(42);Object(n["a"])("interop.boot",{data:a})},2080:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(403);var n=r(42);Object(n["a"])("interop.BandwidthChecker",a["a"])},2082:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(234);var n=r(42);function i(e){if(!a[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=a[e].apply(a,arguments);return TS.redux.dispatch(t)}}Object(n["a"])("interop.SocketManager",{clearFastReconnectUrl:i("clearFastReconnectUrl"),debugGetInstance:i("debugGetInstance"),debugGetState:i("debugGetState"),debugResetRateLimit:i("debugResetRateLimit"),debugSetFastReconnectsEnabled:i("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:i("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:i("debugSetSocketSendFlakiness"),debugTriggerError:i("debugTriggerError"),disconnect:i("disconnect"),finalizeProvisionalConnection:i("finalizeProvisionalConnection"),reconnectImmediately:i("reconnectImmediately"),send:i("send"),sleep:i("sleep"),start:i("start"),wake:i("wake")})},2083:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(270);var n=r(42);Object(n["a"])("interop.setTeamIdForToken",a["c"])},2084:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(5);var c=r(42);var l=r(1081);var u=r(1082);var d=r(1083);var v=r(1084);function p(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function h(e){var t=new o["b"]("channel_browser");var r=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var r=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},r)});return r}function f(e){var t=new o["b"]("team_picker");var r=void 0;r=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return r}function m(e){return n.a.createElement(l["a"],{item:e})}m.displayName="teamPickerListItem";function b(e){return n.a.createElement(u["a"],{item:e})}b.displayName="teamPickerToken";function g(e){return n.a.createElement(d["a"],{item:e})}g.displayName="memberListItem";function _(e){return n.a.createElement(v["a"],{item:e})}_.displayName="memberListToken";Object(c["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:p,channelBrowserSortByToken:h,teamPickerNoResults:f,teamPickerListItem:m,teamPickerToken:b,memberListItem:g,memberListToken:_})},2087:function(e,t,r){"use strict";var a=r(2088);t["a"]=a["a"]},2088:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(271);var _=r(140);var y=r(23030);var O=r(2103);var k=r(21739);var j=r(1030);var C=r(3284);var E=r(12);var S=r(91);var w=r(1086);var I=r(5);var T=r(2089);var N=r(20153);var R=r.n(N);var A=new I["b"]("app_dialog");var M={appId:h.a.string.isRequired,app:h.a.object,featureAppDialogsNotifyOnCancel:h.a.bool,fetcher:h.a.func,id:h.a.string.isRequired,notifyCancel:h.a.func.isRequired,onClose:h.a.func,submitLabel:h.a.string,submitter:h.a.func,title:h.a.string.isRequired};var P={app:{isNonExistent:true},featureAppDialogsNotifyOnCancel:false,fetcher:null,onClose:d["noop"],submitLabel:A.t("Submit"),submitter:null};var x=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={goButtonIsDisabled:true,goButtonIsPending:false,shouldNotifyOnCancel:false};Object(d["bindAll"])(r,["getShouldShowSpeedBump","onFetchResolved","onSubmitRejected","onSubmitResolved","onCancel","onGo","onKeyPressedCmdEnter","renderTitle","setElementsContainerRef"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.track("opened");this.keyCommands=new _["a"];this.keyCommands.bindAll([{keys:["command+enter"],handler:this.onKeyPressedCmdEnter}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onFetchResolved",value:function e(t){var r=t.notifyOnCancel;this.setState(function(){return{goButtonIsDisabled:false,shouldNotifyOnCancel:r}})}},{key:"onSubmitRejected",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{goButtonIsPending:false}},this.props.onClose)}},{key:"onCancel",value:function e(){var t=this.props,r=t.onClose,a=t.id,n=t.featureAppDialogsNotifyOnCancel,i=t.notifyCancel;var s=this.state.shouldNotifyOnCancel;s&&n&&i(a);this.track("cancelled");Object(d["defer"])(r)}},{key:"onKeyPressedCmdEnter",value:function e(){this.onGo()}},{key:"onGo",value:function e(){this.setState(function(){return{goButtonIsPending:true}});this.elementsContainer.submit().then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.elementsContainer&&this.elementsContainer.getShouldShowSpeedBump())}},{key:"setElementsContainerRef",value:function e(t){this.elementsContainer=t&&t.getWrappedInstance()}},{key:"track",value:function e(t){var r=this.props,a=r.appId,n=r.id;Object(S["b"])("APP_DIALOG_"+t.toUpperCase(),{app_id:a,dialog_id:n,contexts:{core:{app_id:a}}})}},{key:"renderTitle",value:function e(){var t=this.props.app;var r=Object(w["a"])(t,72);var a=A.t("Header Icon");return m.a.createElement("div",{className:"p-app_dialog__title"},m.a.createElement("img",{alt:a,className:"p-app_dialog__title_icon",src:r}),m.a.createElement("div",{className:"p-app_dialog__title_text"},this.props.title))}},{key:"render",value:function e(){var t=this.props,r=t.appId,a=t.app;var n="/apps/"+r;var i=void 0;i=Object(k["b"])(a)?a.name:Object(k["d"])(a)?m.a.createElement(y["a"],{type:"unknown"}):m.a.createElement(y["a"],{type:"non-existent"});var s=A.rt("Learn more about {appName}",{appName:i});var o=this.props,c=o.fetcher,l=o.id,u=o.submitLabel,d=o.submitter,v=o.title;var p=this.state,h=p.goButtonIsDisabled,f=p.goButtonIsPending;return m.a.createElement(g["a"],{contentLabel:v,className:"p-app_dialog",footerIcon:"question-circle",footerLink:n,footerText:s,getShouldShowSpeedBump:this.getShouldShowSpeedBump,goButtonIsDisabled:h,goButtonIsPending:f,goButtonText:u,goOnEnterPressed:false,onCancel:this.onCancel,onGo:this.onGo,shouldCloseOnGo:false,title:this.renderTitle()},m.a.createElement(T["a"],{fetcher:c,id:l,onFetchResolved:this.onFetchResolved,onSubmitRetried:this.onGo,ref:this.setElementsContainerRef,submitter:d}))}}]);return t}(f["Component"]);x.displayName="AppDialog";x.defaultProps=P;var D=function e(t,r){if(Object(E["isFeatureEnabled"])(t,"feature_apps_store_m11n"))return Object(C["getAppById"])(t,r);return Object(j["a"])(r)};var F=function e(t,r){var a=r.appId;return{app:D(t,a),featureAppDialogsNotifyOnCancel:Object(E["isFeatureEnabled"])(t,"feature_app_dialogs_notify_on_cancel")}};var L={notifyCancel:O["d"]};var B=x;t["a"]=Object(b["connect"])(F,L)(x)},2089:function(e,t,r){"use strict";var a=r(2090);t["a"]=a["a"]},2090:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(2103);var _=r(2091);var y=r(2092);var O={fetcher:h.a.func.isRequired,id:h.a.string.isRequired,onFetchRejected:h.a.func,onFetchResolved:h.a.func,onSubmitRetried:h.a.func,submitter:h.a.func.isRequired};var k={onFetchRejected:d["noop"],onFetchResolved:d["noop"],onSubmitRetried:d["noop"]};var j=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},isLoading:true};Object(d["bindAll"])(r,["onFetchRejected","onFetchResolved","onSubmit","onSubmitRejected","onSubmitResolved","retryLoad"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.load()}},{key:"onFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}},this.props.onFetchRejected)}},{key:"onFetchResolved",value:function e(t){var r=this;this.setState(function(){return{elements:t.elements,isLoading:false}},function(){r.props.onFetchResolved(t)})}},{key:"onSubmitRejected",value:function e(t){var r=t.data||{};var a={isSubmitting:false};r.error===g["a"].invalidSubmission?a.errors=Object(_["a"])(r.dialogErrors):a.submittingFailed=true;this.setState(function(){return a});throw t}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{errors:{},isSubmitting:false,submittingFailed:false}})}},{key:"onSubmit",value:function e(t,r){this.setState(function(){return{isSubmitting:true}});return this.props.submitter({dialogId:t,submission:r}).then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.dialogElements&&this.dialogElements.getShouldShowSpeedBump())}},{key:"load",value:function e(){this.props.fetcher(this.props.id).then(this.onFetchResolved).catch(this.onFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"submit",value:function e(){return this.dialogElements.submit()}},{key:"render",value:function e(){var t=this;return m.a.createElement(y["a"],{id:this.props.id,elements:this.state.elements,serverErrors:this.state.errors,isLoading:this.state.isLoading,isSubmitting:this.state.isSubmitting,loadingFailed:this.state.loadingFailed,onLoadRetried:this.retryLoad,onSubmitRetried:this.props.onSubmitRetried,onSubmit:this.onSubmit,ref:function e(r){t.dialogElements=r},submittingFailed:this.state.submittingFailed})}}]);return t}(f["Component"]);j.displayName="AppDialogElementsContainer";var C=function e(t,r){var a=r.fetcher,n=r.submitter;return{fetcher:a||function(e){return t(Object(g["b"])(e))},submitter:n||function(e){return t(Object(g["e"])(e))}}};j.defaultProps=k;t["a"]=Object(b["connect"])(null,C,null,{withRef:true})(j)},2091:function(e,t,r){"use strict";t["a"]=o;var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reduce(function(e,t){return s()({},e,n()({},t.name,t.error))},{})}var c={formatErrors:o}},2092:function(e,t,r){"use strict";var a=r(2093);t["a"]=a["a"]},2093:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3);var y=r.n(_);var O=r(12159);var k=r.n(O);var j=r(50);var C=r.n(j);var E=r(5);var S=r(69);var w=r(2094);var I=r(1085);var T=r(2098);var N=r(20152);var R=r.n(N);var A=new E["b"]("app_dialog");var M={id:y.a.string.isRequired,elements:y.a.array,isLoading:y.a.bool,isSubmitting:y.a.bool,loadingFailed:y.a.bool,serverErrors:y.a.object,submittingFailed:y.a.bool,onLoadRetried:y.a.func.isRequired,onSubmit:y.a.func.isRequired,onSubmitRetried:y.a.func.isRequired};var P={elements:[],serverErrors:{},isLoading:false,isSubmitting:false,loadingFailed:false,submittingFailed:false};var x=300;var D=3;var F=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={errors:{},lastActiveElementName:null,touchedElements:{},values:{}};Object(b["bindAll"])(r,["onInputBlurred","onInputChanged","onInputFocused","setFirstElementRef","submit","updateErrors"]);r.updateErrors=Object(b["debounce"])(r.updateErrors,x);return r}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=!t.isLoading&&this.props.isLoading;if(r){var a=t.elements.reduce(function(e,t){return s()({},e,n()({},t.name,t.value))},{});this.setState(function(){return{values:a}})}}},{key:"componentDidUpdate",value:function e(t){var r=!this.props.isLoading&&t.isLoading;var a=!this.props.isSubmitting&&t.isSubmitting;if(this.firstElement&&(r||a)){var n=Object(j["findDOMNode"])(this.firstElement);n&&n.focus()}}},{key:"onInputBlurred",value:function e(){this.setState(function(){return{lastActiveElementName:null}})}},{key:"onInputFocused",value:function e(){var t=this;this.setState(function(e){return{errors:Object(T["a"])({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"onInputChanged",value:function e(t,r){var a=this;var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.setTouched,c=void 0===o||o;this.setState(function(e){var i=t;var o=s()({},e.touchedElements,n()({},t,c));var l=s()({},e.values,n()({},t,r));var u=Object(T["a"])({elements:a.props.elements,lastActiveElementName:i,touchedElements:o,values:l});var d={lastActiveElementName:i,touchedElements:o,values:l};return u[t]?d:s()({},d,{errors:u})});this.updateErrors()}},{key:"getElementError",value:function e(t){var r=!this.state.touchedElements[t]&&this.props.serverErrors[t];return r||this.state.errors[t]||null}},{key:"getGeneralError",value:function e(t){return A.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var r=e.text;return k.a.createElement("button",{className:"c-deprecated_button--link",onClick:t},r)})}},{key:"getShouldShowSpeedBump",value:function e(t){var r=this.state,a=r.touchedElements,n=r.values;if("go"!==t)return Object(b["some"])(this.props.elements,function(e){var t=e.name,r=e.type;if(!a[t])return false;var i=n[t];if(r===I["a"].text||r===I["a"].textarea)return Object(b["get"])(i,"length",0)>=D;return!!i});return false}},{key:"setFirstElementRef",value:function e(t){this.firstElement=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"bindArgs",value:function e(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return t.bind.apply(t,[this].concat(a))}},{key:"updateErrors",value:function e(){var t=this;this.setState(function(e){return{errors:Object(T["a"])({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"maybeRenderGeneralError",value:function e(){if(this.props.submittingFailed)return k.a.createElement(w["a"],{message:this.getGeneralError(this.props.onSubmitRetried)});return null}},{key:"submit",value:function e(){var t=this;var r=null;var a=this.props.elements.reduce(function(e,t){return s()({},e,n()({},t.name,true))},{});var i=Object(T["a"])({elements:this.props.elements,lastActiveElementName:r,touchedElements:a,values:this.state.values});this.setState(function(){return{errors:i,lastActiveElementName:r,touchedElements:a}});if(!Object(b["isEmpty"])(i)){var o=new Error("Validation failed.");return Promise.reject(o)}return this.props.onSubmit(this.props.id,this.state.values).finally(function(){return t.setState(function(){return{touchedElements:{}}})})}},{key:"renderDialogElements",value:function e(){var t=this;return k.a.createElement("form",{onSubmit:function e(t){t.preventDefault()}},this.props.elements.map(function(e,r){return k.a.createElement(I["b"],{error:t.getElementError(e.name),dialogId:t.props.id,input:e,isSubmitting:t.props.isSubmitting,key:e.name,onBlur:t.onInputBlurred,onChange:t.bindArgs(t.onInputChanged,e.name),onFocus:t.onInputFocused,ref:0===r?t.setFirstElementRef:null,value:t.state.values[e.name]})}))}},{key:"render",value:function e(){var t=this.props,r=t.isLoading,a=t.isSubmitting,n=t.loadingFailed,i=t.onLoadRetried;var s=m()("p-app_dialog_elements",{"p-app_dialog_elements--empty":r||n},{"p-app_dialog_elements--submitting":a});var o=void 0;o=r?k.a.createElement(S["a"],{size:"medium"}):n?k.a.createElement(w["a"],{message:this.getGeneralError(i),align:"center"}):this.renderDialogElements();return k.a.createElement("div",{className:s},this.maybeRenderGeneralError(),o)}}]);return t}(O["Component"]);F.displayName="AppDialogElements";t["a"]=F;F.defaultProps=P},2094:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(1);var l=r.n(c);var u=r(335);var d={align:n.a.oneOf(Object(c["values"])(u["a"])),message:n.a.node.isRequired,type:n.a.oneOf(Object(c["values"])(u["c"]))};var v={align:u["a"].left,type:u["c"].boxed};function p(e){var t=e.align,r=e.message,a=e.type;return s.a.createElement(u["d"],{type:a,align:t,level:u["b"].error},r)}p.displayName="AppDialogError";p.defaultProps=v;t["a"]=Object(o["pure"])(p)},2095:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(8);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(195);var _=r(21913);var y=r(2103);var O=r(709);var k={dialogId:h.a.string.isRequired,error:h.a.string,input:h.a.object.isRequired,isSubmitting:h.a.bool,onBlur:h.a.func.isRequired,onChange:h.a.func.isRequired,onFocus:h.a.func.isRequired,fetchSelectSuggestionDialog:h.a.func.isRequired,value:h.a.string};var j={error:null,isSubmitting:false,value:""};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.optionsFetcher=r.optionsFetcher.bind(r);return r}s()(t,[{key:"getLabelId",value:function e(){var t=this.props,r=t.dialogId,a=t.input;return Object(O["a"])(r,a,"label")}},{key:"optionsFetcher",value:function e(t){var r=this.props,a=r.dialogId,n=r.input;return this.props.fetchSelectSuggestionDialog({dialogId:a,inputName:n.name,value:t})}},{key:"renderSelect",value:function e(){var t=this.props,r=t.dialogId,a=t.error,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,c=t.onFocus,l=t.value;var u=Object(O["b"])(r,n);var d=this.getLabelId();var v={id:u,isSubmitting:i,labelId:d,onBlur:s,onChange:o,onFocus:c,value:l,dialogId:r,dataSource:n.data_source,minQueryLength:n.min_query_length,optionsFetcher:this.optionsFetcher,options:n.options,optionGroups:n.option_groups,isDisabled:n.is_disabled,isRequired:n.is_required,hintText:n.hint,errorText:a,name:n.name,placeholder:n.placeholder,ref:this.setRef,selectedOptions:n.selected_options};return m.a.createElement(_["a"],v)}},{key:"render",value:function e(){var t=this.props,r=t.dialogId,a=t.input,n=t.isSubmitting;var i=Object(O["b"])(r,a);var s=this.getLabelId();var o=v()({"c-label--disabled":a.disabled||n});return m.a.createElement(g["a"],{className:o,htmlFor:i,id:s,key:a.name,text:a.label,optional:!!a.optional},this.renderSelect())}}]);return t}(m.a.Component);C.displayName="AppDialogInputSelect";var E={fetchSelectSuggestionDialog:y["c"]};C.defaultProps=j;t["a"]=Object(b["connect"])(null,E,null,{withRef:true})(C)},2096:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(195);var g=r(410);var _=r(709);var y={error:v.a.string,dialogId:v.a.string.isRequired,input:v.a.object.isRequired,isSubmitting:v.a.bool,onBlur:v.a.func.isRequired,onChange:v.a.func.isRequired,onFocus:v.a.func.isRequired,value:v.a.string};var O={error:null,isSubmitting:false,value:""};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.error,a=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,c=t.onFocus,l=t.value;var u=Object(_["b"])(a,n);var d=Object(_["a"])(a,n,"label");var v=m()({"c-label--disabled":n.disabled||i});return h.a.createElement(b["a"],{className:v,htmlFor:u,id:d,key:n.name,text:n.label,optional:!!n.optional},h.a.createElement(g["a"],{autoComplete:"off",labelId:d,isDisabled:n.disabled||i,errorText:r,hintText:n.hint,id:u,isRequired:!n.optional,name:n.name,onBlur:s,onChange:o,onFocus:c,placeholder:n.placeholder,type:"text",value:l}))}}]);return t}(h.a.Component);k.displayName="AppDialogInputText";t["a"]=k;k.defaultProps=O},2097:function(e,t,r){"use strict";t["a"]=h;var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(8);var c=r.n(o);var l=r(195);var u=r(411);var d=r(709);var v={dialogId:n.a.string.isRequired,error:n.a.string,input:n.a.object.isRequired,isSubmitting:n.a.bool,onBlur:n.a.func.isRequired,onChange:n.a.func.isRequired,onFocus:n.a.func.isRequired,value:n.a.string};var p={error:null,isSubmitting:false,value:""};function h(e){var t=e.dialogId,r=e.error,a=e.input,n=e.isSubmitting,i=e.onBlur,o=e.onChange,v=e.onFocus,p=e.value;var h=Object(d["b"])(t,a);var f=Object(d["a"])(t,a,"label");var m=c()({"c-label--disabled":a.disabled||n});return s.a.createElement(l["a"],{className:m,htmlFor:h,key:a.name,id:f,text:a.label,optional:!!a.optional},s.a.createElement(u["a"],{autoComplete:"off",labelId:f,isDisabled:a.disabled||n,errorText:r,hintText:a.hint,id:h,isRequired:!a.optional,name:a.name,maxCharacterLimit:a.max_length,onBlur:i,onChange:o,onFocus:v,placeholder:a.placeholder,value:p}))}h.displayName="AppDialogInputTextarea";h.defaultProps=p},2098:function(e,t,r){"use strict";t["a"]=m;var a=r(189);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(5);var u=r(1085);var d;var v=new l["b"]("app_dialog");var p=(d={},s()(d,u["a"].text,150),s()(d,u["a"].textarea,3e3),d);var h={maxLength:"maxLength",minLength:"minLength",required:"required"};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case h.maxLength:return v.t("You can't enter more than {maxLength, plural, =1 {# character} other {# characters}}.",t);case h.minLength:return v.t("You must enter at least {minLength, plural, =1 {# character} other {# characters}}.",t);case h.required:return v.t("This field is required.");default:break}return null}function m(e){var t=e.elements,r=e.lastActiveElementName,a=e.touchedElements,i=e.values;return t.reduce(function(e,t){var c=i[t.name];var l=r===t.name;var d=!t.optional&&!c&&!l;var v=Object(o["includes"])([u["a"].text,u["a"].textarea],t.type);var m=Math.max(t.min_length,0);var b=Object(o["isNumber"])(m)&&Object(o["get"])(c,"length",0)<m;var g=!c&&l;var _=!c&&t.optional;var y=v&&b&&!g&&!_;var O=Math.min(t.max_length,p[t.type]);var k=O&&Object(o["get"])(c,"length")>O;var j=v&&k;if(!a[t.name])return e;if(d)return n()({},e,s()({},t.name,f(h.required)));if(y)return n()({},e,s()({},t.name,f(h.minLength,{minLength:m})));if(j)return n()({},e,s()({},t.name,f(h.maxLength,{maxLength:O})));return e},{})}var b={validate:m}},2103:function(e,t,r){"use strict";r.d(t,"a",function(){return c});r.d(t,"b",function(){return l});r.d(t,"e",function(){return u});r.d(t,"d",function(){return d});r.d(t,"c",function(){return v});var a=r(21700);var n=r(21704);var i=r(384);var s=r(2104);var o=r(21767);var c={invalidSubmission:"invalid_submission"};var l=Object(n["a"])("fetch a dialog that has been pushed by an app",function(e,t,r){var n=e(Object(a["a"])({method:"dialog.get",args:{dialog_id:r}})).then(function(e){var t=e.dialog,r=void 0===t?{}:t;return Object(i["b"])(r)});return p(n)});var u=Object(n["a"])("submit and app generated dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.dialogId,i=r.submission;var s={dialog_id:n,submission:JSON.stringify(i)};var o=e(Object(a["a"])({method:"dialog.submit",args:s})).catch(function(e){var t=e.data||{};var r=new Error(e.message);r.data={error:t.error,dialogErrors:t.dialog_errors};throw r});return p(o)});var d=Object(n["a"])("notify an app that the dialog it generated has been canceled",function(e,t,r){return e(Object(a["a"])({method:"dialog.notifyCancel",args:{dialog_id:r}}))});var v=Object(n["a"])("fetch select options from a third party app based on a search query",function(e,t,r){var n=r.dialogId,i=r.inputName,s=r.value;return e(Object(a["a"])({method:"dialog.selectSuggestion",args:Object(o["a"])({dialogId:n,name:i,value:s})})).then(function(e){var t=e.option_groups,r=e.options;if(t)return{optionGroups:t};if(r)return{options:r};return{options:[]}})});function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;var r=new s["a"];e.then(r.resolve,r.reject);setTimeout(function(){if(e.isPending()){e.cancel();var a=new Error("Maximum timeout ("+t+"ms) exceeded.");r.reject(a)}},t);return r.promise}},2104:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=function e(){n()(this,e);var t={};t.promise=new Promise(function(e,r){t.resolve=e;t.reject=r});return t};t["a"]=i},2134:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2135);var n=r(42);Object(n["a"])("interop.mountAppsBrowser",a["a"]);Object(n["a"])("interop.unmountAppsBrowser",a["b"])},2135:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(2136);var d=function e(t,r,a){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(t)},n.a.createElement(u["a"],a)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var p={mountAppsBrowser:d}},2136:function(e,t,r){"use strict";var a=r(2137);t["a"]=a["a"]},2137:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(9);var C=r(54);var E=r(21700);var S=r(91);var w=r(1031);var I=r(1086);var T=r(5);var N=r(1090);var R=r(22922);var A=r(69);var M=r(20210);var P=r.n(M);var x=50;var D=new T["b"]("apps_browser");var F={hasSeenAppSpaceTutorial:m.a.bool,isInternetExplorer:m.a.bool,isFirefoxAndWindows:m.a.bool,isFirefoxAndMac:m.a.bool,isMacSsbBuild:m.a.bool,scrollThreshold:m.a.number,addAppsVariant:m.a.bool,isUnpaid:m.a.bool};var L={hasSeenAppSpaceTutorial:false,isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false};var B={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var U={id:"tutorial_category",name:"",display_name:"",apps:[{name:D.t("What are apps?"),short_description:D.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]};var q=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.lastRequestId=0;r.currentDisplayedId=0;r.isMouseMoveEnabled=true;r.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;r.runningAppIndex=0;r.showLimitMeter=false;r.appsForLimitMeter=null;r.cloggedLimitMeterImpression=false;r.LimitMeterClogId=null;r.appLimitMeterClogPayload={};r.isPaginating=false;r.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};r.handleKeydown=r.handleKeydown.bind(r);r.handleMouseMove=r.handleMouseMove.bind(r);r.handleAppsListScroll=r.handleAppsListScroll.bind(r);r.handleAppDirectoryButtonClick=r.handleAppDirectoryButtonClick.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.handleAppClick=r.handleAppClick.bind(r);r.handleAppMouseLeave=r.handleAppMouseLeave.bind(r);r.handleAppLimitMeterClickClog=r.handleAppLimitMeterClickClog.bind(r);r.fillDefaultAppsList=r.fillDefaultAppsList.bind(r);r.searchApps=r.searchApps.bind(r);r.completeRequest=r.completeRequest.bind(r);r.enableMouseMove=r.enableMouseMove.bind(r);r.throttledSearchApps=k.a.throttle(r.searchApps,500,{leading:false});r.debouncedEnableMouseMove=k.a.debounce(r.enableMouseMove,200);return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);this.completeRequest(Object(E["c"])(B.listEnpoint,{limit:x}).then(function(e){t.defaultAppCategories=[U].concat(s()(e.data.categories));return{categories:t.defaultAppCategories}}),B.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.getSelectedApp();"tutorial_app"===k.a.get(a,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){r.firstSelectableAppIndex=r.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,r){this.state.isShowingDefaultAppCategories!==r.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=r.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){return Object(I["a"])(t,72)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var r=0;r<this.state.appCategories.length;r++)t+=k.a.get(this.state.appCategories[r],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var r=this;var a=0;for(var n=0;n<this.state.appCategories.length;n++)a+=this.state.appCategories[n].apps.length;if(0===a)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===a-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var a=void 0;a=null===e.selectedAppIndex?r.firstSelectableAppIndex:e.selectedAppIndex===r.firstSelectableAppIndex?r.firstSelectableAppIndex:t.getModifierState("Shift")?r.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:a}},function(){r.scrollSelectedAppIntoView(false);r.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var r=document.querySelector("[data-apps_list]");var a=document.querySelector("[data-category_header]");var n=a?a.offsetHeight:0;t.offsetTop<r.scrollTop?r.scrollTop=t.offsetTop-n:t.offsetTop+t.offsetHeight>r.scrollTop+r.offsetHeight&&(r.scrollTop=t.offsetTop+t.offsetHeight-r.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var r={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)Object(w["f"])();else if("app_limit_meter"===t.app_id){var a=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){window.open(window.location.origin+"/pricing?ui_step=280&ui_element=5'");Object(S["b"])("GROWTH_PRICING",{num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});Object(S["b"])("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{window.open(window.location.origin+"/apps");Object(S["b"])("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)Object(w["a"])(t);else if("true"===t.is_installed){Object(w["e"])(t);Object(S["b"])("APP_INDEX_VIEW_CLICK",r)}else{window.open(window.location.origin+"/apps/"+t.app_id);Object(S["b"])("APP_INDEX_INSTALL_CLICK",r)}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var r=t.target.closest("[data-app]");r&&this.setState(function(){return{selectedAppIndex:parseInt(r.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var r=t.currentTarget;var a=r.offsetHeight+r.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&a>r.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],B.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){window.open(window.location.origin+"/apps");Object(S["b"])("APP_INDEX_VIEW_APP_DIRECTORY_CLICK")}},{key:"handleAppLimitMeterClickClog",value:function e(){if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";Object(S["b"])("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}});this.throttledSearchApps(r)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,B.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,r,a){var i=this;if(this.isPaginating)return;if(!t.next_cursor)return;var o={category:t.id,cursor:t.next_cursor,limit:x};r===B.searchEndpoint&&(o.query=this.state.searchTerm);var c=setTimeout(function(){i.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var l=this.lastRequestId;Object(E["c"])(r,o).then(function(e){if(l<i.lastRequestId)return;var o=e.data.categories[0];if(!o)return;i.setState(function(e){if(l<i.lastRequestId)return{};for(var a=0;a<e.appCategories.length;a++)if(e.appCategories[a].id===t.id){var c=[].concat(s()(e.appCategories[a].apps),s()(o.apps));var u=n()({},e.appCategories[a]);u.apps=c;u.next_cursor=o.next_cursor;var d=[].concat(s()(e.appCategories));d[a]=u;r===B.listEnpoint&&(i.defaultAppCategories=d);return{appCategories:d,showPaginationIndicator:false}}return{}},function(){i.isPaginating=false;clearTimeout(c);a&&"function"===typeof a&&a()})})}},{key:"searchApps",value:function e(t){var r=this;if(t){var a=setTimeout(function(){r.setState(function(){return{isSearching:true}})},300);this.completeRequest(Object(E["c"])(B.searchEndpoint,{query:t}).then(function(e){clearTimeout(a);r.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e.data}),B.searchEndpoint,true);Object(S["b"])("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:r.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,r,a,n){var i=this;this.lastRequestId+=1;var s=this.lastRequestId;t.then(function(e){if(s>i.currentDisplayedId){i.currentDisplayedId=s;var t={appCategories:e.categories,selectedAppIndex:k.a.get(e,"categories[0].apps",[]).length&&r===B.searchEndpoint?0:null};a&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var o=k()(e.categories).flatMap("apps").filter("bot_user_id").map("bot_user_id").value();Object(w["d"])(o).then(function(){i.updateAfterRequest(t,n)})}else i.updateAfterRequest(t,n)}}).catch(k.a.noop)}},{key:"updateAfterRequest",value:function e(t,r){this.setState(function(){return t},function(){r&&"function"===typeof r&&r()})}},{key:"createAppCategoryMarkup",value:function e(t,r){var a=this;return t.apps.map(function(e,t){var n=r+t;var i=y()("p-apps_browser__app",{"p-apps_browser__app--selected":n===a.state.selectedAppIndex});var s="app-"+e.app_id+"-"+e.bot_id;var o=a.getAppIcon(e);var c=a.props.addAppsVariant&&e.is_installed&&Object(w["c"])(e.bot_user_id);var l=D.t("Install");"tutorial_app"===e.app_id?l=D.t("Start"):c?l=D.t("Add"):e.is_installed&&(l=D.t("View"));return g.a.createElement("div",{key:s,className:i,onClick:a.handleAppClick,onMouseLeave:a.handleAppMouseLeave,"data-app":true,"data-app_index":n,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":c||null,role:"presentation"},g.a.createElement("img",{className:"p-apps_browser__app_icon",src:o,alt:"App icon"}),g.a.createElement("div",{className:"p-apps_browser__app_info"},g.a.createElement("div",{className:"p-apps_browser__app_name"},g.a.createElement("strong",null,e.name)),g.a.createElement("div",{className:"p-apps_browser__app_description"},Object(N["a"])(e.short_description,function(e,t){return g.a.createElement("strong",{key:t},e)}))),g.a.createElement("button",{className:"p-apps_browser__app_action"},l))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!k.a.get(e,"apps",[]).length)return null;var r="category-"+e.id;var a=y()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var n=y()("p-apps_browser__category_header");var i=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return g.a.createElement("section",{key:r,className:a},g.a.createElement("div",{className:n,"data-category_header":true},e.display_name),i)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var r="color-meter-"+t;var a=y()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return g.a.createElement("li",{className:a,key:r})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var r=this;if(!k.a.get(t,"apps",[]).length)return null;var a=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var n=a-t.apps.length;while(n>0){var i={app_id:n,name:"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(i);n-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[a-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var a="limit-apps-"+t;var n=y()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:r.props.isFirefoxAndWindows,is_ff_and_mac:r.props.isFirefoxAndMac,is_ie:r.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var i=y()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var s="blank_box"===e.short_description?null:r.getAppIcon(e);return g.a.createElement("div",{className:n,key:a},g.a.createElement("img",{className:"align_top",src:s,alt:""}),g.a.createElement("span",{className:i},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var r=10;var a=k.a.get(e,"apps",[]).length;if(!a||a>r||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var n=t.getSelectedApp();var i="num_of_apps="+a;var s=!!a;var o="limit-meter-"+e.id;t.showLimitMeter=s&&t.props.isUnpaid;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var c=void 0;var l=void 0;var u=void 0;var d=void 0;var v=void 0;var p=y()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:t.props.isFirefoxAndWindows});var h=y()("p-apps_browser__app_limit_meter",{is_ff_and_mac:t.props.isFirefoxAndMac});if(a<6){c=D.t("Add apps to get things done");l=D.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");u=D.t("See app suggestions");d="/apps";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";v="link_app_directory"}else if(a>5){c=D.t("Upgrade for unlimited apps");l=D.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:a});u=D.t("Learn more");d="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";v="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:a,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:v}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){Object(S["b"])(t.LimitMeterClogId,t.appLimitMeterClogPayload);Object(S["b"])("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else Object(S["b"])(t.LimitMeterClogId,t.appLimitMeterClogPayload);t.cloggedLimitMeterImpression=true}var f=y()({hidden:t.props.isMacSsbBuild&&"pricing_link"===v,bold:"app_limit_meter"===k.a.get(n,"dataset.app_id")});var m=t.createAppsForLimitMeterMarkup(e);var b=t.createColorLimitMeterMarkup();return g.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:o},g.a.createElement("div",{className:h},g.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},g.a.createElement("b",null,c)),g.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph"},l,g.a.createElement("a",{className:f,href:d,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":v,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":i,onClick:t.handleAppLimitMeterClickClog},u)),g.a.createElement("div",null,g.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},m),g.a.createElement("ul",{className:p},b))))})}},{key:"render",value:function e(){var t=void 0;var r=y()("p-apps_browser__apps_list",{"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator,"p-apps_browser__apps_list--paginating":this.state.showPaginationIndicator});var a=this.props.addAppsVariant?g.a.createElement("h2",{dangerouslySetInnerHTML:{__html:Object(w["b"])()}}):g.a.createElement("h2",null,D.t("Browse Apps"));t=!this.getTotalAppsCount()&&this.state.searchTerm?g.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},D.t("There are no apps matching"),"\xa0",g.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var n=this.createAppLimitMeterMarkup();return g.a.createElement("div",{className:"p-apps_browser"},g.a.createElement("div",{className:"p-apps_browser__filter_container"},g.a.createElement("div",{className:"p-apps_browser__filter_header"},a,g.a.createElement("button",{className:"p-apps_browser__browse_apps",onClick:this.handleAppDirectoryButtonClick},D.t("View App Directory"))),g.a.createElement("div",null,g.a.createElement(R["a"],{placeholder:D.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),g.a.createElement("div",{className:r,onScroll:this.handleAppsListScroll,"data-apps_list":true},n,t,g.a.createElement(A["a"],{className:"p-apps_browser__spinner",size:"medium"})))}}]);return t}(b["Component"]);q.displayName="AppsBrowser";q.defaultProps=L;var H=function e(t){var r=Object(C["getUserPref"])(t,"seen_app_space_tutorial");return{hasSeenAppSpaceTutorial:r}};t["a"]=Object(j["connect"])(H)(q)},21707:function(e,t,r){"use strict";t["a"]=b;t["b"]=g;t["c"]=_;t["d"]=y;t["e"]=j;var a=r(172);var n=r.n(a);var i=r(3182);var s=r(3270);var o=r(85);var c=r(22142);var l=r(12);var u=r(21831);var d=r(21701);var v=r(22143);var p=this;var h=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n){var s,c,l,u,d,p;return regeneratorRuntime.wrap(function e(h){while(1)switch(h.prev=h.next){case 0:s={};c=3e4;l=Object(o["promiseToHaveOpenWebSocket"])(n());u=l.then(function(){return Promise.delay(c,s)});d=l.then(function(){return Object(v["a"])(t,n)});h.next=7;return Object(a["resolve"])(Promise.race([d,u]));case 7:p=h.sent;if(!(p===s)){h.next=11;break}r(Object(i["warn"])("Preprocessing message of type "+t.type+" took too long; continue to process queue"));return h.abrupt("return",true);case 11:return h.abrupt("return",p);case 12:case"end":return h.stop()}},e,this)}));return function t(r,a,n){return e.apply(this,arguments)}}();var f={};var m={};function b(e,t){f[e]=f[e]||[];f[e].push(t)}function g(e,t){if(!m[t])return;m[t].forEach(function(t){return e(t)})}function _(){return f}function y(){return m}var O=function e(t,r,a){if(C(a))return;var n=!Object(d["a"])()&&!Object(l["isFeatureEnabled"])(a(),"feature_no_message_subtype_rtm");var i=t.subtype&&n?t.type+"."+t.subtype:t.type;if(f[i])try{f[i].forEach(function(e){return e(t,r,a)})}catch(e){if(Object(d["a"])()){var o=a();var u=Object(s["getTeamId"])(o);window.slackDebug.setLastError&&window.slackDebug.setLastError(u,new Error("Error processing "+i+": "+e.message))}throw e}var v=Object(c["a"])();v[t.type]&&v[t.type](t)};var k=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n){var s,o;return regeneratorRuntime.wrap(function e(c){while(1)switch(c.prev=c.next){case 0:if(!(!t||!t.length)){c.next=2;break}return c.abrupt("return",Promise.resolve());case 2:s=t[0];c.prev=3;c.next=6;return Object(a["resolve"])(h(s,r,n));case 6:o=c.sent;o&&O(s,r,n);c.next=13;break;case 10:c.prev=10;c.t0=c["catch"](3);r(Object(i["error"])("Error while processing "+s.type+" event",c.t0));case 13:c.prev=13;t.shift();return c.finish(13);case 16:return c.abrupt("return",t.length?k(t,r,n):Promise.resolve());case 17:case"end":return c.stop()}},e,p,[[3,10,13,16]])}));return function t(r,a,n){return e.apply(this,arguments)}}();function j(e,t,r){var a=r();var n=Object(s["getTeamId"])(a);m[n]=m[n]||[];m[n].push(e);1===m[n].length&&k(m[n],t,r)}function C(e){var t=e();return Object(l["isWebApp"])(t)&&!Object(l["processRtmStream"])(t)&&!Object(u["b"])()}var E={shouldIgnoreRtmStream:C};Object.defineProperty(E,"dispatchMessageToHandlers",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(E,"handleNextMessageFromQueue",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(E,"handlers",{get:function e(){return f},set:function e(t){f=t}});Object.defineProperty(E,"pendingMessages",{get:function e(){return m},set:function e(t){m=t}})},21716:function(e,t,r){"use strict";r.d(t,"a",function(){return c});r.d(t,"f",function(){return u});r.d(t,"d",function(){return p});r.d(t,"e",function(){return h});r.d(t,"c",function(){return m});r.d(t,"b",function(){return b});var a=r(20615);var n=r.n(a);var i=r(21757);var s=r(21943);var o="frecencyId";var c="MA";function l(e){return e&&e.props&&e.props[o]||null}var u=function e(t){return""+c+t};var d=function e(t){return n()({},o,u(t))};var v=function e(t){return t.id};var p=function e(t){return u(v(t))};var h=function e(t){return d(v(t))};var f=function e(t){return t[o]};var m=function e(t,r){return Object(s["a"])(t,r,{getId:f,prefix:c})};var b=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=f(t);a&&Object(i["c"])({id:a},r)}},21723:function(e,t,r){"use strict";var a=r(21766);t["a"]=a["a"]},21724:function(e,t,r){"use strict";r.d(t,"c",function(){return w});r.d(t,"d",function(){return I});r.d(t,"a",function(){return T});r.d(t,"b",function(){return N});t["f"]=A;t["h"]=P;t["g"]=x;r.d(t,"i",function(){return F});r.d(t,"l",function(){return L});r.d(t,"j",function(){return B});r.d(t,"k",function(){return U});t["p"]=q;t["q"]=H;r.d(t,"e",function(){return W});r.d(t,"m",function(){return G});t["n"]=Y;t["o"]=J;var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(5);var u=r(147);var d=r(91);var v=r(1037);var p=r(12);var h=r(3044);var f=r(1006);var m=r(21798);var b=r(398);var g=r(3270);var _=r(43);var y=r(21703);var O=r(37);var k=new l["b"]("workspace_directory");var j=480;var C=1024;var E="ENTERPRISE_DISCOVER_WORKSPACES";var S="WORKSPACE_DIR";var w=function e(){return window.innerWidth<=j};var I=function e(){return window.innerWidth<=C};var T={dialog:"dialog",largeCard:"largeCard",smallCard:"smallCard"};var N="SHOW_ALL";function R(e){if(!e)return{};var t=k.t("Requires an invite to join");return{requestCardLarge:k.t("Awaiting admin approval to join"),requestDialog:function e(t){return k.t("Requested access on {requestDate}",{requestDate:Object(u["a"])(t)})},inviteOnlyWithLockIcon:s.a.createElement("span",null,s.a.createElement(O["a"],{type:"lock",key:"private-icon",className:"nudge_bottom_2"}),t),inviteOnly:t}}function A(e,t){var r=t.context,a=void 0===r?T.smallCard:r,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=R(i);var o=e.date_requested_join,c=e.discoverable,l=e.is_member;if(l)return null;if("closed"===c&&o){if(a===T.largeCard)return s.requestCardLarge;return s.requestDialog(o)}if("invite_only"===c){if(a===T.largeCard)return s.inviteOnlyWithLockIcon;return s.inviteOnly}return null}function M(e,t){var r=document.createElement("a");r.href=t;var a=r.protocol+"//"+e.domain+"."+r.host+"/";r=null;return a}function P(e){return Object(o["has"])(e,"profile")||Object(o["has"])(e,"enterprise_user")}function x(e){var t=e.type,r=e.teamName,a=e.errorType;if("success"===t)return k.rt("Request to create <strong>{teamName}</strong> sent! You\u2019ll be notified once it\u2019s reviewed.",{teamName:Object(l["l"])(r)});var n={name_taken:k.rt("Request failed: The name <strong>{teamName}</strong> is already taken by another workspace.",{teamName:Object(l["l"])(r)}),name_is_empty:k.t("Request failed: A name is required."),name_too_long:k.t("Request failed: The name you provided is too long."),reason_too_long:k.t("Request failed: The reason you provided is too long."),unknown:k.rt("Request failed: The response error was <strong>{error}</strong>.",{error:a||"unknown"})};return n[a]||n.unknown}function D(e){if(!e)return;if(Object(h["isSSBAndAtLeastVersion"])("2.8")){Object(_["info"])(S,"switchToTeamById - Calling displayTeamById('"+e+"') in the SSB.");Object(b["displayTeamById"])(e)}else{Object(_["info"])(S,"switchToTeamById - SSB < 2.8, fallback to using an iframe to open "+e);var t=document.createElement("iframe");var r="slack://open?team="+e;t.src=r;document.body.appendChild(t);setTimeout(function(){return t.remove()},1e3)}}var F=function e(t,r){var a=r.team,n=r.onActionResolve,i=r.onActionReject,o=r.onDone,c=r.anchorPage,l=r.doUpsertJoin;var u={team:a,onResolve:function e(t){var r={};l&&(r.workspace=t);n(r)},onReject:function e(t){i({node:s.a.createElement("span",null,k.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:t})},onDone:o};V({teamId:a.id,anchorPage:c});return Object(v["b"])(t,u)};var L=function e(t,r){var a=r.team,n=r.onActionResolve,i=r.onActionReject,o=r.onDone,c=r.anchorPage;var l={team:a,onResolve:function e(t){n({node:s.a.createElement("div",{className:"display_flex"},s.a.createElement(O["a"],{align:"top",type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),s.a.createElement("span",null,k.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:t})},onReject:function e(t){i({node:s.a.createElement("span",null,k.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:t})},onDone:o};z({teamId:a.id,anchorPage:c});return Object(v["d"])(t,l)};var B=function e(t,r){var a=r.user,n=void 0===a?{}:a,i=r.team,s=void 0===i?{}:i,c=r.anchorPage,l=r.doLaunchInNewTab,u=void 0!==l&&l,d=r.onActionResolve,v=void 0===d?o["noop"]:d,O=r.channelRedirect,k=void 0===O?null:O,j=r.postLaunchAction,C=void 0===j?null:j,E=r.userIdFromURL,w=void 0===E?null:E,I=r.windowOpener;var T=Object(p["getFromBootData"])(t,"signin_url");var N=M(s,T,k)+"messages";K({teamId:s.id,anchorPage:c});k&&(N=N+"/"+k);C&&"open_profile"===C&&w&&(N=N+"/team/"+w);if(Object(p["isClientApp"])(t)&&Object(g["getTeamId"])(t)===s.id){Object(_["info"])(S,"onWorkspaceLaunch - User has team "+s.id+" to launch currently open. Do nothing and resolve the action (which closes the modal).");return v({workspace:s})}if(Object(m["a"])()){Object(_["info"])(S,"onWorkspaceLaunch - Detected that user is logged in via the SSB.");var R=Object(b["getSignedInTeamIds"])();Object(_["info"])(S,"onWorkspaceLaunch - Successfully called getSignedInTeamIds and returned "+R);var A={name:n.name,id:n.id,team_id:s.id,team_name:Object(y["getTeamDisplayName"])(s),team_url:N};if(Object(o["includes"])(R,s.id)){Object(_["info"])(S,"onWorkspaceLaunch - User already signed into workspace '"+s.id+"'");if(Object(o["includes"])(R,s.id)){var P=void 0;if(Object(h["isSSBAndAtLeastVersion"])("3.0")){Object(_["info"])(S,"onWorkspaceLaunch - SSB >= 3.0, attempting to determine if team "+s.id+" has a valid session.");D(s.id);P=window.desktop.teams.getCurrentTeam();if(P)if(P.hasValidSession)Object(_["info"])(S,"onWorkspaceLaunch - currentTeam.hasValidSession for "+s.id+". Work done.");else{Object(_["info"])(S,"onWorkspaceLaunch - current session NOT valid. Signing into "+s.id+".");Object(b["didSignIn"])(A)}else{Object(_["info"])(S,"onWorkspaceLaunch - currentTeam not found. Calling didSignIn() for "+s.id+".");Object(b["didSignIn"])(A)}}else{Object(_["info"])(S,"onWorkspaceLaunch - SSB < 3.0, cannot determine session state. Calling didSignIn() for "+s.id+".");Object(b["didSignIn"])(A)}}}else{Object(_["info"])(S,"onWorkspaceLaunch - calling didSignIn on "+JSON.stringify(A));Object(b["didSignIn"])(A);R=Object(b["getSignedInTeamIds"])()}v({workspace:s});Object(_["info"])(S,"onWorkspaceLaunch - Removing team from enterprise excluded team pref "+s.id);Object(f["c"])(s.id)}else if(u){if(I){var x=I;x.location.href=N}else window.open(N,"_blank");v({workspace:s})}else window.location=N;return null};var U=function e(t,r){var a=r.team,n=r.onLeaveResolve,i=void 0===n?o["noop"]:n,c=r.onLeaveReject,l=void 0===c?o["noop"]:c,u=r.onDone,d=void 0===u?o["noop"]:u;Q({teamId:a.id,anchorPage:"workspace_directory"});var p={team:a,onResolve:function e(t){i({workspace:t})},onReject:function e(t){l({node:s.a.createElement("span",null,k.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:t})},onDone:d};return Object(v["c"])(t,p)};function q(e){var t=e.trackingCode,r=void 0===t?"":t;var a={anchor_page:"workspace_directory",tracking_code:r};var i={action:"impression"};Object(d["b"])(E,n()({},a,{contexts:{ui_context:i}}))}function H(e){var t=e.teamId,r=e.trackingCode;var a={entity_key:"workspace_detail",anchor_page:"workspace_directory",target_team_id:t,tracking_code:r};var i={action:"impression",action_status:1};Object(d["b"])(E,n()({},a,{contexts:{ui_context:i}}))}var W=function e(t){var r=t.anchorPage,a=t.numSearchResults;var i={};var s={};i.action="impression";i.action_status=a?1:2;i.ui_element="SEARCH_BAR";s.entity_key="search_workspaces";s.anchor_page=r;s.num_search_results=a;Object(d["b"])(E,n()({},s,{contexts:{ui_context:i}}))};var G=function e(t){var r=t.searchType,a=void 0===r?"workspace":r;var i={anchor_page:"workspace_directory",entity_key:"search_workspaces"};var s={action:"impression",ui_element:"workspace"===a?"DIRECTORY_SEARCH_FREE":"DIRECTORY_SEARCH_BY_COLLEAGUE"};Object(d["b"])(E,n()({},i,{contexts:{ui_context:s}}))};function V(e){var t=e.teamId,r=e.anchorPage,a=e.fromWhere,i=void 0===a?"":a;var s={anchor_page:r,entity_key:"join_workspace",target_team_id:t,tracking_code:i};var o={action:"click",action_status:1};Object(d["b"])(E,n()({},s,{contexts:{ui_context:o}}))}function z(e){var t=e.teamId,r=e.anchorPage,a=e.fromWhere,i=void 0===a?"":a;var s={anchor_page:r,entity_key:"request_to_join_workspace",target_team_id:t,tracking_code:i};var o={action:"click",action_status:1};Object(d["b"])(E,n()({},s,{contexts:{ui_context:o}}))}function K(e){var t=e.teamId,r=e.anchorPage,a=e.fromWhere,i=void 0===a?"":a;var s={anchor_page:r,entity_key:"launch_workspace",target_team_id:t,tracking_code:i};var o={action:"click",action_status:1};Object(d["b"])(E,n()({},s,{contexts:{ui_context:o}}))}function Q(e){var t=e.teamId,r=e.anchorPage;var a={anchor_page:r,entity_key:"leave_workspace",target_team_id:t,tracking_code:""};var i={action:"click",action_status:1};Object(d["b"])(E,n()({},a,{contexts:{ui_context:i}}))}function Y(e){var t=e.step;var r={anchor_page:"grid_onboarding",target_team_id:0};var a={action:"impression",step:t};Object(d["b"])(E,n()({},r,{contexts:{ui_context:a}}))}function J(e){var t=e.step;var r={anchor_page:"grid_onboarding",target_team_id:0};var a={action:"click",ui_element:"exit",step:t};Object(d["b"])(E,n()({},r,{contexts:{ui_context:a}}))}},21725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setSearchInputBoxDisplayQuery",function(){return v});r.d(t,"setSearchInputBoxUserQueryInternal",function(){return p});r.d(t,"setSearchInputBoxUserQuery",function(){return h});r.d(t,"reset",function(){return f});r.d(t,"getSearchInputBoxDisplayQuery",function(){return g});r.d(t,"getSearchInputBoxUserQuery",function(){return _});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(21742);var d;var v=Object(l["a"])("Set the search input box display query");v.propTypes={displayQuery:c.a.string.isRequired};var p=Object(l["a"])("Set the user query associated with the search input box without any side effects");p.propTypes={userQuery:c.a.string.isRequired};var h=Object(l["e"])("Set the user query associated with the search input box",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.userQuery;e(p({userQuery:a}));e(Object(u["setSearchAutocompleteEchoQuery"])({query:a}));e(Object(u["setSearchAutocompleteSelection"])({selectedIndex:a?0:null}))});h.propTypes={userQuery:c.a.string.isRequired};var f=Object(l["a"])("Reset search input box redux state");f.propTypes={};var m={displayQuery:"",userQuery:""};var b=Object(l["c"])((d={},n()(d,f,function(){return m}),n()(d,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.displayQuery;return s()({},e,{displayQuery:r})}),n()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.userQuery;return s()({},e,{userQuery:r,displayQuery:r})}),d),m);t["default"]=b;var g=Object(l["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.displayQuery});var _=Object(l["d"])(function(e){return e&&e.searchInputBox&&e.searchInputBox.userQuery})},21726:function(e,t,r){"use strict";r.d(t,"b",function(){return F});r.d(t,"a",function(){return L});r.d(t,"h",function(){return B});r.d(t,"g",function(){return q});r.d(t,"n",function(){return K});r.d(t,"o",function(){return Z});r.d(t,"m",function(){return $});t["q"]=ee;t["l"]=te;t["p"]=re;r.d(t,"i",function(){return ve});r.d(t,"j",function(){return fe});r.d(t,"e",function(){return ye});r.d(t,"f",function(){return ke});r.d(t,"k",function(){return Ce});r.d(t,"c",function(){return Ee});r.d(t,"d",function(){return Ne});var a=r(73);var n=r.n(a);var i=r(22904);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(21698);var m=r(21697);var b=r(21706);var g=r(907);var _=r(3203);var y=r(1592);var O=r(21708);var k=r(2215);var j=r(5);var C=r(104);var E=r(212);var S=r(3179);var w=r(1034);var I=r(2246);var T=r(21786);var N=r(12);var R=r(3270);var A=r(49);var M=r(21939);var P=r(21872);var x=r(21940);var D=r(21941);var F={CHANNEL_NAVIGATION:"channel-navigation",FILE_NAVIGATION:"file-navigation",MPIM_NAVIGATION:"mpim-navigation",USER_NAVIGATION:"user-navigation",QUERY:"query",QUERY_HISTORY:"query-history",UNKNOWN:"unknown",EXPERT_CHANNEL_NAVIGATION:"expert-channel-navigation"};var L={FILTER_IN:"filter-in",FILTER_FROM:"filter-from",FILTER_TO:"filter-to",FILTER_BEFORE:"filter-before",FILTER_DURING:"filter-during",FILTER_ON:"filter-on",FILTER_AFTER:"filter-after",FILTER_HAS:"filter-has",FILTER_TYPE:"filter-type",MEMBER:"member",STRING:"string",PHRASE:"phrase",API:"api-suggestion",UNKNOWN:"unknown"};var B={HAS:"has",TYPE:"type",FROM:"from",TO:"to",IN:"in",BEFORE:"before",DURING:"during",ON:"on",AFTER:"after"};var U=new j["b"]("search");var q={has:U.t("has"),type:U.t("type"),from:U.t("from"),to:U.t("to"),in:U.t("in"),before:U.t("before"),during:U.t("during"),on:U.t("on"),after:U.t("after")};var H={STAR:"star",PIN:"pin",LINK:"link",REACTION:"reaction"};var W={star:U.t("star"),pin:U.t("pin"),link:U.t("link"),reaction:U.t("reaction")};var G={January:U.t("January"),February:U.t("February"),March:U.t("March"),April:U.t("April"),May:U.t("May"),June:U.t("June"),July:U.t("July"),August:U.t("August"),September:U.t("September"),October:U.t("October"),November:U.t("November"),December:U.t("December")};var V={Today:U.t("Today"),Yesterday:U.t("Yesterday")};var z=function(e){v()(t,e);function t(){c()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Ne.searchQueryHistory("",10)},3e5))}return t}(x["a"]);var K=new z;var Q=function(e){v()(t,e);function t(){c()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Promise.resolve({emojiMap:Object(E["d"])(),searchMap:Object(p["keyBy"])(Object(E["d"])(),"name_with_colons")})},3e5))}return t}(x["a"]);var Y=new Q;var J=function(e){v()(t,e);function t(){c()(this,t);var e=2e5;var r=Math.ceil(e/5e4);var a=576e5;return u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Promise.all(Object(p["range"])(r).map(function(e){return Ne.searchAutocompleteQuerySuggestions(e)})).then(function(e){var t=e.filter(function(e){return e.data.query_suggestion_list.length>0}).sort(function(e){return-e.data.query_suggestion_list[0][1]});var r=Object(p["flatMap"])(t,function(e){return e.data.query_suggestion_list.map(function(e){var t=e[0].toString().replace(/_/g," ");var r=parseInt(e[1],10)/1e4;var a=Object(p["mapValues"])(e[2],function(e){return parseInt(e,10)/100});return[t,r,a]})});var a={};Object(p["each"])(r,function(e){var t=e[0][0];a[t]||(a[t]=[]);a[t].push(e)});return a})},a))}n()(t,[{key:"onCacheData",value:function e(r){var a=this;s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,r);var n=Math.max(this.timeoutMs/2,144e5);this.querySuggestionCacheRefreshTimer&&clearTimeout(this.querySuggestionCacheRefreshTimer);this.querySuggestionCacheRefreshTimer=null;this.querySuggestionCacheRefreshTimer=setTimeout(function(){a._callCacheGet()},this.timeoutMs/2+Math.random()*n)}}]);return t}(x["a"]);var Z=new J;var X=function(e){v()(t,e);function t(){c()(this,t);var e=1008e5;return u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return Ne.searchAutocompleteFileSuggestions(1e4).then(function(e){var t={};Object(p["each"])(e.data.file_suggestion_list,function(e){var r=e.title.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var a=r.split(/\s+/).slice(0,6);var n=Object(p["extend"])(e,{normalTitle:r,titleTerms:a,score:e.score/65536*400});Object(p["each"])(r.split(/ /).slice(0,3),function(e){var r=e[0];t[r]||(t[r]=[]);t[r].push(n)})});return t})},e))}n()(t,[{key:"onCacheData",value:function e(r){var a=this;s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCacheData",this).call(this,r);var n=144e5;this.fileSuggestionCacheRefreshTimer&&clearTimeout(this.fileSuggestionCacheRefreshTimer);this.fileSuggestionCacheRefreshTimer=null;this.fileSuggestionCacheRefreshTimer=setTimeout(function(){a._callCacheGet()},this.timeoutMs+Math.random()*n)}}]);return t}(x["a"]);var $=new X;function ee(e,t,r,a){return new ae(e).suggestions(t,r,a)}function te(){return"e3_unified"}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments[2];if(!r)return t.filter(function(e){return!e.is_type_user_query});return Object(p["uniqBy"])([Object(p["assign"])(ve.fromString(e,r).toMap(te(e)),{is_type_user_query:true})].concat(t.filter(function(e){return!e.is_type_user_query})),function(e){return e.key})}var ae=function(){function e(t){c()(this,e);this.state=t}n()(e,[{key:"combineResponses",value:function e(t,r,a,n){var i=Object(p["chain"])(t).map(function(e){return e.slice(a,r)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(n)}).map(function(e){return e.toMap(n)}).value();var s=Object(p["chain"])(t).map(function(e){return e.slice(0,a)}).flatten().uniqBy(function(e){return e.toTextyString()}).sortBy(function(e){return-e.score(n)}).map(function(e){return e.toMap(n)}).value();return s.concat(i).slice(0,r)}},{key:"suggestions",value:function e(t,r,a){var n=this;var i=new ne(t);var s=[];if(i.isEmpty())s.push(this.suggestionsBlankSlateQueryHistory(r));else{s.push(this.suggestionsInFilter(i,r));s.push(this.suggestionsHasFilter(i,r));s.push(this.suggestionsMemberFilter(i,r,B.FROM));s.push(this.suggestionsMemberFilter(i,r,B.TO));s.push(this.suggestionsDateFilter(i,r,B.BEFORE));s.push(this.suggestionsDateFilter(i,r,B.DURING));s.push(this.suggestionsDateFilter(i,r,B.ON));s.push(this.suggestionsDateFilter(i,r,B.AFTER));s.push(this.suggestionsQueryHistory(i,r));s.push(this.suggestionsUsers(i,r));s.push(this.suggestionsChannels(i,r));s.push(this.suggestionsGroups(i,r));s.push(this.suggestionsMPIMs(i,r));s.push(this.suggestionsFiles(i,r,a));var o=Te(this.state);var c=Object(f["getCurrentMember"])(o);Object(_["R"])(c)||Object(_["W"])(c)||c.is_bot||s.push(this.suggestionsQueries(i,r));"treatment"===Object(k["a"])("sli_search_ac_experts")&&s.push(this.suggestionsExpertChannels(i,r))}var l=r;return Promise.all(s).then(function(e){return n.combineResponses(e,r,l,a)})}},{key:"suggestionsBlankSlateQueryHistory",value:function e(t){var r=this;return K.get().then(function(e){return e.slice(0,t).map(function(e,t){return new he(r.state,"",e,t)})})}},{key:"suggestionsQueryHistory",value:function e(t,r){var a=this;return K.get().then(function(e){return Object(p["map"])(Object(p["filter"])(e,function(e){return Object(p["startsWith"])(e.toLowerCase(),t.normalQuery().toString())}).slice(0,r),function(e){return ve.fromString(a.state,e)})})}},{key:"suggestionsUsers",value:function e(t,r){var a=this;return Ne.searchUsers(t.toString(),r).then(function(e){var n=e.map(function(e){return new le(e.score,e.model_ob,t.toString())}).sort(function(e,t){return t.score-e.score});n[0]&&n.push(new ve(a.state,t,[new ke(n[0].score,a.state,n[0].getUser().id,null,B.FROM)]));return n.slice(0,r)})}},{key:"suggestionsChannels",value:function e(t,r){return Ne.searchChannels(t.toString(),r,{}).then(function(e){return e.map(function(e){return new oe(e.score,e.model_ob,t.toString())})})}},{key:"suggestionsGroups",value:function e(t,r){return Ne.searchGroups(t.toString(),r).then(function(e){return e.map(function(e){return new oe(e.score,e.model_ob,t.toString())})})}},{key:"suggestionsMPIMs",value:function e(t,r){return Ne.searchMPIMs(t.toString(),r).then(function(e){return e.map(function(e){return new ue(e.score,e.model_ob,t.toString())})})}},{key:"suggestionsQueries",value:function e(t,r){var a=this;if(!t)return Promise.resolve([]);return Ne.searchQueries(t.toString(),r).then(function(e){return e.map(function(e){return new ve(a.state,t.toString(),[new be(e[1],e[0])])})})}},{key:"suggestionsExpertChannels",value:function e(t,r){var a=this;if(!t)return Promise.resolve([]);return Ne.searchQueries(t.toString(),r).then(function(e){var r=Te(a.state);return Object(p["flatMap"])(e,function(e){var a=e[0];if(t.toString()===a||t.toString().search(" ")>=0){var n=e[2]||{};return Object.keys(n).map(function(a){var i=Ne.getChannelById(r,a);return new ce(e[1],n[a],i,t)}).filter(function(e){return e.channel})}return[]})})}},{key:"suggestionsFiles",value:function e(t,r,a){var n=[];var i=Te(this.state);var s=function e(r){return r.map(function(e){return new de(e.score,e.model_ob,t.toString())})};n.push(Ne.searchFiles(i,t.normalQuery().toString(),r).then(s));n.push(Ne.searchLocalFiles(i,t.normalQuery().toString(),r).then(s));return Promise.all(n).then(function(e){return Object(p["chain"])(e).flatten().uniqBy(function(e){return e.fileId}).sortBy(function(e){return-e.score(a)}).slice(0,r).value()})}},{key:"suggestionsFilter",value:function e(t,r,a,n,i){var s=void 0;var o=void 0;if(t.lastUnigramQuery().normalQuery().isModifierMatch(a)){s=t.lastUnigramQuery().toString();o=t.lastUnigramPrefixQuery().asQuerySuggestion(this.state)}else{if(!t.lastBigramQuery().normalQuery().isModifierMatch(a))return Promise.resolve([]);s=t.lastBigramQuery().toString();o=t.lastBigramPrefixQuery().asQuerySuggestion(this.state)}var c=q[a];var l="";Object(p["startsWith"])(s,c+":")||Object(p["startsWith"])(s,c+" ")?l=s.slice(c.length+1):(Object(p["startsWith"])(s,a+":")||Object(p["startsWith"])(s,a+" "))&&(l=s.slice(a.length+1));return n(l,r).then(function(e){return e.map(function(e){return o.withQuerySuggestionToken(i(e))})})}},{key:"suggestionsMemberFilter",value:function e(t,r,a){var n=this;return this.suggestionsFilter(t,r,a,Ne.searchUsers,function(e){return new ke(e.score,n.state,e.model_ob.id,e.model_ob.profile.real_name||e.model_ob.name||e.model_ob.profile.display_name,a)})}},{key:"suggestionsInFilter",value:function e(t,r){var a=this;var n=function e(t,r){return Promise.all([Ne.searchChannels(t,r,{include_archived:true}),Ne.searchGroups(t,r),Ne.searchUsers(t,r),Ne.searchMPIMs(t,r)]).then(function(e){return Object(p["flatten"])(e)})};return this.suggestionsFilter(t,r,B.IN,n,function(e){return new ye(e.score,a.state,e.model_ob.id,e.model_ob.name)})}},{key:"suggestionsHasFilter",value:function e(t,r){var a=function e(t,r){return Promise.all([Ne.searchHasFilters(t,r)]).then(function(e){return Object(p["flatten"])(e)})};return this.suggestionsFilter(t,r,B.HAS,a,function(e){return new je(e.model_ob,e.canLog)})}},{key:"suggestionsDateFilter",value:function e(t,r,a){var n=new we(new Date);return this.suggestionsFilter(t,r,a,function(e,t){return n.suggestionsPromise(e,t,a)},function(e){return new Ee(e.model_ob,a)})}},{key:"suggestionsCustomDateFilters",value:function e(t){var r=this;var a=[B.BEFORE,B.DURING,B.ON,B.AFTER];return Promise.resolve(Object(p["filter"])(Object(p["map"])(a,function(e){if(!t.lastUnigramQuery().normalQuery().isModifierMatch(e))return null;return new pe(r.state,t.toString(),[new Se(e)])}),function(e){return e}))}}]);return e}();var ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c()(this,e);this._string=t}n()(e,[{key:"lastUnigramQuery",value:function t(){return new e(this._string.split(/\s+/).slice(-1)[0])}},{key:"lastUnigramPrefixQuery",value:function t(){return new e(Object(p["join"])(this._string.split(/\s+/).slice(0,-1)," "))}},{key:"lastBigramQuery",value:function t(){return new e(Object(p["join"])(this._string.split(/\s+/).slice(-2)," "))}},{key:"lastBigramPrefixQuery",value:function t(){return new e(Object(p["join"])(this._string.split(/\s+/).slice(0,-2)," "))}},{key:"normalQuery",value:function t(){return new e(this._string.toLowerCase())}},{key:"asQuerySuggestion",value:function e(t){return ve.fromString(t,this.toString())}},{key:"isModifierMatch",value:function e(t){var r=q[t];return this._string.length>=1&&(Object(p["startsWith"])(t+":",this._string)||Object(p["startsWith"])(t+" ",this._string)||r&&(Object(p["startsWith"])(r+":",this._string)||Object(p["startsWith"])(r+" ",this._string)))||Object(p["startsWith"])(this._string,t)&&(this._string.length<=t.length||":"===this._string[t.length]||" "===this._string[t.length])||r&&Object(p["startsWith"])(this._string,r)&&(this._string.length<=r.length||":"===this._string[r.length]||" "===this._string[r.length])}},{key:"isEmpty",value:function e(){return!this._string}},{key:"toString",value:function e(){return this._string}}]);return e}();var ie=function(){function e(){c()(this,e)}n()(e,[{key:"toMap",value:function e(t){return{score:this.score(t),type:this.type,featureVector:this.featureVector.serialized}}},{key:"score",value:function e(t){return this.featureVector.score(t)}},{key:"toString",value:function e(){return""}},{key:"toTextyString",value:function e(){return Object(C["b"])(this.toString())}},{key:"featureVector",get:function e(){return Object(M["a"])(this)}},{key:"type",get:function e(){return F.UNKNOWN}},{key:"logId",get:function e(){return""}}]);return e}();var se=function(e){v()(t,e);function t(e,r){c()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._frecencyScore=e;a._query=r;return a}n()(t,[{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_navigational:true})}},{key:"frecencyScore",get:function e(){return this._frecencyScore}},{key:"query",get:function e(){return this._query}},{key:"logId",get:function e(){return""}}]);return t}(ie);var oe=function(e){v()(t,e);function t(e,r,a){c()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));n.channel=r;return n}n()(t,[{key:"toString",value:function e(){return"<#"+this.channel.id+"|"+this.channel.name+">"}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_channel:true,channel:this.channel,key:this.channel.id,id:this.channel.id})}},{key:"type",get:function e(){return F.CHANNEL_NAVIGATION}},{key:"logId",get:function e(){return""+this.channel.id}}]);return t}(se);var ce=function(e){v()(t,e);function t(e,r,a,n){c()(this,t);var i=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,a,n));i._querySuggestionScore=e;i._bm25Score=r;return i}n()(t,[{key:"type",get:function e(){return F.EXPERT_CHANNEL_NAVIGATION}},{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"bm25Score",get:function e(){return this._bm25Score}}]);return t}(oe);var le=function(e){v()(t,e);function t(e,r,a){c()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));n.user=r;return n}n()(t,[{key:"getUser",value:function e(){return this.user}},{key:"toString",value:function e(){var t=this.user.profile.real_name||this.user.profile.display_name||this.user.name;return"<@"+this.user.id+"|@"+t+">"}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_user:true,user:this.user,key:this.user.id,id:this.user.id})}},{key:"type",get:function e(){return F.USER_NAVIGATION}},{key:"logId",get:function e(){return""+this.user.id}}]);return t}(se);var ue=function(e){v()(t,e);function t(e,r,a){c()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));n.mpim=r;return n}n()(t,[{key:"toString",value:function e(){var t=Object(w["b"])(this.mpim);return"<#"+this.mpim.id+"|"+t+">"}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_mpim:true,mpim:this.mpim,key:this.mpim.id,id:this.mpim.id})}},{key:"type",get:function e(){return F.MPIM_NAVIGATION}},{key:"logId",get:function e(){return""+this.mpim.id}}]);return t}(se);var de=function(e){v()(t,e);function t(e,r,a){c()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,a));n.file=r;n._rawScore=e;return n}n()(t,[{key:"toString",value:function e(){return this.file.title}},{key:"toHtml",value:function e(){return Ie(this.toString())}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_file:true,file:this.file,type:this.fileType,html:this.toHtml(),fileTypeDescription:this.fileTypeDescription,key:this.file.id,id:this.file.id})}},{key:"rawScore",get:function e(){return this._rawScore}},{key:"type",get:function e(){return F.FILE_NAVIGATION}},{key:"fileId",get:function e(){return this.file.id}},{key:"fileType",get:function e(){var t=this.file.highlight_type||this.file.filetype;if("space"===t)return"post";if("text"===t)return"txt";return t}},{key:"fileTypeDescription",get:function e(){return this.file.is_external?Object(T["a"])(this.file):this.file.pretty_type}},{key:"logId",get:function e(){return""+this.file.id}}]);return t}(se);var ve=function(e){v()(t,e);function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];c()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.state=e;n._query=r;n.suggestionTokenList=a;return n}n()(t,[{key:"withQuerySuggestionToken",value:function e(r){return new t(this.state,"",this.suggestionTokenList.concat([r]))}},{key:"toMap",value:function e(r){var a=this.toTextyString();return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_query_completion:true,suggestion_replacement:a,token_list:Object(p["map"])(this.suggestionTokenList,function(e){return e.toMap(r)}),key:a})}},{key:"toString",value:function e(){return Object(p["join"])(Object(p["map"])(this.suggestionTokenList,function(e){return e.toString()})," ")}},{key:"toHtml",value:function e(){return Object(p["join"])(Object(p["map"])(this.suggestionTokenList,function(e){return e.toHtml()})," ")}},{key:"toTextyString",value:function e(){return Object(p["join"])(Object(p["map"])(this.suggestionTokenList,function(e){return e.toTextyString()})," ")}},{key:"type",get:function e(){return F.QUERY}},{key:"query",get:function e(){return this._query}},{key:"lastSuggestionToken",get:function e(){return!this.suggestionTokenList||this.suggestionTokenList.length<1?null:this.suggestionTokenList[this.suggestionTokenList.length-1]}},{key:"logId",get:function e(){return this.lastSuggestionToken?this.lastSuggestionToken.logId:""}}],[{key:"fromString",value:function e(t,r){var a=fe.tokenListFromString(t,r);return new this(t,"",a)}}]);return t}(ie);var pe=function(e){v()(t,e);function t(){c()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}n()(t,[{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_custom_date:true})}}]);return t}(ve);var he=function(e){v()(t,e);function t(e,r,a,n){c()(this,t);var i=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,fe.tokenListFromString(e,a)));i.index=n;i.exact_string=a;return i}n()(t,[{key:"score",value:function e(t){return 50-this.index}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_query_history:true,exact_string:this.exact_string,deletable:true})}},{key:"type",get:function e(){return F.QUERY_HISTORY}},{key:"logId",get:function e(){return Object(D["a"])(this.exact_string)}}]);return t}(ve);var fe=function(){function e(){c()(this,e)}n()(e,[{key:"toString",value:function e(){return""}},{key:"toHtml",value:function e(){return Ie(Object(C["a"])(this.toString()))}},{key:"toTextyString",value:function e(){return this.toString()}},{key:"toMap",value:function e(t){return{string:this.toString(t)}}},{key:"type",get:function e(){return L.UNKNOWN}},{key:"logId",get:function e(){return""}}],[{key:"tokenListFromString",value:function e(t,r){var a=new RegExp('^\\s*(("([^"]*)")|([^\\s:]+:(([^<>\\s]+)|(<[^>]+>)))|(@[^\\s]+|<[^>]+>)|([^\\s]+))(.*)$');var n=10;var i=[];var s=r;var o=a.exec(s);while(null!==o){var c=o[3];var l=o[4];var u=o[8];var d=o[9];if(o[n]&&s.length===o[n].length)break;s=o[n];if(c)i.push({is_phrase:true,string:c});else if(u)i.push({is_member:true,string:u});else if(l)i.push({is_filter:true,string:l});else if(d){var v=i.length>0?i.slice(-1)[0]:null;v&&v.is_word?v.string=v.string+" "+d:i.push({is_word:true,string:d})}o=a.exec(s)}var h=Object(p["map"])(i,function(e){if(e.is_phrase)return new ge(e.string);if(e.is_filter){var r=e.string.indexOf(":");var a=e.string.substring(0,r).toLowerCase();var n=e.string.substring(r+1);var i=a+":"+n;var s=function e(t,r){return t===r||t===q[r]};if(s(a,"in"))return ye.fromString(t,i);if(s(a,"from"))return ke.fromString(t,i,B.FROM);if(s(a,"to"))return ke.fromString(t,i,B.TO);if(s(a,"has"))return je.fromString(i);if(s(a,"type")&&Object(N["isFeatureEnabled"])(t,"feature_react_search"))return Ce.fromString(i);if(s(a,"before"))return Ee.fromString(i,B.BEFORE);if(s(a,"during"))return Ee.fromString(i,B.DURING);if(s(a,"on"))return Ee.fromString(i,B.ON);if(s(a,"after"))return Ee.fromString(i,B.AFTER)}else if(e.is_member)return Oe.fromString(t,e.string);return new me(e.string)});return h}}]);return e}();var me=function(e){v()(t,e);function t(e){c()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.string=e;return r}n()(t,[{key:"toString",value:function e(){return this.string?this.string:""}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_string:true,html:this.toHtml()})}},{key:"type",get:function e(){return L.STRING}},{key:"logId",get:function e(){return Object(D["a"])(this.string)}}]);return t}(fe);var be=function(e){v()(t,e);function t(e,r){c()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a._querySuggestionScore=e;a.string=r;return a}n()(t,[{key:"querySuggestionScore",get:function e(){return this._querySuggestionScore}},{key:"type",get:function e(){return L.API}}]);return t}(me);var ge=function(e){v()(t,e);function t(e){c()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.phrase=e;return r}n()(t,[{key:"toString",value:function e(){return'"'+this.phrase+'"'}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_phrase:true,phrase:this.phrase})}},{key:"type",get:function e(){return L.PHRASE}},{key:"logId",get:function e(){return Object(D["a"])(this.phrase)}}]);return t}(fe);var _e=function(e){v()(t,e);function t(e){c()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r._frecencyScore=e;return r}n()(t,[{key:"frecencyScore",get:function e(){return this._frecencyScore}}]);return t}(fe);var ye=function(e){v()(t,e);function t(e,r,a,n){c()(this,t);var i=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.state=r;i._id=a;i._name=n;return i}n()(t,[{key:"toString",value:function e(){var t=Te(this.state);var r=this._id?Ne.getFilterChannelObjectById(t,this._id)||Ne.getChannelById(t,this._id):Ne.getFilterChannelObjectByName(t,this._name)||Ne.getChannelByName(t,this._name);if(r&&Ne.getChannelType(r)&&!Object(g["isUnknownOrNonExistent"])(r)&&!Object(g["isIm"])(r)){if(Object(g["isMpim"])(r)){var a=Object(w["b"])(r);return q.in+":"+a}var n=Object(g["getDisplayName"])(r).replace(/^#/,"");return q.in+":#"+n}var i=this._id?Ne.getMemberById(t,this._id):Ne.getMemberByName(t,this._name);if(i)return q.in+":<@"+i.id+"|@"+Ne.getPrefCompliantMemberNameById(t,i.id)+">";if(this._id)return q.in+":<@"+this._id+"|@"+Ne.getPrefCompliantMemberNameById(t,this._id)+">";return q.in+":"+this._name}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_in_filter:true,string:this.toString(),channel:this.channelOrNull,user:this.memberOrNull})}},{key:"type",get:function e(){return L.FILTER_IN}},{key:"entityId",get:function e(){if(this._id)return this._id;var t=this.channelOrNull;if(t)return t.id;var r=this.memberOrNull;if(r)return r.id;return null}},{key:"channelOrNull",get:function e(){var t=Te(this.state);return this._id?Ne.getChannelById(t,this._id)||Ne.getFilterChannelObjectById(t,this._id):Ne.getChannelByName(t,this._name)||Ne.getFilterChannelObjectByName(t,this._name)}},{key:"memberOrNull",get:function e(){var t=Te(this.state);return this._id?Ne.getMemberById(t,this._id):Ne.getMemberByName(t,this._name)}},{key:"logId",get:function e(){return this._id}}],[{key:"fromString",value:function e(r,a){var n=new RegExp("^("+q.in+"|in):((<[@#]?([A-Z0-9a-z]+)(\\|[\\s]?([#@]?([^>]+)))?>)|([#@]?([^\\s]+)))$").exec(a);if(n&&n[4]&&(Ne.getChannelById(r,n[4])||Ne.getMemberById(r,n[4])||Ne.getFilterChannelObjectById(r,n[4])))return new t(1,r,n[4],n[6]);if(n&&n[8]&&(Ne.getChannelByName(r,n[9])||Ne.getMemberByName(r,n[9])||Ne.getFilterChannelObjectByName(r,n[9])))return new t(1,r,null,n[9]);if(n&&n[2]&&(Ne.getChannelByName(r,n[2])||Ne.getFilterChannelObjectByName(r,n[2])))return new t(1,r,null,n[2]);if(n&&n[9])return new t(1,r,null,n[9]);return new me(a)}}]);return t}(_e);var Oe=function(e){v()(t,e);function t(e,r,a,n){c()(this,t);var i=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.state=r;i._id=a;i._name=n;return i}n()(t,[{key:"toString",value:function e(){if(!this._id)return"@"+this._name;if(this._name)return"<"+this._id+"|@"+this._name+">";return"<@"+this._id+">"}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_member:true,user:this.memberOrNull})}},{key:"toTextyString",value:function e(){var t=Te(this.state);if(!this._id){var r=Ne.getMemberByName(t,this._name);if(r){var a=Ne.getPrefCompliantMemberNameById(t,r.id);return"<@"+r.id+"|@"+a+">"}return"@"+this._name}var n=Ne.getPrefCompliantMemberNameById(t,this._id);return"<@"+this._id+"|@"+n+">"}},{key:"type",get:function e(){return L.MEMBER}},{key:"entityId",get:function e(){var t=Te(this.state);if(this._id)return this._id;var r=Ne.getMemberByName(t,this._name);return r?r.id:null}},{key:"memberOrNull",get:function e(){var t=Te(this.state);return this._id?Ne.getMemberById(t,this._id):Ne.getMemberByName(t,this._name)}},{key:"logId",get:function e(){return this.entityId}}],[{key:"fromString",value:function e(t,r){var a=new RegExp("^((<@?([^\\s|>]+)(\\|[\\s]?@?([^>]+))?>)|(@?([^\\s]+)))$").exec(r);if(a&&a[3]&&Ne.getMemberById(t,a[3]))return new this(1,t,a[3],a[5]);if(a&&a[7]&&Ne.getMemberByName(t,a[7]))return new this(1,t,null,a[7]);return new me(r)}}]);return t}(_e);var ke=function(e){v()(t,e);function t(e,r,a,n,i){c()(this,t);var s=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a,n));s.cleanModifierType=[B.FROM,B.TO].includes(i)?i:"";return s}n()(t,[{key:"toString",value:function e(){return this.modifierName+":"+s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this)}},{key:"toMap",value:function e(r){var a={};a["is_type_"+this.cleanModifierType+"_filter"]=true;return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_member_filter:true,modifier:this.cleanModifierType,modifier_name:this.modifierName},a)}},{key:"toTextyString",value:function e(){return this.modifierName+":"+s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toTextyString",this).call(this)}},{key:"type",get:function e(){switch(this.cleanModifierType){case B.FROM:return L.FILTER_FROM;case B.TO:return L.FILTER_TO;default:return L.UNKNOWN}}},{key:"modifierName",get:function e(){return q[this.cleanModifierType]}}],[{key:"fromString",value:function e(t,r,a){var n=[B.FROM,B.TO].includes(a)?a:"";var i=q[n];var s=new RegExp("^("+i+"|"+n+"):((<@?([^\\s|>]+)(\\|@?([^>]+))?>)|(@?([^\\s]+)))$").exec(r);if(s&&s[4]&&Ne.getMemberById(t,s[4]))return new this(1,t,s[4],s[6],n);if(s&&s[8]&&Ne.getMemberByName(t,s[8]))return new this(1,t,null,s[8],n);return new me(r)}}]);return t}(Oe);var je=function(e){v()(t,e);function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.thing=e;a.canLog=r;return a}n()(t,[{key:"toString",value:function e(){return q.has+":"+this.thingName}},{key:"thingHtml",value:function e(){return Ie(Object(C["a"])(this.thingName))}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_has_filter:true,thingHtml:this.thingHtml()})}},{key:"type",get:function e(){return L.FILTER_HAS}},{key:"thingName",get:function e(){return W[this.thing]?W[this.thing]:this.thing}},{key:"logId",get:function e(){if(true===this.canLog)return this.thingName;return""}}],[{key:"fromString",value:function e(r){var a=new RegExp("("+q.has+"|has):([^\\s]+)").exec(r.toLowerCase());if(a&&a[2])return new t(a[2],false);return new me(r)}}]);return t}(fe);var Ce=function(e){v()(t,e);function t(e){c()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r._fileType=e;return r}n()(t,[{key:"toString",value:function e(){return q.type+":"+this.fileType}},{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_type_filter:true,file_type:this.fileType})}},{key:"type",get:function e(){return L.FILTER_TYPE}},{key:"fileType",get:function e(){return Ie(Object(C["a"])(this._fileType))}},{key:"logId",get:function e(){return this.fileType}}],[{key:"fromString",value:function e(r){var a=new RegExp("("+q.type+"|type):([^\\s]+)").exec(r.toLowerCase());if(a&&a[2])return new t(a[2]);return new me(r)}}]);return t}(fe);var Ee=function(e){v()(t,e);function t(e,r){c()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.dateString=e;a.cleanModifierType=[B.BEFORE,B.DURING,B.ON,B.AFTER].includes(r)?r:"";return a}n()(t,[{key:"toString",value:function e(){return this.modifierName+":"+this.dateString}},{key:"toMap",value:function e(r){var a={};a["is_"+this.dateString]=true;return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_date_filter:true,date_string:this.dateString,modifier:this.cleanModifierType,modifier_name:this.modifierName},a)}},{key:"type",get:function e(){switch(this.cleanModifierType){case"before":return L.FILTER_BEFORE;case"during":return L.FILTER_DURING;case"on":return L.FILTER_ON;case"after":return L.FILTER_AFTER;default:return L.UNKNOWN}}},{key:"modifierName",get:function e(){return q[this.cleanModifierType]}},{key:"logId",get:function e(){return this.dateString}}],[{key:"fromString",value:function e(r,a){var n=[B.BEFORE,B.DURING,B.ON,B.AFTER].includes(a)?a:"";var i=q[n];var s=new RegExp("("+n+"|"+i+"):([^\\s]+)");var o=s.exec(r.toLowerCase());if(o&&o[2])return new t(o[2],n);return new me(r)}}]);return t}(fe);var Se=function(e){v()(t,e);function t(e){c()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"custom_date",e))}n()(t,[{key:"toMap",value:function e(r){return Object(p["assignIn"])(s()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toMap",this).call(this,r),{is_type_custom_date_filter:true})}},{key:"toTextyString",value:function e(){return this.modifierName+":"}}]);return t}(Ee);var we=function(){function e(t){c()(this,e);this.date=t}n()(e,[{key:"suggestionsPromise",value:function e(t,r,a){return Promise.resolve(this.suggestions(t,r,a))}},{key:"suggestions",value:function e(t,r,a){return Object(p["chain"])([this.suggestionsRelativeDates(t,r,a),this.suggestionsMonths(t,r,a),this.suggestionsYears(t,r,a)]).flatten().sortBy(function(e){return-e.score}).slice(0,r).value()}},{key:"suggestionsRelativeDates",value:function e(t,r,a){var n=[V.Yesterday];a!==B.AFTER&&n.push(V.Today);return Object(p["chain"])(n).filter(function(e){return Object(p["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,r).map(function(e,t){return{model_ob:e,score:.95-.01*t}}).value()}},{key:"suggestionsMonths",value:function e(t,r,a){if(a===B.ON)return[];return Object(p["chain"])(this.orderedMonthNames()).filter(function(e){return Object(p["startsWith"])(e.toLowerCase(),t.toLowerCase())}).slice(0,r).map(function(e,t){return{model_ob:e,score:(12-t)/12}}).value()}},{key:"suggestionsYears",value:function e(t,r,a){if(a===B.ON)return[];var n=a===B.AFTER?this.date.getYear()-1:this.date.getYear();var i=1900+n;return Object(p["chain"])(Object(p["range"])(i,i-5,-1)).filter(function(e){return Object(p["startsWith"])(e.toString(),t)}).slice(0,r).map(function(e,t){return{model_ob:e.toString(),score:(r-t)/r}}).value()}},{key:"monthNameFromInt",value:function e(t){return[G.January,G.February,G.March,G.April,G.May,G.June,G.July,G.August,G.September,G.October,G.November,G.December][t]}},{key:"orderedMonthNames",value:function e(){var t=this;return Object(p["map"])(Object(p["range"])(0,12),function(e){return t.monthNameFromInt((t.date.getMonth()-e+12)%12)})}}]);return e}();function Ie(e){return Object(C["e"])(e,null,{no_linking:true,do_specials:true,do_inline_imgs:false,no_jumbomoji:true,no_highlights:true,token_overrides:{"<CODE:START>":"`","<CODE:END>":"`","<B:START>":"*","<B:END>":"*","<I:START>":"_","<I:END>":"_","<STRIKE:START>":"~","<STRIKE:END>":"~","<QUOTE:START>":">","<QUOTE:END>":""}})}function Te(e){return Object(A["b"])(Object(R["getTeamId"])(e))}var Ne=function(){function e(){c()(this,e)}n()(e,null,[{key:"searchQueryHistory",value:function e(t,r){return Object(y["d"])(t,r).then(function(e){return e.data.suggestions})}},{key:"searchUsers",value:function e(t,r){return Object(S["a"])(t,{members:{include_slackbot:true,include_self:true,include_deleted:true},limit:r,sort:{allow_empty_query:true}}).then(function(e){return Object(p["filter"])(e,function(e){return!e.deleted})})}},{key:"searchChannels",value:function e(t,r,a){return Object(S["a"])(t,{channels:Object(p["extend"])({include_archived:false,enterprise_channels:true},a),limit:r,sort:{allow_empty_query:true}})}},{key:"searchGroups",value:function e(t,r){var a=t?t.replace(/^#/,""):"";return Object(S["a"])(a,{groups:true,limit:r,sort:{allow_empty_query:true}}).then(function(e){return Object(p["filter"])(e,function(e){return!e.model_ob.is_archived})})}},{key:"searchMPIMs",value:function e(t,r){return Object(S["a"])(t&&t.replace(/^@/,""),{mpims:true,all_mpims:true,limit:r,sort:{allow_empty_query:true}}).then(function(e){return Object(p["filter"])(e,function(e){return!e.model_ob.is_archived})})}},{key:"searchQueries",value:function e(t,r){if(!t)return Promise.resolve([]);var a=t.toLowerCase();return Z.get().then(function(e){return Object(p["filter"])(e[t[0]],function(e){return Object(p["startsWith"])(e,a)&&e!==t}).slice(0,r)})}},{key:"searchFiles",value:function e(t,r,a){if(!r)return Promise.resolve([]);var n=r.toLowerCase().replace(/[^a-z0-9\s]/,"").replace(/\s+/," ").trim();var i=n.split(/\s+/).slice(0,-1);var s=n.split(/\s+/).slice(-1)[0];return $.get().then(function(e){return Object(p["chain"])(e[n[0]]).filter(function(e){if(i.length<1)return e.normalTitle.includes(n);if(!Object(p["reduce"])(i,function(t,r){return t&&Object(p["includes"])(e.titleTerms,r)},true))return false;return Object(p["filter"])(e.titleTerms,function(e){return Object(p["startsWith"])(e,s)}).length>0}).sort(function(e,t){return t.score-e.score}).slice(0,a).map(function(e){return{model_ob:e,score:e.score}}).value()})}},{key:"searchLocalFiles",value:function e(t,r,a){var n=r?r.toLowerCase():"";var i=function e(t,r){return(t||"").toLowerCase().includes(r.toLowerCase())};return Promise.resolve(Object(p["map"])(Object(p["filter"])(Object.values(Object(b["getAllFiles"])(t)||{}).slice(0,512),function(e){return e.mimetype&&!e.mimetype.startsWith("image")&&i(e.title,n)}).slice(0,a),function(e){return{model_ob:e,score:1}}))}},{key:"searchEmoji",value:function e(t,r){return Y.get().then(function(e){return Object(I["a"])({searchQuery:t,searchMap:e.searchMap,emojiMap:e.emojiMap}).slice(0,r).map(function(e){return{score:49,model_ob:e.name_with_colons,canLog:false}})})}},{key:"searchHasFilters",value:function e(t,r){return Promise.resolve(Object(p["filter"])(Object(p["values"])(H),function(e){return Object(p["startsWith"])(e,t)||Object(p["startsWith"])(W[e],t)}).slice(0,r).map(function(e){return{model_ob:e,score:50,canLog:true}}))}},{key:"searchAutocompleteQuerySuggestions",value:function e(t){var r="new_term_frequency";var a=false;"treatment"===Object(k["a"])("sli_search_ac_experts")&&"new_term_frequency"===r&&(a=true);var n="autocomplete_query_suggestions_response_time_batch_"+t;var i=n+"_mark";Object(O["d"])(i);return Object(y["f"])(1e5,r,a,t||0,1).then(function(e){Object(O["f"])(n,i);return e}).catch(function(e){Object(O["f"])(n,i);return{data:[],exception:e}})}},{key:"searchAutocompleteFileSuggestions",value:function e(t){var r="new_term_frequency";return Object(y["e"])(t,r).catch(function(e){return{data:[],exception:e}})}},{key:"getMemberById",value:function e(t,r){var a=Object(f["getMemberById"])(t,r);if(!a||a.isNonExistent)return null;return a}},{key:"getMemberByName",value:function e(t,r){return Object(f["getMemberByName"])(t,r)}},{key:"getChannelById",value:function e(t,r){return Object(m["getChannelById"])(t,r)}},{key:"getChannelByName",value:function e(t,r){return Object(m["getChannelByName"])(t,r)}},{key:"getPrefCompliantMemberNameById",value:function e(t,r){return Object(_["s"])(t,r)}},{key:"getFilterChannelObjectById",value:function e(t,r){return Object(P["a"])(t,r)}},{key:"getFilterChannelObjectByName",value:function e(t,r){return Object(P["b"])(t,r)}},{key:"getChannelType",value:function e(t,r){return Object(g["getChannelType"])(t,r)}}]);return e}();var Re=ee},21731:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"ACTION_TYPES",function(){return S});r.d(t,"markAsFetching",function(){return M});r.d(t,"storeFetchResults",function(){return P});r.d(t,"storeFetchError",function(){return x});r.d(t,"markAsStale",function(){return D});r.d(t,"uninstallAppActions",function(){return F});r.d(t,"markMessageActionAsRunning",function(){return L});r.d(t,"storeMessageActionSuccess",function(){return B});r.d(t,"storeMessageActionError",function(){return U});r.d(t,"ensureFresh",function(){return ee});r.d(t,"runMessageAction",function(){return re});r.d(t,"selectAppActions",function(){return ae});r.d(t,"selectMessageActions",function(){return ie});r.d(t,"selectGlobalActions",function(){return se});r.d(t,"selectGlobalActionsCache",function(){return oe});r.d(t,"selectIsMessageActionRunning",function(){return ce});r.d(t,"test",function(){return le});var a=r(20615);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(12159);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(263);var m=r.n(f);var b=r(21757);var g=r(21696);var _=r(3182);var y=r(21944);var O=r(21859);var k=r(21716);var j=r(12);var C=r(21727);var E;var S={messageAction:"message_action",globalAction:"global_action"};var w=_["error"];var I=O["a"];var T=O["b"];var N=b["a"];var R={actionId:v.a.string.isRequired,appId:v.a.string.isRequired,channelId:v.a.string.isRequired,messageTs:v.a.string.isRequired};var A={action_id:v.a.string.isRequired,type:v.a.oneOf(Object(p["values"])(S)),name:v.a.string.isRequired,description:v.a.string};var M=Object(g["a"])("Mark app actions fetch as in flight");M.propTypes=null;var P=Object(g["a"])("App action fetch success");P.propTypes=v.a.arrayOf(v.a.shape({app_id:v.a.string.isRequired,app_name:v.a.any,icons:v.a.any,actions:v.a.arrayOf(v.a.shape(A))}));var x=Object(g["a"])("App action fetch failed");x.propTypes=null;var D=Object(g["a"])("Mark app actions as stale");D.propTypes=null;var F=Object(g["a"])("Uninstalls actions for an app");F.propTypes=v.a.arrayOf(v.a.string).isRequired;var L=Object(g["a"])("Mark message action as running");L.propTypes=R;var B=Object(g["a"])("Message action success");B.propTypes=R;var U=Object(g["a"])("Message action failed");U.propTypes=R;var q=function e(t){return c()({},t,{fetchInFlight:true,fetchError:false,fresh:true})};var H=function e(t,r){var a={};var n={};Object(p["forEach"])(r,function(e){var t=e.app_id,r=e.app_name,i=e.icons,o=e.actions;n[t]=o.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.action_id,r=s()(e,["action_id"]);return c()({id:t},r)});a[t]={id:t,name:r,icons:i}});return c()({},t,{infoByAppId:a,actionsByAppId:n,fetchInFlight:false,fetchError:false})};var W=function e(t){return c()({},t,{fresh:false,fetchInFlight:false,fetchError:true})};var G=function e(t){return t.fresh?c()({},t,{fresh:false}):t};var V=function e(t,r){var a=t.infoByAppId,n=t.actionsByAppId;return c()({},t,{infoByAppId:Object(p["omit"])(a,r),actionsByAppId:Object(p["omit"])(n,r)})};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,r=e.messageTs;return[t,r].join(".")}var K=function e(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.params;return r.actionId===t.actionId&&r.appId===t.appId}};function Q(e,t,r){var a=t.appId,i=t.actionId;var s=z(t);var o=Object(p["clone"])(e[s])||[];var l=o.findIndex(K({actionId:i,appId:a}));var u=r&&r(l>=0?o[l]:null);l>=0?u?o.splice(l,1,u):o.splice(l,1):u&&o.push(u);if(o.length)return c()({},e,n()({},s,o));return Object(p["omit"])(e,[s])}var Y=function e(t,r){var a=t.infoByAppId,n=t.actionsByAppId,i=t.messageActionCalls;var s=r.actionId,o=r.appId;var l=a[o];if(!l)throw new Error("No info for app "+o);var u=n[o]||[];var d=u.find(function(e){return e.id===s});if(!d)throw new Error("No action with id "+s);return c()({},t,{messageActionCalls:Q(i,r,function(){return{app:l,action:d,params:r}})})};var J=function e(t,r){return c()({},t,{messageActionCalls:Q(t.messageActionCalls,r)})};var Z=J;var X={infoByAppId:{},actionsByAppId:{},messageActionCalls:{}};var $=Object(g["c"])((E={},n()(E,M,q),n()(E,P,H),n()(E,x,W),n()(E,D,G),n()(E,F,V),n()(E,L,Y),n()(E,B,J),n()(E,U,Z),E),X);t["default"]=$;var ee=Object(g["e"])("Ensures the most up to date actions are available",function(e,t){var r=t();if(!Object(j["isFeatureEnabled"])(r,"feature_app_actions_fe"))return Promise.resolve();var a=ae(r),n=a.fresh;if(!n){e(M());return e(I()).then(function(t){return e(P(t))}).catch(function(t){e(x());e(w(t))})}return Promise.resolve()});function te(e,t){if(!e||!t)return false;var r=z(t);var a=e.messageActionCalls[r];if(!a||!a.length)return false;var n=t.actionId,i=t.appId;if(n&&i)return!!a.find(K({actionId:n,appId:i}));return true}var re=Object(g["e"])("Runs a message action",function(e,t,r){var a=t();var n=ae(a);if(te(n,r))return Promise.resolve();e(L(r));return e(T(c()({},r,{type:"message_action"}))).then(function(){return e(B(r))}).catch(function(){e(U(r));var t=function t(){return e(re(r))};var a=u.a.createElement(y["a"],{onRetry:t});e(Object(C["enqueueToast"])({element:a}))})});var ae=Object(g["d"])(function(e){return e&&e.appActions||X});var ne=Object(f["createSelector"])([function(e){return ae(e).infoByAppId},function(e){return ae(e).actionsByAppId},function(e){return ae(e).messageActionCalls}],function(e,t,r){var a={};Object(p["forEach"])(t,function(t,r){Object(p["forEach"])(t,function(t){if(t.type!==S.messageAction)return;var n=c()({app:e[r]},t);var i=Object(k["d"])(t);a[i]=n})});if(!Object(p["size"])(a))return[];var n=N(k["a"]);var i=[];Object(p["forEach"])(n,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var r=a[t];r&&i.push(r);delete a[t]});Object(p["forEach"])(a,function(e){return i.push(e)});return i});var ie=Object(g["d"])(function(e){var t=ae(e),r=t.fetchInFlight,a=t.fetchError;var n=ne(e);return{actions:n,loading:!!r,error:!!a}});var se=Object(g["d"])(Object(f["createSelector"])([ae],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.infoByAppId,r=e.actionsByAppId,a=e.fetchError,n=e.fetchInFlight;var i=[];Object(p["forEach"])(r,function(e,r){Object(p["forEach"])(e,function(e){if(e.type!==S.globalAction)return;var a=c()({app:t[r]},e);i.push(a)})});return{actions:i,loading:!!n,error:!!a}}));var oe=Object(g["d"])(Object(f["createSelector"])([se],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.actions;return ue(t)}));var ce=Object(g["d"])(function(e,t){var r=ae(e);return te(r,t)});var le={};Object.defineProperty(le,"getMostCommonWithPrefix",{get:function e(){return N},set:function e(t){N=t}});Object.defineProperty(le,"fetchAppActions",{get:function e(){return I},set:function e(t){I=t}});Object.defineProperty(le,"runAppAction",{get:function e(){return T},set:function e(t){T=t}});Object.defineProperty(le,"error",{get:function e(){return w},set:function e(t){w=t}});function ue(e){var t={};Object(p["forEach"])(e,function(e){t[e.id]=e});return t}},21735:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setSortedMembers",function(){return E});r.d(t,"setSearchResultMembers",function(){return S});r.d(t,"setFilteredMembers",function(){return w});r.d(t,"addMembers",function(){return I});r.d(t,"setIsLoadingNewPage",function(){return T});r.d(t,"setIsLoadingNewQuery",function(){return N});r.d(t,"updateMemberIsAdmin",function(){return R});r.d(t,"updateMemberIsRestricted",function(){return A});r.d(t,"updateMemberIsUltraRestricted",function(){return M});r.d(t,"updateMemberIsOwner",function(){return P});r.d(t,"updateMemberTwoFactorAuth",function(){return x});r.d(t,"updateMemberGuestChannels",function(){return D});r.d(t,"updateMemberDeleted",function(){return F});r.d(t,"updateMemberProfile",function(){return L});r.d(t,"updateGuestExpiration",function(){return B});r.d(t,"setMemberListCsv",function(){return U});r.d(t,"updateIsFiltered",function(){return q});r.d(t,"clearFilter",function(){return H});r.d(t,"addMemberInfoFormError",function(){return W});r.d(t,"clearMemberInfoFormErrors",function(){return G});r.d(t,"getSortDirection",function(){return K});r.d(t,"getSortBy",function(){return Q});r.d(t,"getFilter",function(){return Y});r.d(t,"getFiltersForHeaderId",function(){return J});r.d(t,"getSearchQuery",function(){return Z});r.d(t,"getCursorMark",function(){return X});r.d(t,"getNumTotalResults",function(){return $});r.d(t,"getIsLoadingNewPage",function(){return ee});r.d(t,"getIsLoadingNewQuery",function(){return te});r.d(t,"getMembers",function(){return re});r.d(t,"getActionsForMember",function(){return ae});r.d(t,"getApiArgs",function(){return ne});r.d(t,"getGuestChannelsById",function(){return ie});r.d(t,"getMemberListCsv",function(){return se});r.d(t,"getIsFiltered",function(){return oe});r.d(t,"getMemberInfoFormErrors",function(){return ce});r.d(t,"sortMembers",function(){return le});r.d(t,"searchMembers",function(){return ue});r.d(t,"filterMembers",function(){return de});r.d(t,"resetMemberFilters",function(){return ve});r.d(t,"fetchNewPage",function(){return pe});r.d(t,"makeAdmin",function(){return he});r.d(t,"makeRegular",function(){return fe});r.d(t,"updateOwnerStatus",function(){return me});r.d(t,"disableTwoFactorAuth",function(){return be});r.d(t,"sendSsoBindEmailToMember",function(){return ge});r.d(t,"loadGuestChannels",function(){return _e});r.d(t,"editGuestExpiration",function(){return ye});r.d(t,"addAndRemoveGuestChannels",function(){return Oe});r.d(t,"convertMemberToMcGuest",function(){return ke});r.d(t,"convertMemberToScGuest",function(){return je});r.d(t,"promoteToMcGuest",function(){return Ce});r.d(t,"demoteToScGuest",function(){return Ee});r.d(t,"fetchCsvMemberList",function(){return Se});r.d(t,"editMemberProfile",function(){return we});r.d(t,"editSingleChannelGuestChannel",function(){return Ie});var a=r(22903);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(21696);var h=r(21878);var f=r(115);var m=r(3204);var b=r(1036);var g=r(21879);var _=r(21738);var y=r(3271);var O=r(21711);var k=r(12);var j;var C={accountType:{owner:true,admin:true,regular:true,guest:true},billingStatus:{active:true,inactive:true,deactivated:false},authentication:{noAuth:true,twoFactor:true,sso:true}};var E=Object(p["a"])("Set the current sort and list of members in the store");E.propTypes={sortBy:u.a.string.isRequired,sortDir:u.a.string.isRequired,cursorMark:u.a.string,numTotalResults:u.a.number};var S=Object(p["a"])("Set the current search query and list of members in the store");S.propTypes={searchQuery:u.a.string,members:u.a.array,cursorMark:u.a.string,numTotalResults:u.a.number};var w=Object(p["a"])("Set a specific filter and list of members in the store");w.propTypes={headerId:u.a.string.isRequired,filterName:u.a.string.isRequired,isSelected:u.a.bool.isRequired,members:u.a.array,cursorMark:u.a.string,numTotalResults:u.a.number};var I=Object(p["a"])("Add a new page of members to the store");I.propTypes={members:u.a.array.isRequired,cursorMark:u.a.string,numTotalResults:u.a.number.isRequired};var T=Object(p["a"])("Set the loading status for the next page of results");T.propTypes=u.a.bool.isRequired;var N=Object(p["a"])("Set the loading status for a new query");N.propTypes=u.a.bool.isRequired;var R=Object(p["a"])("Changes a member's is_admin status");R.propTypes={memberId:u.a.string.isRequired,isAdmin:u.a.bool.isRequired};var A=Object(p["a"])("Changes a member's is_restricted status");A.propTypes={memberId:u.a.string.isRequired,isRestricted:u.a.bool.isRequired};var M=Object(p["a"])("Changes a member's is_ultra_restricted status");M.propTypes={memberId:u.a.string.isRequired,isUltraRestricted:u.a.bool.isRequired};var P=Object(p["a"])("Changes a member's is_owner status");P.propTypes={memberId:u.a.string.isRequired,isOwner:u.a.bool.isRequired};var x=Object(p["a"])("Changes a member's two_factor_auth_enabled status to false");x.propTypes=u.a.object;var D=Object(p["a"])("Add guest user's channels to store");D.propTypes={memberId:u.a.string.isRequired,channels:u.a.array.isRequired};var F=Object(p["a"])("Add member's deleted status");F.propTypes={memberId:u.a.string,isDeleted:u.a.bool.isRequired};var L=Object(p["a"])("Update a member's profile");L.propTypes={memberId:u.a.string.isRequired,profile:u.a.object.isRequired};var B=Object(p["a"])("Update a guest's expiration");B.propTypes={memberId:u.a.string.isRequired,expirationTs:u.a.number.isRequired};var U=Object(p["a"])("Set the member list csv in the store");U.propTypes=u.a.object.isRequired;var q=Object(p["a"])("Update the store with whether a user has filtered the member list");q.propTypes=u.a.bool.isRequired;var H=Object(p["a"])("Clear the filter in store by setting filter to the initial state");H.propTypes=u.a.object;var W=Object(p["a"])("Store an API error for the Edit Member Info dialog");W.propTypes=u.a.object.isRequired;var G=Object(p["a"])("Clear all errors for the Edit Member Info dialog");G.propTypes=u.a.object;var V={members:[],filter:v.a.assign({},C),searchQuery:null,sortBy:null,sortDir:null,cursorMark:null,numTotalResults:null,isLoadingNewPage:false,isLoadingNewQuery:null,isFiltered:true,team:{},actor:{},actions:[],memberListCsv:{},memberInfoFormErrors:[]};var z=Object(p["c"])((j={},s()(j,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sortBy,a=t.sortDir,n=t.members,i=t.cursorMark,s=t.numTotalResults;var o=c()({},e,{sortBy:r,sortDir:a,members:n,cursorMark:i,numTotalResults:s});return o}),s()(j,S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.searchQuery,a=t.members,n=t.cursorMark,i=t.numTotalResults;var s=c()({},e,{searchQuery:r,members:a,cursorMark:n,numTotalResults:i});return s}),s()(j,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.headerId,a=t.filterName,n=t.isSelected,i=t.members,o=t.cursorMark,l=t.numTotalResults;var u=e.filter;var d=s()({},r,s()({},a,n));return c()({},e,{filter:v.a.merge({},u,d),members:i,cursorMark:o,numTotalResults:l})}),s()(j,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.members,a=t.cursorMark,i=t.numTotalResults;var s=c()({},e,{members:[].concat(n()(e.members),n()(r)),cursorMark:a,numTotalResults:i});return s}),s()(j,T,function(e,t){var r=c()({},e,{isLoadingNewPage:t});return r}),s()(j,N,function(e,t){var r=c()({},e,{isLoadingNewQuery:t});return r}),s()(j,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.isAdmin;var n=v.a.find(e.members,{id:r});var i=c()({},n,{is_admin:a});a||(i.is_owner=false);var s=c()({},e,{members:e.members.map(function(e){return e.id===r?i:e})});return s}),s()(j,A,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.isRestricted;var n=v.a.find(e.members,{id:r});var i=c()({},n,{is_restricted:a});a||(i.is_ultra_restricted=false);var s=c()({},e,{members:e.members.map(function(e){return e.id===r?i:e})});return s}),s()(j,M,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.isUltraRestricted;var n=v.a.find(e.members,{id:r});var i=c()({},n,{is_ultra_restricted:a});a&&(i.is_restricted=true);var s=c()({},e,{members:e.members.map(function(e){return e.id===r?i:e})});return s}),s()(j,P,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.isOwner;var n=v.a.find(e.members,{id:r});var i=c()({},n,{is_owner:a});a&&(i.is_admin=true);var s=c()({},e,{members:e.members.map(function(e){return e.id===r?i:e})});return s}),s()(j,x,function(e,t){var r=c()({},e,{members:e.members.map(function(e){return e.id!==t||!e.two_factor_auth_enabled?e:c()({},e,{two_factor_auth_enabled:false})})});return r}),s()(j,D,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.channels;var n=c()({},e,{members:e.members.map(function(e){return e.id===r?c()({},e,{guest_channels:a}):e})});return n}),s()(j,F,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.isDeleted;var n=v.a.find(e.members,{id:r});var i=c()({},n,{deleted:a});if(a){i.is_admin=false;i.is_owner=false;i.is_primary_owner=false;i.is_restricted=false;i.is_ultra_restricted=false;n.is_restricted&&n.profile.guest_expiration_ts&&delete i.profile.guest_expiration_ts}var s=c()({},e,{members:e.members.map(function(e){return e.id===r?i:e})});return s}),s()(j,L,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.profile;var n=c()({},e,{members:e.members.map(function(e){return e.id===r?c()({},e,{profile:a}):e})});return n}),s()(j,B,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.memberId,a=t.expirationTs;var n=c()({},e,{members:e.members.map(function(e){if(e.id===r)return c()({},e,{profile:c()({},e.profile,{guest_expiration_ts:a})});return e})});return n}),s()(j,U,function(e,t){var r=c()({},e,{memberListCsv:t});return r}),s()(j,q,function(e,t){var r=c()({},e,{isFiltered:t});return r}),s()(j,H,function(e,t){var r=c()({},e,{filter:t,cursorMark:null});return r}),s()(j,W,function(e,t){var r=c()({},e,{memberInfoFormErrors:[].concat(n()(e.memberInfoFormErrors),[t])});return r}),s()(j,G,function(e){var t=c()({},e,{memberInfoFormErrors:[]});return t}),j),V);t["default"]=z;var K=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.sortDir)return e.adminMembers.sortDir;return"asc"});var Q=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.sortBy)return e.adminMembers.sortBy;return"real_name"});var Y=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.filter)return e.adminMembers.filter;return null});var J=Object(p["d"])(function(e,t){if(e&&e.adminMembers&&e.adminMembers.filter&&e.adminMembers.filter[t])return e.adminMembers.filter[t];return null});var Z=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.searchQuery)return e.adminMembers.searchQuery;return null});var X=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.cursorMark)return e.adminMembers.cursorMark;return null});var $=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.numTotalResults)return e.adminMembers.numTotalResults;return null});var ee=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.isLoadingNewPage)return e.adminMembers.isLoadingNewPage;return null});var te=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.isLoadingNewQuery)return e.adminMembers.isLoadingNewQuery;return null});var re=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.members)return e.adminMembers.members;return[]});var ae=Object(p["d"])(function(e,t){if(!e||!t||v.a.isEmpty(e)||v.a.isEmpty(t))return[];var r=[];var a=Object(_["b"])(e);var n=Object(y["getCurrentTeam"])(e);v.a.each(g["MEMBER_ACTION_MAP"],function(e,i){e(n,a,t)&&r.push(i)});return r});var ne=Object(p["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r={filter:Y(e),sortBy:Q(e),sortDir:K(e),searchQuery:Z(e),cursorMark:X(e)};v.a.merge(r,t);return r});var ie=Object(p["d"])(function(e,t){if(!e||!t||v.a.isEmpty(e.adminMembers)||!e.adminMembers.members.length)return null;var r=null;e.adminMembers.members.forEach(function(e){e.id===t&&e.guest_channels&&(r=e.guest_channels)});return r});var se=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.memberListCsv)return e.adminMembers.memberListCsv;return{}});var oe=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.isFiltered)return e.adminMembers.isFiltered;return false});var ce=Object(p["d"])(function(e){if(e&&!!e.adminMembers&&!!e.adminMembers.memberInfoFormErrors)return e.adminMembers.memberInfoFormErrors;return[]});var le=Object(p["e"])("Load sorted admin member data",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.sortBy,n=r.sortDir;e(N(true));e(E({sortBy:a,sortDir:n}));var i=ne(t(),{sortBy:a,sortDir:n,cursorMark:null});return Object(h["c"])(i).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.members,i=t.cursorMark,s=t.numTotalResults;e(E({members:r,sortBy:a,sortDir:n,cursorMark:i,numTotalResults:s}));e(N(false))}).catch(function(e){throw e})});le.propTypes={sortBy:u.a.string.isRequired,sortDir:u.a.string.isRequired};var ue=Object(p["e"])("Load the subset of admin member data matching a search query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.searchQuery;e(N(true));e(S({searchQuery:a}));var n=ne(t(),{searchQuery:a,cursorMark:null});return Object(h["c"])(n).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.members,n=t.cursorMark,i=t.numTotalResults;e(S({members:r,searchQuery:a,cursorMark:n,numTotalResults:i}));e(N(false))}).catch(function(e){throw e})});ue.propTypes={searchQuery:u.a.string};var de=Object(p["e"])("Load filtered admin member data",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.headerId,n=r.filterName,i=r.isSelected;if(!i){var o=J(t(),a);var c=v.a.chain(o).values().filter().value().length;if(1===c)return Promise.resolve()}e(w({headerId:a,filterName:n,isSelected:i}));e(N(true));var l={filter:s()({},a,s()({},n,i)),cursorMark:null};var u=ne(t(),l);return Object(h["c"])(u).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.members,o=r.cursorMark,c=r.numTotalResults;var l=false;var u=Y(t());["accountType","billingStatus","authentication"].map(function(e){v.a.findKey(u[e],function(e){return!e})&&(l=true);return l});e(q(l));e(w({headerId:a,filterName:n,isSelected:i,members:s,cursorMark:o,numTotalResults:c}));e(N(false))}).catch(function(e){throw e})});de.propTypes={filter:u.a.string};var ve=Object(p["e"])("Resets all filters and loads a full, member list sorted by name",function(e,t){e(N(true));var r=v.a.assign({},C);r.billingStatus.deactivated=true;var a=ne(t(),{filter:r,sortBy:"real_name",sortDir:"asc",cursorMark:null});return Object(h["c"])(a).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.members,a=t.sortBy,n=t.sortDir,i=t.cursorMark,s=t.numTotalResults;e(q(false));e(N(false));e(E({members:r,sortBy:a,sortDir:n,cursorMark:i,numTotalResults:s}))}).catch(function(e){throw e})});var pe=Object(p["e"])("Load the subset of admin member data matching a search query",function(e,t){e(T(true));var r=ne(t());return Object(h["c"])(r).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.members,a=t.cursorMark,n=t.numTotalResults;e(T(false));e(I({members:r,cursorMark:a,numTotalResults:n}))}).catch(function(e){throw e})});var he=Object(p["e"])("Makes a member an admin",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(h["d"])({memberId:a})).then(function(){var t=true;e(R({memberId:a,isAdmin:t}))}).catch(function(e){throw e})});he.propTypes={memberId:u.a.string.isRequired};var fe=Object(p["e"])("Makes a user a regular member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.action;return e(Object(h["h"])({memberId:a})).then(function(){if("demote_admin"===n){var t=false;e(R({memberId:a,isAdmin:t}))}else if("promote_to_member"===n){var r=false;var i=false;e(A({memberId:a,isRestricted:r}));e(M({memberId:a,isUltraRestricted:i}))}else if("activate"===n){var s=false;e(F({memberId:a,isDeleted:s}))}}).catch(function(e){throw e})});fe.propTypes={memberId:u.a.string.isRequired,action:u.a.string.isRequired};var me=Object(p["e"])("Can either make a member an owner or make an owner a member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.action;var i=void 0;if("promote_to_owner"===n)return e(Object(h["f"])({memberId:a})).then(function(){i=true;e(P({memberId:a,isOwner:i}))}).catch(function(e){throw e});if("demote_owner"===n)return e(Object(h["j"])({memberId:a})).then(function(){i=false;e(P({memberId:a,isOwner:i}))}).catch(function(e){throw e});return null});me.propTypes={memberId:u.a.string.isRequired,action:u.a.string.isRequired};var be=Object(p["e"])("Disables two-factor verification for a given member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(h["a"])({memberId:a})).then(function(){e(x(a))}).catch(function(e){throw e})});be.propTypes={memberId:u.a.string.isRequired};var ge=Object(p["e"])("Sends the single sign-on binding email to a target member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(h["k"])({memberId:a})).catch(function(e){throw e})});ge.propTypes={memberId:u.a.string.isRequired};var _e=Object(p["e"])("Gets guest channels for member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;Object(m["e"])(a,["channels"]).then(function(r){var n=r.channels.map(function(e){return Object(O["e"])(t(),e)});e(D({memberId:a,channels:n}))}).catch(function(e){throw e})});_e.propTypes={memberId:u.a.string.isRequired};var ye=Object(p["e"])("Set or remove expiration for a guest via API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.expirationTs;0===n?e(Object(h["i"])({memberId:a})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.profile;e(B({memberId:a,expirationTs:r.guest_expiration_ts}))}):e(Object(h["l"])({memberId:a,expirationTs:n})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.profile;e(B({memberId:a,expirationTs:r.guest_expiration_ts}))})});ye.propTypes={memberId:u.a.string.isRequired,expirationTs:u.a.number.isRequired};var Oe=Object(p["e"])("Updates channels guest should be a member of",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelIdsToAdd,i=r.channelIdsToRemove;var s=[];var o=[];n.length&&(s=n.map(function(t){return e(Object(b["G"])({channelId:t,users:a}))}));i.length&&(o=i.map(function(t){return e(Object(b["I"])({channelId:t,memberId:a}))}));Promise.all(s.concat(o)).then(function(){e(_e({memberId:a}))})});Oe.propTypes={memberId:u.a.string.isRequired,channelIdsToAdd:u.a.array.isRequired,channelIdsToRemove:u.a.array.isRequired};var ke=Object(p["e"])("Converts a full member to a multi-channel guest and sets expiration",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.expirationTs;return e(Object(h["e"])({memberId:a})).then(function(){e(A({memberId:a,isRestricted:true}));e(F({memberId:a,isDeleted:false}));null!==n&&e(ye({memberId:a,expirationTs:n}))})});ke.propTypes={memberId:u.a.string.isRequired,expirationTs:u.a.number};var je=Object(p["e"])("Converts a full member to a single-channel guest and sets expiration",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelId,i=r.expirationTs;return e(Object(h["g"])({channelId:n,memberId:a})).then(function(){e(M({memberId:a,isUltraRestricted:true}));e(A({memberId:a,isRestricted:true}));e(F({memberId:a,isDeleted:false}));null!==i&&e(ye({memberId:a,expirationTs:i}));var r=Object(O["e"])(t(),n);e(D({memberId:a,channels:[r]}))})});je.propTypes={memberId:u.a.string.isRequired,channelId:u.a.string,expirationTs:u.a.number};var Ce=Object(p["e"])("Promotes a single-channel guest to multi-channel, adds/removes specified channels, and sets expiration",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelIdsToAdd,i=r.channelIdsToRemove,s=r.expirationTs;return e(Object(h["e"])({channelId:n[0],memberId:a})).then(function(){e(M({memberId:a,isUltraRestricted:false}));e(A({memberId:a,isRestricted:true}));e(Oe({memberId:a,channelIdsToAdd:n.slice(1),channelIdsToRemove:i}));null!==s&&e(ye({memberId:a,expirationTs:s}));var r=ie(t(),a).map(function(e){return e.id});var o=v.a.xor(v.a.xor(r,n),i);var c=o.map(function(e){return Object(O["e"])(t(),e)});e(D({memberId:a,channels:c}))})});Ce.propTypes={memberId:u.a.string.isRequired,channelIdsToAdd:u.a.array,channelIdsToRemove:u.a.array,expirationTs:u.a.number};var Ee=Object(p["e"])("Promotes a single-channel guest to multi-channel, adds/removes specified channels, and sets expiration",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelId,i=r.expirationTs;return e(Object(h["g"])({channelId:n,memberId:a})).then(function(){e(M({memberId:a,isUltraRestricted:true}));e(A({memberId:a,isRestricted:true}));null!==i&&e(ye({memberId:a,expirationTs:i}));var r=Object(O["e"])(t(),n);e(D({memberId:a,channels:[r]}))})});Ee.propTypes={memberId:u.a.string.isRequired,channelIdsToAdd:u.a.array,channelIdsToRemove:u.a.array,expirationTs:u.a.number};var Se=Object(p["e"])("Gets csv member list for a workspace",function(e,t){var r=new XMLHttpRequest;r.open("POST","/api/users.admin.fetchTeamUsersCsv",true);r.responseType="blob";r.onload=function t(){200===this.status&&e(U(this.response))};var a=t();r.onerror=function e(t){Object(f["d"])(t,"admin_csv_download")};var n=new FormData;var i=Object(k["getFromBootData"])(a,"api_token");n.append("token",i);r.send(n)});var we=Object(p["e"])("Update profile info for a member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.profile;var i={};n.realName&&(i.real_name=n.realName);n.displayName&&(i.display_name=n.displayName);n.email&&(i.email=n.email);e(Object(h["o"])({memberId:a,profile:i})).then(function(t){e(L({memberId:a,profile:t.profile}))}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;var a=c()({},r);if("email_bad"===r.error){a.error="invalid_email";a.field="email"}e(W(a))})});we.propTypes={memberId:u.a.string.isRequired,profile:u.a.object.isRequired};var Ie=Object(p["e"])("Update the channel for a Single-Channel Guest",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelId;e(Object(h["m"])({memberId:a,channelId:n})).then(function(){e(_e({memberId:a}))})});Ie.propTypes={memberId:u.a.string.isRequired,channelId:u.a.string.isRequired}},21742:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setSearchAutocompleteSuggestions",function(){return p});r.d(t,"getSearchAutocompleteSuggestions",function(){return h});r.d(t,"setSearchAutocompleteEchoQuery",function(){return f});r.d(t,"setSearchAutocompleteSelection",function(){return b});r.d(t,"reset",function(){return g});r.d(t,"getSearchAutocompleteSelectedIndex",function(){return O});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(21725);var d=r(21726);var v;var p=Object(l["a"])("Set the list of autocomplete suggestions");p.propTypes={suggestions:c.a.object.isRequired};var h=Object(l["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.suggestions});var f=Object(l["e"])("Set the first (0th) item in the autocomplete list as an echo of the given query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.query;var n=t();e(p({suggestions:Object(d["p"])(n,h(n),a)}))});f.propTypes={query:c.a.string.isRequired};var m=Object(l["a"])("Set the index of the selected autocomplete suggestion");m.propTypes={selectedIndex:c.a.number.isRequired};var b=Object(l["e"])("Set the selected autocomplete item, keeping the display text in sync",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.selectedIndex,n=r.setText;var i=t();e(m({selectedIndex:a}));if(n){var s=i&&i.searchAutocomplete&&i.searchAutocomplete.suggestions||[];var o=s[a];o&&o.is_type_query_completion&&e(Object(u["setSearchInputBoxDisplayQuery"])({displayQuery:o.suggestion_replacement}))}});b.propTypes={selectedIndex:c.a.oneOfType([c.a.number]),setText:c.a.bool};var g=Object(l["a"])("Reset search autocomplete redux state");g.propTypes={};var _={suggestions:[],selectedIndex:null};var y=Object(l["c"])((v={},n()(v,g,function(){return _}),n()(v,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.suggestions;return s()({},e,{suggestions:r})}),n()(v,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.selectedIndex;return s()({},e,{selectedIndex:r})}),v),_);t["default"]=y;var O=Object(l["d"])(function(e){return e&&e.searchAutocomplete&&e.searchAutocomplete.selectedIndex})},21743:function(e,t,r){"use strict";r.d(t,"a",function(){return h});r.d(t,"c",function(){return f});t["b"]=m;var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21696);var c=r(21804);var l=r(21836);var u=r(21837);var d=r(54);var v=r(21769);var p="search_sort";var h={relevantMessages:"relevantMessages",recentMessages:"recentMessages"};var f=Object(o["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.messageSort;e(Object(v["c"])({pref:p,value:a}));var i=t();e(Object(u["a"])(n()({method:"set_sort_"+(a===h.relevantMessages?"score":"timestamp"),request_id:Object(c["a"])(i)},Object(l["a"])(i))))});f.propTypes={method:s.a.string};function m(e){var t=Object(d["getUserPref"])(e,p);"timestamp"===t&&(t=h.recentMessages);"score"===t&&(t=h.relevantMessages);return t||h.relevantMessages}},21744:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var a=r(21731);var n=r(21697);var i=r(284);var s=r(21806);var o=r(43);var c=r(22499);var l=r(22500);var u=r(22501);var d=r(22502);var v=r(22507);var p=r(22508);var h=r(1544);var f={addReaction:"add_reaction",comment:"comment",copyLink:"copy_link",deleteMessage:"delete_message",editMessage:"edit_message",markUnread:"mark_unread",pin:"pin",remind:"remind",removeBroadcast:"remove_broadcast",shareMessage:"share_message",star:"star",subscribe:"subscribe"};var m=function e(t,r,m,b){var g=m.ts,_=m.channelId;if(r.appId)return b(Object(a["runMessageAction"])({actionId:r.id,appId:r.appId,messageTs:g,channelId:_}));switch(r.id){case f.addReaction:return Object(c["a"])(t,m,b);case f.comment:return b(Object(l["a"])({ts:g,channelId:_}));case f.copyLink:return b(Object(u["a"])({ts:g,channelId:_}));case f.deleteMessage:return b(Object(d["a"])({ts:g,channelId:_}));case f.editMessage:Object(o["warn"])("Edit message is an unhandled case");return null;case f.markUnread:return b(Object(n["setUnreadPoint"])({channelId:_,unreadTs:g}));case f.pin:return b(Object(i["togglePin"])({ts:g,channelId:_}));case f.remind:Object(o["warn"])("Remind is an unhandled case");return null;case f.removeBroadcast:return b(Object(v["a"])({ts:g,channelId:_}));case f.shareMessage:return b(Object(p["a"])({ts:g,channelId:_}));case f.star:return b(Object(h["b"])({ts:g,channelId:_}));case f.subscribe:return b(Object(s["toggleThreadSubscription"])({ts:g,channelId:_}));default:Object(o["warn"])("Unknown action type "+r.id);return null}};t["b"]=m},2175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2176);var n=r(42);Object(n["a"])("interop.mountChannelOptions",a["a"]);Object(n["a"])("interop.unmountChannelOptions",a["b"])},21751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setFlexState",function(){return v});r.d(t,"getFlexpaneState",function(){return f});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(124);var d;var v=Object(l["a"])("Setting the flexpane state");v.propTypes={flexName:c.a.string.isRequired,flexExtra:c.a.string,flexExtraType:c.a.string,flexOrigin:c.a.string,flexOriginId:c.a.string};var p={flexName:null,flexExtra:null,flexExtraType:null,flexOrigin:null,flexOriginId:null};var h=Object(l["c"])((d={},n()(d,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.flexName,a=t.flexExtra,n=t.flexExtraType,i=t.flexOrigin,s=t.flexOriginId;return{flexName:r,flexExtra:a,flexExtraType:n,flexOrigin:i,flexOriginId:s}}),n()(d,u["setActiveChannel"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.prevChannelId;if(r===a)return e;var n=e.flexOrigin;if("channel_page"===n||"group_page"===n||"im_page"===n)return s()({},e,{flexOrigin:null,flexOriginId:null});return e}),d),p);t["default"]=h;var f=Object(l["d"])(function(e){return e&&e.flexpane})},21752:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21949);var n=r(21771);r.d(t,"getActivePlan",function(){return n["a"]});r.d(t,"getAvailableCurrencies",function(){return n["b"]});r.d(t,"selectAvailableCurrencies",function(){return n["p"]});r.d(t,"selectActiveProductId",function(){return n["o"]});r.d(t,"selectActivePlanCostPerMonth",function(){return n["j"]});r.d(t,"selectActivePlanLevel",function(){return n["l"]});r.d(t,"selectActivePlanTerm",function(){return n["n"]});r.d(t,"selectPaymentMethod",function(){return n["C"]});r.d(t,"selectActivePlanIsYearly",function(){return n["k"]});r.d(t,"selectActivePlanMonthsCount",function(){return n["m"]});r.d(t,"selectActiveCurrency",function(){return n["i"]});r.d(t,"getTermPlanForActiveCurrency",function(){return n["d"]});r.d(t,"selectCostPerMonthForYearlyPlan",function(){return n["s"]});r.d(t,"selectCostPerMonthForMonthlyPlan",function(){return n["r"]});r.d(t,"selectIsPlansAndCostDataLoaded",function(){return n["x"]});r.d(t,"selectBillableActiveUsers",function(){return n["q"]});r.d(t,"selectPaidSeats",function(){return n["B"]});r.d(t,"isZeroRealActiveUsers",function(){return n["h"]});r.d(t,"selectInactiveUsers",function(){return n["v"]});r.d(t,"selectTotalUsers",function(){return n["I"]});r.d(t,"selectSubtotal",function(){return n["D"]});r.d(t,"selectTax",function(){return n["E"]});r.d(t,"selectCreditsApplied",function(){return n["t"]});r.d(t,"selectCurrentTeamCredits",function(){return n["u"]});r.d(t,"selectTeamCreditsRemaining",function(){return n["F"]});r.d(t,"selectTotalRecurring",function(){return n["H"]});r.d(t,"selectTotalDueToday",function(){return n["G"]});r.d(t,"getQuotedTermEndDate",function(){return n["c"]});r.d(t,"selectIsCostAvailableForPlan",function(){return n["w"]});r.d(t,"selectLocalCostForCurrentPlan",function(){return n["y"]});r.d(t,"selectMinInvoiceSeats",function(){return n["A"]});r.d(t,"selectMaxInvoiceSeats",function(){return n["z"]});r.d(t,"isAPIError",function(){return n["e"]});r.d(t,"isCostValid",function(){return n["f"]});r.d(t,"isInvoiceActivePaymentMethod",function(){return n["g"]});var i=r(21810);r.d(t,"switchPlans",function(){return i["j"]});r.d(t,"plansFetchSuccess",function(){return i["f"]});r.d(t,"costFetchSuccess",function(){return i["b"]});r.d(t,"setErrorState",function(){return i["g"]});r.d(t,"plansAndCostDataLoaded",function(){return i["e"]});r.d(t,"setPlanLevel",function(){return i["i"]});r.d(t,"setPaymentMethod",function(){return i["h"]});r.d(t,"fetchCostForCurrentPlan",function(){return i["c"]});r.d(t,"fetchPlansAndCostData",function(){return i["d"]});r.d(t,"changeActivePlan",function(){return i["a"]});r.d(t,"updatePlanLevel",function(){return i["l"]});r.d(t,"updatePaymentMethod",function(){return i["k"]});t["default"]=a["a"]},21753:function(e,t,r){"use strict";r.d(t,"c",function(){return c});r.d(t,"b",function(){return u});r.d(t,"a",function(){return d});r.d(t,"e",function(){return v});r.d(t,"f",function(){return h});r.d(t,"d",function(){return f});var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o={vat:"vat",sales_tax:"sales_tax"};var c={monthly:"monthly",yearly:"yearly"};var l={monthly:1,yearly:12};var u={standard:{id:"std",name:"standard"},plus:{id:"plus",name:"plus"}};var d={CREDIT_CARD:"creditCard",INVOICE:"invoice"};var v=function e(t){var r=Object(i["isEmpty"])(t.tax)?{}:{value:t.tax.sales_tax_amt,type:t.tax.is_vat?o.vat:o.sales_tax};var a=t.credits?{currentCredits:t.credits.total_credits,creditsRemaining:t.credits.credits_remaining,creditsApplied:t.credits.credits_applied}:{};var n=t.billable_users?{billableActiveUsers:t.billable_users.billable_active_users,inactiveUsers:t.billable_users.inactive_users,zeroActiveUsers:t.billable_users.zero_active_users}:{};var s={id:t.product_id,subtotal:t.subtotal,billableUsers:n,tax:r,credits:a,totalRecurring:t.total_recurring,totalDueToday:t.total_due_today,quotedTermEnd:t.quoted_term_end,paidSeats:t.paid_seats};return{activePlanCost:s}};var p=function e(t){var r="12m"===t.term?c.yearly:c.monthly;var a="12m"===t.term?l.yearly:l.monthly;return{id:t.product_id,term:r,pricePerMonth:t.cost_per_m,pricePerTerm:t.cost_per_term,currency:t.currency,level:t.level,lengthOfTermInMonths:a,costPerMonth:t.cost_per_m,costPerTerm:t.cost_per_term,isInvoice:t.is_inv||false,maxInvoiceSeats:t.max_invoice_seats,minInvoiceSeats:t.min_invoice_seats}};var h=function e(t){var r={};Object.keys(t).forEach(function(e){var a,i,s,o,l;var v=t[e];r[e]=(l={},n()(l,u.standard.id,(i={},n()(i,d.CREDIT_CARD,(a={},n()(a,c.monthly,p(v.std_m)),n()(a,c.yearly,p(v.std_y)),a)),n()(i,d.INVOICE,n()({},c.yearly,p(v.inv_std_y))),i)),n()(l,u.plus.id,(o={},n()(o,d.CREDIT_CARD,(s={},n()(s,c.monthly,p(v.plus_m)),n()(s,c.yearly,p(v.plus_y)),s)),n()(o,d.INVOICE,n()({},c.yearly,p(v.inv_plus_y))),o)),l)});return{availablePlans:r}};var f=function e(t,r,a,n){var i=r.country,s=r.postalCode,o=r.isBusinessPurchase;return[t,i,s,o,a,n].join("-")}},2176:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(2177);var d=function e(t,r,a){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(l["c"])(t);Object(c["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var p={mountChannelOptions:d,unmountChannelOptions:v}},21765:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3181);var y=r(499);var O=r(20124);var k=r.n(O);var j={value:v.a.oneOfType([v.a.string,v.a.object]),onClick:v.a.func,role:v.a.string,tabIndex:v.a.number,className:v.a.string,hasFocus:v.a.bool};var C={value:"",onClick:null,role:"button",tabIndex:0,className:null,hasFocus:false};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.node=null;r.setRef=function(e){r.node=e};Object(b["bindAll"])(r,["onClick","onReturnKeyDown","setRef"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.tabbableChildren=Object(y["a"])(this.node);this.maybeFocusNode()}},{key:"componentDidUpdate",value:function e(){this.maybeFocusNode()}},{key:"onClick",value:function e(t){var e=this.props.onClick;e&&e(t)}},{key:"onReturnKeyDown",value:function e(t){var r=t.charCode;if(!this.props.onClick||r!==_["c"]&&r!==_["h"])return;t.preventDefault();this.onClick(t)}},{key:"maybeFocusNode",value:function e(){if(this.props.hasFocus&&this.node){this.tabbableChildren.forEach(function(e){return e.setAttribute("tabIndex",0)});this.node.focus()}else this.tabbableChildren.forEach(function(e){return e.setAttribute("tabIndex",-1)})}},{key:"render",value:function e(){var t=this.props,r=t.value,a=t.role,n=t.tabIndex,i=t.className,s=t.hasFocus;var o=m()("c-table_view_row_item",{"focus-ring":s},i);return h.a.createElement("div",{onClick:this.onClick,onKeyPress:this.onReturnKeyDown,role:a,tabIndex:s?"0":n,className:o,ref:this.setRef},h.a.createElement("div",{className:"c-table_view_row_item_value"},r))}}]);return t}(p["PureComponent"]);E.displayName="TableViewRowItem";E.defaultProps=C;t["a"]=E},21766:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(1058);var k=r(265);var j=r(442);var C=r(397);var E=r(990);var S=r(20125);var w=r.n(S);var I={entityType:m.a.oneOf(["member","org","workspace","app"]).isRequired,dimension:m.a.number.isRequired,entityData:m.a.object.isRequired,onClick:m.a.func,customClasses:m.a.string,featureReactMessages:m.a.bool.isRequired,featureReactMemberProfileCard:m.a.bool.isRequired};var T={entityType:"member",onClick:_["noop"],customClasses:null};var N=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"getImageKeyFromDimension",value:function e(t,r){var a={member:[512,192,72,48,32,24],app:[1024,512,192,128,96,72,64,48,36,32],workspace:[230,132,102,88,68,44,34],org:[230,132,102,88,68,44,34]};var n=Object(C["a"])(t,a[r]);return"image_"+n}},{key:"mapRawMemberDataToProps",value:function e(t){var r=t.rawMemberData,a=t.iconDimension,n=t.customClasses,i=t.clickHandler;var s=Object(E["a"])({size:a,teamId:Object(_["get"])(r,"enterprise_id"),memberId:Object(_["get"])(r,"id"),avatarHash:Object(_["get"])(r,"profile.avatar_hash")});return{imageUrl:s.imageUrl,imageUrl2x:s.imageUrl2x,isExternal:r.is_external,isRestricted:r.is_restricted,isUltraRestricted:r.is_ultra_restricted,size:a,className:n,onClick:i}}},{key:"mapRawWorkspaceOrOrgDataToProps",value:function e(t){var r=t.rawWorkspaceOrOrgData,a=t.iconDimension,n=t.customClasses;return{size:a,icon:r.icon,showToolTip:false,teamName:r.name,className:n}}},{key:"render",value:function e(){var t=this.props,r=t.entityType,a=t.entityData,i=t.customClasses,s=t.dimension,o=t.onClick,c=t.featureReactMessages,l=t.featureReactMemberProfileCard;var u=g()(i,"p-ent_entity_icon");switch(r){case"member":var d={rawMemberData:a,iconDimension:s,customClasses:u,clickHandler:o};var v=this.mapRawMemberDataToProps(d);return h.a.createElement(k["a"],n()({},v,{featureReactMessages:c,featureReactMemberProfileCard:l}));case"org":case"workspace":var p={rawWorkspaceOrOrgData:a,iconDimension:s,customClasses:u};var f=this.mapRawWorkspaceOrOrgDataToProps(p);return h.a.createElement(j["a"],f);default:var m="?";return h.a.createElement(j["a"],{teamName:m,size:s})}}}]);return t}(p["PureComponent"]);N.displayName="EntityIcon";N.defaultProps=T;t["a"]=Object(O["a"])("feature_react_messages","feature_react_member_profile_card")(N)},21768:function(e,t,r){"use strict";var a=r(21696);var n=r(91);var i=r(268);var s=Object(a["e"])("Clog a query session event using data from redux",function(e,t){var r=t();var a=Object(i["getSearchSessionId"])(r);var s=Object(i["getQuerySessionId"])(r);Object(n["b"])("SEARCH_QUERY_SESSION",{search_session_id:a,client_request_id:s})});s.propTypes=null;t["a"]=s},2177:function(e,t,r){"use strict";var a=r(2178);t["a"]=a["a"]},21770:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(3182);var _=r(21705);var y={elements:m.a.arrayOf(m.a.element),logError:m.a.func};var O={elements:null,logError:d["noop"]};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidCatch",value:function e(t){var r=t?t.message:"";this.props.logError("MODAL-CONTAINER","componentDidCatch: "+r)}},{key:"render",value:function e(){var t=this.props.elements;return h.a.createElement(p["Fragment"],null,t)}}]);return t}(p["Component"]);k.displayName="BaseModalContainer";k.defaultProps=O;var j=function e(t){var r=Object(_["getCurrentModals"])(t);return{elements:r.map(function(e){return e.element})}};var C={logError:g["error"]};t["a"]=Object(b["connect"])(j,C)(k)},21771:function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});r.d(t,"p",function(){return u});r.d(t,"o",function(){return d});r.d(t,"j",function(){return v});r.d(t,"l",function(){return p});r.d(t,"n",function(){return h});r.d(t,"C",function(){return f});r.d(t,"k",function(){return m});r.d(t,"m",function(){return b});r.d(t,"i",function(){return g});r.d(t,"d",function(){return _});r.d(t,"s",function(){return y});r.d(t,"r",function(){return O});r.d(t,"x",function(){return k});r.d(t,"q",function(){return C});r.d(t,"B",function(){return E});r.d(t,"h",function(){return S});r.d(t,"v",function(){return w});r.d(t,"I",function(){return I});r.d(t,"D",function(){return T});r.d(t,"E",function(){return N});r.d(t,"t",function(){return R});r.d(t,"u",function(){return A});r.d(t,"F",function(){return M});r.d(t,"H",function(){return P});r.d(t,"G",function(){return x});r.d(t,"c",function(){return D});r.d(t,"w",function(){return L});r.d(t,"y",function(){return B});r.d(t,"A",function(){return U});r.d(t,"z",function(){return q});r.d(t,"e",function(){return H});r.d(t,"f",function(){return W});r.d(t,"g",function(){return G});var a=r(21696);var n=r(1);var i=r.n(n);var s=r(21753);var o=function e(t){if(!t||!t.availablePlans)return null;var r=t.availablePlans;var a=t.activeCurrency;var n=t.activeTerm;var i=t.activePlanLevel;var s=t.activePaymentMethod;if(!r[a]||!r[a][i]||!r[a][i][s]||!r[a][i][s][n])return null;return r[a][i][s][n]};var c=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;return o(e.pricingPlans)});var l=function e(t){if(!t||!t.availablePlans)return[];return Object.keys(t.availablePlans)};var u=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return[];return l(e.pricingPlans)});var d=Object(a["d"])(function(e){var t=c(e);if(!t||!t.id)return"";return t.id});var v=Object(a["d"])(function(e){var t=c(e);if(!t||!t.pricePerMonth)return null;return t.pricePerMonth});var p=Object(a["d"])(function(e){var t=c(e);if(!t||!t.level)return"";return t.level});var h=Object(a["d"])(function(e){var t=c(e);if(!t||!t.term)return"";return t.term});var f=Object(a["d"])(function(e){var t=c(e);if(!t)return null;return t.isInvoice?s["a"].INVOICE:s["a"].CREDIT_CARD});var m=Object(a["d"])(function(e){var t=c(e);if(!t||!t.term)return null;return t.term===s["c"].yearly});var b=Object(a["d"])(function(e){var t=c(e);if(!t||!t.lengthOfTermInMonths)return null;return t.lengthOfTermInMonths});var g=Object(a["d"])(function(e){var t=c(e);if(!t||!t.currency)return"";return t.currency});var _=function e(t,r){if(!t||!t.availablePlans)return null;var a=t.availablePlans;var n=t.activeCurrency;var i=t.activePlanLevel;var s=t.activePaymentMethod;if(!a[n]||!a[n][i]||!a[n][i][s])return null;return a[n][i][s][r]};var y=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,s["c"].yearly);if(!t)return null;return t.pricePerMonth});var O=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return null;var t=_(e.pricingPlans,s["c"].monthly);if(!t)return null;return t.pricePerMonth});var k=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansAndCostDataLoaded};var j=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.activePlanCost)return null;return t.pricingPlans.activePlanCost};var C=Object(a["d"])(function(e){var t=j(e);if(!t||!t.billableUsers)return null;return t.billableUsers.billableActiveUsers});var E=Object(a["d"])(function(e){var t=j(e);if(!t||!t.paidSeats)return null;return t.paidSeats});var S=Object(a["d"])(function(e){var t=j(e);if(!t||!t.billableUsers)return null;return t.billableUsers.zeroActiveUsers});var w=Object(a["d"])(function(e){var t=j(e);if(!t||!t.billableUsers)return null;return t.billableUsers.inactiveUsers});var I=Object(a["d"])(function(e){var t=j(e);if(!t||!t.billableUsers)return null;var r=S(e)?0:C(e);return r+w(e)});var T=Object(a["d"])(function(e){var t=j(e);if(!t)return null;return t.subtotal});var N=Object(a["d"])(function(e){var t=j(e);if(!t||Object(n["isEmpty"])(t.tax))return null;return t.tax});var R=Object(a["d"])(function(e){var t=j(e);if(!t||!t.credits)return null;return t.credits.creditsApplied});var A=Object(a["d"])(function(e){var t=j(e);if(!t||!t.credits)return null;return t.credits.currentCredits});var M=Object(a["d"])(function(e){var t=j(e);if(!t||!t.credits)return null;return t.credits.creditsRemaining});var P=Object(a["d"])(function(e){var t=j(e);if(!t)return null;return t.totalRecurring});var x=Object(a["d"])(function(e){var t=j(e);if(!t)return null;return t.totalDueToday});var D=Object(a["d"])(function(e){var t=j(e);if(!t)return null;return t.quotedTermEnd});var F=function e(t){if(!t||!t.cachedCost)return null;return t.cachedCost};var L=Object(a["d"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=F(e.pricingPlans);var o=Object(s["d"])(t,r,a,n);if(!i||!i[o])return false;return true});var B=Object(a["d"])(function(e,t,r,a,n){if(!e||!e.pricingPlans)return null;var i=F(e.pricingPlans);var o=Object(s["d"])(t,r,a,n);if(!i||!i[o])return null;return i[o]});var U=Object(a["d"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;var r=C(e);if(r>t.minInvoiceSeats)return r;return t.minInvoiceSeats});var q=Object(a["d"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;return t.maxInvoiceSeats});var H=Object(a["d"])(function(e){return e&&e.pricingPlans&&e.pricingPlans.apiError});var W=Object(a["d"])(function(e){if(!e||!e.pricingPlans)return false;if(H(e))return false;var t=d(e);var r=j(e);return t===r});var G=Object(a["d"])(function(e){var t=c(e);if(!t)return false;return t.isInvoice||false})},21772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21955);var n=r(21812);r.d(t,"getCompanyAddress",function(){return n["b"]});r.d(t,"getCompanyAddressCountry",function(){return n["c"]});r.d(t,"getCompanyAddressPostalCode",function(){return n["d"]});r.d(t,"getConfig",function(){return n["e"]});r.d(t,"isCheckoutAddressFormDataLoaded",function(){return n["m"]});r.d(t,"getCreditCardData",function(){return n["g"]});r.d(t,"getCreditCardToken",function(){return n["i"]});r.d(t,"getCreditCardTokenId",function(){return n["k"]});r.d(t,"getCreditCardBrandForReview",function(){return n["f"]});r.d(t,"getCreditCardLastFourForReview",function(){return n["h"]});r.d(t,"getCreditCardTokenError",function(){return n["j"]});r.d(t,"isCreatingCreditCardToken",function(){return n["n"]});r.d(t,"didPaymentSucceed",function(){return n["a"]});r.d(t,"selectStripeApiKey",function(){return n["o"]});r.d(t,"getInvoiceData",function(){return n["l"]});var i=r(21811);r.d(t,"checkoutAddressFormDataLoaded",function(){return i["a"]});r.d(t,"updateCompanyAddressField",function(){return i["n"]});r.d(t,"companyAddressValidated",function(){return i["d"]});r.d(t,"companyAddressFormFieldValidated",function(){return i["c"]});r.d(t,"clearCompanyAddressFormFieldValidationErrors",function(){return i["b"]});r.d(t,"handleCreditCardFormChange",function(){return i["e"]});r.d(t,"updateCreditCardTokenData",function(){return i["o"]});r.d(t,"updateIsCreatingCreditCardToken",function(){return i["q"]});r.d(t,"onPaymentResponseReceived",function(){return i["j"]});r.d(t,"stripeApiKeyLoaded",function(){return i["k"]});r.d(t,"updateInvoiceDataField",function(){return i["p"]});r.d(t,"invoiceDataValidated",function(){return i["g"]});r.d(t,"invoiceDataFieldValidated",function(){return i["f"]});r.d(t,"loadCheckoutAddressFormData",function(){return i["h"]});r.d(t,"validateCheckoutForm",function(){return i["r"]});r.d(t,"validateCompanyAddressFormField",function(){return i["s"]});r.d(t,"updateCompanyAddress",function(){return i["m"]});r.d(t,"submitPaymentForUpgrade",function(){return i["l"]});r.d(t,"loadStripeApiKey",function(){return i["i"]});r.d(t,"validateInvoiceFormField",function(){return i["u"]});r.d(t,"validateInvoiceForm",function(){return i["t"]});t["default"]=a["a"]},2178:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(49);var O=r(12);var k=r(21705);var j=r(3270);var C=r(3278);var E=r(54);var S=r(3182);var w=r(21697);var I=r(21698);var T=r(3271);var N=r(1487);var R=r(907);var A=r(1036);var M=r(1037);var P=r(21703);var x=r(5);var D=r(3049);var F=r(91);var L=r(710);var B=r(1087);var U=r(708);var q=r(3242);var H=r(1026);var W=r(1078);var G=r(195);var V=r(21802);var z=r(2179);var K=r(2180);var Q=r(2186);var Y=r(2187);var J=r(2188);var Z=r(2190);var X=r(2191);var $=r(2192);var ee=r(2200);var te=r(2201);var re=r(2203);var ae=r(2208);var ne=r(2209);var ie=r(2210);var se=r(2211);var oe=r(2212);var ce=r(3054);var le=r(196);var ue=r(22261);var de=r(20150);var ve=r.n(de);var pe=new x["b"]("channel_options");var he=new x["b"]("client");var fe=new x["b"]("ui_validation");var me={0:"all_options",1:"archive",2:"share_external",3:"stop_sharing_external",4:"convert_private",5:"rename",6:"export",7:"delete",8:"purpose",9:"retention",10:"posting_privilege",11:"posting_privilege_review",12:"manage_org_access",13:"manage_org_access_name_conflict",14:"manage_org_access_review"};var be={additionalParams:h.a.object,archiveChannelApi:h.a.func.isRequired,cancelExternalSharedChannelInviteApi:h.a.func.isRequired,channel:h.a.object,submitChannelPurpose:h.a.func.isRequired,channelRetentionDuration:h.a.number,channelRetentionType:h.a.number,convertChannelToOrgSharedApi:h.a.func.isRequired,convertChannelToPrivateApi:h.a.func.isRequired,currentMember:h.a.object,currentTeam:h.a.object,disableConvertToPrivate:h.a.bool,disableRename:h.a.bool,disconnectChannel:h.a.func.isRequired,dmRetentionDuration:h.a.number,dmRetentionType:h.a.number,externalSharedTeams:h.a.array,getExternalTeamIdsConnectedOnlyByChannel:h.a.func.isRequired,groupRetentionDuration:h.a.number,groupRetentionType:h.a.number,onCancel:h.a.func.isRequired,orgName:h.a.string,pendingSharedExternalSharedTeamNames:h.a.array,preselectedSection:h.a.string,renameChannelApi:h.a.func.isRequired,showArchive:h.a.bool.isRequired,showConvertToPrivate:h.a.bool.isRequired,showDataRetention:h.a.bool.isRequired,showDelete:h.a.bool.isRequired,showExport:h.a.bool.isRequired,showManageOrgAccess:h.a.bool.isRequired,showPostingPermissions:h.a.bool.isRequired,showPurpose:h.a.bool.isRequired,showRename:h.a.bool.isRequired,showShareExternal:h.a.bool.isRequired,showStopShareExternal:h.a.bool.isRequired,teamId:h.a.string,featureDefaultSharedChannels:h.a.bool.isRequired,featurePubToPrvEscClient:h.a.bool.isRequired,updateOrgAccessForChannel:h.a.func.isRequired,exportChannelHistory:h.a.func.isRequired,setChannelDeleted:h.a.func.isRequired,getChannelPref:h.a.func.isRequired,openModal:h.a.func,getDataRetention:h.a.func,setDataRetention:h.a.func,getExternalSharedChannelInviteDetails:h.a.func};var ge={additionalParams:{},channel:{},channelRetentionDuration:0,channelRetentionType:0,currentMember:{},currentTeam:{},disableConvertToPrivate:false,disableRename:false,dmRetentionDuration:0,dmRetentionType:0,externalSharedTeams:[],groupRetentionDuration:0,groupRetentionType:0,orgName:"",pendingSharedExternalSharedTeamNames:[],preselectedSection:"",teamId:"",openModal:g["noop"],getDataRetention:g["noop"],setDataRetention:g["noop"],getExternalSharedChannelInviteDetails:g["noop"]};var _e={children:m.a.createElement("div",null),title:"",qa:"filler"};var ye=0;var Oe=1;var ke=1;var je=0;var Ce=2;var Ee=0;var Se=function e(t){var r=Object(g["invert"])(me);return+r[t]};var we=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.channelNameOnInvalidName=r.channelNameOnInvalidName.bind(r);r.channelNameOnValidName=r.channelNameOnValidName.bind(r);r.channelNameOrgValidation=r.channelNameOrgValidation.bind(r);r.closeAlertDialog=r.closeAlertDialog.bind(r);r.closeModal=r.closeModal.bind(r);r.getChannelRetentionPrefs=r.getChannelRetentionPrefs.bind(r);r.getPostingPermissionPrefs=r.getPostingPermissionPrefs.bind(r);r.goBackToAllOptions=r.goBackToAllOptions.bind(r);r.goBackToManageAccessPrevStep=r.goBackToManageAccessPrevStep.bind(r);r.goToStep=r.goToStep.bind(r);r.manageOrgAccessSave=r.manageOrgAccessSave.bind(r);r.onChangeCheckboxCanThread=r.onChangeCheckboxCanThread.bind(r);r.onChangeCheckboxDelete=r.onChangeCheckboxDelete.bind(r);r.onChangeManageOrgAccessShareWith=r.onChangeManageOrgAccessShareWith.bind(r);r.onChangeManageOrgAccessTeamPicker=r.onChangeManageOrgAccessTeamPicker.bind(r);r.onChangeRadioWhoCanPost=r.onChangeRadioWhoCanPost.bind(r);r.onChangeValueSelectedMembers=r.onChangeValueSelectedMembers.bind(r);r.onChannelPurposeTextareaChange=r.onChannelPurposeTextareaChange.bind(r);r.onChannelPurposeValidationChange=r.onChannelPurposeValidationChange.bind(r);r.onClickArchiveInsteadDelete=r.onClickArchiveInsteadDelete.bind(r);r.onClickArchiveOption=r.onClickArchiveOption.bind(r);r.onClickConvertToPrivateOption=r.onClickConvertToPrivateOption.bind(r);r.onClickDataRetentionOption=r.onClickDataRetentionOption.bind(r);r.onClickDeleteOption=r.onClickDeleteOption.bind(r);r.onClickExportOption=r.onClickExportOption.bind(r);r.onClickManageOrgAccessOption=r.onClickManageOrgAccessOption.bind(r);r.onClickPostingPermissionsOption=r.onClickPostingPermissionsOption.bind(r);r.onClickPurposeOption=r.onClickPurposeOption.bind(r);r.onClickRenameOption=r.onClickRenameOption.bind(r);r.onClickShareExternalOption=r.onClickShareExternalOption.bind(r);r.onClickCancelExternalSharedChannelInvite=r.onClickCancelExternalSharedChannelInvite.bind(r);r.onClickStopShareExternalOption=r.onClickStopShareExternalOption.bind(r);r.onErrorDialogButtonClick=r.onErrorDialogButtonClick.bind(r);r.onRetentionDurationChange=r.onRetentionDurationChange.bind(r);r.onRetentionDurationUnitChange=r.onRetentionDurationUnitChange.bind(r);r.onRetentionTypeChange=r.onRetentionTypeChange.bind(r);r.setManageOrgAccessLoaded=r.setManageOrgAccessLoaded.bind(r);r.setPostingPermissionsLoaded=r.setPostingPermissionsLoaded.bind(r);r.setPostingPermissionsSelectedMembers=r.setPostingPermissionsSelectedMembers.bind(r);r.setRetentionLoaded=r.setRetentionLoaded.bind(r);r.showAlertDialog=r.showAlertDialog.bind(r);r.showSuccessAlert=r.showSuccessAlert.bind(r);r.maybeDisableRetentionGoButton=r.maybeDisableRetentionGoButton.bind(r);r.saveRetention=r.saveRetention.bind(r);r.showRetentionDialog=r.showRetentionDialog.bind(r);r.hideRetentionDialog=r.hideRetentionDialog.bind(r);r.handleRetentionCheckboxChange=r.handleRetentionCheckboxChange.bind(r);r.durationInputRef=r.durationInputRef.bind(r);var a=r.props,n=a.channel,i=a.currentTeam;var o=[];var c=[];var l="";if(Object(R["isOrgSharedPublicOrPrivateChannel"])(n))Object(R["isOrgGlobalSharedPublicOrPrivateChannel"])(n)||(o=Object(R["getSharedTeamIds"])(n));else{c=[i.id];l=i.id}r.state={canThread:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false,channelNameOrgIsCheckingVerification:false,channelNameValid:false,channelPrefError:false,channelToBeShared:false,goButtonIsDisabled:false,goButtonIsPending:false,isOnlyChannelWithExternalTeam:false,manageOrgAccessDisabledTeamIds:c,manageOrgAccessLoaded:false,manageOrgAccessOriginatingTeamId:l,manageOrgAccessPreviousStep:"manage_org_access",manageOrgAccessShareWith:Object(R["isOrgGlobalSharedPublicOrPrivateChannel"])(r.props.channel)?"all":"specific",manageOrgAccessTeamIds:o,newChannelName:null,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,retentionDuration:0,retentionDurationUnit:0,retentionLoaded:false,retentionType:0,isRetentionCheckboxChecked:false,showBackButton:false,showCancelButton:false,showGoButton:false,showSuccessAlert:false,successAlertHeading:"",successAlertText:"",teamRetentionDuration:0,teamRetentionType:0,whoCanPost:null};r.debouncedChannelNameOrgValidation=Object(g["debounce"])(r.actuallyCallChannelNameOrgValidation,325,{trailing:true});r.modalRef=null;r.steps=[];r.pendingChannelNameOrgValidation=null;return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.preselectedSection,a=t.showArchive,n=t.showConvertToPrivate,i=t.showDataRetention,s=t.showDelete,o=t.showExport,c=t.showManageOrgAccess,l=t.showPostingPermissions,u=t.showPurpose,d=t.showRename;this.maybeCheckIfLastChannelWithExternalTeam();if(r.length)switch(r){case"archive":a&&this.onClickArchiveOption();break;case"convert_private":n&&this.onClickConvertToPrivateOption();break;case"convert_shared":case"manage_teams":c&&this.onClickManageOrgAccessOption();break;case"delete":s&&this.onClickDeleteOption();break;case"export":o&&this.onClickExportOption();break;case"posting_privilege":l&&this.onClickPostingPermissionsOption();break;case"purpose":u&&this.onClickPurposeOption();break;case"rename":d&&this.onClickRenameOption();break;case"retention":i&&this.onClickDataRetentionOption();break;default:break}}},{key:"componentDidUpdate",value:function e(t,r){var a=this.state.isRetentionCheckboxChecked;this.retentionDialog&&a!==r.isRetentionCheckboxChecked&&this.retentionDialog.render({goButtonIsDisabled:!a,goOnEnterPressed:a})}},{key:"onClickArchiveOption",value:function e(){this.goButtonIsDisabled(false);this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("archive")}},{key:"onClickShareExternalOption",value:function e(){Object(N["c"])({model_ob:this.props.channel,element:"shared_channels_channel_options_share_option"});this.closeModal()}},{key:"onClickCancelExternalSharedChannelInvite",value:function e(t){var r=this;var a=this.props,n=a.channel,i=a.currentMember,s=a.pendingSharedExternalSharedTeamNames;this.props.getExternalSharedChannelInviteDetails({channelId:n.id,targetTeamId:t}).then(function(e){var a=s[0];var o=e.invite.inviting_user;var c=he.t("Oops, something went wrong.");var l=pe.t("For some weird reason, that didn\u2019t work. Please try again.");if(o.id===i.id)r.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){r.showSuccessAlert({heading:pe.t("Canceled invitation"),text:pe.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:a})})}).catch(function(e){r.showAlertDialog({message:l,title:c});throw e});else{var u=pe.t("Cancel invitation?");var d=pe.rt("This invitation was originally sent by <strong>{inviterName}</strong> to <strong>{targetTeamName}</strong>. Are you sure you want to cancel?",{inviterName:o.profile.real_name,targetTeamName:a});var v=function e(){return r.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){r.closeAlertDialog();r.showSuccessAlert({heading:pe.t("Canceled invitation"),text:pe.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:a})})}).catch(function(e){r.showAlertDialog({message:l,title:c});throw e})};r.showAlertDialog({cancelButtonText:pe.t("Never Mind"),goButtonText:pe.t("Cancel Invitation"),goButtonType:"danger",message:d,onGo:v,onCancel:r.closeAlertDialog,showCancelButton:true,title:u})}})}},{key:"onClickStopShareExternalOption",value:function e(){if(Object(L["a"])()){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("stop_sharing_external")}else{Object(L["c"])(this.props.channel);this.closeModal()}}},{key:"onClickConvertToPrivateOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("convert_private")}},{key:"onClickRenameOption",value:function e(){var t=this;this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.hideSuccessAlert();var r=true;if(this.props.additionalParams.name&&this.props.additionalParams.name.length){r=false;this.setState(function(){return{newChannelName:t.props.additionalParams.name,channelNameNeedsChecking:true}})}this.goButtonIsDisabled(r);this.showGoButton(true);this.goToStep("rename")}},{key:"onClickExportOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("export")}},{key:"onClickDeleteOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.goButtonIsDisabled(true);this.hideSuccessAlert();this.goToStep("delete")}},{key:"onClickPurposeOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("purpose")}},{key:"onClickDataRetentionOption",value:function e(){this.goButtonIsPending(false);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("retention");this.getChannelRetentionPrefs()}},{key:"onClickPostingPermissionsOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("posting_privilege");this.getPostingPermissionPrefs()}},{key:"onClickManageOrgAccessOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("manage_org_access");this.maybeGetOriginatingTeamAndCurrentAccess();this.setState(function(){return{channelToBeShared:true}})}},{key:"onRetentionTypeChange",value:function e(t){var r=this;var a=parseInt(t.target.value,10);this.setState(function(){return{retentionType:a}},function(){r.maybeDisableRetentionGoButton();a===Oe&&r.retentionDurationInput.focus()})}},{key:"onRetentionDurationChange",value:function e(t){this.setState(function(){return{retentionDuration:parseInt(t,10)}},this.maybeDisableRetentionGoButton)}},{key:"onRetentionDurationUnitChange",value:function e(t){this.setState(function(){return{retentionDurationUnit:t}},this.maybeDisableRetentionGoButton)}},{key:"onChangeManageOrgAccessShareWith",value:function e(t){var r=t.target.value;this.setState(function(){return{manageOrgAccessShareWith:r}})}},{key:"onChangeManageOrgAccessTeamPicker",value:function e(t){var r=[];this.goButtonIsDisabled(!t.length);if(t.length){t.forEach(function(e){r.push(e.team.id)});this.setState(function(){return{manageOrgAccessTeamIds:r}})}}},{key:"onChangeCheckboxDelete",value:function e(t){var r=t.target.checked;this.goButtonIsDisabled(!r)}},{key:"onClickArchiveInsteadDelete",value:function e(t){t.preventDefault();this.onClickArchiveOption()}},{key:"onChannelPurposeTextareaChange",value:function e(t){this.newChannelPurpose(t.target.value)}},{key:"onChannelPurposeValidationChange",value:function e(t){this.goButtonIsDisabled(t)}},{key:"onChangeCheckboxCanThread",value:function e(t){var r=t.target.checked;this.setCanThreadPermission(r)}},{key:"onChangeRadioWhoCanPost",value:function e(t){var r=t.target.value;this.setWhoCanPostPermission(r)}},{key:"onChangeValueSelectedMembers",value:function e(t){var r=[];t.forEach(function(e){e.member&&r.push(e.member.id)});this.setPostingPermissionsSelectedMembers(r)}},{key:"onErrorDialogButtonClick",value:function e(){this.setChannelPrefError(false)}},{key:"getChannelRetentionPrefs",value:function e(){var t=this;var r=this.props,a=r.channel,n=r.groupRetentionType,i=r.groupRetentionDuration,s=r.dmRetentionType,o=r.dmRetentionDuration,c=r.channelRetentionType,l=r.channelRetentionDuration;this.props.getDataRetention(a).then(function(e){var r=void 0;var u=void 0;if(Object(R["isPrivateChannel"])(a)){r=parseInt(n,10);u=parseInt(i,10)}else if(Object(R["isIm"])(a)||Object(R["isMpim"])(a)){r=parseInt(s,10);u=parseInt(o,10)}else{r=parseInt(c,10);u=parseInt(l,10)}var d=parseInt(e.retentionType,10);var v=parseInt(e.retentionDuration,10);t.setState(function(){return{retentionDuration:v,retentionType:d,teamRetentionDuration:u,teamRetentionType:r}});t.setRetentionLoaded(true)})}},{key:"setRetentionLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{retentionLoaded:t}})}},{key:"getPostingPermissionPrefs",value:function e(){var t=this;var r=this.props,a=r.channel,n=r.featureDefaultSharedChannels;var i=[this.props.getChannelPref({channelId:a.id,prefName:"who_can_post"})];n&&i.push(this.props.getChannelPref({channelId:a.id,prefName:"can_thread"}));Promise.all(i).then(function(e){var r=e[0];if(!r.ok||!r.pref_value)return;var a=r.pref_value;if(a.type)if(a.user&&a.user.length&&("admin"===a.type[0]||"owner"===a.type[0]||"org_admin"===a.type[0])){t.setWhoCanPostPermission("multi");t.setPostingPermissionsSelectedMembers(a.user)}else t.setWhoCanPostPermission(a.type[0]);else t.setWhoCanPostPermission("ra");if(n){var i=e[1];if(!i.ok||!i.pref_value)return;var s=i.pref_value;s.type?t.setCanThreadPermission("all"===s.type[0]):t.setCanThreadPermission(false)}t.setPostingPermissionsLoaded(true);t.showCancelButton(true);t.showGoButton(true)})}},{key:"setCanThreadPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{canThread:t}})}},{key:"setPostingPermissionsLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{postingPermissionsLoaded:t}})}},{key:"setWhoCanPostPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{whoCanPost:t}})}},{key:"setChannelPrefError",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{channelPrefError:t}})}},{key:"setPostingPermissionsSelectedMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{postingPermissionsSelectedMembers:t}})}},{key:"setManageOrgAccessLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{manageOrgAccessLoaded:t}})}},{key:"maybeDisableRetentionGoButton",value:function e(){var t=this.state,r=t.retentionType,a=t.retentionDuration,n=t.retentionDurationUnit;var i=n===Ee?a:365*a;this.goButtonIsDisabled(!Object(ce["b"])({retentionType:r,retentionDuration:i}))}},{key:"goToStep",value:function e(t){var r=Se(t);if(r){this.modalRef.setStepNumber(r+1);return}this.modalRef.setStepNumber(1)}},{key:"maybeGetOriginatingTeamAndCurrentAccess",value:function e(){var t=this;var r=this.props.channel;var a=this.state,n=a.manageOrgAccessDisabledTeamIds,i=a.manageOrgAccessLoaded,s=a.manageOrgAccessTeamIds;if(i){this.showCancelButton(true);this.showGoButton(true);return}var o=[];Object(R["isOrgSharedPublicOrPrivateChannel"])(r)&&o.push(Object(M["i"])(r.id));Promise.all(o).then(function(e){var a=s;var i=n;var o=t.state.manageOrgAccessOriginatingTeamId;if(Object(R["isOrgSharedPublicOrPrivateChannel"])(r)){o=e[0].data.team.id;i=[o]}a=Object(g["uniq"])(t.state.manageOrgAccessTeamIds.concat(o));t.setState(function(){return{manageOrgAccessDisabledTeamIds:i,manageOrgAccessOriginatingTeamId:o,manageOrgAccessTeamIds:a}});t.manageOrgAccessFilterFunction=Object(L["d"])({preselected_ids:a,disabled_ids:i,sort_items_function:function e(t,r){var a=t.name.toLowerCase();var n=r.name.toLowerCase();if(a<n)return-1;if(n<a)return 1;return 0},secondary_sort_items_function:function e(t,r){if(t.id===o)return-1;if(r.id===o)return 1;return 0}});t.manageOrgAccessFilterFunction("").then(function(){t.showCancelButton(true);t.showGoButton(true);t.setManageOrgAccessLoaded(true)})}).catch(function(e){var r=he.t("Oops, something went wrong.");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}},{key:"maybeCheckIfLastChannelWithExternalTeam",value:function e(){var t=this;var r=this.props.channel;var a="channel-options/maybeCheckIfLastChannelWithExternalTeam";Object(R["isSharedPublicOrPrivateChannel"])(r)&&Object(L["a"])()&&this.props.getExternalTeamIdsConnectedOnlyByChannel({channelId:r.id,reason:a}).then(function(e){t.setState(function(){return{isOnlyChannelWithExternalTeam:!!e.length}})})}},{key:"closeModal",value:function e(){this.alertDialog&&this.alertDialog.close();this.retentionDialog&&this.retentionDialog.close();this.props.onCancel()}},{key:"goBackToAllOptions",value:function e(){this.goButtonIsPending(false);this.showBackButton(false);this.showCancelButton(false);this.showGoButton(false);this.goButtonIsDisabled(false);this.goToStep("all_options")}},{key:"goButtonIsDisabled",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsDisabled:t}})}},{key:"goButtonIsPending",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsPending:t}})}},{key:"showBackButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showBackButton:t}})}},{key:"showCancelButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showCancelButton:t}})}},{key:"showGoButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showGoButton:t}})}},{key:"newChannelPurpose",value:function e(t){this.setState(function(){return{newChannelPurpose:t}})}},{key:"actuallyCallChannelNameOrgValidation",value:function e(t){var r=this;var a=this.props.channel;if(Object(R["getDisplayName"])(a)===t){this.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});this.goButtonIsDisabled(true);return}this.pendingChannelNameOrgValidation=Object(M["a"])(a,t);this.pendingChannelNameOrgValidation.then(function(e){var n=r.props,i=n.currentTeam,s=n.orgName;var o=void 0;var c="";if(!e.data.ok||e.data.name_taken){o=false;c=r.state.channelToBeShared?pe.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:t,orgName:s,teamName:Object(P["getTeamDisplayName"])(i)},function(e){var r=e.key,n=e.tag,i=e.text;if("strong"===n)return m.a.createElement("strong",{key:r+"-1"},Object(le["a"])(r,a,t));return m.a.createElement("strong",{key:r},i)}):pe.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name.",{name:t,orgName:s,teamName:Object(P["getTeamDisplayName"])(i)},function(e){var r=e.key,n=e.tag,i=e.text;if("strong"===n)return m.a.createElement("strong",{key:r+"-1"},Object(le["a"])(r,a,t));return m.a.createElement("strong",{key:r},i)})}else o=true;r.goButtonIsDisabled(!o);r.setState(function(){return{channelNameAdditionalVerificationError:c,channelNameOrgIsCheckingVerification:false,channelNameValid:o}})}).catch(function(e){r.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});r.goButtonIsDisabled(true);var t=he.t("Oops, something went wrong.");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");r.showAlertDialog({message:a,title:t});throw e})}},{key:"channelNameOrgValidation",value:function e(t){this.setState(function(){return{channelNameOrgIsCheckingVerification:true}});this.pendingChannelNameOrgValidation&&this.pendingChannelNameOrgValidation.cancel();this.debouncedChannelNameOrgValidation(t)}},{key:"channelNameOnInvalidName",value:function e(){this.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false}});this.goButtonIsDisabled(true)}},{key:"channelNameOnValidName",value:function e(t){var r=t.value;var a=this.props.channel;var n=this.state.channelToBeShared;this.setState(function(){return{channelNameAdditionalVerificationError:"",newChannelName:r,channelNameNeedsChecking:false}});Object(R["isOrgSharedPublicOrPrivateChannel"])(a)||n?this.channelNameOrgValidation(r):this.goButtonIsDisabled(false)}},{key:"manageOrgAccessSave",value:function e(){var t=this;this.goButtonIsPending(true);var r=this.props,a=r.channel,i=r.teamId;var s=this.state,o=s.manageOrgAccessShareWith,c=s.manageOrgAccessTeamIds;var l="all"===o;var u={orgWide:l};if(Object(R["isOrgSharedPublicOrPrivateChannel"])(a)){l||(u.teamIds=c);this.props.updateOrgAccessForChannel(n()({channelId:a.id},u)).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=pe.t("Could not update settings");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}else{l||(u.targetDomains=c.map(function(e){var t=Object(y["b"])(i);var r=Object(T["getTeamById"])(t,e);return r.domain}));var d=[];this.makeChannelName()!==Object(R["getDisplayName"])(a)&&d.push(this.props.renameChannelApi({channel:a,newName:this.state.newChannelName}));Promise.all(d).then(function(){return t.props.convertChannelToOrgSharedApi(n()({channel:a},u))}).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=pe.t("Could not update settings");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}}},{key:"makeChannelName",value:function e(){var t=this.props.channel;var r=this.state.newChannelName;return r&&r.length?r:Object(R["getDisplayName"])(t)}},{key:"showAlertDialog",value:function e(t){var r=t.title,a=t.message,i=t.cancelButtonText,s=void 0===i?"":i,o=t.goButtonText,c=void 0===o?"":o,l=t.goButtonType,u=void 0===l?"primary":l,d=t.onGo,v=void 0===d?this.closeAlertDialog:d,p=t.onCancel,h=void 0===p?this.closeAlertDialog:p,f=t.showCancelButton,b=void 0!==f&&f;var g={cancelButtonText:s,children:m.a.createElement("p",null,a),goButtonText:c,goButtonType:u,onCancel:h,onGo:v,showCancelButton:b,title:r};this.alertDialog?this.alertDialog.render(n()({},g)):this.alertDialog=this.props.openModal({element:m.a.createElement(B["a"],g),isStackable:true})}},{key:"closeAlertDialog",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"showSuccessAlert",value:function e(t){var r=t.heading,a=t.text;this.setState(function(){return{showSuccessAlert:true,successAlertHeading:r,successAlertText:a}})}},{key:"hideSuccessAlert",value:function e(){this.setState(function(){return{showSuccessAlert:false}})}},{key:"goBackToManageAccessPrevStep",value:function e(){this.goToStep(this.state.manageOrgAccessPreviousStep)}},{key:"saveRetention",value:function e(){var t=this;var r=this.state,a=r.retentionType,n=r.retentionDuration,i=r.retentionDurationUnit;var s=this.props.channel;this.goButtonIsPending(true);this.props.setDataRetention({channel:s,retentionDuration:Object(ce["a"])({retentionDuration:n,retentionDurationUnit:i}),retentionType:a}).then(function(e){t.goButtonIsPending(false);if(!e.data.ok){var r=he.t("Oops, something went wrong.");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});return}t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var r=he.t("Oops, something went wrong.");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})}},{key:"showRetentionDialog",value:function e(){this.retentionDialog=this.props.openModal({element:this.renderRetentionDialog(),isStackable:true})}},{key:"hideRetentionDialog",value:function e(){this.setState(function(){return{isRetentionCheckboxChecked:false}})}},{key:"handleRetentionCheckboxChange",value:function e(){this.setState(function(e){return{isRetentionCheckboxChecked:!e.isRetentionCheckboxChecked}})}},{key:"durationInputRef",value:function e(t){this.retentionDurationInput=t}},{key:"renderRetentionDialog",value:function e(){var t=this.state,r=t.retentionType,a=t.retentionDuration,n=t.retentionDurationUnit,i=t.teamRetentionType,s=t.teamRetentionDuration;var o=this.props.channel;var c=Object(ce["a"])({retentionDuration:a,retentionDurationUnit:n});var l=void 0;switch(r){case ye:switch(i){case ke:l=pe.t("Use the default workspace retention settings \u2014 Keep everything");break;case je:l=pe.t("Use the default workspace retention settings \u2014 Keep messages, but don\u2019t track revisions");break;case Ce:l=pe.t("Use the default workspace retention settings \u2014 Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted.",{duration:s,fallbackHash:"7480a828b3b52106d6407a4e8f29e489ed887722"});break;default:l=pe.t("Use the default workspace retention settings \u2014 Keep everything");break}break;case Oe:if(c>364){var u=Object(g["round"])(c/365,1);l=pe.t("Messages older than {duration, plural, =1 {# day} other {# days}} ({durationInYears, plural, =1 {# year} other {# years}}) will be deleted",{duration:c,durationInYears:u,fallbackHash:"2641d4c8882584eb6bee3cdb1172b02f43b9881f"})}else l=pe.t("Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted",{duration:c,fallbackHash:"1f76675f52cc8078d8373c5e7d241070bba730c3"});break;default:l=pe.t("Use the default workspace retention settings");break}return m.a.createElement(H["a"],{title:pe.t("Apply new retention settings?"),goButtonText:pe.t("Apply Settings"),goButtonType:"danger",onCancel:this.hideRetentionDialog,onGo:this.saveRetention,goButtonIsDisabled:!this.state.isRetentionCheckboxChecked,goOnEnterPressed:this.state.isRetentionCheckboxChecked,shouldCloseOnGo:false},m.a.createElement(V["a"],{level:"error"},pe.rt("<strong>Warning:</strong> Messages deleted by retention settings are truly, permanently deleted. These messages can\u2019t be restored or recovered, even by Slack.")),m.a.createElement("strong",null,pe.t("Here\u2019s what your new settings will be:")),m.a.createElement("ul",{className:"margin_top_100"},m.a.createElement("li",null,Object(R["isIm"])(o)||Object(R["isMpim"])(o)?pe.t("In this conversation: {newSetting}",{newSetting:l}):pe.t("In this channel: {newSetting}",{newSetting:l}))),m.a.createElement(G["a"],{text:pe.rt("<strong>Yes, apply these new settings</strong>"),htmlFor:"dataRetentionOverrideConfirm",type:"inline",cursor:"pointer"},m.a.createElement(W["a"],{id:"dataRetentionOverrideConfirm",isRequired:true,onChange:this.handleRetentionCheckboxChange})))}},{key:"renderOptionsListHeader",value:function e(t,r){var a=void 0;a=r||pe.rt("Additional options for <span>{name}</span>",{name:Object(R["getDisplayName"])(t)},function(e){var r=e.key;return Object(le["a"])(r,t)});return m.a.createElement("span",{className:"channel_options_header"},a)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.additionalParams,i=r.currentMember,s=r.channel,o=r.currentTeam,c=r.disableConvertToPrivate,l=r.disableRename,u=r.externalSharedTeams,d=r.featurePubToPrvEscClient,v=r.onCancel,p=r.pendingSharedExternalSharedTeamNames,h=r.showArchive,f=r.showConvertToPrivate,b=r.showDataRetention,_=r.showDelete,O=r.showExport,k=r.showManageOrgAccess,j=r.showPostingPermissions,C=r.showPurpose,E=r.showRename,w=r.showShareExternal,I=r.showStopShareExternal;var T=this.state,N=T.canThread,P=T.channelNameAdditionalVerificationError,x=T.channelNameNeedsChecking,L=T.channelNameOrgIsCheckingVerification,B=T.channelNameValid,H=T.channelPrefError,W=T.goButtonIsDisabled,G=T.goButtonIsPending,V=T.manageOrgAccessDisabledTeamIds,ce=T.manageOrgAccessLoaded,de=T.manageOrgAccessOriginatingTeamId,ve=T.manageOrgAccessShareWith,be=T.manageOrgAccessTeamIds,ge=T.newChannelName,ye=T.newChannelPurpose,Oe=T.postingPermissionsLoaded,ke=T.postingPermissionsSelectedMembers,je=T.retentionDuration,Ce=T.retentionDurationUnit,Ee=T.retentionLoaded,Se=T.retentionType,we=T.showBackButton,Ie=T.showCancelButton,Te=T.showGoButton,Ne=T.showSuccessAlert,Re=T.successAlertHeading,Ae=T.successAlertText,Me=T.teamRetentionDuration,Pe=T.teamRetentionType,xe=T.whoCanPost;var De={buttonAlignment:"right",goButtonIsDisabled:W,goButtonIsPending:G,showBackButton:we,showCancelButton:Ie,showGoButton:Te,withHeader:true};this.steps=[n()({contentLabel:"Additional Options for "+Object(R["getDisplayName"])(s),title:this.renderOptionsListHeader(s),children:m.a.createElement(te["a"],{channel:s,disableConvertToPrivate:c,disableRename:l,modalClasses:"p-channel_options_section",name:Object(R["getDisplayName"])(s),onClickArchive:this.onClickArchiveOption,onClickConvertToPrivate:this.onClickConvertToPrivateOption,onClickDelete:this.onClickDeleteOption,onClickExport:this.onClickExportOption,onClickManageOrgAccess:this.onClickManageOrgAccessOption,onClickPostingPermissions:this.onClickPostingPermissionsOption,onClickPurpose:this.onClickPurposeOption,onClickRename:this.onClickRenameOption,onClickShareExternal:this.onClickShareExternalOption,onClickCancelExternalSharedChannelInvite:this.onClickCancelExternalSharedChannelInvite,onClickStopShareExternal:this.onClickStopShareExternalOption,pendingSharedExternalSharedTeamNames:p,showArchive:h,showConvertToPrivate:f,showDataRetention:b,showDelete:_,showExport:O,showManageOrgAccess:k,showPostingPermissions:j,showPurpose:C,showRename:E,showShareExternal:w,showStopShareExternal:I,showSuccessAlert:Ne,successAlertHeading:Re,successAlertText:Ae}),qa:"all_options"},De)];h?this.steps.push(n()({children:m.a.createElement(z["a"],{channel:s}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.archiveChannelApi({channel:s});t.closeModal()},goButtonText:pe.t("Yes, archive the channel"),title:this.renderOptionsListHeader(s,pe.rt("Archive <strong>{name}</strong>",{name:Object(R["getDisplayName"])(s),fallbackHash:"0cf2d51d33550e37e96cafe433465fa5e0816923"},function(e){var t=e.key;return Object(le["a"])(t,s)})),contentLabel:"Archive "+Object(R["getDisplayName"])(s),qa:"archive"},De)):this.steps.push(_e);w?this.steps.push(n()({children:m.a.createElement("div",null,"Share external option"),onBack:this.goBackToAllOptions,title:"",qa:me[2]},De)):this.steps.push(_e);if(I){var Fe=pe.rt("Stop sharing {channelName}",{channelName:m.a.createElement(ue["a"],{channel:s})});var Le=pe.t("Stop Sharing");this.steps.push(n()({children:m.a.createElement(ie["a"],{channel:s,showLastChannelWarning:this.state.isOnlyChannelWithExternalTeam}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var r=pe.t("This can\u2019t be undone");var a=pe.rt("You won\u2019t be able to re-share {channelName} with {teamNames} or any other workspace.",{channelName:Object(le["a"])(s.id,s),teamNames:Object(D["a"])(u.map(function(e){var t=e.name;return t}),{react:true,strong:true,conj:"or"})});Object(F["b"])("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_MODAL_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});var n=function e(){Object(F["b"])("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.props.disconnectChannel({channelId:s.id}).then(t.closeModal)};var i=function e(){Object(F["b"])("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_CANCEL_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.closeAlertDialog()};t.showAlertDialog({goButtonText:Le,goButtonType:"danger",message:a,onGo:n,onCancel:i,showCancelButton:true,title:r})},goButtonText:Le,goButtonType:"danger",title:this.renderOptionsListHeader(s,Fe),contentLabel:"Stop sharing "+Object(R["getDisplayName"])(s),qa:"stop_sharing_external"},De))}else this.steps.push(_e);if(f){var Be=void 0;var Ue=void 0;if(Object(R["isPublicChannel"])(s)||Object(R["isPrivateChannel"])(s))if(d){Be=pe.rt("Change <strong>{channelName}</strong> to a private channel",{name:Object(R["getDisplayName"])(s)},function(e){var t=e.key;return Object(le["a"])(t,s)});Ue="Change "+Object(R["getDisplayName"])(s)+" to a private channel"}else{Be=pe.rt("Convert <strong>{name}</strong> to a private channel?",{name:Object(R["getDisplayName"])(s),fallbackHash:"ca2b517d886b996a5636689612f5404d75effd7d"},function(e){var t=e.key;return Object(le["a"])(t,s)});Ue="Convert "+Object(R["getDisplayName"])(s)+" to a private channel?"}else{Be=pe.rt("Convert this conversation to a private channel?",{fallbackHash:"5e50b350a369117078fafe9841785a5576fd4fc5"});Ue="Convert this conversation to a private channel?"}this.steps.push(n()({children:m.a.createElement(Y["a"],{channel:s}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.convertChannelToPrivateApi(s.id);t.closeModal()},goButtonText:d?pe.t("Change to Private"):null,title:this.renderOptionsListHeader(s,Be),contentLabel:Ue,qa:"convert_private"},De))}else this.steps.push(_e);var qe=pe.t("Rename Channel");if(E){var He={additionalVerificationError:P,additionalVerificationGood:B,channelNameNeedsChecking:x};Object(R["isOrgSharedPublicOrPrivateChannel"])(s)&&(He.isCheckingAdditionalVerification=L);var We=Object(R["getDisplayName"])(s);a.name&&(We=a.name);var Ge=void 0;var Ve=void 0;if(d){Ge=pe.rt("Rename <strong>{channelName}</strong>",{channelName:Object(R["getDisplayName"])(s)},function(e){var t=e.key;return Object(le["a"])(t,s)});Ve="Rename "+Object(R["getDisplayName"])(s)}else{Ge=pe.t("Rename this channel");Ve="Rename this channel"}this.steps.push(n()({children:m.a.createElement(ne["a"],n()({},He,{channel:s,name:We,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName})),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,goButtonText:qe,onGo:function e(){t.goButtonIsPending(true);t.props.renameChannelApi({channel:s,newName:ge}).then(function(e){t.goButtonIsPending(false);if(!e.ok){if(e.error&&"name_taken"===e.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:fe.t("{name} is already taken by a channel, username, or user group.",{name:ge})}});return}t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:fe.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}});return}t.setState(function(){return{channelNameValid:true,channelNameAdditionalVerificationError:""}});t.closeModal()}).catch(function(e){if(e.data&&"name_taken"===e.data.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:fe.t("{name} is already taken by a channel, username, or user group.",{name:ge})}});return}t.goButtonIsPending(false);t.setState(function(){return{channelNameAdditionalVerificationError:fe.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}})})},title:this.renderOptionsListHeader(s,Ge),contentLabel:Ve,qa:"rename"},De))}else this.steps.push(_e);if(O){var ze=void 0;var Ke=void 0;if(Object(R["isPublicChannel"])(s)||Object(R["isPrivateChannel"])(s)){ze=pe.rt("Export message history for <strong>{name}</strong>",{name:Object(R["getDisplayName"])(s),fallbackHash:"7e98401bb334b4d48829e4fdbcd144dc8a101003"},function(e){var t=e.key;return Object(le["a"])(t,s)});Ke="Export message history for "+Object(R["getDisplayName"])(s)}else{ze=pe.rt("Export message history for this conversation",{fallbackHash:"c1d139527fa0d1b5faa28809a3b74d183f848622"});Ke="Export message history for this conversation"}this.steps.push(n()({children:m.a.createElement(X["a"],null),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.exportChannelHistory(s);t.closeModal()},goButtonText:pe.t("Export"),title:this.renderOptionsListHeader(s,ze),contentLabel:Ke,qa:"export"},De))}else this.steps.push(_e);_?this.steps.push(n()({children:m.a.createElement(Z["a"],{channel:s,showArchiveInstead:this.props.showArchive,onClickArchiveInstead:this.onClickArchiveInsteadDelete,onChangeCheckbox:this.onChangeCheckboxDelete}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.setChannelDeleted(s.id);t.closeModal()},goButtonText:pe.t("Delete Channel"),goButtonType:"danger",title:this.renderOptionsListHeader(s,pe.rt("Delete <strong>{name}</strong>",{name:Object(R["getDisplayName"])(s),fallbackHash:"73bcca2ef24ed39c3f2a63fea6c8e9e15150d0d7"},function(e){var t=e.key;return Object(le["a"])(t,s)})),contentLabel:"Delete "+Object(R["getDisplayName"])(s),qa:"delete"},De,{buttonAlignment:"float_right"})):this.steps.push(_e);if(C){var Qe=void 0;var Ye=void 0;if(d){Qe=pe.rt("Set channel purpose for <strong>{channelName}</strong>",{channelName:Object(R["getDisplayName"])(s)},function(e){var t=e.key;return Object(le["a"])(t,s)});Ye="Set channel purpose for "+Object(R["getDisplayName"])(s)}else{Qe=pe.t("Set channel purpose");Ye="Set channel purpose"}this.steps.push(n()({children:m.a.createElement(Q["a"],{purpose:s.purpose,onChannelPurposeTextareaChange:this.onChannelPurposeTextareaChange,onChannelPurposeValidationChange:this.onChannelPurposeValidationChange}),goButtonText:pe.t("Update Purpose"),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);s.purpose.value!==ye&&t.props.submitChannelPurpose({channelId:s.id,purpose:ye});t.closeModal()},title:this.renderOptionsListHeader(s,Qe),contentLabel:Ye,qa:"purpose"},De))}else this.steps.push(_e);if(b){var Je=void 0;var Ze=void 0;if(Object(R["isPublicChannel"])(s)||Object(R["isPrivateChannel"])(s)){Je=pe.rt("Edit message retention for {name}",{name:m.a.createElement(q["b"],{channel:s,inline:true})});Ze="Edit message retention for "+Object(R["getDisplayName"])(s)}else{Je=pe.rt("Edit message retention for <strong>this conversation</strong>");Ze="Edit message retention for this conversation"}this.steps.push(n()({children:m.a.createElement(J["a"],{member:i,team:o,onDurationChange:this.onRetentionDurationChange,onDurationUnitChange:this.onRetentionDurationUnitChange,onTypeChange:this.onRetentionTypeChange,prefsLoaded:Ee,retentionDuration:je,retentionDurationUnit:Ce,retentionType:Se,teamRetentionType:Pe,teamRetentionDuration:Me,durationInputRef:this.durationInputRef}),goButtonText:pe.t("Save"),onGo:this.showRetentionDialog,onBack:function e(){t.setRetentionLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,title:this.renderOptionsListHeader(s,Je),contentLabel:Ze,qa:"retention",stepModalClasses:"p-channel-options__retention_modal"},De))}else this.steps.push(_e);j?this.steps.push(n()({children:m.a.createElement(re["a"],{onChangeCheckbox:this.onChangeCheckboxCanThread,onChangeRadio:this.onChangeRadioWhoCanPost,isOrgDefault:Object(R["isOrgDefaultChannel"])(s),canThread:N,whoCanPost:xe,postingPermissionsSelectedMembers:ke,onChangeValueSelectedMembers:this.onChangeValueSelectedMembers,postingPermissionsLoaded:Oe}),onBack:function e(){t.setPostingPermissionsSelectedMembers(null);t.setPostingPermissionsLoaded(false);t.goBackToAllOptions()},goButtonText:pe.t("Review"),contentLabel:"Manage posting permissions for "+Object(R["getDisplayName"])(s),title:this.renderOptionsListHeader(s,pe.rt("Manage posting permissions for <strong>{name}</strong>",{name:Object(R["getDisplayName"])(s),fallbackHash:"6e82adeae0a793fe96592833d990efcaf1cc8ab3"},function(e){var t=e.key;return Object(le["a"])(t,s)})),qa:"posting_privilege"},De),n()({children:m.a.createElement(ae["a"],{whoCanPost:xe,canThread:N,channelPrefError:H,onErrorDialogButtonClick:this.onErrorDialogButtonClick,featureDefaultSharedChannels:this.props.featureDefaultSharedChannels}),onGo:function e(){var r=t.props.featureDefaultSharedChannels;t.goButtonIsPending(true);var a=Object(oe["a"])(xe,ke,r);var n={who_can_post:a};if(Object(R["isOrgDefaultChannel"])(s)){var i=Object(se["a"])(N);n.can_thread=i}Object(A["t"])(s.id,JSON.stringify(n)).then(function(){t.setPostingPermissionsLoaded(false);t.closeModal()}).catch(function(){t.goButtonIsPending(false);t.setChannelPrefError(true)})},goButtonText:pe.t("Set posting permissions"),title:this.renderOptionsListHeader(s,pe.t("Review Changes")),contentLabel:"Review Changes",qa:"posting_privilege_review"},De)):this.steps.push(_e,_e);if(k){var Xe=Object(R["isOrgSharedPublicOrPrivateChannel"])(s);var $e=function e(){if(Xe||"specific"!==ve){if(Object(R["isOrgGlobalSharedPublicOrPrivateChannel"])(s)){if("all"===ve)return false}else if("specific"===ve&&Object(R["getSharedTeamIds"])(s)&&Object(g["isEqual"])(be.sort(),Object(R["getSharedTeamIds"])(s).sort()))return false}else{if(!be.length)return false;if(1===be.length&&be.indexOf(o.id)>-1)return false}return true};var et=pe.t("Done");$e()&&(et=pe.t("Review Changes"));this.steps.push(n()({children:m.a.createElement($["a"],{channel:s,disabledTeamIds:V,originatingTeamId:de,filterFunction:this.manageOrgAccessFilterFunction,isLoaded:ce,onShareWithChange:this.onChangeManageOrgAccessShareWith,onTeamPickerChange:this.onChangeManageOrgAccessTeamPicker,preselectedTeamIds:be,shareWith:ve}),goButtonText:et,onBack:function e(){t.setManageOrgAccessLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);if(!$e()){t.closeModal();return}if(Xe){t.goToStep("manage_org_access_review");t.goButtonIsPending(false);return}Object(M["a"])(s,Object(R["getDisplayName"])(s)).then(function(e){t.goButtonIsPending(false);t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});if(!e.data.ok||e.data.name_taken){t.setState(function(){return{channelNameValid:false}});t.goButtonIsDisabled(true);t.modalRef.goToNextStep();return}t.goToStep("manage_org_access_review")}).catch(function(e){t.goButtonIsPending(false);t.setState(function(){return{channelNameValid:false}});var r=he.t("Oops, something went wrong.");var a=pe.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:a,title:r});throw e})},title:this.renderOptionsListHeader(s,pe.rt("Sharing settings for <strong>{name}</strong>",{name:Object(R["getDisplayName"])(s),fallbackHash:"14c24585b3cd497e35dfec78cc5d5aa63f7d4690"},function(e){var t=e.key;return Object(le["a"])(t,s)})),contentLabel:"Manage access to "+Object(R["getDisplayName"])(s),qa:"manage_org_access"},De),n()({children:m.a.createElement(K["a"],{additionalVerificationError:P,additionalVerificationGood:B,channel:s,isCheckingAdditionalVerification:L,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName}),onBack:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});t.goBackToManageAccessPrevStep()},onCancel:this.goBackToAllOptions,goButtonText:qe,onGo:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access_name_conflict",channelToBeShared:false}});t.modalRef.goToNextStep()},title:this.renderOptionsListHeader(s,pe.t("Rename this channel")),contentLabel:"Rename this channel",qa:"manage_org_access_name_conflict"},De),n()({children:m.a.createElement(ee["a"],{channel:s,currentTeam:o,newChannelName:ge,shareWith:ve,teamIdsSelected:be}),goButtonText:pe.t("Save Changes"),onBack:this.goBackToManageAccessPrevStep,onCancel:this.goBackToAllOptions,onGo:this.manageOrgAccessSave,title:this.renderOptionsListHeader(s,pe.t("Review Changes")),contentLabel:"Review Changes",qa:"manage_org_access_review"},De))}else this.steps.push(_e,_e,_e);this.steps.length!==Object(g["keys"])(me).length&&Object(y["a"])(this.props.teamId,Object(S["error"])("ChannelOptions render error: It looks like the number of modal steps doesn\u2019t match the number of steps defined in the modal mapping. Please check that you have the correct number of filler steps added if your screen is not rendered."));return m.a.createElement("div",null,m.a.createElement(U["a"],{modalClasses:"channel_options_modal",onCancel:v,position:"fixed",ref:function e(r){t.modalRef=r},showCloseTransition:true,showOpenTransition:true,steps:this.steps}))}}]);return t}(f["PureComponent"]);we.displayName="ChannelOptions";we.defaultProps=ge;function Ie(e,t){var r=t.channelId;var a=Object(w["getChannelById"])(e,r);if(!a)return{featureDefaultSharedChannels:Object(O["isFeatureEnabled"])(e,"feature_default_shared_channels"),featurePubToPrvEscClient:Object(O["isFeatureEnabled"])(e,"feature_pub_to_prv_esc_client")};var n=Object(T["getTeamsByIdAndMaybeFetchUnknownTeams"])(e,a.pending_shared).map(P["getTeamDisplayName"]);var i=[];Object(R["getSharedTeamIds"])(a)&&Object(R["getSharedTeamIds"])(a).length&&(i=Object(R["getSharedTeamIds"])(a).map(function(t){return Object(T["getTeamById"])(e,t)}));return{channel:a,currentMember:Object(I["getCurrentMember"])(e),currentTeam:Object(T["getCurrentTeam"])(e),dmRetentionDuration:Object(E["getTeamPref"])(e,"dm_retention_duration"),dmRetentionType:Object(E["getTeamPref"])(e,"dm_retention_type"),externalSharedTeams:i,groupRetentionDuration:Object(E["getTeamPref"])(e,"group_retention_duration"),groupRetentionType:Object(E["getTeamPref"])(e,"group_retention_type"),orgName:Object(C["getEnterpriseOrgName"])(e),pendingSharedExternalSharedTeamNames:n,channelRetentionDuration:Object(E["getTeamPref"])(e,"retention_duration"),channelRetentionType:Object(E["getTeamPref"])(e,"retention_type"),teamId:Object(j["getTeamId"])(e),featureDefaultSharedChannels:Object(O["isFeatureEnabled"])(e,"feature_default_shared_channels"),featurePubToPrvEscClient:Object(O["isFeatureEnabled"])(e,"feature_pub_to_prv_esc_client")}}var Te={archiveChannelApi:w["archiveChannelApi"],cancelExternalSharedChannelInviteApi:A["y"],submitChannelPurpose:A["A"],convertChannelToOrgSharedApi:w["convertChannelToOrgSharedApi"],convertChannelToPrivateApi:w["convertChannelToPrivateApi"],openModal:k["openModal"],renameChannelApi:w["renameChannelApi"],updateOrgAccessForChannel:w["updateOrgAccessForChannel"],exportChannelHistory:w["exportChannelHistory"],setChannelDeleted:A["s"],getChannelPref:A["m"],getExternalTeamIdsConnectedOnlyByChannel:A["p"],disconnectChannel:A["b"],getDataRetention:A["n"],setDataRetention:A["w"],getExternalSharedChannelInviteDetails:A["o"]};t["a"]=Object(b["connect"])(Ie,Te)(we);var Ne=[{stepName:"archive",prop:"showArchive",stepIndex:1},{stepName:"share_external",prop:"showShareExternal",stepIndex:2},{stepName:"stop_sharing_external",prop:"showStopShareExternal",stepIndex:3},{stepName:"convert_private",prop:"showConvertToPrivate",stepIndex:4},{stepName:"rename",prop:"showRename",stepIndex:5},{stepName:"export",prop:"showExport",stepIndex:6},{stepName:"delete",prop:"showDelete",stepIndex:7},{stepName:"purpose",prop:"showPurpose",stepIndex:8},{stepName:"retention",prop:"showDataRetention",stepIndex:9},{stepName:"posting_privilege",prop:"showPostingPermissions",stepIndex:10},{stepName:"manage_org_access",prop:"showManageOrgAccess",stepIndex:12}]},21789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getSlashCommand",function(){return w});r.d(t,"getSlashCommands",function(){return I});r.d(t,"addCommand",function(){return T});r.d(t,"bulkAddLocalCommands",function(){return N});r.d(t,"bulkAddServerCommands",function(){return R});r.d(t,"executeCommand",function(){return A});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v=r(21699);var p=r(21807);var h=r(21990);var f=r(22184);var m=r(211);var b=r(3182);var g;var _=m["SLASH_COMMAND_ERRORS"].INVALID_PARAMS,y=m["SLASH_COMMAND_ERRORS"].RESTRICTED_COMMAND,O=m["SLASH_COMMAND_ERRORS"].UNKNOWN_API_ERROR,k=m["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND,j=m["SLASH_COMMAND_ERRORS"].UNKNOWN_ERROR,C=m["SLASH_COMMAND_ERRORS"].UNSUPPORTED_IN_THREAD;var E=["/away","/beep","/color","/colors","/colour","/colours","/deletelast","/dm","/editlast","/feedback","/keys","/msg","/prefs","/s","/search","/shortcuts","/shrug","/slack_diagnostic_report","/star","/toggle_debugging_prefs","/togglethemes","/active"];var S=Object(d["d"])(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.isThread;if(!t)return{isEnabled:false,reason:k};if(a&&!Object(l["includes"])(E,t.name))return{isEnabled:false,reason:C};if(!t.isServer&&!Object(h["d"])(e,t.name))return{isEnabled:false,reason:k};return{isEnabled:true}});var w=Object(d["d"])(function(e,t){if(!e||!e.slashCommand)return null;var r=e.slashCommand[t];if(!r){var a=Object(l["values"])(e.slashCommand);r=Object(p["a"])(a,t)}return r.isServer?r:Object(l["omitBy"])(s()({},r,{desc:Object(h["c"])(e,r.name)}),l["isUndefined"])});var I=Object(d["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isThread;if(!e)return null;return Object(l["filter"])(e.slashCommand,function(t){var a=S(e,t,{isThread:r}),n=a.isEnabled;return n}).map(function(t){return t.isServer?t:Object(l["omitBy"])(s()({},t,{desc:Object(h["c"])(e,t.name)}),l["isUndefined"])})});var T=Object(d["a"])("Adds a slash command");T.propTypes={command:c.a.object.isRequired};var N=Object(d["a"])("Adds an array of local slash commands");N.propTypes={commands:c.a.array.isRequired};var R=Object(d["a"])("Adds an array of slash commands from the server");R.propTypes={commands:c.a.array.isRequired};var A=Object(v["b"])("Run a local or server slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.args,n=r.channelId,i=r.threadTs;if(!a||!n)return Promise.reject(new Error(_));var o=a.cmd,c=a.rest,l=a.disp;var u=t();var d=!!i;var v=w(u,o);if(!v)return Promise.reject(new Error(k));var p=S(u,v,{isThread:d}),m=p.isEnabled,g=p.reason;if(!m)return Promise.reject(new Error(g));if(v.isServer)return e(Object(f["a"])({channelId:n,threadTs:i,rest:c,name:o,displayName:l})).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message;var r=void 0;if("restricted_action"===t)r=new Error(y);else if("unknown_command"===t)r=new Error(k);else{r=new Error(O);r.reason=t}throw r});var C=Object(h["b"])(o);if(!C){e(Object(b["error"])("SLASH-COMMAND",'Missing handler for local action "'+o+'"'));return Promise.reject(new Error(j))}return Promise.resolve(e(C(s()({channelId:n,threadTs:i},a))))});A.propTypes={args:c.a.shape({cmd:c.a.string.isRequired,disp:c.a.string,rest:c.a.string}).isRequired,channelId:c.a.string.isRequired,threadTs:c.a.string};var M={};var P=Object(d["c"])((g={},n()(g,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.command;if(Object(l["isEmpty"])(r))return e;return s()({},e,n()({},r.name,Object(l["omit"])(r,"action")))}),n()(g,N,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.commands,a=void 0===r?[]:r;if(Object(l["isEmpty"])(a))return e;var n={};a.forEach(function(e){n[e.name]=Object(l["omit"])(e,"action")});return s()({},e,n)}),n()(g,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.commands,a=void 0===r?[]:r;if(Object(l["isEmpty"])(a))return e;return Object(p["c"])(e,Object(l["keyBy"])(a,"name"))}),g),M);t["default"]=P},2179:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(5);var m=r(907);var b=r(196);var g=new f["b"]("channel_options");var _={channel:v.a.object.isRequired};var y={};var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.channel;return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("p",null,g.t("Archiving is useful if you don\u2019t think you\u2019ll need this channel any longer. Here\u2019s what will happen when you archive this channel:")),h.a.createElement("ul",null,h.a.createElement("li",null,g.t("No one will be able to send messages to it")),h.a.createElement("li",null,g.t("Apps installed in this channel will be disabled")),h.a.createElement("li",null,g.t("A message will be posted that you archived the channel"))),h.a.createElement("p",null,g.t("Messages from archived channels will still show up in search and archives, the same way they do today. You can always un-archive an archived channel later, if you need it again.")),h.a.createElement("p",null,g.rt("Are you sure you want to archive <strong>{channel}</strong>?",{channel:Object(m["getDisplayName"])(t)},function(e){var r=e.key;return Object(b["a"])(r,t)})))}}]);return t}(p["PureComponent"]);O.displayName="ArchiveChannel";O.defaultProps=y;t["a"]=O},21790:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"c",function(){return a});r.d(t,"a",function(){return i});r.d(t,"d",function(){return n});var a={CANADA:"Canada",UNITED_KINGDOM:"United Kingdom",UNITED_KINGDOM_UK:"United Kingdom (UK)",UNITED_STATES:"United States"};var n={STREET_IS_REQUIRED:"street_is_required",CITY_IS_REQUIRED:"city_is_required",POSTAL_CODE_IS_REQUIRED:"postal_code_is_required",ZIP_CODE_IS_REQUIRED:"zip_code_is_required",REGION_IS_REQUIRED:"region_is_required",COUNTRY_IS_REQUIRED:"country_is_required",VAT_ID_IS_REQUIRED:"vat_id_is_required",STREET_INVALID_CHARACTERS:"street_invalid_characters",CITY_INVALID_CHARACTERS:"city_invalid_characters",REGION_INVALID_CHARACTERS:"region_invalid_characters",POSTAL_CODE_INVALID_CHARACTERS:"postal_code_invalid_characters",ZIP_CODE_INVALID_CHARACTERS:"zip_code_invalid_characters",VAT_ID_INVALID_CHARACTERS:"vat_id_invalid_characters",ABN_ID_INVALID_CHARACTERS:"abn_id_invalid_characters",US_ZIP_CODE_INVALID_FORMAT:"us_zip_code_invalid_format",CANADA_POSTAL_CODE_INVALID_FORMAT:"canada_zip_code_invalid_format",ZIP_CODE_INVALID_API_ERROR:"zipcode_invalid_api_error",VAT_ID_INVALID_API_ERROR:"vat_id_invalid_api_error",VAT_ID_INPUT_ERROR:"vat_input_error",VAT_ID_INVALID_FORMAT:"vat_id_invalid_format",API_ERROR:"api_error",ABN_ID_INVALID_LENGTH:"abn_id_invalid_length",ADDRESS_INPUT_ERROR:"address_input_error",ERROR_UPDATING_BILLING_ADDRESS:"error_updating_billing_address",NO_PERMS:"no_perms",INVALID_AUTH:"invalid_auth",DEFAULT_ERROR:"default_error"};var i={ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX:/^[a-zA-Z\xc0-\xff0-9-'-/.\s]+$/i,ALPHA_NUMERIC_WITH_DASH_REGEX:/^[A-Z0-9-\-\s]+$/i,ABN_ID_REGEX:/^(\d *?){11}$/i,US_POSTAL_CODE_FORMAT_REGEX:/(^\d{5}$)|(^\d{5}-{0,1}\d{4}$)/i,CANADA_POSTAL_CODE_FORMAT_REGEX:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1}\d{1}$/i};var s={STREET:"street",SUITE:"suite",CITY:"city",REGION:"region",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_BUSINESS_PURCHASE:"isBusinessPurchase",IS_VAT_AVAILABLE:"isVatIdAvailable",VAT_ID:"vatId",ABN_ID:"abnId"}},21799:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(333);var g=r(1);var _=r.n(g);var y=r(21748);var O=r(69);var k=r(21800);var j=r(21765);var C=r(20124);var E=r.n(C);var S={headers:v.a.array,rows:v.a.array,onRequestNextPage:v.a.func,sortBy:v.a.string,height:v.a.string,isLoading:v.a.bool,newQuery:v.a.bool,rowHeaderItemClassName:v.a.string,rowClassName:v.a.string,disableHover:v.a.bool};var w={headers:[],rows:[],onRequestNextPage:g["noop"],sortBy:null,height:null,isLoading:false,newQuery:false,rowHeaderItemClassName:null,rowClassName:null,disableHover:false};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={keys:r.makeKeys(r.props.rows)};r.onScroll=r.onScroll.bind(r);r.headerItemOnClick=r.headerItemOnClick.bind(r);r.fetchPage=r.fetchPage.bind(r);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateKeys(t)}},{key:"onScroll",value:function e(t,r){var a=r.scrollTop,n=r.scrollHeight,i=r.clientHeight;var s=this.props.rows;a+i>=n&&this.fetchPage(s&&s.length||0)}},{key:"makeKeys",value:function e(t){var r=[];if(!t)return r;t.forEach(function(e){r.push("row-"+e.id)});return r}},{key:"fetchPage",value:function e(t){var r=t||0;if(isNaN(r))return;var a=this.props,n=a.rows,i=a.onRequestNextPage,s=a.isLoading;n&&n.length&&n[r]||!i||s||i(r)}},{key:"headerItemOnClick",value:function e(t,r){t.onClick&&t.onClick(t,r)}},{key:"maybeUpdateKeys",value:function e(t){var r=this.props.rows;if(t&&t.rows!==r){var a={keys:this.makeKeys(t.rows)};this.setState(a)}}},{key:"renderHeaders",value:function e(){var t=this;var r=this.props,a=r.headers,n=r.sortBy,i=r.rowHeaderItemClassName;if(!a||!a.length)return h.a.createElement("div",{className:"c-table_view_flexbox c-table_view_row"},h.a.createElement("div",{className:"c-table_view_row_item"}));return h.a.createElement("div",{className:"c-table_view_flexbox c-table_view_row_header"},a.map(function(e){var r=m()({"c-table_view_row_item_sort_applied":e.id&&e.id===n,"c-table_view_hover_disabled":e.noHover},i,e.className);var a=void 0;a=e.onClick?function r(){return t.headerItemOnClick(e)}:null;return h.a.createElement(k["a"],{value:e.value,key:e.id,onClick:a,iconType:e.iconType,className:r})}))}},{key:"renderRows",value:function e(){var t=this;var r=this.state.keys;var a=this.props,n=a.rows,i=a.isLoading,s=a.newQuery,o=a.rowClassName;function c(e){var t=n[e];var r=m()("c-table_view_flexbox","c-table_view_row",o);return h.a.createElement("div",{className:"c-table_view_row_container"},h.a.createElement("div",{className:r},t.items.map(function(e){return h.a.createElement(j["a"],{key:e.id,value:e.value,onClick:e.onClick,className:e.className})})))}var l=void 0;i&&(l=n&&n.length&&!s?h.a.createElement(O["a"],{size:"small",className:"c-table_view__spinner"}):h.a.createElement(O["a"],{size:"medium",className:"c-table_view__spinner empty"}));var u={};this.props.height&&(u.height=this.props.height);return h.a.createElement("div",{className:"c-table_view_all_rows_container",style:u},h.a.createElement(b["a"],null,function(e){var a=e.width,n=e.height;return h.a.createElement(y["b"],{width:a,height:n,keys:r,rowRenderer:c,onScroll:t.onScroll})}),l)}},{key:"render",value:function e(){var t=m()("c-table_view_flexbox_container",{"c-table_view_hover_disabled":this.props.disableHover});return h.a.createElement("div",{className:t},this.renderHeaders(),this.renderRows())}}]);return t}(p["PureComponent"]);I.displayName="TableView";I.defaultProps=w;t["a"]=I},2180:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(1);var l=r.n(c);var u=r(3278);var d=r(907);var v=r(21703);var p=r(3271);var h=r(5);var f=r(1094);var m=r(196);var b=r(20150);var g=r.n(b);var _=new h["b"]("channel_options");var y={additionalVerificationError:n.a.oneOfType([n.a.string,n.a.object]),additionalVerificationGood:n.a.bool,isCheckingAdditionalVerification:n.a.bool,channel:n.a.object.isRequired,currentTeam:n.a.object,orgName:n.a.string,onInvalidName:n.a.func,onValidName:n.a.func};var O={additionalVerificationError:"",additionalVerificationGood:false,isCheckingAdditionalVerification:false,currentTeam:{},orgName:"",onInvalidName:c["noop"],onValidName:c["noop"]};function k(e){var t=Object(d["getDisplayName"])(e.channel);"#"===t[0]&&(t=t.substr(1));var r=e.additionalVerificationError,a=e.additionalVerificationGood,n=e.isCheckingAdditionalVerification,i=e.channel,o=e.currentTeam,c=e.orgName,l=e.onInvalidName,u=e.onValidName;return s.a.createElement("div",{className:"top_margin p-channel-options--content_text"},s.a.createElement("p",null,_.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:Object(d["getDisplayName"])(i),orgName:c,teamName:Object(v["getTeamDisplayName"])(o)},function(e){var t=e.key,r=e.tag,a=e.text;if("strong"===r)return s.a.createElement("strong",{key:t+"-1"},Object(m["a"])(t,i));return s.a.createElement("strong",{key:t},a)})),s.a.createElement("label",{htmlFor:"channel_rename",className:"c-label"},s.a.createElement("span",{className:"c-label__text"},_.t("Channel name"))),s.a.createElement(f["a"],{additionalVerificationError:r,additionalVerificationGood:a,channel:i,id:"channel_rename",isCheckingAdditionalVerification:n,onInvalid:l,onValid:u,placeholder:_.t("Rename {title}",{title:Object(d["getDisplayName"])(i)}),shouldFix:true,value:t}))}k.displayName="ChannelNameConflict";k.defaultProps=O;function j(e){return{currentTeam:Object(p["getCurrentTeam"])(e),orgName:Object(u["getEnterpriseOrgName"])(e)}}t["a"]=Object(o["connect"])(j)(k)},21800:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(3181);var y=r(37);var O=r(20124);var k=r.n(O);var j={value:v.a.oneOfType([v.a.string,v.a.object]),onClick:v.a.func,role:v.a.string,tabIndex:v.a.number,iconType:v.a.string,className:v.a.string,hasFocus:v.a.bool};var C={value:"",onClick:null,role:"button",tabIndex:0,iconType:"",className:null,hasFocus:false};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.node=null;r.setRef=function(e){r.node=e};Object(f["bindAll"])(r,["onClick","onReturnKeyDown","setRef"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.maybeFocusNode()}},{key:"componentDidUpdate",value:function e(){this.maybeFocusNode()}},{key:"onClick",value:function e(t){var e=this.props.onClick;e&&e(t)}},{key:"onReturnKeyDown",value:function e(t){var r=t.charCode;if(!this.props.onClick||r!==_["c"]&&r!==_["h"])return;t.preventDefault();this.onClick(t)}},{key:"maybeFocusNode",value:function e(){if(this.props.hasFocus&&this.node){this.focusedAfterUpdate=true;this.node.focus()}}},{key:"render",value:function e(){var t=this.props,r=t.value,a=t.role,n=t.tabIndex,i=t.iconType,s=t.className,o=t.onClick,c=t.hasFocus;var l=g()("c-table_view_header_item",s,{"c-table_view_header_item_clickable":o&&o!==f["noop"],"focus-ring":c});return h.a.createElement("div",{onClick:this.onClick,onKeyPress:this.onReturnKeyDown,role:a,tabIndex:c?"0":n,className:l,ref:this.setRef},h.a.createElement("span",{className:"c-table_view_header_item_value"},r),i&&h.a.createElement(y["a"],{type:i}))}}]);return t}(p["PureComponent"]);E.displayName="TableViewHeaderItem";E.defaultProps=C;t["a"]=E},21801:function(e,t,r){"use strict";t["c"]=i;t["d"]=s;r.d(t,"b",function(){return o});r.d(t,"a",function(){return c});var a=r(12);var n=r(78);function i(e,t){var r=Object(n["getHostName"])(Object(a["getFromBootData"])(e,"abs_root_url"));return t+".enterprise."+r}function s(e,t){var r=t||"my";var i=Object(n["getHostName"])(Object(a["getFromBootData"])(e,"abs_root_url"));return r+"."+i}var o=function e(t,r){return"https://"+s(t,r)};var c=function e(t,r){return"https://"+i(t,r)};var l={};Object.defineProperty(l,"getEnterpriseOrgUrlHost",{get:function e(){return i},set:function e(t){i=t}});Object.defineProperty(l,"getWorkspaceUrlHost",{get:function e(){return s},set:function e(t){s=t}})},21802:function(e,t,r){"use strict";var a=r(335);t["a"]=a["d"]},21804:function(e,t,r){"use strict";t["a"]=s;var a=r(268);var n=r(1068);var i=r(21743);function s(e){var t=Object(a["getTab"])(e);if("messages"===t){var r=Object(i["b"])(e);var s=Object(a["getModuleState"])(e,r);if(!s)return null;if(!s.loading)return Object(n["getRequestIdForModule"])(e,{module:r,page:s.page})}else if("files"===t){var o=Object(a["getModuleState"])(e,"files");if(!o.loading)return Object(n["getRequestIdForModule"])(e,{module:"files",page:o.page})}return null}},21805:function(e,t,r){"use strict";t["a"]=c;t["c"]=l;t["d"]=u;t["b"]=d;t["f"]=p;t["g"]=h;t["e"]=f;var a=r(21708);var n="universal_search";var i={autocompleteKeystroke:"autocomplete_keystroke",autocompleteRequest:"autocomplete_request",autocompleteResponse:"autocomplete_response",autocompleteRenderStart:"autocomplete_render_start",searchAccept:"search_accept",searchFilter:"search_filter",searchModuleRequest:"search_module_request",searchModuleResponse:"search_module_response",searchModuleRenderStart:"search_module_render_start"};var s={autocompleteRequestToResponse:"ac_request_to_response",autocompleteKeystrokeToRenderStart:"ac_keystroke_to_render_start",searchAcceptToRenderStart:"search_accept_to_render_start",searchRequestToResponse:"search_request_to_response"};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[n+"_"+e].concat(t||[]).join("_")}function c(){Object(a["d"])(o(i.autocompleteKeystroke))}function l(){Object(a["d"])(o(i.autocompleteRequest))}function u(){Object(a["d"])(o(i.autocompleteResponse));Object(a["f"])(s.autocompleteRequestToResponse,o(i.autocompleteRequest))}function d(){Object(a["d"])(o(i.autocompleteRenderStart));Object(a["f"])(s.autocompleteKeystrokeToRenderStart,o(i.autocompleteKeystroke))}function v(){Object(a["d"])(o(i.searchAccept))}function p(e,t,r){Object(a["d"])(o(i.searchModuleRequest,[e,t,r]))}function h(e,t,r){Object(a["d"])(o(i.searchModuleResponse,[e,t,r]));Object(a["f"])(s.searchRequestToResponse,o(i.searchModuleRequest,[e,t,r]))}function f(e,t,r){Object(a["d"])(o(i.searchModuleRenderStart,[e,t,r]));Object(a["f"])(s.searchAcceptToRenderStart,o(i.searchAccept))}},21807:function(e,t,r){"use strict";var a=r(22176);r.d(t,"a",function(){return a["a"]});var n=r(22177);r.d(t,"b",function(){return n["a"]});var i=r(22178);r.d(t,"c",function(){return i["a"]});var s=r(22179);r.d(t,"d",function(){return s["a"]});var o=r(22180);r.d(t,"e",function(){return o["a"]})},21808:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"BANNERS_PREFS",function(){return m});r.d(t,"setMessagePaneBanner",function(){return b});r.d(t,"closeMessagePaneBanner",function(){return g});r.d(t,"getMessagePaneBannerName",function(){return O});r.d(t,"getMessagePaneBannerData",function(){return k});r.d(t,"loadBanner",function(){return j});r.d(t,"closeBanner",function(){return C});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(1);var d=r.n(u);var v=r(54);var p=r(21769);var h=r(22191);var f;var m="growth_all_banners_prefs";var b=Object(l["a"])("Set message pane banner");b.propTypes={name:c.a.string,data:c.a.object};var g=Object(l["a"])("Close message pane banner");g.propTypes=null;var _={name:"",data:{}};var y=Object(l["c"])((f={},n()(f,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name,a=t.data;var n=s()({},e,{name:r,data:a});return n}),n()(f,g,function(){return _}),f),_);t["default"]=y;var O=Object(l["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.name});var k=Object(l["d"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.data});var j=Object(l["e"])("Load message pane banner info",function(e){Object(h["a"])().then(function(t){Object(u["isEmpty"])(t)||e(b(t))})});var C=Object(l["e"])("Close the message pane banner",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.bannerPrefs;if(!Object(u["isEmpty"])(a)){var n=Object(v["getUserPref"])(t(),m);n=n?JSON.parse(n):{};var i=n[a.countPref]||0;n[a.countPref]=i+1;n[a.tsPref]=Math.round(Date.now()/1e3);var s=JSON.stringify(n);e(Object(p["c"])({pref:m,value:s}))}e(g())});C.propTypes={bannerPrefs:c.a.object}},21809:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(5);var b=r(12);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(21808);var j=r(1170);var C=r(3184);var E=r(20246);var S=r.n(E);var w=new m["b"]("notification_banner");var I={learn_more:w.t("Learn More"),show_me:w.t("Show Me"),skip:w.t("Skip for Now")};var T={emojiSrc:h.a.string,emojiAlt:h.a.string,headerText:h.a.node,bodyText:h.a.node,bodyClass:h.a.string,goButtonText:h.a.string,goButtonClass:h.a.string,onGo:h.a.func,showGoButton:h.a.bool,isLearnMoreButton:h.a.bool,cancelButtonText:h.a.string,cancelButtonClass:h.a.string,onCancel:h.a.func,showCancelButton:h.a.bool,showCloseIcon:h.a.bool,onCloseIcon:h.a.func,closeBanner:h.a.func.isRequired,onCloseBanner:h.a.func,bannerPrefs:h.a.shape({countPref:h.a.string.isRequired,tsPref:h.a.string.isRequired}),featureModernizeBanners:h.a.bool.isRequired};var N={emojiSrc:"",emojiAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:g["noop"],showGoButton:true,isLearnMoreButton:false,cancelButtonText:I.skip,cancelButtonClass:"",onCancel:g["noop"],showCancelButton:true,showCloseIcon:false,onCloseIcon:g["noop"],onCloseBanner:g["noop"],bannerPrefs:{}};var R=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["bindAll"])(r,["handleGoButton","handleCancelButton","handleCloseIcon"]);return r}s()(t,[{key:"closeBanner",value:function e(){var t=this.props,r=t.onCloseBanner,a=t.bannerPrefs;this.props.closeBanner({bannerPrefs:a});r()}},{key:"handleGoButton",value:function e(){var t=this.props.onGo;this.closeBanner();t()}},{key:"handleCancelButton",value:function e(){var t=this.props.onCancel;this.closeBanner();t()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,r=t.headerText,a=t.emojiSrc,n=t.emojiAlt;if(!r)return null;return v.a.createElement("h1",{className:"p-message_pane_banner__header"},a&&v.a.createElement("img",{src:a,alt:n,className:"p-message_pane_banner__header_emoji"}),r)}},{key:"renderBody",value:function e(){var t=this.props,r=t.bodyText,a=t.bodyClass;if(!r)return null;var n=O()("p-message_pane_banner__body",a);return v.a.createElement("div",{className:n},r)}},{key:"renderGoButton",value:function e(){var t=this.props,r=t.goButtonText,a=t.goButtonClass,n=t.isLearnMoreButton;var i=n?I.learn_more:I.show_me;var s=O()("p-message_pane_banner__button ","p-message_pane_banner__button--go",a);return v.a.createElement(C["b"],{className:s,onClick:this.handleGoButton,size:"small"},r||i)}},{key:"renderCancelButton",value:function e(){var t=this.props,r=t.cancelButtonText,a=t.cancelButtonClass;var n=O()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",a);return v.a.createElement(C["b"],{className:n,onClick:this.handleCancelButton,size:"small",type:"outline"},r)}},{key:"renderCloseIcon",value:function e(){if(!this.props.featureModernizeBanners)return null;return v.a.createElement(C["c"],{ariaLabel:w.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon},v.a.createElement(j["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,r=t.showGoButton,a=t.showCancelButton,n=t.showCloseIcon;return v.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),v.a.createElement("div",{className:"p-message_pane_banner__button_container"},r&&this.renderGoButton(),a&&this.renderCancelButton()),n&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);R.displayName="MessagePaneBanner";R.defaultProps=N;var A=function e(t){return{featureModernizeBanners:Object(b["isFeatureEnabled"])(t,"feature_modernize_banners")}};var M={closeBanner:k["closeBanner"]};t["a"]=Object(f["connect"])(A,M)(R)},2181:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(8);var _=r.n(g);var y=r(49);var O=r(3270);var k=r(3271);var j=r(2182);var C=r(37);var E=r(69);var S=r(5);var w=r(1990);var I=r(12);var T=r(907);var N=r(21703);var R=r(20212);var A=r.n(R);var M=new S["b"]("channel_options");var P=new S["b"]("ui_validation");var x={teamId:v.a.string.isRequired,additionalVerificationError:v.a.oneOfType([v.a.string,v.a.object]),additionalVerificationGood:v.a.bool,channel:v.a.object.isRequired,featureInformChangesToSharedChannelsAreWorkspaceSpecific:v.a.bool,nameNeedsChecking:v.a.bool,id:v.a.string.isRequired,isCheckingAdditionalVerification:v.a.bool,placeholder:v.a.string,onInvalid:v.a.func,onValid:v.a.func,shouldFix:v.a.bool,value:v.a.string.isRequired,workspaceName:v.a.string};var D={additionalVerificationError:"",additionalVerificationGood:false,featureInformChangesToSharedChannelsAreWorkspaceSpecific:false,nameNeedsChecking:false,isCheckingAdditionalVerification:false,placeholder:"",onInvalid:m["noop"],onValid:m["noop"],shouldFix:false,value:"",workspaceName:""};var F={lowercase:P.t("Channel names must be all lowercase. Try again?"),maxLength:P.t("Blerg, that\u2019s a bit too long! Channel names must be fewer than {maxlength} characters.",{maxlength:j["b"]+1}),punctuation:P.t("Names can\u2019t consist solely of punctuation. Please elaborate!"),required:P.t("Don\u2019t forget to name your channel."),specials:P.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?")};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.renderWarning=r.renderWarning.bind(r);r.state={showInvalidCharactersWarning:false,showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:r.props.value};return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.nameNeedsChecking&&this.onChange(this.props.value)}},{key:"onChange",value:function e(t){var r=t;var a=this.props,n=a.nameNeedsChecking,i=a.onInvalid,s=a.onValid,o=a.shouldFix,c=a.teamId;o&&(r=this.fixName(r));var l=Object(y["b"])(c);var u=Object(j["a"])(l,r,this.props.value),d=u.hasNameRequiredWarning,v=u.hasMaxLengthWarning,p=u.hasSpecialsWarning,h=u.hasPunctuationWarning,f=u.hasLowercaseWarning,m=u.hasNameTakenWarning;if(r===this.props.value&&!n){i({value:r});this.setState(function(){return{showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:r}});return}f||v||d||m||h||p?i({value:r}):s({value:r});this.setState(function(){return{showLowercaseWarning:f,showMaxLengthWarning:v,showNameRequiredWarning:d,showNameTakenWarning:m,showPunctuationWarning:h,showSpecialsWarning:p,value:r}})}},{key:"fixName",value:function e(t){var r=t.toLowerCase().replace(/^#+/,"");r=r.replace(/^\s+/,"");r=r.replace(/\s+$/,"");r=r.replace(/\s/g,"-");var a=this.state.showInvalidCharactersWarning;a=!(!r||r===t);this.setState(function(){return{showInvalidCharactersWarning:a}});return r}},{key:"maybeRenderAdditionalValidationMarks",value:function e(){var t=this.props,r=t.additionalVerificationGood,a=t.isCheckingAdditionalVerification;var n=this.state,i=n.showLowercaseWarning,s=n.showMaxLengthWarning,o=n.showNameRequiredWarning,c=n.showNameTakenWarning,l=n.showPunctuationWarning,u=n.showSpecialsWarning;if(i||s||o||c||l||u)return null;if(a)return h.a.createElement("span",{className:"p-channel_name_input--validating"},h.a.createElement(E["a"],{size:"small",className:"inline_block"}));if(r)return h.a.createElement("span",{className:"p-channel_name_input--validating sk_seafoam_green"},M.t("Available"),h.a.createElement(C["a"],{align:"baseline",type:"check_circle_o_large"}));return null}},{key:"maybeRenderAdditionalVerificationWarning",value:function e(){var t=this.props.additionalVerificationError;if(!t.length)return null;return this.renderWarning(t)}},{key:"renderRules",value:function e(){var t=this.props,r=t.channel,a=t.featureInformChangesToSharedChannelsAreWorkspaceSpecific,n=t.workspaceName;var i=false;if(Object(T["isExternallySharedChannel"])(r))return a?this.renderWarning(M.t("Names should be lowercase, with no spaces. Changes will only be visible to {workspaceName}.",{workspaceName:Object(S["l"])(n)}),i):this.renderWarning(M.t("Names should be lowercase, with no spaces."),i);return this.renderWarning(M.t("Names should be lowercase, with no spaces."),i)}},{key:"renderNameTakenWarning",value:function e(){return this.renderWarning(P.t("{name} is already taken by a channel, username, or user group.",{name:this.state.value}))}},{key:"renderInvalidCharactersWarning",value:function e(){return this.renderWarning(M.t("You entered some disallowed characters in the name, which we\u2019ve fixed. Make sure it looks good to you, and try again!"))}},{key:"renderWarning",value:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a=h.a.createElement("span",{className:"flex_none small_right_margin"},h.a.createElement(C["a"],{type:"warning"}));var n=_()("p-channel_name_input--input_note",{"p-channel_name_input--alert":r});return h.a.createElement("span",{className:n},r&&a,h.a.createElement("span",{className:"flex_one"},t))}},{key:"render",value:function e(){var t=this.props,r=t.additionalVerificationError,a=t.id,n=t.placeholder;var i=this.state,s=i.showInvalidCharactersWarning,o=i.showLowercaseWarning,c=i.showMaxLengthWarning,l=i.showNameRequiredWarning,u=i.showNameTakenWarning,d=i.showPunctuationWarning,v=i.showSpecialsWarning,p=i.value;var f=s||o||c||l||u||d||v;r&&r.length&&(f=true);var m=_()("c-input_text","p-channel_name_input--input",{"p-channel_name_input--input_with_warning":f});return h.a.createElement("div",{className:"position_relative"},h.a.createElement(w["b"],{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:m,id:a,name:"channel_name_input",onChange:this.onChange,placeholder:n,value:p}),this.maybeRenderAdditionalValidationMarks(),h.a.createElement("div",{className:"p-channel_name_input--warnings"},s&&this.renderInvalidCharactersWarning(),o&&this.renderWarning(F.lowercase),c&&this.renderWarning(F.maxLength),l&&this.renderWarning(F.required),u&&this.renderNameTakenWarning(),d&&this.renderWarning(F.punctuation),v&&this.renderWarning(F.specials),this.maybeRenderAdditionalVerificationWarning()),h.a.createElement("div",{className:"margin_top_25"},this.renderRules()))}}]);return t}(p["PureComponent"]);L.displayName="ChannelNameInput";L.defaultProps=D;var B=L;function U(e){var t=Object(I["isFeatureEnabled"])(e,"feature_inform_changes_to_shared_channels_are_workspace_specific");return{featureInformChangesToSharedChannelsAreWorkspaceSpecific:t,workspaceName:Object(N["getTeamDisplayName"])(Object(k["getCurrentTeam"])(e)),teamId:Object(O["getTeamId"])(e)}}t["a"]=Object(f["connect"])(U)(L)},21810:function(e,t,r){"use strict";r.d(t,"j",function(){return d});r.d(t,"f",function(){return v});r.d(t,"b",function(){return p});r.d(t,"g",function(){return h});r.d(t,"e",function(){return f});r.d(t,"i",function(){return m});r.d(t,"h",function(){return b});t["c"]=g;t["d"]=_;r.d(t,"a",function(){return O});t["l"]=k;t["k"]=j;var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21696);var c=r(21950);var l=r(21812);var u=r(21771);var d=Object(o["a"])("Switch currently active plan");d.propTypes=s.a.object;var v=Object(o["a"])("Successfully fetched available plans");v.propTypes=s.a.object;var p=Object(o["a"])("Successfully fetched cost for current plan");p.propTypes=s.a.object;var h=Object(o["a"])("Received an API error");h.propTypes=null;var f=Object(o["a"])("Plans and cost data loaded");f.propTypes=null;var m=Object(o["a"])("Set Plan Level");m.propTypes=s.a.string;var b=Object(o["a"])("Set Payment Method");b.propTypes=s.a.string;function g(){return function(e,t){var r=t();var a=Object(u["o"])(r);var i=Object(l["b"])(r);var s=Object(u["g"])(r);var o=Object(l["l"])(r).numberOfUsers;var d=Object(u["w"])(r,a,i,s,o);if(d){var v=Object(u["y"])(r,a,i,s,o);return e(p({activePlanCost:v,companyAddress:i,isInvoice:s,numInvoiceSeats:o}))}var f=i.country,m=i.postalCode,b=i.isBusinessPurchase;var g={productId:a,country:f,postalCode:m,isBusinessPurchase:b,isInvoice:s,numInvoiceSeats:o};return e(Object(c["b"])(g)).then(function(t){return e(p(n()({},t,{companyAddress:i,isInvoice:s,numInvoiceSeats:o})))}).catch(function(){return e(h())})}}function _(){return function(e,t){var r=Object(l["c"])(t());e(Object(c["a"])({country:r})).then(function(t){e(v(t));e(g()).then(function(){return e(f())})}).catch(function(){return e(h())})}}_.propTypes={country:s.a.string};var y=function e(t,r,a){if(r===a)return;t(g())};var O=Object(o["e"])("Async thunk to change active plan initiated",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=Object(u["o"])(t());e(d(r));var n=Object(u["o"])(t());y(e,a,n)});O.propTypes={term:s.a.string,currency:s.a.string};function k(e){return function(t,r){var a=Object(u["o"])(r());t(m(e));var n=Object(u["o"])(r());y(t,a,n)}}function j(e){return function(t,r){var a=Object(u["o"])(r());t(b(e));var n=Object(u["o"])(r());y(t,a,n)}}},21811:function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"n",function(){return m});r.d(t,"d",function(){return b});r.d(t,"c",function(){return g});r.d(t,"b",function(){return _});r.d(t,"e",function(){return y});r.d(t,"o",function(){return O});r.d(t,"q",function(){return k});r.d(t,"j",function(){return j});r.d(t,"k",function(){return C});r.d(t,"p",function(){return E});r.d(t,"g",function(){return S});r.d(t,"f",function(){return w});t["h"]=I;t["r"]=T;t["s"]=N;t["m"]=R;t["l"]=A;t["i"]=M;t["u"]=P;t["t"]=x;var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21696);var c=r(21956);var l=r(12);var u=r(21841);var d=r(22979);var v=r(21771);var p=r(21812);var h=n.a.shape({companyName:n.a.string,street:n.a.string,suite:n.a.string,city:n.a.string,postalCode:n.a.string,region:n.a.string,country:n.a.string,isBusinessPurchase:n.a.bool,isVatIdAvailable:n.a.bool,vatId:n.a.string,abnId:n.a.string,validationErrors:n.a.object,isValidationActive:n.a.bool});var f=Object(o["a"])("Checkout Address Form Data Loaded");f.propTypes=n.a.object;var m=Object(o["a"])("Update Company Address Field");m.propTypes=n.a.object;var b=Object(o["a"])("Company Address Validated");b.propTypes=n.a.object;var g=Object(o["a"])("Company Address Form Field Validated");g.propTypes=n.a.object;var _=Object(o["a"])("Clear Company Address Form Field Validation Errors");_.propTypes=n.a.object;var y=Object(o["a"])("Credit Card Data Changed");y.propTypes=n.a.object;var O=Object(o["a"])("Credit Card Token Created");O.propTypes=n.a.object;var k=Object(o["a"])("Toggles if Credit Card Token is being created or not");k.propTypes=n.a.bool;var j=Object(o["a"])("Payment Response Received");j.propTypes=n.a.object;var C=Object(o["a"])("Stripe API Key Loaded");C.propTypes=n.a.object;var E=Object(o["a"])("Update Invoice Data Field");E.propTypes=n.a.object;var S=Object(o["a"])("Invoice Data Validated");S.propTypes=n.a.object;var w=Object(o["a"])("Invoice Form Field Validated");w.propTypes=n.a.object;function I(){return function(e){Promise.all([e(Object(c["b"])()),e(Object(c["a"])())]).then(function(t){e(f({statesAndCountries:t[0],companyAddress:t[1]}))})}}function T(e){return function(t,r){return new Promise(function(a){var n=Object(l["isFeatureEnabled"])(r(),"feature_checkout_flow_translations");var s=Object(p["e"])(r());var o=Object(u["e"])(e.companyAddress,n,s.vatCountries);if(!Object(i["isEmpty"])(o)){t(b(o));a({isCheckoutFormValid:false});return}t(b(o));t(Object(c["e"])(e.companyAddress)).then(function(){a({isCheckoutFormValid:true})}).catch(function(e){var r=e.data||{};var s=r.response_code;var o=r.error;var c=r.format_valid;var l=Object(u["a"])(s,o,c,n);if(!Object(i["isEmpty"])(l)){t(b(l));a({isCheckoutFormValid:false})}})})}}T.propTypes={companyAddress:h};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{companyAddress:{},field:null},t=e.companyAddress,r=e.field;return function(e,a){var n=Object(l["isFeatureEnabled"])(a(),"feature_checkout_flow_translations");var i=Object(p["e"])(a());var s=Object(u["f"])(t,r,i.vatCountries,n);e(g({error:s,field:r}))}}N.propTypes={companyAddress:h,field:n.a.string};function R(e){return function(t,r){t(m(e));var a=Object(p["b"])(r());a.isValidationActive&&Object(i["has"])(e,"country")&&t(T({companyAddress:Object(p["b"])(r())}))}}R.propTypes=n.a.object;function A(e){return function(t){t(Object(c["d"])(e)).then(function(e){return t(j(e))})}}A.propTypes=n.a.object;function M(e){return function(t){return t(Object(c["c"])(e)).then(function(e){return t(C({stripeApiKey:e.stripe_api_publishable_key}))})}}M.propTypes={currency:n.a.string};function P(e){return function(t,r){var a=r();var n=Object(l["isFeatureEnabled"])(a,"feature_checkout_flow_translations");var i=Object(p["l"])(a);var s=Object(v["A"])(a);var o=Object(v["z"])(a);var c=Object(d["b"])(i,e,s,o,n);t(w({error:c,field:e}))}}d["b"].propTypes={field:n.a.string};function x(e){return function(t,r){return new Promise(function(a){var n=r();var s=Object(l["isFeatureEnabled"])(n,"feature_checkout_flow_translations");var o=Object(v["A"])(n);var c=Object(v["z"])(n);var u=Object(d["a"])(e,o,c,s);t(S(u));a({isInvoiceFormValid:Object(i["isEmpty"])(u)})})}}x.propTypes={invoiceData:n.a.object}},21812:function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"c",function(){return i});r.d(t,"d",function(){return s});r.d(t,"e",function(){return o});r.d(t,"m",function(){return c});r.d(t,"g",function(){return l});r.d(t,"i",function(){return u});r.d(t,"k",function(){return d});r.d(t,"f",function(){return v});r.d(t,"h",function(){return p});r.d(t,"j",function(){return h});r.d(t,"n",function(){return f});r.d(t,"a",function(){return b});r.d(t,"o",function(){return g});r.d(t,"l",function(){return _});var a=r(21696);var n=Object(a["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.companyAddress)return null;return e.checkoutFlow.companyAddress});var i=Object(a["d"])(function(e){var t=n(e);if(!t)return null;return t.country});var s=Object(a["d"])(function(e){var t=n(e);if(!t)return null;return t.postalCode});var o=Object(a["d"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.config)return null;return e.checkoutFlow.config});var c=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutAddressFormDataLoaded});var l=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.creditCardData});var u=Object(a["d"])(function(e){var t=l(e);if(!t)return null;return t.token});var d=Object(a["d"])(function(e){var t=u(e);if(!t)return null;return t.id});var v=Object(a["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.brand});var p=Object(a["d"])(function(e){var t=u(e);if(!t||!t.card)return null;return t.card.last4});var h=Object(a["d"])(function(e){var t=l(e);if(!t)return null;return t.tokenError});var f=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return false;return e.checkoutFlow.isCreatingCreditCardToken});var m=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentStatus});var b=Object(a["d"])(function(e){var t=m(e);if(!t)return false;return true===t.ok&&!t.error});var g=Object(a["d"])(function(e){var t=o(e);if(!t)return null;return t.stripeApiKey});var _=Object(a["d"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.invoiceData})},21813:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"createAppAction",function(){return I});r.d(t,"updateAppAction",function(){return T});r.d(t,"deleteAppAction",function(){return N});r.d(t,"deleteAllAppActions",function(){return R});r.d(t,"getActionSaveErrors",function(){return L});r.d(t,"selectAppConfig",function(){return X});r.d(t,"selectIsDataLoaded",function(){return $});r.d(t,"selectUnsaved",function(){return ee});r.d(t,"selectMessageActions",function(){return te});r.d(t,"selectGlobalActions",function(){return re});r.d(t,"selectSaveError",function(){return ae});r.d(t,"maybeFetchConfig",function(){return ne});r.d(t,"saveAppConfig",function(){return ie});r.d(t,"test",function(){return se});var a=r(374);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v=r(3);var p=r.n(v);var h=r(21957);var f=r(21699);var m=r(3182);var b=r(5);var g=r(12);var _=r(21731);var y;var O=new b["b"]("developer_apps");var k=h["a"];var j=h["b"];var C=m["error"];var E="X";var S=function e(t){return t[0]===E};var w={id:p.a.string.isRequired,type:p.a.oneOf(Object(l["values"])(_["ACTION_TYPES"])).isRequired,name:p.a.string.isRequired,description:p.a.string.isRequired,callbackId:p.a.string.isRequired};var I=Object(d["a"])("Create an app action (but without saving)");I.propTypes={appId:p.a.string.isRequired,action:p.a.shape(c()({},w,{id:p.a.string})).isRequired};var T=Object(d["a"])("Update an app action (but without saving)");T.propTypes={appId:p.a.string.isRequired,action:p.a.shape(w).isRequired};var N=Object(d["a"])("Remove an app action (but without saving)");N.propTypes={appId:p.a.string.isRequired,actionId:p.a.string.isRequired};var R=Object(d["a"])("Remove all app actions (but without saving)");R.propTypes={appId:p.a.string.isRequired};var A=Object(d["a"])("App action config fetch in flight");A.propTypes=p.a.string.isRequired;var M=Object(d["a"])("App action config fetch success");M.propTypes={appId:p.a.string.isRequired,actionUrl:p.a.string,suggestionUrl:p.a.string,actions:p.a.arrayOf(p.a.shape(w))};var P=Object(d["a"])("App action config fetch failed");P.propTypes=p.a.string.isRequired;var x=Object(d["a"])("App action config save in flight");x.propTypes=p.a.string.isRequired;var D=Object(d["a"])("App action config save success");D.propTypes={appId:p.a.string.isRequired,actionUrl:p.a.string,suggestionUrl:p.a.string,actions:p.a.arrayOf(p.a.shape(w))};var F=Object(d["a"])("App action config failed");F.propTypes={appId:p.a.string.isRequired,error:p.a.string};var L=function e(t){return{missing_name:t?O.t("Some required fields are empty \u2014 please take another look?"):"",missing_description:t?O.t("Some required fields are empty \u2014 please take another look?"):"",missing_callback_id:t?O.t("Some required fields are empty \u2014 please take another look?"):"",duplicate_names:t?O.t("Apps can\u2019t use the same name for multiple actions."):"",duplicate_callback_ids:t?O.t("Apps can\u2019t use the same callback ID for multiple actions."):"",name_too_long:t?O.t("Names can\u2019t be longer than {num} characters.",{num:24}):"",description_too_long:t?O.t("Descriptions can\u2019t be longer than {num} characters.",{num:150}):"",callback_id_too_long:t?O.t("Callback IDs can\u2019t be longer than {num} characters.",{num:255}):"",app_cannot_have_more_than_one_hundred_actions:t?O.t("Apps can\u2019t have more than {num} actions",{num:100}):"",missing_type:O.t("Hmm, something\u2019s gone wrong."),type_is_not_message_action:O.t("Hmm, something\u2019s gone wrong.")}};var B={actions:[]};var U=function e(t,r,a){return c()({},t,s()({},r,c()({},t[r]||B,a)))};var q=function e(t,r){return U(t,r,{fetchInFlight:true,fetchError:false})};var H=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=r.appId,i=n()(r,["appId"]);var s=Object(l["get"])(t,a+".unsaved",false);return U(t,a,c()({fetchInFlight:false,fetchError:false,isDataLoaded:true},s?{}:i))};var W=function e(t,r){return U(t,r,{fetchInFlight:false,fetchError:true})};var G=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.appId,n=r.action;var i=Object(l["clone"])(Object(l["get"])(t,a+".actions",[]));var s=n.id&&Object(l["findIndex"])(i,function(e){return e.id===n.id});"number"===typeof s&&s>=0?i[s]=n:i.push(c()({},n,{id:""+E+i.length}));return U(t,a,{actions:i,unsaved:true})};var V=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.appId,n=r.actionId;var i=Object(l["clone"])(Object(l["get"])(t,a+".actions",[]));var s=Object(l["findIndex"])(i,function(e){return e.id===n});if("number"===typeof s&&s>=0){i.splice(s,1);return U(t,a,{actions:i,unsaved:true})}return t};var z=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.appId;var n=[];return U(t,a,{actions:n,unsaved:true})};var K=function e(t,r){return U(t,r,{saveInFlight:true,saveError:null,unsaved:false})};var Q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=r.appId,i=n()(r,["appId"]);return U(t,a,c()({saveInFlight:false,saveError:null},i))};var Y=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.appId,n=r.error;return U(t,a,{saveInFlight:false,saveError:n||null,unsaved:true})};var J={};var Z=Object(d["c"])((y={},s()(y,A,q),s()(y,M,H),s()(y,P,W),s()(y,I,G),s()(y,T,G),s()(y,N,V),s()(y,R,z),s()(y,x,K),s()(y,D,Q),s()(y,F,Y),y),J);t["default"]=Z;var X=Object(d["d"])(function(e,t){var r=e&&e.developerActions||J;return r[t]||B});var $=Object(d["d"])(function(e,t){return!!X(e,t).isDataLoaded});var ee=Object(d["d"])(function(e,t){return!!X(e,t).unsaved});var te=Object(d["d"])(function(e,t){var r=X(e,t),a=r.actions;return a.filter(function(e){return e.type===_["ACTION_TYPES"].messageAction})});var re=Object(d["d"])(function(e,t){var r=X(e,t),a=r.actions;return a.filter(function(e){return e.type===_["ACTION_TYPES"].globalAction})});var ae=Object(d["d"])(function(e,t){return X(e,t).saveError});var ne=Object(f["b"])("Fetch config for app, but only if safe to do so",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appId;var n=t();var i=X(n,a),s=i.fetchInFlight,o=i.saveInFlight,l=i.unsaved;if(!s&&!o&&!l){e(A(a));return e(k(a)).then(function(t){return e(M(c()({appId:a},t)))}).catch(function(t){e(P(a));e(C(t))})}return Promise.resolve()});ne.propTypes={appId:p.a.string.isRequired};var ie=Object(f["b"])("Save app actions config",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appId,i=r.actionUrl,s=r.suggestionUrl;var o=t();var l=Object(g["isFeatureEnabled"])(o,"feature_app_actions");if(!l)return Promise.resolve();var u=X(o,a),d=u.saveInFlight,v=u.actionUrl,p=u.suggestionUrl,h=u.actions;if(d)return Promise.reject("Dev app actions: Save already in flight");e(x(a));return e(j({appId:a,actionUrl:"string"===typeof i?i:v,suggestionUrl:"string"===typeof s?s:p,actions:h.map(function(e){var t=e.id,r=n()(e,["id"]);return S(e.id)?r:e})})).then(function(t){e(D(c()({appId:a},t)));return{ok:true}}).catch(function(t){var r=t.data&&t.data.error;e(F({appId:a,error:r}));if(L(l)[r])return{ok:false};throw t})});ie.propTypes={appId:p.a.string.isRequired};var se={};Object.defineProperty(se,"fetchAppConfig",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(se,"saveAppConfig",{get:function e(){return j},set:function e(t){j=t}});Object.defineProperty(se,"error",{get:function e(){return C},set:function e(t){C=t}})},2182:function(e,t,r){"use strict";r.d(t,"b",function(){return s});t["a"]=o;var a=r(21697);var n=r(21698);var i=r(1095);var s=21;function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;var o=!t.trim();var c=Object(i["a"])(t)>s;var l=/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(t.trim());var u=/^[-|_]+$/.test(t);var d=/[A-Z]/.test(t);var v=false;if(t!==r&&e){var p=Object(a["getChannelByName"])(e,t)||Object(n["memberExistsWithName"])(e,t);v=!!p}return{hasNameRequiredWarning:o,hasMaxLengthWarning:c,hasSpecialsWarning:l,hasPunctuationWarning:u,hasLowercaseWarning:d,hasNameTakenWarning:v}}},21830:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(21860);var g={headers:v.a.array,rows:v.a.array,headerItemOnClick:v.a.func,rowHeaderItemClassName:v.a.string,rowClassName:v.a.string,onRequestNextPage:v.a.func,sortBy:v.a.string,sortDir:v.a.string,searchQuery:v.a.string,height:v.a.string,onResetData:v.a.func,isLoading:v.a.bool,newQuery:v.a.bool,useKeyboardNavigableTable:v.a.bool};var _={headers:[],rows:[],rowHeaderItemClassName:null,rowClassName:null,headerItemOnClick:f["noop"],onRequestNextPage:f["noop"],sortBy:null,sortDir:null,searchQuery:"",height:null,onResetData:f["noop"],isLoading:false,newQuery:false,useKeyboardNavigableTable:false};var y=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onResetData=r.onResetData.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.setContainerNodeRef=r.setContainerNodeRef.bind(r);r.getDOMNode=r.getDOMNode.bind(r);return r}s()(t,[{key:"onRequestNextPage",value:function e(t,r){var e=this.props.onRequestNextPage;e&&e(t,r)}},{key:"onResetData",value:function e(){var e=this.props.onResetData;e&&e()}},{key:"getDOMNode",value:function e(){return this.tableViewContainerNode}},{key:"setContainerNodeRef",value:function e(t){this.tableViewContainerNode=t}},{key:"headerItemOnClick",value:function e(t,r){var e=this.props.headerItemOnClick;e&&e(t,r)}},{key:"render",value:function e(){var t=this.props,r=t.headers,a=t.rows,n=t.rowHeaderItemClassName,i=t.rowClassName,s=t.sortBy,o=t.sortDir,c=t.searchQuery,l=t.height,u=t.isLoading,d=t.newQuery,v=t.useKeyboardNavigableTable;var p={headers:r,rows:a,headerItemOnClick:this.headerItemOnClick,rowHeaderItemClassName:n,rowClassName:i,onRequestNextPage:this.onRequestNextPage,onResetData:this.onResetData,sortBy:s,sortDir:o,searchQuery:c,height:l,isLoading:u,newQuery:d};var f=v?h.a.createElement(b["a"],p):h.a.createElement(b["b"],p);return h.a.createElement("div",{className:"c-table_view_container",ref:this.setContainerNodeRef},f)}}]);return t}(p["PureComponent"]);y.displayName="TableViewController";y.defaultProps=_;t["a"]=y},21832:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(21712);var O=r(3189);var k=r(37);var j=r(5);var C=r(20215);var E=r.n(C);var S=new j["b"]("flexpane");var w=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.className;return v.a.createElement("div",{className:b()("p-flexpane_header",a)},v.a.createElement("div",{className:"p-flexpane_header__children"},r),v.a.createElement(O["a"],{title:S.t("Close Right Sidebar"),ariaLabel:S.t("Close Right Sidebar"),className:"p-flexpane_header__close",onClick:this.props.closeFlexpane},v.a.createElement(k["b"],{type:"times"})))}}]);return t}(d["PureComponent"]);w.displayName="FlexpaneHeader";w.defaultProps={children:null,className:void 0,closeFlexpane:g["noop"]};t["a"]=Object(f["connect"])(null,{closeFlexpane:y["a"]})(w)},21835:function(e,t,r){"use strict";t["a"]=l;var a=r(1);var n=r.n(a);var i=r(21729);var s=r(21758);var o=r(21787);var c=r(21788);function l(e,t,r){var a=Object(i["b"])(e,{highlightWords:t,shouldRenderEmojiAsText:r});return n.a.reduce(a.contents,function(e,t){if(t.attributes&&t.attributes.slackmention){var r=t.attributes.slackmention.id;if(Object(s["a"])(r))return e+"@"+Object(c["a"])(r);if(Object(o["a"])(r))return""+e+t.attributes.slackmention.label;if("S"===r.charAt(0))return e+"<!subteam^"+r+"|"+t.attributes.slackmention.label+">";return e+"<@"+r+">"}if(t.insert&&t.insert.slackemoji)return e+t.insert.slackemoji;return e+t.insert},"")}},21836:function(e,t,r){"use strict";t["a"]=i;var a=r(268);var n=r(21743);function i(e){var t=Object(a["getTab"])(e);var r={};if("messages"===t){var i=Object(n["b"])(e);r.click_module_name="messages";r.click_module_sort=i===n["a"].relevantMessages?"score":"timestamp"}else if("files"===t){r.click_module_name="files";r.click_module_sort="auto"}return r}},21837:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(91);var d=r(268);var v=Object(l["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.method,i=void 0===a?"":a,o=s()(r,["method"]);var c=t();var l=Object(d["getLastOpenMethod"])(c)||"search_box";var v=Object(d["getSearchSessionId"])(c);var p=Object(d["getQuerySessionId"])(c);Object(u["b"])("SEARCH_OPEN",n()({open_method:i||l,search_session_id:v,client_request_id:p},o))});v.propTypes={method:c.a.string};t["a"]=v},21838:function(e,t,r){"use strict";var a=r(21770);t["a"]=a["a"]},21839:function(e,t,r){"use strict";var a=r(942);var n=r.n(a);var i=r(1237);var s=r.n(i);var o=r(5);var c=r(21715);var l={JPY:true};var u=/\B(?=(\d{3})+(?!\d))/g;var d=Intl&&"object"===("undefined"===typeof Intl?"undefined":n()(Intl))&&"function"===typeof Intl.NumberFormat&&"object"===n()(Intl.NumberFormat())&&"function"===typeof Intl.NumberFormat().resolvedOptions&&"object"===n()(Intl.NumberFormat().resolvedOptions())&&"undefined"!==typeof Intl.NumberFormat().resolvedOptions().minimumFractionDigits;var v=o["n"];var p={USD:{"en-US":"$","es-ES":"US$","fr-FR":"$US","de-DE":"$","ja-JP":"$"},GBP:{"en-US":"\xa3","es-ES":"GBP","fr-FR":"\xa3GB","de-DE":"\xa3","ja-JP":"\xa3"},EUR:{"en-US":"\u20ac","es-ES":"\u20ac","fr-FR":"\u20ac","de-DE":"\u20ac","ja-JP":"\u20ac"},JPY:{"en-US":"\xa5","es-ES":"JPY","fr-FR":"JPY","de-DE":"\xa5","ja-JP":"\uffe5"}};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.displayTrailingZeroes,n=void 0!==a&&a,i=r.currencyDisplay,o=void 0===i?"symbol":i;if(!t)return null;var c=l[t.toUpperCase()]?e:e/100;if(d){var u=s()(Intl.NumberFormat);var p=void 0;p=u(v,e%100!==0||n?{style:"currency",currency:t,currencyDisplay:o}:{style:"currency",currency:t,minimumFractionDigits:0,currencyDisplay:o});return p.format(c)}return f(e,t,{displayTrailingZeroes:n})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.displayTrailingZeroes,n=void 0!==a&&a;if(!t)return null;var i=l[t.toUpperCase()]?e:e/100;var s=c["b"][v].thousands_separator;var o=c["b"][v].decimal_symbol;var d="";if(i<0){i=Math.abs(i);d="-"}l[t.toUpperCase()]||(i=e%100!==0||n?i.toFixed(2).replace(".",o):i.toFixed(0));i=i.toString().replace(u,s);var h="";var f=p[t][v];switch(v){case"en-US":h=d+f+i;break;case"es-ES":h=d+i+" "+f;break;case"fr-FR":h=d+i+" "+f;break;case"de-DE":h=d+i+" "+f;break;case"ja-JP":h=d+f+i;break;default:h=d+f+i}return h}var m={formatCurrencyWithoutIntl:f};Object.defineProperty(m,"locale",{get:function e(){return v},set:function e(t){v=t}});t["a"]=h},21840:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a={CARD_NUMBER:"cardNumber",CARD_EXPIRY:"cardExpiry",CARD_CVC:"cardCvc",POSTAL_CODE:"postalCode"}},21841:function(e,t,r){"use strict";t["e"]=v;t["f"]=p;t["a"]=h;t["b"]=f;t["d"]=I;t["c"]=N;var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(5);var u=r(21790);var d=new l["b"]("checkout_v2");function v(e,t,r){var a=R(t);if(Object(o["isEmpty"])(a))return{};return s()({},m(e,a),b(e,a,r),g(e,a))}function p(e,t,r,a){var n=null;var i=R(a);if(Object(o["isEmpty"])(i))return n;var s=e.street,c=e.city,l=e.country,d=e.postalCode,v=e.region,p=e.vatId,h=e.isVatIdAvailable,f=e.abnId;switch(t){case u["b"].STREET:n=k(s,i);break;case u["b"].CITY:n=j(c,i);break;case u["b"].COUNTRY:n=C(l,i);break;case u["b"].POSTAL_CODE:n=E(l,d,i);break;case u["b"].REGION:n=S(l,v,i);break;case u["b"].VAT_ID:n=w(l,p,h,r,i);break;case u["b"].ABN_ID:n=T(f,i);break;default:}return n}function h(e,t,r,a){var n=R(a);if(Object(o["isEmpty"])(n))return{};var i={};var s=u["d"].DEFAULT_ERROR;"102"===e?s=u["d"].ZIP_CODE_INVALID_API_ERROR:t===u["d"].VAT_ID_INPUT_ERROR?s=r?u["d"].VAT_ID_INVALID_API_ERROR:u["d"].VAT_ID_INVALID_FORMAT:Object(o["has"])(u["d"],t)&&(s=t);switch(s){case u["d"].ZIP_CODE_INVALID_API_ERROR:i.postalCode=y(u["d"].ZIP_CODE_INVALID_API_ERROR,"",n);break;case u["d"].VAT_ID_INVALID_API_ERROR:i.vatId=y(u["d"].VAT_ID_INVALID_API_ERROR,"",n);break;case u["d"].VAT_ID_INVALID_FORMAT:i.vatId=y(u["d"].VAT_ID_INVALID_FORMAT,"",n);break;case u["d"].API_ERROR:case u["d"].ADDRESS_INPUT_ERROR:case u["d"].ERROR_UPDATING_BILLING_ADDRESS:case u["d"].NO_PERMS:case u["d"].INVALID_AUTH:default:i.general=y(u["d"].DEFAULT_ERROR,"",n)}return i}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return null;return e===u["c"].UNITED_STATES?d.t("Zip code"):d.t("Postal code")}function m(e,t){var r={};var a=k(e.street,t);a&&(r.street=a);var n=j(e.city,t);n&&(r.city=n);var i=C(e.country,t);i&&(r.country=i);var s=E(e.country,e.postalCode,t);s&&(r.postalCode=s);var o=S(e.country,e.region,t);o&&(r.region=o);return r}function b(e,t,r){var a={};var n=w(e.country,e.vatId,e.isVatIdAvailable,r,t);n&&(a.vatId=n);return a}function g(e,t){var r={};var a=T(e.abnId,t);a&&(r.abnId=a);return r}function _(e){return e===u["c"].UNITED_STATES||e===u["c"].CANADA}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};switch(e){case u["d"].POSTAL_CODE_IS_REQUIRED:case u["d"].POSTAL_CODE_INVALID_CHARACTERS:case u["d"].POSTAL_CODE_INVALID_API_ERROR:a=O(e,t,r);break;default:}return a}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments[2];var a=r[e]||{};if(t===u["c"].UNITED_STATES)switch(e){case u["d"].POSTAL_CODE_IS_REQUIRED:a=r[u["d"].ZIP_CODE_IS_REQUIRED];break;case u["d"].POSTAL_CODE_INVALID_CHARACTERS:a=r[u["d"].ZIP_CODE_INVALID_CHARACTERS];break;case u["d"].POSTAL_CODE_INVALID_API_ERROR:a=r[u["d"].ZIP_CODE_INVALID_API_ERROR];break;default:}return a}function k(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=y(u["d"].STREET_INVALID_CHARACTERS,"",t)):r=y(u["d"].STREET_IS_REQUIRED,"",t);return r}function j(e,t){var r=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(r=y(u["d"].CITY_INVALID_CHARACTERS,"",t)):r=y(u["d"].CITY_IS_REQUIRED,"",t);return r}function C(e,t){var r=null;e||(r=y(u["d"].COUNTRY_IS_REQUIRED,"",t));return r}function E(e,t,r){var a=null;_(e)?t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)?e!==u["c"].UNITED_STATES||u["a"].US_POSTAL_CODE_FORMAT_REGEX.test(t)?e!==u["c"].CANADA||u["a"].CANADA_POSTAL_CODE_FORMAT_REGEX.test(t)||(a=y(u["d"].CANADA_POSTAL_CODE_INVALID_FORMAT,e,r)):a=y(u["d"].US_ZIP_CODE_INVALID_FORMAT,e,r):a=y(u["d"].POSTAL_CODE_INVALID_CHARACTERS,e,r):a=y(u["d"].POSTAL_CODE_IS_REQUIRED,e,r):t&&!u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)&&(a=y(u["d"].POSTAL_CODE_INVALID_CHARACTERS,e,r));return a}function S(e,t,r){var a=null;_(e)&&!t?a=y(u["d"].REGION_IS_REQUIRED,"",r):t&&!u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(t)&&(a=y(u["d"].REGION_INVALID_CHARACTERS,"",r));return a}function w(e,t,r,a,n){var i=null;r&&I(e,a)&&(t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)||(i=y(u["d"].VAT_ID_INVALID_CHARACTERS,"",n)):i=y(u["d"].VAT_ID_IS_REQUIRED,"",n));return i}function I(e,t){return Object(o["has"])(t,e)}function T(e,t){var r=null;e&&(11!==e.replace(/\s/g,"").length?r=y(u["d"].ABN_ID_INVALID_LENGTH,"",t):u["a"].ABN_ID_REGEX.test(e)||(r=y(u["d"].ABN_ID_INVALID_CHARACTERS,"",t)));return r}function N(e,t){return Object(o["has"])(t,e)}function R(){var e;var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return{};return e={},n()(e,u["d"].STREET_IS_REQUIRED,{errorText:d.t("Please fill in a street address.")}),n()(e,u["d"].CITY_IS_REQUIRED,{errorText:d.t("Please fill in a city name.")}),n()(e,u["d"].POSTAL_CODE_IS_REQUIRED,{errorText:d.t("Please fill in a postal code.")}),n()(e,u["d"].ZIP_CODE_IS_REQUIRED,{errorText:d.t("Please fill in a zip code.")}),n()(e,u["d"].REGION_IS_REQUIRED,{errorText:d.t("Please fill in a state.")}),n()(e,u["d"].COUNTRY_IS_REQUIRED,{errorText:d.t("Please fill in a country.")}),n()(e,u["d"].VAT_ID_IS_REQUIRED,{errorText:d.t("Please fill in a VAT ID.")}),n()(e,u["d"].STREET_INVALID_CHARACTERS,{errorText:d.t("Your street address can\u2019t contain special characters.")}),n()(e,u["d"].CITY_INVALID_CHARACTERS,{errorText:d.t("Your city name can\u2019t contain special characters.")}),n()(e,u["d"].REGION_INVALID_CHARACTERS,{errorText:d.t("Your state can\u2019t contain special characters.")}),n()(e,u["d"].POSTAL_CODE_INVALID_CHARACTERS,{errorText:d.t("Your postal code can\u2019t contain special characters.")}),n()(e,u["d"].ZIP_CODE_INVALID_CHARACTERS,{errorText:d.t("Your zip code can\u2019t contain special characters.")}),n()(e,u["d"].VAT_ID_INVALID_CHARACTERS,{errorText:d.t("Your VAT ID can\u2019t contain special characters.")}),n()(e,u["d"].ABN_ID_INVALID_CHARACTERS,{errorText:d.t("Your ABN ID can\u2019t contain special characters.")}),n()(e,u["d"].US_ZIP_CODE_INVALID_FORMAT,{errorText:d.t("Please use a 5- or 9-digit zip code.")}),n()(e,u["d"].CANADA_POSTAL_CODE_INVALID_FORMAT,{errorText:d.t("Please use a valid Canadian postal code.")}),n()(e,u["d"].POSTAL_CODE_INVALID_API_ERROR,{errorText:d.t('There\u2019s a problem with your postal code. <a href="https://my.slack.com/help/requests/new">Contact us.</a>')}),n()(e,u["d"].ZIP_CODE_INVALID_API_ERROR,{errorText:d.t('There\u2019s a problem with your zip code. <a href="https://my.slack.com/help/requests/new">Contact us.</a>')}),n()(e,u["d"].VAT_ID_INVALID_API_ERROR,{errorText:d.t('We could not verify your VAT ID. <a href="https://my.slack.com/help/requests/new">Contact us.</a>')}),n()(e,u["d"].VAT_ID_INPUT_ERROR,{errorText:d.t("VAT ID is invalid.")}),n()(e,u["d"].VAT_ID_INVALID_FORMAT,{errorText:d.t("Please use a valid VAT ID.")}),n()(e,u["d"].ABN_ID_INVALID_LENGTH,{errorText:d.t("ABN ID must have 11 digits.")}),n()(e,u["d"].DEFAULT_ERROR,{errorText:d.t("Error with form input.")}),e}},21859:function(e,t,r){"use strict";r.d(t,"a",function(){return c});r.d(t,"b",function(){return l});var a=r(1);var n=r.n(a);var i=r(21700);var s=r(21704);var o=r(1063);var c=Object(s["a"])("fetch a list of app actions",function(e){return e(Object(i["a"])({method:"apps.actions.list",args:{}})).then(function(e){return Object(a["get"])(e,"app_actions",{})})});var l=Object(s["a"])("run an app action",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.type,n=r.actionId,s=r.appId,c=r.channelId,l=r.messageTs;return e(Object(i["a"])({method:"apps.actions.run",args:{action_id:n,type:a,app_id:s,channel:c,message_ts:l,client_token:o["a"].generateAndEnqueue()}}))})},2186:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21698);var _=r(3184);var y=r(37);var O=r(5);var k=r(603);var j=r(604);var C=r(1057);var E=r(298);var S=r(400);var w=r(104);var I=r(388);var T=r(20148);var N=r.n(T);var R=new O["b"]("channel_options");var A={maxLength:v.a.number,purpose:v.a.oneOfType([v.a.string,v.a.object]),purposeCreator:v.a.object,onChannelPurposeTextareaChange:v.a.func.isRequired,onChannelPurposeValidationChange:v.a.func};var M={maxLength:250,purpose:"",purposeCreator:null,numCharsOverLimit:0,onChannelPurposeValidationChange:null};var P="react_channel_purpose_input";function x(e){Object(E["a"])({e:e,input_to_fill:"#"+P,offset_y:-8})}var D=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setTextyRef=r.setTextyRef.bind(r);r.onTextChange=r.onTextChange.bind(r);r.texty=null;r.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=r.texty.container.offsetWidth+"px";Object(C["a"])(t,r.texty.container)},completers:["channels","emoji","members"]}};r.state={numCharsOverLimit:r.countCharsOverLimit()};return r}s()(t,[{key:"onTextChange",value:function e(){var t=this.props,r=t.onChannelPurposeValidationChange,a=t.onChannelPurposeTextareaChange;var n=this.state.numCharsOverLimit;var i=this.countCharsOverLimit();if(i>0||n>0){this.setState(function(){return{numCharsOverLimit:i}});r&&r(i>0)}i<1&&a({target:{value:this.getEditText()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props.purpose;var r=Object(m["isString"])(t)?t:t.value;if(this.texty)return Object(I["i"])(this.texty.value(),{enableBroadcastKeywords:false});if(Object(m["isString"])(r))return r;return""}},{key:"countCharsOverLimit",value:function e(){var t=this.getEditText();var r=this.props.maxLength;if(!r||!t.length)return 0;return Math.max(0,t.length-r)}},{key:"renderTextarea",value:function e(){var t=this.props,r=t.maxLength,a=t.purpose;var n=this.state.numCharsOverLimit;var i=n+r;var s=Object(w["h"])(Object(m["isString"])(a)?a:a.value);var o=R.t("Channel purpose");var c=void 0;n>0&&(c=R.t("Text is too long! ({totalCharCount}/{maxLength} characters)",{totalCharCount:i,maxLength:r}));return h.a.createElement("div",{className:"p-channel_options--channel_purpose"},h.a.createElement(j["g"],{id:P,ref:this.setTextyRef,className:"c-input_textarea c-channel_purpose_input",modules:this.textyModules,ariaLabel:o,initialText:s,onTextChange:this.onTextChange,focusOnMount:true,useLegacyCreate:true,enableBroadcastKeywords:false}),h.a.createElement(_["c"],{onClick:x,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},h.a.createElement(y["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),h.a.createElement(y["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),h.a.createElement(y["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})),c&&h.a.createElement("p",{className:"candy_red no_bottom_margin"},c))}},{key:"render",value:function e(){var t=this.props,r=t.purpose,a=t.purposeCreator;var n=R.rt('Purpose <span className="normal">(optional)</span>',{fallbackHash:"a587fb8aa58d02ba9fd0f63b6a2fee69d374d87f"},function(e){var t=e.text,r=e.key;return h.a.createElement("span",{key:r,className:"normal"},t)});var i=void 0;if(r.last_set){var s=Object(S["a"])(r.last_set);a&&s&&(i=R.rt("The purpose was last set by <span>{member}</span> {date}.",{member:a,date:s},function(e){var t=e.key,r=e.tag,n=e.text;if("span"===r)return h.a.createElement(k["a"],{key:t,id:a.id});return h.a.createElement("span",{key:t},n)}))}return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("label",{htmlFor:"purpose_input",className:"block"},n),this.renderTextarea(),h.a.createElement("p",{className:"mini small_top_margin no_bottom_margin"},R.t("Give your channel a purpose that describes what it will be used for.")),i&&h.a.createElement("p",{className:"mini"},i))}}]);return t}(p["PureComponent"]);D.displayName="ChannelPurpose";D.defaultProps=M;function F(e,t){var r=t.purpose;var a=Object(m["get"])(r,"creator");return{purposeCreator:a?Object(g["getMemberById"])(e,a):null}}t["a"]=Object(f["connect"])(F)(D)},21860:function(e,t,r){"use strict";var a=r(21922);var n=r(21799);var i=r(21765);r.d(t,"a",function(){return a["a"]});t["b"]=n["a"]},21861:function(e,t,r){"use strict";var a=r(21924);t["a"]=a["a"]},21862:function(e,t,r){"use strict";var a=r(22138);t["a"]=a["a"]},21863:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getMaxTimestamp",function(){return p});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21696);var u=r(21702);var d={maxTs:"0"};var v=Object(l["c"])(n()({},u["addMessages"].getType(),function(e,t){if(!t||!t.length||!c.a.isArray(t))return e;var r=c.a.maxBy(t,"ts");if(!r)return e;var a=r.ts>e.maxTs?r.ts:e.maxTs;return s()({},e,{maxTs:a})}),d);t["default"]=v;var p=Object(l["d"])(function(e){return e&&e.notifications&&e.notifications.maxTs})},21864:function(e,t,r){"use strict";r.d(t,"a",function(){return a});t["b"]=n;var a;(function(e){e[e["NONE"]=0]="NONE";e[e["NO_MENTIONS"]=1]="NO_MENTIONS";e[e["BAD_ARGUMENTS"]=2]="BAD_ARGUMENTS";e[e["NO_DISPLAY_OVERRIDE"]=3]="NO_DISPLAY_OVERRIDE";e[e["NO_NOTIFICATIONS_OVERRIDE"]=4]="NO_NOTIFICATIONS_OVERRIDE";e[e["REPLY_MESSAGE"]=5]="REPLY_MESSAGE";e[e["NOT_REPLY_MESSAGE"]=6]="NOT_REPLY_MESSAGE";e[e["JOIN_LEAVE_MESSAGE"]=7]="JOIN_LEAVE_MESSAGE";e[e["BOT_MESSAGE"]=8]="BOT_MESSAGE";e[e["APP_MESSAGE"]=9]="APP_MESSAGE";e[e["FROM_CURRENT_USER"]=10]="FROM_CURRENT_USER";e[e["MUTED_CHANNEL"]=11]="MUTED_CHANNEL";e[e["USER_IN_DND"]=12]="USER_IN_DND";e[e["SILENT_PREFERENCE"]=13]="SILENT_PREFERENCE";e[e["PERMISSION_DENIED"]=14]="PERMISSION_DENIED";e[e["ACTIVE_VIEW_VISIBLE"]=15]="ACTIVE_VIEW_VISIBLE";e[e["LESS_RELEVANT_ORG_TEAM"]=16]="LESS_RELEVANT_ORG_TEAM";e[e["OVERSIZED_MENTION"]=17]="OVERSIZED_MENTION";e[e["REDUNDANT_SOCKET_EVENT"]=18]="REDUNDANT_SOCKET_EVENT";e[e["ALREADY_SEEN_REPLY"]=19]="ALREADY_SEEN_REPLY";e[e["ALREADY_SHOWN"]=20]="ALREADY_SHOWN"})(a||(a={}));function n(e,t,r){var n=t||"missing model";switch(e){case a.BAD_ARGUMENTS:return"Missing message or model object";case a.NO_DISPLAY_OVERRIDE:return"'no_display' was set on the notification";case a.NO_NOTIFICATIONS_OVERRIDE:return"'no_notifications' was set on the notification";case a.JOIN_LEAVE_MESSAGE:return"The message was a join or leave message";case a.BOT_MESSAGE:return"The message was a bot message without a mention";case a.APP_MESSAGE:return"The message was an app message without a mention";case a.FROM_CURRENT_USER:return"The message is from the current user";case a.MUTED_CHANNEL:return"Channel ("+n+") is muted";case a.USER_IN_DND:return"The user is in Do Not Disturb";case a.SILENT_PREFERENCE:return"The user has their notification preference set to 'nothing'";case a.PERMISSION_DENIED:return"The user did not grant permission to show notifications";case a.ACTIVE_VIEW_VISIBLE:return"The window is focused and the notifying channel ("+n+") is visible";case a.LESS_RELEVANT_ORG_TEAM:return"Shared channel ("+n+") is in a less recently selected org team";case a.OVERSIZED_MENTION:return"Over-sized channel mention in channel ("+n+")";case a.REDUNDANT_SOCKET_EVENT:return"Message ("+r+") is greater than latest in store, treating as duplicate";case a.ALREADY_SEEN_REPLY:return"Message ("+r+") is less than or equal to the 'last_read' in the thread";case a.ALREADY_SHOWN:return"Message ("+r+") has already shown a notification";default:return null}}},21865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"toggleFolderCollapse",function(){return y});r.d(t,"setIsRenaming",function(){return O});r.d(t,"renameFolder",function(){return k});r.d(t,"createFolder",function(){return j});r.d(t,"setFolderData",function(){return C});r.d(t,"dragFolderOrChannel",function(){return E});r.d(t,"initializeFolderData",function(){return S});r.d(t,"saveFolderData",function(){return w});r.d(t,"getFolders",function(){return N});r.d(t,"getFolderByName",function(){return R});var a=r(20615);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(21696);var h=r(54);var f=r(21769);var m;var b=false;var g="folder_data";var _={list:[],currentlyRenamingFolder:null};var y=Object(p["a"])("Toggle between collapse and showing channels");y.propTypes={name:v.a.string.isRequired};var O=Object(p["a"])("Set a folder's renaming state to true");O.propTypes={name:v.a.string.isRequired};var k=Object(p["a"])("Rename a folder");k.propTypes={oldName:v.a.string.isRequired,newName:v.a.string.isRequired};var j=Object(p["a"])("Create a new folder");j.propTypes=null;var C=Object(p["a"])("Set all folder data (from storage)");C.propTypes=v.a.array.isRequired;var E=Object(p["a"])("Drag a folder or channel onto a folder or channel");E.propTypes={src:v.a.object.isRequired,dest:v.a.object};var S=Object(p["e"])("Set Folder Data From LocalStorage",function(e,t){var r=Object(h["getUserPref"])(t(),g);if(!r){b=true;r=localStorage.getItem(g)}var a=void 0;try{a=JSON.parse(r)}catch(e){a=null}a&&0!==a.length||(a=_.list);e(C(a))});S.propTypes=null;var w=Object(p["e"])("Set Folder Data From LocalStorage",function(e,t){var r=t().channelSidebarFolders.list;var a=JSON.stringify(r);b?localStorage.setItem(g,a):e(Object(f["c"])({pref:g,value:a}))});w.propTypes=null;var I=function e(t,r){var a=true;var n=1;var i=void 0;var s=function e(t){return t.name===i};while(a){i=1===n?r:r+" ("+n+")";a=t.list.find(s);n+=1}return i};var T=Object(p["c"])((m={},n()(m,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c()({},e,{list:t})}),n()(m,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return c()({},e,{list:e.list.map(function(e){return e.name===r?c()({},e,{isCollapsed:!e.isCollapsed}):e}),currentlyRenamingFolder:null})}),n()(m,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.oldName,a=t.newName;return c()({},e,{list:a?e.list.map(function(t){return t.name===r&&r!==a?c()({},t,{name:I(e,a)}):t}):e.list.filter(function(e){return e.name!==r}),currentlyRenamingFolder:null})}),n()(m,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name;return c()({},e,{currentlyRenamingFolder:r})}),n()(m,j,function(e){return c()({},e,{currentlyRenamingFolder:I(e,"New Collection"),list:[{name:I(e,"New Collection"),isCollapsed:true,channelIds:[]}].concat(s()(e.list))})}),n()(m,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,a=t.dest;if("channel"===r.type){if(a&&"channel"===a.type&&r.id===a.id)return e;var n=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,r.id)});var i=-1===n?-1:e.list[n].channelIds.indexOf(r.id);var o=-1;var l=-1;if(a&&"folder"===a.type){o=u.a.findIndex(e.list,{name:a.id});l=0}else if(a&&"channel"===a.type){o=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});l=-1===o?-1:e.list[o].channelIds.indexOf(a.id)}if(n===o&&i===l)return e;var d=c()({},e,{list:e.list.map(function(e){return c()({},e,{channelIds:e.channelIds.filter(function(e){return e!==r.id})})})});if(-1===o)return d;return c()({},d,{list:d.list.map(function(e,t){return t!==o?e:c()({},e,{isCollapsed:0!==e.channelIds.length&&e.isCollapsed,channelIds:[].concat(s()(e.channelIds.slice(0,l)),[r.id],s()(e.channelIds.slice(l)))})})})}if("folder"===r.type&&a){var v=void 0;v="folder"===a.type?u.a.findIndex(e.list,{name:a.id}):u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});if(-1===v)return e;var p=u.a.findIndex(e.list,{name:r.id});if(p===v)return e;var h=c()({},e,{list:[].concat(s()(e.list.slice(0,p)),s()(e.list.slice(p+1)))});h.list=[].concat(s()(h.list.slice(0,v)),[e.list[p]],s()(h.list.slice(v)));return h}return e}),m),_);t["default"]=T;var N=Object(p["d"])(function(e){return e&&e.channelSidebarFolders&&e.channelSidebarFolders.list});var R=Object(p["d"])(function(e,t){return e&&e.channelSidebarFolders&&c()({},u.a.find(e.channelSidebarFolders.list,{name:t}),{isRenaming:e.channelSidebarFolders.currentlyRenamingFolder===t})})},21866:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setRealtimePriorityForChannels",function(){return p});r.d(t,"fetchChannelRealtimePriority",function(){return h});r.d(t,"getChannelRealtimePriorities",function(){return m});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v=r(1036);var p=Object(d["a"])("Set realtime priority for some channels.");p.propTypes={realtimePriorityData:c.a.object,keyedChannels:c.a.object};var h=Object(d["e"])("fetch realtime priority for a channel",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelIds,n=r.time;var i=t(),s=i.sliRealtimePriority;var o=u.a.reject(a,function(e){return e.startsWith("D")||e.startsWith("G")||e.startsWith("V")||s[e]&&s[e].lastLoad&&s[e].lastLoad>n-3e5});if(0===o.length)return;var c=u.a.reduce(o,function(e,t){e[t]={lastLoad:n};return e},{});e(p({realtimePriorityData:c}));e(Object(v["h"])(o.join())).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channels;var a=u.a.keyBy(r,"id");e(p({keyedChannels:a}))})});h.propTypes={channelIds:c.a.arrayOf(c.a.string).isRequired,time:c.a.number.isRequired};var f=Object(d["c"])(n()({},p,function(e,t){return u.a.reduce(t,function(t,r){u.a.forEach(r,function(r,a){t[a]=s()({},e[a],r)});return t},s()({},e))}),{});t["default"]=f;var m=Object(d["d"])(function(e){return e&&e.sliRealtimePriority?e.sliRealtimePriority:{}})},2187:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(5);var b=r(12);var g=r(907);var _=r(3271);var y=r(21703);var O=r(21802);var k=r(196);var j=new m["b"]("channel_options");var C={channel:v.a.object.isRequired,teamName:v.a.string.isRequired,featurePubToPrvEscClient:v.a.bool.isRequired};var E={};var S=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"shouldShowShareWarning",value:function e(){var t=this.props,r=t.channel,a=t.featurePubToPrvEscClient;if(!r)return false;if(!a)return false;return Object(g["isSharedPublicOrPrivateChannel"])(r)}},{key:"renderShareWarning",value:function e(){var t=this.props,r=t.channel,a=t.teamName,n=t.featurePubToPrvEscClient;if(!r)return null;if(!n)return null;if(!this.shouldShowShareWarning())return null;return h.a.createElement("li",null,j.rt("This update will only appear in {teamName}.",{teamName:h.a.createElement("strong",null,a)}))}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.teamName,n=t.featurePubToPrvEscClient;if(n)return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement(O["a"],{type:"boxed",level:"warning",icon:"warning",align:"left",className:"margin_bottom_150"},j.t("This change can\u2019t be undone, so please proceed with care.")),h.a.createElement("p",{className:"small_bottom_margin"},h.a.createElement("strong",null,j.t("Things to note:"))),h.a.createElement("ul",null,this.renderShareWarning(),h.a.createElement("li",null,j.t("Channel history and members will not be affected by this change.")),h.a.createElement("li",null,j.rt("All files shared in this channel up until this point will remain publicly accessible to everyone in {teamName}.",{teamName:h.a.createElement("strong",null,a)}))));return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("p",{className:"top_margin"},j.rt("Converting <strong>{channel}</strong> to a private channel will preserve the history and membership.",{channel:Object(g["getDisplayName"])(r)},function(e){var t=e.key;return Object(k["a"])(t,r)})),h.a.createElement("p",{className:"small_bottom_margin"},h.a.createElement("strong",null,j.t("Two things you should know:"))),h.a.createElement("ul",null,h.a.createElement("li",null,j.t("This conversion is not reversible. It is a one-way street.")),h.a.createElement("li",null,j.t("Files that were previously shared in this channel will not become private. They will remain publicly accessible to others on your team."))))}}]);return t}(p["PureComponent"]);S.displayName="ConvertChannelToPrivate";S.defaultProps=E;function w(e,t){var r=t.channel;var a=Object(_["getCurrentTeam"])(e);return{channel:r,teamName:Object(y["getTeamDisplayName"])(a),featurePubToPrvEscClient:Object(b["isFeatureEnabled"])(e,"feature_pub_to_prv_esc_client")}}t["a"]=Object(f["connect"])(w)(S)},21870:function(e,t,r){"use strict";r.d(t,"a",function(){return u});t["c"]=d;t["b"]=b;var a=r(1);var n=r.n(a);var i=r(11);var s=r.n(i);var o=r(5);var c=r(21726);var l=new o["b"]("search_menu");var u="YYYY-MM-DD";function d(e,t,r){var a=c["j"].tokenListFromString(e,t);var n=a;n=v(e,n,r.from||[]);n=p(e,n,r.in||[]);n=h(e,n,r.before);n=f(e,n,r.after);n=m(e,n,r.fileType);var i=new c["i"](e,"",n);return i.toTextyString()}function v(e,t,r){var n=t;var i=[].concat(r);n=n.filter(function(e){if(e.type!==c["a"].FILTER_FROM)return true;var t=e.entityId;if(t&&Object(a["includes"])(i,t)){i=Object(a["without"])(i,t);return true}return false});n=n.concat(i.map(function(t){return new c["f"](1,e,t,null,c["h"].FROM)}));return n}function p(e,t,r){var n=t;var i=[].concat(r);n=n.filter(function(e){if(e.type!==c["a"].FILTER_IN)return true;var t=e.entityId;if(Object(a["includes"])(i,t)){i=Object(a["without"])(i,t);return true}return false});n=n.concat(i.map(function(t){return new c["e"](1,e,t,null)}));return n}function h(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_BEFORE)return true;if(e.dateString===r){a=true;return true}return false});r&&!a&&n.push(new c["c"](r,c["h"].BEFORE));return n}function f(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_AFTER)return true;if(e.dateString===r){a=true;return true}return false});r&&!a&&n.push(new c["c"](r,c["h"].AFTER));return n}function m(e,t,r){var a=false;var n=t.filter(function(e){if(e.type!==c["a"].FILTER_TYPE)return true;if(e.fileType===r){a=true;return true}return false});r&&!a&&n.push(new c["k"](r));return n}function b(e,t){var r=c["j"].tokenListFromString(e,t);var a={in:[],from:[],before:void 0,after:void 0,fileType:void 0};r.forEach(function(e){e.type===c["a"].FILTER_FROM?a.from.push(e.entityId):e.type===c["a"].FILTER_IN?a.in.push(e.entityId):e.type===c["a"].FILTER_BEFORE?a.before=g(e.dateString):e.type===c["a"].FILTER_AFTER?a.after=g(e.dateString):e.type===c["a"].FILTER_TYPE&&(a.fileType=e.fileType)});return a}function g(e){if(e.match(/^20[0-9][0-9]$/))return;if(e===l.t("today"))return s()().format(u);if(e===l.t("yesterday"))return s()().subtract(1,"days").format(u);var t=s()(e);if(t.isValid())return t.format(u);return}},21871:function(e,t,r){"use strict";t["b"]=g;t["a"]=_;var a=r(172);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(20615);var c=r.n(o);var l=r(189);var u=r.n(l);var d=r(3179);var v=r(1068);var p=r(49);var h=r(3270);var f=r(907);var m=r(21726);var b=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(t,r,n){var i,s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:i=[];t.replace(r,function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s=n.apply(void 0,[e].concat(r));i.push(s)});o.next=4;return Object(a["resolve"])(Promise.all(i));case 4:s=o.sent;return o.abrupt("return",t.replace(r,function(){return s.shift()}));case 6:case"end":return o.stop()}},e,this)}));return function t(r,a,n){return e.apply(this,arguments)}}();function g(e,t){var r=new RegExp("("+m["g"].in+"|in):(#[^\\s]+)","g");return b(t,r,function(t,r,a){var n=m["d"].getChannelByName(e,a)||m["d"].getFilterChannelObjectByName(e,a);if(n){if(Object(f["isIm"])(n)){var i=Object(f["getMemberIdFromIm"])(n);return Promise.resolve(r+":<@"+i+">")}return Promise.resolve(r+":<#"+n.id+">")}return Object(d["a"])(a,{limit:150,channels:{include_archived:false},members:{include_self:true,include_org:true,include_slackbot:true,include_deleted:true},mpims:true,groups:true,enterprise_channels:true,sort:{frecency:false}}).then(function(t){var n=Object(h["getTeamId"])(e);var i=Object(p["b"])(n);var o=a&&a.replace("#","");var l=t.find(function(e){return e.name===o});var d=Object(v["getEditableRequestChannelObjects"])(i)||{};Object(p["a"])(n,Object(v["setEditableRequestChannelObjects"])({channels:u()({},d,c()({},l.id,l))}));var f=Object(v["getEditableRequest"])(i).queryFilter;f.in=Array.from(new Set([].concat(s()(f.in),[l.id])));Object(p["a"])(n,Object(v["setEditableRequestQueryFilterOnly"])({queryFilter:f}));return r+":<#"+l.id+">"})})}function _(e,t){return t.replace(new RegExp("("+m["g"].in+"|in):(#[^\\s]+)","g"),function(t,r,a){var n=m["d"].getChannelByName(e,a);if(n)return r+":<#"+n.id+">";return t})}},21872:function(e,t,r){"use strict";t["a"]=i;t["b"]=s;var a=r(1068);var n=r(907);function i(e,t){return(Object(a["getEditableRequestChannelObjects"])(e)||{})[t]}function s(e,t){var r=Object(a["getEditableRequestChannelObjects"])(e)||{};return Object.values(r).filter(function(e){return Object(n["getDisplayName"])(e)===t.replace(/#/g,"")})[0]}},21873:function(e,t,r){"use strict";r.d(t,"c",function(){return E});r.d(t,"b",function(){return S});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(22449);var _=r(22450);var y=r(22451);var O=r(22453);var k={index:v.a.number.isRequired,suggestion:v.a.object.isRequired,isSelected:v.a.bool.isRequired,onSelected:v.a.func,onAccept:v.a.func,onDelete:v.a.func};var j={onAccept:f["noop"],onSelected:f["noop"],onDelete:f["noop"]};var C={index:v.a.number.isRequired,suggestion:v.a.object.isRequired,onDelete:v.a.func,isSelected:v.a.bool.isRequired,onMouseUp:v.a.func.isRequired,containerProps:v.a.shape({className:v.a.string.isRequired,"data-index":v.a.string.isRequired,"data-type":v.a.string.isRequired,"data-feature-vector":v.a.string.isRequired,onMouseEnter:v.a.func.isRequired,onMouseLeave:v.a.func.isRequired}).isRequired,ariaProps:v.a.shape({id:v.a.string.isRequired,role:v.a.string.isRequired,tabIndex:v.a.number.isRequired,"aria-selected":v.a.bool.isRequired}).isRequired};var E={onDelete:f["noop"]};var S=function e(t){return"c-search_autcomplete__suggestion_"+t};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["onMouseUp","onMouseEnter","onMouseLeave","onDelete"]);return r}s()(t,[{key:"onMouseUp",value:function e(t){if(0!==t.button||t.ctrlKey)return;this.props.onAccept()}},{key:"onMouseEnter",value:function e(){this.props.onSelected(this.props.index,true)}},{key:"onMouseLeave",value:function e(){this.props.onSelected(null,false)}},{key:"onDelete",value:function e(){this.props.onDelete(this.props.suggestion)}},{key:"componentTypeFromSuggestion",value:function e(t){if(t.is_type_query_completion)return y["a"];if(t.is_type_user)return O["a"];if(t.is_type_channel||t.is_type_mpim)return g["a"];if(t.is_type_file)return _["a"];return null}},{key:"render",value:function e(){var t=this.props.isSelected?"c-search_autocomplete__suggestion c-search_autocomplete__suggestion__highlighted":"c-search_autocomplete__suggestion";var r=S(this.props.index);return h.a.createElement(this.componentTypeFromSuggestion(this.props.suggestion),{index:this.props.index,suggestion:this.props.suggestion,onDelete:this.onDelete,isSelected:this.props.isSelected,onMouseUp:this.onMouseUp,containerProps:{className:t,"data-index":this.props.index,"data-type":this.props.suggestion.type,"data-feature-vector":this.props.suggestion.featureVector,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},ariaProps:{id:r,role:"option",tabIndex:-1,"aria-selected":this.props.isSelected}})}}]);return t}(p["PureComponent"]);w.displayName="Suggestion";w.defaultProps=j;var I=function e(){return{}};var T={};t["a"]=Object(b["connect"])(I,T)(w)},21874:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setActiveAppTab",function(){return d});r.d(t,"setNewUnreads",function(){return v});r.d(t,"getActiveAppTab",function(){return h});r.d(t,"getNewUnreads",function(){return f});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u;var d=Object(l["a"])("Notifies modern of the active tab for app/bot users");d.propTypes=c.a.oneOf(["messages","about"]);var v=Object(l["a"])("Set the number of new unread messages that came in while in the All Unreads view");v.propTypes=c.a.number;var p=Object(l["c"])((u={},n()(u,d.getType(),function(e,t){if(!t)return e;return s()({},e,{activeAppTab:t})}),n()(u,v.getType(),function(e,t){return s()({},e,{newUnreads:t})}),u),{activeAppTab:"messages"});t["default"]=p;var h=Object(l["d"])(function(e){return e&&e.globalNav&&e.globalNav.activeAppTab});var f=Object(l["d"])(function(e){return e&&e.globalNav&&e.globalNav.newUnreads})},21875:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e,t,r){var n=e*Object(a["random"])(t,r);return Math.ceil(e+n)}},21876:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"addInviter",function(){return p});r.d(t,"removeInviter",function(){return h});r.d(t,"getInviter",function(){return m});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v;var p=Object(d["a"])("Add an inviter for a channel");p.propTypes={channelId:c.a.string.isRequired,inviter:c.a.string.isRequired};var h=Object(d["a"])("Remove an inviter for a channel");h.propTypes=c.a.string.isRequired;var f=Object(d["c"])((v={},n()(v,p,function(e,t){var r=t.channelId,a=t.inviter;if(!r||!a)return e;return s()({},e,n()({},r,a))}),n()(v,h,function(e,t){if(!t||!e[t])return e;return u.a.omit(e,t)}),v),{});t["default"]=f;var m=Object(d["d"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.inviters&&e.channelsMeta.inviters[t]})},21877:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setUsersCounts",function(){return d});r.d(t,"setInitialUnreadCounts",function(){return v});r.d(t,"setInitialUnreadCountsForChannel",function(){return p});r.d(t,"getUsersCounts",function(){return f});r.d(t,"getInitialUnreadCountsByChannelId",function(){return m});r.d(t,"setInitialUnreadCountsFromChannels",function(){return b});r.d(t,"test",function(){return _});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u;var d=Object(l["a"])("Initialize the raw users counts");d.propTypes=c.a.shape({channels:c.a.array,groups:c.a.array,ims:c.a.array,mpims:c.a.array,threads:c.a.object});var v=Object(l["a"])("Initialize the initial unread counts");v.propTypes=c.a.object;var p=Object(l["a"])("Update the counts for a channel");p.propTypes=c.a.shape({channelId:c.a.string,unreadCnt:c.a.number,unreadHighlightCnt:c.a.number});var h=Object(l["c"])((u={},n()(u,d,function(e,t){return s()({},e,{counts:t})}),n()(u,v,function(e,t){return s()({},e,{initialUnreads:t})}),n()(u,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channelId,a=t.unreadCnt,i=t.unreadHighlightCnt;return s()({},e,{initialUnreads:s()({},e.initialUnreads,n()({},r,{unreadCnt:a,unreadHighlightCnt:i}))})}),u),{});t["default"]=h;var f=Object(l["d"])(function(e){return e&&e.usersCounts&&e.usersCounts.counts});var m=Object(l["d"])(function(e,t){return e&&e.usersCounts&&e.usersCounts.initialUnreads&&e.usersCounts.initialUnreads[t]});var b=Object(l["e"])("Set initialUnreadCounts from an array of channels",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channels;var n=g(a);e(v(n))});b.propTypes={channels:c.a.arrayOf(c.a.shape({id:c.a.string.isRequired,unread_cnt:c.a.number.isRequired,unread_highlight_cnt:c.a.number}))};function g(e){var t={};e.forEach(function(e){t[e.id]={unreadCnt:e.unread_cnt||0,unreadHighlightCnt:e.unread_highlight_cnt||0}});return t}var _={processChannelDataIntoUnreadCounts:g}},21878:function(e,t,r){"use strict";t["c"]=c;r.d(t,"b",function(){return d});r.d(t,"d",function(){return v});r.d(t,"h",function(){return p});r.d(t,"e",function(){return h});r.d(t,"g",function(){return f});r.d(t,"j",function(){return m});r.d(t,"f",function(){return b});r.d(t,"a",function(){return g});r.d(t,"k",function(){return _});r.d(t,"l",function(){return y});r.d(t,"i",function(){return O});r.d(t,"n",function(){return k});r.d(t,"o",function(){return j});r.d(t,"m",function(){return C});var a=r(1);var n=r.n(a);var i=r(21700);var s=r(21704);var o=r(21735);function c(e){var t={count:100,include_bots:0,exclude_slackbot:true,include_deleted:0};e.cursorMark&&(t.cursor_mark=e.cursorMark);e.sortDir&&(t.sort_dir=e.sortDir);e.sortBy&&(t.sort=e.sortBy);"created"===t.sort&&(t.sort="created_dt");Object(a["get"])(e,"filter.billingStatus.deactivated")&&(t.include_deleted=1);var r=l(e.filter,e.searchQuery);t.query=JSON.stringify(r);return Object(i["c"])("users.admin.fetchTeamUsers",t).then(function(e){return{sortBy:e.args.sort,sortDir:e.args.sort_dir,members:e.data.items,cursorMark:e.data.next_cursor_mark,numTotalResults:e.data.num_found}}).catch(function(e){throw e})}function l(e,t){var r={type:"is",value:"user"};var a=u(e);if(a||t){r={type:"and",clauses:[{type:"is",value:"user"}]};a&&r.clauses.push(a);t&&r.clauses.push({type:"fuzzy_with_email",value:t})}return r}function u(e){if(!e)return null;var t={type:"and",clauses:[]};var r=!Object(a["findKey"])(e.accountType,function(e){return!e});if(!r){var n={type:"or",clauses:[]};if(e.accountType.owner){n.clauses.push({type:"level",value:"owner"});n.clauses.push({type:"level",value:"primary_owner"})}e.accountType.admin&&n.clauses.push({type:"level",value:"admin"});e.accountType.regular&&n.clauses.push({type:"level",value:"regular"});if(e.accountType.guest){n.clauses.push({type:"level",value:"restricted"});n.clauses.push({type:"level",value:"ultra_restricted"})}t.clauses.push(n)}var i=e.billingStatus.active&&e.billingStatus.inactive&&!e.billingStatus.deactivated;if(!i){var s={type:"or",clauses:[]};e.billingStatus.active&&s.clauses.push({type:"inactive",value:false});e.billingStatus.inactive&&s.clauses.push({type:"inactive",value:true});e.billingStatus.deactivated&&s.clauses.push({type:"deleted",value:true});t.clauses.push(s)}var o=!Object(a["findKey"])(e.authentication,function(e){return!e});if(!o){var c={type:"or",clauses:[]};e.authentication.noAuth&&c.clauses.push({type:"and",clauses:[{type:"two_factor_enabled",value:false},{type:"sso_active",value:false}]});e.authentication.twoFactor&&c.clauses.push({type:"two_factor_enabled",value:true});e.authentication.sso&&c.clauses.push({type:"sso_active",value:true});t.clauses.push(c)}if(!t.clauses.length)return null;return t}var d=Object(s["a"])("Fetch the user counts for this team",function(e){return e(Object(i["a"])({method:"team.counts"})).then(function(e){return e.users}).catch(function(e){throw e})});var v=Object(s["a"])("Make a member an admin",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.setAdmin",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var p=Object(s["a"])("Make a user a regular member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.setRegular",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var h=Object(s["a"])("Make a user a multi-channel guest",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;return e(Object(i["a"])({method:"users.admin.setRestricted",args:{channel:a,user:n}})).then(function(e){return e}).catch(function(e){throw e})});var f=Object(s["a"])("Make a user a single-channel guest",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;return e(Object(i["a"])({method:"users.admin.setUltraRestricted",args:{channel:a,user:n}})).then(function(e){return e}).catch(function(e){throw e})});var m=Object(s["a"])("Removes the owner role from a member and applies their previous roles",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.removeOwner",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var b=Object(s["a"])("Make a member an owner",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.setOwner",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var g=Object(s["a"])("Disables two-factor verification for a given member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.disable2FA",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var _=Object(s["a"])("Sends the SSO binding email to a target member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.sendSSOBind",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var y=Object(s["a"])("Set the expiration for a guest",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.expirationTs;return e(Object(i["a"])({method:"users.admin.setExpiration",args:{user:a,expiration_ts:n}})).then(function(e){return e}).catch(function(e){throw e})});var O=Object(s["a"])("Set the expiration for a guest",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.removeExpiration",args:{user:a}})).then(function(e){return e}).catch(function(e){throw e})});var k=Object(s["a"])("Deactivates a member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId;return e(Object(i["a"])({method:"users.admin.setInactive",args:{user:a}})).then(function(){var t=true;e(Object(o["updateMemberDeleted"])({memberId:a,isDeleted:t}))}).catch(function(e){throw e})});var j=Object(s["a"])("Update the profile info for a member",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.profile;return e(Object(i["a"])({method:"users.profile.set",args:{user:a,profile:JSON.stringify(n)}})).then(function(e){return e}).catch(function(e){throw e})});var C=Object(s["a"])("Update the channel for a Single-Channel Guest via API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.memberId,n=r.channelId;return e(Object(i["a"])({method:"users.admin.changeURAChannel",args:{user:a,channel:n}})).then(function(e){return e})})},21879:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"MEMBER_ACTION_MAP",function(){return s});t["canActorActivateUser"]=o;t["canActorActivateUserAsGuest"]=c;t["canActorNotReactivateUserAsGuest"]=l;t["canActorDeactivateUser"]=u;t["canActorNotDeactivateUser"]=d;t["canActorNotConvertOrDeactivateUser"]=v;t["canActorDemoteAdmin"]=p;t["canActorDemoteOwner"]=h;t["canActorPromoteUserToMember"]=f;t["canActorPromoteUserToAdmin"]=m;t["canActorPromoteUserToOwner"]=b;t["canActorConvertUserToGuest"]=g;t["canActorNotConvertUserRole"]=_;t["canActorPromoteUserToMultiChannelGuest"]=y;t["canActorDemoteUserToSingleChannelGuest"]=O;t["canActorTransferOwnership"]=k;t["canActorActivateBot"]=j;t["canActorConfigureBot"]=C;t["canActorDisable2faForUser"]=E;t["canActorSendSso"]=S;t["canActorUpdateExpirationTs"]=w;t["canActorEditProfile"]=I;var a=r(49);var n=r(3203);var i=r(21703);var s={activate:o,activate_as_guest:c,deactivate:u,demote_admin:p,demote_owner:h,promote_to_member:f,promote_to_admin:m,promote_to_owner:b,promote_to_mc_guest:y,demote_to_sc_guest:O,transfer_ownership:k,activate_bot:j,configure_bot:C,disable_2fa:E,send_sso:S,update_expiration_ts:w,cant_deactivate:d,cant_convert_member_role:_,cant_convert_or_deactivate:v,cant_reactivate_as_guest:l,convert_to_guest:g,edit_member_profile:I};function o(e,t,r){return!Object(n["B"])(r)&&Object(n["D"])(r)&&!Object(n["J"])(r)&&Object(n["x"])(t)&&(!Object(i["isPaidTeam"])(e)||Object(i["isPaidTeam"])(e)&&!Object(n["K"])(r))&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&!Object(n["K"])(r))}function c(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&Object(n["D"])(r)&&!Object(n["J"])(r)&&!Object(n["Q"])(r)&&Object(i["isPaidTeam"])(e)&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(n["K"])(r)||Object(i["isEnterpriseTeam"])(e)&&Object(n["E"])(r))}function l(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&Object(n["D"])(r)&&!Object(n["Q"])(r)&&!Object(n["K"])(r)&&Object(i["isPaidTeam"])(e)&&Object(i["isEnterpriseTeam"])(e)&&!Object(n["E"])(r)}function u(e,t,r){var i=Object(a["b"])(e.id);return!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&!Object(n["u"])(i,r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}function d(e,t,r){var s=Object(a["b"])(e.id);return Object(n["u"])(s,r)&&Object(i["isEnterpriseTeam"])(e)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&Object(n["O"])(r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}function v(e,t,r){var s=Object(a["b"])(e.id);return Object(n["u"])(s,r)&&Object(i["isEnterpriseTeam"])(e)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&!Object(n["O"])(r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}function p(e,t,r){return!Object(n["B"])(r)&&Object(n["x"])(r)&&!Object(n["P"])(r)&&!Object(n["D"])(r)&&Object(n["P"])(t)}function h(e,t,r){return!Object(n["B"])(r)&&Object(n["P"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&Object(n["Q"])(t)}function f(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&Object(n["K"])(r)&&!Object(n["D"])(r)&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(n["O"])(r))&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(i["canOrgUserManageGuests"])(e,t))}function m(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["x"])(r)&&!Object(n["K"])(r)}function b(e,t,r){return!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["P"])(r)&&!Object(n["K"])(r)&&Object(n["P"])(t)}function g(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["K"])(r)&&!Object(n["x"])(r)&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(n["O"])(r))&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(i["canOrgUserManageGuests"])(e,t))}function _(e,t,r){var s=Object(a["b"])(e.id);return Object(n["x"])(t)&&!Object(n["B"])(r)&&!Object(n["u"])(s,r)&&!Object(n["D"])(r)&&Object(i["isPaidTeam"])(e)&&Object(i["isEnterpriseTeam"])(e)&&!Object(n["O"])(r)}function y(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&Object(n["W"])(r)&&Object(i["isPaidTeam"])(e)&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(n["O"])(r))}function O(e,t,r){return Object(n["x"])(t)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["W"])(r)&&Object(n["R"])(r)&&Object(i["isPaidTeam"])(e)&&(!Object(i["isEnterpriseTeam"])(e)||Object(i["isEnterpriseTeam"])(e)&&Object(n["O"])(r))}function k(e,t,r){var s=Object(a["b"])(e.id);return Object(n["Q"])(t)&&Object(n["Q"])(r)&&Object(i["hasOtherActiveMembers"])(s)}function j(e,t,r){return Object(n["x"])(t)&&Object(n["B"])(r)&&Object(n["D"])(r)}function C(e,t,r){return Object(n["x"])(t)&&Object(n["B"])(r)&&Object(n["C"])(r)}function E(e,t,r){return!Object(n["B"])(r)&&Object(n["V"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}function S(e,t,r){return Object(i["isSsoEnabled"])(e)&&!Object(i["isEnterpriseTeam"])(e)&&!Object(n["B"])(r)&&!Object(n["D"])(r)&&!Object(n["Q"])(r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}function w(e,t,r){return Object(n["x"])(t)&&Object(n["K"])(r)&&!Object(n["B"])(r)&&!Object(n["D"])(r)}function I(e,t,r){if(r.id===t.id)return true;return Object(n["x"])(t)&&Object(i["isPaidTeam"])(e)&&!Object(n["J"])(r)&&!Object(n["D"])(r)&&!Object(n["B"])(r)&&!Object(n["Q"])(r)&&(Object(n["Q"])(t)||Object(n["P"])(t)&&!Object(n["P"])(r)||Object(n["x"])(t)&&!Object(n["x"])(r))}},2188:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(3203);var g=r(21703);var _=r(5);var y=r(21802);var O=r(69);var k=r(195);var j=r(1074);var C=r(1075);var E=r(20076);var S=r.n(E);var w=r(20075);var I=r.n(w);var T=r(3054);var N=r(20150);var R=r.n(N);var A=new _["b"]("channel_options");var M={member:v.a.object.isRequired,team:v.a.object.isRequired,onDurationChange:v.a.func,onDurationUnitChange:v.a.func,onTypeChange:v.a.func,prefsLoaded:v.a.bool,retentionDuration:v.a.number,retentionDurationUnit:v.a.number,retentionType:v.a.number,teamRetentionDuration:v.a.number,teamRetentionType:v.a.number,durationInputRef:v.a.func};var P={onDurationChange:f["noop"],onDurationUnitChange:f["noop"],onTypeChange:f["noop"],prefsLoaded:false,retentionDuration:0,retentionDurationUnit:0,retentionType:0,teamRetentionDuration:0,teamRetentionType:0,durationInputRef:f["noop"]};var x=0;var D=1;var F=1;var L=0;var B=2;var U=3;var q=0;var H=47;var W=57;var G=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.durationChange=r.durationChange.bind(r);r.durationUnitChange=r.durationUnitChange.bind(r);r.handleKeyPress=r.handleKeyPress.bind(r);return r}s()(t,[{key:"durationChange",value:function e(t){var r=this;t.persist();Object(f["debounce"])(function(){var e=Math.round(parseFloat(t.target.value,10));r.props.onDurationChange(e)},500)()}},{key:"durationUnitChange",value:function e(t){this.props.onDurationUnitChange(parseInt(t.target.value,10))}},{key:"handleKeyPress",value:function e(t){(t.charCode<H||t.charCode>W)&&t.preventDefault()}},{key:"maybeRenderOldDurationInput",value:function e(){var t=this.props,r=t.retentionDuration,a=t.retentionType;if(a===x)return null;var n={width:"60px",backgroundColor:"white"};return h.a.createElement("div",{className:"flex_none left_margin"},h.a.createElement("label",{htmlFor:"retention_duration",className:"c-label c-label__text"},A.t("Duration")),h.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text align_right",defaultValue:r,id:"retention_duration",maxLength:"4",onChange:this.durationChange,style:n,type:"text"}),h.a.createElement("span",{className:"p-channel_options--retention_duration_add_on"},A.t("days")))}},{key:"maybeRenderDurationInput",value:function e(){var t=this.props,r=t.retentionDuration,a=t.retentionDurationUnit,n=t.retentionType,i=t.durationInputRef;if(n===x)return null;var s=h.a.createElement("strong",null,A.t("Delete messages and their revisions after:"));return h.a.createElement(k["a"],{className:"p-channel_options--retention_duration_label c-deprecated-icon c-icon--caret-down",text:s,htmlFor:"retention_duration"},h.a.createElement("div",{className:"display_flex"},h.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text",defaultValue:0===r?"":r,id:"retention_duration",onChange:this.durationChange,onKeyPress:this.handleKeyPress,type:"text",ref:i}),h.a.createElement("select",{className:"p-channel_options--retention_duration_unit c-input_select margin_left_100",id:"retention_duration_unit",defaultValue:a,onChange:this.durationUnitChange},h.a.createElement("option",{value:"0"},A.t("Days")),h.a.createElement("option",{value:"1"},A.t("Years")))))}},{key:"maybeRenderDurationWarning",value:function e(){var t=this.props,r=t.member,a=t.retentionType,n=t.retentionDuration,i=t.retentionDurationUnit,s=t.teamRetentionDuration,o=t.teamRetentionType;if(a===x)return null;var c=void 0;var l=Object(T["a"])({retentionDuration:n,retentionDurationUnit:i});var u=5475;if(l>=36500)c=A.rt("When setting a time frame for deleting messages, please choose a duration less than 100 years.");else if(Object(T["b"])({retentionType:a,retentionDuration:l}))if(l<30)c=A.rt("<strong>This will delete all messages older than {retentionDuration, plural, =1 {# day} other {# days}}</strong>. Please double-check with your team before setting such a short retention period.",{retentionDuration:n});else if(o===B&&l>s)c=i===q?Object(b["x"])(r)||Object(b["P"])(r)?A.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:n}):A.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:n}):Object(b["x"])(r)||Object(b["P"])(r)?A.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:n}):A.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:n});else{if(o!==F&&o!==L||!(l>u))return null;c=A.rt("Just a heads up: if you want to keep your messages forever, you can choose to follow your workspace\u2019s default retention settings.")}else c=A.rt("To delete messages after a period of time, set a value greater than zero.");return h.a.createElement(y["a"],{level:"warning"},c)}},{key:"renderSelectOption",value:function e(t,r){return h.a.createElement("option",{value:t},r)}},{key:"renderRadio",value:function e(){var t=this.props,r=t.onTypeChange,a=t.retentionType,n=t.team;var i="retention_type";var s=h.a.createElement("span",null,h.a.createElement("strong",null,A.t("Use the default retention settings for {teamName}",{teamName:Object(g["getTeamDisplayName"])(n)})),h.a.createElement("div",{className:"sk_dark_gray"},this.renderTeamPrefMessage()));var o=h.a.createElement("span",null,h.a.createElement("strong",null,A.t("Use custom retention settings for this conversation")),h.a.createElement("div",{className:"sk_dark_gray"},A.t("Delete messages after a set amount of time.")));return h.a.createElement("div",{className:"flex_one"},h.a.createElement(C["a"],{className:"margin_bottom_50"},h.a.createElement(k["a"],{text:s,htmlFor:i+"_0",type:"inline",cursor:"pointer",className:"margin_bottom_75"},h.a.createElement(j["a"],{id:i+"_0",name:i,value:0,checked:a===x,onChange:r})),h.a.createElement(k["a"],{text:o,htmlFor:i+"_1",type:"inline",cursor:"pointer"},h.a.createElement(j["a"],{id:i+"_1",name:i,value:1,checked:a===D,onChange:r}))))}},{key:"renderTeamPrefMessage",value:function e(){var t=this.props,r=t.teamRetentionDuration,a=t.teamRetentionType;var n=void 0;switch(a){case F:n=A.t("By default, messages are kept forever.");break;case L:n=A.t("By default, messages are kept forever, but revisions aren\u2019t tracked.");break;case B:if(r>364){var i=Object(f["round"])(r/365,1);n=A.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted.",{durationDays:r,durationYears:i})}else n=A.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted.",{teamRetentionDuration:r});break;case U:if(r>364){var s=Object(f["round"])(r/365,1);n=A.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted (full history still accessible via compliance export).",{durationDays:r,durationYears:s,fallbackHash:"91a2ec5b71549f51b20023decb759e38c488cd23"})}else n=A.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted (full history still accessible via compliance export).",{teamRetentionDuration:r,fallbackHash:"546ed739919d63b927945839040c80b6968a5d2f"});break;default:n=A.t("By default, messages are kept forever.");break}return n}},{key:"render",value:function e(){var t=this.props.prefsLoaded;if(!t)return h.a.createElement("div",{className:"p-channel_options--option_spinner"},h.a.createElement(O["a"],{size:"medium"}));return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("p",null,A.t("If you\u2019d like, you can set custom message retention for this conversation.")),this.renderRadio(),h.a.createElement("div",{className:"p-channel-options__custom_retention_container"},this.maybeRenderDurationInput(),this.maybeRenderDurationWarning()))}}]);return t}(p["PureComponent"]);G.displayName="DataRetention";G.defaultProps=P;t["a"]=G},2190:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(907);var m=r(283);var b=r(5);var g=r(196);var _=new b["b"]("channel_options");var y={channel:v.a.object.isRequired,showArchiveInstead:v.a.bool.isRequired,onChangeCheckbox:v.a.func.isRequired,onClickArchiveInstead:v.a.func.isRequired};var O={};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderArchiveInstead",value:function e(){var t=this.props,r=t.showArchiveInstead,a=t.onClickArchiveInstead;if(!r)return null;return _.rt("<strong>Note:</strong> <a>Archiving a channel</a> lets you close out a conversation without deleting its messages.",{fallbackHash:"7a1495254985f7cbea8f1975f9ee15921929ea5c"},function(e){var t=e.text,r=e.key,n=e.tag;if("strong"===n)return h.a.createElement("strong",{key:r},t);if("a"===n)return h.a.createElement(m["a"],{key:r,onClick:a},t);return{text:t}})}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.onChangeCheckbox;return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("p",null,_.rt("Are you sure you want to delete <strong>{channel}</strong>? All of the channel\u2019s messages will be removed from Slack immediately \u2014 files, however, will not be deleted. This cannot be undone.",{channel:Object(f["getDisplayName"])(r)},function(e){var t=e.key;return Object(g["a"])(t,r)})),h.a.createElement("p",null,this.renderArchiveInstead()),h.a.createElement("p",{className:"float_left very_small_top_margin"},h.a.createElement("label",{htmlFor:"delete_channel_cb",className:"c-label--pointer display_flex align_items_center"},h.a.createElement("input",{onChange:a,id:"delete_channel_cb",type:"checkbox",className:"c-input_checkbox inline small_right_margin"}),_.t("Yes, permanently delete this channel"))))}}]);return t}(p["PureComponent"]);k.displayName="DeleteChannel";k.defaultProps=O;t["a"]=k},2191:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(5);var s=new i["b"]("channel_options");function o(){return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,s.t("Exports can take a while \u2014 especially for lengthy conversations. Slackbot will ping you when your export is done.")))}o.displayName="ExportHistory";t["a"]=o},2192:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(3278);var _=r(907);var y=r(710);var O=r(69);var k=r(195);var j=r(711);var C=r(1082);var E=r(1081);var S=r(1074);var w=r(5);var I=r(20150);var T=r.n(I);var N=new w["b"]("channel_options");var R={channel:v.a.object,orgName:v.a.string,disabledTeamIds:v.a.arrayOf(v.a.string),filterFunction:v.a.func,isLoaded:v.a.bool,onShareWithChange:v.a.func,onTeamPickerChange:v.a.func,originatingTeamId:v.a.string,preselectedTeamIds:v.a.arrayOf(v.a.string),shareWith:v.a.string};var A={channel:null,orgName:"",disabledTeamIds:[],filterFunction:null,isLoaded:false,onShareWithChange:f["noop"],onTeamPickerChange:f["noop"],originatingTeamId:"",preselectedTeamIds:[],shareWith:"specific"};var M=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"maybeRenderWorkspacePicker",value:function e(){var t=this.props,r=t.disabledTeamIds,a=t.filterFunction,n=t.onTeamPickerChange,i=t.originatingTeamId,s=t.preselectedTeamIds,o=t.shareWith;if("all"===o)return null;var c=void 0;c=a||Object(y["d"])({preselected_ids:s,disabled_ids:r});return h.a.createElement("div",{className:"margin_left_150"},h.a.createElement(j["a"],{approxItemHeight:32,dataPromise:c,onValueChange:n,placeholderText:N.t("Add workspaces"),template:function e(t){var r={item:t};t.team.id===i&&(r.additionalItemCopy=N.t("Owner"));return h.a.createElement(E["a"],r)},tokenTemplate:function e(t){var r={item:t};t.team.id===i&&(r.additionalItemCopy=N.t("Owner"));return h.a.createElement(C["a"],r)}}))}},{key:"renderAllWorkspaces",value:function e(){var t=this.props,r=t.onShareWithChange,a=t.shareWith,n=t.orgName;var i={className:"small_right_margin",id:"all-workspaces",name:"share_with",onClick:r,value:"all"};"all"===a&&(i.defaultChecked="checked");return h.a.createElement(k["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"all-workspaces",text:N.t("All {orgName} workspaces",{orgName:n})},h.a.createElement(S["a"],i))}},{key:"renderSpecificWorkspaces",value:function e(){var t=this.props,r=t.onShareWithChange,a=t.shareWith,n=t.orgName;var i={className:"small_right_margin",id:"specific-workspaces",name:"share_with",onClick:r,value:"specific"};"specific"===a&&(i.defaultChecked="checked");return h.a.createElement("div",null,h.a.createElement(k["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"specific-workspaces",text:N.t("Specific {orgName} workspaces",{orgName:n})},h.a.createElement(S["a"],i)),this.maybeRenderWorkspacePicker())}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.isLoaded,n=t.orgName;if(!a)return h.a.createElement("div",{className:"p-channel_options--option_spinner"},h.a.createElement(O["a"],{size:"medium"}));var i=void 0;i=Object(_["isPrivateChannel"])(r)?N.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:n}):N.t("Choose which {org_name} workspaces can find and join this channel.",{org_name:n});return h.a.createElement("div",{className:"p-channel-options--content_text"},h.a.createElement("p",null,i),this.renderSpecificWorkspaces(),this.renderAllWorkspaces())}}]);return t}(p["PureComponent"]);M.displayName="ManageWorkspaceAccess";M.defaultProps=A;function P(e){return{orgName:Object(g["getEnterpriseOrgName"])(e)}}t["a"]=Object(b["connect"])(P)(M)},21922:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(189);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(333);var y=r(8);var O=r.n(y);var k=r(1);var j=r.n(k);var C=r(3181);var E=r(140);var S=r(21741);var w=r(21748);var I=r(69);var T=r(21799);var N=r(21800);var R=r(21765);var A=h()({},T["a"].propTypes,{hasKeyboardFocus:g.a.bool});var M=h()({},T["a"].defaultProps,{hasKeyboardFocus:false});var P={FOCUS_WITHIN_CHILD:3,FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var x=function(e){v()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.containerNode=null;r.tableNumRows=e.rows.length;r.tableNumCols=e.rows.length>0?e.rows[0].items.length:0;r.tableSize=r.tableNumRows*r.tableNumCols;r.containerNode=null;r.setRef=function(e){r.containerNode=e};j.a.bindAll(r,["onFocusEnter","onFocusWithin","onFocusLeave","rowRenderer","renderRowItem","renderHeaderItem","setRef"]);r.state=h()({},r.state,{activeItem:-1,isActiveItemHeader:true,hasKeyboardFocus:P.NOT_FOCUSED});return r}s()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new E["a"](this.containerNode);this.keyCommands.bindAll([{keys:["up","down","left","right"],handler:this.onArrowKeyDown.bind(this)}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.keyCommands=null}},{key:"onArrowKeyDown",value:function e(t){t.preventDefault();this.focusNextItem(t.keyCode)}},{key:"focusNextItem",value:function e(t){var r=this.state,a=r.activeItem,n=r.isActiveItemHeader;var i=void 0;i=-1===a&&true===n?{index:0,isNextActiveItemHeader:true,hasKeyboardFocus:P.FOCUS_WITHIN}:this.getNextActiveItem(t,a,n);i&&this.setState(function(){return{activeItem:i.index,isActiveItemHeader:i.isNextActiveItemHeader,hasKeyboardFocus:P.FOCUS_WITHIN}})}},{key:"onFocusEnter",value:function e(t){var r=t.target,a=t.currentTarget,n=t.relatedEvent;var i=n&&"keydown"===n.type;if(!i)return;var s=r===a;var o=s?P.CONTAINER_FOCUSED:P.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:o}})}},{key:"onFocusWithin",value:function e(t){var r=t.relatedEvent,a=t.target;if(r&&"mousedown"===r.type)return;-1!==a.className.indexOf("c-table_view_header_item")||-1!==a.className.indexOf("c-table_view_row_item")?this.setState(function(){return{hasKeyboardFocus:P.FOCUS_WITHIN}}):-1!==a.className.indexOf("c-table_view_keyboard_navigable_container")?this.setState(function(){return{hasKeyboardFocus:P.CONTAINER_FOCUSED}}):this.setState(function(){return{hasKeyboardFocus:P.FOCUS_WITHIN_CHILD}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:-1,hasKeyboardFocus:P.NOT_FOCUSED,isActiveItemHeader:true}});this.inferredActiveItem=null}},{key:"getNextActiveItem",value:function e(t,r,a){var n=-1!==r;if(!n&&this.inferredActiveItem)return this.inferredActiveItem;var i=n?r:0;var s=a;var o=void 0;switch(t){case C["f"]:o=i-1;if(!a&&o<=0){s=true;o=this.tableNumCols-1}else a&&o<0&&(o=i);break;case C["g"]:o=i+1;if(a&&o>=this.tableNumCols){s=false;o=1}else!a&&o>=this.tableSize&&(o=i);break;case C["j"]:o=i-this.tableNumCols;if(a)o=i;else if(!a&&o<1){s=true;o=i-1}break;case C["a"]:o=i+this.tableNumCols;if(a){s=false;o=i+1}else o>this.tableSize&&(o=i);break;default:break}return{index:n?o:i,isNextActiveItemHeader:s}}},{key:"renderHeaderItem",value:function e(t,r){var a=this;var n=this.state,i=n.hasKeyboardFocus,s=n.activeItem,o=n.isActiveItemHeader;var c=this.props,l=c.sortBy,u=c.rowHeaderItemClassName;var d=i===P.FOCUS_WITHIN;var v=o&&s===r;var p=O()({"c-table_view_row_item_sort_applied":t.id&&t.id===l,"c-table_view_hover_disabled":t.noHover},u,t.className);var h=void 0;h=t.onClick?function e(r){return a.headerItemOnClick(t,r)}:null;return m.a.createElement(N["a"],{value:t.value,key:t.id,onClick:h,iconType:t.iconType,className:p,hasFocus:v&&d,tabIndex:-1})}},{key:"renderHeaders",value:function e(){var t=this.props.headers;if(!t||!t.length)return m.a.createElement("div",{className:"c-table_view_flexbox c-table_view_row"},m.a.createElement("div",{className:"c-table_view_row_item"}));return m.a.createElement("div",{className:"c-table_view_flexbox c-table_view_row_header"},t.map(this.renderHeaderItem))}},{key:"renderRowItem",value:function e(t){var r=this.state,a=r.hasKeyboardFocus,n=r.activeItem,i=r.isActiveItemHeader;var s=a===P.FOCUS_WITHIN;var o=a===P.FOCUS_WITHIN_CHILD;var c=!i&&j.a.endsWith(t.id,"item"+n.toString());return m.a.createElement(R["a"],{key:t.id,hasFocus:c&&s,value:t.value,onClick:t.onClick,className:t.className,tabIndex:o?0:-1})}},{key:"rowRenderer",value:function e(t){var r=this.props,a=r.rows,n=r.rowClassName;var i=a[t];var s=O()("c-table_view_flexbox","c-table_view_row",n,i.className);return m.a.createElement("div",{className:"c-table_view_row_container"},m.a.createElement("div",{className:s},i.items.map(this.renderRowItem)))}},{key:"renderRows",value:function e(){var t=this;var r=this.state.keys;var a=this.props.height;var n=a?{height:a}:{};return m.a.createElement("div",{className:"c-table_view_all_rows_container",style:n},m.a.createElement(_["a"],null,function(e){var a=e.width,n=e.height;return m.a.createElement(w["b"],{width:a,height:n,keys:r,rowRenderer:t.rowRenderer,onScroll:t.onScroll})}),this.renderLoadingSpinner())}},{key:"renderLoadingSpinner",value:function e(){var t=this.props,r=t.rows,a=t.isLoading,n=t.newQuery;var i=void 0;a&&(i=r&&r.length&&!n?m.a.createElement(I["a"],{size:"small",className:"c-table_view__spinner"}):m.a.createElement(I["a"],{size:"medium",className:"c-table_view__spinner empty"}));return i}},{key:"render",value:function e(){var r=this.state.hasKeyboardFocus===P.CONTAINER_FOCUSED;var a=O()("c-table_view_keyboard_navigable_container",{"focus-ring":r});return m.a.createElement(S["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{className:a,ref:this.setRef,tabIndex:r?-1:0},u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)))}}]);return t}(T["a"]);x.displayName="KeyboardNavigableTable";t["a"]=x;x.propTypes=A;x.defaultProps=M},21923:function(e,t,r){"use strict";r.d(t,"a",function(){return x});var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(12);var j=r(3278);var C=r(21801);var E=r(21861);var S=r(5);var w=r(147);var I=r(3184);var T=r(21703);var N=r(20158);var R=r.n(N);var A=new S["b"]("custom_tos");var M={hasCustomTOS:h.a.bool,customTOSTimestamp:h.a.number,enterprise:h.a.shape({name:h.a.string,domain:h.a.string}),orgUrl:h.a.string,customTOSViewLink:h.a.string,team:h.a.shape({name:h.a.string}),safeAbsRootURL:h.a.string,featureZeroWorkspaceOnboarding:h.a.bool.isRequired,onSubmit:h.a.func,onlyDisplayCard:h.a.bool};var P={hasCustomTOS:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:g["noop"],onlyDisplayCard:false};var x=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={buttonIsPending:false};r.onClick=r.onClick.bind(r);return r}c()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return m.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return m.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return m.a.createElement("a",{href:r+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return m.a.createElement("a",{href:r+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,r=t.customTOSViewLink,a=t.enterprise,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return m.a.createElement("a",{href:""+r,target:"_blank",rel:"noopener noreferrer"},A.t("{enterpriseName}\u2019s Terms of Service",{enterpriseName:a.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,r=t.safeAbsRootURL,a=t.featureZeroWorkspaceOnboarding;if(!a)return null;return m.a.createElement("a",{href:r+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.customTOSTimestamp;if(!r)return null;var n=void 0;n=a?A.t("Review and accept the updated terms of service"):A.t("Review the terms of service");return m.a.createElement("div",{className:"p-tos__heading"},n)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,r=t.customTOSTimestamp,a=t.enterprise,n=t.customTOSViewLink,i=t.team,s=t.featureZeroWorkspaceOnboarding;if(!s)return null;if(r)return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:a.name,customTOSViewLink:n,TOSUpdatedOn:Object(w["a"])(r)},function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return m.a.createElement("a",{href:n,target:"_blank",key:r,rel:"noopener noreferrer"},t);return null}));if(!Object(g["isEmpty"])(i))return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(T["getTeamDisplayName"])(i),enterpriseName:a.name}));return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return m.a.createElement("div",{className:"p-tos__body"},m.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),m.a.createElement("li",null,this.renderPrivacyPolicy()),m.a.createElement("li",null,this.renderCookiePolicy()),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return m.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return m.a.createElement(I["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},A.t("I Agree"))}},{key:"renderCard",value:function e(){var t=O()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return m.a.createElement("div",{className:t},m.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.onlyDisplayCard,n=t.orgUrl;return m.a.createElement("div",{className:"p-tos"},!a&&m.a.createElement(E["a"],{team:r,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(f["PureComponent"]);x.displayName="TermsOfService";x.defaultProps=P;var D=function e(t){var r=Object(k["getFromBootData"])(t,"custom_tos");var a=r.enterprise;var i=Object(k["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var s=Object(j["getPotentiallyUnknownEnterprise"])(t);Object(g["isEmpty"])(s)||(a=s);var o=Object(C["c"])(t,a.domain);return n()({},r,{enterprise:a,orgUrl:o,featureZeroWorkspaceOnboarding:i})};t["b"]=Object(b["connect"])(D)(x)},21924:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(21723);var k=r(20131);var j=r.n(k);var C={logoLink:h.a.string,logoAriaLabel:h.a.string,logoLinkProps:h.a.object,title:h.a.string,team:h.a.object,isEnterprise:h.a.bool,renderRightContents:h.a.func,rightClassName:h.a.string,centerClassName:h.a.string,renderCenterContents:h.a.func};var E={logoLink:null,logoAriaLabel:null,logoLinkProps:{},title:null,team:{},isEnterprise:null,renderRightContents:_["noop"],rightClassName:null,renderCenterContents:_["noop"],centerClassName:null};var S=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"renderRightContents",value:function e(){var t=this.props,r=t.rightClassName,e=t.renderRightContents;var a=g()("p-navigation_bar__right",r);return m.a.createElement("div",{className:a},e())}},{key:"renderCenterContents",value:function e(){var t=this.props,r=t.centerClassName,e=t.renderCenterContents;var a=g()("p-navigation_bar__center",r);return m.a.createElement("div",{className:a},e())}},{key:"renderTitle",value:function e(){var t=this.props,r=t.title,a=t.team,n=t.isEnterprise;return m.a.createElement("div",{className:"p-navigation_bar__heading"},m.a.createElement(O["a"],{entityType:n?"org":"workspace",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:true}),m.a.createElement("span",{className:"p-navigation_bar__title nudge_bottom_1"},r))}},{key:"renderLogo",value:function e(){var t=this.props,r=t.logoLink,a=t.logoAriaLabel,i=t.logoLinkProps;var s=m.a.createElement("div",{className:"p-navigation_bar__logo","data-qa":"nav_bar_logo",alt:"Slack"});if(!r)return s;return m.a.createElement("a",n()({href:r,"aria-label":a,className:"flex_none"},i),s)}},{key:"render",value:function e(){var t=this.props.title;return m.a.createElement("nav",{className:"p-navigation_bar"},m.a.createElement("div",{className:"p-navigation_bar__left"},this.renderLogo(),t&&this.renderTitle()),this.renderCenterContents(),this.renderRightContents())}}]);return t}(f["Component"]);S.displayName="NavigationBar";S.defaultProps=E;t["a"]=S},21925:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(12);var O=r(21978);var k=r(5);var j=r(21723);var C=r(21724);var E=r(20161);var S=r.n(E);var w=new k["b"]("workspace_directory");var I={large:"large",small:"small"};var T={large:64,small:48};var N={team:v.a.shape({id:v.a.string,description:v.a.string,discoverable:v.a.string,name:v.a.string,domain:v.a.string,is_member:v.a.bool,date_requested_join:v.a.oneOfType([v.a.string,v.a.number]),icon:v.a.object,is_inactive:v.a.bool,user_counts:v.a.object}).isRequired,size:v.a.oneOf(Object(g["values"])(I)),featureZeroWorkspaceOnboarding:v.a.bool.isRequired,className:v.a.string,onActionReject:v.a.func,onActionResolve:v.a.func,anchorPage:v.a.string,openDialog:v.a.func,doLaunchInNewTab:v.a.bool};var R={allowInstantJoin:false,size:I.large,className:"",onActionResolve:g["noop"],onActionReject:g["noop"],anchorPage:"",openDialog:g["noop"],doLaunchInNewTab:false};var A=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onCardClick=r.onCardClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);r.onResize=r.onResize.bind(r);r.openDialog=r.openDialog.bind(r);r.state={isMobileView:false};return r}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(C["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(C["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,r){t.preventDefault();if("Enter"===t.key)switch(r){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===I.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===I.large}},{key:"openDialog",value:function e(){var t=this.props,r=t.team,e=t.openDialog;e({team:r})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var r=this.isLargeVariationCard()&&!this.state.isMobileView?T[I.large]:T[I.small];return h.a.createElement("div",{className:"display_flex"},h.a.createElement(j["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:r,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return h.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r)return null;var n=this.state.isMobileView;var i=a.date_requested_join,s=a.discoverable,o=a.domain,c=a.user_counts;c=void 0===c?{}:c;var l=c.active_members,u=void 0===l?0:l;var d=w.t("{activeMembers} active members",{activeMembers:u?Object(k["i"])(u):0});var v=void 0;v=this.isLargeVariationCard()&&!n?h.a.createElement("div",null,h.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),h.a.createElement("span",{className:"overflow_ellipsis"},o+".slack.com")):this.isSmallVariationCard()&&"closed"===s&&i?h.a.createElement("span",null,w.t("Awaiting admin approval")):h.a.createElement("span",{className:"overflow_ellipsis"},d);return h.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},v)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team;if(!r||this.isSmallVariationCard())return null;var n=Object(C["f"])(a,{context:"largeCard",featureZeroWorkspaceOnboarding:r});if(!n)return null;return h.a.createElement("div",{className:"p-workspace_directory_card__status"},n)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return h.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.team,a=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab;var c=this.isLargeVariationCard()?"large":"medium";return h.a.createElement(O["a"],{team:r,buttonContext:a+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:c})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.featureZeroWorkspaceOnboarding,n=r.size,i=r.className;if(!a)return null;var s=this.props.team.id;var o=b()("p-workspace_directory_card",i,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return h.a.createElement("div",{className:o,onClick:this.onCardClick,onKeyPress:function e(r){return t.onKeyPress(r,"openDialog")},"data-workspace-id":s,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":n,role:"button",tabIndex:"0"},h.a.createElement("div",{className:"display_flex flex_direction_column"},h.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),h.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(p["Component"]);A.displayName="WorkspaceDirectoryCard";A.defaultProps=R;var M=function e(t){return{featureZeroWorkspaceOnboarding:Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var P={};t["a"]=Object(f["connect"])(M)(A)},2193:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(2194);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(333);var C=r(5);var E=r(69);var S=r(2195);var w=r(2196);var I=r(2197);var T=r(20213);var N=r.n(T);var R=new C["b"]("lazy_filter_select");var A={default:"normal",filter_in_list:"filter_in_list",normal:"normal",small:"small"};var M={allowItemUnselect:h.a.bool,allowListPositionAbove:h.a.bool,alwaysVisible:h.a.bool,approxDividerHeight:h.a.number,approxItemHeight:h.a.number,dataPromise:h.a.func,dataQaPrefix:h.a.string,disabled:h.a.bool,dividerTemplate:h.a.func,filter:h.a.func,items:h.a.array,listItemClass:h.a.func,maxHeightOfList:h.a.number,maxSelectedItems:h.a.number,noDefaultSelection:h.a.bool,noResultsTemplate:h.a.func,onInputBlur:h.a.func,onInputFocus:h.a.func,onItemAdded:h.a.func,onItemRemoved:h.a.func,onKeyDown:h.a.func,onKeyUp:h.a.func,onListHidden:h.a.func,onListShown:h.a.func,onMaxItemsSelected:h.a.func,onReady:h.a.func,onValueChange:h.a.func,placeholderText:h.a.string,restrictPreselectedItemRemoval:h.a.bool,scrollThreshold:h.a.number,single:h.a.bool,sluggifyEnabled:h.a.bool,sluggifyDelimiter:h.a.any,sluggifyKeyName:h.a.string,sluggifyValidator:h.a.func,styling:h.a.oneOf(Object(O["values"])(A)),tabToNav:h.a.bool,template:h.a.func,tokenTemplate:h.a.func,hideList:h.a.bool};var P={alwaysVisible:false,allowItemUnselect:true,allowListPositionAbove:false,approxDividerHeight:30,approxItemHeight:30,dataPromise:null,dataQaPrefix:"lfs",disabled:false,dividerTemplate:function e(t){return t.label},filter:function e(t,r){return t.toLowerCase().indexOf(r)>-1},items:[],listItemClass:O["noop"],maxHeightOfList:250,maxSelectedItems:Infinity,noDefaultSelection:false,noResultsTemplate:function e(t){return R.rt("No items matched <strong>{query}</strong>",{query:t})},onInputBlur:O["noop"],onInputFocus:O["noop"],onItemAdded:O["noop"],onItemRemoved:O["noop"],onKeyDown:O["noop"],onKeyUp:O["noop"],onListHidden:O["noop"],onListShown:O["noop"],onMaxItemsSelected:O["noop"],onReady:O["noop"],onValueChange:O["noop"],placeholderText:R.t("Choose an option\u2026"),restrictPreselectedItemRemoval:false,scrollThreshold:1e3,single:false,sluggifyEnabled:false,sluggifyDelimiter:null,sluggifyKeyName:"",sluggifyValidator:O["noop"],styling:A.default,tabToNav:false,template:function e(t){return t.label},tokenTemplate:function e(t){return t.label},hideList:false};var x=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.fetchInitialList=r.fetchInitialList.bind(r);r.filterItems=r.filterItems.bind(r);r.getSelectedValue=r.getSelectedValue.bind(r);r.handlePromiseReturn=r.handlePromiseReturn.bind(r);r.hideList=r.hideList.bind(r);r.isRunningPromisePending=r.isRunningPromisePending.bind(r);r.listItemRenderer=r.listItemRenderer.bind(r);r.listNoRowsRenderer=r.listNoRowsRenderer.bind(r);r.onBlurInput=r.onBlurInput.bind(r);r.onChangeInput=r.onChangeInput.bind(r);r.onClickContainer=r.onClickContainer.bind(r);r.onClickItem=r.onClickItem.bind(r);r.onFocusInput=r.onFocusInput.bind(r);r.onFocusInputContainer=r.onFocusInputContainer.bind(r);r.onKeyDownInput=r.onKeyDownInput.bind(r);r.onKeyUpInput=r.onKeyUpInput.bind(r);r.onListScroll=r.onListScroll.bind(r);r.onMouseDownListContainer=r.onMouseDownListContainer.bind(r);r.onMouseLeaveContainer=r.onMouseLeaveContainer.bind(r);r.onMouseLeaveItem=r.onMouseLeaveItem.bind(r);r.onMouseMoveItem=r.onMouseMoveItem.bind(r);r.onMouseUpListContainer=r.onMouseUpListContainer.bind(r);r.onTokenClick=r.onTokenClick.bind(r);r.onTokenHighlight=r.onTokenHighlight.bind(r);r.runQuery=r.runQuery.bind(r);r.setListRef=r.setListRef.bind(r);r.showList=r.showList.bind(r);r.inputIsFocused=r.props.alwaysVisible;r.mouse={};r.pageNumber=1;r.preventBlur=false;r.slugIdCounter=0;r.itemMapById={};var a=[];var n=[];if(!r.props.dataPromise){var i=r.processItems(r.props.items);a=i.currentItems;n=i.selected}r.state={activeItemKey:null,currentItems:a,cursorHighlightedItem:null,listVisible:r.props.alwaysVisible,previousVal:"",runningPromise:null,selected:n};return r}c()(t,[{key:"componentDidMount",value:function e(){this.props.dataPromise&&this.fetchInitialList();this.inputIsFocused&&this.input.focus();this.props.onReady(this)}},{key:"componentDidUpdate",value:function e(t){this.inputIsFocused&&this.input.focus();t.hideList&&!this.props.hideList&&this.showList();this.props.hideList&&this.hideList()}},{key:"onClickContainer",value:function e(){this.input.focus();this.inputIsFocused=true;this.showList()}},{key:"onKeyDownInput",value:function e(t){if(this.props.disabled)return;var r=false;switch(y()(t)){case"down":t.preventDefault();r=true;this.selectDown();break;case"up":t.preventDefault();r=true;this.selectUp();break;case"enter":t.preventDefault();r=true;this.selectActiveItem();break;case"del":case"delete":case"backspace":if(""===this.state.previousVal){t.preventDefault();r=true;this.state.cursorHighlightedItem?this.removeSelected(this.state.cursorHighlightedItem):this.removeLastSelected()}break;case"tab":if(this.props.tabToNav){t.preventDefault();r=true;t.shiftKey?this.selectUp():this.selectDown()}break;case"esc":this.hideList();this.input.blur();break;default:break}this.props.onKeyDown(t,r)}},{key:"onKeyUpInput",value:function e(t){if(this.props.disabled)return;var r=false;var a=t.target,n=a.selectionStart,i=a.selectionEnd;var s=n===i&&0===n;switch(y()(t)){case"left":s&&this.maybeHighlightPreviousSelectedItem();break;case"right":s&&this.state.cursorHighlightedItem&&this.maybeHightlightNextSelectedItem();break;default:this.resetHighlightedSelectedItem();break}this.props.onKeyUp(t,r)}},{key:"onMouseDownListContainer",value:function e(){this.preventBlur=true}},{key:"onMouseLeaveContainer",value:function e(){this.preventBlur=false}},{key:"onMouseMoveItem",value:function e(t){if(this.props.disabled)return;var r=this.mouse;var a={lastX:t.clientX,lastY:t.clientY};if(Object(O["isEqual"])(r,a))return;var n=t.target.getAttribute("data-id");this.mouse=a;this.setState(function(){return{activeItemKey:n}});this.List.forceUpdateGrid()}},{key:"onMouseLeaveItem",value:function e(t){var r=null;var a=this.state.mouse;var n={lastX:t.clientX,lastY:t.clientY};if(Object(O["isEqual"])(a,n))return;this.setState(function(){return{activeItemKey:r}})}},{key:"onMouseUpListContainer",value:function e(){this.preventBlur&&this.input.focus()}},{key:"onBlurInput",value:function e(){this.preventBlur||this.hideList();this.inputIsFocused=false;this.props.onInputBlur()}},{key:"onFocusInput",value:function e(){if(this.inputIsFocused||this.props.disabled)return;this.showList();this.props.onInputFocus()}},{key:"onFocusInputContainer",value:function e(){this.input.focus();this.onFocusInput()}},{key:"onChangeInput",value:function e(t){var r=this;var a=null;var n=t.target.value;this.pageNumber=1;var i=void 0;if(Object(S["b"])(this.props)&&n.match(this.props.sluggifyDelimiter)){var s=n.split(this.props.sluggifyDelimiter);s.forEach(function(e){e.length&&r.addUserCreatedSlugFromString(e)});var o=false;var c=this.processItems(this.props.items,o);i=c.currentItems;n=""}else i=this.runQuery(n);this.setState(function(){return{activeItemKey:a,currentItems:i,previousVal:n}});this.List.forceUpdateGrid();this.List.scrollToRow(0)}},{key:"onClickItem",value:function e(t){if(this.props.disabled)return;if(!this.isItemSelectable(t.id))return;var r=this.state.selected.slice();if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(t)){this.removeSelected(t);return}if(!Object(S["a"])(this.state.selected.length,this.props.maxSelectedItems))return;this.props.single&&(r=[]);r.push(t);var a=!this.props.single||this.props.alwaysVisible;this.inputIsFocused=!this.props.single;var n="";this.preventBlur=false;this.setState(function(){return{listVisible:a,previousVal:n,selected:r}});this.List.forceUpdateGrid();this.props.onItemAdded(t);this.props.onValueChange(r);r.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"onListScroll",value:function e(t){var r=t.scrollTop;if(this.props.dataPromise){var a=this.calculateListHeight();var n=a-r;n<=this.props.scrollThreshold&&r>0&&this.loadMoreItems()}}},{key:"onTokenClick",value:function e(t){this.removeSelected(t)}},{key:"onTokenHighlight",value:function e(t){this.setState(function(e){var r=t;e.cursorHighlightedItem&&e.cursorHighlightedItem.id===t.id&&(r=null);return n()({},e,{cursorHighlightedItem:r})})}},{key:"getSelectedValue",value:function e(){return this.state.selected}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getItemById",value:function e(t){return this.itemMapById[t]||false}},{key:"maybeHightlightNextSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var r=this.state.cursorHighlightedItem;var a=0;if(r){a=Object(O["findIndex"])(t,function(e){return e.id===r.id&&e.slugId===r.slugId})+1;a>t.length&&(a=null)}if(null!==a){r=Object(O["findLast"])(t,function(e){return!e.group},a);Object(O["isEqual"])(this.state.cursorHighlightedItem,r)&&(r=null);r?this.setState(function(){return{cursorHighlightedItem:r}}):this.resetHighlightedSelectedItem()}else this.resetHighlightedSelectedItem()}},{key:"maybeHighlightPreviousSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var r=this.state.cursorHighlightedItem;var a=t.length-1;r&&(a=Object(O["findIndex"])(t,function(e){return e.id===r.id&&e.slugId===r.slugId})-1);if(a>=0){r=Object(O["findLast"])(t,function(e){return!e.group},a);r&&this.setState(function(){return{cursorHighlightedItem:r}})}}},{key:"resetHighlightedSelectedItem",value:function e(){this.setState(function(){return{cursorHighlightedItem:null}})}},{key:"handlePromiseReturn",value:function e(t){var r=t.items;this.setState(function(){return{runningPromise:null}});if(!r.length){this.List.forceUpdateGrid();return[]}t.replace_all_items||(r=Object(O["uniqBy"])(this.state.currentItems.concat(r),"id"));this.processItems(r);return r}},{key:"isRunningPromisePending",value:function e(){return this.state.runningPromise&&this.state.runningPromise.isPending()}},{key:"addUserCreatedSlugFromString",value:function e(t){if(!Object(S["b"])(this.props))return;if(!Object(S["a"])(this.state.selected.length,this.props.maxSelectedItems))return;var r=t.trim();if(!r)return;var a={};a[this.props.sluggifyKeyName]=r;a.id=null;a.label=r;a.slugId=String(this.slugIdCounter);this.slugIdCounter+=1;var n=this.props.sluggifyValidator(a);if(n||"undefined"===typeof n){var i=this.state.selected.slice();i.push(a);var s="";this.setState(function(){return{previousVal:s,selected:i}});this.props.onItemAdded(a);this.props.onValueChange(i);i.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}}},{key:"removeUserCreatedSlug",value:function e(t){if(!Object(S["b"])(this.props))return;var r=this.state.selected.slice();var a=Object(O["reject"])(r,function(e){return e.slugId===t.slugId});this.setState(function(){return{selected:a}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(a)}},{key:"unsluggifySlug",value:function e(t){if(!Object(S["b"])(this.props)||!Object(S["c"])(t))return;var r=t.label;this.removeUserCreatedSlug(t);this.setState(function(){return{previousVal:r}})}},{key:"processItems",value:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var a={canSlug:Object(S["b"])(this.props),noDefaultSelection:this.props.noDefaultSelection};var n=Object(S["d"])(t,a),i=n.currentItems,s=n.itemMapById,o=n.preselected;this.itemMapById=Object(O["merge"])(this.itemMapById,s);var c=this.state&&this.state.selected?this.state.selected:[];var l=Object(O["uniqBy"])(o.concat(c),"id");this.props.single&&l.length&&(l=l.slice(0,1));this.state&&(r?this.setState(function(){return{currentItems:i,selected:l}}):this.setState(function(){return{currentItems:i}}));return{currentItems:i,selected:l}}},{key:"isItemSelectable",value:function e(t){var r=this.getItemById(t);if(r.group)return false;if(r.preselected&&this.props.restrictPreselectedItemRemoval)return false;if(this.props.allowItemUnselect)return true;return!this.isItemSelected(r)}},{key:"isItemSelected",value:function e(t){return this.state.selected.filter(function(e){if(t.slugId)return e.slugId===t.slugId;return e.id===t.id}).length>0}},{key:"listItemRenderer",value:function e(t){var r=t.index,a=t.key,n=t.style;var i=this.state.currentItems[r]||{};var s=this.state.activeItemKey===i.id;var o=i.preselected&&this.props.restrictPreselectedItemRemoval||i.disabled;var c=this.isItemSelected(i);var l=i.group?this.props.dividerTemplate:this.props.template;var u=this.props.listItemClass(i);return m.a.createElement(w["a"],{active:s,dataQaPrefix:this.props.dataQaPrefix,disabled:o,item:i,key:"rlfs-list-item-"+a,onClick:this.onClickItem,onMouseLeave:this.onMouseLeaveItem,onMouseMove:this.onMouseMoveItem,selected:c,style:n,template:l,customClasses:u})}},{key:"listNoRowsRenderer",value:function e(){if(this.isRunningPromisePending())return m.a.createElement("div",{className:"c-lazy_filter_select__status c-lazy_filter_select__status--loading"},m.a.createElement(E["a"],{size:"small",className:"inline_block"}));return m.a.createElement("div",{className:"c-lazy_filter_select__status"},this.props.noResultsTemplate(this.state.previousVal))}},{key:"calculateListHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.maxHeightOfList;var a=this.state.currentItems.length;var n=this.props.approxItemHeight;var i=a*n;var s=30;if(t)return Math.min(Math.max(i,s),r);return i}},{key:"filterItems",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;var a=r.toLowerCase();var n=this.props.items;var i=[];n.forEach(function(e){if(e.group){var r=e.children.filter(function(e){return t.props.filter(e.label,a)});r.length&&(i=i.concat(e,r))}else t.props.filter(e.label,a)&&i.push(e)});return i}},{key:"hideList",value:function e(){if(this.props.alwaysVisible)return;var t=false;this.setState(function(){return{listVisible:t}});this.props.onListHidden()}},{key:"loadMoreItems",value:function e(){if(!this.props.dataPromise)return this.state.currentItems;var t=this.state.runningPromise;this.isRunningPromisePending()&&t.cancel("Scrolling happened");this.pageNumber+=1;t=this.props.dataPromise(this.state.previousVal,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:t}});return t}},{key:"removeLastSelected",value:function e(){var t=this.state.selected.slice(-1)[0];if(Object(S["b"])(this.props)&&Object(S["c"])(t)){this.unsluggifySlug(t);return}this.removeSelected(t)}},{key:"removeSelected",value:function e(t){if(!t||t.disabled)return;var r=this.state.selected.slice();if(Object(S["c"])(t)){this.removeUserCreatedSlug(t);return}var a=Object(O["reject"])(r,function(e){return e.id===t.id});var n=this.state.currentItems.map(function(e){var r=e;r.id===t.id&&(r.preselected=false);return r});this.setState(function(){return{currentItems:n,cursorHighlightedItem:null,selected:a}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(a)}},{key:"fetchInitialList",value:function e(){var t=this;if(!this.props.dataPromise)return;var r=this.state.runningPromise;this.isRunningPromisePending()&&r.cancel("Uhhh ... ?");r=this.props.dataPromise("",this.pageNumber).then(function(e){var r=e.items;var a=t.processItems(r);var n=a.currentItems,i=a.selected;t.setState(function(){return{currentItems:n,selected:i,runningPromise:null}})});this.setState(function(){return{runningPromise:r}})}},{key:"runQuery",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;if(this.props.dataPromise){var r=this.state.runningPromise;this.isRunningPromisePending()&&r.cancel("User entered more text");this.pageNumber=1;r=this.props.dataPromise(t,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:r}});return[]}return this.filterItems(t)}},{key:"selectDown",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var r=this.state.activeItemKey;var a=0;if(r){a=Object(O["findIndex"])(t,function(e){return e.id===r})+1;a>t.length&&(a=t.length)}var n=Object(O["find"])(t,function(e){return!e.group},a);if(n){r=n.id;a=Object(O["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:r}});this.List.forceUpdateGrid();this.List.scrollToRow(a)}}},{key:"selectUp",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var r=this.state.activeItemKey;var a=t.length-1;if(r){a=Object(O["findIndex"])(t,function(e){return e.id===r})-1;a<0&&(a=0)}var n=Object(O["findLast"])(t,function(e){return!e.group},a);if(n){r=n.id;a=Object(O["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:r}});this.List.forceUpdateGrid();this.List.scrollToRow(a)}}},{key:"selectActiveItem",value:function e(){var t=this.state.activeItemKey;if(!t)return;if(!Object(S["a"])(this.state.selected.length,this.props.maxSelectedItems))return;if(!this.isItemSelectable(t))return;var r=this.getItemById(t);if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(r)){this.removeSelected(r);return}var a=this.state.selected.slice();this.props.single&&(a=[]);a.push(r);var n=!this.props.single;this.inputIsFocused=!this.props.single;var i="";this.preventBlur=false;this.setState(function(){return{listVisible:n,previousVal:i,selected:a}});this.List.forceUpdateGrid();this.props.onItemAdded(r);this.props.onValueChange(a);a.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"showList",value:function e(){if(this.state.listVisible||this.props.disabled)return;!this.props.dataPromise||this.state.previousVal||this.state.currentItems.length||this.fetchInitialList();this.inputIsFocused=true;var t=true;var r=this.state.previousVal;this.props.single&&!this.props.alwaysVisible&&(r="");this.setState(function(){return{listVisible:t,previousVal:r}});this.props.onListShown()}},{key:"renderSelected",value:function e(){var t=this;var r="";if(!(this.props.single&&this.state.listVisible)||this.props.alwaysVisible){var a=this.state.cursorHighlightedItem;r=this.state.selected.map(function(e){var r=e.id||e.slugId;var n=a&&a.id===e.id&&a.slugId===e.slugId;var i=e.preselected&&t.props.restrictPreselectedItemRemoval||e.disabled;return m.a.createElement(I["a"],{dataQaPrefix:t.props.dataQaPrefix,disabled:i,highlighted:n,item:e,key:"rlfs-token-"+r,onClick:t.onTokenClick,onHighlight:t.onTokenHighlight,single:t.props.single,template:t.props.tokenTemplate})})}return r}},{key:"render",value:function e(){var t=this;var r=g()("c-lazy_filter_select","c-lazy_filter_select--"+this.props.styling,{"c-lazy_filter_select--single":this.props.single});var a=g()("c-lazy_filter_select__input_container",{"c-lazy_filter_select__input_container--active":this.inputIsFocused,"c-lazy_filter_select__input_container--value":this.state.selected.length});var i=g()("c-lazy_filter_select__list_container",{"c-lazy_filter_select__list_container--visible":this.state.listVisible});var s=this.props.dataQaPrefix+"-value";var o=this.props.dataQaPrefix+"-input-value";var c={"aria-autocomplete":"list","aria-owns":"c-lazy_filter_select__list_container","aria-expanded":this.state.listVisible,role:"combobox"};if(this.state.cursorHighlightedItem){var l=this.state.cursorHighlightedItem;var u=l.id||l.slugId;c["aria-activedescendant"]="lfs-token-"+u}else this.state.activeItemKey&&(c["aria-activedescendant"]="lfs-item-"+this.state.activeItemKey);var d=this.state.selected.length?"":this.props.placeholderText;var v={};this.state.previousVal.length?v.size=this.state.previousVal.length+1:this.state.selected.length&&(v.size=1);return m.a.createElement("div",{className:r,"data-qa":this.props.dataQaPrefix,onClick:this.onClickContainer,onMouseLeave:this.onMouseLeaveContainer,role:"presentation"},m.a.createElement("div",{className:a,"data-qa":s,onFocus:this.onFocusInputContainer},m.a.createElement("div",{className:"c-lazy_filter_select__value"},this.renderSelected(),m.a.createElement("input",n()({},c,v,{className:"c-lazy_filter_select__input c-input_text","data-qa":o,onBlur:this.onBlurInput,onChange:this.onChangeInput,onFocus:this.onFocusInput,onKeyDown:this.onKeyDownInput,onKeyUp:this.onKeyUpInput,placeholder:d,ref:function e(r){t.input=r},type:"text",value:this.state.previousVal})))),m.a.createElement(j["a"],null,function(e){var r=e.width;return m.a.createElement("div",{className:i,id:"c-lazy_filter_select__list_container",onMouseDown:t.onMouseDownListContainer,onMouseUp:t.onMouseUpListContainer,role:"listbox"},m.a.createElement("div",{className:"c-lazy_filter_select__list"},m.a.createElement(j["b"],{height:t.calculateListHeight(true),noRowsRenderer:t.listNoRowsRenderer,onScroll:t.onListScroll,ref:t.setListRef,rowCount:t.state.currentItems.length,rowHeight:t.props.approxItemHeight,rowRenderer:t.listItemRenderer,width:r-10})))}))}}]);return t}(f["PureComponent"]);x.displayName="LazyFilterSelect";t["a"]=x;x.defaultProps=P},21936:function(e,t,r){"use strict";t["a"]=o;var a=r(12);var n=r(21698);var i=r(3275);var s=r(3203);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.userId,o=t.botId,c=t.username,l=t.botProfile;if(Object(a["isFeatureEnabled"])(e,"feature_app_profile_card_trigger_shared_channels")){if(c)return c;var u=Object(i["maybeGetBotAndMemberByIds"])(e,{userId:r,botId:o,botProfile:l}),d=u.member,v=u.bot;if(d)return Object(s["r"])(e,d);if(v)return v.name;return""}if(r){var p=Object(n["getMemberById"])(e,r);if(p)return Object(s["r"])(e,p)}else{if(c&&!o)return c;if(o){var h=o&&Object(i["getBotById"])(e,o);return c||h&&h.name||l&&l.name}}return""}},21937:function(e,t,r){"use strict";r.d(t,"b",function(){return y});r.d(t,"a",function(){return O});var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(22253);var l=r(12);var u=r(5);var d=r(22428);var v=r(22430);var p=r(22437);var h=r(22442);var f=r(22443);var m=r(22444);var b=r(20184);var g=r.n(b);var _=new u["b"]("global_nav");var y=-12;var O=-4;var k={renderSonicMenu:s.a.func,featureGlobalNav:s.a.bool};var j={renderSonicMenu:void 0,featureGlobalNav:false};var C=function e(t){var r=t.renderSonicMenu,a=t.featureGlobalNav;if(!a)return null;return n.a.createElement("div",{className:"p-global_nav__top"},n.a.createElement(v["a"],{renderSonicMenu:r}),n.a.createElement(d["a"],null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(m["a"],null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(c["a"],{className:"p-global_nav__top_button p-global_nav__top_button--dnd",menuPosition:"bottom-right",menuOffsetX:0,menuOffsetY:O,tooltipOffsetY:y}),n.a.createElement(h["a"],{icon:"mentions",pane:"mentions",tooltip:_.t("Activity")}),n.a.createElement(h["a"],{icon:"star-o",pane:"stars",tooltip:_.t("Starred items")}),n.a.createElement(f["a"],null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(p["a"],null))};C.displayName="TopNav";C.defaultProps=j;var E=function e(t){return{featureGlobalNav:Object(l["isFeatureEnabled"])(t,"feature_global_nav")}};t["c"]=Object(o["connect"])(E)(C)},21938:function(e,t,r){"use strict";t["a"]=o;var a=r(1);var n=r.n(a);var i=r(21871);var s=r(21835);function o(e,t){var r=Object(a["trim"])(t);r=Object(s["a"])(r,null,true);return Object(i["b"])(e,r)}},21939:function(e,t,r){"use strict";t["a"]=h;var a=r(95);var n=r.n(a);var i=r(96);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(21726);function h(e){return b.fromSuggestion(e)}var f={testing:{frecency:.01,type_navigation_user:4,type_navigation_channel:4},e1_lr:{frecency:.7387,type_navigation_user:.1258,file_suggestion_score:.0405,active_token_string:.0097,active_token_member:3e-4,active_token_phrase:-0,active_token_filter_on:-2e-4,query_suggestion_score_v2:-3e-4,active_token_filter_has:-7e-4,type_navigation_file:-8e-4,active_token_filter_during:-.0013,active_token_filter_after:-.0014,active_token_filter_before:-.0014,active_token_filter_in:-.0015,active_token_filter_to:-.0058,type_navigation_channel:-.0107,active_token_filter_from:-.0227,active_token_query_suggestion:-.023,type_query:-.0482,type_navigation_mpim:-.0661,type_navigation_expert_channel:-.1,bm25_score:1e-4},e2_unified:{frecency:1.1233,type_navigation_channel:-.0209,type_navigation_file:-7e-4,type_navigation_mpim:-.0676,type_navigation_user:-.9167,type_query:1.0322,active_token_filter_in:3e-4,active_token_filter_from:1.0586,active_token_filter_to:-.0065,active_token_filter_before:-.0014,active_token_filter_during:-.0011,active_token_filter_on:-1e-4,active_token_filter_after:-.001,active_token_filter_has:-6e-4,active_token_member:3e-4,active_token_string:.0079,active_token_phrase:0,string_exact_match:1e-4,string_exact_prefix_match:-.0105,string_normal_match:-3e-4,string_normal_prefix_match:-.0047,string_same_number_words:-.0082,excess_string_length:.0828,active_token_query_suggestion:-.0244,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0},e3_unified:{frecency:.1119,type_navigation_channel:-.0044,type_navigation_file:-.0036,type_navigation_mpim:-.0466,type_navigation_user:.0979,type_query:-.0432,active_token_filter_in:2e-4,active_token_filter_from:-.0151,active_token_filter_to:-.001,active_token_filter_before:-.0014,active_token_filter_during:-8e-4,active_token_filter_on:-2e-4,active_token_filter_after:-.001,active_token_filter_has:-7e-4,active_token_member:0,active_token_string:.014,active_token_phrase:0,string_exact_match:-1e-4,string_exact_prefix_match:-.0228,string_normal_match:-.001,string_normal_prefix_match:-.02,string_same_number_words:-.0158,excess_string_length:-.005,active_token_query_suggestion:-.0374,query_suggestion_score_v2:1,file_suggestion_score:1,type_navigation_expert_channel:-.1,bm25_score:1e-4,type_query_history:0}};var m=function(){function e(t){c()(this,e);this.featureList=t}u()(e,[{key:"weightForFeature",value:function e(t,r){return 1}},{key:"score",value:function e(t){var r=this;return Object(d["reduce"])(this.featureList,function(e,a){return e+r.weightForFeature(a,t)*a.numericValue},0)}},{key:"featuresVersion",get:function e(){return"0"}},{key:"serialized",get:function e(){var t=Object(d["join"])(Object(d["map"])(this.featureList,function(e){return e.serialized}),",");return this.featuresVersion+":"+t}}]);return e}();var b=function(e){s()(t,e);function t(e){c()(this,t);var r=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));window.AutocompleteModelWeightsMap=f;return r}u()(t,[{key:"weightForFeature",value:function e(t,r){return f[r][t.name]?f[r][t.name]:0}},{key:"featuresVersion",get:function e(){return"v4"}}],[{key:"fromSuggestion",value:function e(t){return new this([new C(t),new _("query_suggestion_score"),new k("type_navigation_channel",p["b"].CHANNEL_NAVIGATION,t),new k("type_navigation_file",p["b"].FILE_NAVIGATION,t),new k("type_navigation_mpim",p["b"].MPIM_NAVIGATION,t),new k("type_navigation_user",p["b"].USER_NAVIGATION,t),new k("type_query",p["b"].QUERY,t),new k("type_query_history",p["b"].QUERY_HISTORY,t),new j("active_token_filter_in",p["a"].FILTER_IN,t),new j("active_token_filter_from",p["a"].FILTER_FROM,t),new j("active_token_filter_to",p["a"].FILTER_TO,t),new j("active_token_filter_before",p["a"].FILTER_BEFORE,t),new j("active_token_filter_during",p["a"].FILTER_DURING,t),new j("active_token_filter_on",p["a"].FILTER_ON,t),new j("active_token_filter_after",p["a"].FILTER_AFTER,t),new j("active_token_filter_has",p["a"].FILTER_HAS,t),new j("active_token_member",p["a"].MEMBER,t),new j("active_token_string",p["a"].STRING,t),new j("active_token_phrase",p["a"].PHRASE,t),new T("string_exact_match",t,N),new T("string_exact_prefix_match",t,R),new T("string_normal_match",t,A),new T("string_normal_prefix_match",t,M),new T("string_same_number_words",t,P),new I("excess_string_length",t,x),new y(t),new S(t),new j("active_token_query_suggestion",p["a"].API,t),new E(t),new k("type_navigation_expert_channel",p["b"].EXPERT_CHANNEL_NAVIGATION,t),new w(t)])}}]);return t}(m);var g=function(){function e(t,r){c()(this,e);this._name=t;this._valueOrNull=r}u()(e,[{key:"name",get:function e(){return this._name}},{key:"numericValue",get:function e(){var t=parseFloat(this._valueOrNull);if(null===this._valueOrNull||isNaN(t))return 0;return t}},{key:"stringValue",get:function e(){if(null===this._valueOrNull||void 0===this._valueOrNull)return"";return this._valueOrNull.toString()}},{key:"serialized",get:function e(){return this.stringValue}}]);return e}();var _=function(e){s()(t,e);function t(e){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null))}return t}(g);var y=function(e){s()(t,e);function t(e){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"id",e.logId))}return t}(g);var O=function(e){s()(t,e);function t(e,r){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r?1:0))}u()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(g);var k=function(e){s()(t,e);function t(e,r,a){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a.type===r))}return t}(O);var j=function(e){s()(t,e);function t(e,r,a){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a.lastSuggestionToken&&a.lastSuggestionToken.type===r))}return t}(O);var C=function(e){s()(t,e);function t(e){c()(this,t);var r=null;e.type===p["b"].QUERY?r=e.lastSuggestionToken&&"number"===typeof e.lastSuggestionToken.frecencyScore?e.lastSuggestionToken.frecencyScore:null:e.type!==p["b"].CHANNEL_NAVIGATION&&e.type!==p["b"].MPIM_NAVIGATION&&e.type!==p["b"].USER_NAVIGATION||(r=e.frecencyScore);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"frecency",r))}return t}(g);var E=function(e){s()(t,e);function t(e){c()(this,t);var r=null;r=e.type===p["b"].QUERY&&e.lastSuggestionToken&&e.lastSuggestionToken.type===p["a"].API?e.lastSuggestionToken.querySuggestionScore:e.querySuggestionScore||r;return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"query_suggestion_score_v2",r))}return t}(g);var S=function(e){s()(t,e);function t(e){c()(this,t);var r=null;e.type===p["b"].FILE_NAVIGATION&&(r=e.rawScore);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"file_suggestion_score",r))}return t}(g);var w=function(e){s()(t,e);function t(e){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"bm25_score",e.bm25Score||null))}return t}(g);var I=function(e){s()(t,e);function t(e,r,a){c()(this,t);var i=t.textOrNullFromSuggestion(r);if(!i){var s=n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,null));return n()(s)}var o=t.clean(r.query);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a(i,o)))}u()(t,null,[{key:"clean",value:function e(t){return String(t)}},{key:"normalized",value:function e(r){return t.clean(r).toLowerCase().replace(/[^a-z0-9]/g," ").replace(/\s+/g," ")}},{key:"lastSuggestionTokenString",value:function e(r){return r&&r.lastSuggestionToken?t.clean(r.lastSuggestionToken.toString()):""}},{key:"textOrNullFromSuggestion",value:function e(r){if(t.isActiveTokenStringLike(r))return t.lastSuggestionTokenString(r);if(r.type===p["b"].FILE_NAVIGATION)return r.toString();return null}},{key:"isActiveTokenStringLike",value:function e(t){if(!t.lastSuggestionToken)return false;return t.lastSuggestionToken.type===p["a"].STRING||t.lastSuggestionToken.type===p["a"].PHRASE||t.lastSuggestionToken.type===p["a"].API}}]);return t}(g);var T=function(e){s()(t,e);function t(e,r,a){c()(this,t);return n()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,function(e,t){return a(e,t)?1:0}))}u()(t,[{key:"serialized",get:function e(){if(!this._valueOrNull)return"";return"1"}}]);return t}(I);function N(e,t){return e===t}function R(e,t){return Object(d["startsWith"])(e,t)}function A(e,t){return I.normalized(e)===I.normalized(t)}function M(e,t){return Object(d["startsWith"])(I.normalized(e),I.normalized(t))}function P(e,t){return Object(d["words"])(e).length+Object(d["endsWith"])(e," ")===Object(d["words"])(t).length}function x(e,t){return Math.max(0,e.length-t.length)}},2194:function(e,t){t=e.exports=function(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return i[e];var n=String(e);var s=r[n.toLowerCase()];if(s)return s;var s=a[n.toLowerCase()];if(s)return s;if(1===n.length)return n.charCodeAt(0);return};var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var a=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;n<123;n++)r[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)r[n-48]=n;for(n=1;n<13;n++)r["f"+n]=n+111;for(n=0;n<10;n++)r["numpad "+n]=n+96;var i=t.names=t.title={};for(n in r)i[r[n]]=n;for(var s in a)r[s]=a[s]},21940:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(1);var c=r.n(o);var l=function(){function e(t,r){n()(this,e);this.call=t;this.timeoutMs=r;this.update_date=null;this.cached_data=null;this.pending_promise=null;this.pending_promise_request_date=null}s()(e,[{key:"get",value:function e(){if(!this.update_date||new Date-this.update_date>this.timeoutMs||!this.cached_data)return this._callCacheGet();return Promise.resolve(this.cached_data)}},{key:"flushAll",value:function e(){this.update_date=null;this.cached_data=null;this.pending_promise&&this.pending_promise.cancel();this.pending_promise=null;this.pending_promise_request_date=null}},{key:"onCacheData",value:function e(t){Object(o["noop"])()}},{key:"_callCacheGet",value:function e(){var t=this;if(this.pending_promise&&new Date-this.pending_promise_request_date<3e4)return this.pending_promise;this.pending_promise_request_date=new Date;this.pending_promise=this.call.apply(this).then(function(e){t.cached_data=e;t.update_date=new Date;t.pending_promise=null;t.onCacheData(e);return t.cached_data});return this.pending_promise}}]);return e}()},21941:function(e,t,r){"use strict";t["a"]=a;function a(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r=2147483648&e;var a=2147483648&t;var n=1073741824&e;var i=1073741824&t;var s=(1073741823&e)+(1073741823&t);if(n&i)return 2147483648^s^r^a;if(n|i){if(1073741824&s)return 3221225472^s^r^a;return 1073741824^s^r^a}return s^r^a}function a(e,t,r){return e&t|~e&r}function n(e,t,r){return e&r|t&~r}function i(e,t,r){return e^t^r}function s(e,t,r){return t^(e|~r)}function o(e,n,i,s,o,c,l){var u=r(e,r(r(a(n,i,s),o),l));return r(t(u,c),n)}function c(e,a,i,s,o,c,l){var u=r(e,r(r(n(a,i,s),o),l));return r(t(u,c),a)}function l(e,a,n,s,o,c,l){var u=r(e,r(r(i(a,n,s),o),l));return r(t(u,c),a)}function u(e,a,n,i,o,c,l){var u=r(e,r(r(s(a,n,i),o),l));return r(t(u,c),a)}function d(e){var t=e.length;var r=t+8;var a=(r-r%64)/64;var n=16*(a+1);var i=Array(n-1);var s=0;var o=0;var c=0;while(c<t){s=(c-c%4)/4;o=c%4*8;i[s]|=e.charCodeAt(c)<<o;c++}s=(c-c%4)/4;o=c%4*8;i[s]|=128<<o;i[n-2]=t<<3;i[n-1]=t>>>29;return i}function v(e){var t="";var r="";for(var a=0;a<=3;a++){var n=e>>>8*a&255;r="0"+n.toString(16);t+=r.substr(r.length-2,2)}return t}function p(e){var t=e.replace(/\r\n/g,"\n");var r="";for(var a=0;a<t.length;a++){var n=t.charCodeAt(a);if(n<128)r+=String.fromCharCode(n);else if(n>127&&n<2048){r+=String.fromCharCode(n>>6|192);r+=String.fromCharCode(63&n|128)}else{r+=String.fromCharCode(n>>12|224);r+=String.fromCharCode(n>>6&63|128);r+=String.fromCharCode(63&n|128)}}return r}var h=[];var f=7;var m=12;var b=17;var g=22;var _=5;var y=9;var O=14;var k=20;var j=4;var C=11;var E=16;var S=23;var w=6;var I=10;var T=15;var N=21;h=d(p(e));var R=1732584193;var A=4023233417;var M=2562383102;var P=271733878;var x=R;var D=A;var F=M;var L=P;for(var B=0;B<h.length;B+=16){x=R;D=A;F=M;L=P;R=o(R,A,M,P,h[B+0],f,3614090360);P=o(P,R,A,M,h[B+1],m,3905402710);M=o(M,P,R,A,h[B+2],b,606105819);A=o(A,M,P,R,h[B+3],g,3250441966);R=o(R,A,M,P,h[B+4],f,4118548399);P=o(P,R,A,M,h[B+5],m,1200080426);M=o(M,P,R,A,h[B+6],b,2821735955);A=o(A,M,P,R,h[B+7],g,4249261313);R=o(R,A,M,P,h[B+8],f,1770035416);P=o(P,R,A,M,h[B+9],m,2336552879);M=o(M,P,R,A,h[B+10],b,4294925233);A=o(A,M,P,R,h[B+11],g,2304563134);R=o(R,A,M,P,h[B+12],f,1804603682);P=o(P,R,A,M,h[B+13],m,4254626195);M=o(M,P,R,A,h[B+14],b,2792965006);A=o(A,M,P,R,h[B+15],g,1236535329);R=c(R,A,M,P,h[B+1],_,4129170786);P=c(P,R,A,M,h[B+6],y,3225465664);M=c(M,P,R,A,h[B+11],O,643717713);A=c(A,M,P,R,h[B+0],k,3921069994);R=c(R,A,M,P,h[B+5],_,3593408605);P=c(P,R,A,M,h[B+10],y,38016083);M=c(M,P,R,A,h[B+15],O,3634488961);A=c(A,M,P,R,h[B+4],k,3889429448);R=c(R,A,M,P,h[B+9],_,568446438);P=c(P,R,A,M,h[B+14],y,3275163606);M=c(M,P,R,A,h[B+3],O,4107603335);A=c(A,M,P,R,h[B+8],k,1163531501);R=c(R,A,M,P,h[B+13],_,2850285829);P=c(P,R,A,M,h[B+2],y,4243563512);M=c(M,P,R,A,h[B+7],O,1735328473);A=c(A,M,P,R,h[B+12],k,2368359562);R=l(R,A,M,P,h[B+5],j,4294588738);P=l(P,R,A,M,h[B+8],C,2272392833);M=l(M,P,R,A,h[B+11],E,1839030562);A=l(A,M,P,R,h[B+14],S,4259657740);R=l(R,A,M,P,h[B+1],j,2763975236);P=l(P,R,A,M,h[B+4],C,1272893353);M=l(M,P,R,A,h[B+7],E,4139469664);A=l(A,M,P,R,h[B+10],S,3200236656);R=l(R,A,M,P,h[B+13],j,681279174);P=l(P,R,A,M,h[B+0],C,3936430074);M=l(M,P,R,A,h[B+3],E,3572445317);A=l(A,M,P,R,h[B+6],S,76029189);R=l(R,A,M,P,h[B+9],j,3654602809);P=l(P,R,A,M,h[B+12],C,3873151461);M=l(M,P,R,A,h[B+15],E,530742520);A=l(A,M,P,R,h[B+2],S,3299628645);R=u(R,A,M,P,h[B+0],w,4096336452);P=u(P,R,A,M,h[B+7],I,1126891415);M=u(M,P,R,A,h[B+14],T,2878612391);A=u(A,M,P,R,h[B+5],N,4237533241);R=u(R,A,M,P,h[B+12],w,1700485571);P=u(P,R,A,M,h[B+3],I,2399980690);M=u(M,P,R,A,h[B+10],T,4293915773);A=u(A,M,P,R,h[B+1],N,2240044497);R=u(R,A,M,P,h[B+8],w,1873313359);P=u(P,R,A,M,h[B+15],I,4264355552);M=u(M,P,R,A,h[B+6],T,2734768916);A=u(A,M,P,R,h[B+13],N,1309151649);R=u(R,A,M,P,h[B+4],w,4149444226);P=u(P,R,A,M,h[B+11],I,3174756917);M=u(M,P,R,A,h[B+2],T,718787259);A=u(A,M,P,R,h[B+9],N,3951481745);R=r(R,x);A=r(A,D);M=r(M,F);P=r(P,L)}var U=v(R)+v(A)+v(M)+v(P);return U.toLowerCase()}},21942:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"changeLocale",function(){return d});r.d(t,"getLocale",function(){return h});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(434);r.d(t,"getKeyboardLocale",function(){return u["a"]});var d=Object(l["a"])("Change a user\u2019s locale");d.propTypes={locale:c.a.string.isRequired};var v={locale:"en-US"};var p=Object(l["c"])(n()({},d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.locale;return s()({},e,{locale:r})}),v);t["default"]=p;var h=Object(l["d"])(function(e){return e&&e.i18n&&e.i18n.locale})},21943:function(e,t,r){"use strict";t["a"]=l;var a=r(1);var n=r.n(a);var i=r(21757);var s=r(43);var o=r(3044);var c=function e(t){return t.id};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=r.getId||c;var l=r.prefix||"";var u={};var d=[];Object(a["forEach"])(e,function(e,t){var r=n(e);if(r){u[r]=e;d.push({id:r})}else o["isDev"]&&Object(s["warn"])("frecencySort: Item "+t+" is missing an ID. You may need to provide or fix a getId function.")});var v=void 0;if(t){var p=Object(i["b"])(d,t);v=p.map(function(e){var t=e.id;return u[t]||null})}else{v=[];Object(a["forEach"])(Object(i["a"])(l),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var r=u[t];if(r){v.push(r);delete u[t]}});Object(a["forEach"])(u,function(e){return v.push(e)})}return v}},21944:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(37);var k=r(2111);var j=r(283);var C=r(5);var E=new C["b"]("app_actions");var S={onCloseComplete:g.a.func,onRetry:g.a.func.isRequired};var w={onCloseComplete:_["noop"]};var I=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onRetry=r.onRetry.bind(r);r.setToastRef=r.setToastRef.bind(r);return r}u()(t,[{key:"onRetry",value:function e(){this.toastRef&&this.toastRef.hideToast();this.props.onRetry()}},{key:"setToastRef",value:function e(t){this.toastRef=t}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.onRetry,i=s()(r,["onRetry"]);var o=E.rt("Sorry, that didn\u2019t work. <a>Try again?</a>",null,function(e){var r=e.text;return m.a.createElement(j["a"],{onClick:t.onRetry},r)});return m.a.createElement(k["a"],n()({ref:this.setToastRef},i),m.a.createElement(O["a"],{type:"warning",danger:true}),m.a.createElement("span",null,o))}}]);return t}(f["PureComponent"]);I.displayName="AppActionFailToast";I.defaultProps=w;t["a"]=I},21945:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.cmd_handlers.addEphemeralFeedback",n.a.noop)},21946:function(e,t,r){"use strict";r.d(t,"b",function(){return j});t["a"]=E;var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(22188);var c=r(43);var l=r(277);var u=r(21712);var d=r(54);var v=r(21699);var p=r(3287);var h=r(1007);var f=r(907);var m=r(2329);var b=r(398);var g=r(2219);var _=r(58);var y={DEFAULT:5e3,LONG:1e4};var O=80;var k=Object(v["b"])("Switch primary or secondary view on notification click",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.modelObject,n=r.message;Object(h["isReply"])(n)?e(Object(u["d"])({channelId:a.id,threadTs:n.thread_ts,highlightTs:n.ts||n.msg})):e(Object(l["a"])({id:a.id}))});k.propTypes={modelObject:s.a.object.isRequired,message:s.a.object.isRequired};var j=Object(v["b"])("Show a desktop notification",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.message,i=r.modelObject,s=r.options;if(!a||!i||Object(f["isNonExistent"])(i)){Object(c["warn"])("NOTIFICATIONS","Cannot show notification, missing arguments");return}if(!Object(m["b"])()){Object(c["warn"])("NOTIFICATIONS","Cannot show notification, permission denied");return}if(Object(_["e"])()&&!s.is_call_notification){Object(c["warn"])("NOTIFICATIONS","Cannot show notification while screen-sharing");return}var l=t();var u=s||{};S(l);Object(_["b"])().then(function(t){var r="new_message";if(t)r="none";else if(!Object(b["shouldAttachSoundToNotification"])()){Object(g["c"])("new_message");r="none"}if(b["isDesktop"])Object(b["notify"])(n()({},Object(o["c"])(l,i,a,u),Object(o["b"])(l,i,a,u,r)));else{var s=function t(){e(k({modelObject:i,message:a}))};C(n()({},Object(o["c"])(l,i,a,u),Object(o["a"])(l,a)),s)}})});j.propTypes={modelObject:s.a.object.isRequired,message:s.a.object.isRequired,options:s.a.object};function C(e,t){var r=e.title,a=e.content,n=e.icon,i=e.tag;if(!window.Notification){Object(c["warn"])("NOTIFICATIONS","window.Notification is not supported");return}var s=new Notification(r,{body:a,icon:n,tag:i});var o=function e(){window.focus();t&&t();s.close()};var l=function e(){setTimeout(function(){return s.close()},a&&a.length>O?y.LONG:y.DEFAULT)};try{s.onclick=o;s.onshow=l}catch(e){Object(c["error"])("NOTIFICATIONS","Unable to assign Notification event handlers",e);l()}}function E(e,t){if(!m["a"]){t&&t(false,-1);return}var r=function r(){t&&t(Object(m["b"])(),Object(m["h"])());e(Object(p["setNotificationPermission"])(Object(m["h"])()))};window.webkitNotifications&&window.webkitNotifications.requestPermission&&window.webkitNotifications.checkPermission?window.webkitNotifications.requestPermission(r):window.Notification&&window.Notification.requestPermission(r)}function S(e){if(!b["isDesktop"])return;if(!Object(d["getUserPref"])(e,"mac_ssb_bounce"))return;"long"===Object(d["getUserPref"])(e,"mac_ssb_bounce")?Object(b["bounceIndefinitely"])():Object(b["bounceOnce"])()}},21948:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setScreenReaderEnabled",function(){return p});r.d(t,"setZoomLevel",function(){return h});r.d(t,"isScreenReaderEnabled",function(){return g});r.d(t,"zoomLevel",function(){return _});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v;var p=Object(d["a"])("Toggle if a screen reader is enabled");p.propTypes=c.a.bool.isRequired;var h=Object(d["a"])("Update the zoom level");h.propTypes=c.a.number.isRequired;var f={screenReaderEnabled:false,zoomLevel:0};var m=[-3,-2,-1,0,1,2,3];var b=Object(d["c"])((v={},n()(v,p,function(e,t){if("boolean"!==typeof t)return e;if(t===e.screenReaderEnabled)return e;return s()({},e,{screenReaderEnabled:t})}),n()(v,h,function(e,t){if(!Object(l["isInteger"])(t))return e;if(!Object(l["includes"])(m,t))return e;if(t===e.zoomLevel)return e;return s()({},e,{zoomLevel:t})}),v),f);t["default"]=b;var g=Object(d["d"])(function(e){return e&&e.accessibility&&e.accessibility.screenReaderEnabled});var _=Object(d["d"])(function(e){return e&&e.accessibility&&e.accessibility.zoomLevel})},21949:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(21696);var c=r(21771);var l=r(21753);var u=r(21810);var d;var v={activeCurrency:null,activeTerm:l["c"].yearly,activePlanLevel:null,activePaymentMethod:l["a"].CREDIT_CARD,apiError:false,availablePlans:{},activePlanCost:{},cachedCost:{},isPlansAndCostDataLoaded:false};var p=Object(o["c"])((d={},n()(d,u["j"],function(e,t){if(t.currency){var r=Object(c["b"])(e).includes(t.currency);if(!r)return e}else if(t.term&&!t.term===l["c"].monthly&&!t.term===l["c"].monthly)return e;var a=t.currency?t.currency:e.activeCurrency;var n=t.term?t.term:e.activeTerm;return s()({},e,{activeCurrency:a,activeTerm:n})}),n()(d,u["f"],function(e,t){var r=Object.keys(t.availablePlans)[0];var a=s()({},e,{activeCurrency:r,availablePlans:s()({},t.availablePlans),apiError:false});return a}),n()(d,u["b"],function(e,t){var r=t.activePlanCost,a=t.companyAddress,i=t.isInvoice,o=t.numInvoiceSeats;var c=Object(l["d"])(r.id,a,i,o);var u=s()({},e,{activePlanCost:s()({},e.activePlanCost,t.activePlanCost),cachedCost:s()({},e.cachedCost,n()({},c,t.activePlanCost)),apiError:false});return u}),n()(d,u["g"],function(e){var t=s()({},e,{apiError:true});return t}),n()(d,u["e"],function(e){var t=s()({},e,{isPlansAndCostDataLoaded:true});return t}),n()(d,u["i"],function(e,t){var r=s()({},e,{activePlanLevel:t});return r}),n()(d,u["h"],function(e,t){var r=s()({},e,{activePaymentMethod:t});return r}),d),v);t["a"]=p},2195:function(e,t,r){"use strict";t["a"]=a;t["b"]=n;t["c"]=i;t["d"]=s;function a(e,t){return e<t}function n(e){var t=e.sluggifyEnabled,r=e.sluggifyDelimiter,a=e.sluggifyKeyName,n=e.single;if(!t||!r||!a||n)return false;return true}function i(e){return void 0!==e.slugId}function s(e,t){var r=t.canSlug,a=t.noDefaultSelection;var n=[];var s=[];var o={};e.forEach(function(e){var t=e;if(r&&i(t)){s.push(t);return}n.push(t);o[t.id]=t;if(t.group||t.children&&t.children.length){t.group=true;t.children.forEach(function(e){var r=e;r.isChild=true;r.parentId=t.id;n.push(r);o[r.id]=r;e.preselected&&!a&&s.push(r)})}t.preselected&&!a&&s.push(t)});return{currentItems:n,itemMapById:o,preselected:s}}},21950:function(e,t,r){"use strict";r.d(t,"a",function(){return c});r.d(t,"b",function(){return l});var a=r(189);var n=r.n(a);var i=r(21700);var s=r(21704);var o=r(21753);var c=Object(s["a"])("Fetch Available Plans",function(e,t,r){return e(Object(i["a"])({method:"retail.plans",args:r})).then(function(e){return Object(o["f"])(e.plans)})});var l=Object(s["a"])("Fetch Available Plans",function(e,t,r){var a=r.productId,s=r.country,c=r.postalCode,l=r.isBusinessPurchase,u=r.isInvoice,d=r.numInvoiceSeats;var v={product_id:a,country:s,zip:c,is_business:l};u&&(v=n()({},v,{requested_invoice_seats:d}));return e(Object(i["a"])({method:"retail.cost",args:v})).then(function(e){return Object(o["e"])(e.plan_cost)})})},21951:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"jumpToReply",function(){return _});r.d(t,"clearHighlight",function(){return y});r.d(t,"getStartTs",function(){return j});r.d(t,"getHighlight",function(){return C});r.d(t,"requestReplies",function(){return E});var a=r(1395);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(21696);var h=r(21702);var f=r(774);var m=r(21783);var b=r(903);var g;var _=Object(p["a"])("Jump to a reply timestamp");_.propTypes=u.a.string;var y=Object(p["a"])("Clears the active highlight");y.propTypes=null;var O={startTs:null,highlightTs:null,highlightKey:null};var k=Object(p["c"])((g={},s()(g,_,function(e,t){return{startTs:t,highlightTs:t,highlightKey:Object(d["uniqueId"])("threads-flexpane-highlight")}}),s()(g,y,function(e){return c()({},e,{highlightTs:null,highlightKey:null})}),g),O);t["default"]=k;var j=Object(p["d"])(function(e){return e&&e.threadsFlexpane&&e.threadsFlexpane.startTs});var C=Object(p["d"])(function(e){return e&&e.threadsFlexpane&&{highlightTs:e.threadsFlexpane.highlightTs,highlightKey:e.threadsFlexpane.highlightKey}});var E=Object(p["e"])("gets thread replies from the API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,i=r.threadTs,s=r.oldest,o=r.latest;var c=Object(m["b"])(a,i);if(s&&o)return Promise.all([e(Object(b["c"])({channelId:a,threadTs:i,latest:o})),e(Object(b["c"])({channelId:a,threadTs:i,oldest:s}))]).then(function(t){var r=n()(t,2),a=r[0],i=r[1];var l=a.msgs.splice(0,1);var u=Object(d["uniqBy"])(a.msgs.concat(i.msgs.slice(1)),"ts");var v=u.map(function(e){return e.ts});e(Object(h["addMessages"])(l));e(Object(f["a"])({msgs:u,channelId:c,hasMore:{hasMoreStart:a.hasMore,hasMoreEnd:i.hasMore},oldest:Object(d["min"])([s,Object(d["min"])(v)]),latest:Object(d["max"])([o,Object(d["max"])(v)])}))});return e(Object(b["c"])({channelId:a,threadTs:i,oldest:s,latest:o})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.msgs,a=t.hasMore;var n=r.splice(0,1);e(Object(h["addMessages"])(n));e(Object(f["a"])({msgs:r,channelId:c,hasMore:a,oldest:s,latest:o}))})});E.propTypes={channelId:u.a.string.isRequired,threadTs:u.a.string.isRequired,oldest:u.a.string,latest:u.a.string}},21953:function(e,t,r){"use strict";var a=r(22229);r.d(t,"a",function(){return a["a"]});var n=r(22230);r.d(t,"b",function(){return n["a"]})},21954:function(e,t,r){"use strict";t["a"]=b;var a=r(189);var n=r.n(a);var i=r(43);var s=r(22232);var o=r(21707);var c=r(21701);var l=r(12);var u=r(21711);var d=r(21702);var v=r(907);var p=r(2329);var h=r(21864);var f=r(21946);var m=new Set;function b(e,t,r){var a=r();if(!Object(l["isClientApp"])(a))return;var n=Object(u["u"])(a,e.channel)&&Object(u["e"])(a,e.channel);var o=_(e);var d=void 0;d="desktop_notification"===e.type?Object(p["j"])(a,e):Object(v["isIm"])(n)?Object(p["k"])(a,e,n):Object(p["i"])(a,e,n);d===h["a"].NONE&&m.has(o)&&(d=h["a"].ALREADY_SHOWN);if(Object(c["a"])()&&d===h["a"].PERMISSION_DENIED)Object(f["a"])(t,function(a){a&&b(e,t,r)});else if(d!==h["a"].NONE){var g=Object(h["b"])(d,n&&n.id,e.ts);if(g){Object(i["warn"])("Notification ("+e.type+") suppressed because:\n"+g);Object(s["a"])(a,{channel:n.id,timestamp:e.ts||e.msg,description:g})}}else{t(Object(f["b"])({message:e,modelObject:n,options:"desktop_notification"===e.type?{skip_formatting:true,launch_uri:e.launchUri,image_uri:e.imageUri,avatar_image:e.avatarImage}:{}}));m.add(o);Object(s["a"])(a,{channel:n.id,timestamp:e.ts||e.msg,description:"Notification shown"})}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.timestamp;var a=arguments[1];var i=arguments[2];var s=i();var o=Object(d["getMessageByTimestamp"])(s,t,r);if(!o)return;if(o._ignore_dnd)return;a(Object(d["addMessages"])([n()({},o,{_ignore_dnd:true})]));var c=Object(d["getMessageByTimestamp"])(i(),t,r);b(c,a,i)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.msg,a=e.ts;return t&&(a||r)?t+":"+(a||r):Date.now().toString()}Object(o["a"])("desktop_notification",b);Object(o["a"])("dnd_override",g)},21955:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(21696);var c=r(21840);var l=r(21811);var u,d;var v={countries:[],usStates:{},canadaStates:{},vatCountries:{},abnCountries:{},stripeApiKey:null};var p={companyName:"",street:"",suite:"",city:"",postalCode:"",region:"",country:"",isBusinessPurchase:false,isVatIdAvailable:false,vatId:"",abnId:"",validationErrors:{},isValidationActive:false};var h={code:"",message:"",type:""};var f={elementType:"",complete:false,empty:true,error:h};var m=(u={cardName:f},s()(u,c["a"].CARD_NUMBER,f),s()(u,c["a"].CARD_EXPIRY,f),s()(u,c["a"].CARD_CVC,f),s()(u,c["a"].POSTAL_CODE,f),s()(u,"token",{}),s()(u,"tokenError",h),u);var b={ok:false,error:"",msg:""};var g={numberOfUsers:"",additionalBillingContacts:[],purchaseOrderNumber:"",validationErrors:{}};var _={config:v,companyAddress:p,isCheckoutAddressFormDataLoaded:false,creditCardData:m,isCreatingCreditCardToken:false,paymentStatus:b,invoiceData:g};var y=Object(o["c"])((d={},s()(d,l["a"],function(e,t){var r=n()({},e,{config:n()({},e.config,{countries:t.statesAndCountries.countries||[],usStates:t.statesAndCountries.usStates||{},canadaStates:t.statesAndCountries.canadaStates||{},vatCountries:t.statesAndCountries.vatCountries||{},abnCountries:t.statesAndCountries.abnCountries||{}}),companyAddress:n()({},e.companyAddress,{companyName:t.companyAddress.companyName||"",street:t.companyAddress.street||"",suite:t.companyAddress.suite||"",city:t.companyAddress.city||"",postalCode:t.companyAddress.postalCode||"",region:t.companyAddress.region||"",country:t.companyAddress.country||"",isBusinessPurchase:t.companyAddress.isBusinessPurchase||false,isVatIdAvailable:t.companyAddress.isVatIdAvailable||false,vatId:t.companyAddress.vatId||"",abnId:t.companyAddress.abnId||""}),isCheckoutAddressFormDataLoaded:true});return r}),s()(d,l["n"],function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,t)});return r}),s()(d,l["d"],function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:t,isValidationActive:true})});return r}),s()(d,l["c"],function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,t.error))})});return r}),s()(d,l["b"],function(e,t){var r=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,null))})});return r}),s()(d,l["e"],function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,s()({},t.elementType,t))});if("cardName"!==t.elementType){r.creditCardData.token=null;r.creditCardData.tokenError=null}return r}),s()(d,l["o"],function(e,t){var r=n()({},e,{creditCardData:n()({},e.creditCardData,{token:t.token,tokenError:t.error})});return r}),s()(d,l["q"],function(e,t){var r=n()({},e,{isCreatingCreditCardToken:t});return r}),s()(d,l["j"],function(e,t){var r=n()({},e,{paymentStatus:n()({},e.paymentStatus,{ok:t.ok,error:t.error,msg:t.msg})});return r}),s()(d,l["k"],function(e,t){var r=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey})});return r}),s()(d,l["p"],function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,t.data,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,null))})});return r}),s()(d,l["g"],function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:t})});return r}),s()(d,l["f"],function(e,t){var r=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,t.error))})});return r}),d),_);t["a"]=y},21956:function(e,t,r){"use strict";r.d(t,"b",function(){return c});r.d(t,"a",function(){return l});r.d(t,"e",function(){return u});r.d(t,"d",function(){return d});r.d(t,"c",function(){return v});var a=r(21700);var n=r(21704);var i=r(1);var s=r.n(i);var o=r(21790);var c=Object(n["a"])("Fetch States and Countries",function(e){return e(Object(a["a"])({method:"payments.billing.addresses.locations"})).then(function(e){if(Object(i["includes"])(Object(i["keys"])(e.vat_countries),o["c"].UNITED_KINGDOM)){e.vat_countries[o["c"].UNITED_KINGDOM_UK]=e.vat_countries[o["c"].UNITED_KINGDOM];delete e.vat_countries[o["c"].UNITED_KINGDOM]}return{countries:e.countries,usStates:e.us_states,canadaStates:e.canada_states,vatCountries:e.vat_countries,abnCountries:e.abn_countries,taxableZipcodes:e.taxable_zipcodes}})});var l=Object(n["a"])("Fetch Company Address",function(e){return e(Object(a["a"])({method:"payments.billing.addresses.get"})).then(function(e){return{companyName:e.company_name,street:e.street1,suite:e.street2,city:e.city,postalCode:e.zip,region:e.state,country:e.country,isBusinessPurchase:e.is_business,isVatIdAvailable:!e.waiting_for_vat,vatId:e.vat_id,abnId:e.abn_id}})});var u=Object(n["a"])("Validate and Persist Company Address",function(e,t,r){var n={abn_id:r.abnId,city:r.city,company_name:r.companyName,country:r.country,is_business:r.isBusinessPurchase,state:r.region,street1:r.street,street2:r.suite,vat_id:r.vatId,waiting_for_vat:!r.isVatIdAvailable,zip:r.postalCode};return e(Object(a["a"])({method:"payments.billing.addresses.validateAndSet",args:n})).then(function(e){return e})});var d=Object(n["a"])("Submit information from the payment form to the server to complete the purchase of a paid Slack plan",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.tokenId,i=r.productId;return e(Object(a["a"])({method:"payments.checkout.charge",args:{stripe_token:n,product_id:i,is_new_card:true}})).then(function(e){return e}).catch(function(e){throw e})});var v=Object(n["a"])("Fetch Stripe Customer",function(e,t,r){return e(Object(a["a"])({method:"payments.getStripeCustomer",args:{currency:r}})).then(function(e){return e})})},21957:function(e,t,r){"use strict";r.d(t,"a",function(){return o});r.d(t,"b",function(){return l});var a=r(21700);var n=r(21704);var i=function e(t){return{id:String(t.action_id),type:t.type,name:t.name,description:t.description,callbackId:t.callback_id}};var s=function e(t){return{actionUrl:t.action_url||"",suggestionUrl:t.suggestion_url||"",actions:(t.actions||[]).map(i)}};var o=Object(n["a"])("fetch interactive messages / actions config",function(e,t,r){return e(Object(a["a"])({method:"developer.apps.actions.list",args:{app_id:r}})).then(s)});var c=function e(t){return{action_id:Number(t.id)||t.id,type:t.type,name:t.name,description:t.description,callback_id:t.callbackId}};var l=Object(n["a"])("save existing actions config",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.appId,i=r.actionUrl,o=r.suggestionUrl,l=r.actions;var u=e(Object(a["a"])({method:"developer.apps.actions.update",args:{app_id:n,action_url:i,actions:JSON.stringify(l.map(c))}})).then(s);return u.then(function(){return e(Object(a["a"])({method:"developer.apps.suggestions.update",args:{app:n,suggestion_url:o}}))}).then(function(){return u})})},21958:function(e,t,r){"use strict";var a=r(22631);var n=r(22635);var i=r(22636);var s=r(22637);var o=r(22638);var c=r(22639);var l=r(22640);var u=r(22641);r.d(t,"d",function(){return n["a"]});r.d(t,"h",function(){return c});r.d(t,"e",function(){return l});r.d(t,"f",function(){return u});r.d(t,"c",function(){return i["a"]});r.d(t,"a",function(){return s["a"]});r.d(t,"b",function(){return o["a"]});t["g"]=a["a"]},2196:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(60);var O=new _["b"]("channel_options");var k={active:v.a.bool,dataQaPrefix:v.a.string,disabled:v.a.bool,item:v.a.object,onClick:v.a.func,onMouseLeave:v.a.func,onMouseMove:v.a.func,selected:v.a.bool,style:v.a.object,template:v.a.func,customClasses:v.a.string};var j={active:false,dataQaPrefix:"lfs",disabled:false,item:{},onClick:b["noop"],onMouseLeave:b["noop"],onMouseMove:b["noop"],selected:false,style:"",template:function e(t){return t.label},customClasses:""};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickHandler=r.onClickHandler.bind(r);return r}s()(t,[{key:"onClickHandler",value:function e(t){t.preventDefault();t.stopPropagation();if(this.props.disabled)return;this.props.onClick(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var r=m()("c-lazy_filter_select__item",{"c-lazy_filter_select__item--active":this.props.active,"c-lazy_filter_select__item--selected":this.props.selected,"c-lazy_filter_select__item--child":t.isChild,"c-lazy_filter_select__item--group":t.group,"c-lazy_filter_select__item--disabled":this.props.disabled},this.props.customClasses);var a="lfs-item-"+t.id;var n=this.props.dataQaPrefix+"-item-"+t.id;var i=h.a.createElement("div",{className:r,"data-id":t.id,"data-qa":n,id:a,onClick:this.onClickHandler,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,role:"option",style:this.props.style,tabIndex:"-1",key:"list-item-"+t.id},this.props.template(t));if(this.props.disabled){var s=O.t("Cannot be removed");return h.a.createElement(y["d"],{position:"top",tip:s},i)}return i}}]);return t}(p["PureComponent"]);C.displayName="LazyFilterSelectListItem";t["a"]=C;C.defaultProps=j},2197:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(60);var O=new _["b"]("channel_options");var k={dataQaPrefix:v.a.string,disabled:v.a.bool,highlighted:v.a.bool,item:v.a.object,onClick:v.a.func,onHighlight:v.a.func,single:v.a.bool,template:v.a.func};var j={dataQaPrefix:"lfs",disabled:false,highlighted:false,item:{},onClick:b["noop"],onHighlight:b["noop"],single:false,template:function e(t){return t.label}};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickHandler=r.onClickHandler.bind(r);return r}s()(t,[{key:"onClickHandler",value:function e(t){if(this.props.disabled||this.props.single)return;var r=t.clientX;var a=t.target.getBoundingClientRect();t.stopPropagation();r>a.width+a.left?this.props.onClick(this.props.item):this.props.onHighlight(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var r=m()("c-lazy_filter_select__token","c-lazy_filter_select__token--selected",{"c-lazy_filter_select__token--single":this.props.single,"c-lazy_filter_select__token--highlighted":this.props.highlighted,"c-lazy_filter_select__token--disabled":this.props.disabled});var a=t.slugId?t.slugId:t.id;var n="lfs-token-"+a;var i=this.props.dataQaPrefix+"-item-"+a;var s=h.a.createElement("div",{className:r,"data-id":a,"data-qa":i,id:n,key:"token-"+t.id,onClick:this.onClickHandler,tabIndex:-1},this.props.template(t));if(this.props.disabled){var o=O.t("Cannot be removed");return h.a.createElement(y["d"],{position:"top",tip:o},s)}return s}}]);return t}(p["PureComponent"]);C.displayName="LazyFilterSelectToken";t["a"]=C;C.defaultProps=j},21976:function(e,t,r){"use strict";t["b"]=Y;t["c"]=J;var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(333);var _=r(1);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(43);var C=r(378);var E=r(21727);var S=r(12);var w=r(3278);var I=r(1037);var T=r(3203);var N=r(5);var R=r(37);var A=r(283);var M=r(3184);var P=r(2111);var x=r(21723);var D=r(21862);var F=r(69);var L=r(21977);var B=r(21748);var U=r(21724);var q=r(20149);var H=r.n(q);var W=new N["b"]("grid_onboarding");var G={orgName:h.a.string,selectedMember:h.a.object.isRequired,featureZeroWorkspaceOnboarding:h.a.bool.isRequired,fetchWorkspaces:h.a.func.isRequired,scrollElement:h.a.any,enqueueToast:h.a.func,onFooterClick:h.a.func};var V={orgName:"",workspaces:[],onWorkspaces:false,scrollElement:window,enqueueToast:_["noop"],onFooterClick:_["noop"]};var z=24;var K=1200;function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(_["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function Y(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&r}function J(e){var t=e.totalWorkspaces,r=e.onWorkspaces;return!t&&!r}function Z(e){if(!e)return"";return{oneJoinableWorkspace:W.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:W.t("Join the workspace that seems right for your role to get started."),noAccess:W.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:W.t("Try searching for someone else on your team."),onApiError:W.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,r=e.key,a=e.tag;if("a"===a)return m.a.createElement(A["a"],{onClick:function e(){return window.location.reload(true)},target:"_self",key:r},t);return{text:t}})}}var X=function e(t){var r=t.workspaces,a=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";var o=Z(s);if(i)return o.onApiError;var c=Q(r).length;if(1===c)return o.oneJoinableWorkspace;if(c>1)return o.moreThanOneJoinableWorkspaces;if(a)return o.noAccess;if(n)return o.noWorkspaces;return""};var $=function e(t){var r=t.noAccessToWorkspaces,a=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";if(s)return W.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(N["l"])(n)});if(r)return W.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(N["l"])(n)});if(a)return W.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(N["l"])(n)});return W.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(N["l"])(n),numWorkspaces:i})};var ee=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};r.resultsList=null;r.searchBar=null;r.userHasNoAccessToWorkspaces=false;r.memberHasNoWorkspaces=false;r.noWorkspacesToDisplay=false;r.doRenderSearchAgainButton=false;Object(_["bindAll"])(r,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return r}c()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.setIsMobileView(Object(U["c"])());this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeFetchNextPage(r);this.maybeTriggerNewSearch(r);this.maybeUpdateMemberRealName(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(U["c"])();var r=this.state.isMobileView!==t;if(t||r){this.resultsList.invalidateRowHeights();r&&this.setIsMobileView(t)}}},{key:"onScroll",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:r,scrollHeight:a})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var r=t.selectedOptionData;r&&this.setSelectedMember(r)}},{key:"onButtonActionReject",value:function e(t){var r=t.node;r&&this.setToastText(r)}},{key:"onButtonActionResolve",value:function e(t){var r=t.node,a=t.i,n=t.workspace;Object(_["isNumber"])(a)&&n&&this.setWorkspaceByIndex({index:a,workspace:n});r&&this.setToastText(r)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var r=t.workspaces,a=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:r,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var r=t.index,a=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(r>=t.length){Object(j["warn"])("SearchResultsScreen: Out of bounds index "+r+" passed into setWorkspaceByIndex");return e}t[r]=a;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{viewport:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:m.a.createElement(P["a"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var r=Object(T["l"])(this.state.selectedMember);this.setMemberRealName(r)}}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop,a=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:a});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=this.state,a=r.nextCursorMark,n=r.selectedMember;this.setHasApiError(false);return this.props.fetchWorkspaces({nextCursorMark:a,id:Object(_["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var r=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});a||Object(U["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(_["get"])(e,"num_found",0)})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);Object(j["error"])("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<K}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return m.a.createElement("div",{className:"p-grid_onboarding_results__search"},m.a.createElement(D["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.totalWorkspaces,n=r.selectedMember,i=r.hasApiError;var s=Object(T["l"])(n);var o=$({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:a,memberRealName:s,hasApiError:i,featureZeroWorkspaceOnboarding:t});var c=k()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return m.a.createElement("div",{className:c},m.a.createElement("span",{className:"p-grid_onboarding__results_heading"},m.a.createElement(x["a"],{entityType:"member",dimension:z,entityData:n,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),o))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var r=this.state,a=r.workspaces,n=r.hasApiError;var i=X({workspaces:a,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n});var s=k()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return m.a.createElement("div",{className:s},i)}},{key:"renderWorkspaceCard",value:function e(t){var r=this;var a=this.state,i=a.workspaces,s=a.totalWorkspaces;var o=k()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===s-1});return m.a.createElement(L["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:o,onActionResolve:function e(a){return r.onButtonActionResolve(n()({},a,{i:t}))},onActionReject:function e(a){return r.onButtonActionReject(n()({},a,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var r=this.props.scrollElement;return m.a.createElement(g["c"],{scrollElement:r,onScroll:this.onScroll},function(e){var a=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return m.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},m.a.createElement(B["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:r,onScroll:i,height:a,isScrolling:n,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function e(){return m.a.createElement(C["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},m.a.createElement(M["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},W.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var r=k()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return m.a.createElement(C["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement(A["a"],{onClick:this.onFooterClick,className:r},W.t("View all {orgName} workspaces",{orgName:t}),m.a.createElement(R["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return m.a.createElement("div",{className:"p-grid_onboarding__spinner"},m.a.createElement(F["a"],{size:"medium",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,r=t.loadingWorkspaces,a=t.selectedMember;var n=r&&this.memberHasNoWorkspaces;if(n||!a)return this.renderInfiniteSpinner();return m.a.createElement(m.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),r&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!r&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,r=t.totalWorkspaces,a=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=Y({totalWorkspaces:r,onWorkspaces:a});this.memberHasNoWorkspaces=J({totalWorkspaces:r,onWorkspaces:a});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return m.a.createElement(C["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(f["Component"]);ee.displayName="SearchResultsScreen";ee.defaultProps=V;var te=function e(t,r){var a=r.selectedMember,n=r.workspaces;var i=Object(w["getEnterpriseOrgName"])(t);var s=function e(r){return Object(I["f"])(t,r)};return{selectedMember:a,workspaces:n,orgName:i,fetchWorkspaces:s,featureZeroWorkspaceOnboarding:Object(S["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(S["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var re={enqueueToast:E["enqueueToast"]};t["a"]=Object(b["connect"])(te,re)(ee)},21977:function(e,t,r){"use strict";var a=r(21925);t["a"]=a["a"]},21978:function(e,t,r){"use strict";var a=r(22141);t["a"]=a["a"]},21979:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9370);var s=r.n(i);var o=r(9520);var c=r.n(o);var l=Object(i["createDevTools"])(n.a.createElement(c.a,{expandActionRoot:false,expandStateRoot:false}));t["a"]=l},21983:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(1);var O=r.n(y);var k=r(113);var j=r(21706);var C=r(21779);var E=r(21780);var S=r(21869);var w={file:k["a"].File().isRequired,fileFromRedux:k["a"].File().isRequired,index:m.a.number,clogLinkClick:m.a.func,className:m.a.string,fullWidth:m.a.bool,onClick:m.a.func,hasHighlightMarkers:m.a.bool};var I={index:null,clogLinkClick:y["noop"],className:null,fullWidth:false,onClick:y["noop"],hasHighlightMarkers:false};var T=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}c()(t,[{key:"onClick",value:function e(t){t.preventDefault();t.stopPropagation();t.nativeEvent.stopImmediatePropagation();this.props.onClick(t,{file:this.props.file,index:this.props.index})}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.fileFromRedux,i=t.clogLinkClick,s=t.fullWidth,o=t.hasHighlightMarkers;var c=_()("p-search_file",this.props.className);var l=n()({},a,{title:o?r.search_title:a.title});return h.a.createElement(C["a"],{file:l,className:c,fullWidth:s,clogLinkClick:i},h.a.createElement(E["a"],{file:l,hasHighlightMarkers:o,onClick:this.onClick},h.a.createElement(S["a"],{file:l,excludeTime:true})))}}]);return t}(p["PureComponent"]);T.displayName="SearchFile";T.defaultProps=I;var N=function e(t,r){var a=r.file;return{fileFromRedux:a?Object(j["getFileById"])(t,a.id):null}};t["a"]=Object(b["connect"])(N)(T)},21984:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});var a=r(10);var n=Object(a["c"])("TS.client.unread.bulk_unread_count_change_sig.dispatch");var i=Object(a["c"])("TS.client.unread.legacyUpdateSortOrder");var s=Object(a["c"])("TS.client.unread.reload")},21988:function(e,t,r){"use strict";var a=/^[/\uff0f][^/\uff0f\s]/;t["a"]=function(e){return a.test(e)}},21989:function(e,t,r){"use strict";t["a"]=l;var a=r(1);var n=r.n(a);var i=r(21729);var s=r(21758);var o=r(21787);var c=r(21788);function l(e,t){var r=Object(i["b"])(e,{shouldRenderEmojiAsText:t});return n.a.reduce(r.contents,function(e,t){if(t.attributes&&t.attributes.slackmention){var r=t.attributes.slackmention.id;if(Object(s["a"])(r))return e+"@"+Object(c["a"])(r);if(Object(o["a"])(r))return""+e+t.attributes.slackmention.label;return e+"@"+r}if(t.insert&&t.insert.slackemoji)return e+t.insert.slackemoji;return e+t.insert},"")}},21990:function(e,t,r){"use strict";t["a"]=k;t["d"]=j;t["c"]=C;t["b"]=E;var a=r(1);var n=r.n(a);var i=r(5);var s=r(3226);var o=r(21714);var c=r(12);var l=r(21697);var u=r(907);var d=r(22181);var v=r(22989);var p=r(22992);var h=r(22182);var f=r(23077);var m=r(21991);var b=r(22183);var g=new i["b"]("cmd_handlers");var _=[{name:"/away",localized:"/"+g.t("away"),type:"client",autocomplete:true,desc:g.t('Toggle your "away" status'),action:d["a"]},{name:"/collapse",localized:"/"+g.t("collapse"),type:"client",autocomplete:true,desc:g.t("Collapse all files in the current channel (opposite of /expand)"),action:v["a"]},{name:"/expand",localized:"/"+g.t("expand"),type:"client",autocomplete:true,desc:g.t("Expand all files in the current channel (opposite of /collapse)"),action:p["a"]},{name:"/legacy",type:"client",autocomplete:true,desc:"Switch to the familiar legacy Slack client",action:h["a"],isEnabled:h["b"]},{name:"/rename",localized:"/"+g.t("rename"),type:"client",autocomplete:true,desc:function e(t){var r=Object(o["getPrimaryView"])(t);var a=Object(s["a"])(r)&&r;var n=Object(l["getChannelById"])(t,a);if(Object(u["isExternallySharedChannel"])(n))return Object(c["isFeatureEnabled"])(t,"feature_inform_changes_to_shared_channels_are_workspace_specific")?g.t("Rename this channel for your workspace"):g.t("Rename a channel");return g.t("Rename a channel")},action:f["a"]},{name:"/sonic",type:"client",autocomplete:true,desc:"Switch to the prototype Sonic client",action:m["a"],isEnabled:m["b"]},{name:"/topic",localized:"/"+g.t("topic"),type:"client",autocomplete:true,desc:function e(t){var r=Object(o["getPrimaryView"])(t);var a=Object(s["a"])(r)&&r;var n=Object(l["getChannelById"])(t,a);if(Object(u["isExternallySharedChannel"])(n))return Object(c["isFeatureEnabled"])(t,"feature_inform_changes_to_shared_channels_are_workspace_specific")?g.t("Set the channel topic for your workspace"):g.t("Set the channel topic");return g.t("Set the channel topic")},args:[{name:g.t("new topic"),optional:true}],action:b["a"]}];var y=Object(a["keyBy"])(_,"name");function O(e){return y[e]}function k(){return _}function j(e,t){var r=O(t);if(!r)return false;return!Object(a["isFunction"])(r.isEnabled)||r.isEnabled(e)}function C(e,t){var r=O(t);if(!r)return;return Object(a["isFunction"])(r.desc)?r.desc(e):r.desc}function E(e){var t=O(e);if(!t)return null;return t.action}},21991:function(e,t,r){"use strict";r.d(t,"b",function(){return u});var a=r(21699);var n=r(21714);var i=r(3270);var s=r(12);var o=r(21710);var c=r(21701);var l=Object(a["b"])("/sonic slash command",function(e,t){var r='Sonic is still very rough around the edges. To get back to the normal Slack client, type "/legacy" or just quit and reload Slack.';if(window.confirm(r)){var a=t();var s=Object(i["getTeamId"])(a);var c=Object(n["getPrimaryView"])(a);var l=location.hostname.split(".").slice(1).join(".");var u=Object(o["a"])(window.location.search);var d=Object(o["b"])(u);d=Object(o["e"])(d,"coming_from_legacy","1");window.location="https://app."+l+"/"+s+"/"+c+d}});l.propTypes=null;t["a"]=l;var u=function e(t){return!Object(c["a"])()&&Object(s["isFeatureEnabled"])(t,"feature_tinyspeck")}},21992:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1549);var s=r(1007);var o=r(21699);var c=r(22187);var l=r(104);var u=r(21702);var d=r(12);var v=Object(o["b"])('Attempt to edit the previous message via the "/s" shortcut',function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.prev,o=r.next,v=r.ignoreCase,p=r.replaceAll;var h=t();var f=Object(u["getMessagesByChannelId"])(h,a);var m=Object(d["getCurrentUserId"])(h);var b=Object(s["getLastMessageByMember"])(f,m);if(!b||!b.text)return Promise.reject(new Error("Message not found"));var g=Object(l["e"])(b.text,null,{for_edit:true});var _=Object(c["a"])(g,n,o,{ignoreCase:v,replaceAll:p});if(!_||_===g)return Promise.reject(new Error("Message text unchanged"));return e(Object(i["a"])({channelId:a,ts:b.ts,text:_}))});v.propTypes={channelId:n.a.string,prevWord:n.a.string,nextWord:n.a.string,ignoreCase:n.a.bool,replaceAll:n.a.bool};t["a"]=v},21993:function(e,t,r){"use strict";t["b"]=K;t["a"]=Q;var a=r(1);var n=r.n(a);var i=r(21698);var s=r(21702);var o=r(21740);var c=r(21706);var l=r(21697);var u=r(54);var d=r(12);var v=r(23009);var p=r(1007);var h=r(391);var f=r(1559);var m=r(379);var b=r(907);var g=r(3203);var _=r(1218);var y=r(21994);var O=r(21995);var k=r(21996);var j=r(21997);var C=r(22189);var E=r(21998);var S=r(21999);var w=r(22e3);var I=r(21936);var T=r(21947);var N=r(22001);var R=r(215);var A=r(128);var M=r(906);var P=r(2215);var x=r(21784);var D=r(5);var F=new D["b"]("message");var L=new D["b"]("files");var B=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.channelId,n=r.ts;var i=Object(s["getMessageByTimestamp"])(t,a,n);if(!i||!i.text)return null;return q(t,i.text)};function U(e,t){var r=t.user;var a=Object(i["getMemberById"])(e,r);return Object(g["r"])(e,a)}function q(e,t){if(!t)return"";var r=Object(x["a"])(t,"EDIT",{jumbomoji:false,allow_intra_word_formatting:false});return Object(_["a"])(r).reduce(function(t,r){if("member"===r.type){var a=Object(i["getMemberById"])(e,r.id);var n=Object(g["g"])(a);return t+"@"+(n||r.id)}if("channel"===r.type){var s=Object(l["getChannelById"])(e,r.id);var o=s?s.name:"";return t+"#"+o}if("command"===r.type){if("here"===r.data.type||"channel"===r.data.type||"everyone"===r.data.type||"group"===r.data.type)return t+"@"+r.data.type;if("date"===r.data.type)return t+r.data.label;if("team"===r.data.type||"subteam"===r.data.type)return t+r.data.label}if(r.text)return t+r.text;return t},"")}function H(e,t){var r=Object(g["s"])(e,t.author_id,true,false);var a=Object(R["h"])(t.ts);var n=Object(b["getDisplayName"])(Object(l["getChannelById"])(e,t.channel_id));var i=q(e,t.text);if(t.is_reply_unfurl)return F.t("{authorName} replied to a thread in {channelName} on {date}: {messageText}",{authorName:Object(D["l"])(r),date:a,channelName:n,messageText:Object(D["l"])(i)});return F.t("{authorName} on {date} in {channelName}: {messageText}",{authorName:Object(D["l"])(r),date:a,channelName:n,messageText:Object(D["l"])(i)})}function W(e,t){return t.service_name+" "+t.author_name+" "+t.author_subname+" "+q(e,t.text)+" "+Object(R["h"])(t.ts)+"."}function G(e,t){var r=t.text?q(e,t.text):"";return t.original_url+" "+r+"."}function V(e,t){var r=[];t.text&&r.push(q(e,t.text));t.fields&&t.fields.length>0&&r.push(t.fields.map(function(e){return e.title+": "+e.value}).join("; "));return r.join(" ")}function z(e,t,r){var a=r.messageSubtype,i=r.messageText;var s=Object(u["getUserPref"])(e,"expand_inline_imgs");var o=Object(u["getUserPref"])(e,"expand_non_media_attachments");if(!t)return[];return n.a.compact(t.map(function(t){if(!Object(m["d"])({attachment:t,messageSubtype:a,messageText:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o}))return null;var r=[];t.pretext&&r.push(t.pretext);t.author_name&&r.push(t.author_name);t.title&&r.push(t.title);t.is_msg_unfurl?r.push(H(e,t)):"twitter"===t.service_name?r.push(W(e,t)):t.from_url?r.push(G(e,t)):r.push(V(e,t));return r.join(" ")}))}function K(e,t,r){var a=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var n=Object(p["getMsgSenderEntity"])(e,t);var i=U(e,r);var s=Object(T["b"])(r);var o=Object(T["a"])(s,{file:r,subtype:Object(p["getMessageSubtype"])(t),isUpload:t.upload,userId:n.userId,featureFileThreads:a});if(!o)return null;var c=r.pretty_type||L.t("file");var l=F.t("{uploader_name}{uploader_name_affix}",{uploader_name:i,uploader_name_affix:Object(D["k"])(i)});return o({uploader_name_possessive_html:l,file_pretty_name:c})}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,m=t.previousMessageTs,b=t.rollup;var _=Object(s["getMessageByTimestamp"])(e,a,r);var T=Object(l["getChannelById"])(e,a);if(!_||!T)return null;var R=Object(d["isFeatureEnabled"])(e,"feature_file_threads");var x=Object(d["isFeatureEnabled"])(e,"feature_wta_client_support");var D=Object(d["isFeatureEnabled"])(e,"feature_better_join_leave_strings");var L=R?null:_.file;var H=R?_.files:null;var W=R?Object(c["getFileById"])(e,n.a.first(H)):Object(c["getFileById"])(e,L);var G=Object(p["getMessageSubtype"])(_);var V=Object(h["a"])(G);var Q=Object(p["getMsgSenderEntity"])(e,_);var Y=Object(d["getCurrentUserId"])(e);var J=["bot_message","me_message","file_comment","file_mention","file_share","file_upload","thread_broadcast","channel_join","channel_leave","group_join","group_leave"];if(G&&!V&&-1===J.indexOf(G))return null;var Z="";var X=null;if(-1!==["channel_join","channel_leave","group_join","group_leave"].indexOf(G)){var $=Object(w["a"])(e,b);var ee=Object(S["a"])({plainText:true,rollup:$,channel:T,user:Q.userId,isAppUser:Object(g["A"])(Object(i["getMemberById"])(e,Q.userId)),featureWtaClientSupport:x,i18nReplaceCallback:n.a.noop,featureBetterJoinLeaveStrings:D});Z=ee.join("")}else if(-1!==["sh_room_shared","sh_room_created"].indexOf(G)){var te="sh_room_shared"===G?F.t("Shared a call"):F.t("Started a call");var re=_._call_id;var ae=Object(v["getCallById"])(e,re);if(ae){var ne=ae.name?ae.name:"";var ie=Object(v["getMembersOfCall"])(ae)||[];var se=Object(N["a"])({dateEnd:ae.endTimestamp,isDmCall:ae.isDmCall,wasMissed:Object(v["wasCallMissed"])(ae),wasRejected:Object(v["wasCallRejected"])(ae),isCreator:Y===ae.createdBy,isParticipant:-1!==ie.indexOf(Y),dmCallName:Object(v["getOtherMemberNameInDmCall"])(e,re),participantsCount:ie.length});Z="sh_room_shared"===G&&ne?F.t("Shared a call: {callName}. {callDescription}.",{callName:ne,callDescription:se}):"sh_room_shared"===G?F.t("Shared a call. {callDescription}.",{callDescription:se}):ne?F.t("Started a call: {callName}. {callDescription}.",{callName:ne,callDescription:se}):F.t("Started a call. {callDescription}.",{callDescription:se})}else Z=te}else if(V){var oe=Object(d["isFeatureEnabled"])(e,"feature_sli_channel_archive_suggestions");var ce=Object(d["isFeatureEnabled"])(e,"feature_wta_conversations_api_channel_created_msg");var le=oe&&"sli_channel_archive_suggestions"===Object(P["a"])("sli_channel_archive_suggestions");var ue=Object(i["getCurrentMember"])(e);Z=Object(y["a"])({message:_,channel:T,member:ue,inSliChannelArchiveSuggestionsExperiment:le,featureWtaConversationsApiChannelCreated:ce});Z=q(e,Z)}else if(W&&-1!==["file_mention","file_share","file_upload","file_comment"].indexOf(G)){var de=W.user;var ve=U(e,W);if("file_comment"===G){var pe=de!==_.comment.user;var he=Object(s["getMessageByTimestamp"])(e,a,m);var fe=Object(O["a"])({plainText:true,isFollowup:Object(k["a"])(_,he),fileMode:W.mode,fileLink:W.title?W.title:W.name,userId:pe?de:null,userName:pe?ve:null,userLink:pe?ve:null});X=_.comment&&W&&Object(c["getFileCommentById"])(e,W.id,_.comment.id);X&&(Z=q(e,fe+" "+X.comment))}else{Z=B(e,{channelId:a,ts:_.ts});var me=K(e,_,W);me&&(Z=me+": "+(W.title?W.title:W.name))}}else if("thread_broadcast"===G){var be=Object(s["getMessageByTimestamp"])(e,a,_.thread_ts);var ge=Object(p["getMessageRootText"])(be);if(R&&be.files&&be.files.length){var _e=n.a.first(be.files);var ye=Object(c["getFileById"])(e,_e);ge=Object(p["getMessageRootText"])(be,ye)}var Oe=[];var ke=0;if(be){if(be.reply_users)Oe=be.reply_users;else{var je=be.replies||[];Oe=n()(je).map("user").uniq().value()}ke=be.reply_users_count?be.reply_users_count:Oe.length}var Ce=be?be.reply_count:null;var Ee=n.a.includes(Oe,Y);var Se=Object(j["a"])(e,Oe);var we=Object(C["a"])({names:Se,replyCount:Ce,replyUsersCount:ke,repliersIncludesSelf:Ee});var Ie=q(e,_.text);Z=Object(E["a"])()+" "+ge+" "+we+" "+Ie}else Z=B(e,{channelId:a,ts:_.ts});var Te=Object(f["b"])(_,W);var Ne=Object(p["getMessageAttachments"])(_);var Re=z(e,Ne,{messageSubtype:G,messageText:_.text});var Ae={name:"",time:Object(A["a"])(_.ts,{do24hrTime:Object(u["getUserPref"])(e,"time24"),includeSeconds:false}),text:Z,reactionCount:Object(o["getTotalReactionCountForKey"])(e,Te),replyCount:_.reply_count,isPinned:Object(M["b"])(_,T),isStarred:Object(p["isStarred"])(_,W,X,R),attachmentCount:Ne?Ne.length:0,attachmentTexts:Re};Ae.name=Object(I["a"])(e,{userId:Q.userId,botId:Q.botId,username:Q.username,botProfile:_.bot_profile});return Ae}},21994:function(e,t,r){"use strict";t["a"]=c;var a=r(5);var n=r(907);var i=r(3203);var s=r(1007);var o=new a["b"]("message");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,r=e.channel,c=e.member,l=e.inSliChannelArchiveSuggestionsExperiment,u=e.featureWtaConversationsApiChannelCreated;if(!t||!r||!c)return"";var d=Object(s["getMessageSubtype"])(t);var v=Object(s["getMessageMemberId"])(t);var p=Object(s["getMessageTopic"])(t);var h=Object(s["getMessagePurpose"])(t);var f=Object(s["getMessageOldName"])(t);var m=Object(s["getMessageName"])(t);var b=Object(n["getDisplayName"])(r);var g=Object(n["getIsChannelMoved"])(r);var _=Object(i["i"])(c);var y=c.id;if("channel_topic"===d||"group_topic"===d){if(!p)return o.t("cleared the channel topic");return o.t("set the channel topic: {topic}",{topic:Object(a["l"])(p)})}if("channel_purpose"===d||"group_purpose"===d){if(!h)return o.t("cleared the channel purpose");return o.t("set the channel purpose: {purpose}",{purpose:Object(a["l"])(h)})}if("channel_name"===d||"group_name"===d)return o.t("renamed the channel from \u201c{old_name}\u201d to \u201c{new_name}\u201d",{old_name:f,new_name:m});if("channel_archive"===d){if(g)return o.t("moved #{channelName} to another {orgName} workspace. The contents up until this point are still browsable and available in search.",{channelName:b,orgName:_});if(y===v&&l)return o.t("archived #{channelName}. The contents will still be browsable and available in search. To undo this, choose *Channel Settings \u2192 Unarchive*.",{channelName:b});return o.t("archived #{channelName}. The contents will still be browsable and available in search.",{channelName:b})}if("group_archive"===d){if(g)return o.t("moved {channelName} to another {orgName} workspace. The contents up until this point are still browsable and available in search.",{channelName:b,orgName:_});if(y===v&&l)return o.t("archived {channelName}. The contents will still be browsable and available in search. To undo this, choose *Channel Settings \u2192 Unarchive*.",{channelName:b});return o.t("archived {channelName}. The contents will still be browsable and available in search.",{channelName:b})}if("channel_unarchive"===d)return o.t("un-archived #{channelName}",{channelName:b});if("group_unarchive"===d)return o.t("un-archived {channelName}",{channelName:b});if("app_conversation_created"===d&&u)return o.t("created and joined this conversation.");return t.text||""}},21995:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plainText,r=e.isFollowup,i=e.fileMode,s=e.fileLink,o=e.userId,c=e.userName,l=e.userLink;var u={file:s,user:l,possessive:Object(a["k"])(c)};if(r){u.note="[sender] commented:";return n.t("commented:",u)}if(o){if("snippet"===i){u.note="[sender] commented on joe's snippet. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?n.t("commented on {user}{possessive} snippet {file}",u):n.rt("commented on {user}{possessive} snippet {file}",u)}u.note="[sender] commented on joe's file. Also, the possessive affix is localized, but please move it before or after the user name depending on whether possessives are prefixes or suffixes for your language.";return t?n.t("commented on {user}{possessive} file {file}",u):n.rt("commented on {user}{possessive} file {file}",u)}u.note="[sender] commented on Kittens.gif";return t?n.t("commented on {file}",u):n.rt("commented on {file}",u)}},21996:function(e,t,r){"use strict";t["a"]=n;var a=r(21755);function n(e,t){if(!t||!e)return false;if(Object(a["b"])(t.subtype)&&"file_comment"===e.subtype&&t.file&&e.file&&t.file===e.file)return true;return false}},21997:function(e,t,r){"use strict";t["a"]=u;var a=r(1);var n=r.n(a);var i=r(12);var s=r(3275);var o=r(3203);var c=r(5);var l=new c["b"]("threads");function u(e,t){var r=Object(i["getCurrentUserId"])(e);var a=n.a.includes(t,r);var c=t;if(a){c=n.a.without(t,r);c.push(r)}return n.a.chain(c).uniq().without("U00").without("B00").map(function(t){var a=Object(o["s"])(e,t)||Object(s["getBotNameById"])(e,t);if(!a)return null;return t===r?l.t("you"):a}).compact().value()}},21998:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("threads");function i(){return n.t("replied to a thread:")}},21999:function(e,t,r){"use strict";t["a"]=p;var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(5);var c=r(1);var l=r.n(c);var u=r(43);var d=r(907);var v=new o["b"]("message");function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plainText,r=e.rollup,a=e.channel,i=e.user,o=e.isAppUser,c=e.featureWtaClientSupport,u=e.i18nReplaceCallback,v=e.featureBetterJoinLeaveStrings;if(!r)return[];var p=Object(d["isPrivateChannel"])(a)?Object(d["getDisplayName"])(a):"#"+Object(d["getDisplayName"])(a);var m=[];var b=r[i];var g=f(r,i,b);var _=h({action:b.action,channel:p,user:{name:b.name,id:i},isAppUser:o,featureWtaClientSupport:c,others:g,inviter:{name:b.inviterName,id:b.inviter},first:true,i18nReplaceCallback:u,plainText:t,featureBetterJoinLeaveStrings:v});m.push(_);var y=true;l()(r).omit([].concat(s()(g.map(function(e){return e.id})),[i])).mapValues(function(e,t){return n()({},e,{id:t})}).groupBy("action").forEach(function(e,r){var a={name:e[0].name,id:e[0].id};var n=l.a.tail(e);m.push(" ");m.push(h({action:r,channel:p,user:a,isAppUser:o,others:n,also:y,i18nReplaceCallback:u,plainText:t,featureBetterJoinLeaveStrings:v}));y=false});return m}function h(e){var t=e.action,r=e.channel,a=e.user,n=void 0===a?{}:a,i=e.isAppUser,s=e.featureWtaClientSupport,o=e.others,c=void 0===o?[]:o,d=e.inviter,p=void 0===d?{}:d,h=e.first,f=e.also,m=e.i18nReplaceCallback,b=e.plainText,g=e.featureBetterJoinLeaveStrings;if(!t||!t.length)return Object(u["error"])("rollups missing actions???");var _=c.length;var y={user:n.name||"UNKNOWN",userA:n.name||"UNKNOWN",channel:r,inviter:p.name,userB:p.name,count:_,other:c.length&&c[0].name,userC:c.length&&c[0].name};var O=l.a.curry(m)(n,p,c);var k="no_name"===r;if(g)switch(t){case"join":if(i&&s)return v.rt("was added to this conversation by <inviter>{userB}</inviter>.",y,O);if(h&&p.id){if(0===y.count){if(b){if(k)return v.t("joined the channel by invitation from {userB}.",y);return v.t("joined {channel} by invitation from {userB}.",y)}if(k)return v.rt("joined the channel by invitation from <inviter>{userB}</inviter>.",y,O);return v.rt("joined {channel} by invitation from <inviter>{userB}</inviter>.",y,O)}if(1===y.count){if(b){if(k)return v.t("joined the channel by invitation from {userB}, along with {userC}.",y);return v.t("joined {channel} by invitation from {userB}, along with {userC}.",y)}if(k)return v.rt("joined the channel by invitation from <inviter>{userB}</inviter>, along with <other>{userC}</other>.",y,O);return v.rt("joined {channel} by invitation from <inviter>{userB}</inviter>, along with <other>{userC}</other>.",y,O)}if(b){if(k)return v.t("joined the channel by invitation from {userB}, along with {count, number} others.",y);return v.t("joined {channel} by invitation from {userB}, along with {count, number} others.",y)}if(k)return v.rt("joined the channel by invitation from <inviter>{userB}</inviter>, along with <others>{count, number} others</others>.",y,O);return v.rt("joined {channel} by invitation from <inviter>{userB}</inviter>, along with <others>{count, number} others</others>.",y,O)}if(h){if(b){if(k){if(_)return v.t("joined the channel {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("joined the channel.")}if(_)return v.t("joined {channel} {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("joined {channel}.",y)}if(k){if(_)return v.rt("joined the channel {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("joined the channel.")}if(_)return v.rt("joined {channel} {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("joined {channel}.",y)}if(f){if(b){if(_)return v.t("Also, {userA} {count, plural, =1 {and {userC}} other {and # others}} joined.",y);return v.t("Also, {userA} joined.",y)}if(_)return v.rt("Also, <user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} joined.",y,O);return v.rt("Also, <user>{userA}</user> joined.",y,O)}if(b){if(_)return v.t("{userA} {count, plural, =1 {and {userC}} other {and # others}} joined.",y);return v.t("{userA} joined.",y)}if(_)return v.rt("<user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} joined.",y,O);return v.rt("<user>{userA}</user> joined.",y,O);case"leave":if(i&&s){if(b)return v.t("was removed from this conversation by {userB}.",y);return v.rt("was removed from this conversation by <inviter>{userB}</inviter>.",y,O)}if(h){if(b){if(k){if(_)return v.t("left the channel {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("left the channel.")}if(_)return v.t("left {channel} {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("left {channel}.",y)}if(k){if(_)return v.rt("left the channel {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("left the channel.")}if(_)return v.rt("left {channel} {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("left {channel}.",y)}if(f){if(b){if(_)return v.t("Also, {userA} {count, plural, =1 {and {userC}} other {and # others}} left.",y);return v.t("Also, {userA} left.",y)}if(_)return v.rt("Also, <user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} left.",y,O);return v.rt("Also, <user>{userA}</user> left.",y,O)}if(b){if(_)return v.t("{userA} {count, plural, =1 {and {userC}} other {and # others}} left.",y);return v.t("{userA} left.",y)}if(_)return v.rt("<user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} left.",y,O);return v.rt("<user>{userA}</user> left.",y,O);case"join,leave":if(h){if(b){if(k){if(_)return v.t("joined and left the channel {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("joined and left the channel.")}if(_)return v.t("joined and left {channel} {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("joined and left {channel}.",y)}if(k){if(_)return v.rt("joined and left the channel {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("joined and left the channel.")}if(_)return v.rt("joined and left {channel} {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("joined and left {channel}.",y)}if(f){if(b){if(_)return v.t("Also, {userA} {count, plural, =1 {and {userC}} other {and # others}} joined and left.",y);return v.t("Also, {userA} joined and left.",y)}if(_)return v.rt("Also, <user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} joined and left.",y,O);return v.rt("Also, <user>{userA}</user> joined and left.",y,O)}if(b){if(_)return v.t("{userA} {count, plural, =1 {and {userC}} other {and # others}} joined and left.",y);return v.t("{userA} joined and left.",y)}if(_)return v.rt("<user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} joined and left.",y,O);return v.rt("<user>{userA}</user> joined and left.",y,O);case"leave,join":if(h&&p.id){if(0===y.count){if(b){if(k)return v.t("rejoined the channel by invitation from {userB}.",y);return v.t("rejoined {channel} by invitation from {userB}.",y)}if(k)return v.rt("rejoined the channel by invitation from <inviter>{userB}</inviter>.",y,O);return v.rt("rejoined {channel} by invitation from <inviter>{userB}</inviter>.",y,O)}if(1===y.count){if(b){if(k)return v.t("rejoined the channel by invitation from {userB}, along with {userC}.",y);return v.t("rejoined {channel} by invitation from {userB}, along with {userC}.",y)}if(k)return v.rt("rejoined the channel by invitation from <inviter>{userB}</inviter>, along with <other>{userC}</other>.",y,O);return v.rt("rejoined {channel} by invitation from <inviter>{userB}</inviter>, along with <other>{userC}</other>.",y,O)}if(b){if(k)return v.t("rejoined the channel by invitation from {userB}, along with {count, number} others.",y);return v.t("rejoined {channel} by invitation from {userB}, along with {count, number} others.",y)}if(k)return v.rt("rejoined the channel by invitation from <inviter>{userB}</inviter>, along with <others>{count, number} others</others>.",y,O);return v.rt("rejoined {channel} by invitation from <inviter>{userB}</inviter>, along with <others>{count, number} others</others>.",y,O)}if(h){if(b){if(k){if(_)return v.t("rejoined the channel, {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("rejoined the channel.")}if(_)return v.t("rejoined {channel}, {count, plural, =1 {along with {userC}} other {along with # others}}.",y);return v.t("rejoined {channel}.",y)}if(k){if(_)return v.rt("rejoined the channel, {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("rejoined the channel.")}if(_)return v.rt("rejoined {channel}, {count, plural, =1 {along with <other>{userC}</other>} other {along with <others># others</others>}}.",y,O);return v.rt("rejoined {channel}.",y)}if(f){if(b){if(_)return v.t("Also, {userA} {count, plural, =1 {and {userC}} other {and # others}} rejoined.",y);return v.t("Also, {userA} rejoined.",y)}if(_)return v.rt("Also, <user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} rejoined.",y,O);return v.rt("Also, <user>{userA}</user> rejoined.",y,O)}if(b){if(_)return v.t("{userA} {count, plural, =1 {and {userC}} other {and # others}} rejoined.",y);return v.t("{userA} rejoined.",y)}if(_)return v.rt("<user>{userA}</user> {count, plural, =1 {and <other>{userC}</other>} other {and <others># others</others>}} rejoined.",y,O);return v.rt("<user>{userA}</user> rejoined.",y,O);default:return Object(u["error"])("invalid rollup action???")}switch(t){case"join":if(i&&s)return v.rt("was added to this conversation by <inviter>{inviter}</inviter>.",y,O);if(h&&p.id){if(0===y.count){if(b)return v.t("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}.",y);return v.rt("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>.",y,O)}if(1===y.count){if(b)return v.t("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}, along with {other}.",y);return v.rt("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>, along with <other>{other}</other>.",y,O)}if(b)return v.t("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}, along with {count, number} others.",y);return v.rt("joined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>, along with <others>{count, number} others</others>.",y,O)}if(h){if(b)return v.t("joined {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with {other}} other { along with # others}}.",y);return v.rt("joined {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with <other>{other}</other>} other { along with <others># others</others>}}.",y,O)}if(f){if(b)return v.t("Also, {user}{count, plural, =0 {} =1 { and {other}} other { and # others}} joined.",y);return v.rt("Also, <user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} joined.",y,O)}if(b)return v.t("{user}{count, plural, =0 {} =1 { and {other}} other { and # others}} joined.",y);return v.rt("<user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} joined.",y,O);case"leave":if(i&&s){if(b)return v.t("was removed from this conversation by {inviter}.",y);return v.rt("was removed from this conversation by <inviter>{inviter}</inviter>.",y,O)}if(h){if(b)return v.t("left {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with {other}} other { along with # others}}.",y);return v.rt("left {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with <other>{other}</other>} other { along with <others># others</others>}}.",y,O)}if(f){if(b)return v.t("Also, {user}{count, plural, =0 {} =1 { and {other}} other { and # others}} left.",y);return v.rt("Also, <user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} left.",y,O)}if(b)return v.t("{user}{count, plural, =0 {} =1 { and {other}} other { and # others}} left.",y);return v.rt("<user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} left.",y,O);case"join,leave":if(h){if(b)return v.t("joined and left {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with {other}} other { along with # others}}.",y);return v.rt("joined and left {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 { along with <other>{other}</other>} other { along with <others># others</others>}}.",y,O)}if(f){if(b)return v.t("Also, {user}{count, plural, =0 {} =1 { and {other}} other { and # others}} joined and left.",y);return v.rt("Also, <user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} joined and left.",y,O)}if(b)return v.t("{user}{count, plural, =0 {} =1 { and {other}} other { and # others}} joined and left.",y);return v.rt("<user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} joined and left.",y,O);case"leave,join":if(h&&p.id){if(0===y.count){if(b)return v.t("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}.",y);return v.rt("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>.",y,O)}if(1===y.count){if(b)return v.t("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}, along with {other}.",y);return v.rt("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>, along with <other>{other}</other>.",y,O)}if(b)return v.t("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from {inviter}, along with {count, number} others.",y);return v.rt("left and rejoined {channel, select, no_name {the channel} other {{channel}}} by invitation from <inviter>{inviter}</inviter>, along with <others>{count, number} others</others>.",y,O)}if(h){if(b)return v.t("left and rejoined {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 {, along with {other}} other {, along with # others}}.",y);return v.rt("left and rejoined {channel, select, no_name {the channel} other {{channel}}}{count, plural, =0 {} =1 {, along with <other>{other}</other>} other {, along with <others># others</others>}}.",y,O)}if(f){if(b)return v.t("Also, {user}{count, plural, =0 {} =1 { and {other}} other { and # others}} left and rejoined.",y);return v.rt("Also, <user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} left and rejoined.",y,O)}if(b)return v.t("{user}{count, plural, =0 {} =1 { and {other}} other { and # others}} left and rejoined.",y);return v.rt("<user>{user}</user>{count, plural, =0 {} =1 { and <other>{other}</other>} other { and <others># others</others>}} left and rejoined.",y,O);default:return Object(u["error"])("invalid rollup action???")}}function f(e,t,r){var a=r.action,n=r.inviter;var i=[];l.a.forEach(e,function(e,r){if(r===t)return;if(e.action!==a)return;if(n&&e.inviter!==n)return;i.push({id:r,name:e.name})});return i}},2200:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(12);var j=r(3270);var C=r(3278);var E=r(3271);var S=r(49);var w=r(907);var I=r(21703);var T=r(21777);var N=r(5);var R=r(196);var A=new N["b"]("channel_options");var M={allEnterpriseTeams:m.a.array,channel:m.a.object.isRequired,channelIsGlobalShared:m.a.bool,newChannelName:m.a.string,orgName:m.a.string,shareWith:m.a.string,teamId:m.a.string.isRequired,teamIdsSelected:m.a.arrayOf(m.a.string)};var P={allEnterpriseTeams:[],channelIsGlobalShared:false,newChannelName:"",orgName:"",shareWith:"specific",teamIdsSelected:[]};var x=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pointCounter=0;return r}u()(t,[{key:"makeChannelName",value:function e(){var t=this.props,r=t.channel,a=t.newChannelName;return a&&a.length?a:Object(w["getDisplayName"])(r)}},{key:"makeTeamNamesList",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var r=this.props,a=r.teamIdsSelected,n=r.teamId;var i=Object(S["b"])(n);var s=t.length?t:a;if(s.length>=5)return A.t("{workspaceCount} workspaces",{workspaceCount:s.length});var o=void 0;o=Object(k["isFeatureEnabled"])(i,"feature_lazy_teams")?Object(y["map"])(s,function(e){var t=Object(E["getTeamById"])(i,e);return Object(I["isUnknown"])(t)?g.a.createElement(T["a"],{type:"unknown"}):Object(I["getTeamDisplayName"])(t)}):Object(y["map"])(s,function(e){return Object(I["getTeamDisplayName"])(Object(E["getTeamById"])(i,e))});if(1===o.length)return o[0];return Object(N["e"])(o,{react:true,strong:true})}},{key:"renderChangesDetails",value:function e(){var t=this;var r=this.props,a=r.allEnterpriseTeams,i=r.channel,o=r.channelIsGlobalShared,c=r.orgName,l=r.shareWith,u=r.teamIdsSelected;var d=Object(y["map"])(a,"id");var v=o?d:Object(w["getSharedTeamIds"])(i);var p=Object(y["difference"])(u,Object(w["getSharedTeamIds"])(i));var h=y["without"].apply(void 0,[v].concat(s()(u)));var f=y["without"].apply(void 0,[Object(y["intersection"])(d,v)].concat(s()(h)));var m=[];var b=function e(r,a,n){t.pointCounter+=1;m.push({data:r,key:t.pointCounter,isHeading:!!a,iconType:n})};var _=[];var O={channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(p)};var k=function e(t){var r=t.key,a=t.tag,n=t.text;if("span"===a)return g.a.createElement("strong",{key:r},Object(R["a"])(r,i,n));return g.a.createElement("strong",{key:r},n)};var j=true;var C="ts_icon_org_shared_channel";var E="ts_icon_warning";if("all"===l){b(A.rt("Share <span>{channelName}</span> with all of <strong>{orgName}</strong>.",{channelName:this.makeChannelName(),orgName:c},k),j,C);if(Object(w["isPrivateChannel"])(i))b(A.rt("If invited, members of <strong>{orgName}</strong> will be able to join the channel and see its message history and files.",{orgName:c,channelName:this.makeChannelName()},k));else{b(A.rt("All members of <strong>{orgName}</strong> will be able to find and join the channel and see its message history and files.",{orgName:c}));b(A.t("Members of any workspaces created in the future will also have access."))}b(A.rt("The channel will be notified of these changes."))}else{o&&b(A.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(h)},k),j,E);if(!o&&p.length){b(A.rt("Share <span>{channelName}</span> with members of {teamNames}.",O,k),j,C);Object(w["isPrivateChannel"])(i)?p.length>1?b(A.rt("If invited, members of these workspaces will be able to join the channel and see its message history and files.")):b(A.rt("If invited, members of this workspace will be able to join the channel and see its message history and files.")):p.length>1?b(A.rt("All members of these workspaces will be able to find and join the channel and see its message history and files.")):b(A.rt("All members of this workspace will be able to find and join the channel and see its message history and files."))}p.length&&!h.length&&b(A.rt("The channel will be notified of these changes."));if(h.length){o||b(A.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(h)},k),j,E);h.length>1?b(A.rt("Members of these workspaces will lose access to this channel\u2019s message history and files.")):b(A.rt("All members of {workspace} will lose access to this channel\u2019s message history and files.",{workspace:this.makeTeamNamesList(h)}));h.length>1?b(A.rt("Apps installed by members of these workspaces will need to be installed again.")):b(A.rt("Apps installed by members of {workspace} will need to be added again.",{workspace:this.makeTeamNamesList(h)}));f.length&&b(A.rt("Members of {workspaces} will continue to have access to this channel.",{workspaces:this.makeTeamNamesList(f)}));b(A.rt("The channel will be notified of these changes."))}}b(A.rt("<a>Learn more</a> about sharing channels within your organization.",null,function(e){var t=e.key,r=e.text;return g.a.createElement("a",{key:t,href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel-on-Enterprise-Grid#how-they-work",target:"_blank",rel:"noopener noreferrer"},r)}));m.forEach(function(e){var t={className:e.isHeading?"p-channel-options--workspace_access_heading":"p-channel-options--workspace_access_line_item"};_.push(g.a.createElement("p",n()({key:e.key},t),e.iconType&&g.a.createElement("ts-icon",{class:e.iconType}),e.data))});return g.a.createElement("div",{className:"p-channel-options--content_text"},_)}},{key:"render",value:function e(){return g.a.createElement("div",null,this.renderChangesDetails())}}]);return t}(b["Component"]);x.displayName="ManageWorkspaceAccessReview";x.defaultProps=P;function D(e,t){var r=t.channel;return{channelIsGlobalShared:Object(w["isOrgGlobalSharedPublicOrPrivateChannel"])(r),orgName:Object(C["getEnterpriseOrgName"])(e),teamId:Object(j["getTeamId"])(e),allEnterpriseTeams:Object(E["getAllEnterpriseTeams"])(e)}}t["a"]=Object(_["connect"])(D)(x)},22000:function(e,t,r){"use strict";t["a"]=s;var a=r(3203);var n=r(1);var i=r.n(n);function s(e,t){if(!t)return null;return Object(n["mapValues"])(t,function(t,r){var n=t.action,i=t.inviter;return{action:n,inviter:i,name:Object(a["s"])(e,r),inviterName:Object(a["s"])(e,i)}})}},22001:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("calls");function i(e){var t=e.dateEnd,r=e.isDmCall,a=e.wasMissed,i=e.wasRejected,s=e.isCreator,o=e.isParticipant,c=e.dmCallName,l=e.participantsCount;var u=t&&r&&a&&i&&!s;var d=t&&r&&a&&i&&s;var v=t&&r&&a;var p=t&&r&&a&&s;var h=t;var f=!r&&o;var m=!r&&!o;var b=r&&2===l;var g=!t&&r&&s;var _=!t&&r;if(u)return n.t("You declined the call");if(d)return n.t("{dmCallName} declined the call",{dmCallName:c});if(p)return n.t("{dmCallName} missed the call",{dmCallName:c});if(v)return n.t("You missed the call");if(h)return n.t("This call has ended");if(f)return n.t("You are on this call");if(m)return n.t("Join this call");if(b)return n.t("On a call with {dmCallName}",{dmCallName:c});if(g)return n.t("Calling {dmCallName}",{dmCallName:c});if(_)return n.t("{dmCallName} is calling you",{dmCallName:c});return""}},22003:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(21752);var n=r(3270);var i=r(3271);var s=r(21698);var o=r(3203);var c=r(21703);var l=function e(t){var r=Object(n["getTeamId"])(t);var l=Object(i["getTeamById"])(t,r);var u=Object(c["getTeamDisplayName"])(l);var d=Object(o["R"])(Object(s["getCurrentMember"])(t));var v={teamName:u,isUserRestricted:d,yearlyPlanCostPerMonthRaw:Object(a["selectCostPerMonthForYearlyPlan"])(t),monthlyPlanCostPerMonthRaw:Object(a["selectCostPerMonthForMonthlyPlan"])(t),availableCurrencies:Object(a["selectAvailableCurrencies"])(t),planCostPerMonth:Object(a["selectActivePlanCostPerMonth"])(t),planIsYearly:Object(a["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(a["selectActivePlanMonthsCount"])(t),planCurrency:Object(a["selectActiveCurrency"])(t),numBillableMembers:Object(a["selectBillableActiveUsers"])(t),numInactiveMembers:Object(a["selectInactiveUsers"])(t),isZeroActiveMembers:Object(a["isZeroRealActiveUsers"])(t),totalMembers:Object(a["selectTotalUsers"])(t),paidSeats:Object(a["selectPaidSeats"])(t),tax:Object(a["selectTax"])(t),teamCredits:Object(a["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(a["selectCurrentTeamCredits"])(t),totalCost:Object(a["selectSubtotal"])(t),totalCostWithTax:Object(a["selectTotalRecurring"])(t),isCostValid:Object(a["isCostValid"])(t),didCostFetchFail:Object(a["isAPIError"])(t),isPlansAndCostDataLoaded:Object(a["selectIsPlansAndCostDataLoaded"])(t)};return v}},22004:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(45);var c=r(5);var l=r(1170);var u=new c["b"]("pricing_calculator");var d={numMonthsPerPlan:s.a.number,formattedPlanCostPerMonth:s.a.string,billedMembers:s.a.number,numInactiveMembers:s.a.number};var v={numMonthsPerPlan:1,formattedPlanCostPerMonth:"",billedMembers:0,numInactiveMembers:0};function p(e){var t=e.numMonthsPerPlan,r=e.billedMembers,a=e.numInactiveMembers,i=e.formattedPlanCostPerMonth;var s=n.a.createElement(l["a"],{type:"times-small",className:"sk_light_gray"});var o=a?u.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:r}):u.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:r});return n.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},n.a.createElement("div",null,i),s,n.a.createElement("div",null,o),s,n.a.createElement("div",null,u.rt("{numMonthsPerPlan, plural, =1 {# month} other {# months}}",{numMonthsPerPlan:t})))}p.displayName="SubtotalCalculation";p.defaultProps=v;t["a"]=Object(o["pure"])(p)},22005:function(e,t,r){"use strict";var a=r(22290);var n=r(22201);var i=r(22589);var s=r(22293);var o=r(22590);var c=r(22591);var l=r(22592);var u=r(22594);r.d(t,"d",function(){return n["a"]});r.d(t,"b",function(){return i["a"]});r.d(t,"c",function(){return o["a"]});r.d(t,"a",function(){return c["a"]});r.d(t,"e",function(){return l["a"]});t["f"]=u["a"]},22006:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21705);var u=r(21699);var d=r(2087);var v=Object(u["b"])("Opens app dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=s.a.createElement(d["a"],n()({},r,{onClose:function t(){return e(Object(l["closeModal"])())}}));e(Object(l["openModal"])({element:a}))});v.propTypes={appId:c.a.string.isRequired,id:c.a.string.isRequired,submitLabel:c.a.string,title:c.a.string.isRequired};t["a"]=v},22007:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(12159);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(21705);var h=r(21699);var f=r(3159);var m=r(21713);var b=r(91);var g=r(3203);var _=Object(h["b"])("Opens app permission dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUser,i=r.channelId,o=r.eventId,l=r.onAuthorize,u=r.onDismiss,v=r.referringEventId,h=r.referringUiContext,_=r.scopeInfo,y=r.title;var O=v;var k=h;var j=function e(t){var r,n;var c=s()({},m["n"].action,t);Object(b["b"])(o,s()({contexts:(n={},s()(n,m["b"].ui_context,c),s()(n,m["b"].referring_ui_context,k),s()(n,m["b"].core,(r={},s()(r,m["c"].app_id,Object(g["c"])(a)),s()(r,m["c"].channel_id,i),r)),n)},m["b"].referring_event_id,O));O=o;k=c};var C={appIcon:Object(d["get"])(a,"profile.image_48"),appName:Object(g["l"])(a),channelId:i,onAuthorize:function e(){j(m["m"].ALLOW);return l()},onDismiss:function e(){j(m["m"].DO_NOT_ALLOW);return u()},onClose:function e(){j(m["m"].CLOSE)},scopeInfo:_,title:y};var E=c.a.createElement(f["a"],n()({},C));e(Object(p["openModal"])({element:E}));j(m["m"].IMPRESSION)});_.propTypes={scopeInfo:u.a.arrayOf(u.a.shape({scopes:u.a.arrayOf(u.a.string),is_dangerous:u.a.bool,short_description:u.a.string.isRequired,long_description:u.a.string})).isRequired,onAuthorize:u.a.func.isRequired,onDismiss:u.a.func,channelId:u.a.string,eventId:u.a.oneOfType([u.a.string,u.a.number]),referringEventId:u.a.oneOfType([u.a.string,u.a.number]),referringUiContext:u.a.object};t["a"]=_},22008:function(e,t,r){"use strict";var a=r(1594);var n=r.n(a);var i=r(21815);var s=r(22009);var o=r(22243);var c=r(22244);var l=r(234);var u=r(3182);var d=r(21850);var v=[i["b"],n.a,o["a"],l["default"],u["default"],c["a"],d["a"]];"undefined"!==typeof window.__karma__&&v.unshift(s["b"]);t["a"]=v},22009:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="_testOnlySpyableDispatch";t["b"]=function(){return function(e){var t=function e(t){return e[a](t)};t[a]=e;return t}}},2201:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(12);var _=r(21698);var y=r(3278);var O=r(907);var k=r(5);var j=r(21802);var C=r(2202);var E=new k["b"]("channel_options");var S={channel:v.a.object,disableConvertToPrivate:v.a.bool,disableRename:v.a.bool,isAdminUser:v.a.bool,modalClasses:v.a.string,onClickArchive:v.a.func,onClickConvertToPrivate:v.a.func,onClickDelete:v.a.func,onClickExport:v.a.func,onClickManageOrgAccess:v.a.func,onClickPostingPermissions:v.a.func,onClickPurpose:v.a.func,onClickRename:v.a.func,onClickShareExternal:v.a.func,onClickCancelExternalSharedChannelInvite:v.a.func,onClickStopShareExternal:v.a.func,orgName:v.a.string,pendingSharedExternalSharedTeamNames:v.a.array,showArchive:v.a.bool.isRequired,showConvertToPrivate:v.a.bool.isRequired,showDelete:v.a.bool.isRequired,showExport:v.a.bool.isRequired,showManageOrgAccess:v.a.bool.isRequired,showPostingPermissions:v.a.bool.isRequired,showPurpose:v.a.bool.isRequired,showRename:v.a.bool.isRequired,showShareExternal:v.a.bool.isRequired,showStopShareExternal:v.a.bool.isRequired,showSuccessAlert:v.a.bool,successAlertHeading:v.a.string,successAlertText:v.a.string,featurePubToPrvEscClient:v.a.bool.isRequired};var w={channel:{},disableConvertToPrivate:false,disableRename:false,isAdminUser:false,modalClasses:"",onClickArchive:m["noop"],onClickCancelExternalSharedChannelInvite:m["noop"],onClickConvertToPrivate:m["noop"],onClickDelete:m["noop"],onClickExport:m["noop"],onClickManageOrgAccess:m["noop"],onClickPostingPermissions:m["noop"],onClickPurpose:m["noop"],onClickRename:m["noop"],onClickShareExternal:m["noop"],onClickStopShareExternal:m["noop"],orgName:"",pendingSharedExternalSharedTeamNames:[],showSuccessAlert:false,successAlertHeading:"",successAlertText:""};var I=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderArchive",value:function e(){var t=this.props.onClickArchive;return h.a.createElement(C["a"],{dataActionTag:"archive",message:E.t("If you don\u2019t think it will be used anymore and you want to clean up, archive it. The channel can be unarchived later (but everyone will have been removed)."),onClick:t,title:E.t("Archive this channel")})}},{key:"renderShareExternal",value:function e(){var t=this;var r=this.props,a=r.channel,n=r.isAdminUser,i=r.onClickShareExternal,s=r.pendingSharedExternalSharedTeamNames;var o="";var c=E.t("Share this channel with another workspace");var l=E.rt("Shared channels link two workspaces together. People from both sides can send messages, share files, and search the channel\u2019s history. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return h.a.createElement("a",{key:r,href:"https://get.slack.help/hc/articles/115004151203",target:"_blank",rel:"noopener noreferrer"},t)});a.unlinked&&(o=h.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},h.a.createElement("div",{className:"c-alert__message"},E.t("This channel was previously shared with another workspace and can\u2019t be shared again."))));if(s.length){var u=Object(k["e"])(s).join("");var d=E.rt("{listified_pending_team_name} was already invited to this channel.",{listified_pending_team_name:h.a.createElement("strong",null,u)});var v="";if(n){var p=a.pending_shared[0];v=h.a.createElement("a",{onClick:function e(){return t.props.onClickCancelExternalSharedChannelInvite(p)},role:"button",tabIndex:"0"},E.t("Cancel invitation"))}o=h.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},h.a.createElement("div",{className:"c-alert__message"},d,"\xa0",v))}var f=s.length>0||!!a.unlinked;return h.a.createElement(C["a"],{dataActionTag:"share_external",isDisabled:f,message:l,onClick:i,title:c},o)}},{key:"renderStopShareExternal",value:function e(){var t=this.props.onClickStopShareExternal;return h.a.createElement(C["a"],{dataActionTag:"stop_share_external",title:E.t("Stop sharing this channel"),message:E.t("You can stop sharing this channel at any time. Note that you won\u2019t be able to re-share this channel in the future."),onClick:t})}},{key:"renderConvertToPrivate",value:function e(){var t=this.props,r=t.disableConvertToPrivate,a=t.onClickConvertToPrivate,n=t.featurePubToPrvEscClient;var i="";r&&(i=h.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},h.a.createElement("div",{className:"c-alert__message"},E.t("During the beta, shared channels can\u2019t be made private."))));if(n)return h.a.createElement(C["a"],{dataActionTag:"convert_private",isDisabled:r,title:E.t("Change to a private channel"),message:E.t("Private channels can only be joined if you are added by a current member \u2014 they won\u2019t show up in your channel browser. This change can\u2019t be undone."),onClick:a},i);return h.a.createElement(C["a"],{dataActionTag:"convert_private",isDisabled:r,message:E.t("Private channels are similar to channels, but they\u2019re hidden to non-members and the conversation is private. This conversion cannot be undone."),onClick:a,title:E.t("Convert this channel to a private channel")},i)}},{key:"renderManageOrgAccess",value:function e(){var t=this.props,r=t.channel,a=t.onClickManageOrgAccess,n=t.orgName;var i=void 0;i=Object(O["isOrgSharedPublicOrPrivateChannel"])(r)?Object(O["isPrivateChannel"])(r)?E.t("Manage which members of {org_name} can be invited to join this channel.",{org_name:n}):E.t("Manage which members of {org_name} can find and join this channel.",{org_name:n}):Object(O["isPrivateChannel"])(r)?E.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:n}):E.t("Anyone in the {org_name} workspaces you select will be able to find and join this channel.",{org_name:n});var s=void 0;s=Object(O["isOrgSharedPublicOrPrivateChannel"])(r)?E.t("Sharing settings for this channel"):E.t("Share this channel with other {org_name} workspaces",{org_name:n});return h.a.createElement(C["a"],{dataActionTag:"convert_ent_shared",message:i,onClick:a,title:s})}},{key:"renderRename",value:function e(){var t=this.props,r=t.disableRename,a=t.onClickRename;var n="";r&&(n=h.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_warning channel_option_item__alert top_margin"},h.a.createElement("div",{className:"c-alert__message"},E.t("You don\u2019t have permission to rename this channel."))));return h.a.createElement(C["a"],{dataActionTag:"rename",isDisabled:r,message:E.t("You can rename a channel at any time. But, use it sparingly: it might confuse or disorient your colleagues!"),onClick:a,title:E.t("Rename this channel")},n)}},{key:"renderPurpose",value:function e(){var t=this.props.onClickPurpose;var r=false;var a=void 0;a=r?E.t("Edit the channel purpose"):E.t("Set the channel purpose");var n=void 0;n=r?"":E.t("Channel purposes are especially useful to new members choosing which conversations to join.");return h.a.createElement(C["a"],{dataActionTag:"set_purpose",message:n,onClick:t,title:a})}},{key:"renderPostingPermissions",value:function e(){var t=this.props.onClickPostingPermissions;return h.a.createElement(C["a"],{dataActionTag:"posting_permissions",message:E.t("Change who is allowed to post messages in this channel."),onClick:t,title:E.t("Manage posting permissions")})}},{key:"renderExport",value:function e(){var t=this.props.onClickExport;return h.a.createElement(C["a"],{dataActionTag:"export",message:E.t("Export the messages in this conversation as a JSON file."),onClick:t,title:E.t("Export message history")})}},{key:"renderDelete",value:function e(){var t=this.props.onClickDelete;return h.a.createElement(C["a"],{dataActionTag:"delete",message:E.t("Deleting a channel will permanently remove all of its messages. This cannot be undone."),onClick:t,title:E.t("Delete this channel")})}},{key:"renderSuccessAlert",value:function e(){var t=this.props,r=t.successAlertHeading,a=t.successAlertText;var n={level:"success",heading:r};return h.a.createElement(j["a"],n,h.a.createElement("span",null,a))}},{key:"render",value:function e(){var t=this.props,r=t.showArchive,a=t.showConvertToPrivate,n=t.showDelete,i=t.showExport,s=t.showPostingPermissions,o=t.showPurpose,c=t.showRename,l=t.showShareExternal,u=t.showStopShareExternal,d=t.showManageOrgAccess,v=t.showSuccessAlert,p=t.modalClasses;return h.a.createElement("div",{className:p,role:"presentation"},v&&this.renderSuccessAlert(),r&&this.renderArchive(),l&&this.renderShareExternal(),u&&this.renderStopShareExternal(),a&&this.renderConvertToPrivate(),d&&this.renderManageOrgAccess(),c&&this.renderRename(),o&&this.renderPurpose(),s&&this.renderPostingPermissions(),i&&this.renderExport(),n&&this.renderDelete())}}]);return t}(p["PureComponent"]);I.displayName="OptionsList";I.defaultProps=w;function T(e){var t=Object(_["getCurrentMember"])(e);return{orgName:Object(y["getEnterpriseOrgName"])(e),isAdminUser:t.is_admin,featurePubToPrvEscClient:Object(g["isFeatureEnabled"])(e,"feature_pub_to_prv_esc_client")}}var N={};t["a"]=Object(f["connect"])(T,N)(I)},22010:function(e,t,r){"use strict";var a=r(22011);t["a"]=[a["b"]]},22011:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3216);var c=r.n(o);var l="_testOnlyFlush";var u=function e(t){return function(){var e=void 0;var r=void 0;var a=function t(){r=null;e&&e();e=null};var i=function t(n){if(r)return;e=n;r=requestAnimationFrame(a)};var c=Object(o["batchedSubscribe"])(i)(t);return s()({},c.apply(void 0,arguments),n()({},l,a))}};t["b"]=u},22013:function(e,t,r){"use strict";t["a"]=n;var a=null;function n(e){if("boolean"===typeof a)return a;try{var t=window[e];var r="__storage_test__";t.setItem(r,r);t.removeItem(r);a=true;return true}catch(t){a=false;return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==window[e].length}}},2202:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(37);var y=r(3184);var O={children:v.a.any,dataActionTag:v.a.string,isDisabled:v.a.bool,message:v.a.any.isRequired,onClick:v.a.func.isRequired,title:v.a.string.isRequired};var k={children:null,dataActionTag:"",isDisabled:false};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.children,a=t.dataActionTag,n=t.isDisabled,i=t.message,s=t.onClick,o=t.title;var c=m()("channel_option_item",{"channel_option_item--disabled":n});var l=n?b["noop"]:s;return h.a.createElement(y["c"],{className:c,"data-action":a,onClick:l,type:"link"},h.a.createElement("h3",{className:"title"},o),h.a.createElement("p",{className:"sk_dark_grey no_bottom_margin"},i),r,h.a.createElement("div",{className:"channel_option_open"},h.a.createElement(_["a"],{className:"c-deprecated-icon--inherit",type:"arrow_large_right"})))}}]);return t}(p["PureComponent"]);j.displayName="Option";j.defaultProps=k;t["a"]=j},2203:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(710);var O=r(1058);var k=r(1078);var j=r(69);var C=r(195);var E=r(711);var S=r(1074);var w=r(2204);var I=r(2206);var T=new _["b"]("channel_options");var N={canThread:h.a.bool,isOrgDefault:h.a.bool,onChangeCheckbox:h.a.func.isRequired,onChangeRadio:h.a.func.isRequired,onChangeValueSelectedMembers:h.a.func.isRequired,postingPermissionsLoaded:h.a.bool,postingPermissionsSelectedMembers:h.a.array,whoCanPost:h.a.string,featureDefaultSharedChannels:h.a.bool.isRequired};var R={canThread:false,isOrgDefault:false,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,whoCanPost:""};var A=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"maybeRenderCheckbox",value:function e(){var t=this.props,r=t.canThread,a=t.isOrgDefault,n=t.onChangeCheckbox,i=t.featureDefaultSharedChannels;var s=T.t("Allow members to start message threads?");var o=T.t("With this selected, anyone will be able to add threaded replies to messages posted in this channel.");if(!i||!a)return null;return m.a.createElement("div",null,m.a.createElement("hr",{className:"top_margin bottom_margin"}),m.a.createElement(C["a"],{htmlFor:"posting_permission_can_thread",type:"inline",cursor:"pointer",text:s,subtext:o},m.a.createElement(k["a"],{id:"posting_permission_can_thread",name:"can_thread",onChange:n,checked:r})))}},{key:"maybeRenderMemberPicker",value:function e(){var t=this.props,r=t.isOrgDefault,a=t.onChangeValueSelectedMembers,i=t.postingPermissionsSelectedMembers,s=t.whoCanPost;var o={};r&&(o.maxSelectedItems=100);var c=Object(y["b"])(i);var l=32;if("multi"===s||"owner"===s)return m.a.createElement(E["a"],n()({onValueChange:a,template:w["a"],tokenTemplate:I["a"],dataPromise:c,approxItemHeight:l},o));return null}},{key:"formatPermissionSettings",value:function e(){var t=this.props.featureDefaultSharedChannels;var r=void 0;var a=void 0;var n=void 0;if(t){r=T.t("Org Admins/Owners");a=T.t("Org Admins and Owners, plus select members");n="org_admin"}else{r=T.t("Org Admins/Owners and Workspace Admins/Owners");a=T.t("Org and Workspace Admin/Owner, selected members");n="admin"}return[{permissionType:"ra",label:T.t("Everyone"),hideWhenOrgDefault:true},{permissionType:"regular",label:T.t("Everyone, except guests"),hideWhenOrgDefault:true},{permissionType:n,label:r},{permissionType:"multi",label:a}]}},{key:"renderRadios",value:function e(){var t=this.props,r=t.isOrgDefault,a=t.onChangeRadio,n=t.whoCanPost;var i="owner"===n?"multi":n;!r||"ra"!==i&&"regular"!==i||(i="admin");var s=g.a.map(this.formatPermissionSettings(),function(e){if(r&&e.hideWhenOrgDefault)return null;var t=e.permissionType===i;return m.a.createElement("div",{key:e.permissionType},m.a.createElement(C["a"],{htmlFor:"who_can_post_"+e.permissionType,type:"inline",cursor:"pointer",className:"p-channel_options--radio_label",text:e.label},m.a.createElement(S["a"],{name:"who_can_post",value:e.permissionType,onChange:a,id:"who_can_post_"+e.permissionType,checked:t})))});return s}},{key:"render",value:function e(){var t=this.props.postingPermissionsLoaded;if(!t)return m.a.createElement("div",{className:"p-channel_options--option_spinner"},m.a.createElement(j["a"],{size:"medium"}));var r=T.t("Who can post in this channel?");return m.a.createElement("div",{className:"p-channel-options--content_text"},m.a.createElement("p",null,r),this.renderRadios(),this.maybeRenderMemberPicker(),this.maybeRenderCheckbox())}}]);return t}(f["PureComponent"]);A.displayName="PostingPermissions";A.defaultProps=R;t["a"]=Object(O["a"])("feature_default_shared_channels")(A)},2204:function(e,t,r){"use strict";t["a"]=o;var a=r(12159);var n=r.n(a);var i=r(1083);var s=r(2205);function o(e){if(e.member)return n.a.createElement(i["a"],{item:e});return n.a.createElement(s["a"],{item:e})}o.displayName="getItemTemplate"},2205:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={item:v.a.object};var m={item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;return h.a.createElement("div",{className:"c-lazy_filter_select__user_group_item"},h.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectUserGroupListItem";t["a"]=b;b.defaultProps=m},2206:function(e,t,r){"use strict";t["a"]=o;var a=r(12159);var n=r.n(a);var i=r(1084);var s=r(2207);function o(e){if(e.member)return n.a.createElement(i["a"],{item:e});return n.a.createElement(s["a"],{item:e})}o.displayName="getTokenTemplate"},2207:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={item:v.a.object};var m={item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;return h.a.createElement("div",{className:"c-lazy_filter_select__user_group_token",key:t.id},h.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectUserGroupToken";t["a"]=b;b.defaultProps=m},2208:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21705);var _=r(5);var y=r(271);var O=new _["b"]("channel_options");var k={canThread:v.a.bool,onErrorDialogButtonClick:v.a.func.isRequired,channelPrefError:v.a.bool,whoCanPost:v.a.string,featureDefaultSharedChannels:v.a.bool.isRequired,openModal:v.a.func};var j={canThread:false,whoCanPost:"",channelPrefError:false,openModal:b.a.noop};var C=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidUpdate",value:function e(t){var r=this.props.channelPrefError;!t.channelPrefError&&r&&this.props.openModal({element:this.renderError()})}},{key:"maybeRenderCanThreadLabel",value:function e(){var t=this.props.canThread;var r=O.rt("Additionally, <strong>anyone in this channel</strong> will be able to add threaded replies to messages in this channel.");if(t)return h.a.createElement("p",null,r);return null}},{key:"renderError",value:function e(){var t=this.props.onErrorDialogButtonClick;var r=O.t("OK");var a=O.t("For some weird reason, that didn\u2019t work. Please try again.");var n=O.t("Could not update settings");return h.a.createElement("div",null,h.a.createElement(y["a"],{goButtonText:r,showCancelButton:false,onGo:t,onCancel:t,title:n},h.a.createElement("p",null,a)))}},{key:"renderWhoCanPostLabel",value:function e(){var t=void 0;t=this.props.featureDefaultSharedChannels?{ra:O.t("Everyone"),regular:O.t("Everyone, except guests"),org_admin:O.t("Only Org Admins and Owners"),multi:O.t("Only Org Admins and Owners, plus select members")}:{ra:O.t("Everyone"),regular:O.t("Everyone, except guests"),admin:O.t("Only Org Admins and Owners, and Workspace Admins and Owners"),multi:O.t("Org Admins and Owners, Workspace Admins and Owners, plus selected members")};var r=this.props.whoCanPost;var a=O.rt("<strong>{text}</strong> will be able to post",{text:b.a.get(t,r)});return h.a.createElement("p",null,a)}},{key:"render",value:function e(){var t=O.t("Please note that these changes may take some time to complete.");return h.a.createElement("div",{className:"p-channel-options--content_text"},this.renderWhoCanPostLabel(),this.maybeRenderCanThreadLabel(),t)}}]);return t}(p["PureComponent"]);C.displayName="PostingPermissionsReview";C.defaultProps=j;var E={openModal:g["openModal"]};t["a"]=Object(f["connect"])(null,E)(C)},2209:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(1094);var g=r(5);var _=new g["b"]("channel_options");var y={additionalVerificationError:v.a.oneOfType([v.a.string,v.a.object]),additionalVerificationGood:v.a.bool,channelNameNeedsChecking:v.a.bool,channel:v.a.object.isRequired,isCheckingAdditionalVerification:v.a.bool,name:v.a.string,onInvalidName:v.a.func,onValidName:v.a.func};var O={additionalVerificationError:"",additionalVerificationGood:false,channelNameNeedsChecking:false,isCheckingAdditionalVerification:false,name:"",onInvalidName:f["noop"],onValidName:f["noop"]};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.title=r.props.name;"#"===r.title[0]&&(r.title=r.title.substr(1));return r}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.additionalVerificationError,a=t.additionalVerificationGood,n=t.channelNameNeedsChecking,i=t.channel,s=t.isCheckingAdditionalVerification,o=t.name,c=t.onInvalidName,l=t.onValidName;return h.a.createElement("div",{className:"top_margin"},h.a.createElement("label",{htmlFor:"channel_create_title",className:"c-label"},h.a.createElement("span",{className:"c-label__text"},_.t("Name"))),h.a.createElement(b["a"],{additionalVerificationError:r,additionalVerificationGood:a,channel:i,nameNeedsChecking:n,id:"channel_create_title",isCheckingAdditionalVerification:s,onInvalid:c,onValid:l,placeholder:_.t("Rename {title}",{title:o}),shouldFix:true,value:this.title}))}}]);return t}(p["PureComponent"]);k.displayName="RenameChannel";k.defaultProps=O;t["a"]=k},2210:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(3271);var _=r(907);var y=r(21703);var O=r(5);var k=r(91);var j=r(22261);var C=new O["b"]("shared_channels");var E={channel:h.a.object.isRequired,team:h.a.object.isRequired,externalTeams:h.a.array.isRequired,showLastChannelWarning:h.a.bool};var S={channel:{},team:{},externalTeams:[],showLastChannelWarning:false};var w=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.maybeRenderLastChannelWarning=r.maybeRenderLastChannelWarning.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){Object(k["b"])("SHARED_CHANNELS_STOP_SHARING_MODAL_OPEN",{is_last_channel_with_team:this.props.showLastChannelWarning,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_CHANNEL_OPTIONS_STOP_SHARING_OPTION",ui_component:"CHANNEL_OPTIONS_DIALOG"}}})}},{key:"maybeRenderLastChannelWarning",value:function e(){if(!this.props.showLastChannelWarning)return null;var t=this.props.externalTeams.map(function(e){var t=e.name;return t});var r=Object(O["e"])(t,{react:true,strong:true});return m.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_error margin_bottom_150"},m.a.createElement("div",{className:"c-alert__message"},m.a.createElement("strong",null,C.rt("This is your only shared channel with {teamNames}",{teamNames:r})),m.a.createElement("br",null),C.t("If you stop sharing this channel, you won\u2019t be able to direct message members of their workspace.")))}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.team,i=t.externalTeams;var s=i.map(function(e){return Object(y["getTeamDisplayName"])(e)});var o=Object(O["e"])(s,{react:true,strong:true});var c=Object(O["e"])([Object(y["getTeamDisplayName"])(a)].concat(n()(s)),{react:true,strong:true});return m.a.createElement("div",null,this.maybeRenderLastChannelWarning(),m.a.createElement("p",{className:"p-channel-options--content_text"},C.t("You can stop sharing this channel at any time. Here\u2019s what will happen:")),m.a.createElement("ul",{className:"p-channel-options--content_text"},m.a.createElement("li",null,C.rt("{teamNames} will keep separate copies of this channel.",{teamNames:c})),m.a.createElement("li",null,C.t("Each workspace can continue using their copy.")),m.a.createElement("li",null,C.t("Neither workspace will be able to re-share this channel."))),m.a.createElement("p",{className:"p-channel-options--content_text"},C.rt("Are you sure you want to stop sharing {channelName} with {teamNames}?",{channelName:m.a.createElement(j["a"],{channel:r,strong:true}),teamNames:o})))}}]);return t}(f["PureComponent"]);w.displayName="StopSharingChannel";w.defaultProps=S;function I(e,t){var r=t.channel;return{team:Object(g["getCurrentTeam"])(e),externalTeams:Object(_["getSharedTeamIds"])(r).map(function(t){return Object(g["getTeamById"])(e,t)})}}t["a"]=Object(b["connect"])(I)(w)},2211:function(e,t,r){"use strict";t["a"]=a;function a(e){var t="";e&&(t="type:all");return t}},2212:function(e,t,r){"use strict";t["a"]=a;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a="";if("multi"===e){a=r?"type:org_admin":"type:admin";t&&t.length&&t.forEach(function(e){a+=",user:"+e})}else a="type:"+e;return a}},2213:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2214);var n=r(42);Object(n["a"])("interop.mountChannelSidebar",a["a"])},22137:function(e,t,r){"use strict";var a=r(21923);r.d(t,"a",function(){return a["a"]});t["b"]=a["b"]},22138:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(12);var O=r(3203);var k=r(5);var j=r(140);var C=r(1037);var E=r(21724);var S=r(37);var w=r(22139);var I=r(22140);var T=r(20160);var N=r.n(T);var R=new k["b"]("workspace_directory");var A={className:m.a.string,containerIdSelector:m.a.string,featureZeroWorkspaceOnboarding:m.a.bool.isRequired,fetchWorkspaces:m.a.func.isRequired,fetchMembers:m.a.func.isRequired,membersOnly:m.a.bool,onClearInput:m.a.func,onOptionsListOpened:m.a.func,onOptionsListClosed:m.a.func,prepopulatedOption:m.a.object,triggerAction:m.a.func};var M={className:"",containerIdSelector:"",membersOnly:true,onClearInput:g["noop"],onOptionsListClosed:g["noop"],onOptionsListOpened:g["noop"],prepopulatedOption:void 0,triggerAction:g["noop"]};var P=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={nextCursorMark:"*",options:[],totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(g["bindAll"])(r,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);r.select=null;r.debouncedOnFilterInputChange=Object(g["debounce"])(r.onFilterInputChange,100);return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.prepopulatedOption,a=t.membersOnly;Object(g["isEmpty"])(r)||this.setPrepopulatedOptionData(r);this.getOptionsFetcher();a||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var r=this.props.prepopulatedOption;var a=t.prepopulatedOption;Object(g["isEmpty"])(r)||r===a||this.setPrepopulatedOptionData(r)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var r=this.props.membersOnly;var a=this.state,n=a.currentOptionsData,i=a.currentSearchQuery;var s=void 0;var o=void 0;var c=void 0;if(t===E["b"]){s={id:E["b"],displayValue:i};c=n}else if(r){s=Object(g["find"])(n,{id:t});o=Object(O["l"])(s);c=[s]}else{s=Object(g["chain"])(Object(g["values"])(n)).flatten().find({id:t}).value();var l=Object(E["h"])(s);o=l?Object(O["l"])(s):Object(g["get"])(s,"name");c=l?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===E["b"]?i:o,nextCursorMark:"*",currentOptionsData:c};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var r=this.props,a=r.triggerAction,n=r.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&a({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var r=!Object(g["isEmpty"])(t);this.setIsAnOptionHighlighted(r)}},{key:"onScroll",value:function e(t){var r=200;var a=this.state,n=a.currentSearchQuery,i=a.currentOptionsData,s=void 0===i?[]:i,o=a.totalResultsCount;var c=t.clientHeight,l=t.scrollHeight,u=t.scrollTop;var d=l-(u+c)<r;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,r=t.selectedOptionData,a=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!a||n)return;var i=Object(g["get"])(this.select,"filterInput.value",a);if(!r){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:E["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var r=t.optionData,a=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s=void 0;s=a?r:Object(g["unionBy"])(i,r,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var r=t.memberOptionData,a=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,c=t.workspaceResultsCount,l=void 0===c?0:c;var u=this.state.currentOptionsData;var d=void 0;var v=!o&&!l||i?i:o+l;d=n?{members:r,workspaces:a}:{members:Object(g["unionBy"])(Object(g["get"])(u,"members"),r,"id"),workspaces:Object(g["unionBy"])(Object(g["get"])(u,"workspaces"),a,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:v,memberResultsCount:o,workspaceResultsCount:l}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var r=R.t("Search for a teammate");var a=R.t("Search");return t?r:a}},{key:"getOptionsFetcher",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.forceNewSearch,n=void 0!==a&&a,i=r.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var c=this.props.membersOnly;var l=c?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return l({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"initKeyCommands",value:function e(){var t=new j["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(a).then(function(e){var t=e.items,a=void 0===t?[]:t,o=e.next_cursor_mark,c=e.num_found;if(!a.length&&"*"!==o)return;r.setNextCursorMark(o);r.setCurrentOptionsData({optionData:a,isNewSearch:n||s!==i,totalResultsCount:c})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var r=this;var a=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props,c=o.fetchWorkspaces,l=o.fetchMembers;var u=[l(a),c(a)];return Promise.all(u).then(function(e){var t=e[0],a=t.items,o=void 0===a?[]:a,c=t.next_cursor_mark,l=t.num_found;var u=e[1],d=u.items,v=void 0===d?[]:d,p=u.next_cursor_mark,h=u.num_found;var f=void 0;if(!o.length&&"*"!==c&&!v.length&&"*"!==p)return;o.length&&!v.length?r.setNextCursorMark(c):v.length&&!o.length&&r.setNextCursorMark(p);o.length&&!v.length?f=l:v.length&&!o.length&&(f=h);r.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:v,isNewSearch:n||s!==i,totalResultsCount:f,memberResultsCount:l,workspaceResultsCount:h})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var r=this.state.selectedOptionData;var a=Object(E["h"])(r)?"member":"workspace";t({selectedOptionData:r,type:a})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var r=this;var a=this.props.membersOnly;var n=this.state.selectedOptionData;var i=[];if(a)i=Object(g["map"])(t,function(e){return r.formatMemberOptionData(e)});else{var s=t.members,o=t.workspaces;var c=Object(g["get"])(s,"length",0);var l=Object(g["get"])(o,"length",0);if(c){var u={label:this.formatMemberOptionsGroupsHeader(),options:[]};var d=l>0?Object(g["slice"])(s,0,4):s;u.options=Object(g["map"])(d,function(e){return r.formatMemberOptionData(e)});i.push(u)}if(l){var v={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};v.options=Object(g["map"])(o,function(e){return r.formatWorkspaceOptionData(e)});i.push(v)}}return i}},{key:"formatMemberOptionData",value:function e(t){var r=Object(O["l"])(t);var a=Object(g["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:a,displayValue:r}}},{key:"formatWorkspaceOptionData",value:function e(t){var r=Object(g["get"])(t,"name");var a=Object(g["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:a,displayValue:r}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,r=t.memberResultsCount,a=t.selectedOptionData;var n=a?1:r;return R.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var r=this.state,a=r.currentSearchQuery,n=r.workspaceResultsCount,i=r.selectedOptionData;var s=Object(g["get"])(t,"displayValue","")?Object(g["get"])(t,"displayValue",""):a;var o=i?1:n;var c=Object(E["c"])()?50:150;var l=Object(g["get"])(s,"length",0)>c?s.slice(0,c)+"...":s;return R.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(k["l"])(l),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},h.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},h.a.createElement(S["b"],{type:"search"})),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},R.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(k["l"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var r=t.item,a=t.type;return h.a.createElement(I["a"],{item:r,type:a,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,r=t.containerIdSelector,a=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,c=i.loadingResults,l=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var v=this.getBoundingRect(r),p=v.bottom,f=void 0===p?0:p,m=v.top,b=void 0===m?0:m;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:l,isLoading:c,membersOnly:a,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-f,optionsListOffsetTop:b,optionsRowHeight:48,placeholder:this.getPlaceHolderText(a),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};a?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(g["get"])(u,"id")===E["b"]){_.selectedOption=u;_.displayValue=Object(g["get"])(u,"displayValue")}else{var y=Object(E["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(g["get"])(y,"displayValue")}return h.a.createElement("div",{className:"position_relative"},h.a.createElement(w["a"],n()({},_,{ref:this.setSelectRef})))}}]);return t}(p["Component"]);P.displayName="WorkspaceSearch";P.defaultProps=M;var x=function e(t){var r=function e(r){return Object(C["f"])(t,r)};var a=function e(r){return Object(C["m"])(t,r)};return{featureZeroWorkspaceOnboarding:Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),fetchWorkspaces:r,fetchMembers:a}};t["a"]=Object(b["connect"])(x,null,null,{withRef:true})(P)},22139:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(22903);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(1);var C=r.n(j);var E=r(1198);var S=r(253);var w=r(5);var I=r(21724);var T=r(3203);var N=r(140);var R=r(594);var A=r(3184);var M=r(1193);var P=r(20075);var x=r.n(P);var D={default:"default",short:"short"};var F=new w["b"]("form");var L={autoSelectFirstOption:g.a.bool,className:g.a.string,displayValue:g.a.string,id:g.a.string,isLoading:g.a.bool,labelId:g.a.string,membersOnly:g.a.bool,name:g.a.string,onChange:g.a.func,onClearButtonClick:g.a.func.isRequired,onClose:g.a.func,onFilterInputChange:g.a.func,onOptionHighlighted:g.a.func,onOutsideClick:g.a.func,onOpen:g.a.func,onScroll:g.a.func,optionClassName:g.a.string,optionGroups:g.a.array,options:g.a.array,optionsListBottomOffset:g.a.number,optionsListTopOffset:g.a.number,optionsListWidth:g.a.number,optionsRowHeight:g.a.number,pillarClassName:g.a.string,placeholder:g.a.string,selectedOption:g.a.object,selectedValueClassName:g.a.string,type:g.a.oneOf(Object(j["values"])(D)),useFullWidthOptions:g.a.bool,usePlaceholderOption:g.a.bool,wrapperClassName:g.a.string,value:g.a.string};var B={className:null,displayValue:void 0,id:"select-"+Object(R["c"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:j["noop"],onClose:j["noop"],onFilterInputChange:j["noop"],onOptionHighlighted:j["noop"],onOutsideClick:j["noop"],onOpen:j["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:F.t("Choose an option\u2026"),selectedOption:void 0,selectedValueClassName:void 0,type:D.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var U=function(e){m()(t,e);function t(e){u()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.preventFocusAndBlur=false;r.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(j["bindAll"])(r,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return r}v()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,r){var a=this.props,n=a.onClose,i=a.onOpen,s=a.selectedOption;var o=this.state,c=o.isOpen,l=o.selectedOptionValue;if(s){var u=Object(I["h"])(s)?Object(T["l"])(s):Object(j["get"])(s,"name");u!==l&&this.setSelectedOptionValue(u)}else l&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!r.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);r.isOpen&&n()}this.filterInput&&c&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var r=t.target===this.filterInput;r?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;if(!r)return;var a=this.getSelectedOptionDisplayValue({value:r});this.setSelectedOptionValue(a);this.props.onChange(r);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,r=t.selectedOption,a=t.membersOnly;var n=this.getFilterQuery();var i=a?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||r)return i();return[]}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,r=t.optionGroups,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOptionGroup()].concat(c()(r));return r}},{key:"getFilteredOptions",value:function e(){var t=this.props,r=t.options,a=t.usePlaceholderOption;var n=this.getFilterQuery();if(!r)return null;if(!n&&a)return[this.getPlaceholderOption()].concat(c()(r));return r}},{key:"getFilterQuery",value:function e(){return Object(j["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,r=t.optionsListOffsetBottom,a=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(E["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var c=this.select.offsetParent.clientHeight-s;var l=s+i.height;var u=i.bottom;var d=i.top;var v=n||i.width;return{bottom:u,offsetBottom:r,offsetTop:a,relativeBottom:l,relativeLeft:o,relativeTop:c,top:d,width:v}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.props.placeholder,value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value;var a=this.props,n=a.optionGroups,i=a.options;var s=n?Object(j["flatMap"])(n,"options"):i;var o=Object(j["find"])(s,{value:r});return Object(j["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var r=this;return function(e){r[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var r=t.label.toLowerCase();var a=this.getFilterQuery().toLowerCase();return-1!==r.indexOf(a)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new N["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var r={isOpen:Object(j["isUndefined"])(t)?!e.isOpen:t};r.isOpen||(r.filterQuery="");return r})}},{key:"renderFilterInput",value:function e(){var t=this.state,r=t.filterQuery,a=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.props.placeholder,ref:this.setRef("filterInput"),type:"text"};i.value=a&&!r?a:a||!n||r?r:n;return y.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,r=t.autoSelectFirstOption,a=t.isLoading,n=t.membersOnly,i=t.optionClassName,s=t.optionsRowHeight,o=t.pillarClassName,c=t.useFullWidthOptions,l=t.value,u=t.onScroll,d=t.onOptionHighlighted;var v=n?240:400;return y.a.createElement(M["a"],{autoSelectFirstOption:r,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:a,maxListHeight:v,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:n?null:this.maybeShowOptions(),options:n?this.maybeShowOptions():null,optionsRowHeight:s,pillarClassName:o,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:l,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var r=F.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:t});var a=F.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return y.a.createElement("div",{className:"p-workspace_search__no-results-message"},y.a.createElement("p",{className:"margin_0"},r),y.a.createElement("p",{className:"margin_0"},a))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var r=t?F.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):F.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return y.a.createElement("div",{className:"p-workspace_search__no-results-message"},y.a.createElement("p",{className:"margin_0"},r))}},{key:"render",value:function e(){var t=this.props,r=t.autoSelectFirstOption,a=t.className,i=t.displayValue,o=t.isLoading,c=t.labelId,l=t.membersOnly,u=t.name,d=t.onChange,v=t.onClearButtonClick,p=t.onClose,h=t.onFilterInputChange,f=t.onOutsideClick,m=t.onOpen,b=t.onOptionHighlighted,g=t.onScroll,_=t.optionClassName,O=t.options,j=t.optionsListOffsetBottom,C=t.optionsListOffsetTop,E=t.optionsListWidth,S=t.optionsRowHeight,w=t.optionGroups,I=t.pillarClassName,T=t.placeholder,N=t.selectedOption,R=t.selectedValueClassName,M=t.type,P=t.useFullWidthOptions,x=t.usePlaceholderOption,D=t.wrapperClassName,F=s()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=k()("c-input_select__wrapper",D);var U=k()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===M},a);var q=k()("p-workspace_search__clear-button",{hidden:!L&&!i});return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},y.a.createElement("div",n()({},F,{"aria-labelledby":c,className:U,"data-name":u,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),y.a.createElement(A["c"],{className:q,onClick:this.onClearInput,tabIndex:"0",ref:this.setRef("closeButton")}))}}]);return t}(S["a"]);U.displayName="WorkspaceSearchSelect";U.propTypes=L;U.defaultProps=B;t["a"]=U},2214:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(21697);var l=r(277);var u=r(21708);var d=r(1080);var v=r(2215);var p=r(2217);var h=r(1458);var f=r(1412);var m=r(2219);var b=r(21717);var g=r(22387);var _=r(12);var y=r(23050);var O="shared_channels_channel_sidebar_plus_btn";var k="react_channel_sidebar_display_item";var j=Object(b["a"])(1);var C=function e(t,r,a){j&&Object(u["d"])(k+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(l["a"])({id:a})).catch(function(e){Object(m["c"])("beep");throw e}).finally(function(){j&&Object(u["f"])(k,k+"_mark")})};var E=function e(t){return Object(h["a"])(t,true)};var S=function e(){return Object(p["e"])({element:O})};var w=function e(t,r,a){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var l=Object(o["c"])(t);"experiment"===Object(v["a"])("speedy_sidebar_boot")&&l.dispatch(Object(c["bulkAddChannels"])({channels:Object(d["a"])()}));var u=function e(t){return C(l.dispatch,l.getState,t)};var h=function e(){return Object(g["a"])(l)};var m=Object(_["isFeatureEnabled"])(l.getState(),"feature_modernize_invites")?function(){return l.dispatch(Object(y["a"])())}:E;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(f["a"],{onItemSelect:u,onBrowseChannelsClick:p["b"],onBrowseSharedChannelsClick:p["c"],onCreateChannelClick:p["d"],onCreateSharedChannelClick:S,onOpenDMClick:p["f"],onBrowseAppsClick:p["a"],onInviteClick:m,onDevToolsClick:h,ref:a})),r)};t["a"]=w},22140:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(21723);var g=r(20159);var _=r.n(g);var y={item:v.a.object,type:v.a.oneOf(["member","workspace"]),featureReactMessages:v.a.bool.isRequired,featureReactMemberProfileCard:v.a.bool.isRequired};var O={item:{},type:"member"};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["maybeRenderTitle","maybeRenderEmail"]);return r}s()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var r=t.item,a=t.type;var n=this.props,i=n.featureReactMemberProfileCard,s=n.featureReactMessages;return h.a.createElement(b["a"],{entityType:a,dimension:36,entityData:r,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var r=t.item,a=t.type;var n=Object(f["get"])(r,"profile");var i=n.real_name,s=n.email,o=n.title;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var r=t.item,a=t.type;var n=r.name,i=r.description;return h.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:r,type:a}),h.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},h.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),h.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,r=t.item,a=t.type;return"member"===a?this.renderItemAsMember({item:r,type:a}):this.renderItemAsWorkspace({item:r,type:a})}}]);return t}(p["PureComponent"]);k.displayName="WorkspaceSearchOptionsListItem";t["a"]=k;k.defaultProps=O},22141:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(12);var j=r(21698);var C=r(3184);var E=r(5);var S=r(21724);var w=new E["b"]("workspace_directory");var I={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var T={team:m.a.shape({id:m.a.string,description:m.a.string,discoverable:m.a.string,name:m.a.string,domain:m.a.string,is_member:m.a.bool,date_requested_join:m.a.oneOfType([m.a.string,m.a.number]),icon:m.a.object,is_inactive:m.a.bool,user_counts:m.a.object}).isRequired,buttonContext:m.a.oneOf(Object(y["values"])(S["a"])),featureZeroWorkspaceOnboarding:m.a.bool.isRequired,customClasses:m.a.string,onWorkspaceJoin:m.a.func,onWorkspaceRequestToJoin:m.a.func,onWorkspaceLaunch:m.a.func,onDefaultButtonClick:m.a.func,doLaunchInNewTab:m.a.bool,displayDirectoryInModal:m.a.bool,size:m.a.oneOf(["medium","large"])};var N={buttonContext:"largeCard",onClick:y["noop"],customClasses:"",onWorkspaceJoin:y["noop"],onWorkspaceRequestToJoin:y["noop"],onWorkspaceLaunch:y["noop"],onDefaultButtonClick:y["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,size:"large"};var R=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="join";var i=r?w.t("Join and Open"):w.t("Join and Launch Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var A=function e(){var t="primary";var r="request_to_join";return{text:w.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var M=function e(){var t="primary";var r="request_sent";return{text:w.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r,disabled:true}};var P=function e(t){var r=t.displayDirectoryInModal;var a="primary";var n="launch";var i=r?w.t("Open"):w.t("Launch in Slack");return{text:i,type:a,"data-qa-ws-directory-button-type":a,"data-qa-ws-directory-button-text":n,"data-qa":n}};var x=function e(){var t="outline";var r="default";return{type:t,text:w.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":r,"data-qa":r}};var D=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={loading:false};r.buttonType=null;r.onClick=r.onClick.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var r=this.props.displayDirectoryInModal;switch(t){case I.launch:return P({displayDirectoryInModal:r});case I.request:return A();case I.join:return R({displayDirectoryInModal:r});case I.request_sent:return M();case I.default:return x();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this;var r=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(r){var a=window.open("","_blank");return this.props.onWorkspaceJoin({onDone:function e(){return t.props.onWorkspaceLaunch(a)},onReject:function e(){t.setLoading(false);a.close()}})}return this.props.onWorkspaceJoin({onDone:function e(){return t.props.onWorkspaceLaunch()}})}if("request"===this.buttonType)return this.props.onWorkspaceRequestToJoin({onDone:function e(){t.setLoading(false)}});if("launch"===this.buttonType){this.props.onWorkspaceLaunch();r&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,r=t.featureZeroWorkspaceOnboarding,a=t.team,i=t.buttonContext,o=t.customClasses,c=t.size;var l=this.state.loading;var u=L(a,{context:i,featureZeroWorkspaceOnboarding:r});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(y["isEmpty"])(d))return null;var v=a.id;var p=d.text,h=s()(d,["text"]);var f=h.disabled||l;return g.a.createElement(C["b"],n()({},h,{className:o,role:"button",tabIndex:"0",onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":v,"data-qa-ws-directory-button":true,loading:l,disabled:f,size:c}),p)}}]);return t}(b["Component"]);D.displayName="WorkspaceDirectoryButton";D.defaultProps=N;var F=function e(t,r){var a=r.team,n=r.onActionReject,i=r.onActionResolve,s=r.anchorPage,o=r.doLaunchInNewTab,c=r.doUpsertJoin,l=r.channelRedirect,u=r.postLaunchAction,d=r.userIdFromURL;var v=Object(j["getCurrentMember"])(t);return{featureZeroWorkspaceOnboarding:Object(k["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(k["isClientApp"])(t),onWorkspaceJoin:function e(r){var o=r.onDone,l=r.onReject,u=void 0===l?y["noop"]:l;return Object(S["i"])(t,{team:a,onActionReject:function e(){u();n.apply(void 0,arguments)},onActionResolve:i,onDone:o,anchorPage:s,doUpsertJoin:c})},onWorkspaceRequestToJoin:function e(r){var o=r.onDone;return Object(S["l"])(t,{team:a,onActionReject:n,onActionResolve:i,onDone:o,anchorPage:s})},onWorkspaceLaunch:function e(r){return Object(S["j"])(t,{team:a,user:v,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,windowOpener:r,channelRedirect:l,postLaunchAction:u,userIdFromURL:d})}}};t["a"]=Object(_["connect"])(F)(D);function L(e,t){var r=t.context,a=void 0===r?S["a"].smallCard:r,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=e.is_member,o=e.date_requested_join,c=e.is_assigned,l=e.discoverable;if(s)return I.launch;if(a!==S["a"].smallCard){switch(l){case"open":return I.join;case"closed":if(!o)return I.request;if(a===S["a"].largeCard)return I.request_sent;break;case"unlisted":if(c)return I.join;break;default:}return null}return I.default}},22142:function(e,t,r){"use strict";var a=r(10);var n=Object(a["c"])("TS.ms.msg_handlers",function(){return{}});t["a"]=n},22143:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(172);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21698);var u=r(12);var d=r(21697);var v=r(3270);var p=r(49);var h=r(3275);var f=r(3271);var m=r(21722);var b=r(3204);var g=r(1501);var _=r(907);var y=r(3228);var O=r(3229);var k=r(3230);var j=r(3231);var C=r(139);var E=r(1007);var S=r(439);var w=r(21831);var I=r(21760);var T=r(21707);var N=this;var R=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r,a,s){var c,l,d,v,h,f,m;return regeneratorRuntime.wrap(function e(b){while(1)switch(b.prev=b.next){case 0:if(!Object(u["isFeatureEnabled"])(a(),"feature_modern_files_info")){b.next=5;break}b.next=3;return Object(i["resolve"])(Object(p["a"])(r,M({fileIds:t,reason:s})));case 3:c=b.sent;return b.abrupt("return",Object(o["keyBy"])(c,"id"));case 5:if(!(1===t.length)){b.next=12;break}l=t[0];d=null;b.next=10;return Object(i["resolve"])(P(l,d,s));case 10:v=b.sent;return b.abrupt("return",n()({},l,v));case 12:b.next=14;return Object(i["resolve"])(x(t));case 14:h=b.sent;f=h.data;m={};f.files.forEach(function(e){m[e.id]=e});return b.abrupt("return",m);case 19:case"end":return b.stop()}},e,this)}));return function t(r,a,n,i){return e.apply(this,arguments)}}();var A=T["b"];var M=g["d"];var P=C["f"];var x=C["h"];var D=d["getActiveChannel"];var F=d["getChannelById"];var L=C["i"];var B=l["hasMemberWithId"];var U=w["a"];var q=w["b"];var H=C["m"];var W=m["getOrFetchMemberCounts"];var G=100;var V=["file_deleted","file_private","message","file_comment_added","file_comment_deleted","file_comment_edited","file_public","file_private","file_change","file_shared","file_unshared","star_added","star_removed"];var z=["pin_added","pin_removed"];var K=["member_joined_channel"];var Q=["channel_joined","group_joined","mpim_joined","dnd_updated","dnd_updated_user","manual_presence_change","member_left_channel","presence_change","status_change","subteam_created","subteam_updated","user_removed_from_team","user_change","message","channel_created","channel_deleted"];var Y=function e(t,r){var a=ie(r)||{},n=a.objectWithFile;if(!n)return;n.file=t;r._file_attached=true};var J=function e(t,r,a){if(!r)return true;if(q()&&U(r))return false;var n=Object(u["getCurrentUserId"])(a());if("file_created"===t.type&&t.user_id===n)return false;return!L(r)};function Z(e,t){var r=D(t());if(!r)return true;return!Object(_["isIm"])(r)&&!Object(_["isMpim"])(r)&&e!==r.id}function X(e,t){var r=e.type;if(V.indexOf(r)>=0)return true;if(Object(u["isFeatureEnabled"])(t(),"feature_less_pins")&&z.indexOf(r)>=0)return true;return false}function $(e){return Object(u["isFeatureEnabled"])(e,"feature_less_preprocess_fetching")&&Object(u["isFeatureEnabled"])(e,"feature_lazy_channels")&&Object(u["isFeatureEnabled"])(e,"feature_lazy_teams")}function ee(e){var t=e.type;return K.indexOf(t)>=0}function te(e){var t=e.type;return Q.indexOf(t)>=0}var re=function e(t,r){var a=[];A(function(e){if(X(e,r))return;var t=ie(e)||{},n=t.fileId;n&&a.indexOf(n)<0&&!J(e,n,r)&&a.push(n)},t);return a};var ae=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r,a,n){var s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return Object(i["resolve"])(R(t,r,a,n));case 2:s=o.sent;A(function(e){if(X(e,a))return;var t=ie(e)||{},r=t.fileId;r&&s[r]&&!J(e,r,a)&&Y(s[r],e)},r);case 4:case"end":return o.stop()}},e,N)}));return function t(r,a,n,i){return e.apply(this,arguments)}}();var ne=function e(t,r){var a=ie(t)||{},n=a.objectWithFile,i=a.fileId;n&&n.file&&H(n.file);if(!i)return Promise.resolve();var s=r();if(X(t,r))return Promise.resolve();if(t._file_attached)return Promise.resolve();if(J(t,i,r)){t._should_dispatch=false;return Promise.resolve()}var o=Object(v["getTeamId"])(s);var c=re(o,r).slice(0,G);if(!c.length)return Promise.resolve();var l=t.subtype?"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type;return ae(c,o,r,l).catch(function(){t._should_dispatch=false})};function ie(e){if(e.file&&e.file.id)return{objectWithFile:e,fileId:e.file.id};if(e.file_id)return{objectWithFile:e,fileId:e.file_id};if(e.item){if(e.item.file&&e.item.file.id)return{objectWithFile:e.item,fileId:e.item.file.id};if(e.item.file_id)return{objectWithFile:e.item,fileId:e.item.file_id}}return null}function se(e,t,r){if("message"!==e.type||!e.text)return Promise.resolve();var a=E["atHereRegExp"].test(e.text)||E["atChannelRegExp"].test(e.text)||E["atEveryoneRegExp"].test(e.text)||E["atGroupRegExp"].test(e.text);if(!a)return Promise.resolve();var n=false;var i=F(r(),e.channel,n);if(!i)return Promise.resolve();var s=t(W({channelId:i.id}));return s.promise?s.promise.catch(o["noop"]):Promise.resolve()}var oe=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n,s,c,l,u,m,g,_,C,E,w,T,R,A;return regeneratorRuntime.wrap(function e(N){while(1)switch(N.prev=N.next){case 0:if(!(false===t._should_dispatch)){N.next=2;break}return N.abrupt("return");case 2:a=r();n=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return p["a"].apply(void 0,[Object(v["getTeamId"])(a)].concat(r))};s=$(a);c=s||ee(t);l=s?[]:Object(k["a"])(t);u=s?[]:Object(O["a"])(t);m=s?[]:Object(y["a"])(t);g=c?[]:Object(j["a"])(t);_=l.filter(function(e){return!Object(d["hasChannelWithId"])(a,e)});C=u.filter(function(e){return!B(a,e)});E=m.filter(function(e){return!Object(h["hasBotWithId"])(a,e)});w=g.filter(function(e){return!Object(f["hasTeamWithId"])(a,e)});T=t.subtype?"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type;R=!!(_.length||C.length||E.length||w.length);A=R?Promise.join(Object(S["e"])(_,T).catch(o["noop"]),n(Object(b["a"])({ids:C,reason:"ensureModelObsArePresent"})).catch(o["noop"]),Object(h["ensureBotsArePresent"])(a,n,E).catch(o["noop"]),Object(I["b"])(w,T).catch(o["noop"])):Promise.resolve();N.next=19;return Object(i["resolve"])(A.catch(o["noop"]));case 19:N.next=21;return Object(i["resolve"])(se(t,n,r).then(o["noop"]));case 21:case"end":return N.stop()}},e,N)}));return function t(r,a){return e.apply(this,arguments)}}();var ce=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a,n;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:a=r();n=["message","channel_created","mpim_joined","group_joined"];if(!(Object(u["isFeatureEnabled"])(a,"feature_lazy_channels")&&te(t))){s.next=6;break}return s.abrupt("return");case 6:if(!(n.indexOf(t.type)<0&&te(t))){s.next=8;break}return s.abrupt("return");case 8:if(!("user_typing"===t.type&&!B(a,t.user)&&Z(t.channel,r))){s.next=11;break}t._should_dispatch=false;return s.abrupt("return");case 11:s.prev=11;s.next=14;return Object(i["resolve"])(ne(t,r));case 14:s.next=16;return Object(i["resolve"])(oe(t,r));case 16:s.next=20;break;case 18:s.prev=18;s.t0=s["catch"](11);case 20:case"end":return s.stop()}},e,N,[[11,18]])}));return function t(r,a){return e.apply(this,arguments)}}();t["a"]=function(){var e=Object(i["coroutine"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function e(n){while(1)switch(n.prev=n.next){case 0:n.next=2;return Object(i["resolve"])(ce(t,r));case 2:a=false!==t._should_dispatch;delete t._should_dispatch;return n.abrupt("return",a);case 5:case"end":return n.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}();var le={NO_FETCH_MISSING_FILE_TYPES:V,NO_FETCH_MISSING_OBJECT_TYPES:Q,canIgnoreUserTypingMessage:Z,getFileInfoFromMessage:ie,maybeEnsureMemberCount:se,canSkipObjectFetchForMessage:te};Object.defineProperty(le,"applyFunctionToPendingMessagesForTeam",{get:function e(){return A},set:function e(t){A=t}});Object.defineProperty(le,"attachFileObjectToMessage",{get:function e(){return Y},set:function e(t){Y=t}});Object.defineProperty(le,"canIgnoreFileMessage",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty(le,"ensureDataIsPresent",{get:function e(){return ce},set:function e(t){ce=t}});Object.defineProperty(le,"ensureFilesInMessageArePresent",{get:function e(){return ne},set:function e(t){ne=t}});Object.defineProperty(le,"ensureModelObsInMessageArePresent",{get:function e(){return oe},set:function e(t){oe=t}});Object.defineProperty(le,"fetchAndAttachFilesForMessagesInQueue",{get:function e(){return ae},set:function e(t){ae=t}});Object.defineProperty(le,"fetchFilesById",{get:function e(){return M},set:function e(t){M=t}});Object.defineProperty(le,"fetchFileInfoRaw",{get:function e(){return P},set:function e(t){P=t}});Object.defineProperty(le,"fetchMultipleFilesRaw",{get:function e(){return x},set:function e(t){x=t}});Object.defineProperty(le,"getActiveChannel",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(le,"getFileById",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(le,"getFileIdsToFetchFromQueue",{get:function e(){return re},set:function e(t){re=t}});Object.defineProperty(le,"hasMemberWithId",{get:function e(){return B},set:function e(t){B=t}});Object.defineProperty(le,"getChannelById",{get:function e(){return F},set:function e(t){F=t}});Object.defineProperty(le,"isFileRelevantToPost",{get:function e(){return U},set:function e(t){U=t}});Object.defineProperty(le,"isOnPostPage",{get:function e(){return q},set:function e(t){q=t}});Object.defineProperty(le,"maybePruneChannels",{get:function e(){return H},set:function e(t){H=t}});Object.defineProperty(le,"getOrFetchMemberCounts",{get:function e(){return W},set:function e(t){W=t}})},22144:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.mentions.maybeUpdateMentions")},22145:function(e,t,r){"use strict";var a=r(22263);t["a"]=a["a"]},22146:function(e,t,r){"use strict";var a=/_|-/g;var n=/^:(.+):$/g;t["a"]=function(e){return e.replace(a," ").replace(n,"$1")}},22169:function(e,t,r){"use strict";t["a"]=n;var a=/^F[A-Z0-9]{8,}$/;function n(e){return a.test(e)}},2217:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"c",function(){return o});r.d(t,"d",function(){return c});r.d(t,"f",function(){return l});r.d(t,"a",function(){return u});r.d(t,"e",function(){return d});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.client.channel_pane.openChannelBrowser",n.a.noop);var o=Object(i["c"])("TS.client.channel_pane.openChannelBrowserToSharedChannels",n.a.noop);var c=Object(i["c"])("TS.client.channel_pane.openCreateChannelDialog",n.a.noop);var l=Object(i["c"])("TS.client.channel_pane.openDMBrowser",n.a.noop);var u=Object(i["c"])("TS.client.channel_pane.openAppsBrowser",n.a.noop);var d=Object(i["c"])("TS.ui.share_channel_dialog.start",n.a.noop)},22170:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(21705);var l=r(21858);var u=Object(o["b"])("Opens the custom status input in a dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.fromKeyboardShortcut,i=void 0!==a&&a;e(Object(c["openModal"])({element:n.a.createElement(l["d"],{useDialog:true,focusOnMount:true,openedFromKeyboardShortcut:i})}))});u.propTypes={fromKeyboardShortcut:s.a.bool};t["a"]=u},22171:function(e,t,r){"use strict";var a=r(21696);var n=r(21725);var i=r(268);var s=r(1068);var o=r(1104);var c=Object(a["e"])("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var r=t();e(Object(n["setSearchInputBoxUserQuery"])({userQuery:""}));e(Object(i["setInterfaceMode"])({interfaceMode:i["interfaceModes"].EDIT}));e(Object(s["resetEditableRequest"])());e(Object(i["setDefaultTab"])());Object(o["b"])();if(!Object(i["getVisible"])(r)){e(Object(i["setSearchSessionId"])({searchSessionId:""}));e(Object(i["setQuerySessionId"])({querySessionId:""}));var a=Object(i["getSessionTimeoutId"])(r);if(a){clearTimeout(a);e(Object(i["setSessionTimeoutId"])({sessionTimeoutId:null}))}}});c.propTypes=null;t["a"]=c},22172:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(5);var s=r(37);var o=new i["b"]("search");var c=function e(){return n.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},n.a.createElement("span",{className:"description"},o.t("Jump to")),n.a.createElement(s["a"],{type:"enter",className:"ts_icon_enter modifier_icon"}))};c.displayName="JumpHint";t["a"]=c},22173:function(e,t,r){"use strict";t["a"]=n;var a=r(433);function n(e){return Object(a["a"])((e||"").trim().toLowerCase())}},22175:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21702);var _=r(1007);var y=r(12);var O=r(21706);var k=r(5);var j=r(22280);var C=r(271);var E=r(1461);var S=new k["b"]("msg_edit");var w={ts:h.a.string.isRequired,channelId:h.a.string.isRequired,subtype:h.a.string,removeMessage:h.a.func,hasFile:h.a.bool,fileMode:h.a.string};var I={removeMessage:m["noop"],subtype:void 0,hasFile:false,fileMode:void 0};var T=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage;n({channelId:a,ts:r}).catch(m["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var r=this.getFileLabel();if("file_upload"===t){if("file"===r)return S.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===r)return S.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===r)return S.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===r)return S.t("Note that deleting this message will not unshare the file.");if("snippet"===r)return S.t("Note that deleting this message will not unshare the snippet.");if("post"===r)return S.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return S.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,r=t.hasFile,a=t.fileMode;if(!r)return null;if("snippet"===a)return"snippet";if("post"===a)return"post";return"file"}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId;var n=this.getBodyText();return v.a.createElement(C["a"],{title:S.t("Delete message"),goButtonText:S.t("Delete"),goButtonType:"danger",onGo:this.onGo},S.t("Are you sure you want to delete this message? This cannot be undone."),n&&v.a.createElement("div",{className:"margin_top_50"},n),v.a.createElement("div",{className:"margin_top_100"},v.a.createElement(E["a"],{ts:r,channelId:a,isStandalone:true})))}}]);return t}(d["PureComponent"]);T.displayName="BaseDeleteMessageDialog";T.defaultProps=I;var N=function e(t,r){var a=r.channelId,n=r.ts;var i=Object(y["isFeatureEnabled"])(t,"feature_file_threads");var s=Object(g["getMessageByTimestamp"])(t,a,n);var o=i?null:s.file;var c=i?s.files:null;var l=i?Object(O["getFileById"])(t,Object(m["first"])(c)):Object(O["getFileById"])(t,o);var u=false;var d=void 0;if(l){u=true;d=l.mode}return{hasFile:u,fileMode:d,subtype:Object(_["getMessageSubtype"])(s)}};var R={removeMessage:j["a"]};var A=Object(f["connect"])(N,R)(T);A.propTypes={channelId:h.a.string.isRequired,ts:h.a.string.isRequired};t["a"]=A},22176:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(5);t["a"]=function(e,t){if(!t)return null;var r=Object(i["a"])(t);return Object(a["find"])(e,function(e){return e&&(e.name===t||e.localized===t||Object(i["a"])(e.localized)===r||Object(a["includes"])(e.aliases,t))})}},22177:function(e,t,r){"use strict";t["a"]=function(e){if(!e)return"";return e.localized||e.name||""}},22178:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);t["a"]=function(e,t){var r=Object(i["omitBy"])(e,"isServer");var a=n()({},r);var s={};Object(i["forEach"])(t,function(e){if(!e||!Object(i["startsWith"])(e.name,"/"))return;if(e.alias_of){s[e.alias_of]||(s[e.alias_of]=[]);s[e.alias_of].push(e.name)}else r[e.name]&&!r[e.name].canBeOverriddenByServer||(a[e.name]=n()({autocomplete:true},Object(i["pickBy"])(e,i["identity"]),{isServer:true}))});Object(i["forEach"])(s,function(e,t){a[t].aliases=e});return a}},22179:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21989);t["a"]=function(e,t){var r=Object(i["a"])(e,t);if(!Object(a["isString"])(r)||!r.trim())return{words:[],cmd:"",disp:null,rest:"",originalText:null};var n=r.trim();var s=n.split(/\s+/);var o=s[0].toLowerCase().replace(/\u2019/g,"'");var c=s[0];var l=r.substr(o.length).trim();var u=e;return{words:s,cmd:o,disp:c,rest:l,originalText:u}}},22180:function(e,t,r){"use strict";var a=r(1395);var n=r.n(a);var i=r(1);var s=r.n(i);var o=/^\/s\/([^/]+)\/([^/]*)(?:\/([a-z]+)?)?$/i;t["a"]=function(e){if(!e)return null;var t=e.replace(/\uff0f/g,"/");var r=t.match(o)||[],a=n()(r,4),s=a[1],c=a[2],l=a[3];if(!s)return null;var u=Object(i["includes"])(l,"g");var d=Object(i["includes"])(l,"i");return{prev:s,next:c,replaceAll:u,ignoreCase:d}}},22181:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(21945);var o=r(376);var c=r(5);var l=new c["b"]("cmd_handlers");var u=Object(i["b"])("/away slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.threadTs;e(Object(o["toggleUserPresence"])()).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.args;var r=t.presence;var i={temporary:false};var c=void 0;c=r===o["PRESENCE_AWAY"]?":white_check_mark: "+l.t("You are now marked as *away*."):":white_check_mark: "+l.t("You are now marked as *active*.");if(n&&a){i.c_id=a;i.thread_ts=n}Object(s["a"])(c,i)})});u.propTypes={channelId:n.a.string.isRequired,threadTs:n.a.string};t["a"]=u},22182:function(e,t,r){"use strict";r.d(t,"b",function(){return l});var a=r(21699);var n=r(3271);var i=r(12);var s=r(21710);var o=r(21701);var c=Object(a["b"])("/legacy slash command",function(e,t){document.documentElement.style.visibility="hidden";var r=t();var a=Object(n["getCurrentTeam"])(r);var i=location.hostname.replace("app.",a.domain+".");var o=Object(s["a"])(window.location.search);var c=Object(s["b"])(o);c=Object(s["e"])(c,"returning_from_sonic","1");window.location="https://"+i+"/messages"+c});c.propTypes=null;t["a"]=c;var l=function e(t){return Object(o["a"])()&&Object(i["isFeatureEnabled"])(t,"feature_tinyspeck")}},22183:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21945);var s=r(1435);var o=r(3088);var c=r(21699);var l=r(21738);var u=r(21711);var d=r(3203);var v=r(1457);var p=r(907);var h=r(1036);var f=r(3226);var m=Object(c["b"])("/topic slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.originalText,c=r.rest;var m=t();var b=Object(u["e"])(m,a);var g=Object(l["b"])(m);var _=Object(d["R"])(g);var y=Object(v["g"])(m,b);var O=null;Object(f["a"])(a)&&b?Object(p["isIm"])(b)||Object(p["isMpim"])(b)?O=p["TOPIC_DM_ERROR"]:_||!y?O=p["TOPIC_USER_IS_RESTRICTED_ERROR"]:Object(p["channelTopicExceedsLimit"])(c)&&(O=p["TOPIC_TOO_LONG_ERROR"]):O=p["TOPIC_CHANNEL_TYPE_ERROR"];O?Object(i["a"])(Object(p["getChannelTopicError"])(O),{input_txt:n,slackbot_feels:"sad_surprise"}):c?e(Object(h["B"])({channelId:a,topic:c})).catch(s["o"]):Object(o["a"])()});m.propTypes={channelId:n.a.string,originalText:n.a.string,rest:n.a.string};t["a"]=m},22184:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21700);var s=r(21704);var o=r(1063);var c=Object(s["a"])("Send a slash command to the API",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.name,n=r.displayName,s=r.rest,c=r.channelId,l=r.threadTs;if(!a||!n||!c)return Promise.reject(new Error("Missing required params"));var u={command:a,disp:n,text:s,channel:c,client_token:o["a"].generateAndEnqueue()};l&&(u.thread_ts=l);return e(Object(i["a"])({method:"chat.command",args:u}))});c.propTypes={name:n.a.string.isRequired,displayName:n.a.string.isRequired,channelId:n.a.string.isRequired,rest:n.a.string,threadTs:n.a.string};t["a"]=c},22185:function(e,t,r){"use strict";t["a"]=p;var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(22186);var c=r(49);var l=r(3182);var u={};var d=function(){function e(t){n()(this,e);this._teamId=t;this._activeRequest=null;this._queue=[];this._store=Object(c["c"])(t)}s()(e,[{key:"_send",value:function e(){var t=this;var r=this._activeRequest.message;this._store.dispatch(Object(l["action"])("MESSAGE-Q","Sending message with clientMsgId "+r.client_msg_id));return this._store.dispatch(Object(o["a"])(r)).then(this._activeRequest.resolve).catch(this._activeRequest.reject).finally(function(){return t.resolve(r)})}},{key:"_next",value:function e(){if(this._activeRequest)return false;if(!this._queue.length)return false;this._activeRequest=this._queue.shift();this._send();this._store.dispatch(Object(l["action"])("MESSAGE-Q","Shifting queue, now has "+this._queue.length+" messages"));return true}},{key:"enqueue",value:function e(t){var r=this;return new Promise(function(e,a){r._queue.push({message:t,resolve:e,reject:a});r._store.dispatch(Object(l["action"])("MESSAGE-Q","Enqueueing message with clientMsgId "+t.client_msg_id+", queue has "+r._queue.length+" messages"));r._next()})}},{key:"resolve",value:function e(t){if(!t||!this._activeRequest||!this._activeRequest.message)return false;if(t.client_msg_id!==this._activeRequest.message.client_msg_id)return false;this._store.dispatch(Object(l["action"])("MESSAGE-Q","Resolving active request with clientMsgId "+t.client_msg_id));this._activeRequest=null;return this._next()}}]);return e}();var v=d;function p(e){if(u[e])return u[e];u[e]=new d(e);return u[e]}},22186:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(21700);var o=Object(i["b"])("Sends a message",function(e,t,r){return Object(s["d"])("chat.postMessage",r)});o.propTypes={channel:n.a.string.isRequired,client_msg_id:n.a.string};t["a"]=o},22187:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i="[\\s\\n\\r\\t.,'\"+!?\\-_|]";t["a"]=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n.ignoreCase,o=n.replaceAll;if(!e||!t)return null;var c="";s&&(c+="i");o&&(c+="g");var l=Object(a["escapeRegExp"])(t);var u=new RegExp("(^|"+i+"+)(?:"+l+")(?="+i+"+|$)",c);return e.replace(u,"$1"+r)}},22188:function(e,t,r){"use strict";t["c"]=y;t["b"]=O;t["a"]=k;var a=r(12);var n=r(21698);var i=r(54);var s=r(3271);var o=r(3270);var c=r(907);var l=r(3203);var u=r(1007);var d=r(21703);var v=r(21755);var p=r(398);var h=r(3044);var f=r(5);var m=r(21993);var b=r(104);var g=r(2219);var _=new f["b"]("growl");function y(e,t,r,a){var n=C(e,t,r._ignore_dnd);var i=E(e,t);var s=a.skip_formatting?r.content:Object(b["e"])(j(e,t,r),r,{for_growl:true});return{title:n,subtitle:i,content:s}}function O(e,t,r,a,i){var s={msg:r&&r.ts||"",channel:t.id||"",thread_ts:r&&r.thread_ts,ssbFilename:Object(g["a"])(i),launchUri:a.launch_uri||S(e,t,r),imageUri:a.image_uri||Object(u["getMessageAttachmentImage"])(e,r),avatarImage:a.avatar_image||Object(n["getProfileImageForMember"])(e,r.user)};!s.ssbFilename&&Object(h["isSSBAndAtLeastVersion"])("3.0.0")&&(s.silent=true);if(Object(h["isSSBAndAtLeastVersion"])("3.3.0")){s.channelName=Object(c["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})||"";s.authorName=r&&Object(l["s"])(e,r.user)}return s}function k(e,t){var r="tag_"+(t&&(t.id||t.ts)||Date.now());var n=Object(a["getFromBootData"])(e,"img");var i=n&&n.app_icon;return{icon:i,tag:r}}function j(e,t,r){var a=Object(i["getUserPref"])(e,"no_text_in_notifications");var n=a?"":w(e,r);if(Object(c["isIm"])(t))return n;var s=Object(l["s"])(e,r.user)||"";var o="";s&&(o+=a?_.t("a message from {name}",{name:s}):s+": ");o+=n;return o}function C(e,t,r){if(!t)return"";var n=Object(f["l"])(Object(c["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false}));if(Object(a["signedIntoOtherAccounts"])(e)&&p["isDesktop"]){var i=Object(s["getCurrentTeam"])(e);if(Object(h["isMac"])())return Object(d["getTeamDisplayName"])(i);if(Object(c["isIm"])(t))return r?_.t("{name} is trying to reach you",{name:n}):_.t("[{team_domain}] from {name}",{team_domain:i.domain,name:n});return _.t("[{team_domain}] in {channel}",{team_domain:i.domain,channel:n})}if(Object(c["isIm"])(t))return r?_.t("{name} is trying to reach you",{name:n}):_.t("New message from {name}",{name:n});return _.t("New message in {channel}",{channel:n})}function E(e,t){if(!t||!Object(h["isMac"])()||!p["isDesktop"]||!Object(a["signedIntoOtherAccounts"])(e))return"";return Object(c["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})}function S(e,t,r){if(!t||!r||!r.ts)return null;return["slack://channel","?id="+t.id,"&message="+r.ts,"&team="+Object(o["getTeamId"])(e),r.thread_ts?"&thread_ts="+r.thread_ts:""].join("")}function w(e,t){if(!t)return"";var r=Object(u["shouldRenderFileThread"])(t,{featureFileThreads:Object(a["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(a["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var n=r&&t.files&&t.files.length?t.files[0]:t.file;var i=n&&r&&!t.text||Object(v["b"])(t.subtype);var s=void 0;s=i?Object(m["b"])(e,t,n):t.text?t.text:t.attachments&&t.attachments.length?I(t.attachments)||s:t.type+" "+t.subtype+" "+_.t("(message missing text)");return T(s)}function I(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(r.fallback)return r.fallback;if(r.text)return r.text;if(r.pretext)return r.pretext;if(r.footer)return r.footer}return null}function T(e){return e.replace(":simple_smile:",":)")}},22189:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("threads");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.names,r=e.replyCount,a=e.replyUsersCount,i=e.repliersIncludesSelf;if(!r||!a)return"";if(1===r)return n.t("1 reply");if(1===a){if(i)return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from you",{reply_count:r});return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name}",{reply_count:r,user_name:t[0]})}if(2===a){if(i)return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name} and you",{reply_count:r,user_name:t[0]});return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1} and {user_name2}",{reply_count:r,user_name1:t[0],user_name2:t[1]})}if(3===a){if(i)return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and you",{reply_count:r,user_name1:t[0],user_name2:t[1]});return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {user_name3}",{reply_count:r,user_name1:t[0],user_name2:t[1],user_name3:t[2]})}return n.t("{reply_count, plural, =1{1 reply} other{# replies}} from {user_name1}, {user_name2}, and {num_others, plural, =1{# other} other{# others}}",{reply_count:r,user_name1:t[0],user_name2:t[1],num_others:a-2})}},2219:function(e,t,r){"use strict";r.d(t,"c",function(){return n});r.d(t,"b",function(){return i});r.d(t,"a",function(){return s});var a=r(10);var n=Object(a["c"])("TS.sounds.play");var i=Object(a["c"])("TS.sounds.playScreenReaderAlert");var s=Object(a["c"])("TS.sounds.filenameForSoundName")},22190:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(907);var _=r(5);var y=r(21697);var O=r(22280);var k=r(271);var j=r(1461);var C=new _["b"]("msg_edit");var E={ts:h.a.string.isRequired,channelId:h.a.string.isRequired,channelType:h.a.string,removeMessage:h.a.func};var S={channelType:void 0,removeMessage:m["noop"]};var w=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.removeMessage;n({channelId:a,ts:r,broadcastDelete:true}).catch(m["noop"])}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.channelType;var i=void 0;var s=void 0;if("channel"===n){i=C.t("Remove from channel");s=C.t("Are you sure you want to remove this message from the channel?")}else{i=C.t("Remove from conversation");s=C.t("Are you sure you want to remove this message from the conversation?")}return v.a.createElement(k["a"],{title:i,goButtonText:C.t("Remove message"),onGo:this.onGo},v.a.createElement("div",{className:"margin_bottom_100"},s,C.t("The original reply will still be visible in its thread.")),v.a.createElement(j["a"],{ts:r,channelId:a,isStandalone:true}))}}]);return t}(d["PureComponent"]);w.displayName="BaseRemoveBroadcastDialog";w.defaultProps=S;var I=function e(t,r){var a=r.channelId;var n=Object(y["getChannelById"])(t,a);var i=Object(g["getChannelType"])(n);return{channelType:i}};var T={removeMessage:O["a"]};var N=Object(f["connect"])(I,T)(w);N.propTypes={channelId:h.a.string.isRequired};t["a"]=N},22191:function(e,t,r){"use strict";t["a"]=n;var a=r(21700);function n(){return Object(a["c"])("promo.banner").then(function(e){if(!e.data.message_pane)return{};return{name:e.data.message_pane.name,data:e.data.message_pane.data||{}}})}},22192:function(e,t,r){"use strict";r.d(t,"a",function(){return C});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(5);var g=r(3184);var _=r(283);var y=r(3137);var O=new b["b"]("newxp_onboarding");var k={step:h.a.string};var j={step:null};var C={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var E=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===C.CANCELLED)return O.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return v.a.createElement(_["a"],{key:t,onClick:y["b"]},r)});if(this.props.step===C.SLACKBOT)return O.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,r=e.text;return v.a.createElement(_["a"],{key:t,onClick:y["a"]},r)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==C.START)return null;return v.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},v.a.createElement(g["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:y["f"]},O.rt("Explore Slack")),v.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},O.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,r=e.text;return v.a.createElement(_["a"],{key:t,onClick:y["a"],"data-qa":"skip_tutorial"},r)})))}},{key:"render",value:function e(){var t=this.props.step;var r=m()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t});return v.a.createElement("div",{className:r},v.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},v.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},O.rt("Welcome!")),v.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},O.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),v.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(d["PureComponent"]);E.displayName="NewxpForeword";E.defaultProps=j;t["b"]=E},22193:function(e,t,r){"use strict";var a=r(22194);t["a"]=a["a"]},22194:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(1);var l=r.n(c);var u=r(5);var d=r(12);var v=r(37);var p=r(22195);var h=r(365);var f=new u["b"]("team_picker");var m={initialSelectedTeamID:n.a.string,teamsList:n.a.arrayOf(n.a.shape({href:n.a.string.isRequired,teamId:n.a.string.isRequired,teamImg:n.a.string,teamName:n.a.string.isRequired})),onTeamSelected:n.a.func,signInUrl:n.a.string,featureReactTeamPicker:n.a.bool.isRequired};var b={initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:c["noop"],signInUrl:void 0};function g(e){var t=e.initialSelectedTeamID,r=e.teamsList,a=e.signInUrl,n=e.onTeamSelected,i=e.featureReactTeamPicker;var o=Object(c["findIndex"])(r,{teamId:t});var l=0;t&&(l=-1===o?0:o);var u=r.map(function(e){var t=e.teamId,r=e.teamImg,a=e.teamName,i=e.href;var o=s.a.createElement("img",{src:r,alt:a});return s.a.createElement(h["a"],{className:"c-menu_select__button",classNameListItem:"c-menu_select__li",key:t,href:i,icon:o,label:a,onSelected:function e(){return n(t)}})});if(a){var d=s.a.createElement(v["a"],{type:"plus-small"});var m=void 0;i&&(m=f.t("Sign in to another workspace"));u.push(s.a.createElement(h["a"],{className:"c-menu_select__button",classNameListItem:"c-menu_select__li",key:"T01",href:a,icon:d,label:m,onSelected:function e(){return n("T01")}}))}return s.a.createElement(p["a"],{shouldObserveResize:false,offsetY:4,position:"bottom-right",initialSelectedIndex:l},u)}g.displayName="TeamPicker";var _=function e(t){return{featureReactTeamPicker:Object(d["isFeatureEnabled"])(t,"feature_react_team_picker")}};g.displayName="TeamPicker";g.defaultProps=b;t["a"]=Object(o["connect"])(_)(g)},22195:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(898);var k=r(900);var j=r(20170);var C=r.n(j);var E={children:m.a.arrayOf(m.a.node).isRequired,initialSelectedIndex:m.a.number};var S={initialSelectedIndex:0};var w=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);r.onMenuItemSelected=r.onMenuItemSelected.bind(r);r.state={selectedIndex:r.props.initialSelectedIndex};return r}u()(t,[{key:"onMenuItemSelected",value:function e(t,r,a){var n=this.props.children;this.setState(function(){return{selectedIndex:t}});r();n[t]&&n[t].props.onSelected&&n[t].props.onSelected(a)}},{key:"renderMenu",value:function e(t){var r=this;var a=t.onTriggerClose;var i=this.props,o=i.children,c=s()(i,["children"]);var l=g.a.Children.map(o,function(e,t){return g.a.cloneElement(e,{onSelected:r.onMenuItemSelected.bind(r,t,a)})});var u=y()(c.menuClassNames,"c-menu_select__menu");c.noMargin=true;return g.a.createElement(O["a"],n()({},c,{menuClassNames:u}),l)}},{key:"render",value:function e(){var t=this.state.selectedIndex;var r=this.props,a=r.children,i=s()(r,["children"]);var o=g.a.cloneElement(a[t]);var c=o.props,l=c.label,u=c.icon;return g.a.createElement("div",{className:"c-menu_select__wrapper"},g.a.createElement(k["a"],n()({renderMenu:this.renderMenu},i),g.a.createElement("div",{className:"c-menu_select"},u&&g.a.createElement("div",{className:"c-menu_select_item__icon"},u),g.a.createElement("div",{className:"c-menu_select__label"},l),g.a.createElement("div",{className:"c-menu_select__caret c-deprecated-icon c-icon--caret-down"}))))}}]);return t}(b["PureComponent"]);w.displayName="MenuSelect";w.defaultProps=S;t["a"]=w},22196:function(e,t,r){"use strict";var a=r(22197);t["a"]=a["a"]},22197:function(e,t,r){"use strict";var a=r(9);var n=r(21752);var i=r(22003);var s=r(22198);var o=function e(t){return Object(i["a"])(t)};var c=function e(t){return{loadPlansAndCostData:function e(){return t(Object(n["fetchPlansAndCostData"])())},switchTerms:function e(r){return t(Object(n["changeActivePlan"])({term:r}))},switchCurrency:function e(r){return t(Object(n["changeActivePlan"])({currency:r}))},updatePlanLevel:function e(r){return t(Object(n["updatePlanLevel"])(r))}}};t["a"]=Object(a["connect"])(o,c)(s["a"])},22198:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(8);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(21839);var O=r(335);var k=r(3184);var j=r(22199);var C=r(20171);var E=r.n(C);var S=new _["b"]("pricing_calculator");var w={isUserRestricted:m.a.bool,title:m.a.string,showHeader:m.a.bool,headerBackgroundColor:m.a.string,yearlyPlanCostPerMonthRaw:m.a.number,monthlyPlanCostPerMonthRaw:m.a.number,planLevel:m.a.string.isRequired,planIsYearly:m.a.bool,numMonthsPerPlan:m.a.number,planCostPerMonth:m.a.number,planCurrency:m.a.string,numInactiveMembers:m.a.number,isZeroActiveMembers:m.a.bool,totalMembers:m.a.number,paidSeats:m.a.number,totalCost:m.a.number,totalCostWithTax:m.a.number,teamName:m.a.string,tax:m.a.object,teamCredits:m.a.number,showSubmitButton:m.a.bool,submitButtonText:m.a.string,onSubmit:m.a.func,display:m.a.oneOf(["boxed","inline"]),loadPlansAndCostData:m.a.func,switchTerms:m.a.func,switchCurrency:m.a.func,updatePlanLevel:m.a.func,isPlansAndCostDataLoaded:m.a.bool};var I={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_fill_blue",yearlyPlanCostPerMonthRaw:0,monthlyPlanCostPerMonthRaw:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerMonth:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:b["noop"],display:"inline",loadPlansAndCostData:b["noop"],switchTerms:b["noop"],switchCurrency:b["noop"],updatePlanLevel:b["noop"],isPlansAndCostDataLoaded:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={submitButtonIsPending:false};Object(b["bindAll"])(r,["switchCurrency","handleSubmit","switchtoYearly","switchToMonthly"]);return r}s()(t,[{key:"componentDidMount",value:function e(){if(!this.props.isPlansAndCostDataLoaded){this.props.updatePlanLevel(this.props.planLevel);this.props.loadPlansAndCostData()}}},{key:"switchtoYearly",value:function e(){this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){this.props.switchTerms("monthly")}},{key:"switchCurrency",value:function e(t){this.props.switchCurrency(t.target.value)}},{key:"handleSubmit",value:function e(){var t=this.props.onSubmit;this.setState(function(){return{submitButtonIsPending:true}},t)}},{key:"renderHeader",value:function e(){var t=this.props,r=t.title,a=t.headerBackgroundColor;if(!r)return null;var n=h()("p-pricing_calculator__header","p-pricing_calculator__header--"+a);return v.a.createElement("h3",{className:n},r)}},{key:"renderTermsToggle",value:function e(){var t=this.props,r=t.yearlyPlanCostPerMonthRaw,a=t.monthlyPlanCostPerMonthRaw,n=t.planIsYearly,i=t.planCurrency;var s=Object(y["a"])(r,i);var o=Object(y["a"])(a,i);var c=h()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":n});var l=h()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!n});return v.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container"},v.a.createElement(k["c"],{onClick:this.switchtoYearly,className:c},v.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),v.a.createElement("h3",null,S.t("Pay each year")),v.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},S.t("{annualPlanCostPerMonth} per member, per month",{annualPlanCostPerMonth:s}))),v.a.createElement(k["c"],{onClick:this.switchToMonthly,className:l},v.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),v.a.createElement("h3",null,S.t("Pay each month")),v.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},S.t("{monthlyPlanCostPerMonth} per member, per month",{monthlyPlanCostPerMonth:o}))))}},{key:"renderCreditToast",value:function e(){var t=this.props,r=t.teamName,a=t.teamCredits,n=t.planCurrency;if(!a)return null;var i=Object(y["a"])(Math.abs(a),n);var s=a>0?S.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:r,creditsAppliedFormatted:i}):S.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:r,creditsAppliedFormatted:i});return v.a.createElement(O["d"],{type:"inline",className:"p-pricing_calculator__credit_alert"},s)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,r=t.submitButtonText,a=t.showSubmitButton;var n=this.state.submitButtonIsPending;if(!a)return null;return v.a.createElement(k["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:n},r||S.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,r=t.isUserRestricted,a=t.showHeader,n=t.showSubmitButton,i=t.display,s=t.teamCredits,o=t.isPlansAndCostDataLoaded;if(!o||r)return null;var c=h()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return v.a.createElement("div",{className:c},a&&this.renderHeader(),v.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),v.a.createElement(j["a"],this.props),!!s&&this.renderCreditToast(),n&&this.renderSubmitBtn()))}}]);return t}(d["PureComponent"]);T.displayName="PricingCalculator";T.displayName="PricingCalculator";T.defaultProps=I;t["a"]=T},22199:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(8);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(5);var g=r(21839);var _=r(22004);var y=new b["b"]("pricing_calculator");var O={planIsYearly:v.a.bool.isRequired,numMonthsPerPlan:v.a.number.isRequired,planCostPerMonth:v.a.number.isRequired,planCurrency:v.a.string.isRequired,teamName:v.a.string,numInactiveMembers:v.a.number.isRequired,isZeroActiveMembers:v.a.bool.isRequired,totalMembers:v.a.number.isRequired,paidSeats:v.a.number.isRequired,totalCost:v.a.number.isRequired,totalCostWithTax:v.a.number.isRequired,tax:v.a.shape({value:v.a.number,type:v.a.string})};var k={tax:null,teamName:""};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderRow",value:function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=h()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+a.type);return m.a.createElement("div",{className:n},m.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key"},t),m.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value"},r))}},{key:"renderSubtotalRow",value:function e(){var t=this.props,r=t.numMonthsPerPlan,a=t.planCostPerMonth,n=t.paidSeats,i=t.numInactiveMembers,s=t.isZeroActiveMembers,o=t.totalMembers,c=t.totalCost,l=t.teamName,u=t.planCurrency;var d=void 0;s?d=y.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var t=e.text,r=e.key;return m.a.createElement("a",{key:r,className:"bold",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}):i&&(d=y.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:l,totalMembers:o,numInactiveMembers:i,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var t=e.text,r=e.key;return m.a.createElement("a",{key:r,className:"bold",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)}));var v=m.a.createElement("div",null,m.a.createElement(_["a"],{numMonthsPerPlan:r,billedMembers:n,numInactiveMembers:i,formattedPlanCostPerMonth:Object(g["a"])(a,u)}),d&&m.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},d));var p=Object(g["a"])(c,u);return this.renderRow(v,p,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,r=t.tax,a=t.planCurrency;var n=void 0;var i=void 0;if(r){switch(r.type){case"vat":n=y.t("Estimated VAT",{fallbackHash:"dbbd5280272ac77ded46312841ade3c45ec237e7"});break;case"sales_tax":n=y.t("Estimated sales tax");break;default:n=y.t("Estimated tax");break}i=Object(g["a"])(r.value,a)}else{n=y.t("Tax");i=y.t("Applied at checkout")}return this.renderRow(n,i,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this.props,r=t.planCurrency,a=t.totalCostWithTax,n=t.planIsYearly;var i=void 0;var s=void 0;if(n){i=y.t("Yearly payment");s=y.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return m.a.createElement("a",{key:r,className:"bold",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}else{i=y.t("Monthly payment");s=y.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var t=e.text,r=e.key;return m.a.createElement("a",{key:r,className:"bold",href:"https://get.slack.help/hc/en-us/articles/218915077-Fair-Billing-policy"},t)})}var o=m.a.createElement("div",null,i,m.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},s));var c=Object(g["a"])(a,r);return this.renderRow(o,c,{type:"total"})}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(f["PureComponent"]);j.displayName="PricingCalculatorTable";j.defaultProps=k;t["a"]=j},22200:function(e,t,r){"use strict";t["b"]=s;t["a"]=o;var a=r(189);var n=r.n(a);var i=r(58);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(r,a){var s=Object(i["j"])(r.email).error_key;if(!s&&("invite"===r.mapping||"create"===r.mapping)){var o=e.some(function(e,t){return t!==a&&e.email===r.email});var c=!o&&t.some(function(e){return e.profile.email===r.email});var l=o||c;s=l?"duped":s}return n()({},r,{email_state:s||"ok"})})}function o(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var c={makeUserLFSItem:o,validateEmails:s}},22201:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(12);var O=r(23039);var k=r(21705);var j=r(21727);var C=r(21712);var E=r(5);var S=r(43);var w=r(2111);var I=r(271);var T=r(22586);var N=r(22593);var R=r(22292);var A=new E["b"]("user_groups");var M={userGroupId:m.a.string,userGroupName:m.a.string,userGroupHandle:m.a.string,userGroupPurpose:m.a.string,userGroupDefaultChannels:m.a.array,onCreateUserGroup:m.a.func.isRequired,onUpdateUserGroup:m.a.func.isRequired,validate:m.a.func.isRequired,featureSonicUserGroups:m.a.bool.isRequired,closeModal:m.a.func,enqueueToast:m.a.func,showUserGroupDetails:m.a.func};var P={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:g["noop"],enqueueToast:g["noop"],showUserGroupDetails:g["noop"]};var x=void 0;var D=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={formSubmitDisabled:true,formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:r.props.userGroupName,handle:r.props.userGroupHandle,purpose:r.props.userGroupPurpose,channels:r.props.userGroupDefaultChannels}};Object(g["bindAll"])(r,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo"]);r.formRef=null;return r}c()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(x.edit.id):this.setDialogStep(x.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this.formRef.onSubmit();this.setFormSubmitPending(true);var r=this.props.validate(n()({},t,{oldName:this.props.userGroupName,oldHandle:this.props.userGroupHandle}));this.setFormErrors(r);if(this.hasValidationErrors(r)){this.setFormSubmitPending(false);return}if(this.state.formStep===x.edit.id)this.onEditDialogSubmit(t);else{this.setDetailsFormValues(t);this.setDialogStep(x.members.id);this.setFormSubmitPending(false)}}},{key:"onEditDialogSubmit",value:function e(t){var r=this;var a=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;return this.props.onUpdateUserGroup({name:a,handle:n,description:i,channels:s}).then(function(){r.props.enqueueToast({element:h.a.createElement(w["a"],null,A.t("Group has been updated."))});r.onSubmitSuccess()}).catch(function(e){Object(S["error"])("Error editing user group: "+e);r.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=this.state.detailsFormValues;r=void 0===r?{}:r;var a=r.name,n=r.handle,i=r.purpose,s=r.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o)return false;var c=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.onCreateUserGroup({name:a,handle:n,description:i,channels:s,users:c}).then(function(e){var r=e.id;return t.props.showUserGroupDetails(r)}).then(function(){t.props.enqueueToast({element:h.a.createElement(w["a"],null,A.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){Object(S["error"])("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:x.members.title,contentLabel:x.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:x.members.goButtonText,shouldCloseOnCancel:false,cancelText:A.t("Back"),onCancel:function e(){t.setDialogStep(x.details.id)},footerText:x.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var r=Object(g["find"])(x,function(e){return e.id===t});return{title:r.title,contentLabel:r.title,goButtonText:r.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:A.t("Cancel"),shouldCloseOnGo:false,footerText:r.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:n()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:n()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;x={details:{id:"details",footerText:A.t("Step 1 of 2"),title:A.t("Create User Group"),goButtonText:A.t("Next")},members:{id:"members",footerText:A.t("Step 2 of 2"),title:A.t("Add members"),goButtonText:A.t("Create Group")},edit:{id:"edit",footerText:null,title:A.t("Edit User Group"),goButtonText:A.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(g["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return h.a.createElement("div",null,h.a.createElement(T["a"],n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(r){return t.setUserGroupFormRef(r)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement(N["a"],{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===x.details.id||this.state.formStep===x.edit.id)return this.renderDetailsForm();if(this.state.formStep===x.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty;var r=this.state.formStep===x.details.id||this.state.formStep===x.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return h.a.createElement("div",null,h.a.createElement(I["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},r),this.renderDialogStep()))}}]);return t}(p["PureComponent"]);D.displayName="UserGroupEditCreateDialog";D.defaultProps=P;var F=function e(t,r){var a=Object(O["getUserGroupById"])(t,r.userGroupId);return{userGroupName:Object(g["get"])(a,"name",""),userGroupHandle:Object(g["get"])(a,"handle",""),userGroupPurpose:Object(g["get"])(a,"description",""),userGroupDefaultChannels:Object(g["get"])(a,"prefs.channels",[]),featureSonicUserGroups:Object(y["isFeatureEnabled"])(t,"feature_sonic_user_groups"),validate:function e(r){return Object(R["a"])(t,r)}}};var L=function e(t,r){var a=r.userGroupId;return{onCreateUserGroup:function e(r){return t(Object(O["createUserGroup"])(r))},onUpdateUserGroup:function e(r){return t(Object(O["upsertUserGroup"])(n()({groupId:a},r)))},closeModal:function e(){return t(Object(k["closeModal"])())},enqueueToast:function e(){return t(j["enqueueToast"].apply(void 0,arguments))},showUserGroupDetails:function e(r){return t(Object(C["e"])({groupId:r}))}}};t["a"]=Object(b["connect"])(F,L)(D)},22202:function(e,t,r){"use strict";r.d(t,"d",function(){return f});r.d(t,"a",function(){return m});r.d(t,"b",function(){return g});t["c"]=O;var a=r(189);var n=r.n(a);var i=r(3031);var s=r(13677);var o=r.n(s);var c=r(5160);var l=r.n(c);var u=r(22013);var d=r(43);var v=r(21708);var p=r(21717);var h="slack-";var f="PERSIST";var m="sonic_data_persistence";var b=Object(p["a"])(100);var g=3e4;var _=l()();var y={key:h,storage:o.a,blacklist:["error","incrementalBoot","lastNetworkSend","route","socket","typing","window"],transforms:[_]};function O(e){var t=""+h+e;var r=n()({},y,{key:t});return r}function k(e){var t=O(e);Object(d["info"])(f,"("+e+") Getting persisted model...");b&&Object(v["d"])(m+"_get_stored_model_mark");return Object(i["getStoredState"])(t).then(function(t){if(t==={}){Object(d["info"])(f,"("+e+") No persisted model found");b&&Object(v["a"])(m+"_get_stored_model_mark")}else{var r=void 0;b&&(r=Object(v["f"])(m,m+"_get_stored_model_mark"));Object(d["info"])(f,"("+e+") Got persisted model"+(r?": "+r+"ms":""))}return t})}function j(e){if(!Object(u["a"])("localStorage"))return;Object(d["info"])(f,"("+e+") Purging persisted model...");b&&Object(v["d"])(m+"_purge_stored_model_mark");var t=O(e);var r=""+i["KEY_PREFIX"]+t.key;localStorage.removeItem(r);var a=void 0;b&&(a=Object(v["f"])(m,m+"_purge_stored_model_mark"));Object(d["info"])(f,"("+e+") Purged model"+(a?": "+a+"ms":""))}var C={persistConfigKeyPrefix:h,persistNamespace:i["KEY_PREFIX"]}},22203:function(e,t,r){"use strict";t["a"]=v;var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(295);var u=r(21979);var d=r(22204);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,r=e.customEnhancers,a=e.middlewares;var i=void 0;var c=window.TS&&Object(o["get"])(window,"TS.boot_data.feature_redux_dev_tools",false);if(c)i=l["compose"].apply(void 0,[l["applyMiddleware"].apply(void 0,s()(a))].concat(s()(r),[u["a"].instrument()]));else{var v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(n()({},d["a"],{name:"Slack-"+t})):l["compose"];i=v.apply(void 0,[l["applyMiddleware"].apply(void 0,s()(a))].concat(s()(r)))}return i}},22204:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22205);var s=r(21701);var o=r(21697);var c=r(85);var l=function e(t){switch(t.type){case o["addOrReplaceChannels"].getType():return n()({},t,{payload:"Channel bulk add payload is too big to output to redux devtools"});case c["socketMessageReceived"].getType():return n()({},t,{payload:"View raw WebSocket frames for details, but this was a "+(t.payload.subtype?[t.payload.type,t.payload.subtype].join("."):t.payload.type)+" message"});default:return t}};var u=Object(s["a"])()||i["a"]?void 0:function(){return{apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}};var d={autoPause:true,actionSanitizer:l,stateSanitizer:u,maxAge:1e3,features:{pause:true}};t["a"]=d},22205:function(e,t,r){"use strict";var a="calls"===document.documentElement.dataset.app;t["a"]=a},22206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22207);var n=r(22241);r.d(t,"accessibility",function(){return n["a"]});r.d(t,"allUnreads",function(){return n["b"]});r.d(t,"bootData",function(){return n["c"]});r.d(t,"channelSidebarFolders",function(){return n["e"]});r.d(t,"channelSidebar",function(){return n["d"]});r.d(t,"checkoutFlow",function(){return n["f"]});r.d(t,"customEmoji",function(){return n["g"]});r.d(t,"deletedMessages",function(){return n["h"]});r.d(t,"desktop",function(){return n["i"]});r.d(t,"dnd",function(){return n["j"]});r.d(t,"downloads",function(){return n["k"]});r.d(t,"expandables",function(){return n["l"]});r.d(t,"experiments",function(){return n["m"]});r.d(t,"fileRefresh",function(){return n["n"]});r.d(t,"fileUpdate",function(){return n["o"]});r.d(t,"fileUpload",function(){return n["p"]});r.d(t,"filesFlexpane",function(){return n["q"]});r.d(t,"flexpane",function(){return n["r"]});r.d(t,"globalNav",function(){return n["s"]});r.d(t,"i18N",function(){return n["t"]});r.d(t,"incrementalBoot",function(){return n["u"]});r.d(t,"inlineFilePreviews",function(){return n["v"]});r.d(t,"messageEdit",function(){return n["w"]});r.d(t,"messagePaneBanner",function(){return n["y"]});r.d(t,"messagePane",function(){return n["x"]});r.d(t,"modal",function(){return n["z"]});r.d(t,"navigationHistory",function(){return n["A"]});r.d(t,"noop",function(){return n["B"]});r.d(t,"pendingOpenChannel",function(){return n["C"]});r.d(t,"prefs",function(){return n["D"]});r.d(t,"presence",function(){return n["E"]});r.d(t,"pricingPlans",function(){return n["F"]});r.d(t,"searchAutocomplete",function(){return n["G"]});r.d(t,"searchInputBox",function(){return n["H"]});r.d(t,"searchResults",function(){return n["I"]});r.d(t,"searchUi",function(){return n["J"]});r.d(t,"slashCommand",function(){return n["K"]});r.d(t,"socket",function(){return n["L"]});r.d(t,"threadSub",function(){return n["M"]});r.d(t,"threadsFlexpane",function(){return n["N"]});r.d(t,"toast",function(){return n["O"]});r.d(t,"typing",function(){return n["P"]});r.d(t,"usersCounts",function(){return n["Q"]});r.d(t,"workspace",function(){return n["R"]});var i=r(22242);r.d(t,"adminMembers",function(){return i["a"]});r.d(t,"appActions",function(){return i["b"]});r.d(t,"appPermissions",function(){return i["c"]});r.d(t,"appProfiles",function(){return i["d"]});r.d(t,"apps",function(){return i["e"]});r.d(t,"bots",function(){return i["f"]});r.d(t,"calls",function(){return i["g"]});r.d(t,"channelsMeta",function(){return i["k"]});r.d(t,"canvases",function(){return i["h"]});r.d(t,"customizeEmoji",function(){return i["l"]});r.d(t,"developerActions",function(){return i["m"]});r.d(t,"emoji",function(){return i["n"]});r.d(t,"enterprise",function(){return i["o"]});r.d(t,"environment",function(){return i["p"]});r.d(t,"idpGroups",function(){return i["r"]});r.d(t,"lastNetworkSend",function(){return i["s"]});r.d(t,"memberCounts",function(){return i["t"]});r.d(t,"membership",function(){return i["v"]});r.d(t,"messagesMeta",function(){return i["x"]});r.d(t,"sliRealtimePriority",function(){return i["A"]});r.d(t,"teamId",function(){return i["B"]});r.d(t,"teams",function(){return i["C"]});r.d(t,"userGroups",function(){return i["D"]});r.d(t,"window",function(){return i["E"]});r.d(t,"notifications",function(){return i["y"]});r.d(t,"reactions",function(){return i["z"]});r.d(t,"channelHistory",function(){return i["i"]});r.d(t,"channels",function(){return i["j"]});r.d(t,"files",function(){return i["q"]});r.d(t,"members",function(){return i["u"]});r.d(t,"messages",function(){return i["w"]})},22207:function(e,t,r){"use strict";var a=r(1601);var n=r(3056);var i=r(1025);var s=r(22209);var o=r(1602);var c=r(1603);var l=r(3091);var u=r(22210);var d=r(22211);var v=r(22212);var p=r(1605);var h=r(22213);var f=r(22215);var m=r(22216);var b=r(22217);var g=r(1609);var _=r(22218);var y=r(22219);var O=r(216);var k=r(22220);var j=r(22221);var C=r(22236);var E=r(1612);var S=r(22237);var w=r(22238);var I=r(22239);var T=r(1614);var N=r(22240);var R=r(22884)},22208:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.onboarding.inOnboarding")},22209:function(e,t,r){"use strict";var a=r(85);var n=r(21707);var i=r(88);var s=i["b"];var o={};Object.defineProperty(o,"addSideEffect",{get:function e(){return s},set:function e(t){s=t}});s({actions:[a["socketMessageReceived"]],sideEffect:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;var a=arguments[1];var i=arguments[2];return Object(n["e"])(r,a,i)}})},22210:function(e,t,r){"use strict";var a=r(21706);var n=r(21754);var i=r(252);var s=r(139);var o=r(88);function c(e,t,r){var o=r();e.forEach(function(e){var r=Object(i["fileNeedsUpdate"])(o,e);t(Object(n["setFileUpdated"])({fileId:e}));var c=Object(a["getFileById"])(o,e);if(!c||!r)return;Object(s["c"])(c)})}function l(e,t){e.forEach(function(e){t(Object(n["clearFileUpdate"])({fileId:e}))})}function u(e,t,r){var a=e.payload;if(!a)return;c([a.id],t,r)}function d(e,t,r){var a=e.payload;if(!a)return;c(a.map(function(e){return e.id}),t,r)}function v(e,t,r){var a=e.payload;a&&l([a],t,r)}function p(e,t,r){var a=e.payload;a&&l(a,t,r)}function h(e,t){t(Object(n["clearFileUpdate"])())}Object(o["b"])({actions:[a["addFile"]],sideEffect:u});Object(o["b"])({actions:[a["bulkAddFiles"]],sideEffect:d});Object(o["b"])({actions:[a["removeFile"]],sideEffect:v});Object(o["b"])({actions:[a["bulkRemoveFiles"]],sideEffect:p});Object(o["b"])({actions:[a["clearFiles"]],sideEffect:h})},22211:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21746);var s=r(3270);var o=r(3182);var c=r(22968);var l=r(88);function u(e,t,r){var n=r();if(!Object(c["b"])(n))return;if(!Object(a["get"])(window,"desktop.app.updateDragRegion"))return;var i=Object(s["getTeamId"])(n);var l=e.payload;if(i!==l)return;t(Object(o["info"])("GLOBAL-NAV","Resetting SSB drag region"));window.desktop.app.updateDragRegion([])}Object(l["b"])({actions:[i["setActiveTeam"]],sideEffect:u})},22212:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(21697);var s=r(907);var o=r(1435);var c=r(88);function l(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var r=Object(i["getChannelById"])(a,t);Object(o["a"])(r)})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();var s=Object(i["getChannelById"])(n,t.id);Object(o["e"])(s)}function d(e,t,r){var a=r();var c=e&&e.payload&&e.payload.channels;if(!c||!c.length)return;c.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(s["isPrivateChannel"])(e))Object(o["f"])(n()({},e,{is_member:false}));else{var t=Object(i["getChannelById"])(a,e.id);Object(o["f"])(t)}})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=t.ids;if(!r||!r.length)return;r.forEach(function(e){Object(o["d"])(e)})}function p(e){var t=e&&e.payload&&e.payload.channels;if(!t||!t.length)return;t.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o["j"])(e)})}function h(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(i["getChannelById"])(a,e.id);Object(o["i"])(t,e.purpose.creator,e.purpose.value)})}function f(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(i["getChannelById"])(a,e.id);Object(o["k"])(t,e.topic.userId,e.topic.value)})}function m(e,t,r){var a=r();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(i["getChannelById"])(a,e.id);Object(o["l"])(t)})}Object(c["a"])([{actions:[i["addOrReplaceChannels"]],sideEffect:l,reasons:[i["CHANNEL_ACTION_REASONS"].ARCHIVE_CHANNEL]},{actions:[i["joinChannel"]],sideEffect:u},{actions:[i["addOrReplaceChannels"]],sideEffect:d,reasons:[i["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]},{actions:[i["removeChannels"]],sideEffect:v},{actions:[i["addOrReplaceChannels"]],sideEffect:p,reasons:[i["CHANNEL_ACTION_REASONS"].RENAME_CHANNEL]},{actions:[i["addOrReplaceChannels"]],sideEffect:h,reasons:[i["CHANNEL_ACTION_REASONS"].SET_PURPOSE]},{actions:[i["addOrReplaceChannels"]],sideEffect:f,reasons:[i["CHANNEL_ACTION_REASONS"].SET_TOPIC]},{actions:[i["addOrReplaceChannels"]],sideEffect:m,reasons:[i["CHANNEL_ACTION_REASONS"].UNARCHIVE_CHANNEL]}])},22213:function(e,t,r){"use strict";var a=r(3182);var n=r(85);var i=r(3270);var s=r(21875);var o=r(21699);var c=r(22214);var l=r(396);var u=r(21732);var d=r(21717);var v=r(21708);var p=r(88);var h=void 0;function f(){"undefined"===typeof h&&(h=Object(d["a"])(100));return h}var m={};var b={};var g=false;var _=27e5;var y="MIN-VERSION";var O=Object(o["b"])("Calls rtm.shouldReload and possibly reloads",function(e,t){if(g)return;var r=t();var n=Object(i["getTeamId"])(r);b[n]=Date.now();e(Object(a["info"])(y,"checking to see if we should reload"));f()&&Object(v["c"])("mvp_m_check");e(Object(c["a"])({reason:"polling"})).then(function(t){if(!t||!t.should_reload){e(Object(a["info"])(y,"no need to reload"));return}if(g)return;g=true;if(!document.hasFocus()){f()&&Object(v["c"])("mvp_m_shouldreload_immediate");var r="rtm.shouldReload told us to reload, and the window is not currently focused";e(Object(a["info"])(y,r));Object(l["a"])({reason:r});return}f()&&Object(v["c"])("mvp_m_shouldreload_will_defer");e(Object(a["info"])(y,"rtm.shouldReload told us to reload; will reload next time the window loses focus"));var n=true;window.addEventListener("blur",function(){f()&&Object(v["c"])("mvp_m_shouldreload_did_defer");var t="rtm.shouldReload told us to reload earlier, and the window lost focus";e(Object(a["info"])(y,t));Object(l["a"])({reason:t})},n)}).catch(function(){e(Object(a["warn"])(y,"rtm.shouldReload check failed; ignoring since we will try again later"))})});function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wasFastReconnect;var r=arguments[1];var a=arguments[2];if(t)return;var n=a();var o=Object(i["getTeamId"])(n);if(!m[o]){var c=Object(s["a"])(_,.8,1.2);m[o]=setInterval(function(){r(O())},c);Object(u["c"])(o,"minVersionPoll",{checkNow:function e(){return r(O())},getLastPollTime:function e(){return b[o]},getShouldReloadOnBlur:function e(){return g},timer:m[o]})}}Object(p["b"])({actions:[n["connected"]],sideEffect:k})},22214:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(21700);var n=r(21704);var i=r(12);var s=r(3044);var o=Object(n["a"])("Check to see whether we need to reload",function(e,t,r){var n=t();if(s["isJsPath"])return Promise.resolve(new Error("Cannot check whether to reload when using js_path"));var o=Object(i["getFromBootData"])(n,"version_ts");var c=r.reason||"unknown";return e(Object(a["a"])({method:"rtm.shouldReload",args:{version_ts:o,reason:c}}))})},22215:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(907);var s=r(21697);var o=r(21698);var c=r(21722);var l=r(124);var u=r(21714);var d=r(85);var v=r(3205);var p=r(3203);var h=r(88);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var o=false;var l=Object(s["getChannelById"])(n,t.prevChannelId,o);!Object(i["isMemberOfChannel"])(l)&&Object(i["isPublicChannel"])(l)&&r(Object(c["clearMemberCounts"])(t.prevChannelId))}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(t)return;var i=a();var s=Object(u["getPrimaryView"])(i);var o=Object(c["getCachedMemberCounts"])(i,s);r(Object(c["clearAllMemberCounts"])());s&&o&&r(Object(c["addOrReplaceMemberCounts"])({channelId:s,countInfo:n()({},o,{should_refetch:true})}));Object(v["a"])()}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];var n=a();r(Object(c["updateAndInvalidateMemberCounts"])({channelId:t.id,memberCountDelta:1,restrictedMemberCountDelta:Object(p["R"])(Object(o["getCurrentMember"])(n))?1:0,appCountDelta:0}))}function g(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(c["clearMemberCounts"])(e.id))})}Object(h["a"])([{actions:[l["setActiveChannel"]],sideEffect:f},{actions:[d["connected"]],sideEffect:m},{actions:[s["joinChannel"]],sideEffect:b},{actions:[s["addOrReplaceChannels"]],sideEffect:g,reasons:[s["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}])},22216:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21697);var s=r(21698);var o=r(3203);var c=r(907);var l=r(88);function u(e,t,r){var a=r();var l=void 0;if(e.type===i["addOrReplaceChannels"].getType()){l=e&&e.payload&&e.payload.channels;if(!l||!l.length)return}else e.type===i["joinChannel"].getType()&&(l=[e&&e.payload]);l.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(c["isExternallySharedChannel"])(e)||Object(o["x"])(Object(s["getCurrentMember"])(a)))return;var r=Object(c["getSharedTeamIds"])(e).reduce(function(e,t){return e.concat(n.a.filter(Object(s["getAllMembers"])(a),{team_id:t}))},[]);r.length&&t(Object(s["bulkRemoveMembers"])(r))})}Object(l["a"])([{actions:[i["joinChannel"]],sideEffect:u},{actions:[i["addOrReplaceChannels"]],sideEffect:u,reasons:[i["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}])},22217:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(907);var s=r(21697);var o=r(21749);var c=r(124);var l=r(85);var u=r(12);var d=r(88);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=a();var c=false;var l=Object(s["getChannelById"])(n,t.prevChannelId,c);!Object(i["isMemberOfChannel"])(l)&&Object(i["isPublicChannel"])(l)&&r(Object(o["clearChannelMembershipInfo"])(t.prevChannelId))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];t||r(Object(o["clearAllMembershipInfo"])())}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=arguments[1];var a=arguments[2];r(Object(o["clearChannelMembershipInfo"])(t.id));r(Object(o["setChannelMembershipInfoForUsers"])({channelId:t.id,membershipInfo:n()({},Object(u["getCurrentUserId"])(a()),true)}))}function f(e,t){var r=e&&e.payload&&e.payload.channels;if(!r||!r.length)return;r.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(o["clearChannelMembershipInfo"])(e.id))})}Object(d["a"])([{actions:[c["setActiveChannel"]],sideEffect:v},{actions:[l["connected"]],sideEffect:p},{actions:[s["joinChannel"]],sideEffect:h},{actions:[s["addOrReplaceChannels"]],sideEffect:f,reasons:[s["CHANNEL_ACTION_REASONS"].LEAVE_CHANNEL]}])},22218:function(e,t,r){"use strict";var a=r(3051);var n=r(1225);var i=r(88);function s(){Object(n["a"])()}Object(i["b"])({actions:[a["stopEditingMessage"]],sideEffect:s})},22219:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21714);var s=r(21782);var o=r(21746);var c=r(3271);var l=r(21697);var u=r(21853);var d=r(21703);var v=r(907);var p=r(22968);var h=r(88);function f(e,t,r){var a=r();if(!Object(p["b"])(a))return;var n=e.payload&&e.payload.history;if(!n)return;window.desktop&&window.desktop.deviceStorage&&window.desktop.deviceStorage.setItem("navigation-history",JSON.stringify(n))}function m(e,t,r){var n=r();if(!Object(p["b"])(n))return;var o=Object(i["getPrimaryView"])(n);var h=Object(c["getCurrentTeam"])(n);var f=e.payload;if(!h||h.id!==f){t(Object(s["setLoaded"])(false));return}t(Object(u["f"])()).then(function(){t(Object(u["e"])({viewId:o,viewName:Object(v["getDisplayName"])(Object(l["getChannelById"])(n,o)),teamId:h.id,teamName:Object(d["getTeamDisplayName"])(h),teamIcon:Object(a["get"])(h,"icon.image_44")}))})}Object(h["b"])({actions:[s["updateNavigationHistory"]],sideEffect:f});Object(h["b"])({actions:[o["setActiveTeam"]],sideEffect:m})},2222:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2223);var n=r(42);Object(n["a"])("interop.mountDownloadsView",a["a"])},22220:function(e,t,r){"use strict";var a=r(85);var n=r(269);var i=r(88);function s(){Object(n["f"])()}Object(i["b"])({actions:[a["unexpectedSocketClosure"]],sideEffect:s})},22221:function(e,t,r){"use strict";var a=r(22222);var n=r(22223);var i=r(22224);var s=r(3123);var o=r(22226);var c=r(3124);var l=r(3125);var u=r.n(l);var d=r(23011);var v=r(22228);var p=r(3126);var h=r(3127);var f=r.n(h);var m=r(3128);var b=r.n(m);var g=r(3129);var _=r(3130);var y=r(3132);var O=r(3133);var k=r.n(O);var j=r(3134);var C=r(3235);var E=r(3135);var S=r(3136);var w=r(21954);var I=r(3138);var T=r.n(I);var N=r(3139);var R=r.n(N);var A=r(22233);var M=r(22234);var P=r(3140);var x=r(3142);var D=r.n(x);var F=r(3143);var L=r.n(F);var B=r(3144);var U=r(3145);var q=r(22235)},22222:function(e,t,r){"use strict";var a=r(21707);var n=r(21731);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_uninstall,r=e.app_id;var a=arguments[1];a(t&&r?Object(n["uninstallAppActions"])([r]):Object(n["markAsStale"])())}Object(a["a"])("app_actions_updated",i)},22223:function(e,t,r){"use strict";var a=r(21713);var n=r(21707);var i=r(22006);var s=r(1063);var o=r(91);var c=function e(t,r){var n=t.app_id,c=t.client_token,l=t.dialog_id,u=t.dialog_submit_label,d=t.dialog_title,v=t.timeout_range;if(!s["a"].check(c))return;var p=s["a"].getTimeDelta(c),h=p.delta,f=p.nowTs,m=p.tokenTs;Object(o["b"])(a["h"].APP_DIALOG_OPEN_ATTEMPTED,{app_id:n,dialog_id:l,dialog_client_token_ts:m,dialog_ms_event_received_ts:f});if(h>=v)return;r(Object(i["a"])({appId:n,id:l,submitLabel:u,title:d}))};Object(n["a"])("dialog_opened",c)},22224:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21707);var c=r(1578);var l=r(21749);var u=r(21722);var d=r(21697);var v=r(907);var p=r(21714);var h=r(3205);var f=r(21733);var m=r(1063);var b=r(3226);var g=r(22225);var _="app_wildcard_added";var y="app_wildcard_removed";var O="app_permission_request";var k="app_permission_user_request";function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.type;var a=arguments[1];var s=arguments[2];var o=s();var m=r===_;a(Object(l["clearAllMembershipInfoForUser"])(t));var g=Object(p["getPrimaryView"])(o);var y=Object(b["a"])(g)&&g;var O=Object(d["isChannelExistent"])(o,y)&&Object(d["getChannelById"])(o,y);var k=Object(i["cloneDeep"])(Object(u["getCachedMemberCounts"])(o,y));a(Object(u["clearAllMemberCounts"])());if(Object(v["isPublicChannel"])(O)&&k&&k.counts){var j=Object(i["get"])(k,"counts.app_count",0);var C=j+(m?1:-1);k.counts.app_count=C;a(Object(u["addOrReplaceMemberCounts"])({channelId:y,countInfo:n()({},k,{should_refetch:true})}))}Object(h["a"])();a(Object(f["maybeUpdateAppPermissionsAfterWildcardChange"])({appUserId:t,wildcardEnabled:m}));Object(c["c"])(m)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,r=e.client_token,a=e.scope_info,n=e.scope_type,i=e.timeout_range,s=e.trigger_id,o=e.type;var c=arguments[1];if(!m["a"].check(r))return;var l=m["a"].getTimeDelta(r),u=l.delta;if(u>=i)return;c(Object(g["a"])({appUserId:t,scopeInfo:a,triggerId:s,isUserRequest:o===k,scopeType:n}))}Object(o["a"])(_,j);Object(o["a"])(y,j);Object(o["a"])(O,C);Object(o["a"])(k,C)},22225:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21699);var c=r(12);var l=r(21698);var u=r(3203);var d=r(21824);var v=r(22007);var p=r(21713);var h=r(113);var f=r(5);var m=new f["b"]("apps");var b="channel";var g=function e(t){return t.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scopes;return t}).join(",")};var _=Object(o["b"])("Opens dialog for the app permission request flow",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUserId,n=r.scopeInfo,s=r.scopeType,o=r.triggerId,h=r.isUserRequest;var f=t();if(!Object(c["isFeatureEnabled"])(f,"feature_wta_user_data_fe"))return;var _=Object(l["getMemberById"])(t(),a);var y=Object(u["l"])(_);var O=Object(i["get"])(_,"profile.image_48");var k=g(n);var j=m.t("{appName} would like to:",{appName:y});(Object(c["isFeatureEnabled"])(f,"feature_wta_perm_api_split")?s!==b:h)||(j=m.rt("{appName} would like to do the following in <strong>all channels it\u2019s a member of</strong>:",{appName:y}));var C=h?d["c"]:d["b"];e(Object(v["a"])({appId:Object(i["get"])(_,"profile.api_app_id"),appName:y,appIcon:O,onAuthorize:function t(){return e(C({didConfirm:true,scopes:k,triggerId:o}))},onDismiss:function t(){return e(C({didConfirm:false,scopes:k,triggerId:o}))},scopeInfo:n,title:j,eventId:h?p["h"].APP_USER_REQUEST_DIALOG:p["h"].APP_PERMISSION_REQUEST_DIALOG}))});_.propTypes={isUserRequest:n.a.bool,appUserId:n.a.string.isRequired,scopeInfo:n.a.arrayOf(h["a"].ScopeInfo).isRequired,triggerId:n.a.string.isRequired};t["a"]=_},22226:function(e,t,r){"use strict";var a=r(21707);var n=r(22227);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var r=e.m,a=e.pct,i=e.lt,s=e.a,o=e.id;Math.floor(100*Math.random())<a&&t(Object(n["a"])({method:r,loadtest:i,args:s,id:o}))}Object(a["a"])("benchmark",i)},22227:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(1);var n=r.n(a);var i=r(21704);var s=r(21700);var o=Object(i["a"])("Runs a benchmark on a RTM event",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.method,i=r.identifier,o=r.loadtest,c=r.args;return e(Object(s["a"])({method:"api.benchmark",args:{m:n,id:i,lt:o,a:c},DO_NOT_RETRY:true})).catch(a["noop"])})},22228:function(e,t,r){"use strict";var a=r(21707);var n=r(12);var i=r(3279);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var r=arguments[1];var a=arguments[2];var s=a();if(!Object(n["isFeatureEnabled"])(s,"feature_canvases"))return;r(Object(i["mountModal"])({canvasId:t}))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas_id;var r=arguments[1];var a=arguments[2];var s=a();if(!Object(n["isFeatureEnabled"])(s,"feature_canvases"))return;r(Object(i["getCanvasContent"])({canvasId:t}))}Object(a["a"])("canvas_mounted",s);Object(a["a"])("canvas_changed",o)},22229:function(e,t,r){"use strict";var a=r(1395);var n=r.n(a);t["a"]=function(e){if(!e)return null;var t=e.replace(/(^:|:$)/g,"").replace(/skin-tone-/i,"").split("::"),r=n()(t,2),a=r[0],i=r[1];if(!a)return null;var s=void 0;i&&(s=parseInt(i,10));return{name:a,skinTone:s}}},2223:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(1);var o=r.n(s);var c=r(21709);var l=r(49);var u=r(2224);var d=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(l["c"])(t);Object(c["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(u["a"],null)),r,a)};t["a"]=d},22230:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(3044);var s="alias:";t["a"]=function(e){var t={};var r={};var n=Object(i["isMac"])()?"apple":"google";Object(a["forEach"])(e,function(e,i){if(!i)return;if(Object(a["startsWith"])(e,s)){t[i]=e.slice(s.length);return}var o=void 0;Object(a["isString"])(e)?o=e:Object(a["isObject"])(e)&&(o=e[n]);if(!o)return;r[i]=o});var o={};Object(a["isEmpty"])(r)||(o.emojis=r);Object(a["isEmpty"])(t)||(o.aliases=t);return o}},22231:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});r.d(t,"c",function(){return s});r.d(t,"d",function(){return o});var a=r(10);var n=Object(a["c"])("TS.lessons.channel_created_sig.dispatch");var i=Object(a["c"])("TS.lessons.file_uploaded_sig.dispatch");var s=Object(a["c"])("TS.lessons.lesson_assigned_sig.dispatch");var o=Object(a["c"])("TS.lessons.message_sent_sig.dispatch")},22232:function(e,t,r){"use strict";t["a"]=o;var a=r(21851);var n=r(12);var i=r(3270);var s=r(3044);function o(e,t){var r=t.channel,a=t.timestamp,n=t.description;var i={channel:r,msg_ts:a,desc:n};Object.keys(i).forEach(function(t){c(e).recordMetric(t,i[t])})}function c(e){return Object(a["a"])("notifs",function(t){var r=s["isDev"]?"/beacon/notifs":"https://slack.com/beacon/notifs";t.setUser(Object(n["getCurrentUserId"])(e)).setTeam(Object(i["getTeamId"])(e)).setVersionTs(Object(n["getFromBootData"])(e,"version_ts")).setEndpointUrl(r)})}},22233:function(e,t,r){"use strict";var a=r(21707);var n=r(54);var i=r(12);var s=r(1006);var o=r(2215);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.value;var a=arguments[1];var c=arguments[2];var l=c();var u=Object(i["isFeatureEnabled"])(l,"feature_prefs_modernization");if(!u)return;if(Object(i["isFeatureEnabled"])(l,"feature_react_search")&&"sli_universal_search"===Object(o["a"])("sli_universal_search")&&("search_only_my_channels"===t||"search_only_current_team"===t||"search_exclude_bots"===t)){a(Object(n["setSearchPref"])({pref:t,value:r}));return}Object(s["b"])({name:t,value:r})}Object(a["a"])("pref_change",c)},22234:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21707);var c=r(3182);var l=r(21698);var u=r(376);var d=r(74);var v=r(12);var p=r(21701);var h="PRESENCE";function f(e,t,r){var a=Object(v["isFeatureEnabled"])(r(),"feature_sonic_rtm_presence");if(!a&&!Object(p["a"])())return;var i=e.presence,s=e.type;if("away"!==i&&"active"!==i){t(Object(c["error"])("An unknown presence was received in the '"+s+"' event: '"+i+"'"));return}var o=Object(l["getCurrentMember"])(r());if(!o)return;var u=n()({},o,{manual_presence:i,presence:i});t(Object(l["addMember"])(u));Object(d["a"])(u)}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,r=e.type,a=e.users;var s=arguments[1];var o=arguments[2];var f=Object(v["isFeatureEnabled"])(o(),"feature_sonic_rtm_presence");if(!f&&!Object(p["a"])())return;if("away"!==t&&"active"!==t){s(Object(c["error"])("An unknown presence was received in the '"+r+"' event: '"+t+"'"));return}if(Object(i["isEmpty"])(a)){s(Object(c["error"])("The '"+r+"' event did not contain an array of users to update the presence for"));return}var m=o();a.forEach(function(e){var a=Object(l["isMemberExistent"])(m,e)&&Object(l["getMemberById"])(m,e);if(!a){s(Object(c["info"])(h,"Received a '"+r+"' event for a user we don't yet have in the local model: "+e));return}if(Object(u["getPresenceByMemberId"])(o(),e)===t)return;s(Object(l["addMember"])(n()({},a,{presence:t})));Object(d["a"])(n()({},a,{presence:t}))})}Object(o["a"])("manual_presence_change",f);Object(o["a"])("presence_change",m)},22235:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(21707);var s=r(12);var o=r(43);var c=r(1);var l=r.n(c);var u=r(23039);var d=r(21952);Object(i["a"])("subteam_updated",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam||!e.subteam.id)return;var a=e.subteam;var i=e.subteam.id;var c=Object(u["getUserGroupById"])(r(),i);if(Object(d["h"])(c)){Object(o["warn"])("subteam_updated: User group "+i+" not in model.");return}var l=n()({},a,{users:c.users});t(Object(u["addGroup"])(l))});Object(i["a"])("subteam_members_changed",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id)return;var a=e.subteam_id;var n=Object(u["getUserGroupById"])(r(),a);if(Object(d["h"])(n)){Object(o["warn"])("subteam_members_changed: User group "+a+" not in model.");return}var i=n.users,l=void 0===i?[]:i;var v=e.added_users,p=void 0===v?[]:v,h=e.removed_users,f=void 0===h?[]:h;var m=l;p.length&&(m=Object(c["union"])(m,p));f.length&&(m=Object(c["difference"])(m,f));t(Object(u["bulkAddMembersToGroup"])({groupId:n.id,users:m}))});Object(i["a"])("subteam_created",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam)return;t(Object(u["addGroup"])(e.subteam))});Object(i["a"])("subteam_deleted",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id)return;t(Object(u["removeGroup"])(e.subteam_id))});Object(i["a"])("subteam_self_added",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id)return;var a=Object(s["getCurrentUserId"])(r());var n={groupId:e.subteam_id,memberId:a};t(Object(u["addMemberToGroup"])(n))});Object(i["a"])("subteam_self_removed",function(e,t,r){if(!Object(s["isFeatureEnabled"])(r(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id)return;var a=Object(s["getCurrentUserId"])(r());if(!a)return;var n={groupId:e.subteam_id,memberId:a};t(Object(u["removeMemberFromGroup"])(n))})},22236:function(e,t,r){"use strict";var a=r(21721);var n=r(1068);var i=r(268);var s=r(12);var o=r(1592);var c=r(1104);var l=r(54);var u=r(124);var d=r(21768);var v=r(277);var p=r(88);Object(p["b"])({actions:[l["setSearchPref"]],sideEffect:function e(t,r,a){var c=a();if(!Object(s["isFeatureEnabled"])(c,"feature_react_search")||!Object(i["getVisible"])(c))return;var l=Object(n["getRequest"])(c),u=l.query;r(Object(n["clearResponse"])());r(Object(o["a"])({query:u,fetchSuggestions:true}));u&&Object(o["i"])(u)}});Object(p["b"])({actions:[l["setSearchPref"]],sideEffect:function e(t,r){r(Object(n["setRequestFromEditableRequest"])({fetchSuggestions:true}));r(Object(i["setQuerySessionId"])({querySessionId:Object(a["a"])()}));r(Object(d["a"])())}});Object(p["b"])({actions:[u["setActiveChannel"],v["a"]],sideEffect:function e(t,r,a){var n=a();if(!Object(s["isFeatureEnabled"])(n,"feature_react_search"))return;Object(i["getVisible"])(n)&&Object(c["c"])()}})},22237:function(e,t,r){"use strict";var a=r(21708);var n=r(85);var i=r(234);var s=r(21717);var o=r(3270);var c=r(21875);var l=r(88);var u=10;var d=9e5;var v=void 0;var p={};var h={};var f={};function m(){void 0===v&&(v=Object(s["a"])(u));return v}var b="asleep";var g="connecting";var _="connected";var y="wait_connectivity";var O="wait_rate_limit";function k(e){if(Object(n["isAsleep"])(e))return b;if(Object(n["isConnecting"])(e))return g;if(Object(n["isConnected"])(e))return _;if(Object(n["isWaitingForConnectivity"])(e))return y;if(Object(n["isWaitingForRateLimit"])(e))return O;return"disconnected"}function j(e,t,r){if(!m())return;var a=r();var n=Object(o["getTeamId"])(a);var i=k(a);if(h[n]!==i){h[n]=i;p[n]=p[n]||[];p[n].push({status:i,ts:window.performance.now()})}}function C(e,t,r){if(!m())return;var n=r();var i=Object(o["getTeamId"])(n);if(f[i])return;f[i]=performance.now();var s=Object(c["a"])(d,.8,1.2);setInterval(function(){if(!p[i])return;var e={};p[i].forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.status,a=t.ts;var n=arguments[1];var s=p[i][n+1];var o=s?s.ts:performance.now();var c=o-a;e[r]=e[r]||0;e[r]+=c});Object.keys(e).forEach(function(t){var r=e[t];Object(a["c"])("ws_tis_"+t,r)});var t=performance.now()-f[i];var r=e[b]||0;Object(a["c"])("ws_tis_duration",t);Object(a["c"])("ws_tis_duration_awake",t-r);f[i]=performance.now();p[i]=[{status:h[i],ts:window.performance.now()}]},s)}Object(l["a"])([{actions:[n["stateChanged"]],sideEffect:j},{actions:[i["start"]],sideEffect:C}])},22238:function(e,t,r){"use strict";var a=r(21701);var n=r(88);var i=r(85);var s=r(234);function o(e,t){if(!Object(a["a"])())return;t(Object(s["finalizeProvisionalConnection"])())}Object(n["b"])({actions:[i["provisionallyConnected"]],sideEffect:o})},22239:function(e,t,r){"use strict";var a=r(3270);var n=r(974);var i=r(88);var s={};function o(e,t,r){var i=r();var o=Object(a["getTeamId"])(i);if(s[o])return;s[o]=setInterval(function(){t(Object(n["checkTypingMap"])())},1e3)}function c(e,t,r){var n=r();var i=Object(a["getTeamId"])(n);if(!s[i])return;clearInterval(s[i]);delete s[i]}Object(i["b"])({actions:[n["updateTyping"]],sideEffect:o});Object(i["b"])({actions:[n["clearTypingCleanupInterval"]],sideEffect:c})},2224:function(e,t,r){"use strict";var a=r(2225);t["a"]=a["a"]},22240:function(e,t,r){"use strict";var a=r(3277);var n=r(88);function i(e,t,r){var n=r();var i=Object(a["isWindowFocused"])(n);t(i?Object(a["setLastFocusEvent"])(Date.now()):Object(a["setLastBlurEvent"])(Date.now()))}Object(n["b"])({actions:[a["updateFocus"]],sideEffect:i})},22241:function(e,t,r){"use strict";var a=r(21948);r.d(t,"a",function(){return a["default"]});var n=r(377);r.d(t,"b",function(){return n["default"]});var i=r(12);r.d(t,"c",function(){return i["default"]});var s=r(21865);r.d(t,"e",function(){return s["default"]});var o=r(190);r.d(t,"d",function(){return o["default"]});var c=r(21772);r.d(t,"f",function(){return c["default"]});var l=r(21795);r.d(t,"g",function(){return l["default"]});var u=r(905);r.d(t,"h",function(){return u["default"]});var d=r(21746);r.d(t,"i",function(){return d["default"]});var v=r(975);r.d(t,"j",function(){return v["default"]});var p=r(1061);r.d(t,"k",function(){return p["default"]});var h=r(191);r.d(t,"l",function(){return h["default"]});var f=r(22259);r.d(t,"m",function(){return f["default"]});var m=r(3089);r.d(t,"n",function(){return m["default"]});var b=r(21754);r.d(t,"o",function(){return b["default"]});var g=r(1024);r.d(t,"p",function(){return g["default"]});var _=r(21822);r.d(t,"q",function(){return _["default"]});var y=r(21751);r.d(t,"r",function(){return y["default"]});var O=r(21874);r.d(t,"s",function(){return O["default"]});var k=r(21942);r.d(t,"t",function(){return k["default"]});var j=r(428);r.d(t,"u",function(){return j["default"]});var C=r(385);r.d(t,"v",function(){return C["default"]});var E=r(3051);r.d(t,"w",function(){return E["default"]});var S=r(21808);r.d(t,"y",function(){return S["default"]});var w=r(124);r.d(t,"x",function(){return w["default"]});var I=r(21705);r.d(t,"z",function(){return I["default"]});var T=r(21782);r.d(t,"A",function(){return T["default"]});var N=r(1597);r.d(t,"B",function(){return N["default"]});var R=r(21797);r.d(t,"C",function(){return R["default"]});var A=r(54);r.d(t,"D",function(){return A["default"]});var M=r(376);r.d(t,"E",function(){return M["default"]});var P=r(21752);r.d(t,"F",function(){return P["default"]});var x=r(21742);r.d(t,"G",function(){return x["default"]});var D=r(21725);r.d(t,"H",function(){return D["default"]});var F=r(1068);r.d(t,"I",function(){return F["default"]});var L=r(268);r.d(t,"J",function(){return L["default"]});var B=r(21789);r.d(t,"K",function(){return B["default"]});var U=r(85);r.d(t,"L",function(){return U["default"]});var q=r(21806);r.d(t,"M",function(){return q["default"]});var H=r(21951);r.d(t,"N",function(){return H["default"]});var W=r(21727);r.d(t,"O",function(){return W["default"]});var G=r(974);r.d(t,"P",function(){return G["default"]});var V=r(21877);r.d(t,"Q",function(){return V["default"]});var z=r(21714);r.d(t,"R",function(){return z["default"]})},22242:function(e,t,r){"use strict";var a=r(21735);r.d(t,"a",function(){return a["default"]});var n=r(21731);r.d(t,"b",function(){return n["default"]});var i=r(21733);r.d(t,"c",function(){return i["default"]});var s=r(21728);r.d(t,"d",function(){return s["default"]});var o=r(3284);r.d(t,"e",function(){return o["default"]});var c=r(3275);r.d(t,"f",function(){return c["default"]});var l=r(23009);r.d(t,"g",function(){return l["default"]});var u=r(3292);r.d(t,"k",function(){return u["a"]});var d=r(3279);r.d(t,"h",function(){return d["default"]});var v=r(22975);r.d(t,"l",function(){return v["default"]});var p=r(21813);r.d(t,"m",function(){return p["default"]});var h=r(3288);r.d(t,"n",function(){return h["default"]});var f=r(3278);r.d(t,"o",function(){return f["default"]});var m=r(3287);r.d(t,"p",function(){return m["default"]});var b=r(21819);r.d(t,"r",function(){return b["default"]});var g=r(21857);r.d(t,"s",function(){return g["default"]});var _=r(21722);r.d(t,"t",function(){return _["default"]});var y=r(21749);r.d(t,"v",function(){return y["default"]});var O=r(3274);r.d(t,"x",function(){return O["default"]});var k=r(21866);r.d(t,"A",function(){return k["default"]});var j=r(3270);r.d(t,"B",function(){return j["default"]});var C=r(3271);r.d(t,"C",function(){return C["default"]});var E=r(23039);r.d(t,"D",function(){return E["default"]});var S=r(3277);r.d(t,"E",function(){return S["default"]});var w=r(21863);r.d(t,"y",function(){return w["default"]});var I=r(21740);r.d(t,"z",function(){return I["default"]});var T=r(3273);r.d(t,"i",function(){return T["default"]});var N=r(21697);r.d(t,"j",function(){return N["default"]});var R=r(21706);r.d(t,"q",function(){return R["default"]});var A=r(21698);r.d(t,"u",function(){return A["default"]});var M=r(21702);r.d(t,"w",function(){return M["default"]})},22243:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21719);var s=r(88);var o=Object(i["b"])("Handle side effects",function(e,t,r){var a=s["c"][r.type];a&&Promise.resolve().then(function(){a.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.sideEffect,i=void 0===a?n.a.noop:a,s=t.reasons,o=void 0===s?[]:s;if(o.length){var c=r&&r.payload&&r.payload.reason;if(!n.a.includes(o,c))return}i(r,e.dispatch,e.getState)})});return t(r)});t["a"]=o},22244:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(43);var s=r(3044);var o=r(21719);var c=r(21732);var l=[];var u=Object(o["b"])("Allows devs to get console logging or trigger breakpoints when state they care about changes",function(e,t,r){var a=[];var n=e.getState();l.forEach(function(e){a.push(e(n))});var o=t(r);var c=e.getState();l.forEach(function(e,t){var n=e(c);if(a[t]!==n){Object(i["info"])("redux watcher","watcher value has changed! \nAction: ",r,"\nBefore: ",a[t],"\nAfter:  ",n);s["isDev"]||s["isJsPath"]}});return o});t["a"]=u;function d(e){if(!n.a.isFunction(e)){Object(i["error"])("watcherFn passed in to addWatcher must be a function");return}l.push(e)}function v(){l=[]}Object(c["a"])("reduxWatcher",{addWatcher:d,clearAllWatchers:v})},22245:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getAppToEdit",function(){return o});r.d(t,"getAppName",function(){return c});r.d(t,"getAppIcons",function(){return l});var a=r(3);var n=r.n(a);var i=r(21696);var s=r(12);var o=Object(i["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.appId;var a=Object(s["getFromBootData"])(e,"app_to_edit");if(a&&a.encoded_id===r)return a;return null});o.propTypes={appId:n.a.string.isRequired};var c=Object(i["d"])(function(e,t){var r=o(e,t);return r&&r.name});c.propTypes={appId:n.a.string.isRequired};var l=Object(i["d"])(function(e,t){var r=o(e,t);return r&&r.payload&&r.payload.icons||{}});l.propTypes={appId:n.a.string.isRequired}},22246:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(211);var s=["{","[","(","*","_","/",'"',"\u201c","'","\u2018","\u2019","<"];var o=function(){var e=s.map(function(e){return"\\"+e}).join("|");var t=Object(a["values"])(i["CJK_UNICODE_BLOCKS"]).join("");return new RegExp("^(\\s|"+e+"|["+t+"])+")}();var c=function(){var e=s.map(function(e){return"\\"+e}).join("|");return new RegExp("^(\\s|"+e+")+")}();t["a"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{trimCJK:true},r=t.trimCJK;if(!e)return"";return e.replace(r?o:c,"")}},22247:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _={children:h.a.node.isRequired,index:h.a.number.isRequired,isSelected:h.a.bool,onMouseOver:h.a.func};var y={isSelected:false,onMouseOver:d["noop"]};var O=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.handleMouseOver=e.handleMouseOver.bind(e);e.resultRef=Object(f["createRef"])();return e}s()(t,[{key:"componentDidUpdate",value:function e(){var t=this.props.isSelected;t&&this.resultRef.current.scrollIntoView({block:"nearest"})}},{key:"handleMouseOver",value:function e(){var t=this.props,r=t.index,a=t.onMouseOver;a(r)}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.isSelected;var n=g()("tab_complete_ui_item","c-texty_autocomplete__result",{"c-texty_autocomplete__result--selected":a});return m.a.createElement("li",{className:n,onMouseOver:this.handleMouseOver,ref:this.resultRef},r)}}]);return t}(f["PureComponent"]);O.displayName="TextyAutocompleteResult";O.defaultProps=y;t["a"]=O},2225:function(e,t,r){"use strict";var a=r(9);var n=r(263);var i=r.n(n);var s=r(21751);var o=r(3277);var c=r(1061);var l=r(2226);var u=r(2227);var d=function e(t){return t.files};var v=function e(t,r){return r.startTime-t.startTime};var p=Object(n["createSelector"])([c["getDownloads"],d],function(e,t){return e.map(function(e){return Object(l["a"])(e,t[e.id])}).sort(v)});var h=Object(n["createSelector"])([c["getDownloadIds"],d],function(e,t){return e.filter(function(e){return!t[e]})});var f=function e(t){var r=Object(s["getFlexpaneState"])(t),a=r.flexName;return{downloads:p(t),fileIdsToFetch:h(t),isWindowFocused:Object(o["getWindowByKey"])(t,"isFocused"),isShowing:"downloads"===a}};var m={fetchFileInfo:c["fetchFileInfo"]};t["a"]=Object(a["connect"])(f,m)(u["a"])},22253:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(9);var h=r(3);var f=r.n(h);var m=r(8);var b=r.n(m);var g=r(5);var _=r(12);var y=r(975);var O=r(21714);var k=r(21711);var j=r(266);var C=r(3189);var E=r(37);var S=r(60);var w=r(22313);var I=r(22314);var T=r(20175);var N=r.n(T);var R=new g["b"]("do_not_disturb");var A={inDnd:f.a.bool.isRequired,currentChannel:f.a.object,className:f.a.string,menuPosition:f.a.string,menuOffsetX:f.a.number,menuOffsetY:f.a.number,tooltipOffsetX:f.a.number,tooltipOffsetY:f.a.number,featureSonicDnd:f.a.bool};var M={currentChannel:{},className:void 0,menuPosition:"bottom-left",menuOffsetX:-4,menuOffsetY:8,tooltipOffsetX:void 0,tooltipOffsetY:void 0,featureSonicDnd:false};var P=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}s()(t,[{key:"renderMenu",value:function e(t){var r=this.props,a=r.inDnd,n=r.currentChannel,i=r.featureSonicDnd;if(!i)return null;if(a)return v.a.createElement(I["a"],{featureSonicDnd:i,currentChannel:n,menuProps:t});return v.a.createElement(w["a"],{featureSonicDnd:i,currentChannel:n,menuProps:t})}},{key:"render",value:function e(){var t=this.props,r=t.inDnd,a=t.className,n=t.menuPosition,i=t.menuOffsetX,s=t.menuOffsetY,o=t.tooltipOffsetX,c=t.tooltipOffsetY,l=t.featureSonicDnd;if(!l)return null;var u=r?"snooze-outline":"bell-o";return v.a.createElement(j["d"],{renderMenu:this.renderMenu,position:n,offsetX:i,offsetY:s},v.a.createElement(S["d"],{tip:R.t("Notifications"),position:"bottom",offsetX:o,offsetY:c},v.a.createElement(C["a"],{className:b()("p-dnd_button",a),"data-qa":"do_not_disturb_btn"},v.a.createElement(E["b"],{type:u}))))}}]);return t}(d["PureComponent"]);P.displayName="DndButton";P.defaultProps=M;var x=function e(t){var r=Object(_["getCurrentUserId"])(t);var a=Object(O["getPrimaryView"])(t);return{inDnd:!!Object(y["getDndByMemberId"])(t,r),currentChannel:Object(k["e"])(t,a)||void 0,featureSonicDnd:Object(_["isFeatureEnabled"])(t,"feature_sonic_dnd")}};t["a"]=Object(p["connect"])(x)(P)},22254:function(e,t,r){"use strict";r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});r.d(t,"a",function(){return d});var a=r(3);var n=r.n(a);var i=r(21699);var s=r(21700);var o=r(3182);var c="MODERN-DND";var l=Object(i["b"])("Snoozes notifications for a duration of time",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.duration;return e(Object(s["a"])({method:"dnd.setSnooze",args:{num_minutes:a}})).then(function(){e(Object(o["info"])(c,"User successfully snoozed their notifications for "+a+" minutes"))}).catch(function(){e(Object(o["error"])(c,"User was unable to snooze their notifications for "+a+" minutes"));e(Object(o["error"])(c,t().dnd))})});l.propTypes={duration:n.a.number.isRequired};var u=Object(i["b"])("Ends DND mode triggered by explicityly snoozing notifications",function(e,t){return e(Object(s["a"])({method:"dnd.endSnooze"})).then(function(){e(Object(o["info"])(c,"User successfully ended DND-SNOOZE"))}).catch(function(){e(Object(o["error"])(c,"User was unable to end DND-SNOOZE"));e(Object(o["error"])(c,t().dnd))})});var d=Object(i["b"])("Ends DND mode triggered by the DND schedule",function(e,t){return e(Object(s["a"])({method:"dnd.endDnd"})).then(function(){e(Object(o["info"])(c,"User successfully ended DND-SCHEDULE"))}).catch(function(){e(Object(o["error"])(c,"User was unable to end DND-SCHEDULE"));e(Object(o["error"])(c,t().dnd))})})},22255:function(e,t,r){"use strict";var a=r(22329);t["a"]=a["a"]},22256:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(37);var _=r(21830);var y=r(60);var O=r(412);var k=r(266);var j=r(43);var C=new b["b"]("enterprise_dashboard");var E={orgApps:v.a.array,orgAppsApiCursor:v.a.string,orgAppsLoading:v.a.bool,orgAppsApiTotal:v.a.number,headerItemOnClick:v.a.func,pageSize:v.a.number,sortBy:v.a.string,sortDir:v.a.string,searchQuery:v.a.string,rowHeaderItemClassName:v.a.string,rowClassName:v.a.string,featureEntAppManagementRestriction:v.a.bool};var S={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:f["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAppManagementRestriction:false};var w="asc";var I="desc";var T="caret_down";var N="caret_up";var R={};R[w]=T;R[I]=N;var A=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,activeMenuForAppId:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onToggleMenuClick=r.onToggleMenuClick.bind(r);r.maybeHideMenu=r.maybeHideMenu.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.nodeHasClass=r.nodeHasClass.bind(r);r.nodeIsChildOfClassName=r.nodeIsChildOfClassName.bind(r);r.appSources={internal:C.t("Internal"),"app directory":C.t("App Directory"),unknown:C.t("Unknown")};r.sourceTooltipStrings={"app directory":C.t("This app has been installed from the Slack App Directory."),internal:C.t("This app was created by someone within your organization."),unknown:C.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return h.a.createElement("button",{className:"p-app_management_table_view_app_name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&h.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.teams_installed_on&&t.teams_installed_on.count||0;return C.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:r})}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var n=r.appSources[t.source]||r.appSources.unknown;return h.a.createElement("div",null,h.a.createElement(y["d"],{tip:a,position:"top"},h.a.createElement("span",null,n)))},className:"c-table_view_row_item_source"}]};r.props.featureEntAppManagementRestriction&&r.rowTemplate.items.push({value:function e(t){var a=r.state.activeMenuForAppId;var n={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var i=void 0;if(a&&a===t.id){var s=h.a.createElement("span",null,"Restrict this app...");var o=h.a.createElement("span",null,"View in App Directory ",h.a.createElement(g["b"],{type:"external-link",size:"inherit"}));i=h.a.createElement("div",{className:"c-app_management_menu_container"},h.a.createElement(k["e"],n,h.a.createElement(k["b"],{key:"org_app_menu_1",label:s,onSelected:function e(){r.onRestrictAppClick(t.id)}}),h.a.createElement(k["c"],{key:"org_app_menu_separator"}),h.a.createElement(k["b"],{key:"org_app_menu_2",label:o,href:"https://example.com",target:"_blank"})))}return h.a.createElement("div",null,h.a.createElement("button",{className:"c-app_management_menu_trigger",onClick:r.onToggleMenuClick,"data-app-id":t.id},"..."),i)},className:"p-app_management_table_menu"});r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=C.rt("No apps were found matching <b>{query}</b>",{query:r});return h.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:C.t("Name"),sortable:true,className:"p-app_management_table_header_name"},{id:"num_installed",value:C.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},{id:"source",value:C.t("Source"),sortable:true,className:"p-app_management_table_header_source"}];r.props.featureEntAppManagementRestriction&&r.headerData.push({id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"});return r}s()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.orgApps,a=t.sortBy;var n=this.state.offset;if(r.length){this.updateRowListItemsData(n);Object(O["b"])(Object(O["a"])().apps.setOrgAppsLoading(false))}else Object(O["b"])(Object(O["a"])().apps.setOrgAppsLoading(true));Object(O["b"])(Object(O["a"])().apps.setOrgAppsSortBy(a))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely);this.props.featureEntAppManagementRestriction&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,r){this.maybeUpdateListRowItems(t,r);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely);window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.orgApps,n=r.orgAppsApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(j["warn"])("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(O["b"])(Object(O["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var r=t.target.getAttribute("data-app-id");var a=this.state.activeMenuForAppId;var n=r===a?null:r;var i={activeMenuForAppId:n};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var r=this.state.activeMenuForAppId;if(!r)return false;var a=t&&t.target;if(!a)return false;var n=this.nodeIsChildOfClassName(a,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(a,"c-menu");if(n)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,r){if(!t||void 0===r||!r.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(r);return!!(t.className&&t.className.length&&t.className.split(" ").includes(r))}},{key:"nodeIsChildOfClassName",value:function e(t,r){var a=t;if(!a||!r)return false;if(this.nodeHasClass(a,r))return true;if(!a.parentNode)return false;while(!this.nodeHasClass(a,r)&&a.parentNode)a=a.parentNode;return this.nodeHasClass(a,r)}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.orgAppsLoading;r&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(O["b"])(Object(O["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,r){var a=this.state,n=a.offset,i=a.activeMenuForAppId;var s=this.props,o=s.searchQuery,c=s.orgApps,l=s.orgAppsLoading;t.orgApps===c&&t.searchQuery===o&&t.orgAppsLoading===l&&r.activeMenuForAppId===i||this.updateRowListItemsData(n)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==w?w:I;Object(O["b"])(Object(O["a"])().apps.setOrgAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===w?I:w:I;Object(O["b"])(Object(O["a"])().apps.setOrgAppsSortDir(o));Object(O["b"])(Object(O["a"])().apps.setOrgAppsSortBy(s))}var c={sortBy:s,sortDir:o};this.setState(function(){return c},function(){r.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(O["b"])(Object(O["a"])().apps.setOrgAppsApiTotal(null));Object(O["b"])(Object(O["a"])().apps.resetOrgAppsApiCursor());Object(O["b"])(Object(O["a"])().apps.resetOrgApps());Object(O["b"])(Object(O["a"])().apps.setOrgAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=0;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var c={height:o+"px"};this.setState(c)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||w;var o=R[s];if(!n||n!==t)return o;var c=void 0;c=i?i===w?T:N:R[s];return c}},{key:"resetAPICursorMark",value:function e(){Object(O["b"])(Object(O["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.orgAppsApiCursor;var c={limit:i};r&&(c.sort=r);a&&(c.sort_dir=a);null!==s&&void 0!==s&&Object(f["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);Object(O["b"])(Object(O["a"])().apps.setOrgAppsLoading(true));Object(O["b"])(Object(O["a"])().apps.getOrgApps(c))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=[];var n=t||0;var i=0;var s=this.props,o=s.orgApps,c=s.orgAppsLoading;var l={rowListItems:a};function u(){i+=1;return"row_"+n+"_item"+i}function d(e,t){var r={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});n+=1;return r}if(o&&o.length)o.forEach(function(e){a.push(d(e,r.rowTemplate))});else if(!c){var v=this.props.searchQuery;if(null===v||void 0===v||!v.length){this.setState(l);return}var p=[{searchQuery:v}];p.forEach(function(e){a.push(d(e,r.emptyRowTemplate))})}this.setState(l)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,n=r.sortDir,i=r.height,s=r.rowListItems,o=r.offset;var c=this.props,l=c.orgAppsLoading,u=c.searchQuery,d=c.rowHeaderItemClassName,v=c.rowClassName;var p=this.makeHeaders(this.headerData);return h.a.createElement("div",null,h.a.createElement(_["a"],{rows:s,headers:p,rowHeaderItemClassName:d,rowClassName:v,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:n,searchQuery:u,height:i,isLoading:l,newQuery:!o,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(p["PureComponent"]);A.displayName="OrgAppsList";A.defaultProps=S;t["a"]=A},22257:function(e,t,r){"use strict";var a=r(22349);t["a"]=a["a"]},22258:function(e,t,r){"use strict";var a=r(22360);var n=r(22369);r.d(t,"a",function(){return n["a"]});t["b"]=a["a"]},22259:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"bulkAddExperiments",function(){return d});r.d(t,"getGroupForUser",function(){return h});r.d(t,"test",function(){return b});var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(91);var d=Object(l["a"])("Bulk add experiment assignments to redux");d.propTypes=c.a.object.isRequired;var v={};var p=Object(l["c"])(n()({},d,function(e,t){return t}),v);t["default"]=p;var h=Object(l["d"])(function(e,t){var r=e&&e.experiments&&e.experiments[t];if(!r)return null;r.log_exposures&&m(t,r);return r.group});var f={};function m(e,t){if(!Object(i["isEqual"])(f[e],t)){Object(u["b"])("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});f[e]=t}}var b={};Object.defineProperty(b,"logExposure",{get:function e(){return m},set:function e(t){m=t}})},2226:function(e,t,r){"use strict";t["a"]=s;var a=r(189);var n=r.n(a);var i=r(139);function s(e,t){var r=t||Object(i["i"])(e.id)||{};return n()({},e,{fileName:r.name,imageSource:r.thumb_160||r.thumb_80,fileType:r.filetype,prettyType:r.pretty_type,fileSize:r.size})}},22260:function(e,t,r){"use strict";r.d(t,"f",function(){return y});r.d(t,"h",function(){return O});r.d(t,"j",function(){return k});r.d(t,"d",function(){return j});r.d(t,"b",function(){return C});r.d(t,"c",function(){return E});r.d(t,"g",function(){return S});r.d(t,"i",function(){return w});r.d(t,"e",function(){return I});r.d(t,"a",function(){return T});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(3105);var u=r(21708);var d=r(22380);var v=100;var p=1e3;var h=300;var f=1e3;var m=500;var b=60;var g=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var r=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(r>p){this.beachballs+=1;this.beachballsTotal+=1}else if(r>v){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===h){var a=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/a);this.fpsIndex=0;Object(d["a"])()&&Object(d["b"])(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){Object(u["c"])("stutters",this.stutters);Object(u["c"])("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var t=Object(o["min"])(this.frameRates);var r=void 0;var a=this.frameRates.sort();var n=Math.floor(a.length/2);r=a.length%2===1?a[n]:(a[n-1]+a[n])/2;Object(u["g"])("fps_min",t);Object(u["g"])("fps_median",r)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(r<1)return;var a=Math.max(b-t,0);this.histJankyWindows[a]=(this.histJankyWindows[a]||0)+r}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>m*this.nextJankyWindowSampleIntervalNumber;var r=Math.floor(this.durationMs/m);var a=r-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=f){this.recordJankyWindows(0,a-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,a>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=r+1;this.framesInPreviousJankyWindowSample=a>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var r=t-this.lastRafHandlerTimeForPRQMetrics;var a=Object(l["d"])(Math.round(r,0),2);this.histFrameRenderTime[a]=(this.histFrameRenderTime[a]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=r;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();g.instance=null;function _(){null===g.instance&&(g.instance=new g);return g.instance}var y=_().startClientStats.bind(g.instance);var O=_().stopClientStats.bind(g.instance);var k=_().storeClientStats.bind(g.instance);var j=_().isEnabledForClientStats.bind(g.instance);var C=_().getTotalBeachballCount.bind(g.instance);var E=_().getTotalStutterCount.bind(g.instance);var S=_().startPRQMetrics.bind(g.instance);var w=_().stopPRQMetrics.bind(g.instance);var I=_().isEnabledForPRQMetrics.bind(g.instance);var T=_().getPRQMetrics.bind(g.instance)},22261:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(8);var c=r.n(o);var l=r(907);var u=r(37);var d={channel:s.a.object.isRequired,channelName:s.a.string,strong:s.a.bool};var v={channel:{},channelName:"",strong:false};var p=function e(t){var r=t.channel,a=t.strong;var i=t.channelName||Object(l["getDisplayName"])(r);var s=null;if(Object(l["isPublicChannel"])(r)||Object(l["isPrivateChannel"])(r)){var o=c()({"c-icon--align-hashmark":!Object(l["isPrivateChannel"])(r)});s=n.a.createElement(u["a"],{className:o,align:"baseline",inherit:true,type:Object(l["isPrivateChannel"])(r)?"lock":"channel"})}var d=null;Object(l["isOrgSharedPublicOrPrivateChannel"])(r)?d=n.a.createElement(u["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(l["isPendingExternallySharedChannel"])(r)?d=n.a.createElement(u["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(l["isSharedPublicOrPrivateChannel"])(r)&&(d=n.a.createElement(u["a"],{align:"baseline",inherit:true,type:"shared_channels"}));var v=c()({bold:a});return n.a.createElement("span",{className:v},s,i,d)};p.displayName="FormattedChannelName";p.defaultProps=v;t["a"]=p},22262:function(e,t,r){"use strict";t["a"]=o;var a=r(1);var n=r.n(a);var i=r(5);var s=new i["b"]("channel_sidebar");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.displayName,a=e.isShared,i=e.isOrgShared,o=e.isYou,c=e.isMuted,l=e.hasUnreads,u=e.hasDraft,d=e.isArchived,v=e.unreadCount,p=e.badgeCount,h=e.isSelected,f=e.userActive,m=e.isTyping;var b=[h?s.t("selected"):null];if("channel"===t)b.push(a||i?s.t("shared channel"):s.t("channel"));else if("private"===t)b.push(s.t("private channel"));else if("mpim"===t)b.push(s.t("group direct message",{fallbackHash:"e50045943dfaafc5cbbee9a7d1aba5fb2ce026da"}));else if("im"===t){b.push(s.t("direct message"));b.push(f?s.t("active"):s.t("away"))}d&&b.push(s.t("archived"));c&&b.push(s.t("muted"));l&&v&&!p&&b.push(s.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:v}));p&&b.push(s.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:p}));u&&b.push(s.t("has draft"));m&&b.push(s.t("typing"));var g=o?s.t("{name} (you)",{name:r}):r;var _=n()(b).filter(n.a.identity).join(", ");return g+" ("+_+")"}},22263:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(8);var l=r.n(c);var u=r(20214);var d=r.n(u);var v={className:n.a.string,count:n.a.number.isRequired,maxCount:n.a.number};var p={className:void 0,maxCount:9};var h=function e(t,r){return t>r?r+"+":String(t)};var f=function e(t){var r=t.className,a=t.count,n=t.maxCount;if(!a||a<0)return null;var i=l()(r,"c-mention_badge");return s.a.createElement("span",{className:i},h(a,n))};f.displayName="MentionBadge";f.defaultProps=p;t["a"]=Object(o["pure"])(f)},22264:function(e,t,r){"use strict";r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return c});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.ui.channel_browser.start",n.a.noop);var o=Object(i["c"])("TS.ui.channel_browser.highlightPendingInvitationsOnNextOpen",n.a.noop);var c=Object(i["c"])("TS.ui.channel_browser.openConnectedWorkspacesModal",n.a.noop)},22265:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(21701);var b=r(54);var g=r(12);var _=r(5);var y=r(297);var O=r(128);var k=r(1490);var j=r(77);var C=r(20225);var E=r.n(C);var S=new _["b"]("comments");var w={featureFileThreads:h.a.bool,time24:h.a.bool,comment:h.a.shape({id:h.a.string,user:h.a.string,timestamp:h.a.number,comment:h.a.string}).isRequired};var I={featureFileThreads:true,time24:false};var T=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.comment,a=t.time24,n=t.featureFileThreads;if(!n&&!Object(m["a"])())return null;var i=r.user,s=r.timestamp,o=r.comment;return v.a.createElement("div",{className:"p-comment"},v.a.createElement("div",{className:"p-comment__header"},i?v.a.createElement(k["a"],{userId:i}):null,v.a.createElement("span",{className:"p-comment__timestamp"},S.t("{date} at {time}",{date:Object(y["a"])(s,{shortenMonth:true}),time:Object(O["a"])(s,{do24hrTime:a})}))),v.a.createElement("div",{className:"p-comment__body"},v.a.createElement(j["a"],{text:o,memberId:i})))}}]);return t}(d["PureComponent"]);T.displayName="Comment";T.defaultProps=I;function N(e){return{featureFileThreads:Object(g["isFeatureEnabled"])(e,"feature_file_threads"),time24:Object(b["getUserPref"])(e,"time24")}}t["a"]=Object(f["connect"])(N)(T)},22266:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(3271);var O=r(12);var k=r(54);var j=r(594);var C=r(5);var E=r(1028);var S=r(37);var w=r(20228);var I=r.n(w);var T=new C["b"]("files");var N=new C["b"]("search");var R={filetype:g.a.string,onChange:g.a.func,featureArugula:g.a.bool,showEmail:g.a.bool};var A={filetype:"",onChange:p["noop"],featureArugula:false,showEmail:false};var M=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.labelId="file_type_select_"+Object(j["c"])();r.state={label:null};return r}c()(t,[{key:"onChange",value:function e(t,r,a){this.setState(function(){return{label:r}});this.props.onChange(t,r,a)}},{key:"render",value:function e(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"offscreen",id:this.labelId},N.t("File type")," ",this.state.label&&m.a.createElement("span",null,"- ",this.state.label)),m.a.createElement(E["d"],{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:m.a.createElement(f["Fragment"],null,T.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"})),onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:Infinity,useFilteredInput:false,useFullWidthOptions:true,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"create-post"}),T.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),value:"posts"}].concat(n()(this.props.featureArugula?[{label:m.a.createElement("span",null,m.a.createElement(S["b"],{type:"emoji-nature"}),"Arugula"),value:"docs"}]:[]),[{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"create-snippet"}),T.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),value:"snippets"}],n()(this.props.showEmail?[{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"envelope-o"}),T.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),value:"emails"}]:[]),[{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"image"}),T.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),value:"images"},{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"play"}),T.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),value:"videos"},{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"book"}),T.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),value:"pdfs"},{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"file"}),T.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),value:"spreadsheets"},{label:m.a.createElement(f["Fragment"],null,m.a.createElement(S["b"],{type:"google-drive"}),T.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),value:"gdocs"}])}))}}]);return t}(f["PureComponent"]);M.displayName="FileTypeSelect";M.defaultProps=A;t["a"]=Object(_["connect"])(function(e){return{featureArugula:Object(O["isFeatureEnabled"])(e,"feature_docs"),showEmail:Object(y["getCurrentTeam"])(e).plan&&!Object(k["getTeamPref"])(e,"disable_email_ingestion")}})(M)},22267:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.prefs_dialog.start",function(){return null});var i={start:n}},22268:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.help_modal.start")},22269:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21696);var s=r(21721);var o=r(21725);var c=r(268);var l=r(1068);var u=r(21768);var d=r(21837);var v=r(22445);var p=r(1104);var h=Object(i["e"])("Set whether or not Search is visible",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.visible;var n=t();e(Object(c["setInterfaceIsVisibleOnly"])({visible:a}));if(Object(o["getSearchInputBoxDisplayQuery"])(n)&&a&&Object(c["getSearchSessionId"])(n)){clearTimeout(Object(c["getSearchSessionId"])(n));e(Object(c["setSessionTimeoutId"])({sessionTimeoutId:null}))}else if(!Object(o["getSearchInputBoxDisplayQuery"])(n)&&a){e(Object(c["setSearchSessionId"])({searchSessionId:Object(s["a"])()}));e(Object(c["setQuerySessionId"])({querySessionId:Object(s["a"])()}));e(Object(u["a"])())}else if(Object(o["getSearchInputBoxDisplayQuery"])(n)&&!a){var i=setTimeout(function(){var r=t();if(!Object(c["getVisible"])(r)&&Object(c["getSessionTimeoutId"])(r)===i){e(Object(c["setSessionTimeoutId"])({sessionTimeoutId:null}));e(Object(c["setSearchSessionId"])({searchSessionId:""}));e(Object(c["setQuerySessionId"])({querySessionId:""}));e(Object(l["resetEditableRequest"])());e(Object(o["setSearchInputBoxUserQuery"])({userQuery:""}));e(Object(c["setDefaultTab"])());e(Object(c["setInterfaceMode"])({interfaceMode:c["interfaceModes"].EDIT}));Object(p["b"])()}},c["SEARCH_SESSION_TIMEOUT_MS"]);e(Object(c["setSessionTimeoutId"])({sessionTimeoutId:i}));e(Object(v["a"])())}else if(!Object(o["getSearchInputBoxDisplayQuery"])(n)&&!a){e(Object(v["a"])());e(Object(c["setSearchSessionId"])({searchSessionId:""}));e(Object(c["setQuerySessionId"])({querySessionId:""}))}e(a?Object(d["a"])({}):Object(c["setLastOpenMethod"])({lastOpenMethod:null}))});h.propTypes={visible:n.a.bool.isRequired};t["a"]=h},2227:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(9);var k=r(5);var j=r(398);var C=r(22968);var E=r(140);var S=r(37);var w=r(21832);var I=r(2228);var T=r(20217);var N=r.n(T);var R={downloads:m.a.array.isRequired,fileIdsToFetch:m.a.array.isRequired,fetchFileInfo:m.a.func.isRequired,isWindowFocused:m.a.bool,isShowing:m.a.bool,useGlobalNav:m.a.bool};var A={downloads:[],fileIdsToFetch:[],fetchFileInfo:h.a.noop,isWindowFocused:false,isShowing:true,useGlobalNav:false};var M=new k["b"]("page_client");var P=function(e){v()(t,e);u()(t,null,[{key:"renderEmptyView",value:function e(){var t=void 0;try{t=g.a.createElement("img",{src:cdn_url+"/0180/img/downloads_empty.png",alt:""})}catch(e){t=null}var r=M.rt("You can download files by clicking the {download_icon} button.",{download_icon:g.a.createElement(S["a"],{type:"cloud_download",className:"p-downloads_list__empty_download_icon"})});return g.a.createElement("div",{className:"p-downloads_list__empty"},t,g.a.createElement("p",{className:"p-downloads_list__empty_hint_text"},r))}},{key:"renderShiftHint",value:function e(){var t=M.rt("Hold {shift_key} to open the file.",{shift_key:g.a.createElement("span",{className:"c-keyboard_key"},"Shift")});return g.a.createElement("div",{className:"p-downloads_list__shift_hint"},t)}},{key:"renderClearAllButton",value:function e(){return g.a.createElement("button",{type:"button",className:"p-downloads_list__clear_all btn_basic",onClick:j["clearDownloads"]},M.t("Clear all"))}}]);function t(e){s()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};return r}u()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=function e(r,a){r&&r.preventDefault();t.setState(function(){return{isShiftDown:a}})};this.keyCommands=new E["a"];this.keyCommands.bindAll([{keys:"shift",action:"keydown",handler:function e(t){return r(t,true)}},{keys:"shift",action:"keyup",handler:function e(t){return r(t,false)}}]);this.element.focus()}},{key:"componentWillReceiveProps",value:function e(t){var r=t.isWindowFocused;this.props.isWindowFocused!==r&&this.setState(function(){return{isShiftDown:false}})}},{key:"componentWillUpdate",value:function e(t){var r=t.fileIdsToFetch;if(this.props.fileIdsToFetch===r)return;if(0===r.length)return;if(h.a.isEqual(this.props.fileIdsToFetch,r))return;this.props.fetchFileInfo({ids:r})}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"renderDownloadItems",value:function e(){return g.a.createElement("div",{id:"downloads_scroller",className:"flex_content_scroller"},this.props.downloads.map(function(e){return g.a.createElement(I["a"],n()({key:e.id},e))}))}},{key:"renderHeader",value:function e(){if(this.props.useGlobalNav)return null;var r=this.props.downloads.length>=2?t.renderClearAllButton():null;return g.a.createElement(w["a"],null,g.a.createElement("div",{className:"p-downloads_list__header_items"},g.a.createElement("span",null,M.t("Downloads")),r))}},{key:"renderContent",value:function e(){var r=this.props.isShowing;if(!r)return null;var a=this.props.downloads.length>0?this.renderDownloadItems():null;var n=this.props.downloads.length>0?t.renderShiftHint():t.renderEmptyView();return g.a.createElement(g.a.Fragment,null,this.renderHeader(),a,n)}},{key:"render",value:function e(){var t=this;var r=y()({"p-downloads_list":true,"p-downloads_list--shift_down":this.state.isShiftDown});return g.a.createElement("div",{className:r,ref:function e(r){t.element=r},tabIndex:"-1"},this.renderContent())}}]);return t}(g.a.Component);P.displayName="DownloadsList";P.defaultProps=A;var x=function e(t){return{useGlobalNav:Object(C["b"])(t)}};t["a"]=Object(O["connect"])(x)(P)},22270:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21696);var c=r(91);var l=r(268);var u=r(3271);var d=r(21836);var v=r(21804);var p=Object(o["e"])("Clog clicks on a message or file using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.iid,i=r.type,s=r.ts,o=r.channelId,p=r.userId,h=r.botId,f=r.extraArguments,m=void 0===f?{}:f;var b=t();var g=Object(l["getSearchSessionId"])(b);var _=Object(l["getQuerySessionId"])(b);var y=Object(u["getCurrentTeam"])(b).id;Object(c["b"])("SEARCH_CLICK",n()({click_iid:a,click_target_type:i,click_user_id:p,click_bot_id:h,click_channel_id:o,click_team_id:y,click_timestamp:s},Object(d["a"])(b),{request_id:Object(v["a"])(b),search_session_id:g,client_request_id:_},m))});p.propTypes={type:s.a.string.isRequired,ts:s.a.string,channelId:s.a.string,userId:s.a.string,botId:s.a.string};t["a"]=p},22271:function(e,t,r){"use strict";var a=r(378);var n=r(5);var i=r(283);var s=r(3);var o=r.n(s);var c=r(12159);var l=r.n(c);var u=r(21715);var d=r(37);var v={visible:o.a.bool,currentPageOffset:o.a.number.isRequired,totalPageCount:o.a.number.isRequired,itemType:o.a.oneOf(["message","file"]).isRequired,onBack:o.a.func.isRequired,onForward:o.a.func.isRequired};var p={visible:true};var h=new n["b"]("search");function f(e){var t=e.visible,r=e.currentPageOffset,n=e.totalPageCount,s=e.itemType,o=e.onBack,c=e.onForward;if(!t)return null;var v=1===r;var p=r===n;var f="";var m={currentPageOffset:Object(u["a"])(r),totalPageCount:Object(u["a"])(n)};"message"===s?f=l.a.createElement(a["a"],{enabled:["feature_react_search"]},h.t("Page {currentPageOffset} of {totalPageCount}",m,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"})):"file"===s&&(f=l.a.createElement(a["a"],{enabled:["feature_react_search"]},h.t("Page {currentPageOffset} of {totalPageCount}",m,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"})));var b=l.a.createElement(i["a"],{className:"c-search__pager__button_forward",onClick:c,disabled:p},l.a.createElement(a["a"],{enabled:["feature_react_search"]},v&&h.t("See more")||h.t("Next")),l.a.createElement(d["a"],{type:"chevron-right",className:""}));var g=l.a.createElement(i["a"],{className:"c-search__pager__button__back",onClick:o,disabled:v},l.a.createElement(d["a"],{type:"chevron-left",className:""}),l.a.createElement(a["a"],{enabled:["feature_react_search"]},h.t("Previous")));return l.a.createElement("div",{className:"c-search__pager"},v||g,l.a.createElement("span",{className:"c-search__pager__details"},f),p||b)}f.displayName="Pager";f.defaultProps=p;t["a"]=f},22272:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(8);var j=r.n(k);var C=r(1068);var E=r(268);var S=r(21697);var w=r(21698);var I=r(3271);var T=r(54);var N=r(3278);var R=r(21769);var A=r(12);var M=r(427);var P=r(3226);var x=r(21872);var D=r(3179);var F=r(22459);var L=r(3203);var B=r(5);var U=r(378);var q=r(3180);var H=r(22266);var W=r(3241);var G=r(3189);var V=r(265);var z=r(603);var K=r(37);var Q=r(11);var Y=r.n(Q);var J=r(21870);var Z=r(22460);var X=r(22461);var $=r(20233);var ee=r.n($);var te=new B["b"]("search");var re={showOnlyActiveFilters:g.a.bool,showFileFilters:g.a.bool,filters:g.a.object.isRequired,suggestions:g.a.object.isRequired,toggleEditableRequestQueryFilterFromItem:g.a.func.isRequired,toggleEditableRequestQueryFilterInItem:g.a.func.isRequired,isEnterpriseOrg:g.a.bool.isRequired,orgName:g.a.string,setEditableRequestQueryFilterAfter:g.a.func.isRequired,setEditableRequestQueryFilterBefore:g.a.func.isRequired,setEditableRequestQueryFilterFileType:g.a.func.isRequired,searchPrefs:g.a.shape({searchOnlyCurrentTeam:g.a.bool.isRequired,searchExcludeBots:g.a.bool.isRequired,searchOnlyMyChannels:g.a.bool.isRequired}).isRequired,setUserPrefByApi:g.a.func.isRequired,setEditableRequestChannelObjects:g.a.func.isRequired,channelObjects:g.a.object.isRequired,imToUserMap:g.a.object.isRequired,loading:g.a.bool.isRequired};var ae={showOnlyActiveFilters:false,showFileFilters:false,orgName:""};var ne=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={channelSelectIsVisible:false,memberSelectIsVisible:false};Object(y["bindAll"])(r,["onChannelSelect","onChannelQuery","onMemberQuery","onMemberSelect","showChannelSelect","hideChannelSelect","showMemberSelect","hideMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange"]);r.itemsFromChannelSearch={};r.onStartDateSelect=r.onStartDateSelect.bind(r);r.onEndDateSelect=r.onEndDateSelect.bind(r);return r}u()(t,[{key:"onChannelQuery",value:function e(t){var r=this;if(!t)return Promise.resolve({options:[]});return Object(D["a"])(t,{limit:150,channels:{include_archived:true,only_if_member:this.props.searchPrefs.searchOnlyMyChannels},members:{include_self:true,include_org:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true},mpims:true,groups:true,enterprise_channels:!this.props.searchPrefs.searchOnlyCurrentTeam}).then(function(e){var t=e.map(function(e){return e.model_ob});r.props.searchPrefs.searchOnlyMyChannels&&(t=Object(y["filter"])(t,"is_member"));t=t.filter(function(e){var t=Object(y["findIndex"])(r.props.suggestions.in,function(t){return t.id===e.id});return-1===t});r.itemsFromChannelSearch=Object(y["keyBy"])(t,"id");return{options:t.map(function(e){return{label:Object(L["L"])(e)?m.a.createElement(z["a"],{id:e.id}):m.a.createElement(W["a"],{channel:e,showTeamIconForXwsChannels:true}),value:e.id}})}})}},{key:"onMemberQuery",value:function e(t){var r=this;if(!t)return Promise.resolve({options:[]});return Object(D["a"])(t,{members:{include_self:true,include_slackbot:!this.props.searchPrefs.searchExcludeBots,include_bots:!this.props.searchPrefs.searchExcludeBots,include_deleted:true}}).then(function(e){return{options:e.filter(function(e){return-1===r.props.suggestions.from.indexOf(e.model_ob.id)}).map(function(e){return{label:m.a.createElement("span",{className:"p-search_filter__option p-search_filter__option--suggestion"},m.a.createElement(V["b"],{userId:e.model_ob.id,size:18,ariaHidden:"true",tabIndex:"-1"}),m.a.createElement(z["a"],{id:e.model_ob.id})),value:e.model_ob.id}})}})}},{key:"onChannelSelect",value:function e(t,r){if(!t)return;this.itemsFromChannelSearch[t]&&this.props.setEditableRequestChannelObjects({channels:s()({},this.props.channelObjects,n()({},t,this.itemsFromChannelSearch[t]))});var a=t;this.props.imToUserMap[t]&&(a=this.props.imToUserMap[t]);this.props.toggleEditableRequestQueryFilterInItem({channelId:a});this.itemsFromChannelSearch={};true!==r&&this.hideChannelSelect()}},{key:"onMemberSelect",value:function e(t,r){if(!t)return;this.props.toggleEditableRequestQueryFilterFromItem({memberId:t});true!==r&&this.hideMemberSelect()}},{key:"onEndDateSelect",value:function e(t){var r=t&&t.add(1,"days").format(J["a"]);this.props.setEditableRequestQueryFilterBefore({dateString:r})}},{key:"onStartDateSelect",value:function e(t){var r=t&&t.subtract(1,"days").format(J["a"]);this.props.setEditableRequestQueryFilterAfter({dateString:r})}},{key:"onSearchPrefChange",value:function e(t){var r=this.props.searchPrefs,a=r.searchOnlyCurrentTeam,n=r.searchExcludeBots,i=r.searchOnlyMyChannels;switch(t){case"search_only_current_team":this.props.setUserPrefByApi({pref:"search_only_current_team",value:!a});break;case"search_exclude_bots":this.props.setUserPrefByApi({pref:"search_exclude_bots",value:!n});break;case"search_only_my_channels":this.props.setUserPrefByApi({pref:"search_only_my_channels",value:!i});break;default:break}}},{key:"onFileTypeChange",value:function e(t){this.props.setEditableRequestQueryFilterFileType({fileType:t})}},{key:"showChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:true}})}},{key:"hideChannelSelect",value:function e(){this.setState(function(){return{channelSelectIsVisible:false}})}},{key:"showMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:true}})}},{key:"hideMemberSelect",value:function e(){this.setState(function(){return{memberSelectIsVisible:false}})}},{key:"shouldRenderDateFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters;if(Object(F["a"])(r)&&a)return false;return!a||r.before&&r.after}},{key:"renderInFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.loading;var s=this.state.channelSelectIsVisible;if(i)return this.renderInPlaceholder();return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("Channels & direct messages"))),m.a.createElement("div",{className:"p-search_filter__controls"},n.in.map(function(e){return m.a.createElement("label",{key:e.id,htmlFor:"universal-search-channel-filter-"+e.id,className:"p-search_filter__option "+(-1===a.in.indexOf(e.id)?"p-search_filter__option--suggestion":"")},m.a.createElement(W["a"],{channel:e,showTeamIconForXwsChannels:true}),m.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",tabIndex:"0",id:"universal-search-channel-filter-"+e.id,checked:a.in.indexOf(e.id)>-1,onChange:function r(){return t.onChannelSelect(e.id)}}))}),!s&&m.a.createElement(G["a"],{className:"p-search_filter__more_link",onClick:this.showChannelSelect,ariaLabel:te.t("More channels or direct messages to filter by")},te.t("More\u2026")),s&&m.a.createElement("div",{className:"p-search_filter__select"},m.a.createElement(q["a"],{id:"channel-select",name:"channel-select",optionsFetcher:this.onChannelQuery,onChange:this.onChannelSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:te.t("e.g. #general"),selectPlaceholder:te.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),m.a.createElement(G["a"],{ariaLabel:te.t("Hide channel filter selector"),className:"p-search_filter__close",onClick:this.hideChannelSelect},m.a.createElement(K["b"],{type:"times-small"}))))))}},{key:"renderInPlaceholder",value:function e(){return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("Channels & direct messages"))),m.a.createElement("div",{className:"p-search_filter__controls"},m.a.createElement(X["a"],{variation:0}),m.a.createElement(X["a"],{variation:1}),m.a.createElement(G["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:te.t("More channels or direct messages to filter by")},te.t("More\u2026")))))}},{key:"renderFromFilter",value:function e(){var t=this;var r=this.props,a=r.filters,n=r.suggestions,i=r.loading;var s=this.state.memberSelectIsVisible;if(i)return this.renderFromPlaceholder();return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("People"))),m.a.createElement("div",{className:"p-search_filter__controls"},n.from.map(function(e){return m.a.createElement("label",{key:e,htmlFor:"universal-search-member-filter-"+e,className:"p-search_filter__option "+(-1===a.from.indexOf(e)?"p-search_filter__option--suggestion":"")},m.a.createElement(V["b"],{userId:e,size:18,ariaHidden:"true",tabIndex:-1}),m.a.createElement(z["a"],{id:e}),m.a.createElement("input",{id:"universal-search-member-filter-"+e,className:"flex_shrink_none",tabIndex:"0",type:"checkbox",checked:a.from.indexOf(e)>-1,onChange:function r(){return t.onMemberSelect(e,true)}}))}),!s&&m.a.createElement(G["a"],{className:"p-search_filter__more_link",onClick:this.showMemberSelect,ariaLabel:te.t("More people to filter by")},te.t("More\u2026")),s&&m.a.createElement("div",{className:"p-search_filter__select"},m.a.createElement(q["a"],{id:"member-select",name:"member-select",optionsFetcher:this.onMemberQuery,onChange:this.onMemberSelect,minQueryLength:2,value:null,useFullWidthOptions:true,placeholder:te.t("e.g. Shannon"),selectPlaceholder:te.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true}),m.a.createElement(G["a"],{ariaLabel:te.t("Hide member filter selector"),className:"p-search_filter__close",onClick:this.hideMemberSelect},m.a.createElement(K["b"],{type:"times-small"}))))))}},{key:"renderFromPlaceholder",value:function e(){return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("People"))),m.a.createElement("div",{className:"p-search_filter__controls"},m.a.createElement(X["a"],{includeAvatar:true,variation:0}),m.a.createElement(X["a"],{includeAvatar:true,variation:1}),m.a.createElement(G["a"],{className:"p-search_filter__more_link",disabled:true,ariaLabel:te.t("More people to filter by")},te.t("More\u2026")))))}},{key:"renderFileTypeFilter",value:function e(){var t=this.props,r=t.filters,a=t.showOnlyActiveFilters,n=t.showFileFilters;if(!n||a&&!r.fileType)return null;return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("File type"))),m.a.createElement(H["a"],{filetype:r.fileType,onChange:this.onFileTypeChange})))}},{key:"renderPrefs",value:function e(){var t=this;var r=this.props,a=r.showOnlyActiveFilters,n=r.isEnterpriseOrg,i=r.orgName;var s=this.props.searchPrefs,o=s.searchOnlyCurrentTeam,c=s.searchExcludeBots,l=s.searchOnlyMyChannels;if(a)return null;return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"p-search_filter"},m.a.createElement("div",{className:"p-search_filter__title"},m.a.createElement("h3",{className:"p-search_filter__title_text"},te.t("Include results from\u2026"))),m.a.createElement("div",{className:"p-search_filter__controls"},n&&m.a.createElement("label",{className:j()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!o}),htmlFor:"search_only_current_team"},te.t("Other {orgName} workspaces",{orgName:i})," ",m.a.createElement("input",{type:"checkbox",id:"search_only_current_team",checked:!o,onChange:function e(){return t.onSearchPrefChange("search_only_current_team")}})),m.a.createElement("label",{className:j()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!c}),htmlFor:"search_exclude_bots"},te.t("Apps and bots")," ",m.a.createElement("input",{type:"checkbox",id:"search_exclude_bots",checked:!c,onChange:function e(){return t.onSearchPrefChange("search_exclude_bots")}})),m.a.createElement("label",{className:j()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":!l}),htmlFor:"search_only_my_channels"},te.t("Channels I\u2019m not a member of")," ",m.a.createElement("input",{type:"checkbox",id:"search_only_my_channels",checked:!l,onChange:function e(){return t.onSearchPrefChange("search_only_my_channels")}})))))}},{key:"render",value:function e(){var t=this.props.filters.after&&Y()(this.props.filters.after,J["a"]).add(1,"days").format(J["a"]);var r=this.props.filters.before&&Y()(this.props.filters.before,J["a"]).subtract(1,"days").format(J["a"]);return m.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),m.a.createElement(Z["a"],{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:t,endDate:r}),this.renderPrefs())}}]);return t}(f["PureComponent"]);ne.displayName="MessagesFilterUI";ne.defaultProps=ae;var ie=function e(t){var r=Object(C["getEditableRequestQueryFilter"])(t)||{};var a=Object(C["getEditableRequestChannelObjects"])(t)||{};var n=Object(C["getFilterSuggestions"])(t)||{};var i=Object(A["getCurrentUserId"])(t);var s=Object(I["getCurrentTeam"])(t);var o=!!s.enterprise_id;var c=o?Object(N["getEnterpriseOrgName"])(t):"";var l=oe(t,r.in);var u=Object(E["getModuleState"])(t,"suggestions")||{};var d=u.loading;return{suggestions:{in:(n.in||[]).map(function(e){return a[e]||se(t,e)}).filter(function(e){return!!e}),from:n.from||[]},isEnterpriseOrg:o,orgName:c,myUserId:i,filters:{in:r.in||[],from:r.from||[],before:r.before,after:r.after,fileType:r.fileType},channelObjects:a,imToUserMap:l,searchPrefs:{searchOnlyCurrentTeam:Object(T["getUserPref"])(t,"search_only_current_team"),searchExcludeBots:Object(T["getUserPref"])(t,"search_exclude_bots"),searchOnlyMyChannels:Object(T["getUserPref"])(t,"search_only_my_channels")},loading:d}};function se(e,t){if(Object(P["a"])(t)){var r=Object(x["a"])(e,t)||Object(S["getChannelById"])(e,t);if(r.isUnknown||r.isNonExistent)return null;return r}if(Object(M["a"])(t))return Object(w["getMemberById"])(e,t);return null}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.reduce(function(t,r){if(Object(M["a"])(r)){var a=Object(S["getImIdByMemberId"])(e,r);a&&(t[a]=r)}return t},{})}var ce={setEditableRequestQueryFilterAfter:C["setEditableRequestQueryFilterAfter"],setEditableRequestQueryFilterBefore:C["setEditableRequestQueryFilterBefore"],setEditableRequestChannelObjects:C["setEditableRequestChannelObjects"],setEditableRequestQueryFilterFileType:C["setEditableRequestQueryFilterFileType"],setUserPrefByApi:R["c"],toggleEditableRequestQueryFilterFromItem:C["toggleEditableRequestQueryFilterFromItem"],toggleEditableRequestQueryFilterInItem:C["toggleEditableRequestQueryFilterInItem"]};t["a"]=Object(_["connect"])(ie,ce)(ne)},22273:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(22456);var _=r(5);var y=r(283);var O=r(12);var k=r(22958);var j=r(20234);var C=r.n(j);var E=new _["b"]("search");var S={type:v.a.oneOf(["messages","files"]).isRequired,featureReactSearch:v.a.bool.isRequired,numOfFileResults:v.a.number,numOfMessageResults:v.a.number,setTab:v.a.func.isRequired};var w={numOfFileResults:void 0,numOfMessageResults:void 0};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["setTab"]);return r}s()(t,[{key:"setTab",value:function e(){this.props.setTab({tab:"messages"===this.props.type?"files":"messages"})}},{key:"renderMessage",value:function e(){if(!this.props.featureReactSearch)return null;var t=this.props,r=t.numOfFileResults,a=t.numOfMessageResults;if("messages"===this.props.type&&Object(f["isNumber"])(r)&&r>0)return h.a.createElement("p",null,E.t("Slack couldn\u2019t find any relevant messages, but there {numOfFileResults, plural, =1 {is} other {are}} {numOfFileResults, plural, =1 {# related file} other {# related files}}.",{numOfFileResults:r}),"\xa0",h.a.createElement(y["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},E.t("See files")," \u2192"));if("files"===this.props.type&&Object(f["isNumber"])(a)&&a>0)return h.a.createElement("p",null,E.t("Slack couldn\u2019t find any relevant files, but there {numOfMessageResults, plural, =1 {is} other {are}} {numOfMessageResults, plural, =1 {# related message} other {# related messages}}.",{numOfMessageResults:a}),"\xa0",h.a.createElement(y["a"],{className:"c-search_no_results__tab_link",onClick:this.setTab},E.t("See messages")," \u2192"));return h.a.createElement("p",null,E.t("Slack couldn\u2019t find any results related to your search."))}},{key:"render",value:function e(){if(!this.props.featureReactSearch)return null;return h.a.createElement("div",{className:"c-search_no_results"},h.a.createElement("h2",{className:"c-search__section_header"},"messages"===this.props.type?E.t("No message results"):E.t("No file results")),h.a.createElement(k["a"],{type:this.props.type}),this.renderMessage())}}]);return t}(p["PureComponent"]);I.displayName="NoResults";I.defaultProps=w;var T=function e(t){return{featureReactSearch:Object(O["isFeatureEnabled"])(t,"feature_react_search")}};var N={setTab:g["a"]};t["a"]=Object(b["connect"])(T,N)(I)},22274:function(e,t,r){"use strict";var a=r(378);var n=r(5);var i=r(283);var s=r(3);var o=r.n(s);var c=r(12159);var l=r.n(c);var u=r(268);var d={errorType:o.a.string.isRequired,onClickRefreshSearch:o.a.func.isRequired};var v={};var p=new n["b"]("search");function h(e){var t=e.errorType,r=e.onClickRefreshSearch;if(t===u["MODULE_ERROR_STATE"].None)return null;return l.a.createElement(a["a"],{enabled:["feature_react_search"]},l.a.createElement("div",{className:"c-search_no_results"},l.a.createElement("h2",{className:"c-search__section_header"},p.t("Something went wrong")),l.a.createElement("p",null,p.t("For some reason, Slack wasn\u2019t able to complete your search."),l.a.createElement(i["a"],{onClick:r},p.t("Try again")))))}h.displayName="Error";h.defaultProps=v;t["a"]=h},22275:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(3184);var c=r(37);var l=r(5);var u=r(378);var d=new l["b"]("search");var v={onClick:s.a.func.isRequired};function p(e){return n.a.createElement(u["a"],{enabled:["feature_react_search"]},n.a.createElement("div",{className:"c-search__back_to_filters"},n.a.createElement(o["d"],{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},n.a.createElement(c["b"],{type:"arrow-up-medium"}),"\xa0",d.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"}))))}p.displayName="BackToFiltersButton";t["a"]=p},22276:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(266);var O=r(21697);var k=r(3276);var j=r(12);var C=r(907);var E=r(5);var S=r(1577);var w=r(22466);var I=r(22467);var T=r(22468);var N=r(21964);var R=r(22469);var A=r(22470);var M=r(90);var P=r(1557);var x=r(981);var D=r(1435);var F=r(1535);var L=r(22955);var B=r(22471);var U=new E["b"]("global_nav");var q={channelId:m.a.string.isRequired,channel:m.a.object.isRequired,onMenuItemSelected:m.a.func,actions:m.a.object,displayName:m.a.string,isMuted:m.a.bool,joinChannel:m.a.func,featureGlobalNav:m.a.bool};var H={onMenuItemSelected:g["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:g["noop"],featureGlobalNav:false};var W=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMenuItemSelected=r.onMenuItemSelected.bind(r);r.getMuteLabel=r.getMuteLabel.bind(r);r.getItems=r.getItems.bind(r);r.preventClose=false;r.state={mode:"menu"};return r}c()(t,[{key:"onMenuItemSelected",value:function e(t,r){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,r)}},{key:"getMuteLabel",value:function e(){var t=this.props,r=t.isMuted,a=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(C["getChannelType"])(a);if(!i)return null;if(r&&s)return U.t("Unmute this conversation");if(r&&!s)return U.t("Unmute {channelName}",{channelName:n});if(!r&&s)return U.t("Mute this conversation");if(!r&&!s)return U.t("Mute {channelName}",{channelName:n});return null}},{key:"getItems",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.channel,i=r.actions,s=r.displayName,o=r.joinChannel,c=r.featureGlobalNav;var l=Object(C["getChannelType"])(n);var u=Object(C["getMemberIdFromIm"])(n);if(!i||!l||!c)return[];var d="mpim"===l;var v="channel"===l;var p="private"===l;var h=v||p;var f=[{label:U.t("Start a call\u2026"),show:i.call,key:"call",click:function e(){return Object(F["c"])(n)}},{label:U.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:d?U.t("Invite another member\u2026"):U.t("Invite new members to join\u2026"),show:i.invite,key:"invite",click:function e(){return Object(S["a"])(a)}},{label:U.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Object(w["a"])()}},{label:U.t("View {userPossesive} profile",{userPossesive:Object(E["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(M["g"])(u)}},{label:U.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return Object(N["a"])(u)}},{label:h?U.t("View channel details"):U.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(P["c"])("details")}},{label:U.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(I["a"])(a)}},{label:U.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return Object(R["a"])(n)}},{label:U.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(I["a"])(a,"retention")}},{type:"separator",key:"separator-1"},{label:U.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return Object(T["a"])(a)}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Object(x["c"])(a)}},{type:"separator",key:"separator-2"},{label:U.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Object(A["a"])()}},{label:d?U.t("Send email to this conversation\u2026"):U.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:"/services/new/email",target:"_blank"},{type:"separator",key:"separator-3"},{label:U.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(D["n"])(a)}},{label:U.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:a})}},{type:"separator",key:"separator-4"},{label:U.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(I["a"])(a,"export")}}];return f.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return h.a.createElement(y["a"],n()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return h.a.createElement(L["a"],n()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(p["Component"]);W.displayName="Menu";W.defaultProps=H;var G=function e(t,r){var a=r.channelId;var n=Object(O["getChannelById"])(t,a);return{channel:n,actions:Object(B["a"])(t,a),displayName:Object(C["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(k["isChannelMutedById"])(t,a),featureGlobalNav:Object(j["isFeatureEnabled"])(t,"feature_global_nav")}};var V={joinChannel:O["joinConversationApi"]};t["a"]=Object(b["connect"])(G,V)(W)},22277:function(e,t,r){"use strict";var a=r(22490);var n=r(22491);var i=r(22492);r.d(t,"a",function(){return a["a"]});r.d(t,"b",function(){return n["a"]});t["c"]=i["a"]},22278:function(e,t,r){"use strict";r.d(t,"g",function(){return u});r.d(t,"a",function(){return d});r.d(t,"f",function(){return v});r.d(t,"b",function(){return p});r.d(t,"d",function(){return h});t["e"]=f;r.d(t,"c",function(){return b});r.d(t,"i",function(){return g});r.d(t,"j",function(){return _});r.d(t,"h",function(){return y});var a=r(189);var n=r.n(a);var i=r(194);var s=r.n(i);var o=r(1);var c=r.n(o);var l=function e(t){var r=t.value,a=t.min,n=t.max;return Math.max(a,Math.min(n,r))};var u=function e(t){var r=t.value,a=t.min,n=t.max;return(r-a)/(n-a)};var d=function e(t){var r=t.value,a=t.min,n=t.max;return r*(n-a)+a};var v=function e(t,r){return{left:Math.min(t.x,r.x),top:Math.min(t.y,r.y),width:Math.abs(t.x-r.x),height:Math.abs(t.y-r.y)}};var p=function e(t){return{x:t.left+t.width/2,y:t.top+t.height/2}};var h=function e(t,r){return n()({},t,{left:t.left-r.left,top:t.top-r.top})};function f(e){if(s.a.mac)return e.metaKey;return e.ctrlKey}var m=function e(t){var r=t.scale,a=t.translate,i=t.minScale,s=t.size;var o=n()({},a);Math.abs(a.y)>s.height/2*(r-i)&&(o.y=Math.sign(a.y)*(s.height/2)*(r-i));Math.abs(a.x)>s.width/2*(r-i)&&(o.x=Math.sign(a.x)*(s.width/2)*(r-i));return o};var b=function e(t){var r=t.value,a=t.direction,n=t.steps;var i=1===a;var s=i?n:n.slice().reverse();var c=function e(t,r){return(i?t<r:t>r)&&t!==r};return Object(o["find"])(s,function(e){return c(r,e)})};var g=function e(t){var r=t.point,a=t.containerRect,n=t.targetRect,i=t.prevScale,s=t.newScale,o=t.prevTranslate,c=t.minScale,u=t.maxScale;var d=l({value:s,min:c,max:u});var v=d-i;var h=p(a);var f={x:(r.x-o.x-h.x)/i,y:(r.y-o.y-h.y)/i};var b=m({scale:d,translate:{x:o.x-f.x*v,y:o.y-f.y*v},minScale:c,size:n});return{scale:d,translate:b}};var _=function e(t){var r=t.rect,a=t.prevScale,n=t.prevTranslate,i=t.minScale,s=t.maxScale,o=t.containerRect,c=t.targetRect;var u=p(o);var d=p(r);var v=Math.min(o.width/r.width,o.height/r.height);var h=l({value:a*v,min:i,max:s});var f=m({scale:h,translate:{x:n.x*(h/a)-(d.x-u.x)*(h/a),y:n.y*(h/a)-(d.y-u.y)*(h/a)},minScale:i,size:c});return{scale:h,translate:f}};var y=function e(t){var r=t.delta,a=t.targetRect,n=t.prevScale,i=t.prevTranslate,s=t.minScale;var o=m({scale:n,translate:{x:i.x+r.x,y:i.y+r.y},minScale:s,size:a});return{translate:o}}},22279:function(e,t,r){"use strict";var a=r(22495);var n=r(22285);t["a"]=a["a"]},2228:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(95);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(11);var g=r.n(b);var _=r(2229);var y=r(5);var O=r(37);var k=r(3044);var j=r(21764);var C=r(398);var E=r(364);var S=r(20216);var w=r.n(S);var I=new y["b"]("downloads");g.a.locale(E["f"]);var T={id:v.a.string.isRequired,downloadPath:v.a.string,downloadState:v.a.string,startTime:v.a.number,progress:v.a.number,isPaused:v.a.bool,fileName:v.a.string,imageSource:v.a.string,fileType:v.a.string,prettyType:v.a.string,fileSize:v.a.number,highlight:v.a.bool};var N={id:"",downloadPath:"",downloadState:"",startTime:0,progress:0,isPaused:false,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false};var R=function(e){u()(t,e);c()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var r=t.downloadState,a=t.progress,n=t.startTime;if("progressing"!==r)return"";if(a>=1)return"";if(-1===a)return"";if(!a)return"";var i=Date.now()-n;var s=i*(1/a);var o=s-i;return I.t("{duration} remaining",{duration:g.a.duration(o,"milliseconds").humanize()})}}]);function t(e){n()(this,t);var r=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};r.onRootDivClick=r.onRootDivClick.bind(r);r.onCancel=r.onCancel.bind(r);r.onRetry=r.onRetry.bind(r);r.onRemove=r.onRemove.bind(r);r.onPause=r.onPause.bind(r);r.onResume=r.onResume.bind(r);return r}c()(t,[{key:"onRootDivClick",value:function e(t){var r=this.props,a=r.id,n=r.downloadState;if("completed"===n){t.stopPropagation();t.shiftKey?Object(C["openDownload"])(a):Object(C["showDownload"])(a)}else if("cancelled"===n||"interrupted"===n){t.stopPropagation();Object(C["retryDownload"])(a)}}},{key:"onCancel",value:function e(t){t.stopPropagation();Object(C["cancelDownload"])(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();Object(C["retryDownload"])(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();Object(C["removeDownload"])(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();Object(C["pauseDownload"])(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();Object(C["resumeDownload"])(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,r=t.fileType,a=t.imageSource;var n=function e(){return h.a.createElement(O["a"],{className:"filetype_icon "+r+" s48 download_icon download_filetype"})};if(a)return h.a.createElement(_["a"],{src:a,renderPending:n,width:"32",height:"32",className:"download_icon p-download_item__image",alt:"icon"});return n()}},{key:"renderExtraActions",value:function e(){var t=this.props.isPaused?h.a.createElement("a",{className:"p-download_item__link--resume",onClick:this.onResume,role:"button"},I.t("Resume")):h.a.createElement("a",{className:"p-download_item__link--pause",onClick:this.onPause,role:"button"},I.t("Pause"));return h.a.createElement("span",{className:"p-download_item__extra_actions"},t,h.a.createElement("a",{className:"p-download_item__link--cancel",onClick:this.onCancel,role:"button"},I.t("Cancel")))}},{key:"render",value:function e(){var r=this.props,a=r.downloadPath,n=r.downloadState,i=r.progress,s=r.fileName,o=r.imageSource,c=r.fileType,l=r.prettyType,u=r.fileSize,d=r.highlight;var v=s||a.split(/\/|\\/).reverse()[0];var p="completed"===n?100:100*i;var f="progressing"===n&&i?i*u:void 0;var b=void 0;b=f?I.t("{partialSize} of {size} {prettyType}",{partialSize:Object(j["a"])(f,2),size:Object(j["a"])(u),prettyType:l}):Object(j["a"])(u)+" "+l;var g=t.getEstimatedTimeRemaining(this.props);var _=m()("p-download_item","clearfix",n,{highlight:d});var y=m()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!o,fileType:c});var C=Object(k["isMac"])()?I.t("Show in Finder"):I.t("Open containing folder");var E={width:p+"%"};return h.a.createElement("div",{className:_,onClick:this.onRootDivClick,role:"presentation"},h.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),h.a.createElement(O["a"],{className:y})),h.a.createElement(O["a"],{type:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}),h.a.createElement("div",{className:"p-download_item__container"},h.a.createElement("div",{className:"p-download_item__name_row"},h.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},v),this.renderExtraActions()),h.a.createElement("div",{className:"p-download_item__size_row"},h.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},h.a.createElement("span",{className:"p-download_item__partial_size"},b)),h.a.createElement("span",{className:"p-download_item__actions"},h.a.createElement("a",{className:"p-download_item__link--show"},C),h.a.createElement("a",{className:"p-download_item__link--open"},I.t("Click to open")),h.a.createElement("a",{className:"p-download_item__link--retry",onClick:this.onRetry,role:"button"},I.t("Retry"))),h.a.createElement("span",{className:"p-download_item__time_remaining"},g)),h.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},h.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:E}))))}}]);return t}(h.a.Component);R.displayName="DownloadItem";R.defaultProps=N;t["a"]=R},22280:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1141);var s=r(21696);var o=r(3273);var c=r(21702);var l=r(3274);var u=r(1007);var d=Object(s["e"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts,s=r.broadcastDelete,d=void 0!==s&&s;var v=t();var p=Object(c["getMessageByTimestamp"])(v,a,n);if(!p)return Promise.resolve();e(Object(l["animateDeleteMessage"])({channelId:a,ts:n}));if(Object(u["isTempTs"])(n)||Object(u["isEphemeral"])(p))return Promise.resolve();return Object(i["a"])({channelId:a,ts:n,broadcastDelete:d}).catch(function(t){if("message_not_found"!==t.message){e(Object(l["animateDeleteMessage"])({channelId:a,ts:n,isDeleting:false}));if(d)e(Object(c["showThreadBroadcast"])({channelId:a,ts:n}));else{e(Object(o["addTimestamps"])({channelId:a,timestamps:[n]}));e(Object(c["addMessages"])([p]))}}throw t})});d.propTypes={channelId:n.a.string.isRequired,ts:n.a.string.isRequired,broadcastDelete:n.a.bool};t["a"]=d;var v={animateAndDeleteMessageApi:d}},22281:function(e,t,r){"use strict";var a=r(22282);t["a"]=a["a"]},22282:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(45);var l=r(1);var u=r.n(l);var d=r(12);var v=r(60);var p=r(5);var h=r(21997);var f=new p["b"]("threads");var m={participantNames:n.a.arrayOf(n.a.string).isRequired,replyUsersCount:n.a.number.isRequired,replyCount:n.a.number,prefixWithReplyCount:n.a.bool,includesSelf:n.a.bool,broadcastPreabmle:n.a.bool};var b={replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function g(e){var t=e.participantNames,r=e.includesSelf,a=e.replyCount,n=e.replyUsersCount,i=e.prefixWithReplyCount,s=e.broadcastPreabmle;if(s&&1===a)return f.rt("1 reply");if(r)switch(n){case 1:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a});return f.t("Just you");case 2:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:t[0]});return f.rt("{userName} and you",{userName:t[0]});default:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:t[0],userName2:t[1]});return f.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(p["e"])(t,{noEscape:true}).join("");if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:o});return o}function _(e){var t=e.participantNames,r=e.replyUsersCount,a=e.replyCount,n=e.prefixWithReplyCount;var i=r-2;var o=Object(l["drop"])(t,2);o.length<i&&o.push(f.rt("others"));var c=Object(p["e"])(o,{noEscape:true}).join("");if(n)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:t[0],userName2:t[1],numOthers:i},function(e){var t=e.text;return s.a.createElement(v["d"],{tip:c},s.a.createElement("span",null,t))});return f.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:i},function(e){var t=e.text;return s.a.createElement(v["d"],{tip:c},s.a.createElement("span",null,t))})}function y(e){var t=e.participantNames,r=e.replyUsersCount,a=e.replyCount,n=e.prefixWithReplyCount,i=e.includesSelf,o=e.broadcastPreabmle;return s.a.createElement("span",{className:"p-thread_participant_list"},r<=3?g({participantNames:t,replyCount:a,replyUsersCount:r,prefixWithReplyCount:n,includesSelf:i,broadcastPreabmle:o}):_({participantNames:t,replyCount:a,replyUsersCount:r,prefixWithReplyCount:n}))}y.displayName="ThreadParticipantList";y.defaultProps=b;var O=Object(c["pure"])(y);function k(e,t){var r=t.replyUsers;var a=t.replyUsersCount;var n=Object(d["getCurrentUserId"])(e);var i=Object(l["includes"])(r,n);var s=Object(h["a"])(e,r);a||(a=r.length);return{participantNames:s,replyUsersCount:a,includesSelf:i}}t["a"]=Object(o["connect"])(k)(y)},22283:function(e,t,r){"use strict";var a=r(22509);var n=r(22510);var i=r(22511);var s=r(22512);var o=r(22513);var c=r(22514);var l=r(22515);var u=r(22516);var d=r(22518);var v=r(22519);var p=r(22520);var h=r(22521);r.d(t,"a",function(){return a["a"]});r.d(t,"b",function(){return n["a"]});r.d(t,"c",function(){return i["a"]});r.d(t,"d",function(){return s["a"]});r.d(t,"e",function(){return o["a"]});r.d(t,"f",function(){return c["a"]});r.d(t,"g",function(){return l["a"]});r.d(t,"h",function(){return u["a"]});r.d(t,"i",function(){return d["a"]});r.d(t,"j",function(){return v["a"]});r.d(t,"k",function(){return p["a"]});r.d(t,"l",function(){return h["a"]})},22284:function(e,t,r){"use strict";var a=r(22522);var n=r(22523);r.d(t,"a",function(){return a["a"]});r.d(t,"b",function(){return n["a"]})},22285:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(37);var k=r(266);var j=r(21823);var C=r(1086);var E=r(113);var S=56;var w=40;var I={type:g.a.oneOf(Object(_["values"])(j["a"])),action:E["a"].MessageAction.isRequired,onSelected:g.a.func.isRequired};var T={type:j["a"].default};var N=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}u()(t,[{key:"onSelected",value:function e(t){var r=this.props,a=r.action,e=r.onSelected;e(t,a)}},{key:"renderIcon",value:function e(){var t=this.props,r=t.action,a=t.type;if(r.iconSet){var n=a===j["a"].compactItem?w:S;var i=Object(C["a"])({icons:r.iconSet},n);return m.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:i})}if(r.iconType)return m.a.createElement(O["b"],{type:r.iconType});return null}},{key:"render",value:function e(){var t=this.props,r=t.action,a=t.onSelected,i=t.type,o=s()(t,["action","onSelected","type"]);return m.a.createElement(k["b"],n()({type:i,label:r.label||r.name,description:r.description,icon:this.renderIcon(),danger:r.danger,onSelected:this.onSelected,"data-qa":r["data-qa"]},o))}}]);return t}(f["PureComponent"]);N.displayName="MessageActionMenuItem";N.defaultProps=T;t["a"]=Object(k["g"])(N)},22286:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(21808);var b=r(22528);var g=r(12);var _=r(22529);var y=r(22530);var O=r(22531);var k=r(22532);var j=r(22533);var C=r(22534);var E=r(22535);var S=r(22536);var w=r(22537);var I={bannerName:h.a.string,bannerData:h.a.object,loadBanner:h.a.func.isRequired,featureModernizeBanners:h.a.bool.isRequired,featureModernizeBannersV2:h.a.bool.isRequired,featureModernizeBannersV3:h.a.bool.isRequired};var T={bannerName:"",bannerData:{}};var N=function e(){return v.a.createElement(_["a"],null)};N.displayName="renderI18nJapanBetaSendBtnBanner";var R=function e(t){var r=t.bannerData;return v.a.createElement(y["a"],{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};R.displayName="renderTwoWeeksLeftEscTrialBanner";var A=function e(t){var r=t.bannerData;return v.a.createElement(O["a"],{numDaysLeft:r.no_of_days_left,expirationDate:r.pay_date_next})};A.displayName="renderOneWeekLeftEscTrialBanner";var M=function e(){return v.a.createElement(C["a"],null)};M.displayName="renderApproachingFileLimitBanner";var P=function e(t){var r=t.bannerData;return v.a.createElement(k["a"],{numMsgs:r.messages_count_abbrev})};P.displayName="renderInProdTrialBanner";var x=function e(t){var r=t.bannerData;return v.a.createElement(j["a"],{expirationDate:r.expiration_date})};x.displayName="renderInProdTrialReminderBanner";var D=function e(t){var r=t.bannerData;return v.a.createElement(E["a"],{messagesCount:r.messages_count})};D.displayName="renderApproachingMsgLimitBanner";var F=function e(t){var r=t.bannerData;return v.a.createElement(S["a"],{messagesCount:r.messages_count})};F.displayName="renderJustReachedMsgLimitBanner";var L=function e(t){var r=t.bannerData;return v.a.createElement(w["a"],{messagesCount:r.messages_count})};L.displayName="renderThirtyDaysAfterMsgLimitBanner";var B={activation_msg_limit_banner:null};var U={approaching_msg_limit_banner:D,just_reached_msg_limit_banner:F,thirty_days_after_msg_limit_banner:L};var q={i18n_japan_beta_send_btn_banner:N,two_weeks_left_esc_trial_banner:R,one_week_left_esc_trial_banner:A,in_prod_trial_banner:P,in_prod_trial_reminder_banner:x,approaching_file_limit_banner:M};var H=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.props.loadBanner()}},{key:"render",value:function e(){var t=this.props,r=t.bannerName,a=t.bannerData,n=t.featureModernizeBanners,i=t.featureModernizeBannersV2,s=t.featureModernizeBannersV3;if(!n)return null;if(!r)return null;var o=q[r];i&&(o=o||U[r]);s&&(o=o||B[r]);if(!o){Object(b["a"])({name:r,data:a});return null}return o({bannerData:a})}}]);return t}(d["PureComponent"]);H.displayName="MessagePaneBannerContainer";H.defaultProps=T;var W=function e(t){return{bannerName:Object(m["getMessagePaneBannerName"])(t),bannerData:Object(m["getMessagePaneBannerData"])(t),featureModernizeBanners:Object(g["isFeatureEnabled"])(t,"feature_modernize_banners"),featureModernizeBannersV2:Object(g["isFeatureEnabled"])(t,"feature_modernize_banners_v2"),featureModernizeBannersV3:Object(g["isFeatureEnabled"])(t,"feature_modernize_banners_v3")}};var G={loadBanner:m["loadBanner"]};t["a"]=Object(f["connect"])(W,G)(H)},22287:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(9);var y=r(91);var O=r(12);var k=r(21714);var j=r(21697);var C=r(907);var E=r(3271);var S=r(21703);var w=r(21777);var I=r(21809);var T={isSharedChannel:m.a.bool,sharedTeamNames:m.a.arrayOf(m.a.node),bannerPrefs:m.a.shape({countPref:m.a.string,tsPref:m.a.string}).isRequired,clogStep:m.a.number.isRequired,onGoUrl:m.a.string.isRequired,goButtonText:m.a.string.isRequired,headerText:m.a.node.isRequired,renderBodyText:m.a.func.isRequired};var N={isSharedChannel:false,sharedTeamNames:[]};var R=["UPGRDEXP_FREE_TRIAL_FOR_SC","GROWTH_PRICING"];var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(r,["onGo","onCloseIcon","renderBodyText"]);return r}c()(t,[{key:"componentDidMount",value:function e(){this.clog({action:"impression"})}},{key:"onGo",value:function e(){var t=this.props.onGoUrl;this.clog({action:"click",ui_element:"billing_link"});window.open(t,"_blank")}},{key:"onCloseIcon",value:function e(){this.clog({action:"close",ui_element:"btn_close"})}},{key:"clog",value:function e(t){var r=this.props.clogStep;var a=n()({step:r},t);R.forEach(function(e){Object(y["b"])(e,{contexts:{ui_context:a}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,r=t.sharedTeamNames;return e(r)}},{key:"render",value:function e(){var t=this.props,r=t.isSharedChannel,a=t.headerText,n=t.goButtonText,i=t.bannerPrefs;if(!r)return null;return h.a.createElement(I["a"],{headerText:a,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i})}}]);return t}(p["PureComponent"]);A.displayName="EscTrialBanner";A.defaultProps=N;var M=function e(t){var r=Object(k["getPrimaryView"])(t);var a=Object(j["getChannelById"])(t,r);var n=Object(C["isExternallySharedChannel"])(a);var i=[];if(n){var s=Object(C["getMaybePendingSharedTeamIds"])(a);Object(b["isEmpty"])(s)||(i=Object(O["isFeatureEnabled"])(t,"feature_lazy_teams")?Object(b["map"])(s,function(e){var r=Object(E["getTeamById"])(t,e);return Object(S["isUnknown"])(r)?h.a.createElement(w["a"],{type:"unknown"}):Object(b["escape"])(Object(S["getTeamDisplayName"])(r))}):Object(b["map"])(s,function(e){return Object(b["escape"])(Object(S["getTeamDisplayName"])(Object(E["getTeamById"])(t,e)))}))}return{isSharedChannel:n,sharedTeamNames:i}};t["a"]=Object(_["connect"])(M)(A)},22288:function(e,t,r){"use strict";r.d(t,"c",function(){return l});r.d(t,"b",function(){return u});r.d(t,"a",function(){return d});t["e"]=v;t["f"]=p;t["h"]=h;t["i"]=f;t["g"]=m;t["d"]=y;var a=r(189);var n=r.n(a);var i=r(91);var s=r(3105);var o=r(21717);var c=r(21713);var l=0;var u=1;var d=2;function v(e,t,r,a,o,v,p,h){var f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!y(o,v,c["h"].PRQ_CHANNEL_SWITCH_USABLE))return;var m=void 0;var g=void 0;switch(a){case l:default:m=c["l"].COMPLETED;g=false;break;case u:m=c["l"].ABANDONED;g=true;break;case d:m=c["l"].COMPLETED;g=true;break}var _=Object(s["b"])(1e3*e*1e3,0);var O=n()({elapsed_time:_,target_channel_id:r,required_sync:g,end_state:m},b(p,t,h,f));Object(i["b"])(c["h"].PRQ_CHANNEL_SWITCH_USABLE,O)}function p(e,t,r,a,o,v,p,h){var f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!y(o,v,c["h"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var m=void 0;var g=void 0;switch(a){case l:default:m=c["l"].COMPLETED;g=false;break;case u:m=c["l"].ABANDONED;g=true;break;case d:m=c["l"].COMPLETED;g=false;break}var _=Object(s["b"])(1e3*e*1e3,0);var O=n()({elapsed_time:_,target_channel_id:r,required_sync:g,end_state:m},b(p,t,h,f));Object(i["b"])(c["h"].PRQ_CHANNEL_SWITCH_VISIBLE,O)}function h(e,t,r,a,o,l,u,d){var v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;var p=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(!y(a,o,c["h"].PRQ_TIME_TO_USABLE))return;var h=Object(s["b"])(1e3*e*1e3,0);var f=g(v);var m=n()({elapsed_time:h+f,desktop_elapsed_time:f,required_sync:r,end_state:d,start_type:c["i"].COLD,target_type:c["j"].CHANNEL,lazy_channels:p},b(l,t,u,v));Object(i["b"])(c["h"].PRQ_TIME_TO_USABLE,m)}function f(e,t,r,a,o,l,u){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;var v=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(!y(a,o,c["h"].PRQ_TIME_TO_VISIBLE))return;var p=Object(s["b"])(1e3*e*1e3,0);var h=g(d);var f=n()({elapsed_time:p+h,desktop_elapsed_time:h,required_sync:r,end_state:c["l"].COMPLETED,start_type:c["i"].COLD,target_type:c["j"].CHANNEL,lazy_channels:v},b(l,t,u,d));Object(i["b"])(c["h"].PRQ_TIME_TO_VISIBLE,f)}function m(e,t,r,a,s,o,l){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!y(a,s,c["h"].PRQ_SESSION_FRAME_STATS))return;var d=n()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:r},b(o,void 0,l,u));Object(i["b"])(c["h"].PRQ_SESSION_FRAME_STATS,d)}function b(e,t,r,a){var i="string"===typeof r&&r.startsWith("W");var s="undefined"!==typeof a&&null!==a&&a.stats&&a.stats.Id&&a.stats.Id.sessionId;var o={device:{id:"",make:navigator.platform,model:navigator.platform,os:s?"electron":"webapp",os_version:s?a.stats.Id.sessionId:""}};var l=void 0;if(t){o.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":l=c["k"].APP_ICON;break;case"MSG_PANE":l=c["k"].MSG_PANE;break;case"SIDE_BAR":l=c["k"].SIDE_BAR;break;case"QUICK_SWITCH":l=c["k"].QUICK_SWITCH;break;default:l=c["k"].UNKNOWN;break}}var u=n()({contexts:o,session_id:e,time:Date.now(),app_id:"web",is_tablet:false,user_id:i?void 0:r,external_id:i?r:void 0},_(a));t&&(u.trigger=l);return u}function g(){return 0}function _(e){if("undefined"!==typeof e&&null!==e&&e.app&&e.app.version){var t=e.app.version();var r=t.prerelease?" ("+t.prerelease+")":"";var a="string"===typeof t.prerelease?t.prerelease.match(/(alpha|beta)/i)[1]:"production";var n=void 0;switch(a){case"alpha":n=c["a"].ALPHA;break;case"beta":n=c["a"].BETA;break;default:n=c["a"].PRODUCTION;break}return{app_version:t.major+"."+t.minor+"."+t.patch+r,release_version:t.major+"."+t.minor+"."+t.patch,build_type:n}}return{app_version:"",release_version:"",build_type:c["a"].PRODUCTION}}function y(e,t,r){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(o["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[c["h"].PRQ_TIME_TO_USABLE,c["h"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if([c["h"].PRQ_TIME_TO_USABLE,c["h"].PRQ_TIME_TO_VISIBLE].includes(r))return true;if(r===c["h"].PRQ_SESSION_FRAME_STATS)return Object(o["a"])(10);return Object(o["a"])(10)}},22289:function(e,t,r){"use strict";t["b"]=x;var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(189);var v=r.n(d);var p=r(22903);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(37);var k=r(711);var j=r(58);var C=r(5);var E=r(22574);var S=r(22575);var w=r(22200);var I=r(20188);var T=r.n(I);var N=new C["b"]("imports");var R={userMapping:m.a.shape({id:m.a.oneOfType([m.a.string,m.a.number]).isRequired,name:m.a.string.isRequired,import_email:m.a.string.isRequired,email:m.a.string.isRequired,email_state:m.a.string.isRequired,mapping:m.a.string.isRequired}).isRequired,allMembers:m.a.object.isRequired,onUserMappingChange:m.a.func};var A={onUserMappingChange:_["noop"]};var M=[{label:N.t("Choose one:"),value:"-",id:"-"},{label:N.t("Create & invite user"),value:"invite",id:"invite"},{label:N.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:N.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:N.t("Skip user completely, importing no messages"),value:"0",id:"0"}];function P(e){return[].concat(M,h()(Object.values(e.allMembers).map(w["a"]))).map(function(t){return t.value===e.userMapping.mapping?v()({},t,{preselected:true}):t})}function x(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var D=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEmailChange=r.onEmailChange.bind(r);r.onMappingChange=r.onMappingChange.bind(r);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(P(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(v()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var r=void 0;var a=this.props.allMembers[t];r=a&&a.profile&&a.profile.email?a.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(v()({},this.props.userMapping,{mapping:t,email:r}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var r=this.props.userMapping,a=r.mapping,n=r.email,i=r.email_state,s=r.import_email,o=r.id;if(n===s&&"ok"===i)return null;if(n===s&&"create"!==a&&"invite"!==a)return null;if(x(a))return null;return g.a.createElement("input",{type:"email",name:"email_"+o,defaultValue:n,onChange:function e(r){return t.onEmailChange(r.target.value)},placeholder:Object(j["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=N.t("Another user has this email.");break;case"empty":t=N.t("An email address is required.");break;case"invalid":t=N.t("This address is invalid.");break;case"ok":default:break}var r=["control-group","small_top_margin",{error:!x(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return g.a.createElement("div",{className:r},t&&g.a.createElement("span",{className:"small_left_margin help-inline"},g.a.createElement(O["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return g.a.createElement(k["a"],{ref:function e(r){t.lazyFilterSelect=r},items:P(this.props),template:E["a"],tokenTemplate:S["a"],onValueChange:function e(r){return t.onMappingChange(r[0].value)},single:true})}},{key:"renderAction",value:function e(){return g.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return g.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},g.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||N.t("no email")),this.renderAction())}}]);return t}(b["PureComponent"]);D.displayName="ServiceImportUserMapping";D.defaultProps=A;t["a"]=D},22290:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(9);var y=r(333);var O=r(1);var k=r.n(O);var j=r(12);var C=r(23039);var E=r(21697);var S=r(21698);var w=r(21705);var I=r(21727);var T=r(21712);var N=r(277);var R=r(21952);var A=r(90);var M=r(21701);var P=r(5);var x=r(43);var D=r(2111);var F=r(21750);var L=r(3241);var B=r(3184);var U=r(266);var q=r(3096);var H=r(3254);var W=r(22291);var G=r(22005);var V=r(22972);var z=r(20251);var K=r.n(z);var Q={members:"members",channels:"channels"};var Y=new P["b"]("user_groups");var J={userGroup:m.a.shape({created_by:m.a.string,date_create:m.a.number,date_delete:m.a.number,date_update:m.a.number,deleted_by:m.a.string,description:m.a.string,enterprise_subteam_id:m.a.string,handle:m.a.string,id:m.a.string,is_external:m.a.bool,is_subteam:m.a.bool,is_usergroup:m.a.bool,name:m.a.string,prefs:m.a.shape({channels:m.a.array,groups:m.a.array}),team_id:m.a.string,updated_by:m.a.string,user_count:m.a.number,users:m.a.array,_name_lc:m.a.string}),onLoad:m.a.func,onChannelSwitch:m.a.func,removeMember:m.a.func,removeChannel:m.a.func,openModal:m.a.func,openUserGroupList:m.a.func,enqueueToast:m.a.func,canEditUserGroups:m.a.func,canCreateAndDeleteUserGroups:m.a.func,groupId:m.a.string.isRequired,userGroupMembers:m.a.array,newMembers:m.a.array,userGroupDefaultChannels:m.a.array,featureSonicUserGroups:m.a.bool};var Z={userGroup:{},onLoad:O["noop"],onChannelSwitch:O["noop"],removeMember:O["noop"],removeChannel:O["noop"],openModal:O["noop"],openUserGroupList:O["noop"],enqueueToast:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],featureSonicUserGroups:false};var X=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog"]);return r}c()(t,[{key:"componentDidMount",value:function e(){Object(R["i"])(this.props.userGroup)||this.props.onLoad()}},{key:"onRemoveMember",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){r.props.removeMember(t).then(function(){r.props.enqueueToast({element:h.a.createElement(D["a"],null,Y.t("Member removed from group."))})}).catch(function(e){Object(x["error"])("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&r.props.enqueueToast({element:h.a.createElement(D["a"],null,Y.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){r.props.removeChannel(t).then(function(){r.props.enqueueToast({element:h.a.createElement(D["a"],null,Y.t("Channel removed from group."))})}).catch(function(e){Object(x["error"])("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var r=t.type,a=t.id;r===Q.members?this.onRemoveMember(a):r===Q.channels&&this.onRemoveChannel(a)}},{key:"onViewProfile",value:function e(t,r){var a=r.type,n=r.id;if(a===Q.members)return Object(A["g"])(n,"groups");if(a===Q.channels)return this.props.onChannelSwitch(n);return null}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.userGroup,a=t.userGroupDefaultChannels,n=void 0===a?[]:a;var i=Object(R["f"])(r);return[{title:Y.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:Y.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(R["i"])(t)}},{key:"canRemoveItem",value:function e(t){var r=this.props.userGroup;if(t===Q.members&&Object(R["g"])(r))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return h.a.createElement("div",{className:"p-user_group_details__section"},h.a.createElement("div",{className:"p-user_group_details__name"},Object(R["e"])(t)),h.a.createElement("div",{className:"p-user_group_details__description"},Object(R["c"])(t)),h.a.createElement("div",{className:"p-user_group_details__handle"},Object(R["d"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canCreateAndDeleteUserGroups())return null;return h.a.createElement("div",{className:"p-user_group_details__section"},h.a.createElement(V["a"],{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var r=this.getTabs();var a=g()("p-user_group_details__tab_container",{"p-user_group_details__tab_container--sonic":Object(M["a"])()});return h.a.createElement("div",{className:a,"data-qa-user-group-details-tabs":true},h.a.createElement(q["a"],{tabs:r,defaultTabId:t,fullHeight:true,fullWidthMenu:true}))}},{key:"renderListItemOptionsMenu",value:function e(t){var r=this;var a=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===Q.channels?Y.t("Open channel"):Y.t("View profile");var c=[h.a.createElement(U["b"],{key:i,label:o,onSelected:function e(t){return r.onViewProfile(t,{type:s,id:i})}})];this.canRemoveItem(s)&&c.push(h.a.createElement(U["b"],{key:i,label:Y.t("Remove from group..."),onSelected:function e(){return r.onRemoveFromGroup({type:s,id:i})},danger:true}));return h.a.createElement(U["e"],n()({},a,{width:"auto"}),c)}},{key:"renderMemberItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=Object(O["includes"])(this.props.newMembers,r);var i=g()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:a,onClick:function e(a){return t.onViewProfile(a,{type:Q.members,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:Q.members})},customProps:{key:r.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":r.id}};return h.a.createElement(G["a"],s,h.a.createElement("div",{className:"full_width"},h.a.createElement(F["a"],{id:r.id,size:"medium",showTooltip:false,forcedPrimary:"real_name",showPresence:false,showStatus:false,"data-qa-user-group-details-members-list-item-member":true})))}},{key:"renderChannelItem",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.userGroupIsEditable();var n=g()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":a});var i=r.purpose?h.a.createElement("span",{className:"p-user_group_details__channel_purpose"},r.purpose.value):null;var s={className:n,isContextButtonVisible:a,onClick:function e(a){return t.onViewProfile(a,{type:Q.channels,id:r.id})},renderMenu:function e(a){return t.renderListItemOptionsMenu({menuProps:a,id:r.id,type:Q.channels})},customProps:{key:r.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":r.id}};return h.a.createElement(G["a"],s,h.a.createElement("div",{className:"p-user_group_details__list_item_info"},h.a.createElement(L["a"],{channel:r,className:"bold cursor_pointer"}),i))}},{key:"renderMembersList",value:function e(){var t=this;var r=this.props.userGroupMembers;if(!r||Object(O["isEmpty"])(r))return this.renderEmptyMemberState();this.memberListKeys=Object(O["map"])(r,"id");return h.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true},h.a.createElement(y["a"],null,function(e){var a=e.width,n=e.height;return h.a.createElement(H["a"],{width:a,height:n,keys:t.memberListKeys,rowRenderer:function e(a){return t.renderMemberItem(r[a])}})}))}},{key:"renderChannelsList",value:function e(){var t=this;var r=this.props.userGroupDefaultChannels;if(!r||Object(O["isEmpty"])(r))return this.renderEmptyChannelState();this.channelListKeys=Object(O["map"])(r,"id");return h.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true},h.a.createElement(y["a"],null,function(e){var a=e.width,n=e.height;return h.a.createElement(H["a"],{width:a,height:n,keys:t.channelListKeys,rowRenderer:function e(a){return t.renderChannelItem(r[a])}})}))}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?h.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onAddMembers},Y.t("Add Members")):null;return h.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":Q.members},h.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Y.t("No members")),t)}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?h.a.createElement(B["d"],{type:"outline",size:"small",onClick:this.onAddChannels},Y.t("Add Default Channels")):null;return h.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":Q.channels},h.a.createElement("div",{className:"p-user_group_details__empty_list_header"},Y.t("No default channels")),h.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},Y.t("All members of a user group are automatically added to its default channels.")),t)}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit,n=t.id;var i=this.props.groupId;return h.a.createElement(G["b"],{action:r,onSubmit:a,id:n,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return h.a.createElement(G["e"],{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return h.a.createElement(G["d"],{userGroupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;var r=g()("p-user_group__content",{"p-user_group__content--legacy":!Object(M["a"])()});return h.a.createElement("div",{className:"full_height"},h.a.createElement(W["b"],{view:W["a"].details}),h.a.createElement("div",{className:r},h.a.createElement("div",{className:"p-user_group_details","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())))}}]);return t}(p["PureComponent"]);X.displayName="UserGroupDetails";X.defaultProps=Z;var $=function e(t,r){var a=r.groupId;var n=Object(C["getUserGroupById"])(t,a);var i=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(C["getUserGroupMembers"])(t,{groupId:a});var o=Object(O["map"])(s,function(e){return Object(S["getMemberById"])(t,e)});var c=Object(C["getUserGroupDefaultChannels"])(t,{groupId:a});var l=Object(O["map"])(c,function(e){return Object(E["getChannelById"])(t,e)});return{userGroup:n,featureSonicUserGroups:i,userGroupMembers:o,userGroupDefaultChannels:l,canEditUserGroups:function e(){return Object(R["b"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(R["a"])(t)}}};var ee=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(w["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(C["fetchAndUpsertUserGroupMembers"])({groupId:a}))},removeMember:function e(r){return t(Object(C["removeUserGroupMember"])({groupId:a,memberId:r}))},removeChannel:function e(r){return t(Object(C["removeUserGroupChannel"])({groupId:a,channelId:r}))},onChannelSwitch:function e(r){return t(Object(N["a"])({id:r}))},openUserGroupList:function e(){return t(Object(T["f"])())},enqueueToast:function e(){return t(I["enqueueToast"].apply(void 0,arguments))}}};t["a"]=Object(_["connect"])($,ee)(X)},22291:function(e,t,r){"use strict";r.d(t,"a",function(){return N});var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(12);var _=r(21705);var y=r(21712);var O=r(473);var k=r(5);var j=r(22968);var C=r(21832);var E=r(3184);var S=r(60);var w=r(37);var I=r(22201);var T=new k["b"]("user_groups");var N={list:"list",details:"details"};var R={openUserGroupList:h.a.func.isRequired,openModal:h.a.func.isRequired,view:h.a.oneOf(Object(m["values"])(N)),featureSonicUserGroups:h.a.bool,useGlobalNav:h.a.bool};var A={view:N.list,featureSonicUserGroups:false,useGlobalNav:false};var M=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.openCreateEditDialog=r.openCreateEditDialog.bind(r);return r}s()(t,[{key:"openCreateEditDialog",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"maybeRenderDetailsHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===N.details))return null;return v.a.createElement(E["c"],{onClick:this.props.openUserGroupList,className:"p-user_group_header"},v.a.createElement("div",{className:"p-user_group_header__title--clickable"},v.a.createElement(w["b"],{type:"chevron-medium-left",className:"p-user_group_header__back_button"}),T.t("User Groups")))}},{key:"maybeRenderCreationIcon",value:function e(){if(!Object(O["a"])())return null;return v.a.createElement(S["d"],{tip:T.t("Create a user group"),delay:S["a"]},v.a.createElement(E["c"],{onClick:this.openCreateEditDialog,className:"p-user_group_header__create"},v.a.createElement(w["b"],{type:"compose-dm",size:"inherit"})))}},{key:"maybeRenderListHeader",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!(this.props.view===N.list))return null;return v.a.createElement("div",{className:"p-user_group_header"},v.a.createElement("span",{className:"p-user_group_header__title"},T.t("User Groups")),this.maybeRenderCreationIcon())}},{key:"renderCreateEditDialog",value:function e(){return v.a.createElement(I["a"],null)}},{key:"render",value:function e(){if(this.props.useGlobalNav)return null;return v.a.createElement(C["a"],null,this.maybeRenderDetailsHeader(),this.maybeRenderListHeader())}}]);return t}(d["Component"]);M.displayName="UserGroupsFlexpaneHeader";var P=function e(t){return{featureSonicUserGroups:Object(g["isFeatureEnabled"])(t,"feature_sonic_user_groups"),useGlobalNav:Object(j["b"])(t)}};var x=function e(t){return{openModal:function e(){return t(_["openModal"].apply(void 0,arguments))},openUserGroupList:function e(){return t(Object(y["f"])())}}};M.defaultProps=A;t["b"]=Object(f["connect"])(P,x)(M)},22292:function(e,t,r){"use strict";t["a"]=m;t["b"]=b;t["c"]=g;var a=r(1);var n=r.n(a);var i=r(5);var s=r(12);var o=r(22587);var c=r(22588);var l=new i["b"]("user_groups");var u=void 0;var d=void 0;function v(e){if(!Object(s["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;u={hasHandleRequiredWarning:l.t("Please enter a handle for this group."),hasMaxLengthWarning:l.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:o["b"]}),hasSpecialsWarning:l.t("Handles can only contain letters or numbers."),hasPunctuationWarning:l.t("Handles can only contain letters or numbers."),hasLowercaseWarning:l.t("Handles can only be in lowercase."),hasHandleTakenWarning:l.t("This handle is already in use by a member, channel, or another group.")}}function p(e){if(!Object(s["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;d={hasNameRequiredWarning:l.t("Please enter a name for this group."),hasMaxLengthWarning:l.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:c["b"]}),hasNameTakenWarning:l.t("This name is already in use by another group.")}}function h(e,t,r){if(!Object(s["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return"";p(e);var n=Object(c["a"])(e,{value:t,oldValue:r});var i=Object(a["findKey"])(n,function(e){return e});if(i)return d[i];return""}function f(e,t,r){if(!Object(s["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return"";v(e);var n=Object(o["a"])(e,{value:t,oldValue:r});var i=Object(a["findKey"])(n,function(e){return e});if(i)return u[i];return""}function m(e,t){var r=t.name,a=t.handle,n=t.oldName,i=void 0===n?null:n,s=t.oldHandle,o=void 0===s?null:s;var c=h(e,r,i);var l=f(e,a,o);return{nameError:c,handleError:l}}function b(e,t){var r=t.value,a=t.oldValue,n=void 0===a?null:a;var i=f(e,r,n);return{handleError:i}}function g(e,t){var r=t.value,a=t.oldValue,n=void 0===a?null:a;var i=h(e,r,n);return{nameError:i}}var _={};Object.defineProperty(_,"isValidUserGroupName",{get:function e(){return h},set:function e(t){h=t}})},22293:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(12);var _=r(1);var y=r.n(_);var O=r(5);var k=r(907);var j=r(21697);var C=r(195);var E=r(711);var S=r(3179);var w=new O["b"]("user_groups");var I={selectedChannels:m.a.array,getChannelById:m.a.func.isRequired,featureSonicUserGroups:m.a.bool.isRequired,onRef:m.a.func.isRequired};var T={selectedChannels:[]};var N=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={selectedChannels:r.props.selectedChannels,hideList:true};Object(_["bindAll"])(r,["getResultsForChannelsQuery","createSelectItems","onItemAdded","onItemRemoved","createItemTemplate","createTokenTemplate","listItemClass","hideList"]);return r}c()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onGetSelectedDefaultChannels",value:function e(){return this.state.selectedChannels}},{key:"onItemAdded",value:function e(t){var r=this.state.selectedChannels;r.push(t.id);this.setState(function(){return{selectedChannels:r}})}},{key:"onItemRemoved",value:function e(t){var r=Object(_["remove"])(this.state.selectedChannels,function(e){return e===t.id});this.setState(function(){return{selectedChannels:r}})}},{key:"getResultsForChannelsQuery",value:function e(t){var r=this;this.hideList(!t);if(!t)return Promise.resolve({items:this.createSelectItems(this.props.selectedChannels),replace_all_items:true});return Object(S["a"])(t,{channels:{include_archived:false},enterprise_channels:{remote_limit:96},tiered:true}).then(function(e){var t=r.props.selectedChannels;var a=e.map(function(e){var r=Object(k["getDisplayName"])(e.model_ob);if(-1!==t.indexOf(e.model_ob.id))return n()({},e.model_ob,{label:r,preselected:true});return n()({},e.model_ob,{label:r})});return{items:a}})}},{key:"hideList",value:function e(t){this.setState(function(){return{hideList:t}})}},{key:"createSelectItems",value:function e(t){var r=this;return Object(_["map"])(t,function(e){var t=r.props.getChannelById(e);var a=Object(k["getDisplayName"])(t);return n()({},t,{label:a,preselected:true})})}},{key:"createItemTemplate",value:function e(t){return h.a.createElement("div",{className:"margin_left_50"},"#",t.label)}},{key:"createTokenTemplate",value:function e(t){return h.a.createElement("div",{className:"margin_left_50"},"#",t.label)}},{key:"listItemClass",value:function e(){return"display_flex align_items_center"}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=w.t("Default channels");var r=w.t("Group members are added to these channels automatically.");return h.a.createElement(C["a"],{htmlFor:"default_channel_label",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:true},h.a.createElement(E["a"],{items:this.createSelectItems(this.props.selectedChannels),dataPromise:this.getResultsForChannelsQuery,onItemAdded:this.onItemAdded,onItemRemoved:this.onItemRemoved,template:this.createItemTemplate,tokenTemplate:this.createTokenTemplate,listItemClass:this.listItemClass,hideList:this.state.hideList}),h.a.createElement("div",{className:"c-hint"},r))}}]);return t}(p["PureComponent"]);N.displayName="UserGroupDefaultChannelPicker";N.defaultProps=T;var R=function e(t){return{getChannelById:function e(r){return Object(j["getChannelById"])(t,r)},featureSonicUserGroups:Object(g["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};t["a"]=Object(b["connect"])(R)(N)},22313:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(9);var h=r(3);var f=r.n(h);var m=r(5);var b=r(266);var g=r(3241);var _=r(907);var y=r(22254);var O=r(3208);var k=r(3214);var j=new m["b"]("do_not_disturb");var C={snoozeNotifications:f.a.func.isRequired,currentChannel:f.a.object,featureSonicDnd:f.a.bool,menuProps:f.a.object};var E={currentChannel:{},featureSonicDnd:false,menuProps:{}};var S=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderSettingsMenuItem",value:function e(){var t=this.props,r=t.currentChannel,a=t.featureSonicDnd;if(!a)return null;if(!r.id||Object(_["isIm"])(r))return null;var n=v.a.createElement(g["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=j.rt("Settings for {name} \u2026",{name:v.a.createElement("strong",null,n)});return v.a.createElement(b["b"],{label:i,onSelected:function e(){return Object(k["a"])(r.id)}})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.menuProps,n=r.featureSonicDnd;if(!n)return null;return v.a.createElement(b["e"],a,v.a.createElement("hr",null),v.a.createElement("span",{className:"p-dnd_menu__disabled_header"},j.t("Snooze notifications:")),v.a.createElement(b["b"],{label:j.t("20 minutes"),onSelected:function e(){return t.props.snoozeNotifications({duration:20})},"data-qa":"snooze_btn_20"}),v.a.createElement(b["b"],{label:j.t("1 hour"),onSelected:function e(){return t.props.snoozeNotifications({duration:60})},"data-qa":"snooze_btn_60"}),v.a.createElement(b["b"],{label:j.t("2 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:120})},"data-qa":"snooze_btn_120"}),v.a.createElement(b["b"],{label:j.t("4 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:240})},"data-qa":"snooze_btn_240"}),v.a.createElement(b["b"],{label:j.t("8 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:480})},"data-qa":"snooze_btn_480"}),v.a.createElement(b["b"],{label:j.t("24 hours"),onSelected:function e(){return t.props.snoozeNotifications({duration:1440})},"data-qa":"snooze_btn_1440"}),v.a.createElement(b["c"],null),v.a.createElement(b["b"],{label:j.t("Do Not Disturb schedule \u2026"),onSelected:function e(){return Object(O["a"])("notifications","#prefs_dnd")}}),v.a.createElement(b["c"],null),this.renderSettingsMenuItem(),v.a.createElement(b["b"],{label:j.t("Your notification preferences \u2026"),onSelected:function e(){return Object(O["a"])("notifications")}}))}}]);return t}(d["PureComponent"]);S.displayName="DndDisabledMenu";S.defaultProps=E;var w={snoozeNotifications:y["c"]};t["a"]=Object(p["connect"])(null,w)(S)},22314:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(3);var b=r.n(m);var g=r(5);var _=r(975);var y=r(54);var O=r(12);var k=r(266);var j=r(899);var C=r(3241);var E=r(907);var S=r(128);var w=r(84);var I=r(22315);var T=r(22254);var N=r(3208);var R=r(3214);var A=r(20175);var M=r.n(A);var P=new g["b"]("do_not_disturb");var x={inDndBySnooze:b.a.bool.isRequired,snoozeNotifications:b.a.func.isRequired,endDndSnooze:b.a.func.isRequired,endDndSchedule:b.a.func.isRequired,snoozeEndTs:b.a.number,dndEndTs:b.a.number,do24hrTime:b.a.bool,currentChannel:b.a.object,featureSonicDnd:b.a.bool,menuProps:b.a.object};var D={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},featureSonicDnd:false,menuProps:{}};var F=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);return r}c()(t,[{key:"renderDndMenuHeader",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureSonicDnd;if(!s)return null;var o=Object(S["a"])(n,{do24hrTime:i});var c=P.rt("Scheduled until {time}",{time:o});var l=h.a.createElement("div",{className:"p-dnd_menu__schedule_header"},h.a.createElement("div",{className:"p-dnd_menu__header_status"},h.a.createElement("div",null,h.a.createElement("strong",null,P.t("Do Not Disturb ON"))),h.a.createElement("div",null,c)));var u=Object(w["a"])().unix();var d=P.rt("Notifications snoozed for {duration}",{duration:Object(I["a"])(a,{currentTime:u})});var v=h.a.createElement("div",{className:"p-dnd_menu__snooze_header"},h.a.createElement("div",{className:"p-dnd_menu__header_status"},h.a.createElement("div",null,h.a.createElement("strong",null,P.t("Do Not Disturb ON"))),h.a.createElement("div",null,d)));return r?v:l}},{key:"renderSubmenu",value:function e(t){var r=this;var a=this.props.featureSonicDnd;if(!a)return null;return h.a.createElement(k["e"],n()({},t,{width:140}),h.a.createElement(k["b"],{label:P.t("20 minutes"),onSelected:function e(){return r.props.snoozeNotifications({duration:20})}}),h.a.createElement(k["b"],{label:P.t("1 hour"),onSelected:function e(){return r.props.snoozeNotifications({duration:60})}}),h.a.createElement(k["b"],{label:P.t("2 hours"),onSelected:function e(){return r.props.snoozeNotifications({duration:120})}}),h.a.createElement(k["b"],{label:P.t("4 hours"),onSelected:function e(){return r.props.snoozeNotifications({duration:240})}}),h.a.createElement(k["b"],{label:P.t("8 hours"),onSelected:function e(){return r.props.snoozeNotifications({duration:480})}}),h.a.createElement(k["b"],{label:P.t("24 hours"),onSelected:function e(){return r.props.snoozeNotifications({duration:1440})}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.featureSonicDnd;if(!a)return null;var n=h.a.createElement(k["b"],{label:P.t("Adjust schedule \u2026"),onSelected:function e(){return Object(N["a"])("notifications","#prefs_dnd")}});var i=h.a.createElement(j["a"],{label:P.t("Adjust time"),renderSubmenu:this.renderSubmenu});return r?i:n}},{key:"renderSettingsMenuItem",value:function e(){var t=this.props,r=t.currentChannel,a=t.featureSonicDnd;if(!a)return null;if(!r.id||Object(E["isIm"])(r))return null;var n=h.a.createElement(C["a"],{channelId:r.id,iconProps:{inherit:true,align:"baseline"},inline:true});var i=P.rt("Settings for {name} \u2026",{name:h.a.createElement("strong",null,n)});return h.a.createElement(k["b"],{label:i,onSelected:function e(){return Object(R["a"])(r.id)}})}},{key:"render",value:function e(){var t=this.props,r=t.inDndBySnooze,a=t.menuProps,i=t.featureSonicDnd;if(!i)return null;return h.a.createElement("div",null,this.renderDndMenuHeader(),h.a.createElement(k["e"],n()({},a,{menuClassNames:"p-dnd_menu"}),h.a.createElement(k["b"],{label:P.t("Turn OFF"),onSelected:r?this.props.endDndSnooze:this.props.endDndSchedule}),this.renderAdjustMenuItem(),h.a.createElement(k["c"],null),this.renderSettingsMenuItem(),h.a.createElement(k["b"],{label:P.t("Your notification preferences \u2026"),onSelected:function e(){return Object(N["a"])("notifications")}})))}}]);return t}(p["PureComponent"]);F.displayName="DndEnabledMenu";F.defaultProps=D;var L=function e(t){var r=Object(O["getCurrentUserId"])(t);var a=Object(_["getDndScheduleByMemberId"])(t,r),n=a.nextDndEndTs;var i=Object(_["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(y["getUserPref"])(t,"time24")}};var B={snoozeNotifications:T["c"],endDndSnooze:T["b"],endDndSchedule:T["a"]};t["a"]=Object(f["connect"])(L,B)(F)},22315:function(e,t,r){"use strict";var a=r(84);var n=r(64);var i=r(387);var s=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.currentTime,o=void 0===s?Object(a["a"])().unix():s;var c=Object(n["a"])(o);var l=Object(n["a"])(t);var u=Math.ceil(Object(i["a"])(l,c));if(u<60){var d=a["a"].localeData().timeAgo().compact.min45.replace(/%d/,u);return d}if(u>=60&&u%60===0){var v=u/60;var p=a["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,v);return p}var h=u%60;var f=(u-h)/60;var m=a["a"].localeData().timeAgo().compact.min45.replace(/%d/,h);var b=a["a"].localeData().timeAgo().compact.hrs24.replace(/%d/,f);var g=b+" "+m;return g};t["a"]=s},22316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(42);var c=r(21700);var l=r(21850);var u=r(22317);var d=r(22318);var v=r(22319);var p=0;function h(e){var t=e.data,r=e.method,a=e.args;var i=n()({},t,{args:null});var s=false===r.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,r,a&&a.channel);var o=false===r.startsWith("users.")&&false===Object(d["a"])(r)&&TS.members.legacyEnsureMembersInDataArePresent(i,r);var c=false===r.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+r);var l=TS.redux.getState();var u=false===Object(v["a"])(l,r)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,r);return TS.ensureFullyBooted().then(function(){return u}).then(function(){return Promise.join(s,o,c)}).catch(TS.error)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,r=void 0!==t&&t;return function(e,t,a,i){var s=!TS.client&&!i;var o=Object(c["c"])(e,t,a,s,r).tap(Object(u["a"])(e)&&h).catch(function(e){e.args=n()({_attempts:e.attempts},e.args);throw e});return p?Promise.delay(p).then(function(){return o}):o}}function m(){return Object(l["c"])(TS.redux.getState())}function b(){return m().isPaused()}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];m().awaitEmptyQ().then(e)}function _(e){p=e}var y=f();var O=f({expedited:true});Object(o["a"])("interop.api",{call:y,callExpedited:O,callImmediately:O,getQueue:m,isPaused:b,callFuncWhenApiQisEmpty:g,debugSetResponseDelay:_})},22317:function(e,t,r){"use strict";t["a"]=n;var a=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","enterprise.channels.search","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function n(e){return a.includes(e)}var i=a},22318:function(e,t,r){"use strict";t["a"]=n;var a=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function n(e){return a.includes(e)}var i=a},22319:function(e,t,r){"use strict";t["a"]=i;var a=r(12);var n=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function i(e,t){return Object(a["isFeatureEnabled"])(e,"feature_lazy_channels")&&n.includes(t)}var s=n},22320:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(3284);var i=r(21728);var s=r(21963);var o=r(21859);var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(a["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isAppSpaceEnabled:function e(){return Object(n["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},openAppProfileCard:function e(t,r,a,n,i){return TS.redux.dispatch(Object(s["a"])({serviceId:t,homeWorkspaceId:r,memberId:a,coordinates:c(n),popoverProps:i}))},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(i["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},runAppAction:o["b"]})},22321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21730);Object(a["a"])("interop.automount.mountAllWithStore",n["b"])},22322:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(21962);var s=r(42);var o=r(3275);Object(s["a"])("interop.bots",n()({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(o["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},22323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21711);var n=r(22961);var i=r(3270);var s=r(21745);var o=r(21820);var c=r(1036);var l=r(907);var u=r(42);var d=r(21761);function v(e,t){var r=TS.redux.getState();var n=Object(a["e"])(r,e,t);return TS.redux.channels.interop.maybeWrapEntity(n)}function p(e,t){if(!e)return null;var r=v(e,t);if(r&&r.is_channel)return r;return null}function h(e,t){if(!e)return null;var r=v(e,t);if(r&&r.is_group&&!r.is_mpim)return r;return null}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(r&&r.is_group&&r.is_mpim)return r;return null}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var r=TS.redux.channels.getEntityById(e,t);if(Object(l["isIm"])(r))return r;return null}function b(){return TS.redux.dispatch(Object(s["o"])())}function g(e,t){return TS.redux.dispatch(Object(s["F"])({channel:e,isBulkUpsert:t}))}function _(e){return TS.redux.dispatch(Object(c["c"])(e))}function y(e){return TS.redux.dispatch(Object(c["f"])(e))}function O(e){return TS.redux.dispatch(Object(c["e"])(e))}function k(e){return TS.redux.dispatch(Object(c["d"])(e))}function j(e){var t=TS.redux.getState();return Object(a["t"])(t,e)}function C(e,t){return TS.redux.dispatch(Object(c["B"])({channelId:e,topic:t}))}function E(e){var t=TS.redux.getState();var r=Object(i["getTeamId"])(t);Object(n["a"])(r,e)}Object(u["a"])("interop.channels",{disconnectChannel:c["b"],getPublicChannelById:p,getEntityById:v,getGeneralChannel:b,getGroupById:h,getImById:m,getMpimById:f,getNeedsCreatedMessageState:function e(t){return Object(o["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(l["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationByMembers:Object(u["b"])(c["r"]),submitChannelPurpose:c["A"],submitChannelTopic:C,submitCreate:c["D"],submitDeclineSharedChannelInvite:c["E"],submitLeave:c["J"],joinConversationApi:s["q"],closeChannelApi:s["i"],updateOrgAccessForChannel:s["E"],upsertChannelSharesLocally:s["G"],upsertChannel:g,getChannelPinnedItemByMessage:l["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:l["channelTopicExceedsLimit"],getChannelTopicError:l["getChannelTopicError"],updateChannelLastTrigger:d["updateChannelLastTrigger"],fetchAndUpsertChannelsById:_,fetchAndUpsertChannelsWithQuery:y,fetchAndUpsertChannelsFromAPI:k,fetchAndUpsertChannelsFromFlannel:O,hasChannelWithId:j,markObjectsAsFresh:E,shouldStopChannelMentions:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(r))}})},22324:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(3278);var n=r(42);function i(){var e=TS.redux.getState();return Object(a["getEnterpriseOrgURL"])(e)}Object(n["a"])("interop.enterprise",{getOrgURL:i,getPotentiallyUnknownEnterprise:function e(){return Object(a["getPotentiallyUnknownEnterprise"])(TS.redux.getState())}})},22325:function(e,t,r){"use strict";var a=r(22326);t["a"]=a["a"]},22326:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(412);var g=r(5);var _=r(3111);var y=r(22922);var O=r(22327);var k=r(22331);var j=r(22256);var C=r(20157);var E=r.n(C);var S=new g["b"]("enterprise_dashboard");var w=333;var I={orgName:v.a.string.isRequired,orgApps:v.a.array,orgAppsApiCursor:v.a.string,orgAppsApiTotal:v.a.number,orgAppsLoading:v.a.bool,orgAppsSortDir:v.a.string,orgAppsSortBy:v.a.string,searchQuery:v.a.string,featureEntAppManagementRestriction:v.a.bool};var T={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=r.onSearchInputChange.bind(r);r.onSearchInputChangeDelayed=Object(f["debounce"])(r.onSearchInputChangeDelayed,w,{trailing:true}).bind(r);r.generateAppsCSV=r.generateAppsCSV.bind(r);return r}s()(t,[{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.onSearchInputChangeDelayed(r)}},{key:"onSearchInputChangeDelayed",value:function e(t){var r=null!==t&&void 0!==t&&t.length?t:null;Object(b["b"])(Object(b["a"])().apps.setOrgAppsSearchQuery(r));Object(b["b"])(Object(b["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t={orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"formatTitleString",value:function e(t){if(null!==t&&!isNaN(t)&&t>0)return S.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return S.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.orgAppsSortDir,a=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(a){i.sort_prefix=a;r&&(i.sort_dir=r)}Object(b["b"])(Object(b["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var r=S.t("Installed Apps");if(!t)return null;return h.a.createElement(O["a"],{title:r,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=S.t("Filter by name...");return h.a.createElement("div",null,h.a.createElement(y["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,size:"small"}))}},{key:"render",value:function e(){var t=this.props,r=t.orgAppsApiTotal,a=t.orgAppsLoading,n=t.searchQuery,i=t.orgAppsApiCursor;var s=[this.renderExportButton(),this.renderAppFilterInput()];var o=this.getOrgAppsListProps();if(0===r&&!n&&!a&&i)return h.a.createElement("div",{className:"p-app_management_installed_apps"},h.a.createElement(_["a"],{title:this.formatTitleString(r),actions:s}),h.a.createElement(k["a"],{orgName:this.props.orgName}));return h.a.createElement("div",{className:"p-app_management_installed_apps"},h.a.createElement(_["a"],{title:this.formatTitleString(r),actions:s}),h.a.createElement("div",{className:"c-app_management_indent_half"},h.a.createElement(j["a"],o)))}}]);return t}(p["PureComponent"]);N.displayName="AppManagementInstalledApps";N.defaultProps=T;t["a"]=N},22327:function(e,t,r){"use strict";var a=r(22328);t["a"]=a["a"]},22328:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(22255);var _=new b["b"]("enterprise_dashboard");var y={title:h.a.string.isRequired,onDownloadClick:h.a.func,buttonSize:h.a.string};var O={onDownloadClick:f["noop"],buttonSize:"small"};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var r=_.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var a=_.t("Includes everything");var n=_.t("Generate CSV");return v.a.createElement(g["a"],{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:a,contextButtonLabel:n,contextCaption:r,buttonSize:t})}}]);return t}(d["PureComponent"]);k.displayName="AppManagementCSVPopup";k.defaultProps=O;t["a"]=k},22329:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(3184);var _=r(37);var y=r(20177);var O=r.n(y);var k=r(22330);var j=new b["b"]("enterprise_dashboard");var C={title:v.a.string.isRequired,subtext:v.a.string.isRequired,contextButtonLabel:v.a.string.isRequired,onDownloadClick:v.a.func,contextCaption:v.a.string,buttonSize:v.a.string};var E={onDownloadClick:f["noop"],contextCaption:"",buttonSize:"medium"};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onButtonClick=r.onButtonClick.bind(r);r.onDownloadButtonClick=r.onDownloadButtonClick.bind(r);r.onContextBlur=r.onContextBlur.bind(r);r.state={contextIsOpen:false};return r}s()(t,[{key:"onButtonClick",value:function e(){var t=this;this.setState(function(){return{contextIsOpen:!t.state.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,r){r.contains(t.target)||this.state.contextIsOpen&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,r=t.title,a=t.subtext,n=t.contextButtonLabel,i=t.contextCaption,s=t.buttonSize;var o=j.t("Export CSV");return h.a.createElement("div",null,h.a.createElement(g["d"],{type:"outline",onClick:this.onButtonClick,size:s,className:"p-export_csv_button"},o,h.a.createElement(_["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),h.a.createElement(k["a"],{isOpen:this.state.contextIsOpen,title:r,subtext:a,contextButtonLabel:n,onDownloadClick:this.onDownloadButtonClick,contextCaption:i,onContextBlur:this.onContextBlur}))}}]);return t}(p["PureComponent"]);S.displayName="ExportCSVButton";S.defaultProps=E;t["a"]=S},22330:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3184);var y=r(20177);var O=r.n(y);var k={isOpen:v.a.bool.isRequired,title:v.a.string.isRequired,subtext:v.a.string.isRequired,contextButtonLabel:v.a.string.isRequired,onDownloadClick:v.a.func,contextCaption:v.a.string,onContextBlur:v.a.func};var j={onDownloadClick:b["noop"],contextCaption:"",onContextBlur:b["noop"]};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleOnContextUnfocus=r.handleOnContextUnfocus.bind(r);return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.isOpen,n=r.title,i=r.subtext,s=r.contextButtonLabel,o=r.onDownloadClick,c=r.contextCaption;var l=m()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!a});return h.a.createElement("div",{className:l,ref:function e(r){t.node=r}},h.a.createElement("div",{className:"p-export_csv_context_subtext"},h.a.createElement("h4",{className:"black"},n),h.a.createElement("p",{className:"break_word"},i),h.a.createElement(_["d"],{onClick:o,className:"p-export_csv_context_button"},s)),c&&h.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(p["PureComponent"]);C.displayName="ExportContext";C.defaultProps=j;t["a"]=C},22331:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=new f["b"]("enterprise_dashboard");var b={orgName:h.a.string};var g={orgName:""};var _=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=Object(f["l"])(this.props.orgName);var a=m.t("{orgName} has no apps installed.",{orgName:r});return v.a.createElement("div",{className:"p-app_management_empty_state_container"},v.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),v.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(d["PureComponent"]);_.displayName="InstalledAppsEmptyState";_.defaultProps=g;t["a"]=_},22332:function(e,t,r){"use strict";var a=r(22333);t["a"]=a["a"]},22333:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(8);var h=r.n(p);var f=r(3111);var m=r(3184);var b=r(37);var g=r(3164);var _=r(22922);var y=r(22334);var O=r(22256);var k=r(20157);var j=r.n(k);var C="desc";var E=[{id:"name",value:"Name",sortable:true},{id:"restricted_on",value:"Restricted On",sortable:true,defaultSortType:C},{id:"restricted_by",value:"Restricted By"},{id:"exceptions",value:"Exceptions"},{id:"existing",value:"Existing Installations"}];function S(e){var t=new Date(e||parseInt(Math.random()*(new Date).getTime(),10));return t.toDateString()}var w={items:[{value:function e(t){var r=void 0;t.profile?r=t.profile.image_48:t.icon&&(r=t.icon.image_34);if(r)return v.a.createElement("span",null,v.a.createElement("img",{src:r,style:{width:"24px",height:"24px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),v.a.createElement("b",null,t.name));return v.a.createElement("b",null,t.name)}},{value:function e(t){return S(1e3*t.updated)}},{value:function e(t){return t.name}},{value:function e(){var t=parseInt(10*Math.random(),10);var r=void 0;r=0===t?"None":t+" "+(1===t?"exception":"exceptions");return r}},{value:function e(){var t=parseInt(1024*Math.random(),10);var r=1===t?"workspace":"workspaces";return t+" "+r}}]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onIconClick=r.onIconClick.bind(r);r.onCoachmarkSkip=r.onCoachmarkSkip.bind(r);r.onCoachmarkContinue=r.onCoachmarkContinue.bind(r);r.onSearchInputChange=r.onSearchInputChange.bind(r);r.state={showCoachmark:true,isSearching:false};return r}s()(t,[{key:"onIconClick",value:function e(){this.setState(function(){return{showCoachmark:true}})}},{key:"onCoachmarkSkip",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onCoachmarkContinue",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onSearchInputChange",value:function e(t){var r={searchQuery:t.target.value};this.setState(function(){return r})}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir,n=t.searchQuery;var i={headerData:E,rowTemplate:w,sortBy:r,sortDir:a,searchQuery:n};return i}},{key:"renderExportButton",value:function e(){return v.a.createElement(y["a"],null)}},{key:"renderRestrictionButton",value:function e(){return v.a.createElement(m["d"],{size:"small",type:"outline"},"Export")}},{key:"renderAppFilterInput",value:function e(){return v.a.createElement(_["a"],{placeholder:"Filter by name...",icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",size:"small"})}},{key:"renderRestrictedTitle",value:function e(){var t=h()("p-app_management_restricted_apps__info_icon","margin_left_50",{"p-app_management_restricted_apps__info_icon--active":this.state.showCoachmark});return v.a.createElement("div",{className:"display_flex align_items_center"},v.a.createElement("span",null,"Restricted Apps"),v.a.createElement(g["a"],{hasCloseButton:true,content:"By restricting an app for the organization, members will no longer be allowed to install them on any workspace. Existing installations will not be automatically removed. To learn more about restricted apps, visit out help center.",shouldShow:this.state.showCoachmark,position:"right",onSkip:this.onCoachmarkSkip,hasSkipLink:false,onContinue:this.onCoachmarkContinue},v.a.createElement(b["a"],{type:"question_circle",onClick:this.onIconClick,className:t})))}},{key:"render",value:function e(){var t=[this.renderExportButton(),this.renderRestrictionButton(),this.renderAppFilterInput()];var r=this.getOrgAppsListProps();return v.a.createElement("div",{className:"p-app_management_restricted_apps"},v.a.createElement(f["a"],{title:this.renderRestrictedTitle(),actions:t}),v.a.createElement("div",{className:"c-app_management_indent_half"},v.a.createElement(O["a"],r)))}}]);return t}(d["PureComponent"]);I.displayName="AppManagementRestrictedApps";t["a"]=I},22334:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(22255);var h={};var f=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={};return r}s()(t,[{key:"render",value:function e(){var t="This data set is large, so your CSV will take some time to generate. We'll send it to you in Slack as soon as it's ready.";return v.a.createElement(p["a"],{title:"Restricted Apps",subtext:"Includes everything",contextButtonLabel:"Generate CSV",contextCaption:t,buttonSize:"small"})}}]);return t}(d["PureComponent"]);f.displayName="RestrictedAppsExportCSV";t["a"]=f},22335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(22336);Object(l["a"])("interop.appProfile",{render:function e(t,r,a){if(!t)throw new Error("appProfile render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},22336:function(e,t,r){"use strict";var a=r(22337);t["a"]=a["a"]},22337:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(412);var _=r(3096);var y=r(22338);var O=r(22341);var k=r(22344);var j=r(20178);var C=r.n(j);var E=new b["b"]("enterprise_dashboard");var S={appName:v.a.string.isRequired,appId:v.a.string,appImageSrc:v.a.string.isRequired,appByline:v.a.string,appScope:v.a.oneOfType([v.a.object,v.a.string,v.a.array]),userIsCreationTeamMember:v.a.bool,headerActions:v.a.array,isOpen:v.a.bool,isDirectoryPublished:v.a.bool,isSlackIntegration:v.a.bool,orgName:v.a.string,workspacesByApp:v.a.array,workspacesByAppApiCursor:v.a.string,workspacesByAppApiTotal:v.a.number,workspacesByAppLoading:v.a.bool,workspacesByAppSortBy:v.a.string,workspacesByAppSortDir:v.a.string,searchQuery:v.a.string,appsDetailViewSelectedTab:v.a.string,appsDetailViewWorkspaceContext:v.a.string,appsDetailViewWorkspaceDomain:v.a.string,currentUserTeams:v.a.array,rootURL:v.a.string.isRequired,isXoxaApp:v.a.bool,isDistributedApp:v.a.bool,orgTeams:v.a.array};var w={appId:"",appByline:"",appScope:[],userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isSlackIntegration:false,orgName:"",workspacesByApp:[],workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.navigateToProfileTab=r.navigateToProfileTab.bind(r);r.navigateToAppDirectory=r.navigateToAppDirectory.bind(r);return r}s()(t,[{key:"navigateToProfileTab",value:function e(t){return Object(g["b"])(Object(g["a"])().router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,r=t.appsDetailViewWorkspaceContext,a=t.appsDetailViewWorkspaceDomain,n=t.userIsCreationTeamMember,i=t.currentUserTeams,s=t.rootURL,o=t.orgTeams;var c=void 0;if(r&&i&&Object(f["includes"])(i,r)){var l="https://"+(a||"my")+"."+s.replace(/(http:\/\/|https:\/\/)/,"");c=l+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(n)c=s+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(f["find"])(o,function(e){return e.id===i[0]});c="https://"+u.domain+"."+s.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else c=s+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(c,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t={orgName:this.props.orgName,appId:this.props.appId,workspacesByApp:this.props.workspacesByApp,workspacesByAppApiCursor:this.props.workspacesByAppApiCursor,workspacesByAppApiTotal:this.props.workspacesByAppApiTotal,workspacesByAppLoading:this.props.workspacesByAppLoading,workspacesByAppSortDir:this.props.workspacesByAppSortDir,workspacesByAppSortBy:this.props.workspacesByAppSortBy,searchQuery:this.props.searchQuery};return h.a.createElement(O["a"],t)}},{key:"renderPermissionsContent",value:function e(){return h.a.createElement(k["a"],{permissionsItems:this.props.appScope,isDirectoryPublished:this.props.isDirectoryPublished,isXoxaApp:this.props.isXoxaApp,appId:this.props.appId})}},{key:"render",value:function e(){var t=this.props,r=t.isDistributedApp,a=t.userIsCreationTeamMember,n=t.currentUserTeams,i=t.isSlackIntegration;var s=r&&n&&n.length||a;var o=[{title:E.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];i||o.push({title:E.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});s&&o.push({title:E.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var c={appName:this.props.appName,appImageSrc:this.props.appImageSrc,appByline:this.props.appByline,headerActions:this.props.headerActions,isOpen:this.props.isOpen};return h.a.createElement("div",{className:"p-app_profile"},h.a.createElement(y["a"],c),h.a.createElement(_["a"],{tabs:o,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(p["PureComponent"]);I.displayName="AppProfile";I.defaultProps=w;t["a"]=I},22338:function(e,t,r){"use strict";var a=r(22339);t["a"]=a["a"]},22339:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(412);var g=r(37);var _=r(22340);var y=r(20191);var O=r.n(y);var k={appName:v.a.string.isRequired,appImageSrc:v.a.string.isRequired,appByline:v.a.string,headerActions:v.a.array};var j={appByline:"",headerActions:[]};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onBackClick=r.onBackClick.bind(r);return r}s()(t,[{key:"onBackClick",value:function e(){Object(b["b"])(Object(b["a"])().router.navigateTo("/organization/apps"));Object(b["b"])(Object(b["a"])().apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(f["map"])(t,function(e,t){return h.a.createElement(_["a"],{key:t,action:e})});return r}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.appName,n=r.appImageSrc,i=r.appByline;return h.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},h.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},h.a.createElement(g["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),h.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:n,alt:a}),h.a.createElement("div",{className:"display_flex flex_direction_column"},h.a.createElement("h3",{className:"black"},a),h.a.createElement("span",{className:"p-app_profile_header__app_byline sk_dark_grey"},i))),h.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(p["PureComponent"]);C.displayName="AppProfileHeader";C.defaultProps=j;t["a"]=C},22340:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={action:v.a.node.isRequired};var m=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(p["PureComponent"]);m.displayName="AppProfileHeaderActionItem";t["a"]=m},22341:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(3111);var g=r(22922);var _=r(5);var y=r(412);var O=r(22342);var k=r(22343);var j=new _["b"]("enterprise_dashboard");var C=333;var E={orgName:v.a.string,appId:v.a.string,workspacesByApp:v.a.array,workspacesByAppApiCursor:v.a.string,workspacesByAppApiTotal:v.a.number,workspacesByAppLoading:v.a.bool,workspacesByAppSortBy:v.a.string,workspacesByAppSortDir:v.a.string,searchQuery:v.a.string};var S={orgName:"",appId:null,workspacesByApp:[],workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:""};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=r.onSearchInputChange.bind(r);r.onSearchInputChangeDelayed=Object(f["debounce"])(r.onSearchInputChangeDelayed,C,{trailing:true}).bind(r);r.generateAppsCSV=r.generateAppsCSV.bind(r);return r}s()(t,[{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.onSearchInputChangeDelayed(r)}},{key:"onSearchInputChangeDelayed",value:function e(t){var r=null!==t&&void 0!==t&&t.length?t:null;Object(y["b"])(Object(y["a"])().apps.setWorkspacesByAppSearchQuery(r));Object(y["b"])(Object(y["a"])().apps.resetWorkspacesByAppApiCursor())}},{key:"getWorkspacesByAppListProps",value:function e(){var t={appId:this.props.appId,workspacesByApp:this.props.workspacesByApp,workspacesByAppApiCursor:this.props.workspacesByAppApiCursor,workspacesByAppApiTotal:this.props.workspacesByAppApiTotal,workspacesByAppLoading:this.props.workspacesByAppLoading,searchQuery:this.props.searchQuery};return t}},{key:"generateAppsCSV",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppSortBy,n=t.workspacesByAppSortDir,i=t.appId;var s={type:"teams_by_app",app_id:i};r&&(s.query=r);if(a){s.sort_prefix=a;n&&(s.sort_dir=n)}Object(y["b"])(Object(y["a"])().apps.generateAppsCSVForSlackbotDM(s))}},{key:"renderAppFilterInput",value:function e(){var t=this.props,r=t.searchQuery,a=t.workspacesByAppLoading;var n=j.t("Filter by name...");var i=!!(r&&a);return h.a.createElement(g["a"],{placeholder:n,icon:"search",autoFocus:false,isLoading:i,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var r=this.props,a=r.orgName,n=r.searchQuery,i=r.workspacesByAppApiTotal,s=r.workspacesByAppLoading,o=r.workspacesByAppApiCursor;var c=this.getWorkspacesByAppListProps();var l=null===i||isNaN(i)?null:parseInt(i,10);var u=j.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:l});if(0===i&&!n&&!s&&o)return h.a.createElement("div",null,h.a.createElement(b["a"],{title:u,actions:t}),h.a.createElement("div",{className:"c-app_management_indent_half"},h.a.createElement(k["a"],{orgName:a})));return h.a.createElement("div",null,h.a.createElement(b["a"],{title:u,actions:t}),h.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspacess_by_app_list"},h.a.createElement(O["a"],c)))}}]);return t}(p["PureComponent"]);w.displayName="AppProfileInstallations";w.defaultProps=S;t["a"]=w},22342:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(21830);var _=r(412);var y=new b["b"]("enterprise_dashboard");var O={appId:v.a.string,workspacesByApp:v.a.array,workspacesByAppApiCursor:v.a.string,workspacesByAppApiTotal:v.a.number,workspacesByAppLoading:v.a.bool,headerItemOnClick:v.a.func,pageSize:v.a.number,sortBy:v.a.string,sortDir:v.a.string,searchQuery:v.a.string,rowHeaderItemClassName:v.a.string,rowClassName:v.a.string};var k={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:f["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row"};var j="asc";var C="desc";var E="caret_down";var S="caret_up";var w={};w[j]=E;w[C]=S;var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.onWorkspaceNameClick=r.onWorkspaceNameClick.bind(r);r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_68;return h.a.createElement("button",{className:"p-app_management_table_view_workspace_name",onClick:function e(){return r.onWorkspaceNameClick(t.team_id)}},a&&h.a.createElement("img",{src:a,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),h.a.createElement("span",{className:"bold"},t.team_name))}},{value:function e(t){var r=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return h.a.createElement("div",null,a)}},{value:function e(t){var r=t.installed_by&&t.installed_by.count||1;var a=y.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:r});return h.a.createElement("div",null,a)}}]};r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=y.rt("No workspaces were found matching <b>{query}</b>",{query:r});return h.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"team_name",value:y.t("Workspace"),sortable:true},{id:"installed_on",value:y.t("Installed On"),sortable:true},{id:"installed_by",value:y.t("Installed By"),sortable:true}];return r}s()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.workspacesByApp,a=t.sortBy;var n=this.state.offset;r.length?this.updateRowListItemsData(n):Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppLoading(true));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppSortBy(a))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.workspacesByApp,n=r.workspacesByAppApiTotal;if(n&&a.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onWorkspaceNameClick",value:function e(t){return Object(_["b"])(Object(_["a"])().router.navigateTo("/organization/teams/"+t))}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props,a=r.appId,n=r.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=a&&a!==t.appId;a&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){this.resetWorkspacesByAppsState();Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppLoading(true))}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.workspacesByApp,s=a.workspacesByAppLoading;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s||this.updateRowListItemsData(r)}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.appId,s=n.pageSize,o=n.searchQuery,c=n.workspacesByAppApiCursor;if(!i)return;var l={limit:s,app:i};r&&(l.sort=r);a&&(l.sort_dir=a);null!==o&&void 0!==o&&Object(f["trim"])(o).length&&(l.query=o);c&&(l.cursor=c);Object(_["b"])(Object(_["a"])().apps.getWorkspacesByApp(l))}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==j?j:C;Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===j?C:j:C;Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppSortDir(o));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppSortBy(s))}var c={sortBy:s,sortDir:o};this.setState(function(){return c},function(){r.resetWorkspacesByAppsState();e&&e(t);Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppLoading(true))})}},{key:"resetWorkspacesByAppsState",value:function e(){Object(_["b"])(Object(_["a"])().apps.setWorkspacesByApp([]));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppApiCursor(null));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppLoading(false));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppApiTotal(null))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=1;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var c={height:o+"px"};this.setState(c)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||j;var o=w[s];if(!n||n!==t)return o;var c=void 0;c=i?i===j?E:S:w[s];return c}},{key:"resetWorkspacesByAppState",value:function e(){Object(_["b"])(Object(_["a"])().apps.setWorkspacesByApp([]));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppApiCursor(null));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppApiTotal(null));Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppLoading(false))}},{key:"resetAPICursorMark",value:function e(){Object(_["b"])(Object(_["a"])().apps.setWorkspacesByAppApiCursor(null))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=[];var n=t||0;var i=0;var s=this.props,o=s.workspacesByApp,c=s.workspacesByAppLoading;var l={rowListItems:a};function u(){i+=1;return"row_"+n+"_item"+i}function d(e,t){var r={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});n+=1;return r}if(o&&o.length)o.forEach(function(e){a.push(d(e,r.rowTemplate))});else if(!c){var v=this.props.searchQuery;if(null===v||void 0===v||!v.length){this.setState(l);return}var p=[{searchQuery:v}];p.forEach(function(e){a.push(d(e,r.emptyRowTemplate))})}this.setState(l)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,n=r.sortDir,i=r.height,s=r.rowListItems,o=r.offset;var c=this.props,l=c.rowHeaderItemClassName,u=c.rowClassName,d=c.workspacesByAppLoading;var v=this.makeHeaders(this.headerData);return h.a.createElement("div",null,h.a.createElement(g["a"],{rows:s,headers:v,rowHeaderItemClassName:l,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:n,height:i,isLoading:d,newQuery:!o,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(p["PureComponent"]);I.displayName="WorkspacesByAppList";I.defaultProps=k;t["a"]=I},22343:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(20178);var b=r.n(m);var g=new f["b"]("enterprise_dashboard");var _={orgName:h.a.string};var y={orgName:""};var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.orgName;var r=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=g.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return v.a.createElement("div",{className:"p-app_profile_empty_state_container"},v.a.createElement("img",{src:r,alt:"",className:"auto_width margin_bottom_100"}),v.a.createElement("h3",{className:"black margin_bottom_75"},a))}}]);return t}(d["PureComponent"]);O.displayName="AppProfileInstallationsEmptyState";O.defaultProps=y;t["a"]=O},22344:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(2127);var b=r(22345);var g=new f["b"]("enterprise_dashboard");var _={permissionsItems:h.a.array,isDirectoryPublished:h.a.bool,isXoxaApp:h.a.bool,appId:h.a.string};var y={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={permissions:[],channelScopePermissions:[]};r.formatPermissions=r.formatPermissions.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var r=0;function a(){r+=1;return"scope_"+r+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=a();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var r=this.state,a=r.channelScopePermissions,n=r.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return v.a.createElement(b["a"],null);var i=void 0;i=t?g.t("On workspaces, this app will be able to:"):g.t("This app will be able to:");var s=g.t("When added to a channel, this app will also be able to:");if(a.length)return v.a.createElement("div",{className:"p-app_profile_permission"},v.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},i),v.a.createElement(m["a"],{scopeInfo:n,key:"permissions"}),v.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},s),v.a.createElement(m["a"],{scopeInfo:a,key:"channelScopePermissions"}));return v.a.createElement("div",{className:"p-app_profile_permission"},v.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},i),v.a.createElement(m["a"],{scopeInfo:n}))}}]);return t}(d["PureComponent"]);O.displayName="AppProfilePermissions";O.defaultProps=y;t["a"]=O},22345:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(5);var s=new i["b"]("enterprise_dashboard");var o=function e(){var t=cdn_url+"/7bba7/img/enterprise/empty_apps_state_restricted.png";var r=s.t("Permissions can\u2019t be shown for this app");var a=s.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=s.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},a),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};o.displayName="AppProfilePermissionsEmptyState";t["a"]=o},22346:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(22347);Object(l["a"])("interop.teamApps",{render:function e(t,r,a){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},22347:function(e,t,r){"use strict";var a=r(22348);t["a"]=a["a"]},22348:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(412);var _=r(22922);var y=r(3184);var O=r(60);var k=r(37);var j=r(22257);var C=r(22351);var E=r(22352);var S=new b["b"]("enterprise_dashboard");var w={teamId:h.a.string.isRequired,teamApps:h.a.array,teamAppsApiCursor:h.a.string,teamAppsApiTotal:h.a.number,teamAppsCount:h.a.number,teamAppsLoading:h.a.bool,teamAppsSearchQuery:h.a.string,teamAppsTeamUrl:h.a.string,teamAppsSortBy:h.a.string,teamAppsSortDir:h.a.string};var I={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var T=333;var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSearchInputChange=Object(f["debounce"])(r.onSearchInputChange,T,{trailing:true}).bind(r);r.generateTeamsForAppCSV=r.generateTeamsForAppCSV.bind(r);return r}s()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var r=Object(f["get"])(t,"target.value","");Object(g["b"])(Object(g["a"])().teams.setTeamAppsSearchQuery(r))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!isNaN(t))return S.t("{count} Apps",{count:this.props.teamAppsCount});return S.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(g["b"])(Object(g["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var r=t&&t+"apps/manage"||null;var a=S.t("Manage Apps");if(r)return v.a.createElement("a",{href:r,target:"_blank"},v.a.createElement(y["d"],{type:"outline"},a,v.a.createElement(k["a"],{type:"external_link",className:"p-export_csv_button_caret"})));var n=S.t("You must join this workspace to manage its apps.");return v.a.createElement(O["d"],{tip:n,position:"top"},v.a.createElement("div",null,v.a.createElement(y["d"],{type:"outline",disabled:true},a,v.a.createElement(k["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=S.t("Filter by name...");return v.a.createElement(_["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(f["isNull"])(this.props.teamAppsSearchQuery)){var r=S.t("Apps");return v.a.createElement(C["a"],{pageHeader:r})}var a=this.getTeamAppListProps();return v.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},v.a.createElement(j["a"],{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),v.a.createElement("div",{className:"p-app_management_team_apps_list"},v.a.createElement(E["a"],a)))}}]);return t}(d["PureComponent"]);N.displayName="TeamApps";N.defaultProps=I;t["a"]=N},22349:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(22350);var y={title:v.a.node.isRequired,headerActions:v.a.array,headerClassName:v.a.string};var O={headerActions:[],headerClassName:""};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var r=Object(f["map"])(t,function(e,t){return h.a.createElement(_["a"],{key:t,headerAction:e})});return r}},{key:"render",value:function e(){var t=this.props.headerClassName;var r=g()("margin_left_75","display_flex","justify_content_between",""+t);return h.a.createElement("div",{className:r},h.a.createElement("h1",null,this.props.title),h.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(p["PureComponent"]);k.displayName="OrgDashboardHeader";k.defaultProps=O;t["a"]=k},2235:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2236);var n=r(42);Object(n["a"])("interop.mountEmojiPicker",a["a"])},22350:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={headerAction:v.a.node};var m={headerAction:null};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(p["PureComponent"]);b.displayName="OrgDashboardHeaderItem";b.defaultProps=m;t["a"]=b},22351:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(22257);var b=r(20198);var g=r.n(b);var _=new f["b"]("enterprise_dashboard");var y={pageHeader:h.a.string};var O={pageHeader:""};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=_.t("No apps have been installed on this workspace.");return v.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},v.a.createElement(m["a"],{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),v.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},v.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),v.a.createElement("h3",{className:"black margin_bottom_75"},r)))}}]);return t}(d["PureComponent"]);k.displayName="TeamAppsEmptyState";k.defaultProps=O;t["a"]=k},22352:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(60);var g=r(21830);var _=r(412);var y=r(5);var O=new y["b"]("enterprise_dashboard");var k={teamApps:v.a.array,teamId:v.a.string.isRequired,teamAppsApiCursor:v.a.string,teamAppsApiTotal:v.a.number,teamAppsLoading:v.a.bool,headerItemOnClick:v.a.func,pageSize:v.a.number,sortBy:v.a.string,sortDir:v.a.string,searchQuery:v.a.string,rowHeaderItemClassName:v.a.string,rowClassName:v.a.string};var j={teamApps:[],headerItemOnClick:f["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row"};var C="asc";var E="desc";var S="caret_down";var w="caret_up";var I={};I[C]=S;I[E]=w;var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,i=a.sortBy,s=a.sortDir;r.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null};r.tableViewControllerRef=null;r.headerItemOnClick=r.headerItemOnClick.bind(r);r.onRequestNextPage=r.onRequestNextPage.bind(r);r.refreshTableHeight=r.refreshTableHeight.bind(r);r.refreshTableHeightPolitely=r.refreshTableHeightPolitely.bind(r);r.appSources={internal:O.t("Internal"),"app directory":O.t("App Directory"),unknown:O.t("Unknown")};r.sourceTooltipStrings={"app directory":O.t("This app has been installed from the Slack App Directory."),internal:O.t("This app was created by someone within your organization."),unknown:O.t("This app was installed from an unknown external source.")};r.rowTemplate={items:[{value:function e(t){var a=t&&t.icons&&t.icons.image_72;return h.a.createElement("button",{className:"p-app_management_table_view_app_name",onClick:function e(){return r.onAppNameClick(t.id)}},a&&h.a.createElement("img",{src:a,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var r=t.installed_by&&t.installed_by.count;return O.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:r})}},{value:function e(t){var r=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var a=new Date(1e3*r).toLocaleDateString();return""+a}},{value:function e(t){var a=r.sourceTooltipStrings[t.source];var n=r.appSources[t.source]||r.appSources.unknown;return h.a.createElement("div",null,h.a.createElement(b["d"],{tip:a,position:"top"},h.a.createElement("span",null,n)))}}]};r.emptyRowTemplate={items:[{value:function e(t){var r=t.searchQuery;var a=O.rt("No apps were found matching <b>{query}</b>",{query:r});return h.a.createElement("div",{className:"align_center"},a)}}]};r.headerData=[{id:"name",value:O.t("Name"),sortable:true},{id:"installed_by",value:O.t("Installed By"),sortable:true},{id:"installed_on",value:O.t("Installed On"),sortable:true},{id:"source",value:O.t("Source"),sortable:true}];return r}s()(t,[{key:"componentWillMount",value:function e(){var t=this.props,r=t.teamApps,a=t.sortBy;var n=this.state.offset;r.length?this.updateRowListItemsData(n):Object(_["b"])(Object(_["a"])().teams.setTeamAppsLoading(true));Object(_["b"])(Object(_["a"])().teams.setTeamAppsSortBy(a))}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var r=this.props,a=r.teamApps,n=r.teamAppsApiTotal;if(n&&a.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(_["b"])(Object(_["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(_["b"])(Object(_["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var r=this.props.teamAppsLoading;r&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var r=this.props.searchQuery;if(t.searchQuery!==r){Object(_["b"])(Object(_["a"])().teams.setTeamAppsSearchQuery(r));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var r=this.state.offset;var a=this.props,n=a.searchQuery,i=a.teamApps,s=a.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(r)}},{key:"headerItemOnClick",value:function e(t){var r=this;var a=this.state,n=a.sortBy,i=a.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==C?C:E;Object(_["b"])(Object(_["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===C?E:C:E;Object(_["b"])(Object(_["a"])().teams.setTeamAppsSortDir(o));Object(_["b"])(Object(_["a"])().teams.setTeamAppsSortBy(s))}var c={sortBy:s,sortDir:o};this.setState(function(){return c},function(){r.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(_["b"])(Object(_["a"])().teams.setTeamAppsApiTotal(null));Object(_["b"])(Object(_["a"])().teams.resetTeamAppsApiCursor());Object(_["b"])(Object(_["a"])().teams.resetTeamApps());Object(_["b"])(Object(_["a"])().teams.setTeamAppsLoading(true))}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var r=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var a=r.getBoundingClientRect();var n=0;var i=t-(a&&a.top);var s=64;var o=Math.max(s,i-n);var c={height:o+"px"};this.setState(c)}},{key:"makeHeader",value:function e(t){var r={id:t.id,value:t.value};if(t.sortable){r.iconType=this.determineSortState(t.id,t);r.onClick=this.headerItemOnClick;t.defaultSortType&&(r.defaultSortType=t.defaultSortType)}return r}},{key:"makeHeaders",value:function e(t){var r=this;var a=[];t.forEach(function(e){a.push(r.makeHeader(e))});return a}},{key:"determineSortState",value:function e(t,r){var a=this.state,n=a.sortBy,i=a.sortDir;var s=r.defaultSortType||C;var o=I[s];if(!n||n!==t)return o;var c=void 0;c=i?i===C?S:w:I[s];return c}},{key:"resetAPICursorMark",value:function e(){Object(_["b"])(Object(_["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,r=t.sortBy,a=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,c=n.teamId;var l={limit:i};r&&(l.sort=r);a&&(l.sort_dir=a);null!==s&&void 0!==s&&Object(f["trim"])(s).length&&(l.query=s);o&&(l.cursor=o);l.team=c;Object(_["b"])(Object(_["a"])().teams.getAppsByWorkspace(c,l))}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=this.props,n=a.teamApps,i=a.teamAppsLoading;var s=[];var o=t||0;var c=0;var l={rowListItems:s};function u(){c+=1;return"row_"+o+"_item"+c}function d(e,t){var r={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:u()};t.className&&(a.className=t.className);r.items.push(a)});o+=1;return r}if(n&&n.length)n.forEach(function(e){s.push(d(e,r.rowTemplate))});else if(!i){var v=this.props.searchQuery;if(null===v||void 0===v||!v.length){this.setState(l);return}var p=[{searchQuery:v}];p.forEach(function(e){s.push(d(e,r.emptyRowTemplate))})}this.setState(l)}},{key:"render",value:function e(){var t=this;var r=this.state,a=r.sortBy,n=r.sortDir,i=r.height,s=r.rowListItems,o=r.offset;var c=this.props,l=c.rowHeaderItemClassName,u=c.rowClassName,d=c.searchQuery,v=c.teamAppsLoading;var p=this.makeHeaders(this.headerData);return h.a.createElement("div",null,h.a.createElement(g["a"],{rows:s,headers:p,rowHeaderItemClassName:l,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:a,sortDir:n,searchQuery:d,height:i,isLoading:v,newQuery:!o,ref:function e(r){t.tableViewControllerRef=r}}))}}]);return t}(p["PureComponent"]);T.displayName="TeamAppsList";T.defaultProps=j;t["a"]=T},22353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(49);var l=r(42);var u=r(22354);Object(l["a"])("interop.migrationTable",{render:function e(t,r,a){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(c["c"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(u["a"],a)),r)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},22354:function(e,t,r){"use strict";var a=r(22355);t["a"]=a["a"]},22355:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(3096);var O=r(22925);var k=r(20630);var j=r.n(k);var C=new _["b"]("migration_table");var E={enterpriseName:m.a.string.isRequired,enterpriseDomain:m.a.string.isRequired,tabActionOnClick:m.a.func,defaultTabId:m.a.string,featureMigrationStatus:m.a.bool.isRequired};var S={tabActionOnClick:b["noop"],defaultTabId:""};var w=function(e){v()(t,e);function t(e){var r;s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(!e.featureMigrationStatus)return r=null,u()(a,r);return a}c()(t,[{key:"renderHeader",value:function e(){var t=this.props.featureMigrationStatus;if(!t)return null;var r=C.t("Migrations");return h.a.createElement("div",{className:"c-migration_table_indent","data-qa-migration-header":true},h.a.createElement("h1",null,r))}},{key:"render",value:function e(){var t=this.props,r=t.featureMigrationStatus,a=t.tabActionOnClick,i=t.defaultTabId;if(!r)return null;var s=[{title:C.t("Scheduled Migrations"),id:"scheduled",content:h.a.createElement(O["a"],n()({},this.props,{scheduled:true})),onClick:a},{title:C.t("Past Migrations"),id:"past",content:h.a.createElement(O["a"],this.props),onClick:a}];return h.a.createElement("div",{className:"p-migration_table","data-qa-migration-page":true},this.renderHeader(),h.a.createElement("div",{className:"p-migration_table_migrations"},h.a.createElement(y["a"],{"data-qa-migration-tabs":true,tabs:s,defaultTabId:i})))}}]);return t}(p["PureComponent"]);w.displayName="MigrationTable";w.defaultProps=S;t["a"]=w},22356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22357);var n=r(42);Object(n["a"])("interop.mountTermsOfService",a["a"]);Object(n["a"])("interop.unmountTermsOfService",a["b"])},22357:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(9);var s=r(50);var o=r.n(s);var c=r(21709);var l=r(49);var u=r(22137);var d=function e(t,r,a){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(l["c"])(t);Object(c["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(u["a"],a)),r)};var v=function e(t){o.a.unmountComponentAtNode(t)};var p={mountTermsOfService:d,unmountTermsOfService:v}},22358:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22359);var n=r(42);Object(n["a"])("interop.mountWorkspaceDirectory",a["a"]);Object(n["a"])("interop.unmountWorkspaceDirectory",a["b"])},22359:function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"b",function(){return h});var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(50);var c=r.n(o);var l=r(9);var u=r(21709);var d=r(49);var v=r(22258);var p=function e(t,r,a){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["c"])(t);var o=n()({},a,{onClose:function e(){return c.a.unmountComponentAtNode(r)}});Object(u["a"])(s.a.createElement(l["Provider"],{store:i},s.a.createElement(v["b"],o)),r)};var h=function e(t){c.a.unmountComponentAtNode(t)};var f={mountWorkspaceDirectory:p,unmountWorkspaceDirectory:h}},2236:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(21708);var d=r(332);var v=r(2237);var p=function e(t,r,a,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var p="react_emoji_menu_render";Object(u["d"])(p+"_mark");Object(c["a"])(s.a.createElement(o["Provider"],{store:Object(l["c"])(t)},s.a.createElement(d["a"],n()({shouldFade:false},i),s.a.createElement(v["a"],a))),r,function(){return Object(u["f"])(p,p+"_mark")})};t["a"]=p},22360:function(e,t,r){"use strict";var a=r(374);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(189);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(73);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(50);var k=r.n(O);var j=r(8);var C=r.n(j);var E=r(9);var S=r(1);var w=r.n(S);var I=r(333);var T=r(21798);var N=r(3278);var R=r(21698);var A=r(3203);var M=r(21727);var P=r(21705);var x=r(12);var D=r(43);var F=r(54);var L=r(21769);var B=r(5);var U=r(1037);var q=r(3204);var H=r(37);var W=r(2111);var G=r(21814);var V=r(283);var z=r(69);var K=r(21723);var Q=r(1076);var Y=r(21976);var J=r(21977);var Z=r(22361);var X=r(21862);var $=r(22363);var ee=r(22365);var te=r(22367);var re=r(22258);var ae=r(21724);var ne=r(20179);var ie=r.n(ne);var se=new B["b"]("workspace_directory");var oe={enterprise:g.a.shape({id:g.a.string,name:g.a.string,domain:g.a.string,icon:g.a.object,locale:g.a.string}).isRequired,user:g.a.shape({id:g.a.string,name:g.a.string,is_admin:g.a.bool,is_owner:g.a.bool,profile:g.a.object}),fetchWorkspaces:g.a.func.isRequired,fetchTeam:g.a.func.isRequired,enqueueToast:g.a.func,fetchRawMembersFromAPI:g.a.func.isRequired,openModal:g.a.func,allowWorkspaceRequest:g.a.bool,showRequestDialog:g.a.func,launchTeamId:g.a.string,displayDirectoryInModal:g.a.bool,onClose:g.a.func,hasSeenOnboardingBanner:g.a.bool,queryString:g.a.object,setUserPrefByApi:g.a.func};var ce={organizationName:"",organizationIcon:"https://vignette.wikia.nocookie.net/plantsvszombies/images/4/42/Shrek_emoji.png/revision/latest?cb=20160413203711",user:{},enqueueToast:S["noop"],openModal:S["noop"],allowWorkspaceRequest:false,showRequestDialog:S["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:S["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:S["noop"]};var le=300;var ue=function(e){m()(t,e);h()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(S["sortBy"])(t,function(e){return e.name})}}]);function t(e){u()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};r.dialog=null;r.headerPaneHeight=null;r.clientHeight=null;r.page=null;r.pageSearch=null;r.listRefs={allWorkspaces:null,yourWorkspaces:null};r.windowScroller=null;r.onboardingBannerHeight=0;r.trackingCode="";Object(S["bindAll"])(r,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return r}h()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(ae["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(ae["p"])({trackingCode:this.trackingCode});var r=this.props.queryString&&Object(S["get"])(this.props.queryString,"user",null);r&&this.fetchSingleMemberToPrepopulate(r)}},{key:"componentDidUpdate",value:function e(t,r){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var a=this.getListHeight("yourWorkspaces");a!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:a});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(O["findDOMNode"])(this.onboardingBanner).clientHeight);!r.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();r.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(r)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(ae["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var r=t.currentTarget.scrollTop;var a=r>=this.headerPaneHeight;a&&this.pageSearch.getWrappedInstance().blur();a!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(a)}},{key:"onWindowScrollerScroll",value:function e(t){var r=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:r})}},{key:"onModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return Object(D["error"])("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var r=t.node,a=t.err;r&&this.setToastText(r);Object(D["error"])("Error with Workspace Action in WorkspaceDirectory - ",a)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.node,a=t.workspace;if(a&&a.is_member){this.onWorkspaceJoin({workspace:a});if(this.props.displayDirectoryInModal)return this.onModalClose()}r&&this.setToastText(r);return this.closeDialog()}},{key:"onWorkspaceJoin",value:function e(r){var a=this;var n=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(S["unionBy"])([n],i,"id");var o=e.yourWorkspaces.totalWorkspaces+1;var l={yourWorkspaces:c()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(s),totalWorkspaces:o}),searchResults:c()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return l})}},{key:"onWorkspaceLeave",value:function e(r){var a=this;var n=r.workspace;this.setState(function(e){var r=a.maybeUpsertWorkspaceToSearchResults(e,n);var i=e.yourWorkspaces.workspaces;var s=Object(S["filter"])(i,function(e){return e.id!==n.id});var o=e.yourWorkspaces.totalWorkspaces-1;var l=e.allWorkspaces.workspaces;var u=Object(S["unionBy"])([n],l,"id");var d={yourWorkspaces:c()({},e.yourWorkspaces,{workspaces:s,totalWorkspaces:o}),allWorkspaces:c()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:c()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})};return d},function(){a.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var r=t.workspaceListKey,a=t.ref;this.listRefs[r]=a}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var r=t.workspaceListKey,a=t.topOffset;this.setState(function(e){return s()({},r,c()({},e[r],{topOffset:a}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,r){this.setState(function(e){return s()({},t,c()({},e[t],{hasApiError:r}))})}},{key:"setLoadingWorkspaces",value:function e(t,r){this.setState(function(e){return s()({},t,c()({},e[t],{loadingWorkspaces:r}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,r){this.setState(function(){return{dialogWorkspaceDetail:t}},r)}},{key:"setWorkspaceFetchOptions",value:function e(t,r){var a=r.workspaces,n=void 0===a?[]:a,i=r.totalWorkspaces,o=void 0===i?0:i,l=r.onWorkspaces,u=void 0!==l&&l,d=r.nextCursorMark,v=void 0===d?null:d;this.setState(function(e){return s()({},t,c()({},e[t],{workspaces:n,totalWorkspaces:o,onWorkspaces:u,nextCursorMark:v}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:y.a.createElement(W["a"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var r=this.state.selectedOption;if("allWorkspaces"===t){var a=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return se.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(a-n,0)})}if("yourWorkspaces"===t)return se.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,s=i.loadingWorkspaces,o=i.totalWorkspaces;var c=Object(S["get"])(r,"selectedOptionData");if(s)return null;if("member"===Object(S["get"])(r,"type")){var l=Object(A["l"])(c);var u=se.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:l,workspaceCount:o});return y.a.createElement(y.a.Fragment,null,y.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:c,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),u)}if("workspace"===Object(S["get"])(r,"type")&&0===o)return se.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(S["get"])(r,"type")||c.id===ae["b"])&&o>0)return se.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:o,searchQuery:Object(S["get"])(c,"displayValue")});if("workspace"===Object(S["get"])(r,"type")&&o>0)return se.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:o,workspaceName:Object(S["get"])(r,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var r=this.state.allWorkspaces.workspaces;var a=this.state.yourWorkspaces.workspaces;return Object(S["differenceBy"])(r,a,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,r){var a=Object(S["get"])(t.searchResults,"workspaces",[]);var n=Object(S["find"])(a,function(e){return r.id===e.id});return n?Object(S["unionBy"])([r],a,"id"):a}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var r=this.props.showRequestDialog;return r({displayModernToast:function e(r){var a=r.type,n=r.errorType,i=r.teamName;var s=Object(ae["g"])({type:a,errorType:n,teamName:i});t.setToastText(y.a.createElement("div",{className:"display_flex"},"success"===a&&y.a.createElement(H["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),y.a.createElement("span",null,s)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,r=t.selectedOptionData,a=t.type;var n={};if(!r)return;this.setLoadingWorkspaces("searchResults",true);if(Object(S["get"])(r,"id")===ae["b"])n.searchTerm=r.displayValue;else{n.id=r.id;n.type="member"===a?"single_user":"single_workspace"}Object(ae["m"])({searchType:a});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var r=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};r.setState(t)})}},{key:"openDialog",value:function e(t){var r=this;var a=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+a.id);Object(ae["q"])({teamId:a.id,trackingCode:this.trackingCode});this.setDialogWorkspaceDetail(a,function(){r.dialog=r.props.openModal({element:r.renderDialog()})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/");if(!this.dialog)return;this.dialog.close()}},{key:"fetchWorkspacesWithArgs",value:function e(t){var r=t.type,a=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(S["isEmpty"])(s);var c=a===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:c,additionalOptions:{type:r,id:a,searchTerm:n}})}},{key:"fetchTeam",value:function e(t){var r=this;return this.props.fetchTeam(t).then(function(e){r.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});r.openDialog({team:e})}).catch(function(e){r.setViewingHiddenWorkspace(true);Object(D["error"])("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.additionalOptions,n=r.workspaceListKey,i=void 0===n?"allWorkspaces":n;var s=this.state[i].nextCursorMark;this.setHasApiError(i,false);return this.props.fetchWorkspaces(c()({nextCursorMark:s},a)).then(function(e){var r=e.num_found,a=e.on_workspaces,n=e.items;var o=n;s&&(o=Object(S["unionBy"])(t.state[i].workspaces,o,"id"));t.setWorkspaceFetchOptions(i,{workspaces:o,totalWorkspaces:r,onWorkspaces:a,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(i,false)}).catch(function(e){t.setHasApiError(i,true);t.setLoadingWorkspaces(i,false);Object(D["error"])("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var r=t.scrollHeight,a=t.scrollTop;return r-(a+this.clientHeight)<le}},{key:"doInfiniteScrollHandler",value:function e(t){var r=t.scrollTop;var a=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===a&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:r,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(a)?this.setLoadingWorkspaces(a,true):!i&&this.hasFetchedAllWorkspaces(a)&&this.setLoadingWorkspaces(a,false)}},{key:"renderDialog",value:function e(){var t=this.state,r=t.dialogWorkspaceDetail,a=t.displayDirectoryInModal;var n=this.props.user;var i=Object(S["get"])(this.props.queryString,"channel",null);var s=Object(S["get"])(this.props.queryString,"action",null);var o=Object(S["get"])(this.props.queryString,"user",null);var c=Object(A["K"])(n);return y.a.createElement(Z["a"],{team:r,displayDirectoryInModal:a,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:c,channelRedirect:i,postLaunchAction:s,userIdFromURL:o})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.renderFullPage;var a=C()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!r});return y.a.createElement("div",{className:a},y.a.createElement(z["a"],{size:"medium",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(S["isEmpty"])(t))return null;var r=!Object(T["a"])();return y.a.createElement(J["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:r,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return y.a.createElement("div",{className:"p-workspace_directory__title"},se.t("Workspaces at {name}",{name:Object(B["l"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return y.a.createElement("div",{className:"p-workspace_directory__search"},y.a.createElement(X["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(S["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,r=t.displayDirectoryInModal,a=t.user;var n=C()("p-workspace_directory__header_pane",{margin_top_75:r});return y.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!r&&this.renderTitle(),!Object(A["K"])(a)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return y.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var r=this;var a=t.listProps,n=t.workspaceListKey;var i=this.getWorkspacesForList(n);var s=this.state[n].loadingWorkspaces;if("searchResults"===n&&Object(S["isEmpty"])(i)&&!s)return this.renderSearchEmptyState();if(Object(S["isEmpty"])(i)&&!s)return null;var o=this.getWorkspaceListTopOffset(n);var l=this.getListHeading(n);return y.a.createElement(y.a.Fragment,null,this.renderListHeading(l),y.a.createElement("div",{className:"p-workspace_directory__list"},y.a.createElement($["a"],c()({scrollElement:this.page,workspaces:i,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:o,ref:function e(t){return r.setListRef({workspaceListKey:n,ref:t})}},a))),s&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.selectedOption;var i=Object(S["get"])(n,"selectedOptionData");var s=void 0;var o=void 0;if(Object(ae["h"])(i)){var c=Object(S["get"])(a,"totalWorkspaces");var l=Object(S["get"])(a,"onWorkspaces");var u=Object(A["l"])(i);if(Object(Y["c"])({totalWorkspaces:c,onWorkspaces:l})&&!Object(Y["b"])({totalWorkspaces:c,onWorkspaces:l})){s=se.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u});o=se.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return y.a.createElement(V["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}if(Object(Y["b"])({totalWorkspaces:c,onWorkspaces:l})){s=se.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u});o=se.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return y.a.createElement(V["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}})}return y.a.createElement("div",{className:"align_center"},y.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},y.a.createElement(K["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),s),y.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}s=se.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(S["get"])(i,"displayValue")});o=se.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var r=e.text,a=e.key,n=e.tag;if("a"===n)return y.a.createElement(V["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:a},r);return{text:r}});return y.a.createElement("div",{className:"align_center"},y.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s),y.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},o))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var r=this.state.hideOnboardingBanner;var a=C()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":r});var n=se.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return y.a.createElement(te["a"],{title:se.t("What is a workspace?"),description:n,className:a,onClose:this.onOnboardingBannerDismiss,isHidden:r,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var r=this.props.allowWorkspaceRequest;if(!r)return null;var a=se.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var r=e.text;return y.a.createElement(V["a"],{onClick:t.openWorkspaceRequestForm},r)});return y.a.createElement(te["a"],{title:se.t("Can\u2019t find your workspace?"),description:a,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:S["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var r=this.state.selectedOption;var a=t.onChildScroll,i=t.registerChild,s=n()(t,["onChildScroll","registerChild"]);var o=c()({onScroll:a,scrollElement:this.page},s);var l=!!Object(S["get"])(r,"selectedOptionData");if(l)return y.a.createElement("div",{ref:i},this.renderSearchResults(o));return y.a.createElement("div",{ref:i},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var r=this.state,a=r.searchResults,n=r.hideOnboardingBanner;var i=C()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var s={};this.onboardingBannerHeight&&!n&&(s.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return y.a.createElement(y.a.Fragment,null,this.renderOnboardingBanner(),y.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:s},y.a.createElement(I["c"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(S["get"])(a,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var r=this.props.enterprise;return y.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},y.a.createElement(re["a"],c()({enterprise:r},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var r=this.state.viewingHiddenWorkspace;var a=this.state.allWorkspaces,n=a.workspaces,i=a.loadingWorkspaces;var s=this.state.yourWorkspaces,o=s.workspaces,c=s.loadingWorkspaces;var l=!c&&Object(S["isEmpty"])(o);var u=!i&&Object(S["isEmpty"])(n);if(l&&Object(A["K"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(u&&l)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(r)return this.renderEmptyState({isHiddenWorkspace:true});return y.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,r=t.user,a=t.enterprise;var n=this.state,i=n.isMobileView,s=n.hasScrolledPastHeaderPane,o=n.selectedOption;var c=r.is_admin||r.is_owner;return y.a.createElement(ee["a"],{enterprise:a,displayManageOrgButton:c,displaySearchBar:this.headerPane&&s,"data-js":"workspace_directory_sticky_header",user:r,isMobileView:i,selectedSearchOption:Object(S["get"])(o,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var r=C()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return y.a.createElement(Q["a"],{onCancel:this.onModalClose,showCancelButton:false,showGoButton:false,title:se.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},y.a.createElement("div",{className:r,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var r=this.state.allWorkspaces,a=r.workspaces,n=r.loadingWorkspaces;var i=this.state.yourWorkspaces,s=i.workspaces,o=i.loadingWorkspaces;var c=o&&Object(S["isEmpty"])(s);var l=n&&Object(S["isEmpty"])(a);var u=c||l;if(t)return this.renderDirectoryInModal();return y.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),u&&this.renderInfiniteSpinner({renderFullPage:true}),y.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),y.a.createElement(G["a"],null))}}]);return t}(_["Component"]);ue.displayName="WorkspaceDirectory";ue.defaultProps=ce;var de=function e(t,r){var a=r.userId;var n=Object(N["getEnterprise"])(t);var i=Object(R["getMemberById"])(t,a);var s=function e(r){return Object(U["f"])(t,r)};var o=Object(F["getOrgPref"])(t,"enterprise_team_creation_request");var l=o&&o.is_enabled&&!Object(A["K"])(i);var u=Object(x["isClientApp"])(t);var d=Object(F["getUserPref"])(t,"seen_onboarding_banner");var v=function e(r){return Object(U["g"])(t,{id:r,additionalOptions:{include_admins:true}})};return{enterprise:n,user:c()({id:a},i),fetchWorkspaces:s,fetchTeam:v,allowWorkspaceRequest:l,displayDirectoryInModal:u,hasSeenOnboardingBanner:d}};var ve={enqueueToast:M["enqueueToast"],openModal:P["openModal"],fetchRawMembersFromAPI:q["g"],setUserPrefByApi:L["c"]};t["a"]=Object(E["connect"])(de,ve)(ue)},22361:function(e,t,r){"use strict";var a=r(22362);t["a"]=a["a"]},22362:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(21798);var k=r(5);var j=r(3203);var C=r(9);var E=r(1037);var S=r(140);var w=r(37);var I=r(3189);var T=r(271);var N=r(1076);var R=r(21978);var A=r(21723);var M=r(69);var P=r(21724);var x=r(20205);var D=r.n(x);var F=new k["b"]("workspace_directory");var L={team:h.a.shape({admins:h.a.arrayOf(h.a.shape({real_name:h.a.string})),can_leave:h.a.bool,cannot_leave_reasons:h.a.array,created:h.a.number,deleted:h.a.bool,description:h.a.string,discoverable:h.a.string,domain:h.a.string,enterprise_id:h.a.string,date_requested_join:h.a.oneOfType([h.a.string,h.a.number]),icon:h.a.object,id:h.a.string,is_member:h.a.bool,joined_date:h.a.number,name:h.a.string,user_counts:h.a.object}).isRequired,onWorkspaceLeave:h.a.func,onClose:h.a.func,onActionReject:h.a.func,onActionResolve:h.a.func,fetchTeam:h.a.func,isGuest:h.a.bool,displayDirectoryInModal:h.a.bool,channelRedirect:h.a.string,postLaunchAction:h.a.string,userIdFromURL:h.a.string};var B={onWorkspaceLeave:b["noop"],onClose:b["noop"],onActionResolve:b["noop"],onActionReject:b["noop"],fetchTeam:b["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var U=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={team:{},loading:false};r.keyCommands=null;r.onDialogClose=r.onDialogClose.bind(r);r.onKeyPress=r.onKeyPress.bind(r);r.onWorkspaceLeave=r.onWorkspaceLeave.bind(r);r.setLoading=r.setLoading.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo();this.keyCommands=this.initKeyCommands()}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onWorkspaceLeave",value:function e(t){t.preventDefault();return this.props.onWorkspaceLeave()}},{key:"onKeyPress",value:function e(t,r){t.preventDefault();if("Enter"===t.key)switch(r){case"leave":return this.props.onWorkspaceLeave();case"close":return this.props.onClose();default:}return null}},{key:"onDialogClose",value:function e(t){if(t){t.stopPropagation();t.preventDefault()}this.props.onClose()}},{key:"setWorkspace",value:function e(t,r){this.setState(function(){return{team:t}},r)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,r=t.is_member,a=t.can_leave;var n=this.props.isGuest;return r&&a&&!n}},{key:"initKeyCommands",value:function e(){var t=new S["a"];t.bindAll([{keys:["esc"],handler:this.onDialogClose}]);return t}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var r=this.props.team.id;this.setLoading(true);return this.props.fetchTeam(r).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var r=Object(b["map"])(t,function(e){return Object(j["l"])(e)});return Object(k["e"])(r,{noEscape:true})}},{key:"renderCloseButton",value:function e(){var t=this;return m.a.createElement(I["a"],{className:"p-workspace_directory_dialog__close",onClick:this.onDialogClose,ariaLabel:F.t("Close"),tabIndex:"0",role:"button",onKeyPress:function e(r){return t.onKeyPress(r,"close")}},m.a.createElement(w["b"],{type:"times"}))}},{key:"renderDialogHeaderCaption",value:function e(t){var r=this.state.loading;if(r)return null;if(!t)return null;return m.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},m.a.createElement(w["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,r=t.onActionReject,a=t.onActionResolve;var n=this.state,i=n.team,s=n.loading;if(s)return null;var o=!Object(O["a"])();return m.a.createElement(R["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:r,onActionResolve:a,anchorPage:"workspace_directory",tabIndex:"0",size:"medium",doLaunchInNewTab:o,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var r=this.state.team;var a=r.name,n=void 0===a?"":a,i=r.domain,s=void 0===i?"":i;var o=y()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(P["c"])()});return m.a.createElement("div",{className:o},this.renderCloseButton(),m.a.createElement(A["a"],{entityType:"workspace",dimension:100,entityData:r,featureReactMessages:true,featureReactMemberProfileCard:true}),m.a.createElement("div",{className:"p-workspace_directory_dialog__name"},F.t("{name}",{name:Object(k["l"])(n)})),m.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},F.t("{domain}.slack.com",{domain:s})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return m.a.createElement("div",{className:"overflow_hidden margin_100"},m.a.createElement(M["a"],{size:"medium",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,r=t.description,a=t.admins,n=t.user_counts;var i=[];r&&i.push({heading:F.t("About"),text:r,key:"dialog-description"});i.push({heading:F.t("Active members"),text:F.t("{activeMembers}",{activeMembers:Object(k["i"])(Object(b["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:F.t("Workspace admins"),text:this.listifyAdminRealNames(a),key:"dialog-admins"});var s=function e(t){return m.a.createElement("div",{key:t.key},m.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),m.a.createElement("p",null,t.text))};return m.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return s(e)}))}},{key:"renderDialogFooter",value:function e(){var t=this;return m.a.createElement("span",{className:"p-workspace_directory_dialog__leave",role:"button",tabIndex:"0",onClick:this.onWorkspaceLeave,onKeyPress:function e(r){return t.onKeyPress(r,"leave")}},F.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var r=this.canLeaveWorkspace();return m.a.createElement(N["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),m.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),r&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var r=Object(P["f"])(t,{context:"dialog"});if(Object(P["c"])())return this.renderDialogOnMobile(r);var a=this.props.displayDirectoryInModal;var i=y()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!a});var s={contentLabel:r,className:i,showCloseButton:false,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(r),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true,onCancel:this.onDialogClose};this.canLeaveWorkspace()&&(s=n()({},s,{showFooter:true,footerText:this.renderDialogFooter()}));return m.a.createElement(T["a"],s,this.renderDialogBody())}}]);return t}(f["Component"]);U.displayName="WorkspaceDirectoryDialog";U.defaultProps=B;var q=function e(t,r){var a=r.team,n=r.onLeaveReject,i=r.onLeaveResolve,s=r.onDone;var o=function e(r){return Object(E["g"])(t,{id:r,additionalOptions:{include_admins:true}})};return{fetchTeam:o,onWorkspaceLeave:function e(){return Object(P["k"])(t,{team:a,onLeaveReject:n,onLeaveResolve:i,onDone:s})}}};t["a"]=Object(C["connect"])(q)(U)},22363:function(e,t,r){"use strict";var a=r(22364);t["a"]=a["a"]},22364:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(21748);var C=r(21724);var E=r(20206);var S=r.n(E);var w={workspaces:m.a.array.isRequired,scrollElement:m.a.any,onScroll:m.a.func,renderWorkspaceCard:m.a.func,topOffset:m.a.number};var I={scrollElement:window,onScroll:O["noop"],renderWorkspaceCard:O["noop"],topOffset:0};var T=function(e){h()(t,e);v()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var r=t.currentRow,a=void 0===r?0:r,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!a)return 0;if(i===o)return a;var c=a*i;return Math.floor(c/o)}}]);function t(e){c()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(r,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);r.state={columns:3};r.list=null;r.keys=[];r.rowsByIndex=[];r.currentRow=0;return r}v()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(r,a){if(this.state.columns!==a.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:a.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),r=t.start;this.currentRow=r||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var r=this.state.columns;var a=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+r,a.length);return Object(O["range"])(n,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var r=3;r=Object(C["c"])(t)?1:Object(C["d"])(t)?2:3;this.state.columns!==r&&this.setColumns(r)}},{key:"renderCell",value:function e(t){var r=this.props,a=r.workspaces,n=r.renderWorkspaceCard;var i=a[t];if(!i)return null;return g.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var r=this;var a=this.getWorkspacesByRowIndex(t);var n=y()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return g.a.createElement("div",{className:n},a.map(function(e){return r.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,r=t.topOffset,a=t.scrollElement,i=s()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(O["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return g.a.createElement(j["a"],n()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(b["PureComponent"]);T.displayName="WorkspaceGridList";T.defaultProps=I;t["a"]=T},22365:function(e,t,r){"use strict";var a=r(22366);t["a"]=a["a"]},22366:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(12);var O=r(3203);var k=r(5);var j=r(3184);var C=r(21723);var E=r(21801);var S=r(21862);var w=r(266);var I=r(21861);var T=r(20207);var N=r.n(T);var R=new k["b"]("workspace_directory");var A={enterprise:h.a.shape({icon:h.a.object,id:h.a.string,name:h.a.string}).isRequired,user:h.a.shape({id:h.a.string,is_admin:h.a.bool,is_owner:h.a.bool,is_primary_owner:h.a.bool,profile:h.a.object}).isRequired,displayManageOrgButton:h.a.bool,displaySearchBar:h.a.bool,isMobileView:h.a.bool,signoutUrl:h.a.string.isRequired,prefCompliantMemberName:h.a.string,organizationUrl:h.a.string,selectedSearchOption:h.a.object,onOptionSelected:h.a.func,onClearHeaderInput:h.a.func};var M={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:g["noop"],onClearHeaderInput:g["noop"]};var P=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["bindAll"])(r,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return r}c()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var r=this.props.signoutUrl;var a=window.location.origin+"/account/settings";switch(t){case"settings":window.open(a,"_self");break;case"signout":window.open(r,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=R.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return m.a.createElement(j["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank",tabIndex:"0"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return m.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},m.a.createElement(S["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return m.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var r=this;var a=this.props,i=a.prefCompliantMemberName,s=a.enterprise,o=a.signoutUrl;var c=function e(){return m.a.createElement(w["b"],{key:"workspace_directory_user_menu_name",label:m.a.createElement("span",{className:"black"},i),description:R.t("Account Settings"),href:"/account/settings",onSelected:function e(){return r.onMenuItemSelected("settings")},className:"no_underline",role:"link"})};var l=function e(){return m.a.createElement(w["b"],{key:"workspace_directory_user_menu_sign_out",label:R.t("Sign out of {orgName}",{orgName:Object(k["l"])(s.name)}),href:o,onSelected:function e(){return r.onMenuItemSelected("signout")},className:"no_underline",danger:true,role:"link"})};return m.a.createElement(w["e"],n()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),c(),m.a.createElement(w["c"],null),l())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return m.a.createElement(w["d"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},m.a.createElement(j["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon",tabIndex:"0"},m.a.createElement(C["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,r=t.enterprise,a=t.isMobileView,n=t.organizationUrl;var i=a?R.t("Directory"):R.t("Workspace Directory");return m.a.createElement(I["a"],{"data-qa":"ws_directory_header",title:i,team:r,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(f["Component"]);P.displayName="WorkspaceDirectoryHeader";P.defaultProps=M;var x=function e(t,r){var a=r.user,n=r.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(y["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(O["r"])(t,a),organizationUrl:Object(E["a"])(t,i.domain)}};t["a"]=Object(b["connect"])(x)(P)},22367:function(e,t,r){"use strict";var a=r(22368);t["a"]=a["a"]},22368:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(37);var y=r(3184);var O=r(20208);var k=r.n(O);var j={title:v.a.node,description:v.a.node,showCloseButton:v.a.bool,onClose:v.a.func,className:v.a.string,isHidden:v.a.bool};var C={title:"",description:"",showCloseButton:false,onClose:f["noop"],className:"",isHidden:true};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClose=r.onClose.bind(r);r.onKeyPress=r.onKeyPress.bind(r);return r}s()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return h.a.createElement(y["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},h.a.createElement(_["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,r=t.title,a=t.description;return h.a.createElement("div",{className:"p-workspace_directory_banner__text"},h.a.createElement("div",{className:"p-workspace_directory_banner__title"},r),h.a.createElement("span",{className:"p-workspace_directory_banner__description"},a))}},{key:"render",value:function e(){var t=this.props,r=t.showCloseButton,a=t.className;var n=g()("p-workspace_directory_banner",a);return h.a.createElement("div",{className:n},this.renderBannerText(),r&&this.renderCloseButton())}}]);return t}(p["PureComponent"]);E.displayName="WorkspaceDirectoryBanner";E.defaultProps=C;t["a"]=E},22369:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(283);var b=r(37);var g=r(21723);var _=r(21801);var y=r(5);var O=r(20179);var k=r.n(O);var j=new y["b"]("workspace_directory");var C={enterprise:h.a.shape({id:h.a.string,name:h.a.string,domain:h.a.string,icon:h.a.object,locale:h.a.string}).isRequired,isZeroWorkspaceGuest:h.a.bool,isZeroWorkspaceOrg:h.a.bool,isHiddenWorkspace:h.a.bool,directoryUrl:h.a.string};var E={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.redirectToDirectory=r.redirectToDirectory.bind(r);return r}s()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,r=t.enterprise,a=t.isHiddenWorkspace;var n=a?j.t("No workspace found"):j.t("No available workspaces");return v.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},v.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},v.a.createElement(g["a"],{entityType:"org",dimension:28,entityData:r,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return v.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},j.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(y["l"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return v.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},j.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(y["l"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return v.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},j.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(y["l"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.isZeroWorkspaceGuest,a=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(r)return this.renderZeroWorkspaceGuestBody();if(a)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return v.a.createElement(m["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},j.t("View all {orgName} workspaces",{orgName:Object(y["l"])(t.name)}),v.a.createElement(b["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(d["PureComponent"]);S.displayName="WorkspaceDirectoryEmptyState";S.defaultProps=E;var w=function e(t,r){var a=r.enterprise;return{directoryUrl:Object(_["a"])(t,a.domain)}};t["a"]=Object(f["connect"])(w)(S)},2237:function(e,t,r){"use strict";var a=r(2239);t["a"]=a["a"]},22370:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1027);var n=r(42);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:a["a"],getInstanceForTeam:a["b"]})},22371:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22259);var n=r(42);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(a["getGroupForUser"])(TS.redux.getState(),t)}})},22372:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22373);var n=r(42);Object(n["a"])("interop.beaconApiCall",a["a"])},22373:function(e,t,r){"use strict";t["a"]=n;var a=window.navigator&&"function"===typeof window.navigator.sendBeacon;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,r=e.method,n=e.token,i=e.args,s=void 0===i?{}:i,o=e.versionTs,c=void 0===o?"":o,l=e.versionUid,u=void 0===l?"":l;var d=false;var v=""+t+r+"?_x_id="+u.substring(0,8)+"-"+Date.now()/1e3;var p=new FormData;p.append("token",n);Object.keys(s).forEach(function(e){return p.append(e,s[e])});if(a)d=navigator.sendBeacon(v,p);else{var h=new XMLHttpRequest;h.addEventListener("load",function(){var e=h.readyState,t=h.status,r=h.DONE;e===r&&200===t&&(d=true)});h.open("POST",v,true);h.setRequestHeader("X-Slack-Version-Ts",c);h.send(p)}return d}},22374:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ensureFullyBooted",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")})},22375:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21707);Object(a["a"])("interop.rtm",{debugGetHandlers:n["c"],debugGetPendingMessages:function e(){return Object(n["d"])(TS.boot_data.team_id)}})},22376:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21920);var i=r(21722);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(a["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["b"])())}})},22377:function(e,t,r){"use strict";t["a"]=i;var a=r(882);var n=r(74);function i(e,t){var r=Object(n["d"])(e);var i=Object(n["d"])(t);return Object(a["a"])(r,i)}},22378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21749);var n=r(42);var i=r(21767);function s(e){return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.apply(void 0,[TS.redux.getState()].concat(r))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(a["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=a["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(r));return o(i)}})},22379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(22260);Object(a["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},22380:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(10);var n=Object(a["c"])("TS.debug_widget.isVisible");var i=Object(a["c"])("TS.experiment.setFrameRate")},22383:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(5);var _=r(3184);var y=r(54);var O=r(3278);var k=r(2217);var j=r(91);var C=r(21920);var E=new g["b"]("channel_sidebar");var S={isAppWhitelistEnabled:v.a.bool,isEnterprise:v.a.bool,installAppsString:v.a.string,fetchMemberCountsForTeam:v.a.func.isRequired};var w={isAppWhitelistEnabled:false,isEnterprise:false,installAppsString:""};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={numBots:0,numMembers:0};r._isMounted=false;r.handleAppsBrowserClick=r.handleAppsBrowserClick.bind(r);return r}s()(t,[{key:"componentWillMount",value:function e(){var t=this;return this.props.fetchMemberCountsForTeam().then(function(e){var r=e.bots,a=e.members;t._isMounted&&t.setState(function(){return{numBots:r,numMembers:a}})})}},{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleAppsBrowserClick",value:function e(){Object(j["b"])("INSTALL_APPS_LINK_APP_BROWSER_CLICK");Object(k["a"])()}},{key:"render",value:function e(){var t=this.state,r=t.numBots,a=t.numMembers;if(a<10||r>=3||this.props.isEnterprise||this.props.isAppWhitelistEnabled)return null;return h.a.createElement(_["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick},"+ ",this.props.installAppsString)}}]);return t}(p["Component"]);I.displayName="InstallAppsLink";I.defaultProps=w;var T={fetchMemberCountsForTeam:C["b"]};function N(e){var t=E.t("Add Apps");return{isAppWhitelistEnabled:Object(y["getTeamPref"])(e,"app_whitelist_enabled"),isEnterprise:!b.a.isEmpty(Object(O["getEnterprise"])(e)),installAppsString:t}}t["a"]=Object(f["connect"])(N,T)(I)},22384:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(8);var _=r.n(g);var y=r(21865);var O=r(21697);var k=r(3276);var j=r(907);var C=r(22145);var E=r(3184);var S=r(212);var w={name:v.a.string,setIsRenaming:v.a.func,saveFolderData:v.a.func,renameFolder:v.a.func,toggleFolderCollapse:v.a.func,badgeCount:v.a.number,hasUnreads:v.a.bool,isCollapsed:v.a.bool,isRenaming:v.a.bool,onDragStart:v.a.func,onDragEnd:v.a.func,onDrop:v.a.func,onDragOver:v.a.func};var I={name:"",setIsRenaming:b.a.noop,saveFolderData:b.a.noop,renameFolder:b.a.noop,toggleFolderCollapse:b.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggleFolderCollapse=r.toggleFolderCollapse.bind(r);r.renameFolder=r.renameFolder.bind(r);r.showRenameBox=r.showRenameBox.bind(r);r.setRenamingLabel=r.setRenamingLabel.bind(r);r.setInputRef=r.setInputRef.bind(r);r.onBlur=r.onBlur.bind(r);r.state={renamingLabel:r.props.name,hasTyped:false};return r}s()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var r=this.props.name;var a=t.target.value;this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var r=t.target.value;this.setState(function(){return{renamingLabel:r,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(){this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var r=this.props.name;var a=void 0;"Enter"===t.key&&(a=t.target.value);"Escape"===t.key&&(a=this.props.name);if(void 0!==a){this.props.renameFolder({oldName:r,newName:a});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":h.a.createElement(E["c"],{className:_()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var r="";var a=Object(S["h"])(this.props.name,{include_text:false,include_title:false});var n=void 0;n=this.props.isRenaming?h.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):b.a.includes(this.props.name,"<")?h.a.createElement(E["c"],{className:_()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r},this.props.name):h.a.createElement(E["c"],{className:_()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":r,dangerouslySetInnerHTML:{__html:a}});var i=this.props.isCollapsed?h.a.createElement(E["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},h.a.createElement(C["a"],{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return h.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},h.a.createElement("h2",{className:"offscreen"},this.props.name),n,i,t)}}]);return t}(h.a.PureComponent);T.displayName="FolderHeading";T.defaultProps=I;var N=function e(t,r){var a=r.name;var n=Object(y["getFolderByName"])(t,a);var i=n?b.a.map(n.channelIds,function(e){return Object(O["getChannelById"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var c=i.length>0?b.a.sum(b.a.map(i,function(e){return Object(O["getBadgeCount"])(t,e)})):0;var l=i.length>0&&!!b.a.find(i,function(e){return Object(j["isUnread"])(e)&&!Object(k["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:l,badgeCount:c}};var R={toggleFolderCollapse:y["toggleFolderCollapse"],saveFolderData:y["saveFolderData"],renameFolder:y["renameFolder"],setIsRenaming:y["setIsRenaming"]};t["a"]=Object(f["connect"])(N,R)(T)},22385:function(e,t,r){"use strict";var a=r(9);var n=r(3278);var i=r(1445);var s=function e(t){var r=Object(n["getEnterpriseOrgName"])(t);return{orgName:r}};t["a"]=Object(a["connect"])(s)(i["a"])},22387:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(21979);var c=function e(t){var r=window.open(null,"Redux DevTools","menubar=no,location=no,resizable=yes,scrollbars=no,status=no");r.location.reload();setTimeout(function(){r.document.write('<div id="react-devtools-root"></div>');Object(i["render"])(n.a.createElement(o["a"],{store:t}),r.document.getElementById("react-devtools-root"))},10)};t["a"]=c},22388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22389);var n=r(42);Object(n["a"])("interop.mountConnectedWorkspaces",a["a"]);Object(n["a"])("interop.unmountConnectedWorkspaces",a["b"])},22389:function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"b",function(){return m});var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(50);var c=r.n(o);var l=r(9);var u=r(1);var d=r.n(u);var v=r(21709);var p=r(49);var h=r(22390);var f=function e(t,r){var a=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(p["c"])(t);var o=function e(){Object(u["defer"])(function(){c.a.unmountComponentAtNode(a)})};Object(v["a"])(s.a.createElement(l["Provider"],{store:i},s.a.createElement(h["a"],n()({},r,{onClose:o}))),a)};var m=function e(t){c.a.unmountComponentAtNode(t)};var b={mountConnectedWorkspaces:f,unmountConnectedWorkspaces:m}},2239:function(e,t,r){"use strict";var a=r(1395);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(21708);var k=r(5);var j=r(37);var C=r(140);var E=r(212);var S=r(414);var w=r(2240);var I=r(2241);var T=r(2242);var N=r(2243);var R=r(2244);var A=r(2246);var M=r(2248);var P=r(20218);var x=r.n(P);var D=new k["b"]("emoji_picker");var F=9;var L=":cry:";var B=[0,-1];var U=[0,1];var q={handyRxnNames:m.a.array,skinToneChoiceNames:m.a.array,searchQuery:m.a.string,activeSkinToneId:m.a.string,groups:m.a.array,numBackgroundColors:m.a.number,onSelected:m.a.func,onClosed:m.a.func,onSkinToneChanged:m.a.func,canAddEmoji:m.a.bool,emojiMap:m.a.array,skinToneModifier:m.a.string};var H={numBackgroundColors:6,canAddEmoji:true,onSkinToneChanged:h.a.noop,handyRxnNames:[],skinToneChoiceNames:[],searchQuery:"",activeSkinToneId:"",groups:[],onSelected:h.a.noop,onClosed:h.a.noop,emojiMap:[],skinToneModifier:""};var W=function(e){v()(t,e);u()(t,null,[{key:"emojiMatchesSkinTone",value:function e(t,r){var a="1";return!t.is_skin||t.skin_tone_id===(r||a)}},{key:"getEmojiPreviewData",value:function e(t){var r=Object(E["n"])(t.display_name||t.name);var a=t.display_names||t.names||"";a=Object(E["p"])(a);if("ja-JP"===k["n"]&&t.name){var n=Object(E["p"])(t.name);a.indexOf(n)<0&&(a+=" "+n)}return{name:r,aliases:a}}},{key:"buildSearchMap",value:function e(t){var r={};for(var a=0;a<t.length;a++){r[t[a].name]=t[a];if(t[a].name!==t[a].names){var n=t[a].names.split(" ");for(var i=0;i<n.length;i++)if(n[i]!==t[a].name){var s=h.a.clone(t[a]);s.display_name=n[i];s.name=n[i];r[n[i]]=s}}}return r}}]);function t(e){s()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onEmojiMouseEnter=r.onEmojiMouseEnter.bind(r);r.onEmojiMouseLeave=r.onEmojiMouseLeave.bind(r);r.onMouseWhileUsingKeyboard=r.onMouseWhileUsingKeyboard.bind(r);r.onListScroll=r.onListScroll.bind(r);r.onSearch=r.onSearch.bind(r);r.onEmojiPickerClick=r.onEmojiPickerClick.bind(r);r.onGroupTabClick=r.onGroupTabClick.bind(r);r.onSkinToneChanged=r.onSkinToneChanged.bind(r);r.onSkinTonePickerOpened=r.onSkinTonePickerOpened.bind(r);r.triggerSelect=r.triggerSelect.bind(r);r.triggerClose=r.triggerClose.bind(r);r.resetSelection=r.resetSelection.bind(r);r.getRowsForGroup=r.getRowsForGroup.bind(r);r.getSearchResults=r.getSearchResults.bind(r);r.setMenuRef=r.setMenuRef.bind(r);r.setSearchInputRef=r.setSearchInputRef.bind(r);r.onSearchInputChange=r.onSearchInputChange.bind(r);r.onSearchInputClick=r.onSearchInputClick.bind(r);r.onSearchDebounced=h.a.debounce(r.onSearch,16,{leading:true});r.onArrowKeyThrottled=h.a.throttle(r.onArrowKey,16);var a=Object(M["a"])(r.props.groups);r.searchMap=t.buildSearchMap(a);r.state={currentSelection:{},isPreviewing:false,isSkinTonePickerOpen:false,searchQuery:e.searchQuery,scrollToIndex:null,activeGroup:r.getFirstTab(e.groups),isScrolledToBottom:false,screenRows:r.getAllRows(e.groups,e.activeSkinToneId,e.searchQuery),handyRxns:Object(R["a"])(a,e.handyRxnNames),skinToneChoices:Object(R["a"])(a,e.skinToneChoiceNames),cursorPosition:B,usingKeyboard:false,mousePosition:null};r.commands=[{keys:["enter","shift+enter"],handler:function e(t){if("tab"===document.activeElement.getAttribute("role"))return;if(!r.state.isPreviewing||!r.state.currentSelection)return;t.preventDefault();r.triggerSelect(t,r.state.currentSelection)}},{keys:["esc"],handler:function e(t){t.preventDefault();r.triggerClose(t)}},{keys:["up","shift+up"],handler:r.onArrowKeyThrottled.bind(r,"up")},{keys:["down","shift+down"],handler:r.onArrowKeyThrottled.bind(r,"down")},{keys:["left","shift+left"],handler:r.onArrowKeyThrottled.bind(r,"left")},{keys:["right","shift+right"],handler:r.onArrowKeyThrottled.bind(r,"right")}];return r}u()(t,[{key:"componentWillMount",value:function e(){this.props.searchQuery&&this.onSearch(this.props.searchQuery);O["d"]("react_emoji_menu_mount_mark")}},{key:"componentDidMount",value:function e(){this.keyCommands=new C["a"](this.element);this.keyCommands.bindAll(this.commands);this.searchInput.focus();O["f"]("react_emoji_menu_mount","react_emoji_menu_mount_mark")}},{key:"componentWillReceiveProps",value:function e(r){var a=this;var n=!h.a.isEqual(this.props.groups,r.groups);var i=this.props.activeSkinToneId!==r.activeSkinToneId;var s=this.state.searchQuery!==r.searchQuery;var o=s?r.searchQuery:this.state.searchQuery;s&&this.onSearch(o);if(n||i){var c=Object(M["a"])(r.groups);this.searchMap=t.buildSearchMap(c);this.setState(function(){return{handyRxns:Object(R["a"])(c,r.handyRxnNames),skinToneChoices:Object(R["a"])(c,r.skinToneChoiceNames),screenRows:a.getAllRows(r.groups,r.activeSkinToneId,o)}})}}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onArrowKey",value:function e(t,r){var a=this;if(this.state.screenRows.length<2)return;var n=t;if(r.target===this.searchInput&&this.state.searchQuery&&(this.state.cursorPosition===B||this.state.cursorPosition===U))if("right"===t&&this.searchInput.selectionEnd===this.searchInput.value.length);else if("left"===t||"right"===t)return;r.preventDefault();this.element.focus();var i=this.moveCursor(n);var s=void 0;s=i[1]<this.state.cursorPosition[1]||1===i[1]?i[1]-1:i[1];this.setState(function(e){return{cursorPosition:i,currentSelection:a.getCell(e.screenRows,i),scrollToIndex:s,isPreviewing:true,usingKeyboard:true,mousePosition:null}})}},{key:"onEmojiMouseEnter",value:function e(t,r){if(this.state.usingKeyboard)return;this.setState(function(){return{currentSelection:t,cursorPosition:[r%F,Math.floor(r/F)],isPreviewing:true,isSkinTonePickerOpen:false}})}},{key:"onEmojiMouseLeave",value:function e(){if(this.state.usingKeyboard)return;this.resetSelection()}},{key:"onMouseWhileUsingKeyboard",value:function e(t){if(!this.state.usingKeyboard)return;var r=[t.clientX,t.clientY];if(!this.state.mousePosition){this.setState(function(){return{mousePosition:r}});return}if(h.a.isEqual(r,this.state.mousePosition))return;this.setState(function(){return{mousePosition:null,usingKeyboard:false,scrollToIndex:null,cursorPosition:B}})}},{key:"onEmojiPickerClick",value:function e(){this.setState(function(){return{isSkinTonePickerOpen:false}})}},{key:"onSkinToneChanged",value:function e(t){this.props.onSkinToneChanged(t.skin_tone_id);this.setState(function(){return{isSkinTonePickerOpen:false}})}},{key:"onSkinTonePickerOpened",value:function e(){this.setState(function(){return{isSkinTonePickerOpen:true}})}},{key:"onSearchInputChange",value:function e(t){this.onSearchDebounced(t.target.value)}},{key:"onSearchInputClick",value:function e(){this.setState(function(){return{cursorPosition:B}})}},{key:"onSearch",value:function e(t){var r=this;O["d"]("react_emoji_menu_search_mark");var a=this.getAllRows(this.props.groups,this.props.activeSkinToneId,t);var n=a.length>=2&&h.a.get(a,"[1].items.length")>=1;var i=t&&n&&h.a.get(a,"[1].items[0]")||{};var s=!!(t&&n);var o=t&&n?U:B;this.setState(function(e,n){return{activeGroup:r.getFirstTab(n.groups),cursorPosition:o,searchQuery:t,screenRows:a,currentSelection:i,isPreviewing:s}},function(){return O["f"]("react_emoji_menu_search","react_emoji_menu_search_mark")})}},{key:"onListScroll",value:function e(t){var r=t.startIndex,a=t.stopIndex;if(this.state.searchQuery)return;var n=this.state.screenRows[r];this.setState(function(e){return{activeGroup:n.group,isScrolledToBottom:a===e.screenRows.length-1,scrollToIndex:null}})}},{key:"onGroupTabClick",value:function e(t){var r=this;var a=this.state.searchQuery?this.getAllRows(this.props.groups,this.props.activeSkinToneId,""):this.state.screenRows;var n=h.a.findIndex(a,function(e){return"group"===e.type&&e.group===t});var i=n||0;this.setState(function(){return{activeGroup:t,scrollToIndex:i,cursorPosition:[0,i+1],searchQuery:"",screenRows:a,currentSelection:h.a.first(t.items),usingKeyboard:true,isPreviewing:true}},function(){return r.searchInput.focus()})}},{key:"setMenuRef",value:function e(t){this.element=t}},{key:"setSearchInputRef",value:function e(t){this.searchInput=t}},{key:"getRow",value:function e(t){return h.a.get(this.state.screenRows,"["+t+"]")}},{key:"getCell",value:function e(t,r){var a=n()(r,2),i=a[0],s=a[1];return h.a.get(t,"["+s+"].items["+i+"]")}},{key:"getFirstTab",value:function e(t){return h.a.get(t,"[0]")}},{key:"getRowsForGroup",value:function e(r,a){var n=h.a.chain(r.items).compact().filter(function(e){return t.emojiMatchesSkinTone(e,a)}).chunk(F).map(function(e){return{type:"emoji",group:r,items:e}}).value();n.unshift({type:"group",group:r});return n}},{key:"getAllRows",value:function e(t,r,a){var n=this;var i=this.getActiveGroups(t,a);var s=h.a.flatMap(i,function(e){return n.getRowsForGroup(e,r)});!a&&this.props.canAddEmoji&&s.push({type:"canAddEmojiTip"});return s}},{key:"getActiveGroups",value:function e(t,r){if(!r)return t;var a=this.getSearchResults(t,r);if(a.length>0)return[{display_name:"Search Results",items:a,name:"search_results"}];return[]}},{key:"getSearchResults",value:function e(t,r){var a=this.props.skinToneModifier?Object(E["l"])(this.props.skinToneModifier):null;var n={searchQuery:r,searchMap:this.searchMap,emojiMap:this.props.emojiMap,skinToneModifier:a};return Object(A["a"])(n)}},{key:"triggerSelect",value:function e(t,r){this.props.onSelected(t,r,this.state.searchQuery);t.shiftKey||this.triggerClose(t)}},{key:"triggerClose",value:function e(t){this.resetSelection();this.props.onClosed();t.stopPropagation()}},{key:"moveCursor",value:function e(t,r){var a=r;a||(a=this.state.cursorPosition);var i=a,s=n()(i,2),o=s[0],c=s[1];if(-1===c)return[0,1];var l=o;var u=c;switch(t){case"down":if(2===this.state.screenRows.length)return this.moveCursor("right",[o,c]);u=c+1;u>=this.state.screenRows.length&&(u=1);break;case"up":if(2===this.state.screenRows.length)return this.moveCursor("left",[o,c]);u=c-1;u<0&&(u=this.state.screenRows.length-1);break;case"left":l=o-1;if(l<0){if(2===this.state.screenRows.length){l=this.getRow(c).items.length;break}u=c-1;"emoji"!==this.getRow(u).type&&(u-=1);u<0&&(u=h.a.findLastIndex(this.state.screenRows,{type:"emoji"}));l=this.getRow(u).items.length-1}break;case"right":l=o+1;if(l>=this.getRow(c).items.length){if(2===this.state.screenRows.length){l=0;break}u=c+1;u>h.a.findLastIndex(this.state.screenRows,{type:"emoji"})&&(u=0);"emoji"!==this.getRow(u).type&&(u+=1);l=0}break;default:break}if("emoji"!==this.getRow(u).type)return this.moveCursor(t,[l,u]);var d=this.getCell(this.state.screenRows,[l,u]);d||(l=this.getRow(u).items.length-1);return[l,u]}},{key:"resetSelection",value:function e(){this.setState(function(){return{currentSelection:{},isPreviewing:false,scrollToIndex:null,cursorPosition:B}})}},{key:"maybeRenderHandyRxns",value:function e(){if(!this.state.handyRxns.length)return null;return g.a.createElement(N["a"],{handyRxns:this.state.handyRxns,numBackgroundColors:this.props.numBackgroundColors,onSelected:this.triggerSelect,onMouseEnter:this.onEmojiMouseEnter,onMouseLeave:this.onEmojiMouseLeave})}},{key:"maybeRenderSkinTonePicker",value:function e(){if(!this.props.skinToneChoiceNames.length)return null;return g.a.createElement(T["a"],{activeSkinToneId:this.props.activeSkinToneId,choices:this.state.skinToneChoices,isOpen:this.state.isSkinTonePickerOpen,onOpen:this.onSkinTonePickerOpened,onSkinToneChanged:this.onSkinToneChanged})}},{key:"renderEmojiPreview",value:function e(){var r=0===this.state.screenRows.length;var a=this.state.currentSelection;var n=t.getEmojiPreviewData(a);if(r){var i=Object(M["a"])(this.props.groups);a=Object(R["a"])(i,L)[0];n=t.getEmojiPreviewData(a)}var s=y()("p-emoji_picker__preview_text",{"p-emoji_picker__preview_text--shortened":!this.props.activeSkinToneId});return g.a.createElement("div",{className:"p-emoji_picker__preview"},g.a.createElement("span",{className:"p-emoji_picker__preview_img","data-qa":"emoji_preview_img"},g.a.createElement(S["a"],{emoji:a})),g.a.createElement("div",{className:s},g.a.createElement("span",{"data-qa":"emoji_preview_name"},r?D.t("Oh no!"):n.name),g.a.createElement("br",null),g.a.createElement("span",{className:"p-emoji_picker__preview_aliases","data-qa":"emoji_preview_aliases"},r?D.t("We couldn\u2019t find that emoji"):n.aliases)))}},{key:"renderStickyHeader",value:function e(){var t=this.state.searchQuery?D.t("Search Results"):this.state.activeGroup.display_name;return g.a.createElement("div",{className:"p-emoji_picker__sticky_header",id:"emoji-picker-sticky-header"},g.a.createElement("h3",{className:"p-emoji_picker__heading"},t))}},{key:"render",value:function e(){var t=this.state,r=t.screenRows,a=t.isScrolledToBottom,n=t.activeGroup;var i=0===r.length;var s=a?h.a.last(this.props.groups):n;var o=this.state.currentSelection.name?"emoji-picker-"+this.state.currentSelection.name.replace(/:/g,""):null;var c=y()("menu","p-emoji_picker",{"p-emoji_picker--keyboard_mode":this.state.usingKeyboard});var l=y()("p-emoji_picker__footer",{"p-emoji_picker__footer--previewing":this.state.isPreviewing||i});var u=D.t("Use the left, right, up and down arrow keys to navigate the emoji search results.");return g.a.createElement("div",{className:c,"data-using-keyboard":this.state.usingKeyboard,onClick:this.onEmojiPickerClick,onMouseMove:this.onMouseWhileUsingKeyboard,ref:this.setMenuRef,role:"presentation"},g.a.createElement("div",{className:"p-emoji_picker__content"},g.a.createElement(I["a"],{groups:this.props.groups,activeGroup:s,onGroupTabClick:this.onGroupTabClick}),g.a.createElement("div",{className:"p-emoji_picker__input_container"},g.a.createElement("input",{ref:this.setSearchInputRef,className:"p-emoji_picker__input",type:"text",placeholder:D.t("Search"),onChange:this.onSearchInputChange,onClick:this.onSearchInputClick,"aria-activedescendant":o,"aria-owns":"emoji-picker-list","aria-autocomplete":"list",role:"textbox","aria-label":D.t("Search for an emoji",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049"}),"aria-describedby":"emoji-picker-search-description"}),g.a.createElement("span",{className:"hidden",id:"emoji-picker-search-description"},u),g.a.createElement(j["a"],{type:"search",className:"p-emoji_picker__icon_search"})),g.a.createElement("div",{className:"p-emoji_picker__list_container",role:"tabpanel","aria-labelledby":"emoji-picker-sticky-header"},this.renderStickyHeader(),g.a.createElement("div",{className:"p-emoji_picker__list"},g.a.createElement(w["a"],{screenRows:this.state.screenRows,numBackgroundColors:this.props.numBackgroundColors,onSelected:this.triggerSelect,onMouseEnter:this.onEmojiMouseEnter,onMouseLeave:this.onEmojiMouseLeave,scrollToIndex:this.state.scrollToIndex,onScroll:this.onListScroll,numEmojiPerRow:F,currentSelection:this.state.currentSelection,cursorPosition:this.state.cursorPosition}))),g.a.createElement("div",{className:l},this.maybeRenderHandyRxns(),this.renderEmojiPreview(),g.a.createElement("div",{className:"p-emoji_picker__emoji_deluxe_label"},g.a.createElement("span",null,D.t("Emoji Deluxe")),"\u2122"),this.maybeRenderSkinTonePicker())))}}]);return t}(b["Component"]);W.displayName="EmojiPicker";W.defaultProps=H;t["a"]=W},22390:function(e,t,r){"use strict";var a=r(22391);t["a"]=a["a"]},22391:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(95);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(3271);var O=r(1227);var k=r(91);var j=r(21703);var C=r(5);var E=r(882);var S=r(378);var w=r(1076);var I=r(22922);var T=r(69);var N=r(3184);var R=r(1487);var A=r(22392);var M=r(20181);var P=r.n(M);var x=new C["b"]("connected_workspaces");var D={currentTeam:v.a.object.isRequired,onBack:v.a.func,onClose:v.a.func.isRequired,referringUiElement:v.a.string,fetchExternalTeams:v.a.func};var F={currentTeam:{},onBack:null,onClose:_.a.noop,referringUiElement:null,fetchExternalTeams:_.a.noop};var L="SHARED_CHANNELS_MANAGE_MODAL_OPEN";var B=function(e){u()(t,e);c()(t,null,[{key:"filterWorkspaces",value:function e(t,r){if(!t||!t.trim())return r;var a=_.a.toLower(t);var n=[];for(var i=0;i<r.length;i+=1){var s=_.a.toLower(r[i].name);var o=r[i].domain;if(s&&(-1!==s.indexOf(a)||-1!==o.indexOf(a))){n.push(r[i]);if(n.length===r.length)break}}return n}}]);function t(e){n()(this,t);var r=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderConnectedWorkspacesRow=r.renderConnectedWorkspacesRow.bind(r);r.handleSearchInputChange=r.handleSearchInputChange.bind(r);r.state={searchQuery:"",isLoading:true,workspaces:[]};return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=this.props.referringUiElement;var a={event:L};r&&(a.element=r);Object(k["d"])(a);this.props.fetchExternalTeams().then(function(e){t.setState(function(){return{isLoading:false,workspaces:e}})})}},{key:"handleSearchInputChange",value:function e(t){this.setState(function(){return{searchQuery:t.target.value}})}},{key:"renderSearchInput",value:function e(){if(this.state.isLoading)return null;return h.a.createElement(S["a"],{enabled:["feature_esc_connected_workspaces_search"]},h.a.createElement(I["a"],{className:"margin_top_150",placeholder:x.t("Search by workspace..."),icon:"search",autoFocus:true,onChange:this.handleSearchInputChange}))}},{key:"renderConnectedWorkspacesRow",value:function e(t){if(!t.channels.length)return null;var r=this.props.onClose;return h.a.createElement(A["a"],{workspace:t,key:t.id,onClose:r})}},{key:"renderNoConnectedWorkspacesState",value:function e(){var t=this;return h.a.createElement(S["a"],{enabled:["feature_esc_connected_workspaces_search"]},h.a.createElement("div",{className:"p-connected_workspaces__empty"},h.a.createElement("span",{className:"p-connected_workspaces__no_shared_channels"},x.rt("Shared channels let you work with other companies and teams, from right inside Slack. <a>Learn more</a>",null,function(e){var t=e.key,r=e.text;return h.a.createElement("a",{key:t,href:"https://get.slack.help/hc/articles/115004151183"},r)})),h.a.createElement(N["d"],{type:"outline",className:"margin_top_100",onClick:function e(){Object(R["c"])();t.props.onClose()}},x.t("Create a Shared Channel"))))}},{key:"renderNoSearchResultsState",value:function e(){return h.a.createElement(S["a"],{enabled:["feature_esc_connected_workspaces_search"]},h.a.createElement("div",{className:"p-connected_workspaces__empty"},h.a.createElement("span",null,x.rt("No matches found for <strong>{query}</strong>",{query:this.state.searchQuery}))))}},{key:"renderWorkspaces",value:function e(){var r=this.state,a=r.isLoading,n=r.searchQuery,i=r.workspaces;if(a)return null;if(!i.length)return this.renderNoConnectedWorkspacesState();var s=t.filterWorkspaces(n,i);if(!s.length)return this.renderNoSearchResultsState();var o=s.sort(function(e,t){return Object(E["a"])(e.name,t.name)});var c=o.map(this.renderConnectedWorkspacesRow);return h.a.createElement("div",null,h.a.createElement("div",{className:"p-connected_workspaces_row p-connected_workspaces_row--header"},h.a.createElement("div",{className:"p-connected_workspaces_row__item"},x.t("Workspace")),h.a.createElement("div",{className:"p-connected_workspaces_row__item"},x.t("Shared channels")),h.a.createElement("div",{className:"p-connected_workspaces_row__item"})),c)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.currentTeam,n=r.onBack,i=r.onClose;var s=this.state.workspaces;var o=_.a.chain(s).filter(function(e){return e.channels.length>0}).size().value();var c=x.rt("<strong>{currentTeamName}</strong> is currently sharing channels with {count, plural, =1 {<strong># other workspace</strong>.} other {<strong># other workspaces</strong>.}}",{currentTeamName:Object(j["getTeamDisplayName"])(a),count:o});var l=b()("p-connected_workspaces__list",{"p-connected_workspaces__list--loading":this.state.isLoading});return h.a.createElement(w["a"],{showBackButton:!!n,showCancelButton:false,showGoButton:false,onBack:function e(){t.props.onBack();t.props.onClose()},onCancel:i,modalClasses:"p-connected_workspaces_modal",title:x.t("Manage shared channels")},h.a.createElement("div",{className:"p-connected_workspaces"},h.a.createElement("div",{className:"p-connected_workspaces__header"},h.a.createElement("div",{className:"p-connected_workspaces__header_description"},h.a.createElement(S["a"],{enabled:["feature_esc_connected_workspaces_search"]},s.length?c:x.rt("Currently, <strong>{currentTeamName}</strong> isn\u2019t sharing any channels.",{currentTeamName:Object(j["getTeamDisplayName"])(a)})),h.a.createElement(S["a"],{disabled:["feature_esc_connected_workspaces_search"]},c))),this.renderSearchInput(),h.a.createElement("div",{className:l},h.a.createElement(T["a"],{className:"p-connected_workspaces__spinner",size:"medium"}),this.renderWorkspaces())))}}]);return t}(p["Component"]);B.displayName="ConnectedWorkspaces";B.defaultProps=F;var U=function e(t){return{currentTeam:Object(y["getCurrentTeam"])(t)}};var q={fetchExternalTeams:O["b"]};t["a"]=Object(f["connect"])(U,q)(B)},22392:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(5);var O=r(91);var k=r(21705);var j=r(21711);var C=r(3271);var E=r(22264);var S=r(1487);var w=r(1036);var I=r(907);var T=r(21703);var N=r(3184);var R=r(37);var A=r(266);var M=r(442);var P=r(60);var x=r(271);var D=r(1078);var F=r(195);var L=r(21802);var B=r(20181);var U=r.n(B);var q=new y["b"]("connected_workspaces");var H={currentTeam:h.a.object.isRequired,workspace:h.a.object.isRequired,workspaceChannels:h.a.array.isRequired,onClose:h.a.func.isRequired,openModal:h.a.func};var W={currentTeam:{},workspace:{},workspaceChannels:[],onClose:_.a.noop,openModal:_.a.noop};var G="SHARED_CHANNELS_MANAGE_MODAL_ACTION";var V=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isCheckboxChecked:false};r.renderActionMenu=r.renderActionMenu.bind(r);r.showDialog=r.showDialog.bind(r);r.handleCheckboxChange=r.handleCheckboxChange.bind(r);return r}c()(t,[{key:"componentDidUpdate",value:function e(t,r){this.dialog&&r.isCheckboxChecked!==this.state.isCheckboxChecked&&this.dialog.render({goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked})}},{key:"calculateChannelNumbers",value:function e(){var t=this.props.workspaceChannels;var r=_.a.partition(t,function(e){return!e||Object(I["isPrivateChannel"])(e)});if(!r)return{numTotalChannels:0,numPrivateChannels:0};var a=r[1].length;var n=r[0].length;return{numPublicChannels:a,numPrivateChannels:n}}},{key:"createChannelString",value:function e(t){var r=t.numPublicChannels,a=t.numPrivateChannels;var n=q.t("{count, plural, =1 {# channel} other {# channels}}",{count:r+a});var i=a?q.t(" ({count} private)",{count:a}):"";return""+n+i}},{key:"handleCheckboxChange",value:function e(){this.setState(function(e){return{isCheckboxChecked:!e.isCheckboxChecked}})}},{key:"showDialog",value:function e(){this.dialog=this.props.openModal({element:this.renderDialog()})}},{key:"renderDialog",value:function e(){var t=this.props,r=t.currentTeam,a=t.onClose;var n=this.props.workspace,i=n.name,s=n.id;var o=q.rt("<strong>This cannot be undone</strong>. Please double-check the info below.");var c=this.calculateChannelNumbers();var l=q.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:c.numPublicChannels});var u=q.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:c.numPrivateChannels});return m.a.createElement(x["a"],{title:q.t("Stop sharing all channels with {workspaceName}?",{workspaceName:i}),goButtonText:q.t("Stop Sharing"),goButtonType:"danger",onCancel:function e(){Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CANCEL_BTN"})},onGo:function e(){Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CONFIRM_BTN"});Object(w["F"])(s).then(a)},truncateTitle:false,goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked},m.a.createElement(L["a"],{level:"error"},o),m.a.createElement("p",null,m.a.createElement("strong",null,q.t("What will happen:"))),m.a.createElement("ul",null,m.a.createElement("li",null,q.t("{currentTeamName} and {targetWorkspaceName} will keep separate copies of each channel.",{currentTeamName:Object(T["getTeamDisplayName"])(r),targetWorkspaceName:i})),m.a.createElement("li",null,q.t("Each workspace can continue using their copies.")),m.a.createElement("li",null,q.t("You won\u2019t be able to reshare any of these channels."))),m.a.createElement("p",null,m.a.createElement("strong",null,q.t("You\u2019re about to stop sharing:"))),m.a.createElement("ul",null,c.numPublicChannels?m.a.createElement("li",null,l):"",c.numPrivateChannels?m.a.createElement("li",null,u):"",m.a.createElement("li",null,q.t("All direct and group messages"))),m.a.createElement(F["a"],{text:q.rt("<strong>Yes, stop sharing all channels with {targetWorkspaceName}</strong>",{targetWorkspaceName:i}),htmlFor:"confirmStopSharingAll",type:"inline",cursor:"pointer"},m.a.createElement(D["a"],{id:"confirmStopSharingAll",isRequired:true,onChange:this.handleCheckboxChange})))}},{key:"renderActionMenu",value:function e(t){var r=this;var a=this.props.workspaceChannels;var i=this.props.workspace,s=i.id,o=i.domain;var c=q.t("Stop sharing {count, plural, =1 {this channel} other {these channels}}",{count:a.length});return m.a.createElement(A["e"],n()({},t,{width:"auto"}),m.a.createElement(A["b"],{label:q.t("View shared channels"),onSelected:function e(){Object(E["c"])({show_which_channels:"ext_shared_team_"+s,onBack:E["b"]});Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_VIEW_CHANNELS_BTN"});r.props.onClose()}}),m.a.createElement(A["b"],{label:q.t("Share a new channel"),onSelected:function e(){Object(S["c"])({team_url:o,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});r.props.onClose()}}),m.a.createElement(A["b"],{label:c,danger:true,onSelected:function e(){Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_BTN"});r.showDialog()}}))}},{key:"render",value:function e(){var t=this;var r=this.props.workspace,a=r.id,n=r.name,i=r.domain,s=r.icon;return m.a.createElement("div",{className:"p-connected_workspaces_row"},m.a.createElement("div",{className:"p-connected_workspaces_row__item"},m.a.createElement(M["b"],{teamName:n,size:35,icon:s,className:"p-connected_workspaces_row__workspace_icon margin_right_75"}),m.a.createElement("div",{className:"p-connected_workspaces_row__workspace_info"},m.a.createElement("div",{className:"p-connected_workspaces_row__workspace_name overflow_ellipsis"},n),m.a.createElement("div",{className:"p-connected_workspaces_row__workspace_domain overflow_ellipsis"},i+".slack.com"))),m.a.createElement("div",{className:"p-connected_workspaces_row__item"},m.a.createElement(P["d"],{tip:q.t("View channels"),position:"top"},m.a.createElement(N["c"],{className:"p-connected_workspaces_row__channels overflow_ellipsis",onClick:function e(){Object(E["c"])({show_which_channels:"ext_shared_team_"+a,onBack:E["b"]});Object(O["d"])({event:G,element:"SHARED_CHANNELS_MANAGE_MODAL_CHANNEL_COUNT_BTN"});t.props.onClose()}},this.createChannelString(this.calculateChannelNumbers())))),m.a.createElement("div",{className:"p-connected_workspaces_row__item"},m.a.createElement("div",{className:"p-connected_workspaces_row__actions"},m.a.createElement(A["d"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20},m.a.createElement(N["c"],null,m.a.createElement(R["a"],{type:"ellipsis"}))))))}}]);return t}(f["Component"]);V.displayName="ConnectedWorkspacesRow";V.defaultProps=W;var z=function e(t,r){var a=_.a.map(r.workspace.channels,function(e){return Object(j["e"])(t,e)});return{workspaceChannels:a,currentTeam:Object(C["getCurrentTeam"])(t)}};var K={openModal:k["openModal"]};t["a"]=Object(b["connect"])(z,K)(V)},22393:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22394);var n=r(42);Object(n["a"])("interop.mountCustomStatusInput",a["a"]);Object(n["a"])("interop.unmountCustomStatusInput",a["b"])},22394:function(e,t,r){"use strict";r.d(t,"a",function(){return v});r.d(t,"b",function(){return p});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(21708);var d=r(21858);var v=function e(t,r,a){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i="react_custom_status_input_render";Object(u["d"])(i+"_mark");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(t)},n.a.createElement(d["d"],a)),r,function(){return Object(u["f"])(i,i+"_mark")})};var p=s.a.unmountComponentAtNode},2240:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(333);var k=r(37);var j=r(5);var C=r(212);var E=r(22146);var S=r(414);var w=new j["b"]("emoji_picker");var I=33;var T=54;var N=28;var R=10;var A=/:/g;var M={onSelected:g.a.func,onMouseEnter:g.a.func,onMouseLeave:g.a.func,onScroll:g.a.func,scrollToIndex:g.a.number,numBackgroundColors:g.a.number.isRequired,screenRows:g.a.array,numEmojiPerRow:g.a.number.isRequired,currentSelection:g.a.object,cursorPosition:g.a.array,showEmojiUpdateOverlay:g.a.bool};var P={onSelected:h.a.noop,onMouseEnter:h.a.noop,onMouseLeave:h.a.noop,onScroll:h.a.noop,scrollToIndex:null,screenRows:[],currentSelection:{},cursorPosition:[],showEmojiUpdateOverlay:false};var x=function e(t,r,a){if("emoji"===t.type&&r>0)return h.a.filter(a.slice(0,r),{type:"emoji"}).reduce(function(e,t){return e+t.items.length},0);return 0};var D=function e(t,r){if("emoji"===t.type)return h.a.filter(r,{type:"emoji"}).reduce(function(e,t){return e+t.items.length},0);return 0};var F=function(e){v()(t,e);u()(t,null,[{key:"renderGroupItem",value:function e(t){return y.a.createElement("h3",{className:"p-emoji_picker__heading"},t.display_name)}},{key:"renderEmptyState",value:function e(){return y.a.createElement("div",null,y.a.createElement("h3",{className:"p-emoji_picker__heading"},w.t("Search Results")),y.a.createElement("div",{className:"p-emoji_picker__no_results"},w.t("No emoji found")))}}]);function t(e){s()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getRowHeight=r.getRowHeight.bind(r);r.renderRow=r.renderRow.bind(r);r.setListRef=r.setListRef.bind(r);r.virtualList=null;return r}u()(t,[{key:"componentWillReceiveProps",value:function e(t){h.a.isNumber(t.scrollToIndex)&&this.virtualList.scrollToRow(t.scrollToIndex)}},{key:"onEmojiClick",value:function e(t,r){t.preventDefault();this.props.onSelected(t,r)}},{key:"getRowHeight",value:function e(t){var r=t.index;var a=this.props.screenRows[r];switch(a.type){case"search":return T;case"group":return N;case"emoji":var n=this.props.screenRows.length-1===r;return n?I+R:I;default:return I}}},{key:"setListRef",value:function e(t){this.virtualList=t}},{key:"isEmojiSelected",value:function e(t,r){var a=this.props,n=a.cursorPosition,i=a.numEmojiPerRow;var s=t.name===h.a.get(this.props.currentSelection,"name");var o=n[1]*i+n[0];var c=r===o;return s&&c}},{key:"usingKeyboard",value:function e(){return-1!==this.props.cursorPosition[1]}},{key:"renderCanAddEmojiTip",value:function e(){return y.a.createElement("div",{className:"p-emoji_picker__tip p-emoji_picker__tip--can_add_emoji"},y.a.createElement(k["a"],{type:"plus",className:"c-deprecated-icon--inherit tiny_right_margin"}),y.a.createElement("span",{dangerouslySetInnerHTML:{__html:w.t('You can <a href="/admin/emoji" target="_blank">add custom emoji here</a>')}}))}},{key:"renderEmojiItem",value:function e(t,r,a,n){var i=this;var s=j["n"]!==j["b"].DEFAULT_LOCALE?Object(C["m"])(t.name):t.name;return y.a.createElement("a",{key:t.name,onClick:function e(r){return i.onEmojiClick(r,t)},onMouseEnter:function e(){return i.props.onMouseEnter(t,r)},onMouseLeave:function e(){return i.props.onMouseLeave(t)},className:m()("p-emoji_picker__list_item",{key_selection:this.usingKeyboard()&&this.isEmojiSelected(t,r)}),"data-color-index":r%this.props.numBackgroundColors,"data-name":t.name,"data-names":t.names,"data-qa":"emoji_list_item",id:"emoji-picker-"+t.name.replace(A,""),"aria-label":Object(E["a"])(s),tabIndex:"-1","aria-selected":this.isEmojiSelected(t,r),role:"option","aria-posinset":n,"aria-setsize":a},y.a.createElement(S["a"],{emoji:t}))}},{key:"renderRow",value:function e(r){var a=this;var n=r.index,i=r.key,s=r.style;var o=this.props.screenRows[n];var c=n;if(0===c)return null;var l=void 0;var u=x(o,c,this.props.screenRows);var d=D(o,this.props.screenRows);switch(o.type){case"group":l=t.renderGroupItem(o.group);break;case"canAddEmojiTip":l=this.renderCanAddEmojiTip();break;case"emoji":l=o.items.map(function(e,t){var r=c*a.props.numEmojiPerRow+t;var n=u+t+1;return a.renderEmojiItem(e,r,d,n)});break;default:break}return y.a.createElement("div",{key:i,style:s,role:"presentation"},l)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.screenRows,i=r.numBackgroundColors,s=r.numEmojiPerRow;var o={screenRows:a,numBackgroundColors:i,numEmojiPerRow:s};return y.a.createElement(O["a"],null,function(e){var r=e.height,a=e.width;return y.a.createElement(O["b"],n()({},o,{className:"p-emoji_picker__list_scroller",height:r,rowCount:t.props.screenRows.length,rowHeight:t.getRowHeight,rowRenderer:t.renderRow,scrollToAlignment:t.usingKeyboard()?"auto":"start",width:a,onRowsRendered:t.props.onScroll,noRowsRenderer:t.renderEmptyState,cursorPosition:t.props.cursorPosition,ref:t.setListRef,tabIndex:t.props.showEmojiUpdateOverlay?-1:null,id:"emoji-picker-list",role:"listbox","aria-label":""}))})}}]);return t}(_["PureComponent"]);F.displayName="EmojiList";t["a"]=F;F.defaultProps=P},22405:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22406);var n=r(42);Object(n["a"])("interop.mountFileUploadBanner",a["a"]);Object(n["a"])("interop.unmountFileUploadBanner",a["b"])},22406:function(e,t,r){"use strict";t["a"]=d;t["b"]=v;var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(1590);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var a=Object(l["c"])(e);Object(c["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function v(e){s.a.unmountComponentAtNode(e)}},22407:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22408);var n=r(42);Object(n["a"])("interop.mountFilesFlexpane",a["a"])},22408:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22409);var l=function e(t,r){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var a=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["a"],null)),r)};t["a"]=l},22409:function(e,t,r){"use strict";var a=r(22410);t["a"]=a["a"]},2241:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(37);var y=r(3189);var O={groups:v.a.array.isRequired,activeGroup:v.a.object,onGroupTabClick:v.a.func};var k={activeGroup:{},onGroupTabClick:h.a.noop};var j=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderEmojiGroupTab",value:function e(t){var r=this;var a=g()("p-emoji_picker__group_tab",{"p-emoji_picker__group_tab--active":this.props.activeGroup===t});var n=function e(){return r.props.onGroupTabClick(t)};return m.a.createElement(y["a"],{key:t.name,type:"button",role:"tab",className:a,onClick:n,"aria-label":t.display_name,"aria-selected":this.props.activeGroup===t?"true":"false"},m.a.createElement("span",{className:"emoji-sizer",title:t.display_name},m.a.createElement(_["a"],{type:t.tab_icon_name})))}},{key:"render",value:function e(){var t=this;return m.a.createElement("div",{className:"p-emoji_picker__group_tabs",role:"tablist"},this.props.groups.map(function(e){return t.renderEmojiGroupTab(e)}))}}]);return t}(f["PureComponent"]);j.displayName="EmojiGroupTabs";t["a"]=j;j.defaultProps=k},22410:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(21751);var l=r(22169);var u=r(22411);var d=r(22421);function v(e){if(e.fileId)return n.a.createElement(u["a"],e);if(e.list)return n.a.createElement(d["a"],e);return null}v.defaultProps={fileId:null,list:false,origin:null};function p(e){var t=Object(c["getFlexpaneState"])(e),r=t.flexName,a=t.flexExtra,n=t.flexOrigin;var i=Object(l["a"])(a);return{list:"files"===r&&!i,fileId:"files"===r&&i?a:null,origin:"files"===r?n:null}}t["a"]=Object(o["connect"])(p)(v)},22411:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(3);var b=r.n(m);var g=r(333);var _=r(8);var y=r.n(_);var O=r(12);var k=r(21706);var j=r(54);var C=r(21698);var E=r(3275);var S=r(252);var w=r(3203);var I=r(113);var T=r(215);var N=r(5);var R=r(21701);var A=r(22968);var M=r(22412);var P=r(21734);var x=r(200);var D=r(366);var F=r(148);var L=r(3189);var B=r(21928);var U=r(22413);var q=r(22414);var H=r(22415);var W=r(283);var G=r(37);var V=r(497);var z=r(22416);var K=r(23064);var Q=r(997);var Y=r(22418);var J=r(21832);var Z=r(22419);var X=r(22420);var $=r(20227);var ee=r.n($);var te=r(20182);var re=r.n(te);var ae=new N["b"]("file-details");var ne={file:I["a"].File(),origin:b.a.string,featureFileThreads:b.a.bool,useGlobalNav:b.a.bool,do24hrTime:b.a.bool,fileIsFetching:b.a.bool,reloadFile:b.a.func,userId:b.a.string,botId:b.a.string,ownerName:b.a.string};var ie={file:null,origin:null,featureFileThreads:false,useGlobalNav:false,do24hrTime:false,fileIsFetching:false,reloadFile:v.a.noop,userId:"",botId:"",ownerName:""};var se=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.goBack=r.goBack.bind(r);r.renderPreview=r.renderPreview.bind(r);r.renderImage=r.renderImage.bind(r);r.renderSnippet=r.renderSnippet.bind(r);r.renderPost=r.renderPost.bind(r);r.renderEmail=r.renderEmail.bind(r);r.renderGeneric=r.renderGeneric.bind(r);r.onNameClick=r.onNameClick.bind(r);return r}s()(t,[{key:"onNameClick",value:function e(t){if(Object(P["a"])(t))return;var r=this.props,a=r.userId,n=r.botId;if(!a&&!n)return;t.preventDefault();t.persist();n?Object(D["a"])(t,n):Object(x["a"])(t,a)}},{key:"goBack",value:function e(){var t=this.props.origin;Object(M["a"])(t)}},{key:"isImage",value:function e(){return"image"===Object(S["getFileType"])(this.props.file)}},{key:"renderImage",value:function e(){return h.a.createElement(B["a"],{file:this.props.file,stretch:true})}},{key:"renderSnippet",value:function e(){return h.a.createElement(U["a"],{fileId:this.props.file.id})}},{key:"renderPost",value:function e(){return h.a.createElement(q["a"],{fileId:this.props.file.id})}},{key:"renderEmail",value:function e(){return h.a.createElement(H["a"],{fileId:this.props.file.id})}},{key:"renderGeneric",value:function e(){return h.a.createElement(F["d"],{file:this.props.file})}},{key:"renderPreview",value:function e(){var t=this.props.file;var r=Object(S["getFileType"])(t);if("image"===r)return this.renderImage();if("snippet"===r)return this.renderSnippet();if("post"===r)return this.renderPost();if("docs"===r)return this.renderPost();if("email"===r)return this.renderEmail();if("generic"===r)return this.renderGeneric();return null}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,r=t.file,a=t.do24hrTime,n=t.featureFileThreads,i=t.ownerName,s=t.userId,o=t.botId;var c="";!Object(S["isFilePublic"])(r)&&n&&(c=h.a.createElement("div",{className:"p-file_details__private"},ae.t("Private file")));var l="";l=o?"/services/"+o:"/team/"+s;return h.a.createElement("div",{className:"p-file_details__user_meta"},h.a.createElement(W["a"],{href:l,className:"p-file_details__user_link",onClick:this.onNameClick},i),o&&n&&h.a.createElement(K["a"],null),h.a.createElement("div",{className:"p-file_details__upload_date"},ae.rt("{date} at {time}",{date:Object(T["f"])(r.timestamp),time:Object(T["i"])(r.timestamp,{do24hrTime:a})})),c)}},{key:"renderBackButtonAndTitle",value:function e(){var t=this.props,r=t.origin,a=t.featureFileThreads;if(!a&&!Object(R["a"])())return null;var n=ae.rt("Files");"member_preview"===r?n=ae.rt("Member"):"starred_items"===r?n=ae.rt("Starred Items"):"search_results"===r?n=ae.rt("Search Results"):"channel_page"===r?n=ae.rt("Channel Details"):"group_page"===r?n=ae.rt("Channel Info"):"im_page"===r?n=ae.rt("Conversation Details"):"mentions"===r&&(n=ae.rt("Activity"));return h.a.createElement(L["a"],{className:"p-file_details__header_back",onClick:this.goBack},h.a.createElement(G["a"],{type:"chevron-medium-left",className:"p-file_details__header_back_icon"}),h.a.createElement("span",null,n))}},{key:"renderComments",value:function e(){var t=this.props.file;if(v.a.isEmpty(t.comments))return null;return h.a.createElement("div",{className:"p-file_details__comments"},h.a.createElement("hr",{className:"p-file_details__comment_separator"}),h.a.createElement(z["a"],{comments:t.comments}))}},{key:"renderBody",value:function e(){var t=this.props,r=t.file,a=t.featureFileThreads,n=t.fileIsFetching,i=t.reloadFile;var s=a||Object(R["a"])();if(n&&!r)return null;if(!r)return h.a.createElement(Z["a"],{tryAgain:i,featureFileThreads:s});if(Object(S["isTombstone"])(r))return h.a.createElement(X["a"],{featureFileThreads:s});var o={};if(this.isImage()){o.maxWidth=(r.thumb_480_w||r.thumb_360_w)+"px";o.maxHeight=(r.thumb_480_h||r.thumb_360_h)+"px"}var c=Object(S["getFileType"])(r);var l="image"===c||"snippet"===c;var u=y()("p-file_details__meta",{"p-file_details__meta--show_filename":l});return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-file_details__meta_container"},h.a.createElement("div",{className:u},l?h.a.createElement(F["c"],{file:r,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),h.a.createElement(Q["a"],{file:r})),h.a.createElement("div",{className:"p-file_details__preview",style:o},this.renderPreview()),this.renderComments(),h.a.createElement(Y["a"],{file:r,featureFileThreads:s}))}},{key:"render",value:function e(){var t=this;var r=!this.props.useGlobalNav&&h.a.createElement(J["a"],null,this.renderBackButtonAndTitle());return h.a.createElement("div",{className:"p-file_flexpane"},r,h.a.createElement("div",{className:"p-file_flexpane__content"},h.a.createElement(g["a"],null,function(e){var r=e.width,a=e.height;return h.a.createElement(V["a"],{width:r,height:a,fade:true},h.a.createElement("div",{className:"p-file_details"},t.renderBody()))})))}}]);return t}(p["PureComponent"]);se.displayName="FileDetails";se.defaultProps=ie;var oe=function e(t,r){var a=r.fileId;if(!a)return{};var n=Object(k["getFileById"])(t,a);if(!n)return{};var i=Object(S["getFileEntityId"])(n),s=i.userId,o=i.botId;var c=s?Object(C["getMemberById"])(t,s):null;var l=c?Object(w["d"])(c):null;var u=o||l;var d="";if(u){var v=Object(E["getBotById"])(t,u);v&&v.name&&(d=v.name)}!d&&c&&(d=Object(w["r"])(t,c));d||(d=n.username);return{file:Object(k["getFileById"])(t,a),featureFileThreads:Object(O["isFeatureEnabled"])(t,"feature_file_threads"),useGlobalNav:Object(A["b"])(t),do24hrTime:Object(j["getUserPref"])(t,"time24"),userId:s,botId:u,ownerName:d}};var ce=Object(f["connect"])(oe)(se);t["a"]=Object(F["e"])(ce,{alwaysFetchOnMount:true})},22412:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.client.ui.files.backButtonOnClick")},22413:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(21706);var _=r(12);var y=r(5);var O=r(1078);var k=r(195);var j=r(1513);var C=r(20224);var E=r.n(C);var S=new y["b"]("snippet");var w={featureFileThreads:m.a.bool};var I={featureFileThreads:true};var T=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onWrapLinesChange=r.onWrapLinesChange.bind(r);r.state={wrapLines:true};return r}c()(t,[{key:"onWrapLinesChange",value:function e(t){var r=t.target.checked;this.setState(function(e){return n()({},e,{wrapLines:!!r})})}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;return[h.a.createElement(j["a"],n()({key:"snippet"},this.props,{wrapLines:this.state.wrapLines})),h.a.createElement(k["a"],{key:"checkbox",text:S.rt("Wrap"),htmlFor:"snippet-wrap",type:"inline",cursor:"pointer",className:"p-flexpane_snippet__wrap"},h.a.createElement(O["a"],{checked:this.state.wrapLines,id:"snippet-wrap",onChange:this.onWrapLinesChange}))]}}]);return t}(p["PureComponent"]);T.displayName="FlexpaneSnippet";T.defaultProps=I;function N(e,t){var r=t.fileId;var a=Object(g["getFileById"])(e,r);if(!a)return{};var n=a.is_truncated,i=a.permalink;var s=a.content_highlight_html||a.preview_highlight||"";var o=false;return{file:a,snippetHtml:s,isTruncated:n,permalink:i,isExpandable:o,featureFileThreads:Object(_["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(b["connect"])(N)(T)},22414:function(e,t,r){"use strict";var a=r(9);var n=r(21706);var i=r(54);var s=r(1517);function o(e,t){var r=t.fileId;var a=Object(n["getFileById"])(e,r);if(!a)return{};var s=a.content_html||a.preview||"";var o=false===Object(i["getUserPref"])(e,"a11y_animations");var c=false;var l=false;return{postHtml:s,file:a,timestamp:a.updated||a.timestamp,allowAnimations:!o,showActions:l,isExpandable:c}}t["a"]=Object(a["connect"])(o)(s["a"])},22415:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(9);var s=r(21706);var o=r(54);var c=r(1522);function l(e,t){var r=t.fileId;var a=Object(s["getFileById"])(e,r);if(!a)return{};var i=false;var c=true;return{file:a,sentToSelf:a.sent_to_self,sender:n.a.first(a.from),to:a.to,cc:a.cc,title:a.title,subject:a.subject,timestamp:a.timestamp,attachments:a.attachments,simplifiedHtml:a.simplified_html,do24hrTime:Object(o["getUserPref"])(e,"time24"),isExpandable:i,isExpanded:c}}t["a"]=Object(i["connect"])(l)(c["a"])},22416:function(e,t,r){"use strict";var a=r(22265);var n=r(22417);r.d(t,"a",function(){return n["a"]});var i=a["a"]},22417:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(253);var y=r(1058);var O=r(21701);var k=r(5);var j=r(3194);var C=r(3189);var E=r(37);var S=r(22265);var w=r(20226);var I=r.n(w);var T=new k["b"]("comments");var N={comments:m.a.array,featureFileThreads:m.a.bool};var R={comments:void 0,featureFileThreads:true};var A=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.toggle=r.toggle.bind(r);r.state={expanded:false};return r}s()(t,[{key:"toggle",value:function e(){var t=this;this.setState(function(){return{expanded:!t.state.expanded}})}},{key:"render",value:function e(){var t=this.props,r=t.comments,a=t.featureFileThreads;var n=this.state.expanded;if(!a&&!Object(O["a"])())return null;if(Object(d["isEmpty"])(r))return null;var i=r.map(function(e){var t=e.id;return h.a.createElement(S["a"],{key:t,comment:e})});var s=g()("p-comment_list",{"p-comment_list--expanded":n});return h.a.createElement("div",{className:s},h.a.createElement("div",{className:"p-comment_list__toggle_container"},h.a.createElement(j["a"],{onClick:this.toggle},T.t("See older comments")),h.a.createElement(C["a"],{className:"p-comment_list__toggle_count_button",onClick:this.toggle,ariaLabel:T.t("Click to expand")},h.a.createElement(E["b"],{type:"comment-alt"}),h.a.createElement("span",{className:"p-comment_list__toggle_count"},r.length),n?h.a.createElement(E["b"],{type:"caret-down",className:"p-comment_list__toggle_caret"}):h.a.createElement(E["b"],{type:"caret-right",className:"p-comment_list__toggle_caret"}))),h.a.createElement("div",{className:"p-comment_list__comments"},i))}}]);return t}(_["a"]);A.displayName="CommentList";A.propTypes=N;A.defaultProps=R;t["a"]=Object(y["a"])("feature_file_threads")(A)},22418:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(113);var g=r(5);var _=r(43);var y=r(22887);var O=new g["b"]("file-details");var k={file:b["a"].File(),featureFileThreads:m.a.bool};var j={file:null,featureFileThreads:false,openThread:v.a.noop};var C=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getFormattedSharesData",value:function e(t){var r=this;if(!t)return[];var a=[];v.a.forEach(t.public,function(e,t){v.a.forEach(e,function(e){var n=true;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var n=[];v.a.forEach(t.private,function(e,t){v.a.forEach(e,function(e){var n=false;var i=r.formatShareData(e,t,n);i&&a.push(i)})});var i=a.concat(n);return v.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,r,a){if("0000000000.000000"===t.ts){Object(_["warn"])("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var n=t.reply_count||null;var i=t.reply_users;var s=t.reply_users_count;var o=t.latest_reply||t.ts;return{channelId:r,replyCount:n,replyUsers:i,replyUsersCount:s,latest:o,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:t.shared_team_ids,isPublic:a}}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.featureFileThreads;if(!a)return null;if(!r||!r.shares)return null;var n=r.shares;var i=this.getFormattedSharesData(n);return h.a.createElement("div",{className:"p-file_details__shares"},h.a.createElement("div",{className:"p-file_details__share_divider"},h.a.createElement("span",null,O.rt("Shared in")),h.a.createElement("hr",null)),i.map(function(e){return h.a.createElement(y["a"],{key:e.ts+"-"+e.channelId,share:e,fileId:r.id})}))}}]);return t}(p["PureComponent"]);C.displayName="FileDetailsShares";t["a"]=C;C.defaultProps=j},22419:function(e,t,r){"use strict";t["a"]=h;var a=r(1);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(5);var u=r(3184);var d=new l["b"]("file-details");var v={tryAgain:c.a.func,featureFileThreads:c.a.bool};var p={tryAgain:a["noop"],featureFileThreads:true};function h(e){var t=e.tryAgain,r=e.featureFileThreads;if(!r)return null;return s.a.createElement("div",{className:"p-file_details__error"},s.a.createElement("p",{className:"p-file_details__error_header"},d.t("Couldn't load file")),s.a.createElement("p",null,d.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,r=e.key;return s.a.createElement("a",{href:"https://slack.com/help/contact",target:"_blank",rel:"noopener noreferrer",key:r},t)})),s.a.createElement(u["d"],{type:"primary",onClick:t},d.t("Try Again")))}h.displayName="FileDetailsError";h.defaultProps=p},2242:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(5);var y=r(414);var O=new _["b"]("emoji_picker");var k={activeSkinToneId:h.a.string,choices:h.a.array,isOpen:h.a.bool,onSkinToneChanged:h.a.func,onOpen:h.a.func};var j={activeSkinToneId:"",choices:[],isOpen:false,onSkinToneChanged:v.a.noop,onOpen:v.a.noop};var C=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"maybeRenderSkinToneLabel",value:function e(){if(this.props.activeSkinToneId)return null;return m.a.createElement("span",{className:"p-emoji_picker__skintone_label","data-qa":"emoji_skintone_label"},O.t("Skin Tone"))}},{key:"renderToneChoices",value:function e(t){var r=this;return t.map(function(e){return m.a.createElement("span",{key:e.skin_tone_id,onClick:function t(){return r.props.onSkinToneChanged(e)},"data-qa":"emoji_skintone_option_"+e.skin_tone_id},m.a.createElement(y["a"],{emoji:e}))})}},{key:"render",value:function e(){var t=this.props.activeSkinToneId||"1";var r=v.a.find(this.props.choices,{skin_tone_id:t});var a=this.props.choices;if(this.props.activeSkinToneId&&"undefined"!==typeof r){a=v.a.reject(a,{skin_tone_id:r.skin_tone_id});a.push(r)}var n=g()("p-emoji_picker__skintone_btn_container",{hidden:this.props.isOpen});var i=g()("p-emoji_picker__skintone_tip",{"p-emoji_picker__skintone_tip--visible":this.props.isOpen});var s=g()("p-emoji_picker__skintone_options",{"p-emoji_picker__skintone_options--visible":this.props.isOpen});return m.a.createElement("div",{onClick:function e(t){return t.stopPropagation()}},m.a.createElement("div",{onClick:this.props.onOpen,className:n,"data-qa":"emoji_selected_skintone"},m.a.createElement("div",null,m.a.createElement(y["a"],{emoji:r})),this.maybeRenderSkinToneLabel()),m.a.createElement("div",{className:i},O.t("Choose your default skin tone")),m.a.createElement("div",{className:s,"data-qa":"emoji_skintone_options"},this.renderToneChoices(a)))}}]);return t}(f["PureComponent"]);C.displayName="EmojiSkinTonePicker";t["a"]=C;C.defaultProps=j},22420:function(e,t,r){"use strict";t["a"]=v;var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(37);var c=r(5);var l=new c["b"]("file-details");var u={featureFileThreads:s.a.bool};var d={featureFileThreads:true};function v(e){var t=e.featureFileThreads;if(!t)return null;return n.a.createElement("div",{className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(o["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,l.t("This file was deleted.")))}v.displayName="FileDetailsTombstone";v.defaultProps=d},22421:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(263);var b=r.n(m);var g=r(333);var _=r(8);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(21706);var C=r(21822);var E=r(12);var S=r(113);var w=r(5);var I=r(21701);var T=r(22968);var N=r(3254);var R=r(1571);var A=r(22422);var M=r(21982);var P=r(21832);var x=r(22266);var D=r(22423);var F=r(20229);var L=r.n(F);var B=r(20182);var U=r.n(B);var q=new w["b"]("files");var H=Object(M["a"])(A["a"]);var W={files:h.a.arrayOf(S["a"].File()),filetype:h.a.string,user:h.a.string,scrollmark:h.a.shape({key:h.a.string,offset:h.a.number}),fetchFilesPre:h.a.func,fetchFilesPost:h.a.func,saveScrollmark:h.a.func,setFiletype:h.a.func,setUser:h.a.func,featureFileThreads:h.a.bool,useGlobalNav:h.a.bool};var G={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:O["noop"],fetchFilesPost:O["noop"],saveScrollmark:O["noop"],setFiletype:O["noop"],setUser:O["noop"],featureFileThreads:false,useGlobalNav:false};var V=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onFileClick=r.onFileClick.bind(r);r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.fetchPre=r.fetchPre.bind(r);r.fetchPost=r.fetchPost.bind(r);r.fetchAround=r.fetchAround.bind(r);r.renderRow=r.renderRow.bind(r);r.renderFile=r.renderFile.bind(r);r.requestPre=null;r.requestPost=null;r.keys=null;r.list=null;r.layout=new R["a"];r.state={reachedStart:false,reachedEnd:false};return r}s()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,r=t.key,a=t.offset;this.layout.setAnchor(r,a);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props,a=r.filetype,n=r.user;if(t.filetype!==a||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.setState(function(){return{reachedStart:false,reachedEnd:false}});this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t,r){if(!this.list)return;if(!r)return;this.props.saveScrollmark({key:r.id,offset:this.layout.getOffsetForKey(r.id)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.state.reachedStart)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPre=this.props.fetchFilesPre({types:a,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page;1===a&&t.setState(function(){return{reachedStart:true}})}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;var r=this.props,a=r.filetype,n=r.user;this.requestPost=this.props.fetchFilesPost({types:a,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paging;var a=r.page,n=r.pages;a>=n&&t.setState(function(){return{reachedEnd:true}})}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.state.reachedEnd)return this.fetchPre();if(this.state.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"renderRow",value:function e(t){if(!this.props.featureFileThreads&&!Object(I["a"])())return null;var r=this.keys[t];if(!r)return null;switch(r[0]){case"L":return v.a.createElement("div",{className:"p-file_list__loading"},q.t("Loading\u2026"));case"P":return v.a.createElement("div",{className:"p-file_list__empty"},q.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var r=this.props.files[t];if(!r)return null;var a=t===this.props.files.length-1;var n=y()("p-file_list__file",{"p-file_list__file--last":a});return v.a.createElement(H,{onClick:this.onFileClick,file:r,fileId:r.id,className:n,fullWidth:true})}},{key:"render",value:function e(){var t=this;this.keys=this.props.files.map(function(e){return e.id});this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);!this.keys.length&&this.state.reachedStart&&this.state.reachedEnd&&this.keys.push("Placeholder");var r=this.props.useGlobalNav?"p-file_list__filters p-file_list__filters--global-nav":"p-file_list__filters";var a=this.props.useGlobalNav?null:v.a.createElement(P["a"],{className:"p-file_list__header"},v.a.createElement("span",null,q.rt("Files")));return v.a.createElement("div",{className:"p-file_flexpane p-file_flexpane--list"},a,v.a.createElement("div",{className:r},v.a.createElement(x["a"],{filetype:this.props.filetype,onChange:this.props.setFiletype}),v.a.createElement(D["a"],{userId:this.props.user,onChange:function e(r){t.props.setUser(r)}})),v.a.createElement("div",{className:"p-file_list"},v.a.createElement(g["a"],null,function(e){var r=e.width,a=e.height;return v.a.createElement(N["a"],{width:r,height:a,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost})})))}}]);return t}(d["PureComponent"]);V.displayName="FileList";V.defaultProps=G;var z=Object(m["createSelector"])([j["getAllFiles"],C["getFlexpaneFiles"]],function(e,t){return t.map(function(t){return e[t]}).filter(function(e){return e})});t["a"]=Object(f["connect"])(function(e){return{files:z(e),scrollmark:Object(C["getScrollmark"])(e),filetype:Object(C["getFiletype"])(e),user:Object(C["getUser"])(e),featureFileThreads:Object(E["isFeatureEnabled"])(e,"feature_file_threads"),useGlobalNav:Object(T["b"])(e)}},{fetchFilesPre:C["fetchFilesPre"],fetchFilesPost:C["fetchFilesPost"],saveScrollmark:C["saveScrollmark"],setFiletype:C["setFiletype"],setUser:C["setUser"]})(V)},22422:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(113);var O=r(21712);var k=r(21779);var j=r(21780);var C=r(21869);var E={file:y["a"].File().isRequired,clogLinkClick:h.a.func,className:h.a.string,fullWidth:h.a.bool,onClick:h.a.func,previewFile:h.a.func};var S={clogLinkClick:g["noop"],className:null,fullWidth:false,onClick:g["noop"],previewFile:g["noop"]};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file);this.props.previewFile({fileId:this.props.file.id})}},{key:"render",value:function e(){var t=this.props,r=t.file,a=t.clogLinkClick,n=t.fullWidth;var i=b()("p-contextual_file",this.props.className);return v.a.createElement(k["a"],{file:r,className:i,fullWidth:n,clogLinkClick:a},v.a.createElement(j["a"],{file:r,onClick:this.onClick},v.a.createElement(C["a"],{file:r})))}}]);return t}(d["PureComponent"]);w.displayName="ContextualFile";w.defaultProps=S;t["a"]=Object(f["connect"])(null,{previewFile:O["b"]})(w)},22423:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(21698);var _=r(5);var y=r(3179);var O=r(3180);var k=r(21750);var j=new _["b"]("files");var C={member:m.a.object,onChange:m.a.func};var E={member:null,onChange:d["noop"]};var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onChange=r.onChange.bind(r);r.state={value:e.member?e.member.id:null,selectedOption:e.member?w(e.member.id):null};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?w(t.member.id):null}})}},{key:"onChange",value:function e(t,r){this.setState(function(){return{value:t,selectedOption:{value:t,label:r}}});this.props.onChange(t)}},{key:"render",value:function e(){return h.a.createElement(O["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:j.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:I,optionsRowHeight:30})}}]);return t}(p["PureComponent"]);S.displayName="FilesFlexpaneMembersSelect";S.defaultProps=E;function w(e){return{value:e,label:h.a.createElement("div",{className:"p-file_list__select__member"},h.a.createElement(k["a"],{id:e,size:"small",showPresence:true}))}}function I(e){return Object(y["a"])(e,{members:{include_self:true},sort:{allow_empty_query:true,frecency:true,self_first:true}}).then(function(e){return{options:e.map(function(e){var t=e.model_ob;return w(t.id)})}})}t["a"]=Object(b["connect"])(function(e,t){var r=t.userId;return{member:Object(g["getMemberById"])(e,r)}})(S)},22424:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22425);var n=r(42);Object(n["a"])("interop.globalNav",{mountGlobalNav:a["a"]})},22425:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22426);var l=function e(t,r){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var a=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["a"],null)),r)};t["a"]=l},22426:function(e,t,r){"use strict";var a=r(22427);r.d(t,"a",function(){return a["a"]})},22427:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(21937);var s=r(22463);var o=r(22482);var c=r(22483);var l=r(20184);var u=r.n(l);var d=function e(){return n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(i["c"],null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(o["a"],null),n.a.createElement(s["a"],null),n.a.createElement(c["a"],null)))};d.displayName="GlobalNav";t["a"]=d},22428:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(37);var O=r(266);var k=r(21782);var j=r(21853);var C=r(21960);var E=r(3270);var S=r(12);var w=r(3182);var I=r(140);var T=r(3044);var N=r(5);var R=r(22429);var A=r(22963);var M=r(21937);var P=new N["b"]("global_nav");var x={history:m.a.object.isRequired,currentTeamId:m.a.string,back:m.a.func,forward:m.a.func,index:m.a.func,sync:m.a.func,action:m.a.func,featureGlobalNav:m.a.bool,featureThreadsCopyChange:m.a.bool};var D={currentTeamId:void 0,back:g["noop"],forward:g["noop"],index:g["noop"],sync:g["noop"],action:m.a.func,featureGlobalNav:false,featureThreadsCopyChange:false};var F=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderBackMenu=r.renderBackMenu.bind(r);r.renderForwardMenu=r.renderForwardMenu.bind(r);r.renderBackTooltip=r.renderBackTooltip.bind(r);r.renderForwardTooltip=r.renderForwardTooltip.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var r=Object(T["isWindows"])();var a=[{keys:r?"alt+left":"command+[",handler:function e(r){r.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back()}},{keys:r?"alt+right":"command+]",handler:function e(r){r.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward()}}];if(window.desktop){this.keyCommands||(this.keyCommands=new I["a"]);this.keyCommands.bindAll(a)}}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"renderStackMenu",value:function e(t,r){var a=this;var i=function e(t){return t.viewId+":"+t.teamId};var s=Object(g["uniqBy"])(t,i);var o=s.map(function(e){return{label:h.a.createElement(A["a"],e),key:i(e),click:function t(){return a.props.index({target:e.index})},className:"p-global_nav__top_history_item"}});return h.a.createElement(O["a"],n()({},r,{template:o}))}},{key:"renderBackMenu",value:function e(t){var r=Object(C["a"])(this.props.history);if(!r)return null;return this.renderStackMenu(r.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var r=Object(C["b"])(this.props.history);if(!r)return null;return this.renderStackMenu(r,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(C["a"])(this.props.history);if(!t||!t.length)return null;var r=t[t.length-1];return h.a.createElement(p["Fragment"],null,h.a.createElement("div",null,P.t("Go back")),h.a.createElement("div",{className:"sk_light_gray tiny_top_margin"},h.a.createElement(A["a"],r)))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(C["b"])(this.props.history);if(!t||!t.length)return null;var r=t[0];return h.a.createElement(p["Fragment"],null,h.a.createElement("div",null,P.t("Go forward")),h.a.createElement("div",{className:"sk_light_gray tiny_top_margin"},h.a.createElement(A["a"],r)))}},{key:"render",value:function e(){var t=this.props.history;var r=!Object(C["a"])(t)||!Object(C["a"])(t).length;var a=!Object(C["b"])(t)||!Object(C["b"])(t).length;var i={position:"bottom-left",offsetX:-12,offsetY:M["a"],customTrigger:true};return h.a.createElement(p["Fragment"],null,h.a.createElement(O["d"],n()({renderMenu:this.renderBackMenu},i),h.a.createElement(R["a"],{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.props.back,disabled:r,tooltip:this.renderBackTooltip},h.a.createElement(y["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),h.a.createElement(O["d"],n()({renderMenu:this.renderForwardMenu},i),h.a.createElement(R["a"],{className:"p-global_nav__top_history",onClick:this.props.forward,disabled:a,tooltip:this.renderForwardTooltip},h.a.createElement(y["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(p["Component"]);F.displayName="History";F.defaultProps=D;var L=function e(t){return{history:Object(k["getNavigationHistory"])(t),currentTeamId:Object(E["getTeamId"])(t),featureGlobalNav:Object(S["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(S["isFeatureEnabled"])(t,"feature_threads_copy_change")}};var B={back:j["a"],forward:j["b"],index:j["c"],sync:j["f"],action:w["action"]};t["a"]=Object(b["connect"])(L,B)(F)},22429:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(3184);var y=r(60);var O=r(21937);var k=300;var j={children:h.a.node,className:h.a.string,disabled:h.a.bool,tooltip:h.a.oneOfType([h.a.string,h.a.func]),onClick:h.a.func.isRequired,onTrigger:h.a.func};var C={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:f["noop"]};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseDown=r.onMouseDown.bind(r);r.onMouseUp=r.onMouseUp.bind(r);r.pressTimer=void 0;return r}s()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var r=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return r.props.onTrigger(t)},k);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,r=t.disabled,a=t.tooltip;var n=g()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":r});var i=function e(t){var a=t.tip,n=t.children;if(r||!a)return n;return v.a.createElement(y["d"],{tip:a,delay:800,position:"bottom",offsetY:O["b"],tipClassName:"p-global_nav__top_history_tip"},n)};return v.a.createElement(i,{tip:a},v.a.createElement(_["c"],{className:n,disabled:r,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.props.children))}}]);return t}(d["PureComponent"]);E.displayName="HistoryButton";E.defaultProps=C;t["a"]=E},2243:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=r(414);var _=new b["b"]("emoji_picker");var y={handyRxns:v.a.array,numBackgroundColors:v.a.number.isRequired,onSelected:v.a.func,onMouseEnter:v.a.func,onMouseLeave:v.a.func};var O={handyRxns:[],onSelected:m.a.noop,onMouseEnter:m.a.noop,onMouseLeave:m.a.noop};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"onClick",value:function e(t,r){t.preventDefault();this.props.onSelected(t,r)}},{key:"renderRxn",value:function e(t,r){var a=this;return h.a.createElement("a",{key:t.name,className:"p-emoji_picker__list_item",onClick:function e(r){return a.onClick(r,t)},onMouseEnter:function e(){return a.props.onMouseEnter(t)},onMouseLeave:function e(){return a.props.onMouseLeave()},"data-color-index":r%this.props.numBackgroundColors},h.a.createElement(g["a"],{emoji:t}))}},{key:"render",value:function e(){var t=this;return h.a.createElement("div",{className:"p-emoji_picker__handy_rxns"},h.a.createElement("h3",{className:"p-emoji_picker__heading p-emoji_picker__heading--handy_rxns"},_.t("Handy Reactions")),h.a.createElement("div",{className:"p-emoji_picker__handy_rxns_list",role:"menu"},this.props.handyRxns.map(function(e,r){return t.renderRxn(e,r)})))}}]);return t}(p["PureComponent"]);k.displayName="EmojiHandyRxns";t["a"]=k;k.defaultProps=O},22430:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(3271);var _=r(21703);var y=r(37);var O=r(3184);var k=r(266);var j=r(22431);var C={name:m.a.string,renderSonicMenu:m.a.func};var E={name:void 0,renderSonicMenu:void 0};var S=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}c()(t,[{key:"renderMenu",value:function e(t){return h.a.createElement(j["a"],n()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"render",value:function e(){var t=this.props.name;if(!t)return null;return h.a.createElement(k["d"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12},h.a.createElement(O["c"],{className:"p-global_nav__top_name","data-qa":"team_menu"},h.a.createElement("div",{className:"overflow_ellipsis"},t),h.a.createElement(y["b"],{type:"chevron-down",className:"p-global_nav__top_name_chevron"})))}}]);return t}(p["Component"]);S.displayName="Name";S.defaultProps=E;var w=function e(t){var r=Object(g["getCurrentTeam"])(t);if(!r)return{};return{name:Object(_["getTeamDisplayName"])(r)}};t["a"]=Object(b["connect"])(w)(S)},22431:function(e,t,r){"use strict";var a=r(22432);t["a"]=a["a"]},22432:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(266);var j=r(12);var C=r(3271);var E=r(21703);var S=r(5);var w=r(21701);var I=r(22433);var T=r(1458);var N=r(22434);var R=r(3050);var A=r(22267);var M=r(22435);var P=r(23046);var x=r(22436);var D=new S["b"]("global_nav");var F={actions:g.a.object,teamId:g.a.string.isRequired,signOut:g.a.func,signoutName:g.a.string.isRequired,renderSonicMenu:g.a.func,featureGlobalNav:g.a.bool};var L={actions:{},signOut:y["noop"],renderSonicMenu:void 0,featureGlobalNav:false};var B=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderAdminSubmenu=r.renderAdminSubmenu.bind(r);return r}u()(t,[{key:"renderAdminSubmenu",value:function e(t){return m.a.createElement(P["a"],{menuProps:t})}},{key:"render",value:function e(){var t=this.props,r=t.actions,a=t.renderSonicMenu,i=t.featureGlobalNav,o=t.signoutName,c=t.signOut,l=s()(t,["actions","renderSonicMenu","featureGlobalNav","signoutName","signOut"]);if(!i)return null;var u=[{type:"submenu",label:"Sonic",renderSubmenu:a,hide:!a},{type:"separator"},{type:"custom",children:m.a.createElement(M["a"],{key:"team-header"})},{type:"separator"},{label:D.t("Preferences"),click:function e(){return Object(A["a"])()}},{type:"submenu",label:D.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!r.administration},{label:D.t("Invite people"),hide:!r.invite,click:T["a"]},{label:D.t("Customize Slack"),hide:!r.customize,href:"/customize",target:"_blank"},{label:D.t("Shared channels"),hide:!r.orgShared,click:N["a"]},{label:D.t("Shared channels (beta)"),hide:!r.externalShared,click:R["a"]},{label:D.t("Org Insights (TS Execs only)"),hide:!r.orgInsights,href:"https://staging.slack.com/god/sli_trending_channels_dashboard.php"},{label:D.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(w["a"])(),click:function e(){return c()},dataQa:"logout"}].filter(function(e){return!e.hide});return m.a.createElement(k["a"],n()({},l,{template:u,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(f["Component"]);B.displayName="TeamMenu";B.defaultProps=L;var U={signOut:I["a"]};var q=function e(t){var r=Object(C["getCurrentTeam"])(t);return{actions:Object(x["a"])(t),teamId:r.id,signoutName:r.enterprise_name||Object(E["getTeamDisplayName"])(r),featureGlobalNav:Object(j["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(_["connect"])(q,U)(B)},22433:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(21704);var n=r(21700);var i=r(3182);var s=r(21701);var o=Object(a["a"])("Sign out of the current session",function(e){return e(Object(n["a"])({method:"auth.signout",args:{}})).then(function(){if(Object(s["a"])()){r.e(89).then(r.bind(null,22871)).then(function(e){var t=e.fetchAuth;var r=false;t(r)});return}window.location.reload()}).catch(function(t){e(Object(i["error"])("got error when trying to sign out: "+t));throw i["error"]})})},22434:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.enterprise_shared_channels_invites.start")},22435:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(3271);var l=r(21703);var u={name:s.a.string.isRequired,org:s.a.string,icon:s.a.string,url:s.a.string};var d={org:void 0,icon:void 0,url:void 0};var v=function e(t){var r=t.name,a=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:a&&"url("+a+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};v.displayName="TeamHeader";v.defaultProps=d;var p=function e(t){var r=Object(c["getCurrentTeam"])(t);return{name:Object(l["getTeamDisplayName"])(r),org:r.enterprise_name,icon:r.icon&&r.icon.image_34||void 0,url:r.domain+".slack.com"}};t["a"]=Object(o["connect"])(p)(v)},22436:function(e,t,r){"use strict";t["a"]=l;var a=r(21698);var n=r(54);var i=r(12);var s=r(3203);var o=r(2215);var c=r(473);function l(e){var t=Object(a["getCurrentMember"])(e);var r=Object(s["x"])(t);var l=Object(c["j"])();var u=Object(s["x"])(t)||!Object(s["R"])(t)&&(!Object(n["getTeamPref"])(e,"emoji_only_admins")||!Object(n["getTeamPref"])(e,"slackbot_responses_only_admins")||!Object(n["getTeamPref"])(e,"loading_only_admins"));var d=Object(i["pageNeedsEnterprise"])(e)&&!Object(s["R"])(t);var v=Object(c["f"])();var p=Object(i["isFeatureEnabled"])(e,"feature_tinyspeck")&&"beta_link"===Object(o["a"])("sli_trending_dashboard_beta_link");return{administration:r,invite:l,customize:u,orgShared:d,externalShared:v,orgInsights:p}}},22437:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(8);var _=r.n(g);var y=r(12);var O=r(21698);var k=r(22170);var j=r(3203);var C=r(265);var E=r(978);var S=r(1059);var w=r(37);var I=r(3184);var T=r(266);var N=r(22438);var R={userId:h.a.string,hasCustomStatus:h.a.bool,openCustomStatusDialog:h.a.func};var A={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:m["noop"]};var M=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}s()(t,[{key:"renderMenu",value:function e(t){return v.a.createElement(N["a"],t)}},{key:"render",value:function e(){var t=this.props,r=t.userId,a=t.hasCustomStatus;if(!r)return null;return v.a.createElement("div",{className:"p-global_nav__top_user"},v.a.createElement(I["c"],{onClick:this.props.openCustomStatusDialog,className:"p-global_nav__top_user_status_button"},v.a.createElement(E["a"],{memberId:r,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),v.a.createElement(w["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"})),v.a.createElement(T["d"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12},v.a.createElement(I["c"],null,v.a.createElement(C["b"],{userId:r,size:24,showBadge:false,isInteractive:false,className:_()("p-global_nav__top_user_avatar",a&&"p-global_nav__top_user_avatar--beside-status")}),v.a.createElement(S["a"],{memberId:r,className:"p-global_nav__top_user_presence"}))))}}]);return t}(d["Component"]);M.displayName="User";M.defaultProps=A;var P=function e(t){return{userId:Object(y["getCurrentUserId"])(t),hasCustomStatus:Object(j["t"])(Object(O["getCurrentMember"])(t))}};var x={openCustomStatusDialog:k["a"]};t["a"]=Object(f["connect"])(P,x)(M)},22438:function(e,t,r){"use strict";var a=r(22439);t["a"]=a["a"]},22439:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(1);var O=r.n(y);var k=r(22170);var j=r(3204);var C=r(266);var E=r(21698);var S=r(3203);var w=r(376);var I=r(12);var T=r(90);var N=r(1548);var R=r(22267);var A=r(22268);var M=r(5);var P=r(22440);var x=r(22441);var D=new M["b"]("global_nav");var F={actions:g.a.object,currentMember:g.a.object,currentPresence:g.a.string,onTriggerClose:g.a.func,openCustomStatusDialog:g.a.func,featureGlobalNav:g.a.bool,toggleUserPresence:g.a.func,submitProfileChange:g.a.func};var L={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:y["noop"],openCustomStatusDialog:y["noop"],featureGlobalNav:false,toggleUserPresence:y["noop"],submitProfileChange:y["noop"]};var B=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderPresenceLabel=r.renderPresenceLabel.bind(r);return r}u()(t,[{key:"renderPresenceLabel",value:function e(){var t=this.props,r=t.currentPresence,a=t.featureGlobalNav;if(!a)return null;switch(r){case"active":return D.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,r=e.key;return m.a.createElement("strong",{key:r},t)});case"away":return D.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,r=e.text,a=e.key;switch(t){case"status":return m.a.createElement("strong",{className:"half_opacity",key:a},r);case"strong":return m.a.createElement("strong",{key:a},r);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.actions,i=r.currentMember,o=r.featureGlobalNav,c=s()(r,["actions","currentMember","featureGlobalNav"]);if(!o)return null;var l=[{type:"custom",children:m.a.createElement(P["a"],{key:"user-header"})},{type:"separator",key:"header-separator"},{label:o?D.t("Clear status"):"",hide:!Object(S["t"])(i),click:function e(){t.props.submitProfileChange({status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0})}},{label:Object(S["t"])(i)?D.t("Edit status \u2026"):D.t("Set a status \u2026"),click:this.props.openCustomStatusDialog},{label:D.t("Profile & account"),click:function e(){return Object(T["g"])(i.id)}},{label:D.t("Preferences"),click:function e(){return Object(R["a"])()}},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{label:D.t("Help & feedback"),hide:!a.help,click:A["a"]},{label:"Version info (TS only)",hide:!a.version,click:N["c"]}].filter(function(e){return!e.hide});return m.a.createElement(C["a"],n()({},c,{template:l}))}}]);return t}(f["Component"]);B.displayName="UserMenu";B.defaultProps=L;var U=function e(t){return{actions:Object(x["a"])(t),currentMember:Object(E["getCurrentMember"])(t),currentPresence:Object(w["getCurrentMemberPresence"])(t),featureGlobalNav:Object(I["isFeatureEnabled"])(t,"feature_global_nav")}};var q={openCustomStatusDialog:k["a"],toggleUserPresence:w["toggleUserPresence"],submitProfileChange:j["h"]};t["a"]=Object(_["connect"])(U,q)(B)},2244:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e,t){if(Object(a["isEmpty"])(e)||Object(a["isEmpty"])(t))return[];var r=[];for(var n=0;n<e.length;n+=1){var i=e[n];if(i&&-1!==t.indexOf(i.name)){r.push(i);if(r.length===t.length)break}}var s=r.sort(function(e,r){return t.indexOf(e.name)-t.indexOf(r.name)});return s}},22440:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(265);var l=r(21698);var u=r(3203);var d={name:s.a.string,secondary:s.a.string,userId:s.a.string};var v={name:void 0,secondary:void 0,userId:void 0};var p=function e(t){var r=t.name,a=t.secondary,i=t.userId;var s=a?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a):null;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement(c["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},r),s))};p.displayName="UserHeader";p.defaultProps=v;var h=function e(t){var r=Object(l["getCurrentMember"])(t);return{name:Object(u["r"])(t,r),secondary:Object(u["n"])(t,r),userId:r.id}};t["a"]=Object(o["connect"])(h)(p)},22441:function(e,t,r){"use strict";t["a"]=i;var a=r(12);var n=r(3044);function i(e){var t=Object(a["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(a["getFromBootData"])(e,"help_url"),version:t||n["isDev"]}}},22442:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(3184);var _=r(37);var y=r(60);var O=r(21751);var k=r(1557);var j=r(90);var C=r(21937);var E={icon:h.a.string.isRequired,pane:h.a.string.isRequired,tooltip:h.a.string.isRequired,active:h.a.bool};var S={active:false};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(){"team"===this.props.pane?Object(j["j"])():Object(k["d"])(this.props.pane)}},{key:"render",value:function e(){var t=this.props,r=t.icon,a=t.tooltip,n=t.active;var i=b()("p-global_nav__top_button","p-global_nav__top_flex",n&&"p-global_nav__top_flex--active");return v.a.createElement(y["d"],{tip:a,delay:y["a"],position:"bottom",offsetY:C["b"]},v.a.createElement(g["c"],{className:i,onClick:this.onClick},v.a.createElement(_["b"],{type:r,className:"p-global_nav__top_button_icon"})))}}]);return t}(d["PureComponent"]);w.displayName="FlexButton";w.defaultProps=S;var I=function e(t,r){var a=r.pane;return{active:Object(O["getFlexpaneState"])(t).flexName===a}};t["a"]=Object(f["connect"])(I)(w)},22443:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(266);var O=r(3184);var k=r(60);var j=r(37);var C=r(21698);var E=r(3271);var S=r(12);var w=r(21712);var I=r(3203);var T=r(21703);var N=r(5);var R=r(90);var A=r(1557);var M=r(22268);var P=r(21937);var x=new N["b"]("global_nav");var D={isUserRestricted:m.a.bool,isPaid:m.a.bool,isEnterprise:m.a.bool,userId:m.a.string,showFileList:m.a.func,showWhatsNew:m.a.func,showUserGroupList:m.a.func,featureGlobalNav:m.a.bool,featureSonicUserGroups:m.a.bool};var F={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:g["noop"],showWhatsNew:g["noop"],showUserGroupList:g["noop"],featureGlobalNav:false,featureSonicUserGroups:false};var L=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}c()(t,[{key:"renderMenu",value:function e(t){var r=this;var a=this.props,i=a.featureGlobalNav,s=a.featureSonicUserGroups,o=a.isUserRestricted,c=a.isPaid,l=a.isEnterprise,u=a.userId;if(!i)return null;var d=[{label:x.t("Your Files"),click:function e(){r.props.showFileList({user:u})}},{label:x.t("All Files"),click:function e(){r.props.showFileList({user:"all"})}},{label:l?x.t("Organization Directory"):x.t("Workspace Directory"),click:R["j"]},{label:x.t("User Groups"),click:function e(){if(s)return r.props.showUserGroupList();return Object(R["i"])()},hide:o||!c},{label:x.t("Help"),click:M["a"]},{label:x.t("What\u2019s New"),click:function e(){return r.props.showWhatsNew()}},{label:x.t("Downloads"),click:function e(){return Object(A["c"])("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{label:x.t("Keyboard Shortcuts"),click:function e(){return Object(A["c"])("shortcuts")}}].filter(function(e){return!e.hide});return h.a.createElement(y["a"],n()({},t,{template:d}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return h.a.createElement(y["d"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:P["a"]},h.a.createElement(k["d"],{tip:x.t("More options"),position:"bottom",delay:k["a"],offsetY:P["b"]},h.a.createElement(O["c"],{className:"p-global_nav__top_button"},h.a.createElement(j["b"],{type:"gn-menu",className:"p-global_nav__top_button_icon"}))))}}]);return t}(p["PureComponent"]);L.displayName="FlexpanesMenu";L.defaultProps=F;var B=function e(t){return{isUserRestricted:Object(I["R"])(Object(C["getCurrentMember"])(t)),isPaid:Object(T["isPaidTeam"])(Object(E["getCurrentTeam"])(t)),isEnterprise:Object(S["pageNeedsEnterprise"])(t),userId:Object(S["getCurrentUserId"])(t),featureGlobalNav:Object(S["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(S["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var U={showFileList:w["c"],showWhatsNew:w["g"],showUserGroupList:w["f"]};t["a"]=Object(b["connect"])(B,U)(L)},22444:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(5);var _=r(21701);var y=r(21725);var O=r(22171);var k=r(22269);var j=r(12);var C=r(3278);var E=r(3271);var S=r(21703);var w=r(2316);var I=r(37);var T=r(3184);var N=r(77);var R=new g["b"]("search");var A={displayQuery:h.a.string,setSearchIsVisible:h.a.func,clearSearchInputField:h.a.func,featureReactSearch:h.a.bool,orgName:h.a.string,teamName:h.a.string};var M={displayQuery:void 0,orgName:void 0,teamName:void 0,setSearchIsVisible:m["noop"],clearSearchInputField:m["noop"],featureReactSearch:false};var P=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.onClearClick=r.onClearClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(){this.props.setSearchIsVisible({visible:true})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,r=t.displayQuery,a=t.featureReactSearch,n=t.orgName,i=t.teamName;if(!a||Object(_["a"])())return v.a.createElement("div",{className:"p-global_nav__top_search"});var s=r?v.a.createElement(d["Fragment"],null,v.a.createElement(N["a"],{text:r,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),v.a.createElement(T["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:R.t("Clear")},v.a.createElement(I["b"],{type:"times-small"}))):v.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},R.rt("Search {teamName}",{teamName:n||i||""}));return v.a.createElement(d["Fragment"],null,v.a.createElement(T["c"],{className:"p-global_nav__top_search",onClick:this.onClick},v.a.createElement(I["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),s),v.a.createElement(w["a"],null))}}]);return t}(d["Component"]);P.displayName="SearchPlaceholderInput";P.defaultProps=M;var x=function e(t){return{displayQuery:Object(y["getSearchInputBoxDisplayQuery"])(t),featureReactSearch:Object(j["isFeatureEnabled"])(t,"feature_react_search"),orgName:Object(C["getEnterpriseOrgName"])(t)||"",teamName:Object(S["getTeamDisplayName"])(Object(E["getCurrentTeam"])(t))}};var D=function e(t){return{setSearchIsVisible:function e(r){return t(Object(k["a"])(r))},clearSearchInputField:function e(){return t(Object(O["a"])())}}};t["a"]=Object(f["connect"])(x,D)(P)},22445:function(e,t,r){"use strict";var a=r(21696);var n=r(91);var i=r(268);var s=Object(a["e"])("Clog a search close event using data from redux",function(e,t){var r=t();Object(n["b"])("SEARCH_CLOSE",{search_session_id:Object(i["getSearchSessionId"])(r)})});s.propTypes=null;t["a"]=s},22446:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21696);var c=r(91);var l=r(268);var u=r(21742);var d=r(21804);var v=Object(o["e"])("Clog clicks on a message or file using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.suggestion;var n=t();var s=Object(l["getSearchSessionId"])(n);var o=Object(l["getQuerySessionId"])(n);var v=Object(u["getSearchAutocompleteSuggestions"])(n);var p=Object(u["getSearchAutocompleteSelectedIndex"])(n)-1;var h=Object(i["tail"])(v).map(function(e){return e.featureVector});-1===p?Object(c["b"])("SEARCH_AUTOCOMPLETE_REJECT",{feature_vector_list:h,request_id:Object(d["a"])(n),search_session_id:s,client_request_id:o}):Object(c["b"])("SEARCH_AUTOCOMPLETE_ACCEPT",{accept_module_name:"results_unified",accept_module_length:v.length,accept_item_offset:p,feature_vector_list:h,suggestion_type:a.type,is_navigational:a.is_type_navigational,navigation_model_id:a.id,request_id:Object(d["a"])(n),search_session_id:s,client_request_id:o})});v.propTypes={suggestion:n.a.object.isRequired};t["a"]=v},22447:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.client.channel_header.calculateNoDragRegions")},22448:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(2194);var _=r.n(g);var y=r(5);var O=r(21725);var k=r(21742);var j=r(1592);var C=r(194);var E=r.n(C);var S=r(3044);var w=r(21805);var I=r(21873);var T=r(22454);var N=r(20230);var R=r.n(N);var A=new y["b"]("search");var M={userQuery:v.a.string,suggestions:v.a.array.isRequired,selectedIndex:v.a.number,onAccept:v.a.func,onSelectedIndexChange:v.a.func,fetchSearchAutocompleteSuggestions:v.a.func.isRequired,setSearchAutocompleteSelection:v.a.func.isRequired,setSearchAutocompleteSuggestions:v.a.func.isRequired};var P={selectedIndex:null,onAccept:f["noop"],onSelectedIndexChange:f["noop"],userQuery:null};var x=function e(t,r){return(t%r+r)%r};var D=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected"]);r.searchAutocompleteSuggestionsPromise=void 0;return r}s()(t,[{key:"componentDidMount",value:function e(){document.body.addEventListener("keydown",this.onKeydown);this.onUserQueryChange()}},{key:"shouldComponentUpdate",value:function e(t){return t.selectedIndex!==this.props.selectedIndex||t.suggestions!==this.props.suggestions}},{key:"componentDidUpdate",value:function e(t){t.userQuery!==this.props.userQuery&&this.onUserQueryChange()}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onKeydown",value:function e(t){var r=function e(){t.preventDefault();t.stopPropagation();return false};var a=t.shiftKey;var n=t.which;var i=g["codes"].up,s=g["codes"].tab,o=g["codes"].down;if(n===i||a&&n===s){this.decrementSelectedIndex();return r()}if(n===o||n===s){this.incrementSelectedIndex();return r()}return true}},{key:"onUserQueryChange",value:function e(){Object(w["a"])();this.searchAutocompleteSuggestionsPromise&&this.searchAutocompleteSuggestionsPromise.cancel();this.searchAutocompleteSuggestionsPromise=this.props.fetchSearchAutocompleteSuggestions({query:this.props.userQuery})}},{key:"onSuggestionDelete",value:function e(t){this.props.setSearchAutocompleteSuggestions({suggestions:Object(f["filter"])(this.props.suggestions,function(e){return t.key!==e.key})})}},{key:"onSuggestionSelected",value:function e(t,r){this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!r})}},{key:"onSuggestionAccept",value:function e(){this.props.onAccept()}},{key:"incrementSelectedIndex",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:x((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length),setText:true})}},{key:"decrementSelectedIndex",value:function e(){this.props.setSearchAutocompleteSelection({selectedIndex:x(this.props.selectedIndex-1,this.props.suggestions.length),setText:true})}},{key:"propsForSuggestion",value:function e(t,r){return{index:t,suggestion:r,key:r.key,isSelected:t===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete}}},{key:"renderScreenReaderWorkaround",value:function e(){var t=this;if(!(E.a.chrome&&E.a.version<67)||!Object(S["isSSB"])())return null;var r=this.props.selectedIndex;var a=Object(f["last"])(this.props.suggestions.map(function(e,a){return e.is_type_navigational&&a===r?h.a.createElement(I["a"],t.propsForSuggestion(a,e)):null}).filter(function(e){return e}));return h.a.createElement("div",{"aria-live":"polite",className:"offscreen"},a)}},{key:"render",value:function e(){var t=this;this.props.userQuery&&Object(f["throttle"])(function(){return Object(w["b"])()},2e3,{leading:true})();var r=Object(f["reduce"])(this.props.suggestions,function(e,t){return e||!t.is_type_query_history},false);var a=h.a.createElement("header",null,h.a.createElement("span",{className:"c-search_autocomplete__header_label"},h.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},A.t("Recent searches"))));var n=this.renderScreenReaderWorkaround();return h.a.createElement("div",{className:"c-search_autocomplete"},r||!this.props.suggestions.length||a,n,h.a.createElement("ol",{className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list"},this.props.suggestions.map(function(e,r){return h.a.createElement(I["a"],t.propsForSuggestion(r,e))})),h.a.createElement(T["a"],null))}}]);return t}(p["Component"]);D.displayName="SearchAutocomplete";D.defaultProps=P;var F=function e(t){return{suggestions:Object(k["getSearchAutocompleteSuggestions"])(t),selectedIndex:Object(k["getSearchAutocompleteSelectedIndex"])(t),userQuery:Object(O["getSearchInputBoxUserQuery"])(t)}};var L={setSearchAutocompleteSelection:k["setSearchAutocompleteSelection"],setSearchAutocompleteSuggestions:k["setSearchAutocompleteSuggestions"],fetchSearchAutocompleteSuggestions:j["b"]};t["a"]=Object(b["connect"])(F,L)(D)},22449:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3241);var m=r(22172);var b=r(21873);var g=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props.suggestion.channel||this.props.suggestion.mpim;return h.a.createElement("li",n()({},this.props.containerProps,this.props.ariaProps,{"data-is-navigational":true,"data-id":t.id,key:t.id}),h.a.createElement("button",{onMouseUp:this.props.onMouseUp,className:"btn_unstyle c-search_autocomplete__suggestion_content"},h.a.createElement(f["a"],{channelId:t.id,inline:true}),h.a.createElement(m["a"],null)))}}]);return t}(p["PureComponent"]);g.displayName="SuggestionChannel";t["a"]=g;g.defaultProps=b["c"]},22450:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(22172);var m=r(21873);var b=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props.suggestion.file;var r={__html:this.props.suggestion.html};var a=h.a.createElement("b",{dangerouslySetInnerHTML:r});return h.a.createElement("li",n()({},this.props.containerProps,this.props.ariaProps,{"data-id":t.id,"data-is-navigational":true,key:t.id}),h.a.createElement("button",{className:"btn_unstyle file_suggestion c-search_autocomplete__suggestion_content",onMouseUp:this.props.onMouseUp},h.a.createElement("div",{className:"c-search_autocomplete__suggestion_icon"},h.a.createElement("i",{className:"filetype_icon "+this.props.suggestion.type+" s20"})),h.a.createElement("div",{className:"c-search_autocomplete__suggestion_text"},a,h.a.createElement("span",{className:"filetype_description"},this.props.suggestion.fileTypeDescription)),h.a.createElement(f["a"],null)))}}]);return t}(p["PureComponent"]);b.displayName="SuggestionFile";t["a"]=b;b.defaultProps=m["c"]},22451:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(5);var m=r(37);var b=r(1104);var g=r(22452);var _=r(21873);var y=new f["b"]("search");var O=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t={__html:Object(b["a"])(this.props.suggestion.token_list)};var r=h.a.createElement("b",{dangerouslySetInnerHTML:t});var a=h.a.createElement(g["a"],{exactQueryString:this.props.suggestion.exact_string,onDelete:this.props.onDelete});var i=h.a.createElement("div",{className:"c-search_autocomplete__suggestion_hint"},h.a.createElement("span",{className:"description"},y.t("Search")),h.a.createElement(m["a"],{type:"enter",className:"ts_icon_enter modifier_icon"}));return h.a.createElement("li",n()({},this.props.containerProps,this.props.ariaProps,{"data-replacement":this.props.suggestion.suggestion_replacement,"data-exact-string":this.props.suggestion.exact_string,"data-feature-vector":this.props.suggestion.featureVector,"data-is-custom-date-filter":this.props.suggestion.isCustomDateFilter,"data-is-replacement-full":true,key:this.props.suggestion.suggestion_replacement}),h.a.createElement("button",{onMouseUp:this.props.onMouseUp,className:"btn_unstyle c-search_autocomplete__suggestion_content"},h.a.createElement("div",{className:"c-search_autocomplete__suggestion_icon"},h.a.createElement(m["a"],{type:"search-medium",className:"prefix"})),h.a.createElement("div",{className:"c-search_autocomplete__suggestion_text"},r),!this.props.suggestion.deletable&&i),this.props.suggestion.deletable&&a)}}]);return t}(p["PureComponent"]);O.displayName="SuggestionQuery";t["a"]=O;O.defaultProps=_["c"]},22452:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3184);var m=r(37);var b=r(1);var g=r.n(b);var _=r(5);var y=r(9);var O=r(21835);var k=r(1592);var j=r(268);var C=new _["b"]("search");var E={exactQueryString:v.a.string.isRequired,onDelete:v.a.func,searchSessionId:v.a.string.isRequired,querySessionId:v.a.string.isRequired};var S={onDelete:b["noop"]};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(r,["onMouseDown"]);return r}s()(t,[{key:"onMouseDown",value:function e(t){var r=this;var a=Object(O["a"])(this.props.exactQueryString,null,true);Object(k["g"])(a,this.props.searchSessionId,this.props.querySessionId).then(function(){r.props.onDelete()});t.stopPropagation()}},{key:"render",value:function e(){return h.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},h.a.createElement(f["c"],{className:"c-search_autocomplete__suggestion_delete",onClick:this.onMouseDown,label:C.t("delete history result")},h.a.createElement(m["b"],{type:"times_small",inline:true})))}}]);return t}(p["PureComponent"]);w.displayName="Delete";w.defaultProps=S;var I=function e(t){return{querySessionId:Object(j["getQuerySessionId"])(t),searchSessionId:Object(j["getSearchSessionId"])(t)}};var T={};t["a"]=Object(y["connect"])(I,T)(w)},22453:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(21750);var m=r(22172);var b=r(21873);var g=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props.suggestion.user;var r=t&&t.profile&&t.profile.bot_id;return h.a.createElement("li",n()({},this.props.containerProps,this.props.ariaProps,{"data-id":t.id,"data-is-navigational":true,"data-bot-id":r,key:t.id,className:"c-search_autocomplete__suggestion__user "+this.props.containerProps.className}),h.a.createElement("button",{onMouseUp:this.props.onMouseUp,className:"btn_unstyle c-search_autocomplete__suggestion_content"},h.a.createElement("div",{className:"c-search_autocomplete__suggestion_text"},h.a.createElement(f["a"],{id:t.id,size:"small",showPresence:true,showAvatar:true})),h.a.createElement(m["a"],null)))}}]);return t}(p["PureComponent"]);g.displayName="SuggestionUser";t["a"]=g;g.defaultProps=b["c"]},22454:function(e,t,r){"use strict";var a=r(5);var n=r(12159);var i=r.n(n);var s=r(378);var o=new a["b"]("search");var c=function e(){return i.a.createElement(s["a"],{enabled:["feature_react_search"]},i.a.createElement("footer",null,i.a.createElement("span",{className:"c-search_autocomplete__footer_navigation_help"},i.a.createElement("strong",null,"\u2191")," ",i.a.createElement("strong",null,"\u2193"),"\xa0",o.t("to navigate"),i.a.createElement("strong",{className:"margin_left_100","aria-label":o.t("Return")},"\u21b5"),"\xa0",o.t("to select"),i.a.createElement("strong",{className:"margin_left_100","aria-label":o.t("Escape Character")},i.a.createElement("kbd",null,"esc")),"\xa0",o.t("to dismiss"))))};c.displayName="Footer";t["a"]=c},22455:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(5);var v=r(3);var p=r.n(v);var h=r(12159);var f=r.n(h);var m=r(604);var b=r(9);var g=r(1);var _=r.n(g);var y=r(37);var O=r(378);var k=r(3184);var j=r(21725);var C=r(3278);var E=r(3271);var S=r(21703);var w=r(21742);var I=r(22171);var T=r(20231);var N=r.n(T);var R=r(21873);var A=new d["b"]("search");var M={displayQuery:p.a.string.isRequired,onBlur:p.a.func,onEnter:p.a.func,onEscape:p.a.func,onFocus:p.a.func,setSearchInputBoxUserQuery:p.a.func.isRequired,clearSearchInput:p.a.func.isRequired,orgName:p.a.string.isRequired,teamName:p.a.string.isRequired,autocompleteSelectedIndex:p.a.number};var P={onBlur:g["noop"],onEnter:g["noop"],onEscape:g["noop"],onFocus:g["noop"],autocompleteSelectedIndex:void 0};var x=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.texty=null;Object(g["bindAll"])(r,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]);return r}s()(t,[{key:"componentDidMount",value:function e(){this.texty.setCursorAtEnd();this.texty.focus()}},{key:"shouldComponentUpdate",value:function e(t){return this.props.displayQuery!==t.displayQuery||this.props.autocompleteSelectedIndex!==t.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function e(t){t.displayQuery!==this.props.displayQuery&&this.updateDisplayQuery()}},{key:"onUserQueryChange",value:function e(t){if("user"!==t)return;this.props.setSearchInputBoxUserQuery({userQuery:this.getTextyString()})}},{key:"onEnter",value:function e(){this.props.onEnter()}},{key:"onClickClear",value:function e(){this.props.clearSearchInput();this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function e(t){var r=!!(t&&t.getWrappedInstance);this.texty=r?t.getWrappedInstance():t}},{key:"getTextyString",value:function e(){return this.texty?this.texty.value():""}},{key:"updateDisplayQuery",value:function e(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function e(){var t=this.props,r=t.orgName,a=t.teamName;var n=A.t("Search");var i={tabcomplete:{completers:[]},keyboard:{useFormattingCommands:false}};var s=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden";var o="number"===typeof this.props.autocompleteSelectedIndex?Object(R["b"])(this.props.autocompleteSelectedIndex):void 0;var c={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:true,activedescendant:o};return f.a.createElement("div",{className:"c-search__input_box"},f.a.createElement(O["a"],{enabled:["feature_react_search"]},f.a.createElement(y["a"],{type:"search-medium",className:"c-search__input_box__icon"}),f.a.createElement(m["g"],{className:"c-search__input_box__input",modules:i,ref:this.setTextyRef,ariaLabel:n,unsafeAriaProps:c,initialText:this.props.displayQuery,placeholder:A.t("Search {teamName}",{teamName:r||a}),onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,useTextChangeQueue:true,isSingleLine:true,focusOnMount:false,useLegacyCreate:true,isJumbomojiEnabled:false,showMentionTooltips:false,enableBroadcastKeywords:false}),f.a.createElement(k["c"],{className:s,onClick:this.onClickClear,label:A.t("Clear")},A.t("Clear"))))}}]);return t}(h["Component"]);x.displayName="SearchInputBox";x.defaultProps=P;var D=function e(t){return{displayQuery:Object(j["getSearchInputBoxDisplayQuery"])(t),orgName:Object(C["getEnterpriseOrgName"])(t)||"",teamName:Object(S["getTeamDisplayName"])(Object(E["getCurrentTeam"])(t)),autocompleteSelectedIndex:Object(w["getSearchAutocompleteSelectedIndex"])(t)}};var F={setSearchInputBoxUserQuery:j["setSearchInputBoxUserQuery"],clearSearchInput:I["a"]};t["a"]=Object(b["connect"])(D,F,null,{withRef:true})(x)},22456:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21696);var c=r(268);var l=r(21804);var u=r(21836);var d=r(21837);var v=Object(o["e"])("Clog a search open event using data from redux",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.tab;e(Object(c["setTabOnly"])({tab:a}));var i=t();e(Object(d["a"])(n()({method:"search_tab",request_id:Object(l["a"])(i)},Object(u["a"])(i))))});v.propTypes={method:s.a.string};t["a"]=v},22457:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(9);var y=r(268);var O=r(21743);var k=r(3271);var j=r(1068);var C=r(12);var E=r(1592);var S=r(277);var w=r(1104);var I=r(21712);var T=r(22270);var N=r(5);var R=r(69);var A=r(266);var M=r(3184);var P=r(37);var x=r(378);var D=r(902);var F=r(3105);var L=r(21715);var B=r(21805);var U=r(22458);var q=r(22271);var H=r(22272);var W=r(22273);var G=r(22274);var V=r(22275);var z=r(22958);var K=r(22964);var Q=new N["b"]("search");var Y={clogSearchClick:m.a.func.isRequired,previewFile:m.a.func.isRequired,currentTeam:m.a.object.isRequired,isScrolledTop:m.a.bool.isRequired,requestQuery:m.a.string.isRequired,relevantResults:m.a.object,recentResults:m.a.object,relevantState:m.a.object,recentState:m.a.object,featureReactSearch:m.a.bool.isRequired,setPageForModule:m.a.func.isRequired,fetchSearchResultsByModule:m.a.func.isRequired,displayModelOrViewById:m.a.func.isRequired,messageSort:m.a.string.isRequired,setMessageSort:m.a.func.isRequired,setScrollPosition:m.a.func.isRequired,showThread:m.a.func.isRequired,startWithScrollPosition:m.a.number.isRequired,onClickRefreshSearch:m.a.func.isRequired,numOfFileResults:m.a.number.isRequired};var J={relevantResults:{},recentResults:{},relevantState:{},recentState:{}};var Z=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(r,["setCurrentFilter","pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","setWrapperRef","reportScrollPosition","renderSortToggleMenu","handleTopScrollElementRef","scrollTop"]);r.markSearchModuleRenderStart=Object(b["throttle"])(function(){var e=r.getVisibleResults();Object(B["e"])("messages",r.props.messageSort,e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return r}c()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onRepliesClick",value:function e(t){var r=t.channelId,a=t.ts;this.props.showThread({channelId:r,threadTs:a});Object(w["c"])()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleMessages()[r];if(a&&a.messages&&a.messages.length){var n=a.messages[0];this.jumpToMessage({permalink:n.permalink,teamId:this.props.currentTeam.id})}}},{key:"getVisibleResults",value:function e(){return this.props.messageSort===O["a"].recentMessages?this.props.recentResults:this.props.relevantResults}},{key:"getVisibleMessages",value:function e(){return this.getVisibleResults().items[this.getVisibleUIState().page]}},{key:"getVisibleUIState",value:function e(){return this.props.messageSort===O["a"].recentMessages?this.props.recentState:this.props.relevantState}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"setCurrentFilter",value:function e(t){this.props.setMessageSort({messageSort:t})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"jumpToMessage",value:function e(t){var r=t.teamId,a=t.permalink;r&&Object(D["d"])(r,a)||window.open(a,"_BLANK");Object(w["c"])()}},{key:"jumpToFile",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,c=r.botId;this.props.clogSearchClick({type:"file",iid:n,ts:i,channelId:s,userId:o,botId:c,extraArguments:{click_file_id:a.id}});this.props.previewFile({fileId:a.id});Object(w["c"])()}},{key:"pageForward",value:function e(){this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.getVisibleResults();var a=this.getVisibleUIState();var n=Math.max(a.page+t,1);r.items[n]?this.props.setPageForModule({moduleType:this.props.messageSort,page:n}):this.props.fetchSearchResultsByModule({module:this.props.messageSort,apiModule:"messages",sort:this.props.messageSort===O["a"].recentMessages?"timestamp":"score",query:this.props.requestQuery,page:n})}},{key:"renderLoading",value:function e(){var t=this.getVisibleUIState();if(t.loading)return h.a.createElement(R["a"],{size:"small"});return null}},{key:"renderError",value:function e(){if(!this.props.featureReactSearch)return null;var t=this.getVisibleUIState();if(t.error===y["MODULE_ERROR_STATE"].None)return null;return h.a.createElement(G["a"],{errorType:t.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderResults",value:function e(){var t=this;var r=this.getVisibleUIState();if(r.loading)return null;var a=this.getVisibleMessages();var i=g.a.map(a,function(e,t){return t})||[];return h.a.createElement(K["a"],{ids:i,onSelectItem:this.onSelectItem,itemAriaLabel:function e(){return""},renderItem:function e(r){return h.a.createElement(U["a"],n()({key:a[r].iid},a[r],{onMessageJump:t.jumpToMessage,onFileJump:t.jumpToFile,onRepliesClick:t.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function e(t){var r=this;return h.a.createElement(x["a"],{enabled:["feature_react_search"]},h.a.createElement(A["e"],t,h.a.createElement(A["b"],{key:"recent",label:Q.t("Most recent"),onSelected:function e(){return r.props.setMessageSort({messageSort:O["a"].recentMessages})}}),h.a.createElement(A["b"],{key:"relevant",label:Q.t("Most relevant"),onSelected:function e(){return r.props.setMessageSort({messageSort:O["a"].relevantMessages})}})))}},{key:"renderSortToggle",value:function e(){var t=this.props.messageSort;var r=h.a.createElement(x["a"],{enabled:["feature_react_search"]},t===O["a"].recentMessages?Q.t("Most recent"):Q.t("Most relevant"));return h.a.createElement(x["a"],{enabled:["feature_react_search"]},h.a.createElement("div",{className:"c-search__section_more_link"},h.a.createElement(A["d"],{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},h.a.createElement(M["c"],null,r," ",h.a.createElement(P["b"],{type:"chevron-down",inline:true})))))}},{key:"renderMessageLimitBanner",value:function e(){var t=this.getVisibleUIState();if(t.loading)return null;return h.a.createElement(z["a"],{type:"messages"})}},{key:"renderSearchResults",value:function e(){if(!this.props.featureReactSearch)return null;var t=this.props.messageSort===O["a"].recentMessages?this.props.recentState:this.props.relevantState;var r=this.getVisibleResults();var a=r&&r.pagination&&r.pagination.total_count||0;var n=this.getVisibleUIState();var i=r&&r.pagination&&r.pagination.page_count||0;var s=i>1&&!n.loading;var o=t.page||1;var c=r&&r.pagination&&r.pagination.per_page||0;var l=r&&r.items&&r.pagination&&r.pagination.page&&r.items[r.pagination.page]&&r.items[r.pagination.page].length||0;var u="message";var d=a?Q.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:a,totalItemCountStr:a>=1e4?Object(F["a"])(a,{decimal_places:0,lowercase:true}):Object(L["a"])(a)}):null;return h.a.createElement("div",{className:"c-search__section c-search__main"},h.a.createElement("h4",{className:"c-search__section_header"},h.a.createElement(x["a"],{enabled:["feature_react_search"]},d),this.renderSortToggle()),this.renderMessageLimitBanner(),this.renderResults(),this.renderLoading(),h.a.createElement(q["a"],{visible:s,currentPageOffset:o,totalPageCount:i,maxPerPageItemCount:c,pageItemCount:l,totalItemCount:a,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return h.a.createElement("div",{className:"c-search__section c-search__main"},h.a.createElement(W["a"],{query:this.props.requestQuery,type:"messages",numOfFileResults:this.props.numOfFileResults}))}},{key:"renderState",value:function e(){var t=this.getVisibleUIState();if(t.error!==y["MODULE_ERROR_STATE"].None)return this.renderError();var r=this.getVisibleResults();var a=r&&r.pagination&&r.pagination.total_count||0;if(0===a&&!t.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){if(!this.props.featureReactSearch)return null;var t=this.getVisibleUIState();t.loading||this.markSearchModuleRenderStart();var r=this.props.isScrolledTop;return h.a.createElement("div",{className:"c-search__view",id:"c-search__tab__messages",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),h.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},h.a.createElement("div",{className:"c-search__section"},h.a.createElement("h4",{className:"c-search__section_header"},Q.t("Filter by")),h.a.createElement(H["a"],null))),!r&&h.a.createElement(V["a"],{onClick:this.scrollTop}))}}]);return t}(p["PureComponent"]);Z.displayName="MessageView";Z.defaultProps=J;var X=function e(t){var r=Object(k["getCurrentTeam"])(t);var a=Object(j["getRequestQuery"])(t);var n=Object(j["getResponseModule"])(t,{module:O["a"].relevantMessages})||{items:{}};var i=Object(j["getResponseModule"])(t,{module:O["a"].recentMessages})||{items:{}};var s=Object(y["getModuleState"])(t,O["a"].relevantMessages);var o=Object(y["getModuleState"])(t,O["a"].recentMessages);var c=Object(O["b"])(t);var l=Object(j["getResponseModule"])(t,{module:"files"})||{items:{}};var u=l.pagination&&l.pagination.total_count;return{requestQuery:a,relevantResults:n,recentResults:i,relevantState:s,recentState:o,messageSort:c,currentTeam:r,numOfFileResults:u,featureReactSearch:Object(C["isFeatureEnabled"])(t,"feature_react_search")}};var $={clogSearchClick:T["a"],previewFile:I["b"],displayModelOrViewById:S["a"],fetchSearchResultsByModule:E["c"],setMessageSort:O["c"],setPageForModule:y["setPageForModule"],showThread:I["d"]};t["a"]=Object(_["connect"])(X,$)(Z)},22458:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(3);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(21697);var j=r(3271);var C=r(22270);var E=r(1104);var S=r(21703);var w=r(907);var I=r(5);var T=r(215);var N=r(378);var R=r(283);var A=r(3241);var M=r(22997);var P=r(20232);var x=r.n(P);var D=new I["b"]("search");var F={messages:_.a.arrayOf(_.a.shape({iid:_.a.string.isRequired,user:_.a.string.isRequired,ts:_.a.string.isRequired,extracts:_.a.array})).isRequired,channel:_.a.shape({id:_.a.string.isRequired,name:_.a.string.isRequired}).isRequired,workspaceName:_.a.string,currentTeam:_.a.object.isRequired,isEnterpriseOrg:_.a.bool.isRequired,onMessageJump:_.a.func.isRequired,onFileJump:_.a.func.isRequired,onRepliesClick:_.a.func.isRequired,clogSearchClick:_.a.func};var L={workspaceName:"",clogSearchClick:h.a.noop};var B=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={isExpanded:false,isHoveringOnExpandLinks:false};Object(p["bindAll"])(r,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]);return r}c()(t,[{key:"onChannelClick",value:function e(){var t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();t[0]&&this.onMessageJump({iid:t[0].iid,permalink:t[0].permalink,ts:t[0].ts,channelId:this.props.channel.id,userId:t[0].user,botId:t[0].botId})}},{key:"onLinkClick",value:function e(t){this.props.clogSearchClick(n()({},t));"channel"===t.type&&Object(E["c"])()}},{key:"onMessageJump",value:function e(t){var r=t.iid,a=t.permalink,n=t.ts,i=t.channelId,s=t.userId,o=t.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:a});this.props.clogSearchClick({type:"message_jump",iid:r,ts:n,channelId:i,userId:s,botId:o})}},{key:"onFileJump",value:function e(t,r){var a=r.file,n=r.iid,i=r.ts,s=r.channelId,o=r.userId,c=r.botId;this.props.onFileJump(t,{file:a,iid:n,ts:i,channelId:s,userId:o,botId:c})}},{key:"onRepliesClick",value:function e(t){this.props.onRepliesClick(t);this.props.clogSearchClick(t)}},{key:"onExpandHoverStart",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:true}})}},{key:"onExpandHoverEnd",value:function e(){this.setState(function(){return{isHoveringOnExpandLinks:false}})}},{key:"getCondensedMessageArray",value:function e(){var t=this.props.messages;return h.a.reduce(t,function(e,t){var r=e.length&&e[e.length-1].collapsedStub;t.stub&&(!t.text||t.text.length>200||r)?r?e[e.length-1].count+=1:e.push({collapsedStub:true,count:1}):e.push(t);return e},[])}},{key:"expand",value:function e(t){var r=t.iid,a=t.ts,n=t.channelId,i=t.userId,s=t.botId;this.setState(function(){return{isExpanded:true}});this.props.clogSearchClick({type:"expand",iid:r,ts:a,channelId:n,userId:i,botId:s})}},{key:"formatHeaderDate",value:function e(){var t=this.props.messages;var r=t[0]&&t[0].ts;if(!r)return"";var a=Object(T["g"])(r,{returnMoment:true});return Object(T["e"])(a,{shortenMonth:true,excludeYear:Object(T["d"])(r)})}},{key:"renderHeader",value:function e(){var t=this.props.channel;if(!t)return null;var r=this.formatHeaderDate();return m.a.createElement(R["a"],{className:"c-message_group__header",onClick:this.onChannelClick},m.a.createElement(A["a"],{channel:t,teamIconSize:"14",showPresence:true,inline:true,showTeamIconForXwsChannels:true}),m.a.createElement("span",null,"\u2013"),m.a.createElement("span",{className:"c-message_group__header_date"},r),m.a.createElement("span",{className:"c-message_group__header_view_label"},m.a.createElement(N["a"],{enabled:["feature_react_search"]},D.t("View in channel"))))}},{key:"renderMessages",value:function e(){var t=this;var r=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return h.a.map(r,function(e,r){if(e.collapsedStub&&!t.state.isExpanded)return m.a.createElement(N["a"],{key:r,enabled:["feature_react_search"]},m.a.createElement("button",{className:"c-message_group__divider",onClick:t.expand},m.a.createElement("hr",{className:"c-message_group__divider_rule"}),m.a.createElement("div",{className:"c-message_group__divider_text"},D.t("+{count, plural, =1 {# message} other {# messages}}",{count:e.count}))));return m.a.createElement(M["a"],n()({key:e.ts},e,{channel:t.props.channel,expanded:t.state.isExpanded,onExpand:t.expand,onClick:t.onMessageJump,onLinkClick:t.onLinkClick,onFileClick:t.onFileJump,onRepliesClick:t.onRepliesClick,onExpandHoverStart:t.onExpandHoverStart,onExpandHoverEnd:t.onExpandHoverEnd}))})}},{key:"render",value:function e(){var t=O()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return m.a.createElement("div",{className:t},this.renderHeader(),this.renderMessages())}}]);return t}(f["PureComponent"]);B.displayName="SearchMessageGroup";B.defaultProps=L;var U=function e(t,r){var a=r.channel,i=r.team;var s=Object(j["getCurrentTeam"])(t);var o=Object(j["getTeamById"])(t,i||s.id);var c=Object(S["getTeamDisplayName"])(o);var l=a;"string"===typeof a?l=Object(k["getChannelById"])(t,a,true):Object(w["isMpim"])(a)?l=Object(k["getChannelById"])(t,a.id,true):l&&l.id&&Object(k["getChannelById"])(t,l.id,true);return{channel:n()({},l,{team_id:i}),isEnterpriseOrg:!!(s&&s.enterprise_id),workspaceName:c,currentTeam:s}};var q={clogSearchClick:C["a"]};t["a"]=Object(b["connect"])(U,q)(B)},22459:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e){if(!e||Object(a["isEmpty"])(e))return true;if(e.in&&e.in.length)return false;if(e.from&&e.from.length)return false;if(e.to&&e.to.length)return false;if(e.before||e.after)return false;if(e.has_star||e.has_pin||e.has_link||e.has_rxn)return false;return true}},2246:function(e,t,r){"use strict";t["a"]=s;var a=r(1);var n=r.n(a);var i=r(2247);function s(e){var t=e.searchQuery,r=e.searchMap,a=e.emojiMap,s=e.skinToneModifier;if(!r||!Object.keys(r).length||!a||!a.length)return[];var o=":"===t.substr(0,1);var c=":"===t.slice(-1);var l=!o&&!c;var u={allow_empty_query:true,frecency:true,prefer_exact_match:true,match_emoji_keywords:l};var d=t.replace(/^(\+|-)?:/,"").replace(/:$/,"");var v=[];if(o)v=Object(i["a"])(d,{emoji:a},u);else{var p=n.a.compact(d.split(" "));p.forEach(function(e){v=v.concat(Object(i["a"])(e,{emoji:a},u))})}return n.a.chain(v).map(function(e){var t=e.model_ob.name_with_colons;e.model_ob.is_skin&&s&&(t+=s);return r[t]}).uniqBy("names").compact().value()}},22460:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(11);var g=r.n(b);var _=r(5);var y=r(378);var O=r(23019);var k=new _["b"]("search");var j={onStartDateChange:m.a.func.isRequired,onEndDateChange:m.a.func.isRequired,startDate:m.a.string,endDate:m.a.string};var C={startDate:null,endDate:null};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(d["bindAll"])(r,["isDateDisabledStart","isDateDisabledEnd"]);return r}s()(t,[{key:"isDateDisabledStart",value:function e(t){var r=this.props.endDate;if(r)return t.isAfter(r)||t.isAfter(g()());return t.isAfter(g()())}},{key:"isDateDisabledEnd",value:function e(t){var r=this.props.startDate;if(r)return t.isBefore(r)||t.isAfter(g()());return t.isAfter(g()())}},{key:"render",value:function e(){var t=this.props,r=t.onStartDateChange,a=t.onEndDateChange,n=t.endDate,i=t.startDate;return h.a.createElement(y["a"],{enabled:["feature_react_search"]},h.a.createElement("div",{className:"p-search_filter"},h.a.createElement("div",{className:"p-search_filter__title"},h.a.createElement("h3",{className:"p-search_filter__title_text"},k.t("Date"))),h.a.createElement("div",{className:"p-search_filter__dates"},h.a.createElement(O["a"],{date:i,onDateChange:function e(t){r(t?g()(t):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:n||g()().format("YYYY-MM-DD"),dateLabel:k.t("Starting"),dateAriaLabel:k.t("Starting date"),removeAriaLabel:k.t("Remove starting date")}),h.a.createElement(O["a"],{date:n,onDateChange:function e(t){a(t?g()(t):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:i,disableDatesAfter:g()().format("YYYY-MM-DD"),dateLabel:k.t("Ending"),dateAriaLabel:k.t("Ending date"),removeAriaLabel:k.t("Remove ending date")}))))}}]);return t}(p["PureComponent"]);E.displayName="DateRangeFilter";E.defaultProps=C;t["a"]=E},22461:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o={variation:s.a.number.isRequired,includeAvatar:s.a.bool};var c={includeAvatar:false};function l(e){var t=e.variation,r=e.includeAvatar;return n.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},r?n.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,n.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}l.displayName="PlaceholderSuggestion";l.defaultProps=c;t["a"]=l},22462:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(268);var _=r(21712);var y=r(1068);var O=r(12);var k=r(1592);var j=r(22270);var C=r(1104);var E=r(5);var S=r(378);var w=r(21983);var I=r(69);var T=r(3105);var N=r(21715);var R=r(21805);var A=r(22271);var M=r(22272);var P=r(22273);var x=r(22274);var D=r(22275);var F=r(22958);var L=r(22964);var B=new E["b"]("search");var U={isScrolledTop:h.a.bool.isRequired,previewFile:h.a.func.isRequired,loading:h.a.bool,error:h.a.string.isRequired,fileResults:h.a.object,fileState:h.a.object,featureReactSearch:h.a.bool.isRequired,fetchSearchResultsByModule:h.a.func.isRequired,setPageForModule:h.a.func.isRequired,requestQuery:h.a.string,setScrollPosition:h.a.func.isRequired,startWithScrollPosition:h.a.number.isRequired,clogSearchClick:h.a.func,onClickRefreshSearch:h.a.func.isRequired,numOfMessageResults:h.a.number};var q={loading:false,fileResults:{},fileState:{},requestQuery:"",clogSearchClick:f["noop"],numOfMessageResults:void 0};var H=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["pageForward","pageBack","pageSearchResults","setWrapperRef","reportScrollPosition","onFileClick","onSelectItem","handleTopScrollElementRef","scrollTop"]);r.markSearchModuleRenderStart=Object(f["throttle"])(function(){var e=r.props.fileResults;Object(R["e"])("files","score",e&&e.pagination&&e.pagination.page||1)},2e3,{leading:true});return r}s()(t,[{key:"componentDidMount",value:function e(){this.props.startWithScrollPosition&&(this.wrapperEl.scrollTop=this.props.startWithScrollPosition)}},{key:"onFileClick",value:function e(t,r){var a=r.file,n=r.index;this.props.clogSearchClick({type:"file",iid:a.iid,userId:a.user,extraArguments:{click_file_id:a.id,click_position:n}});this.props.previewFile({fileId:a.id});Object(C["c"])()}},{key:"onSelectItem",value:function e(t,r){var a=this.getVisibleFiles()[r];this.onFileClick(t,{file:a,index:r})}},{key:"setWrapperRef",value:function e(t){this.wrapperEl=t}},{key:"getVisibleFiles",value:function e(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"pageForward",value:function e(){this.pageSearchResults(1)}},{key:"pageBack",value:function e(){this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function e(t){var r=this.props,a=r.fileState,n=r.fileResults;var i=Math.max(a.page+t,1);n.items[i]?this.props.setPageForModule({moduleType:"files",page:i}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",query:this.props.requestQuery,page:i})}},{key:"reportScrollPosition",value:function e(){this.props.setScrollPosition(this.wrapperEl.scrollTop)}},{key:"handleTopScrollElementRef",value:function e(t){this.topScrollElementRef=t}},{key:"scrollTop",value:function e(){if(this.topScrollElementRef){this.props.setScrollPosition(0);this.topScrollElementRef.scrollIntoView()}}},{key:"renderLoading",value:function e(){if(this.props.loading)return v.a.createElement(I["a"],{size:"small"});return null}},{key:"renderMessageLimitBanner",value:function e(){if(this.props.loading)return null;return v.a.createElement(F["a"],{type:"files"})}},{key:"renderFiles",value:function e(){var t=this;var r=this.props,a=r.fileState,n=r.fileResults;if(!n.items[a.page||1])return null;Object(R["e"])("files","score",a.page);var i=this.getVisibleFiles();var s=i.map(function(e,t){return t});return v.a.createElement(L["a"],{ids:s,onSelectItem:this.onSelectItem,renderItem:function e(r){return v.a.createElement(w["a"],{key:i[r].id,index:r,file:i[r],onClick:t.onFileClick,hasHighlightMarkers:true})},itemAriaLabel:function e(){return""}})}},{key:"renderSearchResults",value:function e(){if(!this.props.featureReactSearch)return null;var t=this.props,r=t.fileState,a=t.fileResults;var n=a&&a.pagination&&a.pagination.total_count||0;var i=a&&a.pagination&&a.pagination.page_count||0;var s=i>1&&!this.props.loading;var o=r.page||1;var c=a&&a.pagination&&a.pagination.per_page||0;var l=a&&a.items&&a.pagination&&a.pagination.page&&a.items[a.pagination.page]&&a.items[a.pagination.page].length||0;var u="file";var d=n?B.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:n,totalItemCountStr:n>=1e4?Object(T["a"])(n,{decimal_places:0,lowercase:true}):Object(N["a"])(n)}):null;return v.a.createElement("div",{className:"c-search__section c-search__main"},v.a.createElement("h4",{className:"c-search__section_header"},v.a.createElement(S["a"],{enabled:["feature_react_search"]},d)),this.renderMessageLimitBanner(),this.renderFiles(),this.renderLoading(),v.a.createElement(A["a"],{visible:s,currentPageOffset:o,totalPageCount:i,maxPerPageItemCount:c,pageItemCount:l,totalItemCount:n,itemType:u,onForward:this.pageForward,onBack:this.pageBack}))}},{key:"renderNoResults",value:function e(){return v.a.createElement("div",{className:"c-search__section c-search__main"},v.a.createElement(P["a"],{query:this.props.requestQuery,type:"files",numOfMessageResults:this.props.numOfMessageResults}))}},{key:"renderError",value:function e(){if(!this.props.featureReactSearch)return null;if(this.props.error===g["MODULE_ERROR_STATE"].None)return null;return v.a.createElement(x["a"],{errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch})}},{key:"renderState",value:function e(){var t=this.props.fileResults;if(this.props.error!==g["MODULE_ERROR_STATE"].None)return this.renderError();var r=t&&t.pagination&&t.pagination.total_count||0;if(0===r&&!this.props.loading)return this.renderNoResults();return this.renderSearchResults()}},{key:"render",value:function e(){if(!this.props.featureReactSearch)return null;this.props.loading||this.markSearchModuleRenderStart();var t=this.props.isScrolledTop;return v.a.createElement("div",{className:"c-search__view",id:"c-search__tab_file",onScroll:this.reportScrollPosition,ref:this.setWrapperRef,role:"tabpanel"},this.renderState(),v.a.createElement("div",{className:"c-search__extras",ref:this.handleTopScrollElementRef},v.a.createElement("div",{className:"c-search__section"},v.a.createElement("h4",{className:"c-search__section_header"},B.t("Filter by")),v.a.createElement(M["a"],{showFileFilters:true}))),!t&&v.a.createElement(D["a"],{onClick:this.scrollTop}))}}]);return t}(d["PureComponent"]);H.displayName="FileView";H.defaultProps=q;var W=function e(t){var r=Object(y["getRequestQuery"])(t);var a=Object(y["getResponseModule"])(t,{module:"files"})||{items:[]};var n=Object(g["getModuleState"])(t,"files");var i=Object(y["getResponseModule"])(t,{module:"relevantMessages"})||{items:{}};var s=i.pagination&&i.pagination.total_count;return{requestQuery:r,fileResults:a,fileState:n,numOfMessageResults:s,loading:n&&n.loading,error:n&&n.error,featureReactSearch:Object(O["isFeatureEnabled"])(t,"feature_react_search")}};var G={setPageForModule:g["setPageForModule"],fetchSearchResultsByModule:k["c"],clogSearchClick:j["a"],previewFile:_["b"]};t["a"]=Object(b["connect"])(W,G)(H)},22463:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(21714);var l=r(22464);var u=r(22479);var d=r(22480);var v={id:s.a.string};var p={id:void 0};var h=function e(t){var r=t.id;if(!r)return null;if("Vall_threads"===r)return n.a.createElement(u["a"],null);if("Vall_unreads"===r)return n.a.createElement(d["a"],null);return n.a.createElement(l["a"],{channelId:r})};h.displayName="ChannelHeader";h.defaultProps=p;var f=function e(t){return{id:Object(c["getPrimaryView"])(t)}};t["a"]=Object(o["connect"])(f)(h)},22464:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(907);var l=r(21697);var u=r(22465);var d=r(22472);var v=r(22474);var p=r(22475);var h=r(22476);var f=r(22477);var m=r(22478);var b=r(22921);var g=r(22930);var _={channelId:s.a.string.isRequired,channelType:s.a.oneOf(["channel","private","mpim","im"])};var y={channelType:void 0};var O=function e(t){var r=t.channelId,a=t.channelType;if(!r||!a)return null;return n.a.createElement("div",{className:"p-global_nav__channel"},n.a.createElement(v["a"],{channelId:r}),n.a.createElement(u["a"],{channelId:r}),n.a.createElement(d["a"],{channelId:r}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(m["a"],{channelId:r}),n.a.createElement(b["a"],{channelId:r}),n.a.createElement(p["a"],{channelId:r}),"im"!==a&&n.a.createElement(h["a"],{channelId:r}),n.a.createElement(f["a"],{channelId:r}),n.a.createElement(g["a"],{channelId:r}))};O.displayName="ModelHeader";O.defaultProps=y;var k=function e(t,r){var a=r.channelId;var n=Object(l["getChannelById"])(t,a);if(!n)return{};return{channelType:Object(c["getChannelType"])(n)}};t["a"]=Object(o["connect"])(k)(O)},22465:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(37);var O=r(603);var k=r(978);var j=r(1059);var C=r(60);var E=r(980);var S=r(3184);var w=r(12);var I=r(21697);var T=r(376);var N=r(3276);var R=r(907);var A=r(5);var M=r(1557);var P=r(22276);var x=new A["b"]("channel_header");var D={name:h.a.string.isRequired,type:h.a.string.isRequired,userId:h.a.string,members:h.a.oneOfType([h.a.array,h.a.bool]),presences:h.a.oneOfType([h.a.object,h.a.bool]),currentUser:h.a.string.isRequired,isMuted:h.a.bool,isOrgShared:h.a.bool.isRequired,isExternallyShared:h.a.bool.isRequired,isPendingExternallyShared:h.a.bool.isRequired,sharedTeamIds:h.a.arrayOf(h.a.string),className:h.a.string,featureGlobalNav:h.a.bool};var F={userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var L=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderChannel=r.renderChannel.bind(r);r.renderPrivate=r.renderPrivate.bind(r);r.renderIM=r.renderIM.bind(r);r.renderMPIM=r.renderMPIM.bind(r);r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(){Object(M["c"])("details")}},{key:"renderChannel",value:function e(t){var r="#"+this.props.name;return v.a.createElement(t,null,r)}},{key:"renderPrivate",value:function e(t){return v.a.createElement(d["Fragment"],null,v.a.createElement(y["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),v.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var r=this.props.userId;return v.a.createElement(d["Fragment"],null,v.a.createElement(t,null,v.a.createElement(O["a"],{id:r,key:"name"})),v.a.createElement(j["a"],{memberId:r,className:"p-global_nav__channel_name_presence",key:"presence"}),v.a.createElement(k["a"],{memberId:r,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var r=this;var a=this.props,n=a.members,i=a.presences;var s=Object(g["flatMap"])(Object(g["filter"])(n,function(e){return e!==r.props.currentUser}),function(e,t){var r=i[e]===T["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return v.a.createElement(d["Fragment"],null,t>0?", ":null,v.a.createElement(O["a"],{id:e,key:e+"-name",className:r}),v.a.createElement(k["a"],{memberId:e,key:e+"-status",tooltip:false,noText:true}))});return v.a.createElement(t,null,s)}},{key:"renderShared",value:function e(){var t=this.props,r=t.isOrgShared,a=t.isExternallyShared,n=t.isPendingExternallyShared,i=t.sharedTeamIds;if(r)return v.a.createElement(C["d"],{tip:x.t("Shared channel"),position:"bottom"},v.a.createElement(y["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(a)return v.a.createElement(E["a"],{sharedTeamIds:i,pending:n,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(){return v.a.createElement(P["a"],null)}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.type,n=r.className,i=r.isMuted,s=r.featureGlobalNav;if(!s)return null;var o="channel"===a||"private"===a?x.t("View channel details"):x.t("View conversation details");var c=function e(r){var a=r.children;return v.a.createElement(C["d"],{tip:o,position:"bottom",delay:C["a"]},v.a.createElement(S["c"],{className:"p-global_nav__channel_name_name",onClick:t.onClick},a))};var l=void 0;switch(a){case"channel":l=this.renderChannel(c);break;case"private":l=this.renderPrivate(c);break;case"im":l=this.renderIM(c);break;case"mpim":l=this.renderMPIM(c);break;default:break}var u=m()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+a,i&&"p-global_nav__channel_name--muted",n);return v.a.createElement("div",{className:u},l,this.renderShared())}}]);return t}(d["Component"]);L.displayName="Name";L.defaultProps=F;var B=function e(t,r){var a=r.channelId;var n=Object(I["getChannelById"])(t,a);var i=Object(R["getMemberIdsFromMpim"])(n);var s=Object(g["mapValues"])(Object(g["keyBy"])(i),function(e){return Object(T["getPresenceByMemberId"])(t,e)});return{name:Object(R["getDisplayName"])(n),type:Object(R["getChannelType"])(n),userId:Object(R["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(w["getCurrentUserId"])(t),isMuted:Object(N["isChannelMutedById"])(t,a),members:i,presences:s,isOrgShared:Object(R["isOrgSharedPublicOrPrivateChannel"])(n),isExternallyShared:Object(R["isExternallySharedChannel"])(n),isPendingExternallyShared:Object(R["isPendingExternallySharedChannel"])(n),sharedTeamIds:Object(R["getMaybePendingSharedTeamIds"])(n),featureGlobalNav:Object(w["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(b["connect"])(B)(L)},22466:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.edit_member_profile.start")},22467:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.channel_options_dialog.start")},22468:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.channel_prefs_dialog.start")},22469:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.mpim_conversion_modal.startMpimConversionModal")},22470:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.apps_browser.startAddApps")},22471:function(e,t,r){"use strict";t["a"]=p;var a=r(21697);var n=r(21698);var i=r(54);var s=r(12);var o=r(907);var c=r(3203);var l=r(22920);var u=r(473);var d=r(3206);var v=r(1578);function p(e,t){var r=Object(a["getChannelById"])(e,t);if(!e||!r)return null;var p=Object(n["getMemberById"])(e,Object(o["getMemberIdFromIm"])(r));var h=Object(n["getCurrentMember"])(e);var f=Object(o["getChannelType"])(r);var m="im"===f;var b="mpim"===f;var g="channel"===f;var _="private"===f;var y=g||_;var O=Object(o["isYou"])(h.id,r);var k=Object(l["a"])(e,t);var j=true;var C=!m;var E=O;var S=m&&!O;var w=m&&!O&&!Object(o["isSlackbot"])(r)&&!Object(c["W"])(h)&&!Object(c["W"])(p)&&!Object(c["D"])(p)&&!Object(c["H"])(p);var I=true;var T=y&&!Object(c["W"])(h)&&!Object(c["R"])(h)&&Object(o["isMemberOfChannel"])(r)&&(!Object(o["isRequired"])(r)||Object(u["h"])(r))&&(!Object(s["pageNeedsEnterprise"])(e)||!(Object(o["isOrgShared"])(r)&&!Object(u["c"])()));var N=Object(d["b"])(r);var R=b&&Object(u["d"])()&&!Object(o["isExternallySharedChannel"])(r);var A=!m&&(b||Object(o["isMemberOfChannel"])(r)&&!Object(o["isArchived"])(r));var M=A;var P=Object(v["a"])()||y&&!(Object(s["pageNeedsEnterprise"])(e)&&Object(o["isOrgShared"])(r));var x=Object(i["getTeamPref"])(e,"allow_email_ingestion");var D=y&&Object(o["isMemberOfChannel"])(r)&&!Object(o["isArchived"])(r)&&!Object(o["isRequired"])(r)&&!Object(c["W"])(h)&&!Object(c["R"])(h);var F=y&&!Object(o["isMemberOfChannel"])(r)&&!Object(o["isArchived"])(r)&&!Object(c["W"])(h)&&!Object(c["R"])(h);var L=!g&&Object(u["e"])(r);return{call:k,jump:j,invite:C,editProfile:E,viewProfile:S,addMember:w,details:I,options:T,retention:N,convertToPrivate:R,notifications:A,mute:M,apps:P,email:x,leave:D,join:F,exportHistory:L}}},22472:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(8);var l=r.n(c);var u=r(3184);var d=r(77);var v=r(21697);var p=r(12);var h=r(907);var f=r(1457);var m=r(5);var b=r(22473);var g=new m["b"]("global_nav");var _={topic:s.a.string,isChannel:s.a.bool.isRequired,canEdit:s.a.bool,featureGlobalNav:s.a.bool.isRequired};var y={topic:void 0,canEdit:true};var O=function e(t){if(t.target&&"A"===t.target.tagName)return;Object(b["a"])()};var k=function e(t){var r=t.topic,i=t.isChannel,s=t.canEdit,o=t.featureGlobalNav;if(!o||!i)return null;var c=void 0;if(r){var v=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},g.t("edit"));c=n.a.createElement(a["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(d["a"],{text:r,className:"p-global_nav__channel_topic_content",noJumbomoji:true})),s&&v)}else c=s?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},g.t("Add a topic\u2026")):null;var p=l()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!r});return n.a.createElement(u["c"],{className:p,onClick:O},c)};k.displayName="Topic";k.defaultProps=y;var j=function e(t,r){var a=r.channelId;var n=Object(v["getChannelById"])(t,a);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(h["isPublicChannel"])(n)||Object(h["isPrivateChannel"])(n)),canEdit:Object(f["i"])(t,a),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(j)(k)},22473:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.channel_topic_dialog.start");var i={start:n}},22474:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(9);var g=r(37);var _=r(60);var y=r(3184);var O=r(1544);var k=r(21697);var j=r(12);var C=r(907);var E=r(5);var S=new E["b"]("global_nav");var w={channelId:h.a.string.isRequired,type:h.a.oneOf(["channel","private","im","mpim"]),starred:h.a.bool.isRequired,show:h.a.bool.isRequired,updateStar:h.a.func.isRequired,featureGlobalNav:h.a.bool.isRequired};var I={type:"channel",starred:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);return r}s()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.channelId,a=t.starred;this.props.updateStar(!a,{channel:r})}},{key:"getTip",value:function e(){var t=this.props,r=t.type,a=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===r||"mpim"===r)return a?S.t("Unstar this conversation"):S.t("Star this conversation");return a?S.t("Unstar this channel"):S.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,r=t.starred,a=t.show;if(!a)return null;return v.a.createElement(_["d"],{position:"bottom",tip:this.getTip()},v.a.createElement(y["c"],{className:m()("p-global_nav__channel_star",r&&"p-global_nav__channel_star--starred"),onClick:this.onClick},v.a.createElement(g["b"],{type:r?"star":"star-o",size:"inherit"})))}}]);return t}(d["Component"]);T.displayName="Star";T.defaultProps=I;var N=function e(t,r){var a=r.channelId;var n=Object(k["getChannelById"])(t,a);var i=Object(C["isStarred"])(n);var s=!!(Object(C["isMemberOfChannel"])(n)||Object(C["isArchived"])(n)&&i);return{type:Object(C["getChannelType"])(n),show:s,starred:i,featureGlobalNav:Object(j["isFeatureEnabled"])(t,"feature_global_nav")}};var R={updateStar:O["a"]};t["a"]=Object(b["connect"])(N,R)(T)},22475:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(37);var l=r(3184);var u=r(60);var d=r(21697);var v=r(5);var p=r(1557);var h=new v["b"]("channel_header");var f={count:s.a.number};var m={count:0};var b=function e(t){var r=t.count;return n.a.createElement(u["d"],{position:"bottom",tip:h.t("View pinned items"),offsetY:-4},n.a.createElement(l["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:p["f"]},n.a.createElement(c["b"],{className:"p-global_nav__channel_info_item_icon",type:"thumb-tack",size:"inherit"}),r))};b.displayName="Pins";b.defaultProps=m;var g=function e(t,r){var a=r.channelId;var n=Object(d["getChannelById"])(t,a);return{count:n&&n.pinned_items_count}};t["a"]=Object(o["connect"])(g)(b)},22476:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(37);var l=r(60);var u=r(3184);var d=r(21722);var v=r(1557);var p=r(5);var h=new p["b"]("channel_header");var f={count:s.a.number};var m={count:0};var b=function e(t){var r=t.count;return n.a.createElement(l["d"],{position:"bottom",tip:h.t("View member list"),offsetY:-4},n.a.createElement(u["c"],{className:"p-global_nav__channel_info_item",onClick:v["e"]},n.a.createElement(c["b"],{className:"p-global_nav__channel_info_item_icon",type:"user",size:"inherit"}),r))};b.displayName="Members";b.defaultProps=m;var g=function e(t,r){var a=r.channelId;var n=Object(d["getMemberCounts"])(t,a);return{count:n&&n.counts&&n.counts.member_count||0}};t["a"]=Object(o["connect"])(g)(b)},22477:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(37);var g=r(3184);var _=r(266);var y=r(60);var O=r(5);var k=r(1058);var j=r(22276);var C=new O["b"]("channel_header");var E={channelId:m.a.string.isRequired,featureGlobalNav:m.a.bool};var S={featureGlobalNav:false};var w=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderMenu=r.renderMenu.bind(r);return r}c()(t,[{key:"renderMenu",value:function e(t){return h.a.createElement(j["a"],n()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return h.a.createElement(_["d"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4},h.a.createElement(y["d"],{position:"bottom",tip:C.t("Channel settings"),offsetY:-4},h.a.createElement(g["c"],{className:"p-global_nav__channel_info_item"},h.a.createElement(b["b"],{type:"cog-o"}))))}}]);return t}(p["Component"]);w.displayName="Actions";w.defaultProps=S;t["a"]=Object(k["a"])("feature_global_nav")(w)},22478:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(8);var l=r.n(c);var u=r(21874);var d=r(21697);var v=r(21698);var p=r(12);var h=r(907);var f=r(3203);var m=r(3184);var b=r(1580);var g=r(5);var _=new g["b"]("global_nav");var y={isBot:s.a.bool,activeTab:s.a.oneOf(["messages","about"]),featureGlobalNav:s.a.bool};var O={isBot:false,activeTab:"messages",featureGlobalNav:false};var k=function e(t){var r=t.isBot,a=t.activeTab,i=t.featureGlobalNav;if(!i||!r)return null;return n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(m["c"],{className:l()("p-global_nav__channel_bot_tab","messages"===a&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(b["a"])("messages")}},_.t("Messages")),n.a.createElement(m["c"],{className:l()("p-global_nav__channel_bot_tab","about"===a&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(b["a"])("about")}},_.t("About")))};k.displayName="BotTabs";k.defaultProps=O;var j=function e(t,r){var a=r.channelId;var n=Object(d["getChannelById"])(t,a);var i=Object(h["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(v["getMemberById"])(t,i);return{isBot:Object(f["z"])(s),activeTab:Object(u["getActiveAppTab"])(t),featureGlobalNav:Object(p["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(j)(k)},22479:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(1058);var c=r(5);var l=new c["b"]("global_nav");var u={featureGlobalNav:s.a.bool,featureThreadsCopyChange:s.a.bool};var d={featureGlobalNav:false,featureThreadsCopyChange:false};var v=function e(t){var r=t.featureGlobalNav,a=t.featureThreadsCopyChange;if(!r)return null;var i="p-global_nav__channel_name p-global_nav__channel_name--synthetic";return n.a.createElement("div",{className:"p-global_nav__channel"},n.a.createElement("div",{className:i},a?l.t("Threads"):l.t("All Threads")))};v.displayName="AllThreadsHeader";v.defaultProps=d;t["a"]=Object(o["a"])("feature_global_nav","feature_threads_copy_change")(v)},2248:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e){if(Object(a["isEmpty"])(e))return[];var t=[];var r={};for(var n=0;n<e.length;n+=1){var i=e[n];if(i.items)for(var s=0;s<i.items.length;s+=1){var o=i.items[s];if(o&&!r[o.name]){t.push(o);r[o.name]=true}}}return t}},22480:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(37);var O=r(3184);var k=r(266);var j=r(21769);var C=r(22481);var E=r(377);var S=r(21874);var w=r(12);var I=r(21984);var T=r(5);var N=new T["b"]("global_nav");var R={hasUnreads:m.a.bool,sortOrder:m.a.string,newUnreads:m.a.number,setUserPrefByApi:m.a.func,featureGlobalNav:m.a.bool};var A={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:g["noop"],featureGlobalNav:false};var M=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSortButton=r.renderSortButton.bind(r);r.renderSortMenu=r.renderSortMenu.bind(r);return r}c()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(I["b"])()}},{key:"renderSortMenu",value:function e(t){var r=this;if(!this.props.featureGlobalNav)return null;var a=[{label:N.t("Alphabetically"),click:function e(){return r.changeSort("alphabetical")}},{label:N.t("Scientifically"),click:function e(){return r.changeSort("priority")}},{label:N.t("Newest channel"),click:function e(){return r.changeSort("newest")}},{label:N.t("Oldest channel"),click:function e(){return r.changeSort("oldest")}}];return h.a.createElement(k["a"],n()({},t,{template:a}))}},{key:"renderSortButton",value:function e(){var t=this.props,r=t.hasUnreads,a=t.sortOrder,n=t.featureGlobalNav;if(!n)return null;if(!r)return null;var i={alphabetical:N.rt("<strong>Sort:</strong> Alphabetically"),priority:N.rt("<strong>Sort:</strong> Scientifically"),oldest:N.rt("<strong>Sort:</strong> Oldest channel"),newest:N.rt("<strong>Sort:</strong> Newest channel")};var s=i[a];return h.a.createElement(k["d"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},h.a.createElement(O["c"],{className:"p-global_nav__unread_sort"},s,h.a.createElement(y["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,r=t.newUnreads,a=t.featureGlobalNav;if(!a||!r)return null;var n=N.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:r});return h.a.createElement(O["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:I["c"]},h.a.createElement(y["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),n)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return h.a.createElement("div",{className:"p-global_nav__channel"},h.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic"},N.t("All Unreads")),this.renderRefreshButton(),h.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(p["Component"]);M.displayName="AllUnreadsHeader";M.defaultProps=A;var P=function e(t){return{hasUnreads:Object(E["hasUnreads"])(t),sortOrder:Object(C["a"])(t),newUnreads:Object(S["getNewUnreads"])(t),featureGlobalNav:Object(w["isFeatureEnabled"])(t,"feature_global_nav")}};var x={setUserPrefByApi:j["c"]};t["a"]=Object(b["connect"])(P,x)(M)},22481:function(e,t,r){"use strict";t["a"]=s;var a=r(54);var n=r(3271);var i=r(21703);function s(e){var t=Object(a["getUserPref"])(e,"all_unreads_sort_order");if(t)return t;return Object(i["isPaidTeam"])(Object(n["getCurrentTeam"])(e))?"priority":"alphabetical"}},22482:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(37);var l=r(60);var u=r(3184);var d=r(12);var v=r(473);var p=r(1452);var h=r(1458);var f=r(5);var m=new f["b"]("global_nav");var b={featureGlobalNav:s.a.bool};var g={featureGlobalNav:false};var _=function e(t){return Object(h["a"])(t,true)};var y=function e(t){var r=t.featureGlobalNav;if(!r)return null;var a=n.a.createElement(u["c"],{className:"p-global_nav__sidebar_jumper",onClick:p["a"]},n.a.createElement(c["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),m.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var i=Object(v["j"])()&&n.a.createElement(l["d"],{tip:m.t("Invite people to this workspace"),position:"bottom"},n.a.createElement(u["c"],{className:"p-global_nav__sidebar_button",onClick:_},n.a.createElement(c["b"],{type:"add-user",className:"p-global_nav__sidebar_button_icon"})));return n.a.createElement("div",{className:"p-global_nav__sidebar"},a,i)};y.displayName="SidebarHeader";y.defaultProps=g;var O=function e(t){return{featureGlobalNav:Object(d["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(O)(y)},22483:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(12);var O=r(21714);var k=r(21701);var j=r(5);var C=r(22484);var E=r(22485);var S=r(22883);var w=r(22486);var I=r(22487);var T=new j["b"]("global_nav");var N={flexName:m.a.string,featureGlobalNav:m.a.bool};var R={flexName:void 0,featureGlobalNav:void 0};var A=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"renderTitle",value:function e(){var t=this.props,r=t.flexName,a=t.featureGlobalNav;if(!a)return null;var n="p-global_nav__flex_title";switch(r){case"convo":case"thread":return h.a.createElement(S["a"],null);case"files":return h.a.createElement("h2",{className:n},T.t("Files"));case"stars":return h.a.createElement("h2",{className:n},T.t("Starred Items"));case"mentions":return h.a.createElement("h2",{className:n},T.t("Activity"));case"team":return h.a.createElement(I["a"],null);case"whats_new":return h.a.createElement("h2",{className:n},T.t("What\u2019s New"));case"groups":return h.a.createElement("h2",{className:n},T.t("User Groups"));case"shortcuts":return h.a.createElement("h2",{className:n},T.t("Keyboard Shortcuts"));case"downloads":return h.a.createElement("h2",{className:n},T.t("Downloads"));case"details":return h.a.createElement(w["a"],null);default:return h.a.createElement("h2",{className:n},"Unimplemented: ",r)}}},{key:"render",value:function e(){var t=this.props.flexName;if(!t)return null;var r=_()(n()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(k["a"])(),"p-global_nav__flex--legacy":!Object(k["a"])()},"p-global_nav__flex--"+t,true));return h.a.createElement("div",{className:r},h.a.createElement(E["a"],null),this.renderTitle(),h.a.createElement(C["a"],null))}}]);return t}(p["Component"]);A.displayName="FlexHeader";A.defaultProps=R;var M=function e(t){return{flexName:Object(O["getSecondaryView"])(t),featureGlobalNav:Object(y["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(b["connect"])(M)(A)},22484:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(1);var l=r.n(c);var u=r(21712);var d=r(37);var v=r(3184);var p={closeFlexpane:s.a.func};var h={closeFlexpane:c["noop"]};var f=function e(t){return n.a.createElement(v["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(d["b"],{type:"times"}))};f.displayName="FlexClose";f.defaultProps=h;t["a"]=Object(o["connect"])(null,{closeFlexpane:u["a"]})(f)},22485:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21751);var _=r(21712);var y=r(22169);var O=r(90);var k=r(1557);var j=r(37);var C=r(3184);var E={flexName:h.a.string,flexExtra:h.a.string,flexOrigin:h.a.string,flexOriginId:h.a.string,previewFile:h.a.func,showUserGroupList:h.a.func};var S={flexName:void 0,flexExtra:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:m["noop"],showUserGroupList:m["noop"]};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.getOrigin=r.getOrigin.bind(r);r.openOrigin=r.openOrigin.bind(r);return r}s()(t,[{key:"onClick",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName;if(r)return this.openOrigin();switch(a){case"files":return Object(k["c"])("files");case"team":return Object(O["j"])();case"groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexName,n=t.flexExtra;if(r)return r;switch(a){case"files":return Object(y["a"])(n)?"files":null;case"team":case"groups":return n?a:null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,r=t.flexOrigin,a=t.flexOriginId;switch(r){case"member_preview":return Object(O["j"])();case"starred_items":return Object(k["c"])("stars");case"channel_page":case"group_page":case"im_page":return Object(k["c"])("details");case"mentions":return Object(k["c"])("mentions");case"file_details":return Object(y["a"])(a)?this.props.previewFile({fileId:a}):Object(k["c"])("files");default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;return v.a.createElement(C["c"],{className:"p-global_nav__flex_btn p-global_nav__flex_btn--back",onClick:this.onClick},v.a.createElement(j["b"],{type:"chevron-large-left"}))}}]);return t}(d["Component"]);w.displayName="FlexBack";w.defaultProps=S;var I=function e(t){return{flexName:Object(m["get"])(Object(g["getFlexpaneState"])(t),"flexName"),flexExtra:Object(m["get"])(Object(g["getFlexpaneState"])(t),"flexExtra"),flexOrigin:Object(m["get"])(Object(g["getFlexpaneState"])(t),"flexOrigin"),flexOriginId:Object(m["get"])(Object(g["getFlexpaneState"])(t),"flexOriginId")}};t["a"]=Object(f["connect"])(I,{previewFile:_["b"],showUserGroupList:_["f"]})(w)},22486:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(21714);var l=r(21697);var u=r(12);var d=r(907);var v=r(5);var p=new v["b"]("global_nav");var h=function e(t){var r=t.name,a=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return a&&r?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},p.t("About {channelName}",{channelName:r})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},p.t("About this conversation"))};h.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var f=function e(t){var r=Object(c["getPrimaryView"])(t);var a=Object(l["getChannelById"])(t,r);if(!a)return null;return{name:Object(d["getDisplayNameForChannel"])(t,a),isChannel:Object(d["isPrivateChannel"])(a)||Object(d["isPublicChannel"])(a),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(f)(h)},22487:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(1);var l=r.n(c);var u=r(21698);var d=r(3271);var v=r(12);var p=r(21751);var h=r(3203);var f=r(21703);var m=r(3184);var b=r(37);var g=r(60);var _=r(5);var y=new _["b"]("global_nav");var O={isAdminUser:s.a.bool,isEnterprise:s.a.bool,isDetailPane:s.a.bool,featureGlobalNav:s.a.bool};var k={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var j=function e(t){var r=t.isAdminUser,i=t.isEnterprise,s=t.isDetailPane,o=t.featureGlobalNav;if(!o)return null;var c=i?y.t("Organization Directory"):y.t("Workspace Directory");var l=r&&!s&&n.a.createElement(a["Fragment"],null,n.a.createElement(g["d"],{tip:y.t("Manage members"),position:"bottom-right"},n.a.createElement(m["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(b["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(a["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},c),l)};j.displayName="DirectoryHeader";j.defaultProps=k;var C=function e(t){return{isAdminUser:Object(h["x"])(Object(u["getCurrentMember"])(t)),isEnterprise:Object(f["isEnterpriseTeam"])(Object(d["getCurrentTeam"])(t)),isDetailPane:!!Object(c["get"])(Object(p["getFlexpaneState"])(t),"flexExtra"),featureGlobalNav:Object(v["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(C)(j)},22488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22489);var n=r(42);Object(n["a"])("interop.mountImageViewer",a["a"]);Object(n["a"])("interop.unmountImageViewer",a["b"])},22489:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(22277);var d=function e(t,r,a){var i=a.image,s=a.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var d=Object(l["c"])(t);Object(c["a"])(n.a.createElement(o["Provider"],{store:d},n.a.createElement(u["c"],{image:i,onDidZoomLevelChange:s})),r)};var v=function e(t){s.a.unmountComponentAtNode(t)}},22490:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1058);var y=r(37);var O=r(1);var k=r.n(O);var j=r(60);var C=r(5);var E=r(3217);var S=r(20185);var w=r.n(S);var I=1e3;var T=new C["b"]("image_viewer");var N={className:h.a.string,handleZoomIn:h.a.func,handleZoomOut:h.a.func,handleReset:h.a.func,handleZoomToActualPixels:h.a.func,handleSlider:h.a.func,handlePan:h.a.func,level:h.a.number,displayLevel:h.a.oneOfType([h.a.string,h.a.number]),isVisible:h.a.bool,featureModernImageViewer:h.a.bool.isRequired,onMouseEnter:h.a.func,onMouseLeave:h.a.func};var R={className:null,handleZoomIn:O["noop"],handleZoomOut:O["noop"],handleReset:O["noop"],handleZoomToActualPixels:O["noop"],handleSlider:O["noop"],handlePan:O["noop"],level:.5,displayLevel:.5,isVisible:true,onMouseEnter:O["noop"],onMouseLeave:O["noop"]};var A="p-zoom__slider";var M=function e(t,r){return m.a.createElement(f["Fragment"],null,m.a.createElement("div",null,t),m.a.createElement("div",{className:"sk_light_gray"},r))};M.displayName="makeTooltipContentWithSubtext";var P=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.inputWidth=0;r.onKeyDown=r.onKeyDown.bind(r);r.onKeyUp=r.onKeyUp.bind(r);r.handleSliderChange=r.handleSliderChange.bind(r);r.handleInactivity=r.handleInactivity.bind(r);r.throttledOnActivity=Object(O["throttle"])(r.onActivity.bind(r),200,{leading:true,trailing:true});r.state={isHoveringTooltip:false,isRecentlyActive:false};return r}c()(t,[{key:"componentDidMount",value:function e(){this.inputWidth=this.tooltip.tooltipContent.getBoundingClientRect().width;this.forceUpdate();document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillReceiveProps",value:function e(t){t.level!==this.props.level&&this.throttledOnActivity()}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.activityTimeout);this.throttledOnActivity.cancel();document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp)}},{key:"onKeyDown",value:function e(t){var r=t.shiftKey?300:50;t.ctrlKey&&(this.isCtrlHeld=true);if(Object(E["a"])()&&!t.target.classList.contains(A))return;"+"===t.key||"="===t.key?t.metaKey||this.props.handleZoomIn():"-"===t.key?t.metaKey||this.props.handleZoomOut():" "!==t.key||t.repeat?"0"!==t.key||0===this.props.level||t.repeat?"ArrowDown"===t.key||"Down"===t.key?this.props.handlePan({x:0,y:-r},true):"ArrowUp"===t.key||"Up"===t.key?this.props.handlePan({x:0,y:r},true):"ArrowRight"===t.key||"Right"===t.key?this.props.handlePan({x:-r,y:0},true):"ArrowLeft"!==t.key&&"Left"!==t.key||this.props.handlePan({x:r,y:0},true):t.metaKey||this.props.handleReset():0===this.props.level?this.props.handleZoomToActualPixels():this.props.handleReset()}},{key:"onKeyUp",value:function e(t){t.ctrlKey||(this.isCtrlHeld=false);" "===t.key&&t.preventDefault()}},{key:"onActivity",value:function e(){clearTimeout(this.activityTimeout);this.activityTimeout=setTimeout(this.handleInactivity,I);this.state.isRecentlyActive||this.setState(function(){return{isRecentlyActive:true}})}},{key:"setIsHoveringTooltip",value:function e(t){this.setState(function(){return{isHoveringTooltip:t,isRecentlyActive:false}})}},{key:"handleInactivity",value:function e(){this.setState(function(){return{isRecentlyActive:false}})}},{key:"handleSliderChange",value:function e(t){this.props.handleSlider(Number(t.target.value),this.isCtrlHeld)}},{key:"calcTooltipOffset",value:function e(){var t=12;var r=.5;return(this.props.level-r)*(this.inputWidth-t)}},{key:"_makeSharedTooltipOptions",value:function e(){var t=this;return{zIndex:"above_fs",onMouseEnter:function e(){return t.setIsHoveringTooltip(true)},onMouseLeave:function e(){return t.setIsHoveringTooltip(false)}}}},{key:"renderSlider",value:function e(){var t=this;return m.a.createElement(j["d"],n()({},this._makeSharedTooltipOptions(),{ref:function e(r){t.tooltip=r},offsetX:this.calcTooltipOffset(),tip:this.props.displayLevel,shouldForceVisible:this.state.isRecentlyActive&&!this.state.isHoveringTooltip}),m.a.createElement("input",{className:A,type:"range",min:0,max:1,value:this.props.level,onChange:this.handleSliderChange,step:.01,onKeyDown:function e(t){return t.preventDefault()},onKeyPress:function e(t){return t.preventDefault()}}))}},{key:"render",value:function e(){var t=this;var r=this.props.level>0;if(!this.props.featureModernImageViewer)return null;return m.a.createElement("div",{className:g()("p-zoom",this.props.className,{"p-zoom--hidden":!this.props.isVisible}),onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},m.a.createElement("div",{className:"p-zoom__control_group"},m.a.createElement(j["d"],n()({},this._makeSharedTooltipOptions(),{tip:M(T.t("Zoom out"),T.t("Press -"))}),m.a.createElement(y["b"],{type:"minus",className:"p-zoom__button--zoom_out",onClick:function e(){return t.props.handleZoomOut()}})),this.renderSlider(),m.a.createElement(j["d"],n()({},this._makeSharedTooltipOptions(),{tip:M(T.t("Zoom in"),T.t("Press + or ="))}),m.a.createElement(y["b"],{type:"plus",className:"p-zoom__button--zoom_in",onClick:function e(){return t.props.handleZoomIn()}}))),m.a.createElement(j["d"],n()({},this._makeSharedTooltipOptions(),{tip:M(T.t("Reset"),T.t("Press space"))}),m.a.createElement(y["b"],{type:"collapse-vertical",className:"p-zoom__control_group p-zoom__button--reset",disabled:!r,onClick:this.props.handleReset})))}}]);return t}(f["PureComponent"]);P.displayName="ZoomControl";P.defaultProps=R;t["a"]=Object(_["a"])("feature_modern_image_viewer")(P)},22491:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(194);var y=r.n(_);var O=r(22278);var k=r(20185);var j=r.n(k);var C={children:h.a.node.isRequired,handleZoomIn:h.a.func,handleZoomOut:h.a.func,handlePan:h.a.func,handleZoomDelta:h.a.func,handleBoxZoom:h.a.func,handleReset:h.a.func,canZoomIn:h.a.bool,canZoomOut:h.a.bool,containerRect:h.a.object};var E={children:null,handleZoomIn:b["noop"],handleZoomOut:b["noop"],handlePan:b["noop"],handleZoomDelta:b["noop"],handleBoxZoom:b["noop"],handleReset:b["noop"],canZoomIn:false,canZoomOut:false,containerRect:null};var S=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onMouseDown=r.onMouseDown.bind(r);r.onMouseUp=r.onMouseUp.bind(r);r.onMouseMove=r.onMouseMove.bind(r);r.onMouseWheel=r.onMouseWheel.bind(r);r.onDocumentCaptureClick=r.onDocumentCaptureClick.bind(r);r.onKeyDown=r.onKeyDown.bind(r);r.onKeyUp=r.onKeyUp.bind(r);r.state={cursor:"default",dragBoxCSSPosition:null};return r}c()(t,[{key:"componentDidMount",value:function e(){this.targetNode.addEventListener("click",function(e){return e.stopPropagation()});this.targetNode.addEventListener("mousedown",this.onMouseDown);document.addEventListener("wheel",this.onMouseWheel);document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("keydown",this.onKeyDown);document.addEventListener("keyup",this.onKeyUp);document.addEventListener("click",this.onDocumentCaptureClick,true)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.determineCursor(t);this.setCursor(r)}},{key:"componentWillUnmount",value:function e(){this.targetNode.removeEventListener("click",function(e){return e.stopPropagation()});this.targetNode.removeEventListener("mousedown",this.onMouseDown);document.removeEventListener("wheel",this.onMouseWheel);document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("keydown",this.onKeyDown);document.removeEventListener("keyup",this.onKeyUp);document.removeEventListener("click",this.onDocumentCaptureClick,true)}},{key:"onMouseDown",value:function e(t){t.stopPropagation();this.isMouseDown=0===t.button;this.dragOrigin={x:t.x,y:t.y};this.numMouseMoves=0;this.wasPlatformCtrlDownAtStart=Object(O["e"])(t);this.wasAltKeyDownAtStart=t.altKey;this.setCursor()}},{key:"onMouseMove",value:function e(t){this.isAltKeyDown=t.altKey;this.isPlatformCtrlDown=Object(O["e"])(t);this.setCursor();if(!this.isMouseDown)return;this.numMouseMoves+=1;if(this.wasPlatformCtrlDownAtStart){var r=Object(O["f"])(this.dragOrigin,{x:t.clientX,y:t.clientY});var a=Object(O["d"])(r,this.props.containerRect);this.setState(function(){return{dragBoxCSSPosition:a}})}else{if(!this.props.canZoomOut)return;this.props.handlePan({x:t.movementX,y:t.movementY})}t.stopPropagation();t.preventDefault()}},{key:"onMouseUp",value:function e(t){var r=this.isMouseDown;var a=this.wasAltKeyDownAtStart;var n=this.wasPlatformCtrlDownAtStart;var i=this.numMouseMoves>5;var s=!i||a;var o=!a&&i&&n;this.shouldCancelClickEvent=r;this.isMouseDown=false;this.isRightClick=false;if(!r)return;t.stopPropagation();t.preventDefault();if(o){var c=Object(O["f"])(this.dragOrigin,{x:t.clientX,y:t.clientY});this.props.handleBoxZoom(c);this.setState(function(){return{dragBoxCSSPosition:null}})}else if(s){var l={x:t.x,y:t.y};a?this.props.handleZoomOut(l):this.props.canZoomIn?this.props.handleZoomIn(l):this.props.handleReset()}this.setCursor()}},{key:"onDocumentCaptureClick",value:function e(t){this.shouldCancelClickEvent&&t.stopPropagation()}},{key:"onMouseWheel",value:function e(t){t.preventDefault();t.stopPropagation();var r={x:t.clientX,y:t.clientY};if(0===t.deltaMode){var a=.01;var n=.6;t.ctrlKey?this.props.handleZoomDelta(r,-t.deltaY*a):this.props.handlePan({x:-t.deltaX*n,y:-t.deltaY*n})}else{var i=.01;this.props.handleZoomDelta(r,-t.deltaY*i)}}},{key:"onKeyDown",value:function e(t){t.altKey&&(this.isAltKeyDown=true);Object(O["e"])(t)&&(this.isPlatformCtrlDown=true);this.setCursor()}},{key:"onKeyUp",value:function e(t){t.altKey||(this.isAltKeyDown=false);Object(O["e"])(t)||(this.isPlatformCtrlDown=false);this.setCursor()}},{key:"setCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.determineCursor();this.setState(function(){return{cursor:t}})}},{key:"determineCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(this.isPlatformCtrlDown)return"crosshair";if(t.canZoomOut&&this.isMouseDown&&this.numMouseMoves>5)return y.a.webkit?"-webkit-grabbing":"grabbing";if(t.canZoomOut&&this.isAltKeyDown||!t.canZoomIn)return"zoom-out";if(t.canZoomIn)return"zoom-in";return y.a.webkit?"-webkit-grab":"grab"}},{key:"render",value:function e(){var t=this;var r=m.a.Children.only(this.props.children);var a=m.a.cloneElement(r,{ref:function e(r){t.targetNode=r},style:n()({},r.props.style,{cursor:this.state.cursor})});return m.a.createElement(f["Fragment"],null,a,this.state.dragBoxCSSPosition&&m.a.createElement("div",{className:"p-zoom__box",style:n()({},this.state.dragBoxCSSPosition)}))}}]);return t}(f["PureComponent"]);S.displayName="ZoomMouseInteraction";t["a"]=S;S.defaultProps=E},22492:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(1058);var O=r(22277);var k=r(22278);var j=r(20235);var C=r.n(j);var E=1800;var S=new _["b"]("image_viewer");var w=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.08;if(t<r+a&&t>r-a)return r;return t};var I=function e(t){var r=t.width,a=t.height;return{width:r,height:a}};var T=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;var n=t.width/t.height;return Math.min(n*(r.height-a),r.width-a)/t.width};var N={image:h.a.any,onDidZoomLevelChange:h.a.func,featureModernImageViewer:h.a.bool.isRequired};var R={image:null,onDidZoomLevelChange:b["noop"]};var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={scale:0,translate:{x:0,y:0},shouldAnimate:true,isUserRecentlyActive:false};r.scaleSteps=[0,.5,1,1.5,2];r.minScale=r.scaleSteps[0];r.maxScale=r.scaleSteps[r.scaleSteps.length-1];r.throttledOnUserActivity=Object(b["throttle"])(r.onUserActivity.bind(r),200,{leading:true,trailing:true});r.handleSlider=r.handleSlider.bind(r);r.handleZoomIn=r.handleZoomIn.bind(r);r.handleZoomOut=r.handleZoomOut.bind(r);r.handleZoomDelta=r.handleZoomDelta.bind(r);r.handleZoomToActualPixels=r.handleZoomToActualPixels.bind(r);r.handleBoxZoom=r.handleBoxZoom.bind(r);r.handleReset=r.handleReset.bind(r);r.handlePan=r.handlePan.bind(r);r.debouncedViewportResize=Object(b["debounce"])(r.updateViewport.bind(r),200);r.handleUserInactivity=r.handleUserInactivity.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){this.updateViewport();window.addEventListener("resize",this.debouncedViewportResize)}},{key:"componentDidUpdate",value:function e(t,r){t.image.url!==this.props.image.url&&this.updateViewport();if(r.scale!==this.state.scale){this.props.onDidZoomLevelChange(this.normalizeScale());this.throttledOnUserActivity()}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.userActivityTimeout);this.throttledOnUserActivity.cancel();this.debouncedViewportResize.cancel();window.removeEventListener("resize",this.debouncedViewportResize)}},{key:"onUserActivity",value:function e(){clearTimeout(this.userActivityTimeout);this.userActivityTimeout=setTimeout(this.handleUserInactivity,E);this.state.isUserRecentlyActive||this.setState(function(){return{isUserRecentlyActive:true}})}},{key:"handleUserInactivity",value:function e(){if(this.mouseIsOverControl)return;this.setState(function(){return{isUserRecentlyActive:false}})}},{key:"updateViewport",value:function e(){var t=this;if(!this.containerElement)return;this.setState(function(e){var r=t.minScale;var a=t.containerElement.getBoundingClientRect();t.minScale=Math.min(1,T(I(t.props.image),a));if(e.scale===r)return{shouldAnimate:0!==r,scale:t.minScale,containerRect:a};return{containerRect:a}})}},{key:"handleZoomIn",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k["b"])(this.state.containerRect);this.setState(function(e){if(e.scale===t.maxScale)return e;var a=Object(k["i"])(n()({},t._buildScaleOptions(e),{newScale:Object(k["c"])({direction:1,value:e.scale,steps:t.scaleSteps}),point:r}));return n()({},a,{shouldAnimate:true})})}},{key:"handleZoomOut",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(k["b"])(this.state.containerRect);this.setState(function(e){if(e.scale===t.minScale)return e;var a=Object(k["i"])(n()({},t._buildScaleOptions(e),{newScale:Object(k["c"])({direction:-1,value:e.scale,steps:t.scaleSteps}),point:r}));return n()({},a,{shouldAnimate:true})})}},{key:"handleZoomDelta",value:function e(t,r){var a=this;this.setState(function(e){if(e.scale===a.minScale&&r<0||e.scale===a.maxScale&&r>0)return e;var i=Object(k["i"])(n()({},a._buildScaleOptions(e),{newScale:e.scale+r,point:t}));return n()({},i,{shouldAnimate:r>2})})}},{key:"handleReset",value:function e(){var t=this;this.setState(function(){return{shouldAnimate:true,scale:t.minScale,translate:{x:0,y:0}}})}},{key:"handleZoomToActualPixels",value:function e(){this.setState(function(){return{shouldAnimate:true,scale:1}})}},{key:"handlePan",value:function e(t){var r=this;var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState(function(e){return n()({shouldAnimate:a},Object(k["h"])({prevScale:e.scale,prevTranslate:e.translate,delta:t,minScale:r.minScale,targetRect:I(r.props.image)}))})}},{key:"handleBoxZoom",value:function e(t){var r=this;this.setState(function(e){return n()({shouldAnimate:true},Object(k["j"])({rect:t,prevScale:e.scale,prevTranslate:e.translate,maxScale:r.maxScale,minScale:r.minScale,targetRect:I(r.props.image),containerRect:e.containerRect}))})}},{key:"handleSlider",value:function e(t,r){var a=this;this.setState(function(e){var i=Object(k["a"])({value:t,min:a.minScale,max:a.maxScale});r||(i=w(i,1,.02));var s=Object(k["i"])(n()({},a._buildScaleOptions(e),{newScale:i}));if(s.scale===e.scale)return{};return n()({},s,{shouldAnimate:true})})}},{key:"normalizeScale",value:function e(){return Object(k["g"])({value:this.state.scale,min:this.minScale,max:this.maxScale})}},{key:"_buildScaleOptions",value:function e(t){return{point:Object(k["b"])(t.containerRect),prevTranslate:t.translate,prevScale:t.scale,maxScale:this.maxScale,minScale:this.minScale,targetRect:I(this.props.image),containerRect:t.containerRect}}},{key:"render",value:function e(){var t=this;var r=I(this.props.image);if(!this.props.featureModernImageViewer)return null;return m.a.createElement("div",{className:"p-image_viewer",ref:function e(r){t.containerElement=r}},m.a.createElement(O["b"],{handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleZoomDelta:this.handleZoomDelta,handlePan:this.handlePan,handleBoxZoom:this.handleBoxZoom,handleReset:this.handleReset,canZoomIn:this.state.scale!==this.maxScale,canZoomOut:this.state.scale!==this.minScale,containerRect:this.state.containerRect},m.a.createElement("img",{className:"p-image_viewer__image",src:this.props.image.url,width:r.width,height:r.height,onMouseMove:this.throttledOnUserActivity,onDragStart:function e(r){(Object(k["e"])(r)||t.state.scale!==t.minScale)&&r.preventDefault()},alt:"",style:{transition:this.state.shouldAnimate?"200ms transform ease":"",transform:"translate3d("+this.state.translate.x+"px, "+this.state.translate.y+"px, 0) scale("+this.state.scale+")"}})),m.a.createElement("div",{className:"p-image_viewer__zoom_positioner"},m.a.createElement(O["a"],{className:"p-image_viewer__zoom_control",isVisible:this.state.isUserRecentlyActive,handleZoomIn:this.handleZoomIn,handleZoomOut:this.handleZoomOut,handleSlider:this.handleSlider,handleReset:this.handleReset,handleZoomToActualPixels:this.handleZoomToActualPixels,handlePan:this.handlePan,level:this.normalizeScale(),onMouseEnter:function e(){t.mouseIsOverControl=true},onMouseLeave:function e(){t.mouseIsOverControl=false},displayLevel:S.t("{imageScale}%",{imageScale:Math.round(100*this.state.scale)})})))}}]);return t}(f["PureComponent"]);A.displayName="ImageViewerWithZoom";A.defaultProps=R;t["a"]=Object(y["a"])("feature_modern_image_viewer")(A)},22493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(22494);var i=r(21744);Object(a["a"])("interop.mountMessageActionsMenu",n["a"]);Object(a["a"])("interop.mountMessageActionsMenu.actionIds",i["a"])},22494:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22279);var l=r(332);function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["c"])(e)},n.a.createElement(l["a"],a,a.isOpen?n.a.createElement(c["a"],r):n.a.createElement("span",null))),t)}t["a"]=u},22495:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(22903);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(3);var y=r.n(_);var O=r(9);var k=r(1);var j=r.n(k);var C=r(22496);var E=r(266);var S=r(21823);var w=r(21713);var I=r(91);var T=r(21744);var N=r(22283);var R=r(22284);var A=r(12);var M=r(21731);var P=r(21702);var x=r(1007);var D=r(211);var F=r(21716);var L=r(113);var B=r(22285);var U=r(20243);var q=r.n(U);var H=3;var W={ts:y.a.string.isRequired,channelId:y.a.string.isRequired,messageContainerType:y.a.oneOf(Object(k["values"])(D["MESSAGE_CONTAINERS"])),onSelectAction:y.a.func,onMenuItemSelected:y.a.func,onLoad:y.a.func,slackActions:y.a.arrayOf(y.a.oneOfType([L["a"].MessageAction,y.a.node])).isRequired,canRunAppAction:y.a.bool,appActions:y.a.array,handleMessageAction:y.a.func.isRequired,featureAppActionsFe:y.a.bool};var G={messageContainerType:D["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:k["noop"],onMenuItemSelected:k["noop"],onLoad:k["noop"],canRunAppAction:false,appActions:[],runAppAction:k["noop"],featureAppActionsFe:false};var V=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={appActions:e.appActions};Object(k["bindAll"])(r,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return r}v()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();Object(I["b"])(w["h"].MSG_ACTION,{contexts:{ui_context:{action:w["m"].IMPRESSION,step:w["p"].MORE_ACTIONS_MENU,ui_element:w["o"].MORE_ACTIONS_MENU},platform:{app_actions_showing:Math.min(this.state.appActions.length,H)}}})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.handleMessageAction,e=a.onSelectAction;var o=e(t,r,{ts:n,channelId:i});o||s(t,r,{ts:n,channelId:i});Object(F["b"])(r);var c={ui_context:{action:w["m"].CLICK,step:w["p"].MORE_ACTIONS_MENU,ui_element:r.uiElement}};r.appId&&(c.platform={app_id:r.appId,action_id:r.id});Object(I["b"])(w["h"].MSG_ACTION,{contexts:c})}},{key:"renderAppActions",value:function e(){var t=this.props,r=t.onSelectAction,a=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,H).map(this.renderSingleAppAction);return[].concat(c()(s),[g.a.createElement(C["a"],{key:"browse_app_actions",ts:a,channelId:n,onSelectAction:r})])}},{key:"renderSingleAppAction",value:function e(t){var r=Object(R["a"])(t);return g.a.createElement(B["a"],{key:r.id,type:S["a"].compactItem,action:r,onSelected:this.onSelectAction})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,r){if(!t)return null;if(g.a.isValidElement(t))return g.a.cloneElement(t,{key:r});var a=Object(k["omit"])(t,["iconType","iconSet"]);return g.a.createElement(B["a"],{key:a.id,className:"p-message_actions_menu__"+a.id,action:a,onSelected:this.onSelectAction})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.messageContainerType,o=t.onLoad,c=t.onMenuItemSelected,l=t.onSelectAction,u=t.canRunAppAction,d=t.featureAppActionsFe,v=t.appActions,p=t.slackActions,h=t.handleMessageAction,f=s()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","featureAppActionsFe","appActions","slackActions","handleMessageAction"]);return g.a.createElement(E["e"],n()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:c,stripTerminalSeparators:true},f),this.renderSlackActions(),g.a.createElement(E["c"],null),u&&this.renderAppActions())}}]);return t}(b["PureComponent"]);V.displayName="MessageActionsMenu";V.defaultProps=G;var z=function e(t,r){var a=r.channelId,i=r.ts;var s=r.messageContainerType||D["MESSAGE_CONTAINERS"].MESSAGE_PANE;var o=Object(P["getMessageByTimestamp"])(t,a,i);var c=Object(A["isFeatureEnabled"])(t,"feature_app_actions_fe");var l=Object(A["isFeatureEnabled"])(t,"feature_file_threads");var u=c&&Object(x["canRunAppAction"])(o,l);var d=Object(M["selectMessageActions"])(t),v=d.actions;var p=Object(k["filter"])([N["l"](t,r),g.a.createElement(E["c"],null),Object(k["includes"])([D["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,D["MESSAGE_CONTAINERS"].THREADS_VIEW,D["MESSAGE_CONTAINERS"].SLI_BRIEFING],s)&&N["j"](t,r),N["c"](t,r),Object(k["includes"])([D["MESSAGE_CONTAINERS"].MESSAGE_PANE,D["MESSAGE_CONTAINERS"].UNREAD_VIEW],s)&&N["f"](t,n()({},r,{allUnreads:s===D["MESSAGE_CONTAINERS"].UNREAD_VIEW})),N["h"](t,r),N["g"](t,r),N["e"](t,r),N["i"](t,r),N["d"](t,r)]);return{slackActions:p,appActions:v,canRunAppAction:u,featureAppActionsFe:c}};var K=function e(t){return{onLoad:function e(){return t(Object(M["ensureFresh"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return T["b"].apply(void 0,a.concat([t]))}}};t["a"]=Object(O["connect"])(z,K)(V)},22496:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(3);var _=r.n(g);var y=r(21713);var O=r(91);var k=r(266);var j=r(22497);var C=r(12);var E=r(21731);var S=r(5);var w=new S["b"]("message");var I=3;var T="/apps/collection/actions?utm_source=messagemenu&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var N={ts:_.a.string.isRequired,channelId:_.a.string.isRequired,onSelectAction:_.a.func.isRequired,featureAppActionsFe:_.a.bool.isRequired,hasActions:_.a.bool.isRequired,hasOverflow:_.a.bool.isRequired,browseAppActions:_.a.func.isRequired};var R=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);r.state={hasActions:e.hasActions};return r}u()(t,[{key:"onSelected",value:function e(t){var r=this.props,a=r.ts,n=r.channelId,i=r.onSelectAction;this.props.hasOverflow?this.props.browseAppActions({ts:a,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(T,"_blank");Object(O["b"])(y["h"].MSG_ACTION,{contexts:{ui_context:{action:y["m"].CLICK,step:y["p"].MORE_ACTIONS_MENU,ui_element:y["o"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.ts,a=t.channelId,i=t.onSelectAction,o=t.featureAppActionsFe,c=t.hasActions,l=t.browseAppActions,u=s()(t,["ts","channelId","onSelectAction","featureAppActionsFe","hasActions","browseAppActions"]);if(this.props.featureAppActionsFe){var d=this.state.hasActions?w.t("More message actions\u2026"):w.rt("<span>New!</span> Add a message action\u2026",null,function(e){var t=e.key,r=e.text;return m.a.createElement("span",{className:"c-menu_item__glimmer",key:t},r)});return m.a.createElement(k["b"],n()({},u,{label:d,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:T}))}return null}}]);return t}(f["Component"]);R.displayName="BrowseAppActions";var A=function e(t){var r=Object(E["selectMessageActions"])(t),a=r.actions,n=r.loading;var i=a.length;return{featureAppActionsFe:Object(C["isFeatureEnabled"])(t,"feature_app_actions_fe"),hasActions:n||!!i,hasOverflow:n||i>I}};var M=function e(t){return{browseAppActions:function e(){return t(j["a"].apply(void 0,arguments))}}};t["a"]=Object(k["g"])(Object(b["connect"])(A,M)(R))},22497:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(22498);var l=r(21705);var u=Object(o["b"])("Open app actions dialog",function(e,t,r){var a=n.a.createElement(c["a"],r);e(Object(l["openModal"])({element:a}))});u.propTypes={channelId:s.a.string.isRequired,ts:s.a.string.isRequired,onSelectAction:s.a.func.isRequired};t["a"]=u},22498:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(9);var k=r(21713);var j=r(91);var C=r(5);var E=r(22173);var S=r(21716);var w=r(21731);var I=r(12);var T=r(21744);var N=r(271);var R=r(69);var A=r(1192);var M=r(22283);var P=r(22284);var x=r(21705);var D=r(113);var F=r(22524);var L=r(22525);var B=r(20242);var U=r.n(B);var q=w["selectMessageActions"];var H=new C["b"]("app_actions");var W=64;var G="/apps/collection/actions?utm_source=overflow&utm_medium=inprod&utm_content=overflow-more actions&utm_campaign=inprod";var V={channelId:g.a.string.isRequired,onClose:g.a.func,ts:g.a.string.isRequired,onSelectAction:g.a.func,slackActions:g.a.arrayOf(D["a"].MessageAction).isRequired,appActions:g.a.arrayOf(D["a"].AppAction),isLoading:g.a.bool.isRequired,onLoad:g.a.func.isRequired,handleMessageAction:g.a.func.isRequired,closeModal:g.a.func.isRequired,featureAppActionsFe:g.a.bool.isRequired};var z={appActions:[],onClose:f["noop"],onSelectAction:f["noop"]};var K=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={filterQuery:"",normalizedFilterQuery:""};Object(f["bindAll"])(r,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return r}u()(t,[{key:"componentDidMount",value:function e(){Object(j["b"])(k["h"].MSG_ACTION,{contexts:{ui_context:{action:k["m"].IMPRESSION,step:k["p"].MESSAGE_ACTION_DIALOG,ui_element:k["o"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.props.appActions.length}}});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.channelId,a=t.ts,n=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==s)return true;if(this.props.isLoading&&!n)return true;if(this.props.channelId!==r)return true;if(this.props.ts!==a)return true;return false}},{key:"onFooterLinkClick",value:function e(){Object(j["b"])(k["h"].MSG_ACTION,{contexts:{ui_context:{action:k["m"].CLICK,step:k["p"].MESSAGE_ACTION_DIALOG,ui_element:k["o"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.props.appActions.length}}})}},{key:"onSelectAction",value:function e(t,r){var a=this.props,n=a.ts,i=a.channelId,s=a.closeModal,o=a.handleMessageAction,e=a.onSelectAction;s();this.props.onClose&&this.props.onClose(t);var c=e(t,r,{ts:n,channelId:i});c||o(t,r,{ts:n,channelId:i});Object(S["b"])(r,this.state.normalizedFilterQuery);var l={ui_context:{action:k["m"].CLICK,step:k["p"].MESSAGE_ACTION_DIALOG,ui_element:r.uiElement}};r.appId&&(l.platform={app_id:r.appId,action_id:r.id});Object(j["b"])(k["h"].MSG_ACTION,{contexts:l})}},{key:"onFilterUpdate",value:function e(t){var r=Object(E["a"])(t);this.setState(function(){return{filterQuery:t,normalizedFilterQuery:r}})}},{key:"getActions",value:function e(){var t=[].concat(s()(Object(f["map"])(this.props.slackActions,this.formatSlackAction)),s()(Object(f["map"])(this.props.appActions,P["a"])));t=Object(f["filter"])(t,this.filterAction);t=Object(S["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,r,a){this.onSelectAction(a,r.props.action)}},{key:"filterAction",value:function e(t){return Object(P["b"])(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){var r=this.props.featureAppActionsFe;return n()({},t,{danger:false,description:r?H.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd"}):""})}},{key:"renderTitle",value:function e(t){return y.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},y.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,r=t.channelId,a=t.ts;return y.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},y.a.createElement(L["a"],{channelId:r,ts:a}))}},{key:"renderLoading",value:function e(){return y.a.createElement("div",{className:"p-app_actions_dialog__loader"},y.a.createElement(R["a"],null))}},{key:"renderSingleAction",value:function e(t){var r=y.a.createElement(F["a"],{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:r,value:t.id}}},{key:"renderSelect",value:function e(){var t=this.props.featureAppActionsFe;var r=t?H.t("Search message actions\u2026"):"";return y.a.createElement(A["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:r,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(f["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:W})}},{key:"render",value:function e(){var t=this.props,r=t.isLoading,a=t.featureAppActionsFe;var n=a?H.t("Get more message actions"):"";var i=a?H.t("Use an action"):"";return y.a.createElement(N["a"],{contentLabel:i,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:G,onFooterLinkClick:this.onFooterLinkClick,footerText:n,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(i),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),r?this.renderLoading():this.renderSelect())}}]);return t}(_["Component"]);K.displayName="AppActionsDialog";K.defaultProps=z;function Q(e,t){var r=q(e),a=r.loading,n=r.actions;var i=Object(f["filter"])([M["a"](e,t),M["b"](e,t),M["c"](e,t),M["d"](e,t),M["e"](e,t),M["f"](e,t),M["g"](e,t),M["i"](e,t),M["j"](e,t),M["k"](e,t),M["l"](e,t)]);var s=!!(a||Object(f["find"])(i,"isLoading"));return{slackActions:i,appActions:n,isLoading:s,featureAppActionsFe:Object(I["isFeatureEnabled"])(e,"feature_app_actions_fe")}}var Y=function e(t){return{closeModal:function e(){return t(Object(x["closeModal"])())},onLoad:function e(){return t(Object(w["ensureFresh"])())},handleMessageAction:function e(){for(var r=arguments.length,a=Array(r),n=0;n<r;n++)a[n]=arguments[n];return T["b"].apply(void 0,a.concat([t]))}}};var J={};Object.defineProperty(J,"selectMessageActions",{get:function e(){return q},set:function e(t){q=t}});t["a"]=Object(O["connect"])(Q,Y)(K)},22499:function(e,t,r){"use strict";var a=r(298);var n=r(21706);var i=r(21702);var s=r(1559);var o=function e(t,r,o){var c=r.channelId,l=r.ts;return o(function(e,r){var o=r();var u=Object(i["getMessageByTimestamp"])(o,c,l);var d=Object(n["getFileFromMsg"])(o,u);var v=Object(s["b"])(u,d);return Object(a["a"])({e:t,rxn_key:v})})};t["a"]=o},22500:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(21712);var o=r(12);var c=r(21702);var l=r(1007);var u=Object(i["b"])("Comment on a message or file",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var u=Object(c["getMessageByTimestamp"])(i,a,n);var d=Object(o["isFeatureEnabled"])(i,"feature_file_threads");var v=Object(l["getFileIdFromMessage"])(u,d);if(v&&!d)e(Object(s["b"])({fileId:v}));else{var p=u.thread_ts||n;e(Object(s["d"])({channelId:a,threadTs:p}))}});u.propTypes={channelId:n.a.string.isRequired,ts:n.a.string.isRequired};t["a"]=u},22501:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(93);var o=r(21706);var c=r(21702);var l=r(1007);var u=r(334);var d=Object(i["b"])("Copy link to message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var d=Object(c["getMessageByTimestamp"])(i,a,n);var v=Object(o["getFileFromMsg"])(i,d);var p=v&&!Object(l["isFileComment"])(d)?v.permalink:Object(s["b"])(a,n,d.thread_ts);Object(u["writeText"])(p)});d.propTypes={channelId:n.a.string.isRequired,ts:n.a.string.isRequired};t["a"]=d},22502:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(22175);var l=r(21705);var u=Object(o["b"])("Delete message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,i=r.ts;var s=n.a.createElement(c["a"],{channelId:a,ts:i});Promise.resolve().then(function(){return e(Object(l["openModal"])({element:s}))})});u.propTypes={channelId:s.a.string.isRequired,ts:s.a.string.isRequired};t["a"]=u},22503:function(e,t,r){"use strict";t["a"]=s;var a=r(21778);var n=r(487);var i=r(21702);function s(e,t){return function(r,s){var o=Object(i["getMessageByTimestamp"])(s(),e,t);if(!o)return;r(Object(a["a"])({channelId:e,ts:t}));r(Object(n["a"])(o,t))}}},22504:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(77);var s=function e(t){return t.every(function(e){return"link"===e.type||Object(i["b"])(e)})};t["a"]=function(e){var t=e.content,r=void 0===t?[]:t,n=e.urls,o=void 0===n?[]:n;var c=r.slice();var l=Object(a["findIndex"])(c,"type","link");var u=Math.max(0,l);for(var d=u;d<c.length;d++){var v=c[d];var p=r.slice(d+1);if("link"===v.type){var h=Object(a["includes"])(o,Object(a["unescape"])(v.url));if(h){var f=s(p);if(!f)break;var m=Object(a["takeWhile"])(p,i["b"]);c.splice(d,m.length+1);d-=1}}}c=Object(a["dropRightWhile"])(c,i["b"]);var b=Object(a["last"])(c);b&&b.text&&(b.text=Object(a["trimEnd"])(b.text));return c}},22506:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.sidebar_themes.setLastThemeSelectedInUI",function(){return null})},22507:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(22190);var l=r(21705);var u=Object(o["b"])("Remove message broadcast",function(e,t,r){var a=n.a.createElement(c["a"],r);Promise.resolve().then(function(){return e(Object(l["openModal"])({element:a}))})});u.propTypes={channelId:s.a.string.isRequired,ts:s.a.string.isRequired};t["a"]=u},22508:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(3087);var o=r(1546);var c=r(12);var l=r(21711);var u=r(21702);var d=r(1007);var v=Object(i["b"])("Copy link to message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.ts;var i=t();var v=Object(l["e"])(i,a);var p=Object(u["getMessageByTimestamp"])(i,a,n);var h=Object(c["isFeatureEnabled"])(i,"feature_file_threads");var f=Object(d["getFileIdFromMessage"])(p,h);f&&Object(d["isFileComment"])(p)?Object(s["a"])(f,false,false,v,true):Object(o["a"])(n,v)});v.propTypes={channelId:n.a.string.isRequired,ts:n.a.string.isRequired};t["a"]=v},22509:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(12);var l=r(21702);var u=r(1007);var d=r(21716);var v=r(5);var p=new v["b"]("message");var h={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var f=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(l["getMessageByTimestamp"])(e,a,r);if(!n)return null;var o=Object(c["isFeatureEnabled"])(e,"feature_file_threads");if(!Object(u["canAddReaction"])(n,o))return null;return{id:s["a"].addReaction,name:p.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(d["f"])("add_reaction"),uiElement:i["o"].ADD_REACTION_BUTTON}});f.propTypes=h;t["a"]=f},22510:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(12);var l=r(21706);var u=r(21702);var d=r(1007);var v=r(5);var p=r(21716);var h=new v["b"]("message");var f={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var m=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(u["getMessageByTimestamp"])(e,a,r);if(!n)return null;var o=Object(c["isFeatureEnabled"])(e,"feature_file_threads");var v=o?null:n.file;if(Object(l["isFileAuthorExternal"])(e,v))return null;if(!Object(d["canReplyOrComment"])(n,o))return null;var f=h.t("Start a thread");var m=i["o"].START_A_THREAD_BUTTON;if(v&&!o)f=h.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"});else if(Object(d["isThreadBroadcast"])(n)||Object(d["getReplyCount"])(n)){f=h.t("Reply to thread");m=i["o"].REPLY_TO_THREAD_BUTTON}return{id:s["a"].comment,name:f,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(p["f"])("thread_reply"),uiElement:m}});m.propTypes=f;t["a"]=m},22511:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(12);var l=r(21711);var u=r(21702);var d=r(1007);var v=r(5);var p=r(21716);var h=new v["b"]("message");var f={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var m=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(u["getMessageByTimestamp"])(e,a,r);if(!n)return null;var o=Object(l["e"])(e,a);var v=Object(c["isFeatureEnabled"])(e,"feature_file_threads");if(!Object(d["canCopyLink"])(n,o,v))return null;return{id:s["a"].copyLink,name:h.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(p["f"])("copy_link"),uiElement:i["o"].COPY_LINK_BUTTON}});m.propTypes=f;t["a"]=m},22512:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(21711);var l=r(21702);var u=r(1007);var d=r(21716);var v=r(5);var p=new v["b"]("message");var h={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var f=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType;var o=Object(l["getMessageByTimestamp"])(e,a,r);if(!o)return null;var v=Object(c["e"])(e,a);if(!Object(u["canDeleteMessage"])(o,v,n))return null;return{id:s["a"].deleteMessage,name:p.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(d["f"])("delete"),uiElement:i["o"].DELETE_MESSAGE_BUTTON}});f.propTypes=h;t["a"]=f},22513:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(21711);var l=r(21702);var u=r(54);var d=r(12);var v=r(1007);var p=r(21716);var h=r(5);var f=new h["b"]("message");var m={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var b=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(l["getMessageByTimestamp"])(e,a,r);if(!n)return null;var o=Object(c["e"])(e,a);var h=Object(d["getCurrentUserId"])(e);var m=Object(u["getTeamPref"])(e,"msg_edit_window_mins");if(!Object(v["canEditMessage"])(h,n,o,m))return null;return{id:s["a"].editMessage,name:f.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(p["f"])("edit"),uiElement:i["o"].EDIT_MESSAGE_BUTTON}});b.propTypes=m;t["a"]=b},22514:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(21697);var l=r(21702);var u=r(1007);var d=r(21716);var v=r(5);var p=new v["b"]("message");var h=new v["b"]("messages_action_items");var f={ts:n.a.string.isRequired,channelId:n.a.string.isRequired,allUnreads:n.a.string.isRequired};var m=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.allUnreads;var o=Object(l["getMessageByTimestamp"])(e,a,r);if(!o)return null;var v=Object(c["getChannelById"])(e,a);if(!Object(u["canMarkUnread"])(o,v))return null;return{id:s["a"].markUnread,name:n?h.t("Mark above as read"):p.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(d["f"])("mark_unread"),uiElement:i["o"].MARK_UNREAD_BUTTON}});m.propTypes=f;t["a"]=m},22515:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(906);var l=r(21697);var u=r(21702);var d=r(907);var v=r(1007);var p=r(998);var h=r(21716);var f={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var m=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(u["getMessageByTimestamp"])(e,a,r);if(!n)return null;var o=Object(l["getChannelById"])(e,a);if(!Object(v["canPin"])(n,o))return null;var f=Object(c["b"])(n,o);var m=Object(d["getDisplayName"])(o);var b=Object(d["getChannelType"])(o);var g=f?i["o"].PIN_TO_THIS_CONVERSATION_BUTTON:i["o"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;return{id:s["a"].pin,name:Object(p["a"])(f,m,b),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(h["f"])(f?"unpin":"pin"),uiElement:g}});m.propTypes=f;t["a"]=m},22516:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(3);var _=r.n(g);var y=r(266);var O=r(899);var k=r(21713);var j=r(91);var C=r(22517);var E=r(21697);var S=r(12);var w=r(21702);var I=r(21696);var T=r(1007);var N=r(5);var R=r(21716);var A=new N["b"]("message");var M={ts:_.a.string.isRequired,channelId:_.a.string.isRequired,time:_.a.string.isRequired,remind:_.a.func.isRequired};var P=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onSelected=r.onSelected.bind(r);return r}u()(t,[{key:"onSelected",value:function e(){var t=this.props,r=t.remind,a=t.ts,n=t.channelId,i=t.time;r({ts:a,channelId:n,time:i});Object(j["b"])(k["h"].MSG_ACTION,{contexts:{ui_context:{action:k["m"].CLICK,step:k["p"].MORE_ACTIONS_MENU,ui_element:k["o"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,r=t.remind,a=t.ts,i=t.channelId,o=t.time,c=s()(t,["remind","ts","channelId","time"]);return m.a.createElement(y["b"],n()({},c,{onSelected:this.onSelected}))}}]);return t}(f["PureComponent"]);P.displayName="RemindMenuItem";var x={remind:C["a"]};var D=Object(b["connect"])(null,x)(P);var F=Object(y["g"])(D);var L={ts:_.a.string.isRequired,channelId:_.a.string.isRequired,renderLegacySubmenu:_.a.bool};var B={renderLegacySubmenu:true};var U=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderSubmenu=r.renderSubmenu.bind(r);return r}u()(t,[{key:"renderSubmenu",value:function e(t){var r=this.props,a=r.channelId,i=r.ts;var s={channelId:a,ts:i};return m.a.createElement(y["e"],n()({},t,{width:"auto"}),m.a.createElement(F,n()({},s,{label:A.t("in 20 minutes"),time:"in 20 minutes"})),m.a.createElement(F,n()({},s,{label:A.t("in 1 hour"),time:"in 1 hour"})),m.a.createElement(F,n()({},s,{label:A.t("in 3 hours"),time:"in 3 hours"})),m.a.createElement(F,n()({},s,{label:A.t("Tomorrow"),time:"Tomorrow"})),m.a.createElement(F,n()({},s,{label:A.t("Next Week"),time:"Next Week"})))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.ts,i=s()(t,["channelId","ts"]);return m.a.createElement(O["a"],n()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(f["PureComponent"]);U.displayName="Remind";U.defaultProps=B;var q=Object(O["c"])(U);var H=Object(I["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(w["getMessageByTimestamp"])(e,a,r);if(!n)return null;var i=Object(E["getChannelById"])(e,a);var s=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var o=Object(S["isFeatureEnabled"])(e,"feature_app_actions_fe");if(!Object(T["canAddReminder"])(n,i,s))return null;return m.a.createElement(q,{key:"remind_submenu",label:A.t("Remind me about this"),"data-qa":"remind_me",renderLegacySubmenu:o,frecencyId:Object(R["f"])("remind"),ts:r,channelId:a})});t["a"]=H},22517:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21699);var s=r(1543);var o=r(21702);var c=r(1007);var l=Object(i["b"])("Add a reminder for a message",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.time,n=r.channelId,i=r.ts;var l=Object(o["getMessageByTimestamp"])(t(),n,i);return Object(s["a"])({time:a,message_channel:n,message_ts:i,respond_in_channel:Object(c["reminderShouldRespondInChannel"])(l)})});l.propTypes={channelId:n.a.string.isRequired,ts:n.a.string.isRequired,time:n.a.string.isRequired};t["a"]=l},22518:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(21711);var l=r(21702);var u=r(907);var d=r(1007);var v=r(21716);var p=r(5);var h=new p["b"]("message");var f={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var m=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId,n=t.messageContainerType;var o=Object(l["getMessageByTimestamp"])(e,a,r);if(!o)return null;var p=Object(c["e"])(e,a);if(!Object(d["canRemoveBroadcast"])(o,p,n))return null;var f=Object(u["isPublicChannel"])(p)||Object(u["isPrivateChannel"])(p)?h.t("Remove from channel"):h.t("Remove from conversation");return{id:s["a"].removeBroadcast,name:f,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(v["f"])("remove"),uiElement:i["o"].REMOVE_FROM_CONVERSATION_BUTTON}});m.propTypes=f;t["a"]=m},22519:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(12);var l=r(21702);var u=r(1007);var d=r(21716);var v=r(5);var p=new v["b"]("message");var h={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var f=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(c["isFeatureEnabled"])(e,"feature_file_threads");var o=Object(l["getMessageByTimestamp"])(e,a,r);if(!o)return null;if(!Object(u["canBeShared"])(o,n))return null;var v=Object(u["isShareableFileMsg"])(o)?p.t("Share file \u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):p.t("Share message \u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:s["a"].shareMessage,name:v,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(d["f"])("share"),uiElement:i["o"].SHARE_MESSAGE_BUTTON}});f.propTypes=h;t["a"]=f},22520:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(1);var l=r.n(c);var u=r(12);var d=r(21706);var v=r(21702);var p=r(1007);var h=r(21716);var f=r(5);var m=new f["b"]("message");var b={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};var g=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(v["getMessageByTimestamp"])(e,a,r);if(!n)return null;if(!Object(p["canStar"])(n))return null;var o=Object(u["isFeatureEnabled"])(e,"feature_file_threads");var l=Object(p["getFileIdFromMessage"])(n,o);var f=Object(p["isStarred"])(n);var b=f?m.t("Unstar message"):m.t("Star message");if(Object(p["isFileComment"])(n)){var g=l||Object(c["first"])(n.files);var _=n.comment&&Object(d["getFileCommentById"])(e,g,n.comment.id);_&&(b=f?m.t("Unstar file comment"):m.t("Star file comment"))}else if(l){f=Object(p["isStarred"])(n,Object(d["getFileById"])(e,l),null);b=f?m.t("Unstar file"):m.t("Star file")}var y=f?i["o"].UNSTAR_MESSAGE_BUTTON:i["o"].STAR_MESSAGE_BUTTON;return{id:s["a"].star,name:b,iconType:f?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(h["f"])(f?"unstar":"star"),uiElement:y}});g.propTypes=b;t["a"]=g},22521:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21713);var s=r(21744);var o=r(21696);var c=r(21806);var l=r(54);var u=r(1003);var d=r(12);var v=r(21697);var p=r(21702);var h=r(1007);var f=r(21716);var m=r(5);var b=new m["b"]("message");var g=Object(o["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ts,a=t.channelId;var n=Object(p["getMessageByTimestamp"])(e,a,r);var o=Object(v["getChannelById"])(e,a);if(!Object(u["a"])(o,n))return null;var m=Object(c["getIsSubscribed"])(e,{ts:r,channelId:a});var g=Object(l["getUserPref"])(e,"threads_everything");var _=Object(h["getReplyCount"])(n);var y=b.t("Follow message");var O=b.t("You\u2019ll be notified about any replies");var k=i["o"].FOLLOW_MESSAGE_BUTTON;var j=Object(d["isFeatureEnabled"])(e,"feature_threads_copy_change");var C=void 0;var E=Object(c["getIsSubscriptionLoading"])(e,{ts:r,channelId:a});if(E){y=b.t("Loading \u2026");O=""}else if(m){if(_){y=b.t("Unfollow thread");C=j?b.t("This will be removed from Threads"):b.t("This will be removed from All Threads");O=g?b.t("You won\u2019t be notified about new replies"):C}else{y=b.t("Unfollow message");C=j?b.t("Replies will be excluded from Threads"):b.t("Replies will be excluded from All Threads");O=g?b.t("You won\u2019t be notified about replies"):C}k=i["o"].UNFOLLOW_MESSAGE_BUTTON}else if(_){y=b.t("Follow thread");C=j?b.t("New replies will appear in Threads"):b.t("New replies will appear in All Threads");O=g?b.t("You\u2019ll be notified about new replies"):C}else{y=b.t("Follow message");C=j?b.t("Any replies will show up in Threads"):b.t("Any replies will show up in All Threads");O=g?b.t("You\u2019ll be notified about any replies"):C}return{id:s["a"].subscribe,name:y,description:O,isLoading:E,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(f["f"])(m?"thread_unfollow":"thread_follow"),uiElement:k}});g.propTypes={ts:n.a.string.isRequired,channelId:n.a.string.isRequired};t["a"]=g},22522:function(e,t,r){"use strict";t["a"]=o;var a=r(189);var n=r.n(a);var i=r(21713);var s=r(21716);function o(e){return n()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons,uiElement:i["o"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(s["e"])(e))}},22523:function(e,t,r){"use strict";t["a"]=s;var a=r(1);var n=r.n(a);var i=r(22173);function s(e,t){if(!e)return false;var r=Object(i["a"])(e.name);if(!r)return false;var n=Object(i["a"])(e.description);var s=t.split(/\s+/);return Object(a["every"])(s,function(e){return Object(a["includes"])(r,e)||Object(a["includes"])(n,e)})}},22524:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(37);var k=r(1086);var j=r(113);var C=56;var E={action:j["a"].MessageAction.isRequired,className:g.a.string,pillarClassName:g.a.string};var S={className:"",pillarClassName:""};var w=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(r,["renderEnter","renderIcon","renderIconMaybe"]);return r}c()(t,[{key:"renderIcon",value:function e(){var t=this.props.action;if(t.iconSet){var r=C;var a=Object(k["a"])({icons:t.iconSet},r);return h.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:a})}if(t.iconType)return h.a.createElement(O["b"],{type:t.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return h.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,r=t.className,a=t.pillarClassName;var i=m()(r,"c-menu_item__enter",n()({},a+"__enter",a));return h.a.createElement(O["a"],{type:"enter",className:i,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var r=this.props,a=r.action,i=r.className,s=r.pillarClassName;var o=m()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":a.danger},n()(t,""+s,s),n()(t,s+"--danger",a.danger&&s),t));return h.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},h.a.createElement("div",{className:o,"data-qa":a["data-qa"],key:a.id,id:a.id},this.renderIconMaybe(this.renderIcon()),h.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},a.label||a.name,h.a.createElement("div",{className:"c-menu_item__description"},a.description)),this.renderEnter()))}}]);return t}(p["PureComponent"]);w.displayName="AppActionsDialogItem";w.defaultProps=S;t["a"]=w},22525:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(50);var m=r.n(f);var b=r(9);var g=r(3);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(21697);var j=r(21702);var C=r(54);var E=r(907);var S=r(1007);var w=r(1560);var I=r(384);var T=r(77);var N=r(265);var R=r(1066);var A=r(1465);var M=r(1490);var P=r(20241);var x=r.n(P);var D={ts:_.a.string.isRequired,channelId:_.a.string.isRequired,channel:_.a.object.isRequired,theme:_.a.string,hasAdHocSender:_.a.bool,userId:_.a.string,username:_.a.string,botId:_.a.string,text:_.a.string.isRequired,attachments:_.a.arrayOf(_.a.object)};var F={className:null,theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,fileIds:[],attachments:[],unfurlLinkCache:null};var L=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={gradient:false};r.renderAttachment=r.renderAttachment.bind(r);return r}c()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(f["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderText",value:function e(){var t=this.props.text;return h.a.createElement(T["a"],{text:t})}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.userId,a=t.hasAdHocSender,n=t.botId;return h.a.createElement(N["b"],{className:"p-app_actions_pillow__avatar",userId:r,isAdHocMember:a,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return h.a.createElement(R["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,r){var a=this.props,i=a.ts,s=a.channelId;return h.a.createElement(A["a"],n()({key:r},Object(I["b"])(t),{messageTs:i,activeChannelId:s,showDelete:false}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return h.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return h.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return h.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.channel;return h.a.createElement("div",{className:"p-app_actions_pillow__content_header"},h.a.createElement(M["a"],{userId:r,botId:a,username:n,channelName:Object(E["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var r=O()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return h.a.createElement("div",{className:r,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),h.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),h.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderText(),this.renderAttachments(),h.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(p["PureComponent"]);L.displayName="AppActionsPillow";L.defaultProps=F;var B=function e(t,r){var a=r.ts,n=r.channelId;var i=Object(j["getMessageByTimestamp"])(t,n,a);var s=Object(k["getChannelById"])(t,n);var o=Object(S["getMessageMemberId"])(i);var c=Object(S["getMsgSenderEntity"])(t,i),l=c.botId,u=c.username;return{channel:s,userId:o,username:u,botId:l,theme:Object(C["getUserMessagesTheme"])(t),hasAdHocSender:Object(w["a"])(i),text:i.text,attachments:i.attachments}};t["a"]=Object(b["connect"])(B)(L)},22526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22527);var n=r(42);Object(n["a"])("interop.mountMessagePaneBanner",a["a"]);Object(n["a"])("interop.unmountMessagePaneBanner",a["b"])},22527:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(22286);var d=function e(t,r){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(t)},n.a.createElement(u["a"],null)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)}},22528:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.generic_notification_banner.banner_to_show_sig.dispatch")},22529:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(5);var b=r(91);var g=r(12);var _=r(21808);var y=r(54);var O=r(3208);var k=r(3044);var j=r(283);var C=r(21809);var E=new m["b"]("send_btn");var S={closeBanner:h.a.func.isRequired,hasSendButton:h.a.bool.isRequired,sendButtonAutoSet:h.a.bool.isRequired,featureModernizeBanners:h.a.bool.isRequired};var w={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var I=258;var T="I18N_BANNER";var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onPrefLinkClick=r.onPrefLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(b["b"])(T,{contexts:{ui_context:{step:I,action:"impression"}}})}},{key:"componentWillUpdate",value:function e(t){var r=this.props,a=r.hasSendButton,n=r.sendButtonAutoSet;n===t.sendButtonAutoSet&&a===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){Object(b["b"])(T,{contexts:{ui_context:{step:I,action:"click",ui_element:"prefs_button"}}});Object(O["a"])("advanced","#msg_input_send_btn_label");this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;if(!this.props.featureModernizeBanners)return null;return v.a.createElement("div",null,E.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return v.a.createElement("div",{className:"inline_block"},v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(k["isMac"])()?"\u2318":"Ctrl"),v.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),v.a.createElement("br",null),E.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var r=e.text;return v.a.createElement(j["a"],{onClick:t.onPrefLinkClick},r)}))}},{key:"render",value:function e(){var t=E.t("Just for Japan: a button for sending");var r=E.t("Got It");var a="p-message_pane_banner__body--taller-line-height";return v.a.createElement(C["a"],{headerText:t,bodyText:this.renderBodyText(),bodyClass:a,goButtonText:r,showCancelButton:false,showCloseIcon:true,bannerPrefs:w})}}]);return t}(d["PureComponent"]);N.displayName="I18nJapanBetaSendBtnBanner";var R=function e(t){return{hasSendButton:Object(y["getUserPref"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(y["getUserPref"])(t,"msg_input_send_btn_auto_set"),featureModernizeBanners:Object(g["isFeatureEnabled"])(t,"feature_modernize_banners")}};var A={closeBanner:_["closeBanner"]};t["a"]=Object(f["connect"])(R,A)(N)},22530:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(1);var b=r.n(m);var g=r(22287);var _=new f["b"]("trial_expiration_banners");var y={numDaysLeft:h.a.number.isRequired,expirationDate:h.a.string.isRequired};var O={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var k=168;var j="/admin/billing";var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;var a=Object(f["e"])(t,{noEscape:true,react:true});return _.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:r,shared_team_name:a})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return _.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=_.t("Upgrade Now");return v.a.createElement(g["a"],{bannerPrefs:O,clogStep:k,onGoUrl:j,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);C.displayName="TwoWeeksLeftEscTrialBanner";t["a"]=C},22531:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(1);var b=r.n(m);var g=r(1058);var _=r(22287);var y=new f["b"]("trial_expiration_banners");var O={numDaysLeft:h.a.number.isRequired,expirationDate:h.a.string.isRequired,featureModernizeBanners:h.a.bool.isRequired};var k={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var j=167;var C="/admin/billing";var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["renderBodyText","renderHeaderText"]);return r}s()(t,[{key:"renderBodyText",value:function e(t){var r=this.props.expirationDate;if(!this.props.featureModernizeBanners)return null;var a=Object(f["l"])(Object(f["e"])(t,{noEscape:true,react:true}));return y.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before {expiration_date}.",{expiration_date:r,shared_team_name:a},function(e){var t=e.text;return v.a.createElement("strong",{className:"sk_warning_red"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return y.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=y.t("Upgrade Now");return v.a.createElement(_["a"],{bannerPrefs:k,clogStep:j,onGoUrl:C,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);E.displayName="OneWeekLeftEscTrialBanner";t["a"]=Object(g["a"])("feature_modernize_banners")(E)},22532:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(1);var b=r.n(m);var g=r(1058);var _=r(2215);var y=r(91);var O=r(21809);var k=new f["b"]("free_trial_banners");var j={numMsgs:h.a.string};var C={numMsgs:""};var E={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var S=205;var w="UPGRDEXP_FREE_TRIAL_IN_PROD";var I="/trial";var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.experimentGroup=Object(_["a"])("free_trial_in_prod");Object(m["bindAll"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(y["b"])(w,{contexts:{ui_context:{step:S,action:"impression"}}})}},{key:"onGo",value:function e(){Object(y["b"])(w,{contexts:{ui_context:{step:S,action:"click",ui_element:"learn_more_btn"}}});window.open(I,"_blank")}},{key:"onCloseIcon",value:function e(){Object(y["b"])(w,{contexts:{ui_context:{step:S,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.numMsgs;switch(this.experimentGroup){case"banner":return{headerText:k.t("Try Standard for 30 days. It\u2019s on us."),bodyText:k.rt("On a <b>Standard plan</b>, you\u2019ll be able to view all of your {num_of_msgs} messages instead of just the last 10k. That means you\u2019ll always have access to things like project details, important docs, and key decisions made along the way.",{num_of_msgs:t})};case"banner_and_email":return{headerText:k.t("Start your free trial of the Standard plan"),bodyText:k.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")};default:return{}}}},{key:"render",value:function e(){var t=this.getContent();if(Object(m["isEmpty"])(t))return null;return v.a.createElement(O["a"],{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f381.png",emojiAlt:k.t("present emoji"),headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:E})}}]);return t}(d["PureComponent"]);T.displayName="InProdTrialMessagePaneBanner";T.defaultProps=C;t["a"]=Object(g["a"])("feature_modernize_banners")(T)},22533:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(1);var b=r.n(m);var g=r(1058);var _=r(91);var y=r(21809);var O=new f["b"]("free_trial_banners");var k={expirationDate:h.a.string.isRequired};var j={expirationDate:""};var C={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var E=207;var S="UPGRDEXP_FREE_TRIAL_IN_PROD";var w="/trial";var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["onGo","onCloseIcon"]);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(_["b"])(S,{contexts:{ui_context:{step:E,action:"impression"}}})}},{key:"onGo",value:function e(){Object(_["b"])(S,{contexts:{ui_context:{step:E,action:"click",ui_element:"learn_more_btn"}}});window.open(w,"_blank")}},{key:"onCloseIcon",value:function e(){Object(_["b"])(S,{contexts:{ui_context:{step:E,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:O.t("Your free trial offer is about to expire"),bodyText:O.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return v.a.createElement(y["a"],{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f388.png",emojiAlt:O.t("balloon emoji"),headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:C})}}]);return t}(d["PureComponent"]);I.displayName="InProdTrialReminderBanner";I.defaultProps=j;t["a"]=Object(g["a"])("feature_modernize_banners")(I)},22534:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(5);var _=r(91);var y=r(3271);var O=r(21808);var k=r(21712);var j=r(12);var C=r(2215);var E=r(21809);var S=new g["b"]("notification_banner");var w={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var I=200;var T="UPGRDEXP_ENFORCE_FILE_LIMITS";var N="/pricing?ui_element=11&ui_step="+I;var R={teamName:h.a.string.isRequired,userId:h.a.string.isRequired,featureModernizeBanners:h.a.bool.isRequired,closeBanner:h.a.func.isRequired,showFileList:h.a.func.isRequired};var A=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.experimentGroup=Object(C["a"])("approaching_file_limit_banner_v2");Object(m["bindAll"])(r,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(_["b"])(T,{contexts:{ui_context:{step:I,action:"impression"}}})}},{key:"onGo",value:function e(){Object(_["b"])(T,{contexts:{ui_context:{step:I,action:"click",ui_element:"pricing_button"}}});Object(_["b"])("GROWTH_PRICING",{contexts:{ui_context:{step:I,action:"click",ui_element:"pricing_button"}}});window.open(N,"_blank")}},{key:"onCloseIcon",value:function e(){Object(_["b"])(T,{contexts:{ui_context:{step:I,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props.userId;this.props.closeBanner({bannerPrefs:w});this.props.showFileList({user:t});Object(_["b"])(T,{contexts:{ui_context:{step:I,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.teamName;return S.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t})}},{key:"getBodyText",value:function e(){var t=this;if(!this.props.featureModernizeBanners)return null;if("treatment"===this.experimentGroup)return S.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.');return S.rt("Your workspace is getting close to the free plan\u2019s <limit>5 GB storage limit</limit>. To get some more space, you can either <button>delete older files</button> or upgrade to a paid plan.",{},function(e){var r=e.key,a=e.tag,n=e.text;if("limit"===a)return v.a.createElement("span",{key:r,className:"bold"},n);return v.a.createElement("button",{key:r,className:"c-link--button",onClick:t.onDeleteFilesLinkClicked},n)})}},{key:"render",value:function e(){var t=S.t("See Plans");return v.a.createElement(E["a"],{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:w})}}]);return t}(d["PureComponent"]);A.displayName="ApproachingFileLimitBanner";var M=function e(t){return{teamName:Object(y["getCurrentTeam"])(t).name,userId:Object(j["getCurrentUserId"])(t),featureModernizeBanners:Object(j["isFeatureEnabled"])(t,"feature_modernize_banners")}};var P={closeBanner:O["closeBanner"],showFileList:k["c"]};t["a"]=Object(f["connect"])(M,P)(A)},22535:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(5);var _=r(91);var y=r(12);var O=r(21809);var k=new g["b"]("client");var j={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var C=63;var E="GROWTH_PRICING";var S="/pricing?ui_element=11&ui_step="+C;var w={messagesCount:h.a.number.isRequired,featureModernizeBannersV2:h.a.bool.isRequired};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"click",ui_element:"pricing_button"}}});window.open(S,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:k.t("Your workspace is getting close to the 10k message limit"),bodyText:k.t("All of your messages are saved in Slack, but on the Free plan you can only see and search the 10,000 most recent. For your full message history, upgrade to a paid plan.")}}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();return v.a.createElement(O["a"],{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/231b.png",emojiAlt:k.t("sand hourglass emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:j})}}]);return t}(d["PureComponent"]);I.displayName="ApproachingMsgLimitBanner";var T=function e(t){return{featureModernizeBannersV2:Object(y["isFeatureEnabled"])(t,"feature_modernize_banners_v2")}};t["a"]=Object(f["connect"])(T)(I)},22536:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(5);var _=r(91);var y=r(12);var O=r(21809);var k=new g["b"]("client");var j={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var C=64;var E="GROWTH_PRICING";var S="/pricing?ui_element=11&ui_step="+C;var w={messagesCount:h.a.number.isRequired,featureModernizeBannersV2:h.a.bool.isRequired};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"click",ui_element:"pricing_button"}}});window.open(S,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props.messagesCount;Object(_["b"])(E,{limit_meter_messages_count:t,contexts:{ui_context:{step:C,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:k.t("You\u2019ve just reached the 10k message limit"),bodyText:k.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();return v.a.createElement(O["a"],{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f3c1.png",emojiAlt:k.t("chequered flag emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:j})}}]);return t}(d["PureComponent"]);I.displayName="JustReachedMsgLimitBanner";var T=function e(t){return{featureModernizeBannersV2:Object(y["isFeatureEnabled"])(t,"feature_modernize_banners_v2")}};t["a"]=Object(f["connect"])(T)(I)},22537:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(3105);var _=r(5);var y=r(91);var O=r(12);var k=r(21809);var j=new _["b"]("client");var C={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var E=65;var S="GROWTH_PRICING";var w="/pricing?ui_element=11&ui_step="+E;var I={messagesCount:h.a.number.isRequired,featureModernizeBannersV2:h.a.bool.isRequired};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(m["bindAll"])(r,["onGo","onCloseBanner"]);return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.messagesCount;Object(y["b"])(S,{limit_meter_messages_count:t,contexts:{ui_context:{step:E,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.messagesCount;Object(y["b"])(S,{limit_meter_messages_count:t,contexts:{ui_context:{step:E,action:"click",ui_element:"pricing_button"}}});window.open(w,"_blank")}},{key:"onCloseBanner",value:function e(){var t=this.props.messagesCount;Object(y["b"])(S,{limit_meter_messages_count:t,contexts:{ui_context:{step:E,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var r=this.roundNumOfMsgsBeyondLimit(t-1e4);if(!r)return null;return{headerText:j.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:r}),bodyText:j.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:r})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(!t||t<=0)return t;if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var r=100*Math.floor(t/100);return Object(_["i"])(r)}if(t>999999)return Object(g["a"])(t);return null}},{key:"render",value:function e(){if(!this.props.featureModernizeBannersV2)return null;var t=this.getContent();if(!t)return null;return v.a.createElement(k["a"],{emojiSrc:cdn_url+"/f5d6f/img/emoji_2016_06_08/apple/1f680.png",emojiAlt:j.t("rocket emoji"),headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:C})}}]);return t}(d["PureComponent"]);T.displayName="ThirtyDaysAfterMsgLimitBanner";var N=function e(t){return{featureModernizeBannersV2:Object(O["isFeatureEnabled"])(t,"feature_modernize_banners_v2")}};t["a"]=Object(f["connect"])(N)(T)},22538:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22539);var n=r(42);Object(n["a"])("interop.mountMessagePaneDragOverlay",a["a"]);Object(n["a"])("interop.unmountMessagePaneDragOverlay",a["b"])},22539:function(e,t,r){"use strict";t["a"]=d;t["b"]=v;var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(22540);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var a=Object(l["c"])(e);Object(c["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function v(e){s.a.unmountComponentAtNode(e)}},22540:function(e,t,r){"use strict";var a=r(22541);t["a"]=a["a"]},22541:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(12);var O=r(21697);var k=r(3271);var j=r(907);var C=r(21703);var E=r(5);var S=r(20491);var w=r.n(S);var I=new E["b"]("files");var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.teamName,n=t.channelName,i=t.isImOrMpim,s=t.useNightIllustration;var o=this.state.spriteLoaded;if(!r)return null;var c=false;if(Object(d["isBoolean"])(s))c=s;else{var l=new Date;var u=l.getHours();c=u>=20||u<8}var v=_()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c});var p="";p=i?I.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):I.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});var f="";o&&(f=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return h.a.createElement("div",{className:v},h.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},f),h.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},I.rt("Upload to {teamName}",{teamName:a})),h.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},p)))}}]);return t}(p["PureComponent"]);T.displayName="MessagePaneDragOverlay";T.defaultProps={featureFileThreads:true,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function N(e,t){var r=t.channelId;var a=Object(O["getChannelById"])(e,r);var n=Object(k["getCurrentTeam"])(e);return{featureFileThreads:Object(y["isFeatureEnabled"])(e,"feature_file_threads"),channelName:Object(j["getDisplayNameForChannel"])(e,a,{imIncludeAtSign:false}),teamName:Object(C["getTeamDisplayName"])(n),isImOrMpim:Object(j["isIm"])(a)||Object(j["isMpim"])(a)}}t["a"]=Object(b["connect"])(N)(T)},22542:function(e,t,r){"use strict";t["a"]=o;var a=r(1);var n=r.n(a);var i=r(5);var s=new i["b"]("aria_msg_summary");function o(e){if(!e)return null;var t=[];t.push(s.t("{name} at {time}.",{name:e.name,time:e.time}));t.push(e.text);e.reactionCount>0&&t.push(s.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount}));e.replyCount>0&&t.push(s.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount}));e.isStarred&&t.push(s.t("Message is starred."));e.isPinned&&t.push(s.t("Message is pinned."));e.attachmentCount>0&&t.push(s.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount}));e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts));return Object(a["unescape"])(t.join(" "))}},22543:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isVisible:true};e.onMouseEnter=e.onMouseEnter.bind(e);e.onMouseMove=e.onMouseMove.bind(e);e.lastMouseCoords={screenX:0,screenY:0};return e}s()(t,[{key:"onMouseEnter",value:function e(t){var r=t.screenX,a=t.screenY;this.lastMouseCoords={screenX:r,screenY:a}}},{key:"onMouseMove",value:function e(t){var r=t.screenX,a=t.screenY;var n=this.lastMouseCoords,i=n.screenX,s=n.screenY;this.lastMouseCoords={screenX:r,screenY:a};var o=Math.abs(i-r);var c=Math.abs(s-a);if(0===o&&0===c)return;this.setState(function(){return{isVisible:false}})}},{key:"render",value:function e(){var t=v.a.createElement("div",{className:"c-message_list__focus_indicator",onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove});return this.state.isVisible?t:null}}]);return t}(d["PureComponent"]);p.displayName="FocusIndicator";t["a"]=p},22544:function(e,t,r){"use strict";var a=r(22286);t["a"]=a["a"]},22545:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22546);var n=r(42);Object(n["a"])("interop.mountMigrationBlocker",a["a"])},22546:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22547);var l=function e(t,r,a){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["c"])(t)},n.a.createElement(c["a"],a)),r)};t["a"]=l},22547:function(e,t,r){"use strict";var a=r(22548);t["a"]=a["a"]},22548:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(12);var _=r(3184);var y=r(37);var O=r(5);var k=r(20584);var j=r.n(k);var C=new O["b"]("migration_blocker_page");var E={enterpriseName:v.a.string,sendEmail:v.a.bool,teamName:v.a.string,migrationID:v.a.string,isOrgOwner:v.a.bool,isWorkspaceOwner:v.a.bool,isOrgAdmin:v.a.bool,isWorkspaceAdmin:v.a.bool,teamURL:v.a.string,featureMigrationStatus:v.a.bool.isRequired};var S={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var w=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,r=t.teamName,a=t.enterpriseName,n=t.featureMigrationStatus;if(!n)return null;return h.a.createElement("span",{className:"p-migration_blocker_page__title"},C.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:r,enterpriseName:a}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,r=t.enterpriseName,a=t.sendEmail,n=t.featureMigrationStatus;if(!n)return null;var i=C.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:r,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return h.a.createElement("div",{className:"p-migration_blocker_page__description"},i,a?C.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,r=t.migrationID,a=t.featureMigrationStatus,n=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,c=t.teamURL;if(!a)return null;if(!n&&!i&&!s&&!o)return null;return h.a.createElement(_["c"],{className:"p-migration_blocker_page__button",href:c+"migrations/"+r+"/status"},h.a.createElement("div",{className:"p-migration_blocker_page__button__text"},h.a.createElement("span",{className:"p-migration_blocker_page__button__title"},C.t("View migration status")),h.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},C.t("Migration status is only visible to owners and admins."))),h.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},h.a.createElement(y["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=this.props.featureMigrationStatus;if(!t)return null;var r=b()("p-migration_blocker_page","p-migration_blocker_page--large");return h.a.createElement("div",{className:r,role:"button",tabIndex:"0"},h.a.createElement("div",{className:"p-migration_blocker_text"},h.a.createElement("div",{className:"p-migration_blocker_icon"}),h.a.createElement("h3",null,this.renderMigrationTitle()),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(p["Component"]);w.displayName="MigrationBlockerPage";w.defaultProps=S;var I=function e(t){return{featureMigrationStatus:Object(g["isFeatureEnabled"])(t,"feature_migration_status_page")}};var T={};t["a"]=Object(f["connect"])(I)(w)},22549:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22550);var n=r(42);Object(n["a"])("interop.modalContainer",{mountModalContainer:a["a"],unmountModalContainer:a["b"]})},22550:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(21838);var d=function e(t,r){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var a=Object(l["c"])(t);Object(c["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],null)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var p={mountModalContainer:d,unmountModalContainer:v}},22551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22552);var n=r(42);Object(n["a"])("interop.mountNotificationBar",a["a"])},22552:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22553);var l=function e(t,r,a){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var l=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(c["a"],a)),r)};var u={mountNotificationBar:l}},22553:function(e,t,r){"use strict";var a=r(22554);t["a"]=a["a"]},22554:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(283);var y=r(60);var O=r(5);var k=r(37);var j=r(364);var C=r(20247);var E=r.n(C);var S=new O["b"]("notification_bar");var w={offline:h.a.bool,isTyping:h.a.bool,typingNames:h.a.array,tooLongCount:h.a.number,snippetCallback:h.a.func,formatting:h.a.bool};var I={offline:null,isTyping:null,typingNames:null,tooLongCount:null,snippetCallback:v.a.noop,formatting:null};var T=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLeft",value:function e(){if(this.props.offline){var t=this.props.isTyping?S.t("Slack is trying to connect, so messages can\u2019t be sent yet."):S.t("Slack is trying to connect.");return g.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},t," ",g.a.createElement(k["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(this.props.typingNames&&this.props.typingNames.length>0){var r=S.t("several people are typing");1===this.props.typingNames.length?r=S.rt("<b>{name}</b> is typing",{name:this.props.typingNames[0]}):2===this.props.typingNames.length&&(r=S.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:this.props.typingNames[0],other_name:this.props.typingNames[1]}));return g.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},r)}return null}},{key:"renderRight",value:function e(){var t=this;if(!this.props.offline&&this.props.tooLongCount>0){var r=S.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:this.props.tooLongCount});var a=S.t("Make a snippet instead?");var n=S.t("A snippet is a text file that can be much longer than a normal message.");return g.a.createElement("div",null,g.a.createElement("span",null,r," "),g.a.createElement(y["d"],{tip:n},g.a.createElement("span",null,g.a.createElement(_["a"],{tabIndex:"5",onClick:this.props.snippetCallback},a))))}var i=function(){if(t.props.offline)return"";if(j["b"])return S.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return S.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return g.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},i)}},{key:"render",value:function e(){var t=m()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":!this.props.offline&&(this.props.formatting||this.props.tooLongCount>0)});return g.a.createElement("div",{className:"p-notification_bar"},g.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),g.a.createElement("div",{className:t},this.renderRight()))}}]);return t}(b["PureComponent"]);T.displayName="NotificationBar";T.defaultProps=I;t["a"]=T},22555:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22556);var n=r(42);Object(n["a"])("interop.mountOAuthConfirm",a["a"])},22556:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22557);var l=function e(t,r,a){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["c"])(t)},n.a.createElement(c["a"],a)),r)};t["a"]=l},22557:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(5);var y=r(3184);var O=r(21967);var k=r(195);var j=r(20078);var C=r.n(j);var E=r(2193);var S=r(2128);var w=r(1074);var I=r(37);var T=r(283);var N=r(60);var R=r(22193);var A=r(1058);var M=r(91);var P=r(21747);var x=r(22558);var D=r(20248);var F=r.n(D);var L=new _["b"]("pages_oauth");var B=m.a.arrayOf(P["a"]);var U={featureOauthReactWta:m.a.bool.isRequired,appIsReviewed:m.a.bool,appIsInternalIntegration:m.a.bool,authRowIdentifier:m.a.string.isRequired,crumbKey:m.a.string.isRequired,appIcon:m.a.string.isRequired,appName:m.a.string.isRequired,teamIcon:m.a.string.isRequired,teamName:m.a.string.isRequired,denyUrl:m.a.string.isRequired,safeTeamScopeInfo:B,dangerousTeamScopeInfo:B,safeChannelScopeInfo:B,dangerousChannelScopeInfo:B,needSecondStep:m.a.bool.isRequired,needTeamPicker:m.a.bool.isRequired,singleChannel:m.a.bool,channelItems:m.a.shape({channels:m.a.object,group_channels:m.a.object,im_channels:m.a.object,mpim_channels:m.a.object}),appId:m.a.string,appType:m.a.string,appIsInstalled:m.a.bool,initialSelectedTeamID:m.a.string,teamsList:m.a.arrayOf(m.a.shape({href:m.a.string.required,teamId:m.a.string.required,teamImg:m.a.string.required,teamName:m.a.string.required})),signInUrl:m.a.string,switchTeamUrlPathAndQuery:m.a.string,onTeamSelected:m.a.func,orgName:m.a.string,appDevelopmentTeamName:m.a.string,featureOauthInternalIntegrationBanner:m.a.bool,featureWtaAppDetailOauthUpdates:m.a.bool};var q={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:b["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,channelItems:{},orgName:void 0,appDevelopmentTeamName:void 0,appCreatedOnTeam:false,featureOauthInternalIntegrationBanner:false,featureWtaAppDetailOauthUpdates:false};var H=300;var W=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var G=function e(t,r,a){return t.map(function(e){var t={id:e.encoded_id,channelType:r};t.label="im"===r?"@"+e.username:"channel"===r||"private"===r?"#"+e.name:e.name;a&&a.find(function(t){return t.id===e.encoded_id})&&(t.preselected=true);return t})};var V=function e(t,r){var a=[];t.channels&&a.push({id:"channels",label:"Channels",group:true,children:G(Object(b["values"])(t.channels),"channel",r)});t.group_channels&&a.push({id:"group_channels",label:"Private Channels",group:true,children:G(Object(b["values"])(t.group_channels),"private",r)});if(t.im_channels||t.mpim_channels){var n=[];var i=[];t.im_channels&&(n=G(Object(b["values"])(t.im_channels),"im",r));t.mpim_channels&&(i=G(Object(b["values"])(t.mpim_channels),"mpim",r));var s=n.concat(i);a.push({id:"im_mpim_channels",label:"Direct Messages",group:true,children:s})}return a};var z=function e(t,r,a,n){var i=Object(b["compact"])(t.concat(r,a,n));return Object(b["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var K=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.appId,i=a.appName,o=a.safeTeamScopeInfo,c=a.dangerousTeamScopeInfo,l=a.safeChannelScopeInfo,d=a.dangerousChannelScopeInfo,v=a.singleChannel,p=a.needSecondStep,h=a.featureWtaAppDetailOauthUpdates;r.trackingProps={app_scopes:z(o,c,l,d),app_name:i,app_id:n};r.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],disableInstallButton:v&&(!p||h&&r.noWorkspaceScopesUsed()&&p)};Object(b["bindAll"])(r,["onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef"]);return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appId,n=t.appType;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:r,app_id:a,app_type:n});Object(M["b"])("OAUTH_REVIEWS_SCOPES",this.trackingProps);Object(M["e"])("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps)}},{key:"onDenyClick",value:function e(){Object(M["b"])("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();var r=this.props.singleChannel;Object(M["b"])("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(e){var t=e.selectedChannelValues,a=e.selectedRadioValue;return{step:1,disableInstallButton:0===t.length&&"specific-channels"===a||r&&0===t.length}})}},{key:"onBackClick",value:function e(t){t.preventDefault();Object(M["b"])("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0,disableInstallButton:false}})}},{key:"onInputKeyUp",value:function e(){var t=this;var r=Object(b["get"])(this,"lfs.input.value","");this.setState(function(){return{disableInstallButton:r.length>0||0===t.state.selectedChannelValues.length}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{selectedChannelValues:t,selectedRadioValue:"specific-channels",disableInstallButton:0===t.length}})}},{key:"changeRadioButtonCheck",value:function e(t){var r=Object(b["get"])(this,"lfs.input.value","");var a=t.target.id;this.setState(function(e){return{selectedRadioValue:a,disableInstallButton:"specific-channels"===a&&(0===e.selectedChannelValues.length||r.length>0)}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,r=t.dangerousTeamScopeInfo,a=t.safeTeamScopeInfo;return Object(b["isEmpty"])(r)&&Object(b["isEmpty"])(a)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,r=t.dangerousChannelScopeInfo,a=t.safeChannelScopeInfo;return Object(b["isEmpty"])(r)&&Object(b["isEmpty"])(a)}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var r=this.state.step;if(t&&1===r)return h.a.createElement(T["a"],{role:"button",className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},h.a.createElement(I["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,r=t.needTeamPicker,a=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var c=this.state.step;if(r&&0===c){var l=i;o&&(l=Object(b["map"])(i,function(e){return n()({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return h.a.createElement("div",{className:"p-oauth_flow__team_switcher position_relative"},h.a.createElement(R["a"],{initialSelectedTeamID:a,teamsList:l,signInUrl:s}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,r=t.appDevelopmentTeamName,a=t.appIsInternalIntegration,n=t.appIsReviewed,i=t.featureOauthReactWta,s=t.featureOauthInternalIntegrationBanner,o=t.orgName,c=t.teamName;if(n)return null;var l=void 0;s?l=a?r?L.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(_["l"])(o),teamName:Object(_["l"])(r)}):L.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(_["l"])(c)}):L.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,r=e.text;return h.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},r)}):i&&(l=L.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>",null,function(e){var t=e.key,r=e.text;return h.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},r)}));return h.a.createElement(O["a"],{type:a?"neutral":"warning",text:l,showCloseButton:false})}},{key:"renderConfirmTitle",value:function e(){var t=this.props,r=t.appIsInstalled,a=t.appName,n=t.featureOauthReactWta,i=t.featureWtaAppDetailOauthUpdates,s=t.needSecondStep,o=t.singleChannel,c=t.teamName;var l=this.state.step;var u=void 0;i?u=1===l?o?L.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:a}):r?L.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:a}):L.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a}):r?this.noWorkspaceScopesUsed()?s?o?L.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:a,teamName:c}):L.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:a,teamName:c}):this.noChannelScopesUsed()?L.t("{appName} is already installed on {teamName}.",{teamName:Object(_["l"])(c),appName:Object(_["l"])(a)}):L.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(_["l"])(c),appName:Object(_["l"])(a)}):L.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(_["l"])(c),appName:Object(_["l"])(a)}):L.t("On {teamName}, {appName} would like to:",{teamName:Object(_["l"])(c),appName:Object(_["l"])(a)}):n&&(u=1===l?L.rt("{app_name} would like to do the following in the <strong>selected channels:</strong>",{app_name:a}):L.t("On {team}, {app_name} would like to:",{team:Object(_["l"])(c),app_name:Object(_["l"])(a)}));return u}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state,r=t.step,a=t.disableInstallButton;var n=this.props,i=n.featureOauthReactWta,s=n.needSecondStep,o=n.appIsInstalled,c=n.appId,l=n.appType,u=n.featureWtaAppDetailOauthUpdates,d=n.singleChannel;var v=void 0;var p=void 0;var f=void 0;var m=void 0;var b=void 0;var g=void 0;var _=void 0;if(i){m=L.t("Continue");b=L.t("Install")}u&&(g=L.t("Allow"));if(0!==r||!s||u&&this.noWorkspaceScopesUsed()){v=u&&o?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?m:g:b;p=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:o,app_id:c,app_type:l})};f="submit"}else{v=m;p=this.onContinueClick;f="button"}u&&a&&(_=d?L.t("Select channel"):L.t("Select channels"));return h.a.createElement(y["d"],{className:"p-oauth_flow__button",htmlType:f,onClick:p,disabled:a},v,_&&h.a.createElement(N["d"],{tip:_},h.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,r=t.selectedChannelValues,a=t.selectedRadioValue;var n=this.props,i=n.channelItems,s=n.featureOauthReactWta,o=n.appName;var c=void 0;var l=void 0;var u=void 0;var d=void 0;var v=void 0;var p=void 0;var f=void 0;if(s){c=L.t("Select channels");l=L.t("All Public Channels");u=L.t("Any channel accessible to full members of your team.");d=L.t("Specific channels");v=L.t("Search for channels");p=L.t("No channels");f=L.t("{app_name} will still be able to access a private conversation with you",{app_name:o})}var m=V(i,r);var b=r.map(function(e){return'"'+e.id+'"'}).join(",");return h.a.createElement("div",{className:"margin_auto no_right_padding"},h.a.createElement("div",{className:"large_top_margin"},h.a.createElement("p",{className:"p-oauth_flow__para bold"},c),h.a.createElement("div",{className:"margin_bottom_100"},h.a.createElement(k["a"],{text:l,htmlFor:"all-channels",type:"inline",subtext:u,cursor:"pointer"},h.a.createElement(w["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===a,onChange:this.changeRadioButtonCheck}))),h.a.createElement("div",{className:"margin_bottom_100"},h.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},h.a.createElement("div",{className:"c-label__text full_width"},h.a.createElement("span",{className:"bold"},d)),h.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+b+"]",checked:"specific-channels"===a,onChange:this.changeRadioButtonCheck})),h.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},h.a.createElement(E["a"],{ref:this.setLfsRef,items:m,scrollThreshold:H,placeholderText:v,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:W}))),h.a.createElement("div",{className:"margin_bottom_100"},h.a.createElement(k["a"],{text:p,htmlFor:"no-channels",type:"inline",subtext:f,cursor:"pointer"},h.a.createElement(w["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===a,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props,r=t.channelItems,a=t.featureOauthReactWta,n=t.featureWtaAppDetailOauthUpdates,i=t.needSecondStep;var s=this.state.selectedChannelValues;var o=s.map(function(e){return e.id});var c=V(r,s);var l=void 0;var u=void 0;if(a){l=L.t("Post to");u=L.t("Select Channel")}var d=h.a.createElement(E["a"],{ref:this.setLfsRef,items:c,scrollThreshold:H,placeholderText:u,onValueChange:this.updateSpecificChannelsValues,listItemClass:W,single:true});return i&&n?h.a.createElement("div",{className:"margin_top_200"},h.a.createElement("p",{className:"p-oauth_flow__para bold"},L.t("Select a channel")),h.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},d),h.a.createElement("input",{type:"hidden",name:"channel",value:o})):h.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},h.a.createElement("span",{className:"margin_right_50"},l),h.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},d),h.a.createElement("input",{type:"hidden",name:"channel",value:o}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var r=this.props,a=r.appIsInstalled,n=r.singleChannel,i=r.needSecondStep,s=r.channelItems,o=r.featureWtaAppDetailOauthUpdates;if(Object(b["isEmpty"])(s)||this.noChannelScopesUsed())return null;if(1===t){if(o&&!n&&a)return null}else if(i&&!this.noWorkspaceScopesUsed())return null;return n?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"render",value:function e(){var t=this.state.step;var r=this.props,a=r.appIcon,n=r.appName,i=r.teamIcon,s=r.teamName,o=r.safeTeamScopeInfo,c=r.dangerousTeamScopeInfo,l=r.safeChannelScopeInfo,u=r.dangerousChannelScopeInfo,d=r.authRowIdentifier,v=r.crumbKey,p=r.denyUrl,f=r.needSecondStep,m=r.featureOauthReactWta,g=r.featureWtaAppDetailOauthUpdates;var _={appIcon:a,appName:n,teamIcon:i,teamName:s};var O=void 0;O=0!==t||g&&this.noWorkspaceScopesUsed()&&f?l.concat(u):Object(b["compact"])(o.concat(c));var k=void 0;m&&(k=L.t("Cancel"));return h.a.createElement("div",null,this.renderAlert(),h.a.createElement("header",{className:"p-oauth_flow__nav"},h.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),h.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),h.a.createElement("section",{className:"p-oauth_flow__header align_center"},h.a.createElement(x["a"],_),h.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),h.a.createElement("section",{className:"p-oauth_flow__body"},h.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+d,method:"post","accept-encoding":"UTF-8"},h.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),h.a.createElement("input",{type:"hidden",name:"crumb",value:v}),h.a.createElement("div",{className:"p-oauth_flow__scopes_container"},h.a.createElement(S["a"],{scopeInfo:O}),this.renderSingleChannelOrChannelSelections(),h.a.createElement("div",{className:"p-oauth_flow__buttons_container"},h.a.createElement(y["d"],{type:"outline",onClick:this.onDenyClick,href:p,className:"p-oauth_flow__button",target:"_self"},k),this.renderContinueOrInstallButton())))))}}]);return t}(p["PureComponent"]);K.displayName="OAuthConfirm";K.defaultProps=q;K.displayName="OAuthConfirm";var Q=K;t["a"]=Object(A["a"])("feature_oauth_react_wta","feature_oauth_internal_integration_banner","feature_wta_app_detail_oauth_updates")(K)},22558:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(45);var c=r(37);var l={appIcon:s.a.string.isRequired,appName:s.a.string.isRequired,teamIcon:s.a.string.isRequired,teamName:s.a.string.isRequired};var u={appIcon:void 0,appName:void 0,teamIcon:void 0,teamName:void 0};var d=function e(t){var r=t.appIcon,a=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:r,alt:a,title:a}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_light_grey"},n.a.createElement(c["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(c["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:a,title:s}))};d.displayName="OAuthPageLogos";d.defaultProps=u;t["a"]=Object(o["pure"])(d)},22559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22560);var n=r(42);Object(n["a"])("interop.mountPricingCalculator",a["a"])},22560:function(e,t,r){"use strict";t["a"]=l;var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22196);function l(e,t,r){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var a=Object(o["c"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["a"],r)),t)}},22561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22562);var n=r(3044);var i=r(43);var s=r(42);var o=r(21732);var c="redox-container";var l=false;function u(){if(l)return;if(!n["isDev"]&&!n["isJsPath"]){Object(i["warn"])("Redox only works in a development environment");return}var e=document.getElementById(c);if(!e){e=document.createElement("div");e.id=c;document.body.appendChild(e)}l=true;Object(a["a"])(TS.boot_data.team_id,e,d)}function d(){if(!n["isDev"]&&!n["isJsPath"]){Object(i["warn"])("Redox only works in a development environment");return}l=false;Object(a["b"])(document.getElementById(c))}Object(s["a"])("interop.mountRedox",u);Object(s["a"])("interop.unmountRedox",d);Object(o["a"])("redox",u);Object(o["a"])("unmountRedox",d)},22562:function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"b",function(){return h});var a=r(1);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(50);var c=r.n(o);var l=r(9);var u=r(21709);var d=r(49);var v=r(22563);var p=function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.noop;if(!t)throw new Error("mountRedox must be called with a teamId parameter");var i=Object(d["c"])(t);Object(u["a"])(s.a.createElement(l["Provider"],{store:i},s.a.createElement(v["a"],{onClose:a})),r)};var h=function e(t){c.a.unmountComponentAtNode(t)};var f={mountRedox:p,unmountRedox:h}},22563:function(e,t,r){"use strict";var a=r(22564);t["a"]=a["a"]},22564:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(88);var y=r(21699);var O=r(21847);var k=r(21849);var j=r(21848);var C=r(21719);var E=r(22565);var S=Object(O["a"])();var w=Object(y["a"])();var I=Object(k["a"])();var T=Object(j["a"])();var N=Object(C["a"])();var R={onClose:m.a.func};var A={onClose:h.a.noop};var M=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"componentDidMount",value:function e(){var t=this;this.interval=setInterval(function(){t.forceUpdate()},1e3)}},{key:"componentWillUnmount",value:function e(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function e(){var t=B();return g.a.createElement(E["a"],n()({onClose:this.props.onClose},t))}}]);return t}(b["Component"]);M.displayName="ConnectedRedox";M.defaultProps=A;function P(e){if(!e)return["(no props)"];if(!h.a.isFunction(e)&&h.a.isObject(e))return Object.keys(e);return["(single unnamed payload)"]}function x(e){var t=[];T.forEach(function(r){r&&r.has&&r.has(e)&&t.push(r&&r.meta&&r.meta.name)});return t}function D(e){var t=h.a.values(S);if(e&&e.has){var r=t.filter(function(t){return e.has(t)});return r.map(function(e){return e.meta.name})}return[]}function F(e){if(e&&e.meta&&e.meta.file){var t=e.meta.file.replace(/-store.*/,"");var r=I.filter(function(e){var r=e&&e.meta&&e.meta.file&&e.meta.file.replace(/-store.*/,"");return r&&r===t});return r.map(function(e){return e.meta.name})}return[]}function L(e){if(!e||!e.meta||!e.meta.file)return"";var t=[];var r=e.meta.file.replace(/-store.*/,"");T.forEach(function(e){if(e&&e.meta&&e.meta.file){var a=e.meta.file.replace(/-store.*/,"");r===a&&t.push(e&&e.meta&&e.meta.name)}});return t}function B(){var e=h.a.map(S,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{action:e,name:r,description:a,file:n,usageCount:i||0,isThunk:false,isFetcher:false,props:P(e.propTypes),reducers:x(e),sideEffectsCount:_["c"][e]?_["c"][e].length:0}});var t=h.a.map(w,function(e){var t=e.meta,r=t.name,a=t.description,n=t.file,i=t.usageCount;return{thunk:e,name:r,description:a,file:n,usageCount:i||0,isThunk:true,isFetcher:!!e.isFetcherCreator,props:P(e.propTypes),sideEffectsCount:0}});var r=h.a.map(I,function(e){var t=e.meta,r=t.name,a=t.file,n=t.usageCount;return{selector:e,name:r,file:a,reducers:L(e),usageCount:n||0}});var a=h.a.map(T,function(e){var t=e.meta||{},r=t.name,a=t.file;return{reducer:e,name:r||"",file:a||"",actions:D(e),selectors:F(e)}});var n=h.a.map(N,function(e){var t=e.meta||{},r=t.name,a=t.file,n=t.description;return{middleware:e,name:r||"",file:a||"",description:n||""}});return{actions:e.concat(t),selectors:r,reducers:a,middlewares:n}}t["a"]=M},22565:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(1076);var k=r(3189);var j=r(22922);var C=r(37);var E=r(3096);var S=r(22566);var w=r(20250);var I=r.n(w);var T=S["a"].ActionOrThunkInfo,N=S["a"].SelectorInfo,R=S["a"].ReducerInfo,A=S["a"].MiddlewareInfo;var M={actions:m.a.arrayOf(T).isRequired,selectors:m.a.arrayOf(N).isRequired,reducers:m.a.arrayOf(R).isRequired,middlewares:m.a.arrayOf(A).isRequired,onClose:m.a.func};var P={onClose:h.a.noop};var x={name:"asc",usageCount:"desc",reducers:"asc",actions:"asc",selectors:"asc",file:"asc",isThunk:"desc",isFetcher:"desc",sideEffectsCount:"desc"};var D=function(e){v()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));h.a.bindAll(e,["renderReducers","renderSelectors","renderMiddlewares","renderActionsAndThunks","onSearchTermChange","renderSearchInput","filterResults","changeToTabAndUpdateSearch","onTabChange","sortCollection","updateSort","renderColumnHeader"]);e.state={searchTerm:"",defaultTabId:"selectors",sort:{selectors:{direction:"desc",key:"usageCount"},actionsAndThunks:{direction:"desc",key:"usageCount"},reducers:{direction:"asc",key:"name"},middlewares:{direction:"asc",key:"name"}}};return e}c()(t,[{key:"onSearchTermChange",value:function e(t){t.preventDefault();var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onTabChange",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"updateSort",value:function e(t,r){this.setState(function(e){var a=n()({},e.sort);if(a[t].key===r)a[t].direction="asc"===a[t].direction?"desc":"asc";else{a[t].key=r;a[t].direction=x[r]||"asc"}return{sort:a}})}},{key:"sortCollection",value:function e(t,r){var a=this.state.sort;var n=h.a.sortBy(t,a[r].key);"desc"===a[r].direction&&n.reverse();return n}},{key:"changeToTabAndUpdateSearch",value:function e(t,r){var a=this;this.setState(function(){return{defaultTabId:null}},function(){a.setState(function(){return{defaultTabId:t}},function(){a.setState(function(){return{searchTerm:r}})})})}},{key:"filterResults",value:function e(t,r,a){if(!t)return r;var n=t.toLowerCase();var i=r.filter(function(e){var t=false;a.forEach(function(r){var a=e&&e[r];h.a.isArray(a)&&(a=a.join(","));a.toLowerCase().indexOf(n)>=0&&(t=true)});return t});return i}},{key:"renderSearchInput",value:function e(){var t=this.state.searchTerm;return g.a.createElement(j["a"],{className:"p-redox__search_input margin_top_150 margin_bottom_150",value:t,onChange:this.onSearchTermChange,placeholder:"search"})}},{key:"renderColumnHeader",value:function e(t,r,a){var i=this;var s=this.state.sort;var o={};var c=void 0;var l=false;if(r&&a){l=true;o.onClick=function(){i.updateSort(r,a)};s[r].key===a&&(c="asc"===s[r].direction?g.a.createElement(C["b"],{className:"nudge_top_2",inline:true,type:"caret-up"}):g.a.createElement(C["b"],{className:"nudge_top_2",inline:true,type:"caret-down"}))}var u=y()("p-redox__table_cell","p-redox__table_column_header","p-redox__table_column_header--"+a,{"p-redox__table_column_header--sortable":l});return g.a.createElement("td",n()({className:u},o),t,c)}},{key:"renderReducers",value:function e(){var t=this;var r=this.props.reducers;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file","actions","selectors"]);var i=this.sortCollection(n,"reducers");return g.a.createElement(g.a.Fragment,null,this.renderSearchInput(),g.a.createElement("table",{className:"p-redox__table"},g.a.createElement("tbody",null,g.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","reducers","name"),this.renderColumnHeader("Actions"),this.renderColumnHeader("Selectors"),this.renderColumnHeader("File","reducers","file")),i.map(function(e,r){return g.a.createElement(B,{key:""+e.name+r,reducer:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderMiddlewares",value:function e(){var t=this.props.middlewares;var r=this.state.searchTerm;var a=this.filterResults(r,t,["name","description","file"]);var n=this.sortCollection(a,"middlewares");return g.a.createElement(g.a.Fragment,null,this.renderSearchInput(),g.a.createElement("table",{className:"p-redox__table"},g.a.createElement("tbody",null,g.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","middlewares","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("File","middlewares","file")),n.map(function(e,t){return g.a.createElement(U,{key:""+e.name+t,middleware:e})}))))}},{key:"renderSelectors",value:function e(){var t=this;var r=this.props.selectors;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","file"]);var i=this.sortCollection(n,"selectors");return g.a.createElement(g.a.Fragment,null,this.renderSearchInput(),g.a.createElement("table",{className:"p-redox__table"},g.a.createElement("tbody",null,g.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","selectors","name"),this.renderColumnHeader("Usage Count","selectors","usageCount"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("File","selectors","file")),i.map(function(e,r){return g.a.createElement(L,{key:""+e.name+r,selector:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderActionsAndThunks",value:function e(){var t=this;var r=this.props.actions;var a=this.state.searchTerm;var n=this.filterResults(a,r,["name","description","file"]);var i=this.sortCollection(n,"actionsAndThunks");var s=g.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","actionsAndThunks","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("Usage Count","actionsAndThunks","usageCount"),this.renderColumnHeader("Thunk?","actionsAndThunks","isThunk"),this.renderColumnHeader("Fetcher?","actionsAndThunks","isFetcher"),this.renderColumnHeader("Props"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("# Side Effects","actionsAndThunks","sideEffectsCount"),this.renderColumnHeader("File","actionsAndThunks","file"));return g.a.createElement(g.a.Fragment,null,this.renderSearchInput(),g.a.createElement("table",{className:"p-redox__table"},g.a.createElement("tbody",null,i.map(function(e,r){return g.a.createElement(g.a.Fragment,{key:""+e.name+r},r%30===0?s:null,g.a.createElement(F,{action:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch}))}))))}},{key:"render",value:function e(){var t=this.state.defaultTabId;var r=[{title:"Selectors",id:"selectors",content:this.renderSelectors()},{title:"Actions and Thunks",id:"actionsAndThunks",content:this.renderActionsAndThunks()},{title:"Reducers",id:"reducers",content:this.renderReducers()},{title:"Middleware",id:"middlewares",content:this.renderMiddlewares()}];return g.a.createElement(O["a"],{modalClasses:"p-redox_modal",title:"Redox",showCancelButton:false,showGoButton:false,onCancel:this.props.onClose},g.a.createElement(E["a"],{defaultTabId:t,tabs:r,onTabChange:this.onTabChange}))}}]);return t}(b["Component"]);D.displayName="Redox";D.defaultProps=P;var F=function e(t){var r=t.action,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.isThunk)n=g.a.createElement("td",{className:"p-redox__table_cell"},"n/a");else if(r.reducers&&r.reducers.length){var i=r.reducers;n=g.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e){return g.a.createElement(k["a"],{key:e,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=g.a.createElement("td",{className:"p-redox__table_cell"});return g.a.createElement("tr",{className:"p-redox__table_row"},g.a.createElement("td",{className:"p-redox__table_cell"},r.name),g.a.createElement("td",{className:"p-redox__table_cell"},r.description),g.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),g.a.createElement("td",{className:"p-redox__table_cell"},r.isThunk?"x":""),g.a.createElement("td",{className:"p-redox__table_cell"},r.isFetcher?"x":""),g.a.createElement("td",{className:"p-redox__table_cell"},r.props.map(function(e){return g.a.createElement("div",{key:e},e)})),n,g.a.createElement("td",{className:"p-redox__table_cell"},r.sideEffectsCount),g.a.createElement("td",{className:"p-redox__table_cell"},r.file))};F.displayName="ActionThunkRow";var L=function e(t){var r=t.selector,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.reducers&&r.reducers.length){var i=r.reducers;n=g.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return g.a.createElement(k["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("reducers",e)}},e)}))}else n=g.a.createElement("td",{className:"p-redox__table_cell"});return g.a.createElement("tr",{className:"p-redox__table_row"},g.a.createElement("td",{className:"p-redox__table_cell"},r.name),g.a.createElement("td",{className:"p-redox__table_cell"},r.usageCount),n,g.a.createElement("td",{className:"p-redox__table_cell"},r.file))};L.displayName="SelectorRow";var B=function e(t){var r=t.reducer,a=t.changeToTabAndUpdateSearch;var n=void 0;if(r.actions&&r.actions.length){var i=r.actions;n=g.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return g.a.createElement(k["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("actionsAndThunks",e)}},e)}))}else n=g.a.createElement("td",{className:"p-redox__table_cell"});var s=void 0;if(r.selectors&&r.selectors.length){var o=r.selectors;s=g.a.createElement("td",{className:"p-redox__table_cell"},o.map(function(e,t){return g.a.createElement(k["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){a("selectors",e)}},e)}))}else s=g.a.createElement("td",{className:"p-redox__table_cell"});return g.a.createElement("tr",{className:"p-redox__table_row"},g.a.createElement("td",{className:"p-redox__table_cell"},r.name),n,s,g.a.createElement("td",{className:"p-redox__table_cell"},r.file))};B.displayName="ReducerRow";var U=function e(t){var r=t.middleware;return g.a.createElement("tr",{className:"p-redox__table_row"},g.a.createElement("td",{className:"p-redox__table_cell"},r.name),g.a.createElement("td",{className:"p-redox__table_cell"},r.description),g.a.createElement("td",{className:"p-redox__table_cell"},r.file))};U.displayName="MiddlewareRow";t["a"]=D},22566:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i={};i.SelectorInfo=n.a.shape({selector:n.a.func.isRequired,name:n.a.string.isRequired,file:n.a.string.isRequired,usageCount:n.a.number.isRequired,reducers:n.a.arrayOf(n.a.string)});i.ActionOrThunkInfo=n.a.shape({action:n.a.func,thunk:n.a.func,name:n.a.string.isRequired,description:n.a.string.isRequired,file:n.a.string.isRequired,usageCount:n.a.number.isRequired,sideEffectsCount:n.a.number,props:n.a.arrayOf(n.a.string),reducers:n.a.arrayOf(n.a.string),isThunk:n.a.bool.isRequired,isFetcher:n.a.bool.isRequired});i.ReducerInfo=n.a.shape({reducer:n.a.func.isRequired,name:n.a.string.isRequired,file:n.a.string.isRequired,actions:n.a.arrayOf(n.a.string).isRequired,selectors:n.a.arrayOf(n.a.string).isRequired});i.MiddlewareInfo=n.a.shape({middleware:n.a.func.isRequired,name:n.a.string.isRequired,file:n.a.string.isRequired,description:n.a.string.isRequired});t["a"]=i},22567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22568);var n=r(42);Object(n["a"])("interop.mountScrollbar",a["a"]);Object(n["a"])("interop.unmountScrollbar",a["b"])},22568:function(e,t,r){"use strict";r.d(t,"a",function(){return p});r.d(t,"b",function(){return h});var a=r(374);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(50);var c=r.n(o);var l=r(9);var u=r(21709);var d=r(49);var v=r(497);var p=function e(t,r,a){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["c"])(t);var o=a.safeHtml,c=n()(a,["safeHtml"]);Object(u["a"])(s.a.createElement(l["Provider"],{store:i},s.a.createElement(v["a"],c,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),r)};var h=function e(t){c.a.unmountComponentAtNode(t)};var f={mountScrollbar:p,unmountScrollbar:h}},22569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22570);var n=r(42);Object(n["a"])("interop.mountServiceImportMappingForm",a["a"]);Object(n["a"])("interop.unmountServiceImportMappingForm",a["b"])},22570:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(22571);var d=function e(t,r,a){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(t)},n.a.createElement(u["a"],a)),r)};var v=s.a.unmountComponentAtNode;var p={mountServiceImportMappingForm:d,unmountServiceImportMappingForm:v}},22571:function(e,t,r){"use strict";var a=r(22572);var n=r(22289);var i=r(22200);t["a"]=a["a"]},22572:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(20615);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(9);var k=r(333);var j=r(1);var C=r.n(j);var E=r(195);var S=r(3184);var w=r(1078);var I=r(1028);var T=r(21748);var N=r(378);var R=r(21698);var A=r(22573);var M=r(5);var P=r(22200);var x=r(22289);var D=r(20188);var F=r.n(D);var L=new M["b"]("imports");var B={service:g.a.string.isRequired,crumb:g.a.string.isRequired,allMembers:g.a.object.isRequired,initialUserMappings:g.a.arrayOf(g.a.shape({id:g.a.oneOfType([g.a.string,g.a.number]).isRequired,name:g.a.string.isRequired,import_email:g.a.string.isRequired,email:g.a.string.isRequired,email_state:g.a.string.isRequired,mapping:g.a.string.isRequired})).isRequired,initialChannelMappings:g.a.array.isRequired,ignoreApiUsers:g.a.bool};var U={ignoreApiUsers:false};var q=[{label:L.t("Map users when possible, and manually configure the rest"),value:"-"},{label:L.t("Create and invite users"),value:"invite"},{label:L.t("Create deactivated users, without inviting anyone"),value:"create"},{label:L.t("Do not create users, leaving messages as bot messages"),value:"bot"},{label:L.t("Skip users, without importing their messages"),value:"0"}];var H=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={batchUserAction:"-",isUserMappingFormExpanded:false,userMappings:e.initialUserMappings,ignoreApiUsers:e.ignoreApiUsers};r.onUserMappingChange=r.onUserMappingChange.bind(r);r.onChange=r.onChange.bind(r);r.renderUserMapping=r.renderUserMapping.bind(r);r.onApplyBatchUserActionToAll=r.onApplyBatchUserActionToAll.bind(r);r.onApplyBatchUserActionToUnmapped=r.onApplyBatchUserActionToUnmapped.bind(r);return r}v()(t,[{key:"onChange",value:function e(t,r){this.setState(function(){return c()({},t,r)})}},{key:"onUserMappingChange",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!r.id)return;var a=this.state.userMappings;var n=Object(j["findIndex"])(a,function(e){return e.id===r.id});if(-1===n)return;var i=[].concat(s()(a.slice(0,n)),[r],s()(a.slice(n+1)));this.setState(function(){return{userMappings:Object(P["b"])(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:Object(P["b"])(e.userMappings.map(function(r,a){return n()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:Object(P["b"])(e.userMappings.map(function(r,a){return Object(x["b"])(r.mapping)?r:n()({},r,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[a].mapping:e.batchUserAction,email:r.import_email})}),Object.values(t.props.allMembers))}})}},{key:"maybeRenderIgnoreApiUsersInput",value:function e(){var t=this;return"hipchat"!==this.props.service?null:y.a.createElement(N["a"],{enabled:["feature_service_import_lfs"]},y.a.createElement(E["a"],{text:L.t('Also import "api" messages from the HipChat logs'),htmlFor:"service_import_ignore_api_user",type:"inline",cursor:"pointer"},y.a.createElement(w["a"],{id:"service_import_ignore_api_user",name:"service_import_ignore_api_user",value:!this.state.ignoreApiUsers,checked:!this.state.ignoreApiUsers,onChange:function e(){return t.onChange("ignoreApiUsers",!t.state.ignoreApiUsers)}})))}},{key:"renderUserMapping",value:function e(t){return y.a.createElement(x["a"],{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderUserMappingForm",value:function e(){var t=this;var r=this.state.userMappings.map(function(e){return String(e.id)});return y.a.createElement(N["a"],{enabled:["feature_service_import_lfs"]},y.a.createElement("div",null,y.a.createElement("div",{className:"display_flex align_items_center justify_content_between bottom_margin"},y.a.createElement("h4",{className:"medium_bottom_margin col span_3_of_6"},L.t("View Users ({userCount})",{userCount:this.state.userMappings.length})),y.a.createElement(S["d"],{type:"outline",onClick:function e(){return t.onChange("isUserMappingFormExpanded",!t.state.isUserMappingFormExpanded)}},this.state.isUserMappingFormExpanded?L.t("close"):L.t("expand"))),y.a.createElement(A["a"],{isExpanded:this.state.isUserMappingFormExpanded},y.a.createElement("div",{className:"p-service_import_mapping_form--user_mappings"},y.a.createElement(k["a"],null,function(e){var a=e.width,n=e.height;return y.a.createElement(T["b"],{width:a,height:n,keys:r,rowRenderer:t.renderUserMapping})})))))}},{key:"renderUserImportMappingForm",value:function e(){var t=this;var r=this.state.batchUserAction;return y.a.createElement(N["a"],{enabled:["feature_service_import_lfs"]},y.a.createElement("div",null,y.a.createElement("h3",null,L.t("Users")),y.a.createElement("h4",{className:"medium_bottom_margin"},L.t("Batch Actions")),y.a.createElement("div",{className:"p-service_import_mapping_form--batch_actions display_flex justify_content_between"},y.a.createElement("div",{className:"flex_one"},y.a.createElement(I["d"],{id:"batchUserAction",name:"batchUserAction",onChange:function e(r){return t.onChange("batchUserAction",r)},options:q,value:r,usePlaceholderOption:false})),y.a.createElement("div",{className:"flex_one align_right"},y.a.createElement(S["d"],{type:"outline",className:"right_margin",onClick:this.onApplyBatchUserActionToAll},L.t("Apply to All Users")),y.a.createElement(S["d"],{type:"outline",onClick:this.onApplyBatchUserActionToUnmapped},L.t("Apply to Unmapped Users")))),this.renderUserMappingForm(),this.maybeRenderIgnoreApiUsersInput()))}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var r=JSON.stringify(this.props.initialChannelMappings);var a=this.state.userMappings.map(function(e){return y.a.createElement("div",{key:e.id},y.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),y.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var n=this.props.initialChannelMappings.map(function(e){return y.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});var i="hipchat"!==this.props.service?null:y.a.createElement("input",{type:"hidden",value:this.state.ignoreApiUsers?1:0,name:"ignore_api_user"});return y.a.createElement("div",null,y.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),y.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),a,n,y.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),y.a.createElement("input",{type:"hidden",value:r,name:"channel_list"}),i)}},{key:"render",value:function e(){return y.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},this.renderUserImportMappingForm(),y.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),y.a.createElement(S["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(_["PureComponent"]);H.displayName="ServiceImportMappingForm";H.defaultProps=U;function W(e){var t=Object(R["getAllMembers"])(e);return{allMembers:t}}t["a"]=Object(O["connect"])(W)(H)},22573:function(e,t,r){"use strict";var a=r(1476);var n=r(1473);r.d(t,"a",function(){return a["a"]})},22574:function(e,t,r){"use strict";t["a"]=s;var a=r(12159);var n=r.n(a);var i=r(1083);function s(e){if(e.member)return n.a.createElement(i["a"],{item:e});return e.label}},22575:function(e,t,r){"use strict";t["a"]=s;var a=r(12159);var n=r.n(a);var i=r(1084);function s(e){if(e.member)return n.a.createElement(i["a"],{item:e});return e.label}},22576:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22577);var n=r(42);Object(n["a"])("interop.mountThreadDragOverlay",a["a"]);Object(n["a"])("interop.unmountThreadDragOverlay",a["b"])},22577:function(e,t,r){"use strict";t["a"]=d;t["b"]=v;var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(22578);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var a=Object(l["c"])(e);Object(c["a"])(n.a.createElement(o["Provider"],{store:a},n.a.createElement(u["a"],r)),t)}function v(e){s.a.unmountComponentAtNode(e)}},22578:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(12);var _=r(5);var y=r(8);var O=r.n(y);var k=r(20481);var j=r.n(k);var C=new _["b"]("threads");var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={spriteLoaded:false};return r}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var r=new Image;this.spritePromise=new Promise(function(e){r.onload=function(){e()};r.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.useNightIllustration;var n=this.state.spriteLoaded;if(!r)return null;var i=false;if(Object(d["isBoolean"])(a))i=a;else{var s=new Date;var o=s.getHours();i=o>=20||o<8}var c=O()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!i});var l="";n&&(l=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),h.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var u=C.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');return h.a.createElement("div",{className:c},h.a.createElement("div",{className:"p-thread_drag_overlay__info"},h.a.createElement("div",{className:"p-thread_drag_overlay__anim"},l),h.a.createElement("div",{className:"p-thread_drag_overlay__title"},C.t("Upload to thread")),h.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},u)))}}]);return t}(p["PureComponent"]);E.displayName="DragOverlay";E.defaultProps={featureFileThreads:true,useNightIllustration:void 0};function S(e){return{featureFileThreads:Object(g["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(b["connect"])(S)(E)},22579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22580);var n=r(42);Object(n["a"])("interop.mountThreadsFlexpane",a["a"])},22580:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22581);var l=function e(t,r){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var a=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["a"],null)),r)};t["a"]=l},22581:function(e,t,r){"use strict";var a=r(22582);t["a"]=a["a"]},22582:function(e,t,r){"use strict";var a=r(1395);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(3);var _=r.n(g);var y=r(333);var O=r(1);var k=r.n(O);var j=r(3277);var C=r(3273);var E=r(21751);var S=r(21951);var w=r(21806);var I=r(21783);var T=r(22968);var N=r(5);var R=r(21832);var A=r(22583);var M=r(3254);var P=r(156);var x=r(23044);var D=r(90);var F=new N["b"]("threads");var L={threadTs:_.a.string,channelId:_.a.string,subscribed:_.a.bool,lastRead:_.a.string,timestamps:_.a.arrayOf(_.a.string),reachedStart:_.a.bool,reachedEnd:_.a.bool,startTs:_.a.string,highlightTs:_.a.string,requestHistory:_.a.func,clearHighlight:_.a.func,markThread:_.a.func,useGlobalNav:_.a.bool,windowFocused:_.a.bool};var B={threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,timestamps:[],reachedStart:false,reachedEnd:false,startTs:void 0,highlightTs:void 0,requestHistory:O["noop"],clearHighlight:O["noop"],markThread:O["noop"],useGlobalNav:false,windowFocused:false};var U=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.requestHistory=r.requestHistory.bind(r);r.renderRow=r.renderRow.bind(r);r.renderList=r.renderList.bind(r);r.keys=null;r.rows=null;return r}u()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads()}},{key:"componentDidUpdate",value:function e(){this.checkUnreads()}},{key:"checkUnreads",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.timestamps;if(!n||!s||Object(O["isEmpty"])(o))return;if(!Object(D["e"])())return;var c=Object(O["max"])(o);(!i||i<c)&&this.props.markThread({channelId:r,ts:a,lastRead:c})}},{key:"requestHistory",value:function e(t){var r=t.oldest,a=t.latest;var n=this.props,i=n.channelId,s=n.threadTs,e=n.requestHistory;return e({oldest:r,latest:a,channelId:i,threadTs:s})}},{key:"renderRow",value:function e(t){var r=this.props,a=r.channelId,n=r.highlightTs,i=r.threadTs;var s=this.rows[t];if(!s)return null;switch(s.type){case"separator":return m.a.createElement("hr",null);case"message":return m.a.createElement(P["a"],{channelId:a,ts:s.ts,previousMessageTs:s.prevTs,fadeAwayHighlight:s.ts===n,doneHighlighting:this.props.clearHighlight});case"input":return m.a.createElement(x["a"],{className:"p-threads_flexpane__input",channelId:a,threadTs:i,placeholder:F.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true});default:return null}}},{key:"renderList",value:function e(t){var r=this;var a=this.props,n=a.threadTs,i=a.startTs,o=a.reachedStart,c=a.timestamps;var l=[];var u=[];if(o||i===n){l.push(n);u.push({type:"message",ts:n});l.push("separator");u.push({type:"separator"})}c.forEach(function(e,t){l.push(e);u.push({type:"message",ts:e,prevTs:c[t-1]})});l.push("input");u.push({type:"input"});this.keys=l;this.rows=u;return m.a.createElement("div",{style:{flex:1}},m.a.createElement(y["a"],null,function(e){var a=e.width,n=e.height;return m.a.createElement(M["a"],s()({},t,{keys:l,width:a,height:n,rowRenderer:r.renderRow}))}))}},{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.threadTs,n=t.timestamps,i=t.startTs,s=t.reachedStart,o=t.reachedEnd;if(!r||!a)return null;return m.a.createElement("div",{className:"p-threads_flexpane",style:{height:"100%",display:"flex",flexDirection:"column"}},!this.props.useGlobalNav&&m.a.createElement(R["a"],null,"Thread"),m.a.createElement(A["a"],{timestamps:n,listRenderer:this.renderList,startTs:i,requestHistory:this.requestHistory,reachedStart:s,reachedEnd:o}))}}]);return t}(f["PureComponent"]);U.displayName="ThreadsFlexpane";U.defaultProps=B;var q=function e(t,r){var a=Object(E["getFlexpaneState"])(t),i=a.flexExtra;var s=(i||"").split("-"),o=n()(s,2),c=o[0],l=o[1];var u=r.threadTs||l;var d=r.channelId||c;var v=Object(S["getStartTs"])(t)||u;var p=Object(S["getHighlight"])(t),h=p.highlightTs,f=p.highlightKey;var m=Object(I["b"])(d,u);var b=Object(C["getTimestampsByChannelId"])(t,m,v),g=b.timestamps,_=b.reachedStart,y=b.reachedEnd;var O=Object(w["getSubscriptionState"])(t,{channelId:d,ts:u});return{threadTs:u,channelId:d,subscribed:O&&O.subscribed,lastRead:O&&O.lastRead,timestamps:g,reachedStart:_,reachedEnd:y,startTs:v,highlightTs:h,highlightKey:f,useGlobalNav:Object(T["b"])(t),windowFocused:Object(j["isWindowFocused"])(t)}};t["a"]=Object(b["connect"])(q,{requestHistory:S["requestReplies"],clearHighlight:S["clearHighlight"],markThread:w["markThread"]})(U)},22583:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(1571);var g=250;var _={timestamps:h.a.arrayOf(h.a.string).isRequired,listRenderer:h.a.func.isRequired,startTs:h.a.string,requestHistory:h.a.func,reachedStart:h.a.bool,reachedEnd:h.a.bool,layout:h.a.object};var y={startTs:void 0,requestHistory:f["noop"],reachedStart:true,reachedEnd:true,layout:void 0};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onScroll=r.onScroll.bind(r);r.setListRef=r.setListRef.bind(r);r.loadAround=r.loadAround.bind(r);r.loadPre=r.loadPre.bind(r);r.loadPost=r.loadPost.bind(r);r.list=null;r.layout=e.layout||new b["a"];r.layout.setAnchor(e.startTs||false);r.layout.setStickToBottom(e.reachedEnd);r.state={isLoading:false};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");t.startTs!==this.props.startTs&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true,animate:true}):this.layout.setAnchor(t.startTs));this.layout.setStickToBottom(t.reachedEnd)}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false)}},{key:"onScroll",value:function e(){this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.reachedStart,n=r.reachedEnd,i=r.timestamps,s=r.startTs;if(n)return this.loadPre();if(a)return this.loadPost();var o=Object(f["first"])(i)||s;var c=Object(f["last"])(i)||s;var l=this.props.requestHistory({latest:o,oldest:c});if(l){l.finally(function(){return Promise.delay(g)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return l}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.reachedStart,n=r.timestamps,i=r.startTs;if(a)return false;var s=Object(f["first"])(n)||i;var o=this.props.requestHistory({latest:s});if(o){o.finally(function(){return Promise.delay(g)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return o}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var r=this.props,a=r.reachedEnd,n=r.timestamps,i=r.startTs;if(a)return false;this.isLoading=true;var s=Object(f["last"])(n)||i;var o=this.props.requestHistory({oldest:s});if(o){o.finally(function(){return Promise.delay(g)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return o}},{key:"render",value:function e(){var t=this.props,r=t.reachedStart,a=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:r,reachedEnd:a,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(d["PureComponent"]);O.displayName="MessageList";t["a"]=O;O.defaultProps=y},22584:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22585);var n=r(42);Object(n["a"])("interop.mountUserGroupsFlexpane",a["a"])},22585:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(22005);var l=function e(t,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var a=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:a},n.a.createElement(c["f"],null)),r)};t["a"]=l},22586:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(12);var O=r(21802);var k=r(195);var j=r(410);var C=r(411);var E=r(5);var S=r(22292);var w=r(22293);var I=new E["b"]("user_groups");var T={detailsFormValues:m.a.shape({name:m.a.string,handle:m.a.string,purpose:m.a.string,channels:m.a.array}),validateHandle:m.a.func.isRequired,validateName:m.a.func.isRequired,setFormErrors:m.a.func.isRequired,featureSonicUserGroups:m.a.bool.isRequired,onRef:m.a.func.isRequired,errors:m.a.shape({nameError:m.a.string,handleError:m.a.string,purposeError:m.a.string}),submitError:m.a.string,setRequiredFieldsEmpty:m.a.func.isRequired};var N={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},closeModal:g["noop"],errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var R=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var a=!r.state.name||!r.state.handle;r.props.setRequiredFieldsEmpty(a);Object(g["bindAll"])(r,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","onSubmit","setUserGroupFormRef","maybeRenderApiError"]);return r}c()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var r=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(r)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){this.setState(function(){return{name:t}});var r=this.props.validateName({value:t,oldValue:this.props.detailsFormValues.name});this.props.setFormErrors(r)}},{key:"onHandleChange",value:function e(t){var r=t.replace(/ /g,"");this.setState(function(){return{handle:r}});if(" "!==t.charAt(0)){var a=this.props.validateHandle({value:r,oldValue:this.props.detailsFormValues.handle});this.props.setFormErrors(a)}}},{key:"onPurposeChange",value:function e(t){this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){this.setState(function(){return{channels:t}})}},{key:"onSubmit",value:function e(){var t=this.defaultChannelsRef.onGetSelectedDefaultChannels();this.onChannelsUpdate(t);return n()({},this.state,{channels:t})}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"hasValidationErrors",value:function e(t){return Object(g["find"])(t,function(e){return e.length})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=I.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return h.a.createElement(O["a"],{level:"error",type:"inline"},t)}return false}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=I.t("Name");var a=I.t("e.g. Accounts Team");return h.a.createElement("div",null,h.a.createElement(k["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:r},h.a.createElement(j["a"],{name:"user_group_name",id:"name_input",placeholder:a,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(r){return t.onNameChange(r)},errorText:this.props.errors.nameError,isRequired:true})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=I.t("e.g. accounts-team");var a=I.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=I.t("Handle");return h.a.createElement("div",null,h.a.createElement(k["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},h.a.createElement(j["a"],{name:"user_group_handle",id:"handle_input",placeholder:r,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(r){return t.onHandleChange(r)},errorText:this.props.errors.handleError,hintText:a,isRequired:true,icon:"mentions"})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=140;var a=I.t("Purpose");var n=I.t("What is this group about?");return h.a.createElement("div",null,h.a.createElement(k["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:a,optional:true},h.a.createElement(C["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(r){return t.onPurposeChange(r)},errorText:this.props.errors.purposeError,hintText:n,maxCharacterLimit:r})))}},{key:"renderDefaultChannelSelect",value:function e(){var t=this;return h.a.createElement(w["a"],{selectedChannels:this.state.channels,onRef:function e(r){return t.setUserGroupFormRef(r)}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement("div",null,this.maybeRenderApiError(),h.a.createElement("form",null,this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(p["PureComponent"]);R.displayName="UserGroupEditCreateForm";R.defaultProps=N;var A=function e(t){return{validateHandle:function e(r){return Object(S["b"])(t,r)},validateName:function e(r){return Object(S["c"])(t,r)},featureSonicUserGroups:Object(y["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};t["a"]=Object(b["connect"])(A)(R)},22587:function(e,t,r){"use strict";r.d(t,"b",function(){return c});t["a"]=l;var a=r(21697);var n=r(21698);var i=r(23039);var s=r(21952);var o=r(1095);var c=80;function l(e,t){var r=t.value,l=t.oldValue,u=void 0===l?r:l;var d=!r.trim();var v=/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(r.trim());var p=/^[-|_]+$/.test(r);var h=/[A-Z]/.test(r);var f=false;var m=false;if(r!==u&&e){f=Object(a["getChannelByName"])(e,r)||Object(n["memberExistsWithName"])(e,r)||!Object(s["h"])(Object(i["getUserGroupByHandle"])(e,r));m=Object(o["a"])(r)>c}return{hasHandleRequiredWarning:d,hasMaxLengthWarning:m,hasSpecialsWarning:v,hasPunctuationWarning:p,hasLowercaseWarning:h,hasHandleTakenWarning:f}}},22588:function(e,t,r){"use strict";r.d(t,"b",function(){return s});t["a"]=o;var a=r(23039);var n=r(21952);var i=r(1095);var s=80;function o(e,t){var r=t.value,o=t.oldValue,c=void 0===o?r:o;var l=!r.trim();var u=false;var d=false;if(r!==c){if(e){var v=Object(a["getUserGroupByName"])(e,r);u=!Object(n["h"])(v)}d=Object(i["a"])(r)>s}return{hasNameRequiredWarning:l,hasMaxLengthWarning:d,hasNameTakenWarning:u}}},22589:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(12);var _=r(21697);var y=r(21698);var O=r(23039);var k=r(427);var j=r(3226);var C=r(21952);var E=r(907);var S=r(3203);var w=r(5);var I=r(271);var T=new w["b"]("user_groups");var N={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var R={action:h.a.oneOf(Object(m["values"])(N)).isRequired,onSubmit:h.a.func.isRequired,label:h.a.string,groupName:h.a.string,featureSonicUserGroups:h.a.bool};var A={label:"",groupName:"",featureSonicUserGroups:false};var M=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);return r}s()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.action,a=t.groupName;switch(r){case"disable_group":return T.t("Deactivate {groupName}?",{groupName:a});case"remove_member":return T.t("Remove from group?");case"remove_channel":return T.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return T.t("Deactivate");case"remove_member":case"remove_channel":return T.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,r=t.groupName,a=t.label,n=t.action;switch(n){case"disable_group":return T.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:r});case"remove_member":return T.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:a,groupName:r});case"remove_channel":return T.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:a,groupName:r});default:}return""}},{key:"render",value:function e(){return v.a.createElement(I["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},v.a.createElement("p",null,this.getDialogBody()))}}]);return t}(d["Component"]);M.displayName="UserGroupConfirmationDialog";M.defaultProps=A;var P=function e(t,r){var a=r.id,n=r.groupId;var i="";var s=Object(O["getUserGroupById"])(t,n);if(Object(j["a"])(a)){var o=Object(_["getChannelById"])(t,a);i=Object(E["getDisplayName"])(o)}else if(Object(k["a"])(a)){var c=Object(y["getMemberById"])(t,a);i=Object(S["l"])(c)}return{groupName:Object(C["e"])(s),label:i,featureSonicUserGroups:Object(g["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};t["a"]=Object(f["connect"])(P)(M)},22590:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(22903);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(23039);var O=r(21751);var k=r(12);var j=r(21705);var C=r(21952);var E=r(5);var S=r(1);var w=r.n(S);var I=r(266);var T=r(22005);var N=r(22201);var R={groupId:g.a.string.isRequired,isActive:g.a.bool.isRequired,isAutoGenerated:g.a.bool.isRequired,isDetailsView:g.a.bool,featureSonicUserGroups:g.a.bool,onEnableUserGroup:g.a.func,onDisableUserGroup:g.a.func,openModal:g.a.func,canEditUserGroups:g.a.func,canCreateAndDeleteUserGroups:g.a.func,menuProps:g.a.object};var A={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:S["noop"],onDisableUserGroup:S["noop"],canEditUserGroups:S["noop"],canCreateAndDeleteUserGroups:S["noop"],openModal:S["noop"],menuProps:{}};var M=new E["b"]("user_groups");var P=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["bindAll"])(r,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return r}u()(t,[{key:"onEnableUserGroup",value:function e(){return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})})}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,r=t.isAutoGenerated,a=t.isDetailsView;if(r&&a)return null;var n=[];a||r||n.push({key:"menu-edit-members",label:M.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:M.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var r=[];if(this.userGroupIsEditable()){var a=this.getEditMenuItems();a&&r.push.apply(r,s()(a))}this.canEnableUserGroup()?r.push({key:"menu-enable",label:M.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&r.push({key:"menu-disable",label:M.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return r}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var r=t.action,a=t.onSubmit;var n=this.props.groupId;return m.a.createElement(T["b"],{groupId:n,action:r,onSubmit:a})}},{key:"renderEditDialog",value:function e(t){return m.a.createElement(N["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return m.a.createElement(T["e"],{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return m.a.createElement(I["e"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return m.a.createElement(I["b"],e)}))}}]);return t}(f["PureComponent"]);P.displayName="UserGroupContextMenu";P.defaultProps=A;var x=function e(t,r){var a=r.groupId,n=r.isDetailsView;var i=Object(y["getUserGroupById"])(t,a);var s=Object(C["i"])(i);var o=Object(C["g"])(i);var c=Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(C["b"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(C["a"])(t)},featureSonicUserGroups:c}};var D=function e(t,r){var a=r.groupId;return{openModal:function e(){return t(j["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(y["fetchAndUpsertUserGroupMembers"])({groupId:a}))},onDisableUserGroup:function e(){t(Object(y["disableAndUpdateUserGroup"])({groupId:a})).then(function(){return t(Object(O["setFlexState"])({flexName:"groups",flexExtra:""}))})},onEnableUserGroup:function e(){t(Object(y["enableAndUpdateUserGroup"])({groupId:a})).then(function(){return t(Object(O["setFlexState"])({flexName:"groups",flexExtra:a}))})}}};t["a"]=Object(_["connect"])(x,D)(P)},22591:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(266);var y=r(3184);var O=r(37);var k=r(20477);var j=r.n(k);var C={renderMenu:m.a.func.isRequired,className:m.a.string,children:m.a.node,isContextButtonVisible:m.a.bool,onClick:m.a.func.isRequired,customProps:m.a.object};var E={className:"",children:"",isContextButtonVisible:false,customProps:{}};var S=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"renderContextButton",value:function e(){var t=this.props,r=t.isContextButtonVisible,a=t.renderMenu;if(!r)return null;return h.a.createElement("div",{className:"p-user_group_base_row__list_item_option"},h.a.createElement(_["d"],{renderMenu:a,position:"bottom-right",offsetY:-8},h.a.createElement(y["d"],{type:"outline",size:"small",className:"p-user_group_base_row__list_btn"},h.a.createElement(O["b"],{type:"ellipsis"}))))}},{key:"render",value:function e(){var t=this.props,r=t.className,a=t.onClick,i=t.customProps,s=t.children;var o=g()("p-user_group_base_row__list_item",r);return h.a.createElement("div",{className:"p-user_group_base_row"},h.a.createElement(y["c"],n()({onClick:a,className:o},i),s),this.renderContextButton())}}]);return t}(p["PureComponent"]);S.displayName="UserGroupBaseRow";S.defaultProps=E;t["a"]=S},22592:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(8);var _=r.n(g);var y=r(5);var O=r(43);var k=r(23039);var j=r(12);var C=r(2111);var E=r(271);var S=r(21727);var w=r(22593);var I=r(20519);var T=r.n(I);var N=new y["b"]("user_groups");var R={featureSonicUserGroups:h.a.bool,groupId:h.a.string.isRequired,bulkUpsertUserGroupMembers:h.a.func.isRequired,enqueueToast:h.a.func.isRequired};var A={featureSonicUserGroups:false,userGroupMemberIds:[]};var M=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={searchResultMode:false};Object(m["bindAll"])(r,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef"]);r.userGroupMemberManagementRef=null;return r}s()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var r=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(r).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:v.a.createElement(C["a"],null,N.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(O["error"])("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=N.t("Edit members");var r=_()("p-user_group_member_management__dialog_body",{"p-user_group_member_management__dialog_body--results-mode":this.state.searchResultMode});return v.a.createElement(E["a"],{showHeader:true,showGoButton:true,showFooter:!this.state.searchResultMode,bodyClassName:r,title:t,contentLabel:t,goButtonText:N.t("Save"),onGo:this.onSave,goOnEnterPressed:false},v.a.createElement(w["a"],{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onToggleSearchResultsMode:this.onToggleSearchResultsMode}))}}]);return t}(d["PureComponent"]);M.displayName="UserGroupMemberManagementDialog";M.defaultProps=A;var P=function e(t){return{featureSonicUserGroups:Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var x=function e(t,r){var a=r.groupId;return{bulkUpsertUserGroupMembers:function e(r){return t(Object(k["bulkUpsertUserGroupMembers"])({groupId:a,users:r}))},enqueueToast:function e(){return t(S["enqueueToast"].apply(void 0,arguments))}}};t["a"]=Object(f["connect"])(P,x)(M)},22593:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(374);var s=r.n(i);var o=r(22903);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(3);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(9);var C=r(333);var E=r(1);var S=r.n(E);var w=r(5);var I=r(23039);var T=r(12);var N=r(3270);var R=r(3179);var A=r(3203);var M=r(21802);var P=r(3184);var x=r(195);var D=r(21750);var F=r(22922);var L=r(3254);var B=r(69);var U=r(140);var q=r(20519);var H=r.n(q);var W=new w["b"]("user_groups");var G={featureSonicUserGroups:y.a.bool,userGroupMemberIds:y.a.array,teamId:y.a.string,onToggleSearchResultsMode:y.a.func};var V={featureSonicUserGroups:false,userGroupMemberIds:[],teamId:void 0,onToggleSearchResultsMode:E["noop"]};var z=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:false,resultFocusIndex:-1,displayNoMemberError:false};Object(E["bindAll"])(r,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","handleUpKey","handleDownKey","handleTabKey","handleEnterKey"]);r.list=null;r.addedMembersTitle=null;r.ADDED_MEMBERS_TITLE_HEIGHT=22;return r}v()(t,[{key:"componentDidMount",value:function e(){Object(E["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.bindKeyCommands()}},{key:"componentDidUpdate",value:function e(t,r){Object(E["isEqual"])(this.state.searchResults,r.searchResults)&&Object(E["isEqual"])(this.state.searchQuery,r.searchQuery)||!this.list||this.list.scrollToOffset(0);r.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(E["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function e(t){this.state.displayNoMemberError&&this.setDisplayNoMemberError(false);var r=t&&t.target&&t.target.value;if(r){this.getMembers(r);this.setSearchQuery(r);this.enterSearchResultsMode()}else this.onClearSearch()}},{key:"onClearSearch",value:function e(){Object(E["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.setSearchQuery("");this.exitSearchResultsMode();this.setDisplayNoMemberError(false)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function e(t){this.setState(function(){return{searchQuery:t}})}},{key:"setSearchResults",value:function e(t){this.setState(function(){return{searchResults:t}})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setRemoveMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:Object(E["without"])(e.updatedGroupMembers,t)}})}},{key:"setAddMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:[t].concat(c()(e.updatedGroupMembers))}},this.onClearSearch)}},{key:"setResultFocusIndex",value:function e(t){this.setState(function(){return{resultFocusIndex:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setAddedMembersTitleRef",value:function e(t){this.addedMembersTitle=t}},{key:"getMembers",value:function e(t){var r=this;this.setLoading(true);return Object(R["a"])(t,{members:{include_self:true,only_local_team:true,include_slackbot:false,include_bots:false,include_deleted:true},sort:{allow_empty_query:true}}).then(function(e){var t=Object(E["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.model_ob;if(!t)return false;if(Object(A["K"])(t))return false;if(t.enterprise_user){var a=t.enterprise_user.teams;if(!a)return false;if(!Object(E["includes"])(a,r.props.teamId))return false}return true});var a=t.map(function(e){return e.model_ob.id});r.setSearchResults(a);r.setLoading(false)})}},{key:"getRowProps",value:function e(t){var r=this;if(!this.props.featureSonicUserGroups)return{};var a=this.state.updatedGroupMembers;if(Object(E["includes"])(a,t))return{onClick:function e(){return r.setRemoveMember(t)},text:W.t("Remove")};return{onClick:function e(){return r.setAddMember(t)},text:W.t("Add")}}},{key:"isSearchResultMode",value:function e(){return this.state.resultFocusIndex>-1}},{key:"handleUpKey",value:function e(t){t.preventDefault();var r=this.state.resultFocusIndex;r>0&&this.setResultFocusIndex(r-1)}},{key:"handleDownKey",value:function e(t){t.preventDefault();var r=this.state,a=r.resultFocusIndex,n=r.searchResults;this.isSearchResultMode()&&a<n.length-1&&this.setResultFocusIndex(a+1)}},{key:"handleTabKey",value:function e(t){if(!this.isSearchResultMode())return;t.preventDefault();var r=this.state,a=r.resultFocusIndex,n=r.searchResults;a<n.length&&this.setResultFocusIndex((a+1)%n.length)}},{key:"handleEnterKey",value:function e(t){if(this.state.resultFocusIndex<0)return;t.preventDefault();var r=this.state,a=r.searchResults,n=r.updatedGroupMembers,i=r.resultFocusIndex;var s=a[i];this.setSearchQuery("");if(Object(E["includes"])(n,s)){this.exitSearchResultsMode();this.setRemoveMember(s)}else this.setAddMember(s)}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["tab"],handler:this.handleTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new U["a"]);this.keyCommands.bindAll(t)}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"doDisplayGroupMembersList",value:function e(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"enterSearchResultsMode",value:function e(){this.isSearchResultMode()||this.props.onToggleSearchResultsMode();this.setResultFocusIndex(0)}},{key:"exitSearchResultsMode",value:function e(){this.isSearchResultMode()&&this.props.onToggleSearchResultsMode();this.setResultFocusIndex(-1)}},{key:"maybeRenderAddedMembersTitle",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.doDisplayGroupMembersList())return null;return g.a.createElement("div",{className:"p-user_group_member_management__list_title",ref:this.setAddedMembersTitleRef},W.t("Added members"))}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.state.displayNoMemberError)return null;return g.a.createElement(M["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150"},W.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return g.a.createElement("div",{className:"full_height full_width display_flex align_items_center"},g.a.createElement(B["a"],{size:"medium",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function e(t){var r=t.text,a=s()(t,["text"]);return g.a.createElement("div",{className:"p-user_group_member_management__row_button"},g.a.createElement(P["d"],n()({size:"small",type:"outline"},a),r))}},{key:"renderMemberRow",value:function e(t){var r=t.id,a=t.index;var i=this.getRowProps(r),o=i.onClick,c=s()(i,["onClick"]);var l=k()("p-user_group_member_management__row_container",{"p-user_group_member_management__row_container--active":a===this.state.resultFocusIndex});return g.a.createElement("div",{className:l},g.a.createElement(P["c"],{className:"p-user_group_member_management__row",onClick:o},g.a.createElement("div",{className:"p-user_group_member_management__row_member"},g.a.createElement(D["a"],{id:r,size:"medium",showTooltip:false}))),this.renderRowButton(n()({onClick:o},c)))}},{key:"renderMemberList",value:function e(){var t=this.state,r=t.searchResults,a=t.loading,n=t.updatedGroupMembers;if(a)return this.renderLoadingSpinner();if(this.doDisplayGroupMembersList())return this.renderList({items:n});if(Object(E["isEmpty"])(r))return this.renderEmptyList();return this.renderList({items:r})}},{key:"renderList",value:function e(t){var r=this;var a=t.items;var n=[].concat(a);var i=this.doDisplayGroupMembersList();var s=this.state.resultFocusIndex>-1?n[this.state.resultFocusIndex]:n[0];return g.a.createElement(C["a"],null,function(e){var t=e.width,o=e.height;return g.a.createElement(L["a"],{width:t,height:i?o-r.ADDED_MEMBERS_TITLE_HEIGHT:o,keys:n,ref:r.setListRef,rowRenderer:function e(t){return r.renderMemberRow({id:a[t],index:t})},itemToScroll:s})})}},{key:"renderEmptyList",value:function e(){if(!this.props.featureSonicUserGroups)return null;return g.a.createElement("div",{className:"p-user_group_member_management__empty"},g.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},W.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),g.a.createElement(P["d"],{type:"outline",size:"small",onClick:this.onClearSearch},W.t("Clear Search")))}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=k()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return g.a.createElement("div",{className:t,"data-qa-user-group-member-management-search-container":true},g.a.createElement(x["a"],{className:"bold",text:W.t("Add members"),"data-qa-user-group-member-management-search-label":true},g.a.createElement(F["a"],{placeholder:W.t("Search by name"),icon:"search",autoFocus:true,onChange:this.onSearchInputChange,value:this.state.searchQuery})))}},{key:"render",value:function e(){var t=k()("p-user_group_member_management__list",{"p-user_group_member_management__list--results-mode":this.isSearchResultMode()});return g.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":true},this.maybeRenderNoMembersAlert(),this.renderSearch(),g.a.createElement("div",{className:t},this.maybeRenderAddedMembersTitle(),this.renderMemberList()))}}]);return t}(b["PureComponent"]);z.displayName="UserGroupMemberManagement";z.defaultProps=V;var K=function e(t,r){var a=r.groupId;return{featureSonicUserGroups:Object(T["isFeatureEnabled"])(t,"feature_sonic_user_groups"),userGroupMemberIds:Object(I["getUserGroupMembers"])(t,{groupId:a})||[],teamId:Object(N["getTeamId"])(t)}};t["a"]=Object(j["connect"])(K,null,null,{withRef:true})(z)},22594:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(21751);var _=r(12);var y=r(23039);var O=r(21698);var k=r(22595);var j=r(22290);var C=r(20318);var E=r.n(C);var S={groupId:h.a.string,featureSonicUserGroups:h.a.bool,userGroupMembers:h.a.array};var w={groupId:null,featureSonicUserGroups:false,openModal:m["noop"],userGroupMembers:[],openUserGroupList:m["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={newMembers:[],timeoutId:null};return r}s()(t,[{key:"componentDidUpdate",value:function e(t){var r=this;var a=[];t.userGroupMembers.length&&!Object(m["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(a=Object(m["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(a.length){this.setState(function(){return{newMembers:a}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){r.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var r=this.state.newMembers;if(t)return v.a.createElement(j["a"],{groupId:t,newMembers:r});return v.a.createElement(k["a"],null)}}]);return t}(d["PureComponent"]);I.displayName="UserGroupsFlexpane";I.defaultProps=w;var T=function e(t){var r=Object(g["getFlexpaneState"])(t),a=r.flexExtra;var n=Object(y["getUserGroupMembers"])(t,{groupId:a});var i=Object(m["map"])(n,function(e){return Object(O["getMemberById"])(t,e)});return{groupId:a,userGroupMembers:i,featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};t["a"]=Object(f["connect"])(T)(I)},22595:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(9);var y=r(333);var O=r(1);var k=r.n(O);var j=r(12);var C=r(23039);var E=r(21712);var S=r(21705);var w=r(21701);var I=r(5);var T=r(22922);var N=r(3254);var R=r(3184);var A=r(21952);var M=r(473);var P=r(22596);var x=r(22201);var D=r(22291);var F=r(20315);var L=r.n(F);var B={userGroups:m.a.object,featureSonicUserGroups:m.a.bool,onLoad:m.a.func,openGroupDetails:m.a.func,openModal:m.a.func};var U={userGroups:{},featureSonicUserGroups:false,onLoad:O["noop"],openGroupDetails:O["noop"],openModal:O["noop"]};var q=new I["b"]("user_groups");var H=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={searchTerm:""};Object(O["bindAll"])(r,["onSearchInputChange","onCreateUserGroup","onClearSearch","renderRow"]);return r}c()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad()}},{key:"onSearchInputChange",value:function e(t){var r=t.target.value;this.setState(function(){return{searchTerm:r}})}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"getSortedResults",value:function e(t){return Object(O["sortBy"])(t,function(e){var t=Object(A["e"])(e);return t.toLocaleLowerCase()})}},{key:"getSearchResults",value:function e(t,r){var a=this;if(!r)return Object.values(t);return Object(O["filter"])(t,function(e){if(!e)return false;var t=Object(A["e"])(e);var n=Object(A["d"])(e)||"";var i=Object(A["c"])(e)||"";if(a.checkForMatch(t,r))return true;if(a.checkForMatch(n,r))return true;if(a.checkForMatch(i,r,false))return true;return false})}},{key:"getGroupedUserGroups",value:function e(t){var r=Object(O["groupBy"])(t,function(e){return Object(A["i"])(e)?"active":"inactive"});r.active=r.active||[];r.inactive=r.inactive||[];return r.active.concat(r.inactive)}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,a).includes(this.prepStringForSearch(r,a))}},{key:"prepStringForSearch",value:function e(t,r){if(!t)return"";var a=t.toLocaleLowerCase();r&&(a=a.replace(/[\s-_]/g,""));return Object(I["a"])(a)}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement("div",{className:"p-user_group_list__search"},h.a.createElement(T["a"],{value:this.state.searchTerm,onChange:this.onSearchInputChange,placeholder:q.t("Find by name..."),icon:"search"}))}},{key:"renderRow",value:function e(t){var r=this.keys[t];return h.a.createElement(P["a"],{id:r,setGroup:this.props.openGroupDetails})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=void 0;var r=void 0;if(Object(M["a"])()){t=q.t("Organize your team");r=h.a.createElement(R["d"],{type:"outline",size:"small",onClick:this.onCreateUserGroup},q.t("Create a User Group"))}else t=q.t("No user groups yet");return h.a.createElement("div",{className:"p-user_group_list__empty_list"},h.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),h.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},q.t("User groups make it easy to get the attention of many members at once.")),r)}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return h.a.createElement("div",{className:"p-user_group_list__empty_search_results"},h.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},q.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.state.searchTerm})),h.a.createElement(R["d"],{type:"outline",size:"small",onClick:this.onClearSearch},q.t("Clear Search")))}},{key:"renderGroupList",value:function e(){var t=this;var r=this.getSearchResults(this.props.userGroups,this.state.searchTerm);if(Object(O["isEmpty"])(r))return this.renderEmptySearchResults();var a=this.getSortedResults(r);var n=this.getGroupedUserGroups(a);this.keys=Object(O["map"])(n,"id");var i=59;return h.a.createElement("div",{className:"p-user_group_list__groups"},h.a.createElement(y["a"],null,function(e){var r=e.width,a=e.height;return h.a.createElement(N["a"],{width:r,height:a-i,keys:t.keys,rowRenderer:t.renderRow})}))}},{key:"renderCreateEditDialog",value:function e(){return h.a.createElement(x["a"],null)}},{key:"render",value:function e(){var t=this.props,r=t.featureSonicUserGroups,a=t.userGroups;if(!r)return null;var n=Object(O["isEmpty"])(a)?this.renderEmptyListView():h.a.createElement(h.a.Fragment,null,this.renderSearch(),this.renderGroupList());var i=g()("p-user_group__content",{"p-user_group__content--legacy":!Object(w["a"])()});return h.a.createElement(h.a.Fragment,null,h.a.createElement(D["b"],{view:D["a"].list}),h.a.createElement("div",{className:i},h.a.createElement("div",{className:"p-user_group_list"},n)))}}]);return t}(p["PureComponent"]);H.displayName="UserGroupList";H.defaultProps=U;var W=function e(t,r){var a=Object(C["getAllUserGroups"])(t);var i=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(j["isFeatureEnabled"])(t,"feature_sonic_user_groups_in_sonic");return n()({userGroups:a,featureSonicUserGroups:i,featureSonicUserGroupsInSonic:s},r)};var G=function e(t){return{onLoad:function e(){return t(Object(C["fetchAndUpsertUserGroups"])())},openGroupDetails:function e(r){return t(Object(E["e"])({groupId:r}))},openModal:function e(){return t(S["openModal"].apply(void 0,arguments))}}};t["a"]=Object(_["connect"])(W,G)(H)},22596:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(1);var O=r.n(y);var k=r(5);var j=r(23039);var C=r(12);var E=r(21952);var S=r(22005);var w=r(20501);var I=r.n(w);var T={id:m.a.string.isRequired,name:m.a.string.isRequired,description:m.a.string,isActive:m.a.bool,handle:m.a.string.isRequired,userCount:m.a.number.isRequired,setGroup:m.a.func.isRequired,canEditUserGroups:m.a.func.isRequired,canCreateAndDeleteUserGroups:m.a.func.isRequired,featureSonicUserGroups:m.a.bool};var N={description:null,isActive:false,canEditUserGroups:y["noop"],canCreateAndDeleteUserGroups:y["noop"],featureSonicUserGroups:false};var R=new k["b"]("user_groups");var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(y["bindAll"])(r,["onRowClick","renderContextMenu"]);return r}c()(t,[{key:"onRowClick",value:function e(){if(this.props.isActive){var t=this.props,r=t.setGroup,a=t.id;r(a)}}},{key:"renderName",value:function e(){var t=this.props,r=t.name,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=_()("black",{sk_dark_gray:!a});var s=a?r:R.t("{name} (Deactivated)",{name:r});return h.a.createElement("div",{className:i},s)}},{key:"renderDescription",value:function e(){var t=this.props,r=t.description,a=t.isActive;if(!r)return null;var n=_()("overflow_ellipsis",{sk_dark_gray:!a});return h.a.createElement("div",{className:n},r)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return h.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return h.a.createElement(S["c"],{menuProps:t,groupId:this.props.id})}},{key:"render",value:function e(){var t=this.props,r=t.userCount,a=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=_()("p-user_group_row",{"p-user_group_row--inactive":!a});var s={onClick:this.onRowClick,renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups()};return h.a.createElement(S["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),h.a.createElement("span",{className:"p-user_group_row__count"},R.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:r})))}}]);return t}(p["PureComponent"]);A.displayName="UserGroupRow";A.defaultProps=N;var M=function e(t,r){var a=Object(j["getUserGroupById"])(t,r.id);return n()({},r,{name:Object(E["e"])(a),description:Object(E["c"])(a),handle:Object(E["d"])(a),userCount:Object(E["f"])(a),isActive:Object(E["i"])(a),canEditUserGroups:function e(){return Object(E["b"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(E["a"])(t)},featureSonicUserGroups:Object(C["isFeatureEnabled"])(t,"feature_sonic_user_groups")})};t["a"]=Object(b["connect"])(M)(A)},22597:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1036);var n=r(42);Object(n["a"])("interop.mpims",{convertToPrivateChannel:a["a"]})},22598:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22006);var n=r(42);Object(n["a"])("interop.openAppDialog",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},22599:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21965);var n=r(42);Object(n["a"])("interop.openAppManagementModal",a["a"])},22600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22007);var n=r(42);Object(n["a"])("interop.openAppPermissionDialog",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},22601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22602);var n=r(42);Object(n["a"])("interop.openAppRemoveDialog",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},22602:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21705);var u=r(21699);var d=r(21713);var v=r(91);var p=r(3203);var h=r(3261);var f=Object(u["b"])("Opens app remove dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.appUser,i=r.channelId,o=r.onConfirm,c=r.referringEventId,u=r.referringUiContext;var f=c;var m=u;var b=function e(t){var r,s;var o=n()({},d["n"].action,t);Object(v["b"])(d["h"].APP_CHANNEL_REMOVE_DIALOG,n()({contexts:(s={},n()(s,d["b"].ui_context,o),n()(s,d["b"].referring_ui_context,m),n()(s,d["b"].core,(r={},n()(r,d["c"].app_id,Object(p["c"])(a)),n()(r,d["c"].channel_id,i),r)),s)},d["b"].referring_event_id,f));f=d["h"].APP_CHANNEL_REMOVE_DIALOG;m=o};var g={appName:Object(p["l"])(a),channelId:i,onConfirm:function e(){b(d["m"].OK);return o()},onCancel:function e(){b(d["m"].CLOSE)}};var _=s.a.createElement(h["a"],g);e(Object(l["openModal"])({element:_}));b(d["m"].IMPRESSION)});f.propTypes={appUser:c.a.object.isRequired,channelId:c.a.string.isRequired,onClose:c.a.func,onConfirm:c.a.func.isRequired,referringEventId:c.a.string,referringUiContext:c.a.object};t["a"]=f},22603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22604);var n=r(42);Object(n["a"])("interop.openChannelNotificationSettingsDialog",function(e){return TS.redux.dispatch(Object(a["a"])(e))})},22604:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21705);var c=r(21699);var l=r(3234);var u=Object(c["b"])("Open channel notification settings dialog",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=n.a.createElement(l["a"],r);e(Object(o["openModal"])({element:a}))});u.propTypes={channelId:s.a.string.isRequired};t["a"]=u},22605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(54);Object(a["a"])("interop.prefs",{getHighlightWords:function e(){var t=TS.redux.getState();return Object(n["getUserHighlightWords"])(t)}})},22606:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21959);Object(a["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"]})},22607:function(e,t,r){"use strict";t["a"]=y;var a=r(22903);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(374);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(1593);var v=r(22008);var p=r(22010);var h=r(22608);var f=r(22609);var m=r(22011);var b=r(22009);var g=r(49);var _="TEST_TEAM_ID";function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.teamId,r=void 0===t?_:t,a=e.middlewares,i=void 0===a?v["a"]:a,o=e.customEnhancers,l=void 0===o?p["a"]:o,y=c()(e,["teamId","middlewares","customEnhancers"]);var O=Object(d["a"])(s()({teamId:r,middlewares:[b["b"]].concat(n()(i)),customEnhancers:[].concat(n()(l),[h["b"],f["b"]])},y));if(!u.a.get(O,"dispatch."+b["a"]))throw new Error("\n\t\t\tUnable to spy on dispatch in tests. You have likely added a redux\n\t\t\tstore enhancer that breaks tests. Please talk to @drew or @afong\n\t\t\tand we'll get this sorted out.\n\t\t");var k=O.dispatch[b["a"]];var j=k;var C=[];function E(e){C.push(e);for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return j.apply(void 0,[e].concat(r))}O.dispatch[b["a"]]=E;var S=s()({},O,{resetState:function e(){this.dispatch({type:h["a"]});this._initStore()},modifyState:function e(t){var r=this.getState();var a=t(u.a.cloneDeep(r));this.dispatch({type:f["a"],payload:a})},getActions:function e(){return C},resetActions:function e(){C=[]},flush:O[m["a"]],mockDispatch:function e(t){var r=t(k);if(!u.a.isFunction(r))throw new Error("\n\t\t\t\t\tmockDispatch expects a factory function that returns a\n\t\t\t\t\tdispatch function, not the dispatch function itself.\n\t\t\t\t");j=r},resetDispatch:function e(){j=k},reset:function e(){this.resetDispatch();this.resetState();this.resetActions()},_isTestStore:true});Object(g["d"])(r,S);return S}},22608:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="@SLACK_STORE_RESET_ACTION_TYPE";var n=function e(t){return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];function s(t,r){if(r.type===a)return e(void 0,r);for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return e.apply(void 0,[t,r].concat(i))}return t.apply(void 0,[s].concat(n))}};t["b"]=n},22609:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="@SLACK_TEST_ONLY_MODIFY_STATE";var n=function e(t){return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];function s(t,r){if(r&&r.type===a)return r.payload;for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return e.apply(void 0,[t,r].concat(i))}return t.apply(void 0,[s].concat(n))}};t["b"]=n},22610:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(12159);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(21699);var v=r(43);var p=r(21705);var h=r(22611);var f=r(22612);var m=r(1225);var b=r(480);var g=r(211);var _=Object(d["b"])("Takes N files and opens the file upload dialog",function(e,t,r){var a=r.files,s=r.threadTs;if(!a||!a.length){Object(v["error"])("No files passed to openFileUploadDialog");return}var o=a.filter(function(e){return Object(i["isString"])(e)||e.size<=g["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});var l=function t(){var i=O(s);var l=y(s);e(Object(p["openModal"])({element:c.a.createElement(f["a"],n()({},r,{files:o,initialText:l,initialBroadcast:i,fileSizeExceeded:o.length<a.length}))}))};if(o.length<a.length){1===a.length?e(Object(p["openModal"])({element:c.a.createElement(h["b"],{type:h["a"].SINGLE})})):o.length?e(Object(p["openModal"])({element:c.a.createElement(h["b"],{type:h["a"].MULTIPLE,proceedToUploadDialog:l})})):e(Object(p["openModal"])({element:c.a.createElement(h["b"],{type:h["a"].ALL})}));return}if(!o.length)return;l()});_.propTypes={files:u.a.array.isRequired,initialChannelId:u.a.string,threadTs:u.a.string,fromPaste:u.a.bool};function y(e){if(e&&Object(b["b"])()===e){var t=Object(b["h"])();t&&Object(b["c"])();return t}var r=Object(m["b"])();r&&Object(m["c"])("");return r}function O(e){if(!e||Object(b["b"])()!==e)return false;return Object(b["e"])()}t["a"]=_},22611:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var a=r(1);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(9);var c=r(3);var l=r.n(c);var u=r(1087);var d=r(5);var v=r(21764);var p=r(211);var h=r(12);var f=new d["b"]("file-upload");var m={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function b(e){var t=e.type,r=e.proceedToUploadDialog,n=e.featureFileThreads;if(!n)return null;var i=f.t("File too large");var o="";o=t===m.ALL?f.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):t===m.SINGLE?f.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])}):f.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(v["a"])(p["UPLOAD_FILE_SIZE_LIMIT_BYTES"])});var c=t===m.MULTIPLE?function(){Object(a["defer"])(function(){r()})}:a["noop"];return s.a.createElement(u["a"],{title:i,onGo:c},s.a.createElement("p",null,o))}b.displayName="FileUploadSizeAlert";b.defaultProps={type:m.SINGLE,proceedToUploadDialog:a["noop"],featureFileThreads:true};function g(e){return{featureFileThreads:Object(h["isFeatureEnabled"])(e,"feature_file_threads")}}t["b"]=Object(o["connect"])(g)(b)},22612:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(9);var y=r(8);var O=r.n(y);var k=r(12);var j=r(5);var C=r(139);var E=r(104);var S=r(235);var w=r(43);var I=r(21705);var T=r(277);var N=r(21868);var R=r(211);var A=r(1225);var M=r(480);var P=r(54);var x=r(1042);var D=r(22613);var F=r(3271);var L=r(21703);var B=r(335);var U=r(271);var q=r(3184);var H=r(410);var W=r(195);var G=r(1078);var V=r(283);var z=r(21932);var K=r(21933);var Q=r(21934);var Y=r(21935);var J=r(22614);var Z=r(20253);var X=r.n(Z);var $=new j["b"]("file-upload");var ee="file-upload-name";var te="file-upload-share-with";var re={files:g.a.array.isRequired,featureFileThreads:g.a.bool,selectedChannelId:g.a.string,setSelectedChannel:g.a.func,canPostInSelectedChannel:g.a.bool,closeModal:g.a.func,switchToChannel:g.a.func,getShareableChannelId:g.a.func,msgText:g.a.string,setMsgText:g.a.func,disallowedKeywordInMsgText:g.a.string,initialText:g.a.string,initialBroadcast:g.a.bool,retentionDuration:g.a.number,threadTs:g.a.string,overStorageLimit:g.a.bool,isStdPlan:g.a.bool,isPlusPlan:g.a.bool,isEnterprisePlan:g.a.bool,channelType:g.a.string,selectedChannelName:g.a.string,fromPaste:g.a.bool};var ae={featureFileThreads:true,selectedChannelId:null,setSelectedChannel:p["noop"],canPostInSelectedChannel:false,selectedChannelIsGeneral:false,closeModal:p["noop"],switchToChannel:p["noop"],getShareableChannelId:p["noop"],canPost:function e(){return false},msgText:"",setMsgText:p["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,overStorageLimit:false,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false};var ne=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onGo=r.onGo.bind(r);r.onCancel=r.onCancel.bind(r);r.onCancelAll=r.onCancelAll.bind(r);r.onCancelDiscard=r.onCancelDiscard.bind(r);r.closeDialog=r.closeDialog.bind(r);r.onTextChange=r.onTextChange.bind(r);r.onFileNameChange=r.onFileNameChange.bind(r);r.onShareWithChange=r.onShareWithChange.bind(r);r.onBroadcastChange=r.onBroadcastChange.bind(r);r.onEditCollapsedFileNameClick=r.onEditCollapsedFileNameClick.bind(r);r.setFileNameInputRef=r.setFileNameInputRef.bind(r);r.fileNameInput=null;r.initialText=r.props.initialText;r.state=n()({confirmClose:false,confirmCancelAll:false,submitting:false},r.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return r}c()(t,[{key:"componentDidMount",value:function e(){var t=this.props.files;var r=this.state||0,a=r.fileIndex;t&&this.maybeLoadImagePreview(t[a])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.msgText;var a=this.state,n=a.confirmClose,i=a.confirmCancelAll;if(!n&&r&&r.length>R["CONFIRM_DISCARD_TEXT_LENGTH"]){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||i?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var r=this.state,a=r.shareWith,n=r.fileName,i=r.fileIndex,s=r.confirmClose,o=r.broadcast;var c=this.props,l=c.selectedChannelId,u=c.msgText,d=c.threadTs;if(this.isGoDisabled())return false;if(s)return this.onCancel();this.initialText=null;var v=this.props,p=v.switchToChannel,h=v.files,f=v.getShareableChannelId;var m=h[i];var b=a?f({channelOrMemberId:l}):Promise.resolve(null);b.then(function(e){m.is_box||m.is_dropbox?Object(C["q"])({link:m.link,filename:m.name,title:n||t.initialFileName(m),channels:e,initial_comment:a?Object(E["a"])(u):null,is_box:m.is_box,is_dropbox:m.is_dropbox,thread_ts:e?d:null,broadcast:e&&d?o:null}):Object(C["q"])({file:m,filename:m.name,title:n||t.initialFileName(m),channels:e,initial_comment:a?Object(E["a"])(u):null,thread_ts:e?d:null,broadcast:e&&d?o:null});if(t.hasMoreFiles())t.goToNextFile();else{t.closeDialog();e&&!d&&p({id:e})}t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var r=t.text,a=t.overLimit;this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>R["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"onBroadcastChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{broadcast:!!r}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var r=this.props.files;var a=r[t];var n=a&&Object(p["includes"])(a.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(a),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.overStorageLimit,n=t.isStdPlan,i=t.isPlusPlan,s=t.isEnterprisePlan,o=t.files;var c=this.state.fileIndex;if(!r)return null;var l=o[c];if(!a||l.is_dropbox||l.is_box||l.is_external)return null;if(n)return $.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return m.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(i)return $.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,function(e){var t=e.text;return m.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)});if(s)return $.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return m.a.createElement("a",{href:"/help/requests/new",target:"_blank"},t)});return $.rt("Your workspace has reached the Free plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade to a paid plan</a>.",null,function(e){var t=e.text;return m.a.createElement("a",{href:"/pricing?ui_step=70&ui_element=5",target:"_blank","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"pricing_link","data-clog-ui-action":"click","data-clog-ui-step":"file_upload"},t)})}},{key:"isMultipleFiles",value:function e(){return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var r=this.state.fileIndex;return t.length>r+1}},{key:"goToNextFile",value:function e(){var t=this;var r=this.props,a=r.files,i=r.setMsgText;var s=this.state.fileIndex;this.setState(function(){return n()({confirmClose:false},t.getStateForFileAtIndex(s+1))},function(){t.maybeLoadImagePreview(a[s+1])});i("")}},{key:"closeDialog",value:function e(){var t=this;this.props.closeModal();if(this.initialText){var r=this.initialText;setTimeout(function(){t.props.threadTs?Object(M["g"])(r,t.props.initialBroadcast):Object(A["c"])(r)},10)}}},{key:"initialFileName",value:function e(t){if(!this.props.featureFileThreads)return t.name;if(!t.name||this.props.fromPaste)return $.t("Pasted image at {date}",{date:Object(S["a"])(Date.now()/1e3)});return t.name}},{key:"isGoDisabled",value:function e(){var t=this.state,r=t.submitting,a=t.shareWith,n=t.overMsgLengthLimit,i=t.overFileNameLimit;var s=this.props,o=s.canPostInSelectedChannel,c=s.disallowedKeywordInMsgText;return r||a&&!o||a&&!!c||n||i}},{key:"maybeLoadImagePreview",value:function e(t){var r=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var a=new FileReader;a.onload=function(e){var a=e.target.result;if(!Object(p["startsWith"])(a,"data:image/"))return;r.loadImagePreviewWithOrientation(t,a)};a.onloadstart=function(e){if(e.total>33554432){Object(w["info"])("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);a.abort()}};a.readAsDataURL(t)}catch(e){Object(w["warn"])("Error loading upload preview");Object(w["warn"])(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,r){var a=this;Object(D["a"])(t).then(function(e){if(!e||1===e){a.setState(function(){return{previewDataUrl:r,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var n=t.width;var i=t.height;var s=i/n;a.setState(function(){return{previewDataUrl:r,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:true}})};t.src=r})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.threadTs,n=t.channelType,i=t.selectedChannelName;var s=this.state.broadcast;if(!r||!a)return null;var o="broadcast-to-channel";var c="";c="mpim"===n?$.t("Also send to the group"):"im"===n?$.t("Also send as direct message"):$.rt("Also send to <span></span>",null,function(){return m.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},i)});return m.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},m.a.createElement(W["a"],{text:c,className:"p-file_upload_dialog__broadcast_label",htmlFor:o,type:"inline"},m.a.createElement(G["a"],{className:"p-file_upload_dialog__broadcast_checkbox",id:o,checked:s,onChange:this.onBroadcastChange})))}},{key:"renderImagePreview",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.state,r=t.previewDataUrl,a=t.previewImageDimensionsRatio,n=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var s=$.t("Preview of {fileName}",{fileName:i});var o=void 0;2===n?o="scaleX(-1)":3===n?o="rotate(180deg)":4===n?o="rotate(180deg) scaleX(-1)":5===n?o="rotate(90deg) scale("+a+", -"+a+")":6===n?o="rotate(90deg) scale("+a+")":7===n?o="rotate(90deg) scale(-"+a+", "+a+")":8===n&&(o="rotate(-90deg) scale("+a+", "+a+")");var c={};o&&(c.transform=o);return m.a.createElement("div",{className:"p-file_upload_dialog__section"},m.a.createElement("div",{className:"p-file_upload_dialog__preview"},m.a.createElement("div",{style:c},m.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:r,alt:s}))))}},{key:"renderShareWith",value:function e(){var t=this.props,r=t.threadTs,a=t.featureFileThreads,n=t.selectedChannelId;var i=this.state.shareWith;if(!a)return null;if(r)return m.a.createElement(J["a"],{channelId:n,threadTs:r});return m.a.createElement(W["a"],{text:$.t("Share with:"),htmlFor:te,type:"inline"},m.a.createElement(G["a"],{id:te,defaultChecked:i,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.selectedChannelId,a=t.setSelectedChannel,n=t.threadTs;var i=this.state.shareWith;if(n)return null;return m.a.createElement(K["a"],{initialChannelId:r,onChange:a,isDisabled:!i})}},{key:"renderCancelAllButton",value:function e(){if(!this.props.featureFileThreads)return null;return m.a.createElement(q["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},$.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return m.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return m.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var r=Object(Y["a"])(this.props);if(!r&&!t)return null;return m.a.createElement("div",{className:"p-file_upload_dialog__section"},m.a.createElement(B["d"],{type:"inline",level:"warning"},t?m.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,r))}},{key:"renderCollapsedFileName",value:function e(){var t=this.props.featureFileThreads;var r=this.state,a=r.defaultFileName,n=r.collapseFileNameInput;if(!t)return null;var i=O()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!n});var s=$.rt("edit");var o=$.rt("Edit file name: {fileName}",{fileName:a});return m.a.createElement("div",{className:i},m.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},a),m.a.createElement(V["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:n?null:"-1","aria-label":o},s))}},{key:"renderExpandedFileNameInput",value:function e(){var t=this.state,r=t.fileName,a=t.defaultFileName,n=t.collapseFileNameInput;var i=O()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return m.a.createElement(W["a"],{text:$.t("File name"),htmlFor:ee,className:i},m.a.createElement(H["a"],{id:ee,name:ee,value:r,maxCharacterLimit:R["MAX_FILENAME_LENGTH"],counterMinimumCharacters:R["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:a,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return m.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderRetentionWarning",value:function e(){var t=this.props,r=t.retentionDuration,a=t.featureFileThreads;if(!a||!r)return null;return m.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},m.a.createElement("span",null,$.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(x["a"])(r)})))}},{key:"render",value:function e(){if(!this.props.featureFileThreads)return null;var t=this.props,r=t.files,a=t.msgText;var n=this.state,i=n.fileIndex,s=n.shareWith,o=n.confirmClose;var c=$.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var l=$.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(l=$.t("Upload a file ({number} of {total})",{number:i+1,total:r.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var u=false;var d=O()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!o});return m.a.createElement(U["a"],{className:d,title:l,shouldCloseOnOverlayClick:u,onClose:this.onCancel,onCancel:o?this.onCancelDiscard:this.onCancel,onGo:o?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,cancelText:o?$.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:o?$.t("Yes, discard the message"):$.t("Upload"),footerText:o?$.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:o?"danger":"primary",showCancelButton:o},this.renderWarning(),m.a.createElement("div",{className:"p-file_upload_dialog__section"},m.a.createElement(z["a"],{text:a,onTextChange:this.onTextChange,ariaLabel:c,placeholder:c,enabled:s,focusOnMount:true,onEnter:this.onGo})),this.renderBroadcastCheckbox(),this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs(),this.renderRetentionWarning())}}]);return t}(f["PureComponent"]);ne.displayName="FileUploadDialog";ne.defaultProps=ae;function ie(e,t){var r=Object(F["getCurrentTeam"])(e);var a={overStorageLimit:Object(L["isOverStorageLimit"])(r),isStdPlan:Object(L["isOnStandardPlan"])(r),isPlusPlan:Object(L["isOnPlusPlan"])(r),isEnterprisePlan:Object(L["isEnterpriseTeam"])(r)};return n()({},Object(Q["b"])(e,t),a,{retentionDuration:parseInt(Object(P["getTeamPref"])(e,"file_retention_type"),10)?Object(P["getTeamPref"])(e,"file_retention_duration"):null,featureFileThreads:Object(k["isFeatureEnabled"])(e,"feature_file_threads")})}var se={closeModal:I["closeModal"],switchToChannel:T["a"],getShareableChannelId:N["a"]};var oe=Object(_["connect"])(ie,se)(ne);t["a"]=Object(Q["a"])(oe)},22613:function(e,t,r){"use strict";t["a"]=s;var a=r(43);var n=r(14989);var i=r.n(n);function s(e){return new Promise(function(t,r){try{var i=new FileReader;i.onload=function(e){var r=Object(n["readFromBinaryFile"])(e.target.result);r&&"number"===typeof r.Orientation?t(r.Orientation):t(null)};i.readAsArrayBuffer(e)}catch(e){Object(a["warn"])("Error reading exif data");Object(a["warn"])(e);r(e)}})}},22614:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(9);var u=r(5);var d=r(12);var v=r(21697);var p=r(21702);var h=r(1007);var f=r(22281);var m=r(480);var b=r(1616);var g=new u["b"]("file-upload");function _(e){var t=e.replyCount,r=e.replyUsers,a=e.replyUsersCount,n=e.featureFileThreads;if(!n)return null;if(!r)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},g.t("Sharing file in a thread"),s.a.createElement("br",null),s.a.createElement(f["a"],{replyCount:t,replyUsers:r,replyUsersCount:a}))}_.displayName="FileUploadThreadLabel";_.defaultProps={replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0,featureFileThreads:true};function y(e,t){var r=t.channelId,n=t.threadTs;var i=Object(p["getMessageByTimestamp"])(e,r,n);if(!i){var s=Object(v["getChannelById"])(e,r);i=Object(m["d"])(s,n);i||(i=Object(b["a"])(s,n))}if(!i)return{};var o=Object(h["getReplyUsers"])(i);var c=Object(h["getReplyUsersCount"])(i);if(i.replies){o=Object(a["map"])(i.replies,"user");i.user&&o.push(i.user);c=Object(a["uniq"])(o).length}else i.user&&o.push(i.user);return{replyCount:Object(h["getReplyCount"])(i),replyUsers:o,replyUsersCount:c,featureFileThreads:Object(d["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(l["connect"])(y)(_)},22615:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(21705);var l=r(22616);var u=Object(o["b"])("Opens the create gdoc file dialog",function(e,t,r){e(Object(c["openModal"])({element:n.a.createElement(l["a"],r)}))});u.propTypes={type:s.a.string,displayType:s.a.string,initialChannelId:s.a.string};t["a"]=u},22616:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(12);var j=r(21705);var C=r(21697);var E=r(104);var S=r(22617);var w=r(21868);var I=r(5);var T=r(211);var N=r(335);var R=r(271);var A=r(195);var M=r(1078);var P=r(410);var x=r(21932);var D=r(21933);var F=r(21934);var L=r(21935);var B=r(20151);var U=r.n(B);var q=new I["b"]("create-gdoc-dialog");var H={type:h.a.string,closeModal:h.a.func,getShareableChannelId:h.a.func,featureFileThreads:h.a.bool,msgText:h.a.string,setMsgText:h.a.func,selectedChannel:h.a.object,setSelectedChannel:h.a.func,disallowedKeywordInMsgText:h.a.string,canPostInSelectedChannel:h.a.bool};var W={type:void 0,closeModal:_.a.noop,getShareableChannelId:_.a.noop,featureFileThreads:false,msgText:"",setMsgText:_.a.noop,selectedChannel:void 0,setSelectedChannel:_.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false};var G=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_.a.bindAll(r,["onTextChange","onShareChannelChange","onGo","onCancel","onTitleInputChange","onShareWithChange","setMessageInputRef"]);r.messageInput=null;r.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:false};return r}c()(t,[{key:"onTextChange",value:function e(t){var r=t.text,a=t.overLimit;this.props.setMsgText(r);this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){Object(S["b"])(false);this.props.closeModal()}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var r=t.target.checked;this.setState(function(){return{shareWith:!!r}})}},{key:"getCleanMsgText",value:function e(){var t=Object(E["a"])(this.props.msgText);return _.a.trim(t)}},{key:"getDialogTitle",value:function e(){var t=this.props,r=t.type,a=t.featureFileThreads;if(!a)return null;switch(r){case"document":return q.t("Create a Google Document");case"presentation":return q.t("Create a Google Presentation");case"spreadsheet":return q.t("Create a Google Spreadsheet");default:return q.t("Create a Google file")}}},{key:"setMessageInputRef",value:function e(t){if(!t)return;this.messageInput=t.getWrappedInstance();this.focusMessageInput()}},{key:"focusMessageInput",value:function e(){this.messageInput&&this.messageInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,r=t.disallowedKeywordInMsgText,a=t.canPostInSelectedChannel;var n=this.state,i=n.overMsgLengthLimit,s=n.titleInputValue,o=n.submitting;var c=s&&s.length>T["MAX_FILENAME_LENGTH"];return!a||!!r||i||c||o}},{key:"createGDocOnGo",value:function e(){var t=this;var r=this.props,a=r.selectedChannel,n=r.getShareableChannelId,i=r.type;var s=this.state,o=s.titleInputValue,c=s.shareWith;var l=a&&a.id;if(!l)return;n({channelOrMemberId:l}).then(function(e){var r=t.getCleanMsgText();var a=o||"Untitled";var n={title:a,channel:c?e:null,comment:c?r:null};Object(S["a"])(i,n).then(function(){t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"renderChannelPicker",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.selectedChannel;var n=this.state.shareWith;if(!r)return null;var i=a&&a.id;return m.a.createElement(D["a"],{onChange:this.onShareChannelChange,initialChannelId:i,isDisabled:!n})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var r=Object(L["a"])(n()({},this.props));if(!r)return null;return m.a.createElement("div",{className:"p-share_dialog__section"},m.a.createElement(N["d"],{type:"inline",level:"warning"},r))}},{key:"renderShareWith",value:function e(){var t=this.props.featureFileThreads;var r=this.state.shareWith;if(!t)return null;var a="create-gdoc-share-with";return m.a.createElement(A["a"],{text:q.t("Share with:"),htmlFor:a,type:"inline"},m.a.createElement(M["a"],{id:a,defaultChecked:r,onChange:this.onShareWithChange}))}},{key:"renderTitleInput",value:function e(){var t=this.props.featureFileThreads;var r=this.state.titleInputValue;if(!t)return null;var a="p-create_gdoc_dialog__title";return m.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},m.a.createElement(A["a"],{htmlFor:a,text:q.t("Title"),optional:true},m.a.createElement(P["a"],{id:a,name:a,maxCharacterLimit:T["MAX_FILENAME_LENGTH"],counterMinimumCharacters:T["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:r})))}},{key:"renderShareWithPicker",value:function e(){return m.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__create_gdoc_share_with"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props,r=t.featureFileThreads,a=t.msgText;var n=this.state.shareWith;if(!r)return null;var i=q.t("Add a message, if you\u2019d like.");var s=O()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input",{"p-share_dialog__create_gdoc_message_input--hide":!n});return m.a.createElement("div",{className:s},m.a.createElement(x["a"],{text:a,onTextChange:this.onTextChange,placeholder:i,ariaLabel:i,onEnter:this.onGo,ref:this.setMessageInputRef}))}},{key:"render",value:function e(){var t=this.props.featureFileThreads;if(!t)return null;var r=false;return m.a.createElement(R["a"],{className:"p-create_gdoc_dialog__modal",title:this.getDialogTitle(),shouldCloseOnOverlayClick:r,useSlackScrollbarWithPadding:true,goButtonText:q.t("Create"),onGo:this.onGo,onCancel:this.onCancel,goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareWithPicker(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(f["Component"]);G.displayName="CreateGDocDialog";G.defaultProps=W;function V(e,t){var r=t.selectedChannelId;var a=Object(F["b"])(e,t);var i=Object(C["getChannelById"])(e,r)||Object(C["getImByMemberId"])(e,r);return n()({},a,{selectedChannel:i,featureFileThreads:Object(k["isFeatureEnabled"])(e,"feature_file_threads")})}var z={closeModal:j["closeModal"],getShareableChannelId:w["a"]};var K=Object(b["connect"])(V,z)(G);t["a"]=Object(F["a"])(K)},22617:function(e,t,r){"use strict";r.d(t,"a",function(){return n});r.d(t,"b",function(){return i});var a=r(10);var n=Object(a["c"])("TS.files.gdrive.create");var i=Object(a["c"])("TS.menu.file.onGDriveCreateComplete")},22618:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(12);var l=r(21705);var u=r(22619);var d=Object(o["b"])("Opens the snippet dialog",function(e,t,r){Object(c["isFeatureEnabled"])(t(),"feature_file_threads")&&e(Object(l["openModal"])({element:n.a.createElement(u["a"],r)}))});d.propTypes={initialText:s.a.string,initialChannelId:s.a.string,threadTs:s.a.string};t["a"]=d},22619:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(12);var _=r(54);var y=r(5);var O=r(211);var k=r(22620);var j=r(271);var C=r(410);var E=r(20254);var S=r.n(E);var w=new y["b"]("snippet-dialog");var I={wrapLongLines:m.a.bool,featureFileThreads:m.a.bool};var T={wrapLongLines:true,featureFileThreads:true};var N=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(d["bindAll"])(r,["onFileNameChange","setTextAreaRef"]);r.state={fileName:"",overFileNameLimit:false};return r}s()(t,[{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>O["MAX_FILENAME_LENGTH"]}})}},{key:"setTextAreaRef",value:function e(t){var r=this.props.wrapLongLines;this.textarea=t;this.editor=Object(k["a"])(this.textarea,{lineNumbers:true,matchBrackets:true,indentUnit:4,indentWithTabs:true,enterMode:"keep",tabMode:"shift",viewportMargin:10,autofocus:false,lineWrapping:r})}},{key:"render",value:function e(){var t=this.props.featureFileThreads;var r=this.state.fileName;if(!t)return null;var a="p-snippet_dialog";var n=w.t("Create snippet");var i=false;return h.a.createElement(j["a"],{className:a,title:n,shouldCloseOnOverlayClick:i,useSlackScrollbarWithPadding:true},h.a.createElement("div",{className:"p-snippet_dialog__section"},h.a.createElement(C["a"],{id:"snippet-dialog-name",name:"snippet-dialog-name",value:r,onChange:this.onFileNameChange,placeholder:w.t("Title (optional)"),maxCharacterLimit:O["MAX_FILENAME_LENGTH"],counterMinimumCharacters:O["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"]})),h.a.createElement("div",{className:"p-snippet_dialog__section"},h.a.createElement("textarea",{ref:this.setTextAreaRef})))}}]);return t}(p["PureComponent"]);N.displayName="SnippetDialog";N.defaultProps=T;function R(e){return{wrapLongLines:Object(_["getUserPref"])(e,"snippet_editor_wrap_long_lines"),featureFileThreads:Object(g["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(b["connect"])(R)(N)},22620:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(10);var n=Object(a["c"])("TS.codemirror.legacyLoadCodemirror",function(){return Promise.reject()});var i=Object(a["c"])("TS.codemirror.legacyAttachToTextArea")},22621:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(21794);var s=r(252);var o=r(1501);var c=r(42);var l=r(21947);Object(c["a"])("interop.files",n()({},s,{fileNeedsUpdate:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["fileNeedsUpdate"].apply(s,[TS.redux.getState()].concat(r))},fileIsUpdating:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return s["fileIsUpdating"].apply(s,[TS.redux.getState()].concat(r))},processFileForUpserting:function e(t){return Object(i["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:o["b"],fetchAndUpsertFilesById:o["c"],getFileMetaTemplate:l["b"]}))},22622:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(268);var i=r(21725);var s=r(1592);Object(a["a"])("interop.searchUi",{getVisible:function e(){return Object(n["getVisible"])(TS.redux.getState())}});Object(a["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(i["getSearchInputBoxDisplayQuery"])(TS.redux.getState())}});Object(a["a"])("interop.searchResults",{fetchAllSearchResults:s["a"]})},22623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(22624);var n=r(42);Object(n["a"])("interop.searcher",{isNewMemberSearch:a["a"]})},22624:function(e,t,r){"use strict";t["a"]=i;var a=r(1);var n=r.n(a);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}},22625:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(487);var n=r(42);Object(n["a"])("interop.sendMessage.resolveMessage",a["c"])},22626:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21807);var i=r(21988);var s=r(21789);var o=r(21991);var c=r(22627);var l=r(211);var u=l["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(a["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:i["a"],parseEditLastMessageCommand:n["e"],parseArgs:n["d"],loadSlashCommands:c["a"],executeCommand:s["executeCommand"],sonicCommand:o["a"]})},22627:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21699);var s=r(21990);var o=r(21789);var c=r(22628);var l=Object(i["b"])("Load local and remote Slash commands into Redux",function(e){e(Object(o["bulkAddLocalCommands"])({commands:Object(s["a"])()}));e(Object(c["a"])()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.commands;e(Object(o["bulkAddServerCommands"])({commands:Object(a["values"])(r)}))})});l.propTypes=null;t["a"]=l},22628:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var a=r(21700);var n=r(21704);var i=Object(n["a"])("Fetch a list of Slash Commands",function(e){return e(Object(a["a"])({method:"commands.list",SET_ACTIVE:false})).then(function(e){return e&&{commands:e.commands,cacheTs:e.cache_ts}})})},22629:function(e,t,r){"use strict";t["a"]=n;var a=r(3203);function n(e){if(!e)return"";return"<@"+e.id+"|@"+Object(a["g"])(e)+">"}},22630:function(e,t,r){"use strict";t["a"]=i;var a=r(21729);var n=r(21826);function i(e,t,r){var i=Object(a["b"])(e,{highlightWords:t,shouldRenderEmojiAsText:r});return Object(n["a"])(i)}},22631:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(255);var _=r(21958);var y=r(22632);var O=r(22633);var k=r(22634);var j=r(20255);var C=r.n(j);var E={isOpen:false,selectedIndex:0,text:void 0,results:void 0};var S={completeOnMembers:h.a.bool,completeOnChannels:h.a.bool,completeOnCommands:h.a.bool,autocompleteChannels:h.a.func,autocompleteCommands:h.a.func,autocompleteMembers:h.a.func,renderInput:h.a.func};var w={completeOnMembers:false,completeOnChannels:false,completeOnCommands:false,autocompleteChannels:d["noop"],autocompleteCommands:d["noop"],autocompleteMembers:d["noop"],renderInput:d["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setCompleterElementRef=r.setCompleterElementRef.bind(r);r.onClose=r.onClose.bind(r);r.handleSelectedIndexChangeFromMenu=r.handleSelectedIndexChangeFromMenu.bind(r);r.modules=r.getModulesConfig();r.completers=r.getCompleters(e);r.completer=null;r.completerMenuRef=null;r.tabCompleteSetSelectedIndex=d["noop"];r.tabCompleteHideMenu=d["noop"];r.ignoreNextSelectionEvent=false;r.state=E;return r}s()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.tabCompleteHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props,a=r.completeOnMembers,n=r.completeOnChannels,i=r.completeOnCommands;t.completeOnMembers===a&&t.completeOnChannels===n&&t.completeOnCommands===i||(this.completers=this.getCompleters(t))}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.tabCompleteHideMenu)}},{key:"onSelectedIndexChange",value:function e(t){this.setState(function(){return{selectedIndex:t}})}},{key:"onOpen",value:function e(){this.ignoreNextSelectionEvent=true;this.setState(function(){return{isOpen:true}})}},{key:"onClose",value:function e(){this.ignoreNextSelectionEvent=false;this.setState(function(){return{isOpen:false}})}},{key:"getCompleters",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=t.completeOnMembers,a=t.completeOnChannels,n=t.completeOnCommands;var i=[];a&&i.push({getMatch:_["e"].getMatch,menu:_["a"],search:this.props.autocompleteChannels});n&&i.push({getMatch:_["f"].getMatch,menu:_["b"],search:this.props.autocompleteCommands});r&&i.push({getMatch:_["h"].getMatch,menu:_["c"],search:this.props.autocompleteMembers});return i}},{key:"getModulesConfig",value:function e(){var t=this;return{tabcomplete:{completers:[{type:"members",getMatch:function e(){return t.getMatch.apply(t,arguments)},onSelectedIndexChange:function e(){return t.onSelectedIndexChange.apply(t,arguments)},search:function e(){return t.search.apply(t,arguments)},getResultAtIndex:function e(){var r;return(r=t.completerMenuRef).getResultAtIndex.apply(r,arguments)},getInsertData:function e(){var r;return(r=t.completerMenuRef).getInsertData.apply(r,arguments)},getNumResults:function e(){if(t.completerMenuRef.getNumResults){var r;return(r=t.completerMenuRef).getNumResults.apply(r,arguments)}return}}],searchOptions:{},render:function e(r,a,n){t.setState(function(){return{text:a,results:n}});return'<input type="hidden" />'},trailingPunctuationChars:g["b"],shouldCompleteOnTab:function e(){return false},onRender:function e(){return t.onOpen()},onClose:function e(){return t.onClose()},onInit:function e(r){var a=r.setSelectedIndex,n=r.hideMenu;t.tabCompleteSetSelectedIndex=a;t.tabCompleteHideMenu=n},isModern:true}}}},{key:"getMatch",value:function e(){for(var t=0;t<this.completers.length;t++){var r=this.completers[t];var a=r.getMatch.apply(r,arguments);if(a){this.completer=r;this.setState(function(){return E});return a}}return null}},{key:"setCompleterElementRef",value:function e(t){this.completerMenuRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"search",value:function e(t,r,a){Promise.resolve(this.completer.search({query:t})).then(function(e){a(null,e)}).catch(a)}},{key:"handleSelectedIndexChangeFromMenu",value:function e(t){if(this.ignoreNextSelectionEvent){this.ignoreNextSelectionEvent=false;return}this.tabCompleteSetSelectedIndex(t)}},{key:"renderMenu",value:function e(){var t=this.state,r=t.isOpen,a=t.selectedIndex,n=t.text,i=t.results;if(!this.completer)return null;return m.a.createElement(this.completer.menu,{selectedIndex:a,isOpen:r,onClose:this.onClose,text:n,results:i,ref:this.setCompleterElementRef,onSelectedIndexChange:this.handleSelectedIndexChangeFromMenu})}},{key:"render",value:function e(){var t=this.props.renderInput;var r=this.state.isOpen;return m.a.createElement(f["Fragment"],null,t({modules:this.modules,isOpen:r}),this.renderMenu())}}]);return t}(f["PureComponent"]);I.displayName="TextyAutocomplete";I.defaultProps=w;var T={autocompleteChannels:y["a"],autocompleteCommands:O["a"],autocompleteMembers:k["a"]};t["a"]=Object(b["connect"])(null,T)(I)},22632:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(21697);var l=r(907);var u=r(211);var d=Object(o["b"])("Find channels that match a search query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.query,i=r.limit,s=void 0===i?u["AUTOCOMPLETE_DEFAULT_LIMIT"]:i;var o=t();var d=Object(a["values"])(Object(c["getAllChannels"])(o)).filter(l["isPublicChannel"]);var v=d;if("#"!==n){var p=n.toLowerCase().slice(1);v=d.filter(function(e){var t=Object(l["getDisplayName"])(e);return Object(a["includes"])(t,p)})}return Promise.resolve(v.slice(0,s))});d.propTypes={query:s.a.string,limit:s.a.number};t["a"]=d},22633:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21789);var c=r(21699);var l=function e(t){var r=t.reduce(function(e,t){var r=t.type||"unknown";e[r]||(e[r]={type:r,commands:[]});e[r].commands.push(t);return e},{});return Object(a["values"])(r)};var u=Object(c["b"])("Find commands that match a search query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.query,i=r.isThread;var s=t();var c=Object(o["getSlashCommands"])(s,{isThread:i});var u=Object(a["values"])(c).filter(function(e){return e.autocomplete});var d=u;if("/"!==n){var v=n.toLowerCase().slice(1);d=u.filter(function(e){return Object(a["includes"])(e.name,v)})}var p=l(d);return Promise.resolve(p)});u.propTypes={query:s.a.string,isThread:s.a.bool,limit:s.a.number};t["a"]=u},22634:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(21699);var c=r(21698);var l=r(211);var u=Object(o["b"])("Find members that match a search query",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.query,i=r.limit,s=void 0===i?l["AUTOCOMPLETE_DEFAULT_LIMIT"]:i;var o=t();var u=Object(a["values"])(Object(c["getAllMembers"])(o));var d=u;if("@"!==n){var v=n.toLowerCase().slice(1);d=u.filter(function(e){return Object(a["includes"])(e.name,v)})}return Promise.resolve(d.slice(0,s))});u.propTypes={query:s.a.string,limit:s.a.number};t["a"]=u},22635:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(5);var k=new O["b"]("tabcomplete");var j={header:m.a.node,body:m.a.node,isOpen:m.a.bool,onClose:m.a.func,type:m.a.string};var C={header:void 0,body:void 0,isOpen:false,onClose:p["noop"],type:void 0};var E=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props,r=t.header,a=t.body,i=t.isOpen,s=t.onClose,o=t.type;if(!i)return null;var c=y()("c-texty_autocomplete",n()({},"c-texty_autocomplete--"+o,!!o));return g.a.createElement(b["Fragment"],null,g.a.createElement("div",{className:c},g.a.createElement("div",{className:"c-texty_autocomplete__header"},r,g.a.createElement("span",{className:"c-texty_autocomplete__help"},g.a.createElement("span",{className:"c-texty_autocomplete__help_item"},k.rt("<strong>tab</strong> or <strong>\u2191</strong> <strong>\u2193</strong> to navigate")),g.a.createElement("span",{className:"c-texty_autocomplete__help_item"},k.rt("<strong>\u21b5</strong> to select")),g.a.createElement("span",{className:"c-texty_autocomplete__help_item"},k.rt("<strong>esc</strong> to dismiss")))),g.a.createElement("div",{className:"c-texty_autocomplete__body",ref:this.setBodyRef},g.a.createElement("ul",{className:"c-texty_autocomplete__results"},a))),g.a.createElement("button",{className:"c-texty_autocomplete__shadow",onClick:s}))}}]);return t}(b["Component"]);E.displayName="TextyAutocompleteMenu";E.defaultProps=C;t["a"]=E},22636:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(12);var _=r(54);var y=r(3203);var O=r(5);var k=r(21958);var j=r(21701);var C=r(21750);var E=r(22247);var S=new O["b"]("tabcomplete");var w={highlightWords:h.a.arrayOf(h.a.string),selectedIndex:h.a.number,isOpen:h.a.bool,onClose:h.a.func,text:h.a.string,results:h.a.arrayOf(h.a.object),featureUnifiedMember:h.a.bool,onSelectedIndexChange:h.a.func};var I={highlightWords:void 0,selectedIndex:0,isOpen:false,onClose:d["noop"],text:void 0,results:void 0,featureUnifiedMember:false,onSelectedIndexChange:d["noop"]};var T=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getResultAtIndex",value:function e(t,r){return k["h"].getResultAtIndex(t,r)}},{key:"getInsertData",value:function e(t){var r=this.props.highlightWords;return k["h"].getInsertData(t,{highlightWords:r})}},{key:"renderHeader",value:function e(){var t=this.props.text;return S.rt("People matching \u201c<strong>{text}</strong>\u201d",{text:t})}},{key:"renderBody",value:function e(){var t=this.props,r=t.results,a=t.selectedIndex,n=t.onSelectedIndexChange,i=t.featureUnifiedMember;if(Object(d["isEmpty"])(r))return null;return r.map(function(e,t){var r=void 0;r=e.is_broadcast_keyword?"broadcast":e.is_usergroup?"usergroup":i||Object(j["a"])()?m.a.createElement(C["a"],{id:e.id,size:"small",showAvatar:true,forcedPrimary:"display_name"}):Object(y["g"])(e);return m.a.createElement(E["a"],{key:e.id,index:t,isSelected:t===a,onMouseOver:n},r)})}},{key:"render",value:function e(){var t=this.props,r=t.isOpen,a=t.onClose;return m.a.createElement(k["d"],{header:this.renderHeader(),body:this.renderBody(),isOpen:r,onClose:a,type:"members"})}}]);return t}(f["PureComponent"]);T.displayName="TextyAutocompleteMembers";T.defaultProps=I;var N=function e(t){return{highlightWords:Object(_["getUserHighlightWords"])(t),featureUnifiedMember:Object(g["isFeatureEnabled"])(t,"feature_unified_member")}};t["a"]=Object(b["connect"])(N,null,null,{withRef:true})(T)},22637:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(907);var g=r(5);var _=r(21958);var y=r(22247);var O=new g["b"]("tabcomplete");var k={selectedIndex:h.a.number,isOpen:h.a.bool,onClose:h.a.func,text:h.a.string,results:h.a.arrayOf(h.a.object),onSelectedIndexChange:h.a.func};var j={selectedIndex:0,isOpen:false,onClose:d["noop"],text:void 0,results:void 0,onSelectedIndexChange:d["noop"]};var C=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"getResultAtIndex",value:function e(t,r){return _["e"].getResultAtIndex(t,r)}},{key:"getInsertData",value:function e(t){return _["e"].getInsertData(t)}},{key:"renderHeader",value:function e(){var t=this.props.text;return O.rt("Channels matching \u201c<strong>{text}</strong>\u201d",{text:t})}},{key:"renderBody",value:function e(){var t=this.props,r=t.results,a=t.selectedIndex,n=t.onSelectedIndexChange;if(Object(d["isEmpty"])(r))return null;return r.map(function(e,t){return m.a.createElement(y["a"],{key:e.id,index:t,isSelected:t===a,onMouseOver:n},"#",Object(b["getDisplayName"])(e))})}},{key:"render",value:function e(){var t=this.props,r=t.isOpen,a=t.onClose;return m.a.createElement(_["d"],{header:this.renderHeader(),body:this.renderBody(),isOpen:r,onClose:a,type:"channels"})}}]);return t}(f["PureComponent"]);C.displayName="TextyAutocompleteChannels";C.defaultProps=j;t["a"]=C},22638:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(9);var y=r(5);var O=r(21958);var k=r(21756);var j=r(21807);var C=r(22247);var E=new y["b"]("tabcomplete");var S={client:"Slack"};var w={selectedIndex:m.a.number,isOpen:m.a.bool,onClose:m.a.func,text:m.a.string,results:m.a.arrayOf(m.a.object),isEmojiDisplayedAsText:m.a.bool,onSelectedIndexChange:m.a.func};var I={selectedIndex:0,isOpen:false,onClose:p["noop"],text:void 0,results:void 0,isEmojiDisplayedAsText:false,onSelectedIndexChange:p["noop"]};var T=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"getResultAtIndex",value:function e(t,r){return O["f"].getResultAtIndex(t,r)}},{key:"getNumResults",value:function e(t){return O["f"].getNumResults(t)}},{key:"getInsertData",value:function e(t){var r=this.props.isEmojiDisplayedAsText;return O["f"].getInsertData(t,{shouldRenderEmojiAsText:r})}},{key:"renderHeader",value:function e(){var t=this.props.text;return E.rt("Commands matching \u201c<strong>{text}</strong>\u201d",{text:t})}},{key:"renderBody",value:function e(){var t=this.props,r=t.results,a=t.selectedIndex,i=t.onSelectedIndexChange;if(Object(p["isEmpty"])(r))return null;var s=0;return Object(p["flatMap"])(r,function(e){var t=S[e.type]||e.type;var r=g.a.createElement("li",{key:t,className:"c-texty_autocomplete__group"},t);var o=e.commands.map(function(e){var t=s;s+=1;var r=void 0;if(e.aliases){var n="(or "+e.aliases.join(", ")+")";r=g.a.createElement("span",{className:"margin_left_25"},n)}var o=void 0;e.helpText&&(o=g.a.createElement("span",{className:"margin_left_25"},e.helpText));var c=void 0;e.desc&&(c=g.a.createElement("div",{className:"c-texty_autocomplete__result_description"},e.desc));return g.a.createElement(C["a"],{key:e.name,index:t,isSelected:t===a,onMouseOver:i},g.a.createElement("strong",null,Object(j["b"])(e)),r,o,c)});return[r].concat(n()(o))})}},{key:"render",value:function e(){var t=this.props,r=t.isOpen,a=t.onClose;return g.a.createElement(O["d"],{header:this.renderHeader(),body:this.renderBody(),isOpen:r,onClose:a,type:"commands"})}}]);return t}(b["PureComponent"]);T.displayName="TextyAutocompleteCommands";T.defaultProps=I;var N=function e(t){return{isEmojiDisplayedAsText:Object(k["b"])(t)}};t["a"]=Object(_["connect"])(N,null,null,{withRef:true})(T)},22639:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getInsertData",function(){return u});r.d(t,"getMatch",function(){return d});r.d(t,"getResultAtIndex",function(){return v});var a=r(1);var n=r.n(a);var i=r(91);var s=r(21905);var o=r(21825);var c=r(22246);var l=/(^|\n|.)?((?:@|\uFF20)([^\n@\uFF20]*))$/i;var u=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.highlightWords;if(!t)return null;Object(i["b"])("PFP_ACTION",{contexts:{growth:{action:"autocomplete_select",trigger:"member"}}});var n=Object(s["a"])(t);var c=Object(o["a"])(t.id,n,a);return{text:n,format:{slackmention:{id:t.id,label:n,mention:c}}}};var d=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s=void 0;var o=void 0;t.replace(l,function(e,t,r,n,l){var u=""===Object(c["a"])(t)||Object(a["includes"])(i.allowed_preceding_symbols,t);if(!u)return;if(n.length&&n.match(/^\s/))return;s=r;o=l+(t||"").length});if(!s&&r){var u=Object(a["last"])(/(^|\s)([^\s\n@\uFF20]+)$/.exec(t));u=Object(c["a"])(u,{trimCJK:false});if(u){s=u;o=t.length-u.length}}return s?{match:s,index:o}:null};var v=function e(t,r){if(Object(a["isEmpty"])(t))return null;return t[r]}},22640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getInsertData",function(){return v});r.d(t,"getMatch",function(){return p});r.d(t,"getResultAtIndex",function(){return h});var a=r(1395);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(91);var c=r(907);var l=r(5);var u=r(22246);var d=/(^|\n|.)([#\uff03][^~`!@#\uff03$%^&*()+=[\]{}\\|;:'",.<>/?\s]*)$/i;var v=function e(t){if(!t)return null;Object(o["b"])("PFP_ACTION",{contexts:{growth:{action:"autocomplete_select",trigger:"channel"}}});var r=Object(c["getDisplayName"])(t);return{text:"#"+r,ensure_preceding_space:true}};var p=function e(t){if(!Object(i["isString"])(t))return null;var r=Object(l["a"])(t).match(d)||[];var a=n()(r,3),s=a[1],o=a[2];if(!o||Object(u["a"])(s))return null;var c=r.index+Object(i["size"])(s);var v=t.slice(c);return{match:v,index:c}};var h=function e(t,r){if(Object(i["isEmpty"])(t))return null;return t[r]}},22641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"getInsertData",function(){return l});r.d(t,"getMatch",function(){return u});r.d(t,"getResultAtIndex",function(){return d});r.d(t,"getNumResults",function(){return v});var a=r(1);var n=r.n(a);var i=r(21729);var s=r(91);var o=r(21807);var c=/^([/\uff0f]\S*)$/;var l=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.shouldRenderEmojiAsText;if(!t)return null;Object(s["b"])("PFP_ACTION",{contexts:{growth:{action:"autocomplete_select",trigger:"slash_command"}}});if("last"===t.type)return Object(i["b"])(t.cmd,{shouldRenderEmojiAsText:a});return{text:Object(o["b"])(t)}};var u=function e(t,r,a){if(0!==a||!c.test(t))return null;1===t.length&&Object(s["b"])("PFP_ACTION",{contexts:{growth:{action:"autocomplete_start",trigger:"slash_command"}}});return{match:t,index:0}};var d=function e(t,r){var n=Object(a["flatMap"])(t,"commands");return n[r]};var v=function e(t){var r=Object(a["flatMap"])(t,"commands");return r.length}},22642:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1);var n=r.n(a);var i=r(42);var s=r(974);var o=r(21698);var c=r(74);function l(e){var t=TS.redux.getState();var r=Object(a["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["getMemberById"])(t,e)});r.sort(function(e,t){return TS.interop.i18n.sorter(Object(c["d"])(e),Object(c["d"])(t))});return r}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:l,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},22643:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(23039);var n=r(21907);var i=r(21952);var s=r(42);function o(e){var t=TS.redux.getState();var r=Object(a["getUserGroupById"])(t,e);if(!r)return null;return r}function c(e){return TS.redux.dispatch(Object(n["e"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var n=o(e);if(!n||Object(i["h"])(n))return;TS.redux.dispatch(Object(a["bulkAddMembersToGroup"])({groupId:e,users:r}))}).then(function(){return o(e)})}function l(e,t){TS.redux.dispatch(Object(n["e"])({subteam:e})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.users;var n=o(e);if(!n||Object(i["h"])(n))return;TS.redux.dispatch(Object(a["bulkAddMembersToGroup"])({groupId:e,users:r}))}).then(function(){var r=o(e);r&&t&&t(r)})}function u(e){var t=TS.redux.getState();var r=Object(a["getActiveUserGroups"])(t,e);return r}Object(s["a"])("interop.userGroups",{getUserGroupById:o,getActiveUserGroups:u,getUserGroupMembers:l,promiseToGetUserGroupMembers:c,createUserGroup:n["a"],updateUserGroup:n["h"],updateMembersOfUserGroup:n["g"],enableUserGroup:n["d"],disableUserGroup:n["c"],deleteUserGroup:n["b"],canEditUserGroups:function e(){return Object(i["b"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(i["a"])(TS.redux.getState())}})},22644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(22645);var i=r(22646);var s=r(22647);var o=r(398);var c=r(23058);Object(a["a"])("interop.a11y",{makeAriaLabelForMPIM:n["a"],makeAriaLabelForChannel:i["a"],makeAriaLabelForMember:s["a"],isScreenReaderEnabled:o["isScreenReaderEnabled"],focusableSectionManager:c["b"]})},22645:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isCurrent,a=e.hasNotifications,i=e.isStarred,s=e.isMuted,o=e.hasDraft,c=e.featureLabelsForCoreObjects;if(!c)return null;var l=function(){if(r&&a&&s&&i&&o)return n.t("current conversation, has notifications, muted, starred, has a draft message");if(!r&&a&&s&&i&&o)return n.t("has notifications, muted, starred, has a draft message");if(r&&!a&&s&&i&&o)return n.t("current conversation, muted, starred, has a draft message");if(!r&&!a&&s&&i&&o)return n.t("muted, starred, has a draft message");if(r&&a&&!s&&i&&o)return n.t("current conversation, has notifications, starred, has a draft message");if(!r&&a&&!s&&i&&o)return n.t("has notifications, starred, has a draft message");if(r&&!a&&!s&&i&&o)return n.t("current conversation, starred, has a draft message");if(!r&&!a&&!s&&i&&o)return n.t("starred, has a draft message");if(r&&a&&s&&!i&&o)return n.t("current conversation, has notifications, muted, has a draft message");if(!r&&a&&s&&!i&&o)return n.t("has notifications, muted, has a draft message");if(r&&!a&&s&&!i&&o)return n.t("current conversation, muted, has a draft message");if(!r&&!a&&s&&!i&&o)return n.t("muted, has a draft message");if(r&&a&&!s&&!i&&o)return n.t("current conversation, has notifications, has a draft message");if(!r&&a&&!s&&!i&&o)return n.t("has notifications, has a draft message");if(r&&!a&&!s&&!i&&o)return n.t("current conversation, has a draft message");if(!r&&!a&&!s&&!i&&o)return n.t("has a draft message");if(r&&a&&s&&i&&!o)return n.t("current conversation, has notifications, muted, starred");if(!r&&a&&s&&i&&!o)return n.t("has notifications, muted, starred");if(r&&!a&&s&&i&&!o)return n.t("current conversation, muted, starred");if(!r&&!a&&s&&i&&!o)return n.t("muted, starred");if(r&&a&&!s&&i&&!o)return n.t("current conversation, has notifications, starred");if(!r&&a&&!s&&i&&!o)return n.t("has notifications, starred");if(r&&!a&&!s&&i&&!o)return n.t("current conversation, starred");if(!r&&!a&&!s&&i&&!o)return n.t("starred");if(r&&a&&s&&!i&&!o)return n.t("current conversation, has notifications, muted");if(!r&&a&&s&&!i&&!o)return n.t("has notifications, muted");if(r&&!a&&s&&!i&&!o)return n.t("current conversation, muted");if(!r&&!a&&s&&!i&&!o)return n.t("muted");if(r&&a&&!s&&!i&&!o)return n.t("current conversation, has notifications");if(!r&&a&&!s&&!i&&!o)return n.t("has notifications");if(r&&!a&&!s&&!i&&!o)return n.t("current conversation");return""}();if(t&&l)return n.t("{name} ({context})",{name:t,context:l});if(t)return t;return""}},22646:function(e,t,r){"use strict";t["a"]=i;var a=r(5);var n=new a["b"]("a11y");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,r=e.previousChannelName,a=e.workspaceName,i=e.orgName,s=e.isOrgGlobalSharedPublicOrPrivateChannel,o=e.isOrgSharedPublicOrPrivateChannel,c=e.isExternallySharedChannel,l=e.isArchived,u=e.isCurrent,d=e.hasUnreads,v=e.hasNotifications,p=e.isPrivate,h=e.isNotMember,f=e.isMuted,m=e.isStarred,b=e.hasDraft,g=e.featureLabelsForCoreObjects;if(!g)return null;var _=function(){if(c&&a)return n.t("shared with {workspaceName}",{workspaceName:a});if(s&&i)return n.t("shared across all {orgName} workspaces",{orgName:i});if(o)return n.t("shared channel");return""}();var y=function(){if(l)return n.t("archived channel");if(u&&d&&v&&p&&h&&f&&m&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(!u&&d&&v&&p&&h&&f&&m&&b)return n.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message");if(u&&!d&&v&&p&&h&&f&&m&&b)return n.t("current channel, has notifications, private, not a member, muted, starred, has a draft message");if(!u&&!d&&v&&p&&h&&f&&m&&b)return n.t("has notifications, private, not a member, muted, starred, has a draft message");if(u&&d&&!v&&p&&h&&f&&m&&b)return n.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message");if(!u&&d&&!v&&p&&h&&f&&m&&b)return n.t("has unread messages, private, not a member, muted, starred, has a draft message");if(u&&!d&&!v&&p&&h&&f&&m&&b)return n.t("current channel, private, not a member, muted, starred, has a draft message");if(!u&&!d&&!v&&p&&h&&f&&m&&b)return n.t("private, not a member, muted, starred, has a draft message");if(u&&d&&v&&!p&&h&&f&&m&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message");if(!u&&d&&v&&!p&&h&&f&&m&&b)return n.t("has unread messages and notifications, not a member, muted, starred, has a draft message");if(u&&!d&&v&&!p&&h&&f&&m&&b)return n.t("current channel, has notifications, not a member, muted, starred, has a draft message");if(!u&&!d&&v&&!p&&h&&f&&m&&b)return n.t("has notifications, not a member, muted, starred, has a draft message");if(u&&d&&!v&&!p&&h&&f&&m&&b)return n.t("current channel, has unread messages, not a member, muted, starred, has a draft message");if(!u&&d&&!v&&!p&&h&&f&&m&&b)return n.t("has unread messages, not a member, muted, starred, has a draft message");if(u&&!d&&!v&&!p&&h&&f&&m&&b)return n.t("current channel, not a member, muted, starred, has a draft message");if(!u&&!d&&!v&&!p&&h&&f&&m&&b)return n.t("not a member, muted, starred, has a draft message");if(u&&d&&v&&p&&!h&&f&&m&&b)return n.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message");if(!u&&d&&v&&p&&!h&&f&&m&&b)return n.t("has unread messages and notifications, private, muted, starred, has a draft message");if(u&&!d&&v&&p&&!h&&f&&m&&b)return n.t("current channel, has notifications, private, muted, starred, has a draft message");if(!u&&!d&&v&&p&&!h&&f&&m&&b)return n.t("has notifications, private, muted, starred, has a draft message");if(u&&d&&!v&&p&&!h&&f&&m&&b)return n.t("current channel, has unread messages, private, muted, starred, has a draft message");if(!u&&d&&!v&&p&&!h&&f&&m&&b)return n.t("has unread messages, private, muted, starred, has a draft message");if(u&&!d&&!v&&p&&!h&&f&&m&&b)return n.t("current channel, private, muted, starred, has a draft message");if(!u&&!d&&!v&&p&&!h&&f&&m&&b)return n.t("private, muted, starred, has a draft message");if(u&&d&&v&&!p&&!h&&f&&m&&b)return n.t("current channel, has unread messages and notifications, muted, starred, has a draft message");if(!u&&d&&v&&!p&&!h&&f&&m&&b)return n.t("has unread messages and notifications, muted, starred, has a draft message");if(u&&!d&&v&&!p&&!h&&f&&m&&b)return n.t("current channel, has notifications, muted, starred, has a draft message");if(!u&&!d&&v&&!p&&!h&&f&&m&&b)return n.t("has notifications, muted, starred, has a draft message");if(u&&d&&!v&&!p&&!h&&f&&m&&b)return n.t("current channel, has unread messages, muted, starred, has a draft message");if(!u&&d&&!v&&!p&&!h&&f&&m&&b)return n.t("has unread messages, muted, starred, has a draft message");if(u&&!d&&!v&&!p&&!h&&f&&m&&b)return n.t("current channel, muted, starred, has a draft message");if(!u&&!d&&!v&&!p&&!h&&f&&m&&b)return n.t("muted, starred, has a draft message");if(u&&d&&v&&p&&h&&!f&&m&&b)return n.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message");if(!u&&d&&v&&p&&h&&!f&&m&&b)return n.t("has unread messages and notifications, private, not a member, starred, has a draft message");if(u&&!d&&v&&p&&h&&!f&&m&&b)return n.t("current channel, has notifications, private, not a member, starred, has a draft message");if(!u&&!d&&v&&p&&h&&!f&&m&&b)return n.t("has notifications, private, not a member, starred, has a draft message");if(u&&d&&!v&&p&&h&&!f&&m&&b)return n.t("current channel, has unread messages, private, not a member, starred, has a draft message");if(!u&&d&&!v&&p&&h&&!f&&m&&b)return n.t("has unread messages, private, not a member, starred, has a draft message");if(u&&!d&&!v&&p&&h&&!f&&m&&b)return n.t("current channel, private, not a member, starred, has a draft message");if(!u&&!d&&!v&&p&&h&&!f&&m&&b)return n.t("private, not a member, starred, has a draft message");if(u&&d&&v&&!p&&h&&!f&&m&&b)return n.t("current channel, has unread messages and notifications, not a member, starred, has a draft message");if(!u&&d&&v&&!p&&h&&!f&&m&&b)return n.t("has unread messages and notifications, not a member, starred, has a draft message");if(u&&!d&&v&&!p&&h&&!f&&m&&b)return n.t("current channel, has notifications, not a member, starred, has a draft message");if(!u&&!d&&v&&!p&&h&&!f&&m&&b)return n.t("has notifications, not a member, starred, has a draft message");if(u&&d&&!v&&!p&&h&&!f&&m&&b)return n.t("current channel, has unread messages, not a member, starred, has a draft message");if(!u&&d&&!v&&!p&&h&&!f&&m&&b)return n.t("has unread messages, not a member, starred, has a draft message");if(u&&!d&&!v&&!p&&h&&!f&&m&&b)return n.t("current channel, not a member, starred, has a draft message");if(!u&&!d&&!v&&!p&&h&&!f&&m&&b)return n.t("not a member, starred, has a draft message");if(u&&d&&v&&p&&!h&&!f&&m&&b)return n.t("current channel, has unread messages and notifications, private, starred, has a draft message");if(!u&&d&&v&&p&&!h&&!f&&m&&b)return n.t("has unread messages and notifications, private, starred, has a draft message");if(u&&!d&&v&&p&&!h&&!f&&m&&b)return n.t("current channel, has notifications, private, starred, has a draft message");if(!u&&!d&&v&&p&&!h&&!f&&m&&b)return n.t("has notifications, private, starred, has a draft message");if(u&&d&&!v&&p&&!h&&!f&&m&&b)return n.t("current channel, has unread messages, private, starred, has a draft message");if(!u&&d&&!v&&p&&!h&&!f&&m&&b)return n.t("has unread messages, private, starred, has a draft message");if(u&&!d&&!v&&p&&!h&&!f&&m&&b)return n.t("current channel, private, starred, has a draft message");if(!u&&!d&&!v&&p&&!h&&!f&&m&&b)return n.t("private, starred, has a draft message");if(u&&d&&v&&!p&&!h&&!f&&m&&b)return n.t("current channel, has unread messages and notifications, starred, has a draft message");if(!u&&d&&v&&!p&&!h&&!f&&m&&b)return n.t("has unread messages and notifications, starred, has a draft message");if(u&&!d&&v&&!p&&!h&&!f&&m&&b)return n.t("current channel, has notifications, starred, has a draft message");if(!u&&!d&&v&&!p&&!h&&!f&&m&&b)return n.t("has notifications, starred, has a draft message");if(u&&d&&!v&&!p&&!h&&!f&&m&&b)return n.t("current channel, has unread messages, starred, has a draft message");if(!u&&d&&!v&&!p&&!h&&!f&&m&&b)return n.t("has unread messages, starred, has a draft message");if(u&&!d&&!v&&!p&&!h&&!f&&m&&b)return n.t("current channel, starred, has a draft message");if(!u&&!d&&!v&&!p&&!h&&!f&&m&&b)return n.t("starred, has a draft message");if(u&&d&&v&&p&&h&&f&&!m&&b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message");if(!u&&d&&v&&p&&h&&f&&!m&&b)return n.t("has unread messages and notifications, private, not a member, muted, has a draft message");if(u&&!d&&v&&p&&h&&f&&!m&&b)return n.t("current channel, has notifications, private, not a member, muted, has a draft message");if(!u&&!d&&v&&p&&h&&f&&!m&&b)return n.t("has notifications, private, not a member, muted, has a draft message");if(u&&d&&!v&&p&&h&&f&&!m&&b)return n.t("current channel, has unread messages, private, not a member, muted, has a draft message");if(!u&&d&&!v&&p&&h&&f&&!m&&b)return n.t("has unread messages, private, not a member, muted, has a draft message");if(u&&!d&&!v&&p&&h&&f&&!m&&b)return n.t("current channel, private, not a member, muted, has a draft message");if(!u&&!d&&!v&&p&&h&&f&&!m&&b)return n.t("private, not a member, muted, has a draft message");if(u&&d&&v&&!p&&h&&f&&!m&&b)return n.t("current channel, has unread messages and notifications, not a member, muted, has a draft message");if(!u&&d&&v&&!p&&h&&f&&!m&&b)return n.t("has unread messages and notifications, not a member, muted, has a draft message");if(u&&!d&&v&&!p&&h&&f&&!m&&b)return n.t("current channel, has notifications, not a member, muted, has a draft message");if(!u&&!d&&v&&!p&&h&&f&&!m&&b)return n.t("has notifications, not a member, muted, has a draft message");if(u&&d&&!v&&!p&&h&&f&&!m&&b)return n.t("current channel, has unread messages, not a member, muted, has a draft message");if(!u&&d&&!v&&!p&&h&&f&&!m&&b)return n.t("has unread messages, not a member, muted, has a draft message");if(u&&!d&&!v&&!p&&h&&f&&!m&&b)return n.t("current channel, not a member, muted, has a draft message");if(!u&&!d&&!v&&!p&&h&&f&&!m&&b)return n.t("not a member, muted, has a draft message");if(u&&d&&v&&p&&!h&&f&&!m&&b)return n.t("current channel, has unread messages and notifications, private, muted, has a draft message");if(!u&&d&&v&&p&&!h&&f&&!m&&b)return n.t("has unread messages and notifications, private, muted, has a draft message");if(u&&!d&&v&&p&&!h&&f&&!m&&b)return n.t("current channel, has notifications, private, muted, has a draft message");if(!u&&!d&&v&&p&&!h&&f&&!m&&b)return n.t("has notifications, private, muted, has a draft message");if(u&&d&&!v&&p&&!h&&f&&!m&&b)return n.t("current channel, has unread messages, private, muted, has a draft message");if(!u&&d&&!v&&p&&!h&&f&&!m&&b)return n.t("has unread messages, private, muted, has a draft message");if(u&&!d&&!v&&p&&!h&&f&&!m&&b)return n.t("current channel, private, muted, has a draft message");if(!u&&!d&&!v&&p&&!h&&f&&!m&&b)return n.t("private, muted, has a draft message");if(u&&d&&v&&!p&&!h&&f&&!m&&b)return n.t("current channel, has unread messages and notifications, muted, has a draft message");if(!u&&d&&v&&!p&&!h&&f&&!m&&b)return n.t("has unread messages and notifications, muted, has a draft message");if(u&&!d&&v&&!p&&!h&&f&&!m&&b)return n.t("current channel, has notifications, muted, has a draft message");if(!u&&!d&&v&&!p&&!h&&f&&!m&&b)return n.t("has notifications, muted, has a draft message");if(u&&d&&!v&&!p&&!h&&f&&!m&&b)return n.t("current channel, has unread messages, muted, has a draft message");if(!u&&d&&!v&&!p&&!h&&f&&!m&&b)return n.t("has unread messages, muted, has a draft message");if(u&&!d&&!v&&!p&&!h&&f&&!m&&b)return n.t("current channel, muted, has a draft message");if(!u&&!d&&!v&&!p&&!h&&f&&!m&&b)return n.t("muted, has a draft message");if(u&&d&&v&&p&&h&&!f&&!m&&b)return n.t("current channel, has unread messages and notifications, private, not a member, has a draft message");if(!u&&d&&v&&p&&h&&!f&&!m&&b)return n.t("has unread messages and notifications, private, not a member, has a draft message");if(u&&!d&&v&&p&&h&&!f&&!m&&b)return n.t("current channel, has notifications, private, not a member, has a draft message");if(!u&&!d&&v&&p&&h&&!f&&!m&&b)return n.t("has notifications, private, not a member, has a draft message");if(u&&d&&!v&&p&&h&&!f&&!m&&b)return n.t("current channel, has unread messages, private, not a member, has a draft message");if(!u&&d&&!v&&p&&h&&!f&&!m&&b)return n.t("has unread messages, private, not a member, has a draft message");if(u&&!d&&!v&&p&&h&&!f&&!m&&b)return n.t("current channel, private, not a member, has a draft message");if(!u&&!d&&!v&&p&&h&&!f&&!m&&b)return n.t("private, not a member, has a draft message");if(u&&d&&v&&!p&&h&&!f&&!m&&b)return n.t("current channel, has unread messages and notifications, not a member, has a draft message");if(!u&&d&&v&&!p&&h&&!f&&!m&&b)return n.t("has unread messages and notifications, not a member, has a draft message");if(u&&!d&&v&&!p&&h&&!f&&!m&&b)return n.t("current channel, has notifications, not a member, has a draft message");if(!u&&!d&&v&&!p&&h&&!f&&!m&&b)return n.t("has notifications, not a member, has a draft message");if(u&&d&&!v&&!p&&h&&!f&&!m&&b)return n.t("current channel, has unread messages, not a member, has a draft message");if(!u&&d&&!v&&!p&&h&&!f&&!m&&b)return n.t("has unread messages, not a member, has a draft message");if(u&&!d&&!v&&!p&&h&&!f&&!m&&b)return n.t("current channel, not a member, has a draft message");if(!u&&!d&&!v&&!p&&h&&!f&&!m&&b)return n.t("not a member, has a draft message");if(u&&d&&v&&p&&!h&&!f&&!m&&b)return n.t("current channel, has unread messages and notifications, private, has a draft message");if(!u&&d&&v&&p&&!h&&!f&&!m&&b)return n.t("has unread messages and notifications, private, has a draft message");if(u&&!d&&v&&p&&!h&&!f&&!m&&b)return n.t("current channel, has notifications, private, has a draft message");if(!u&&!d&&v&&p&&!h&&!f&&!m&&b)return n.t("has notifications, private, has a draft message");if(u&&d&&!v&&p&&!h&&!f&&!m&&b)return n.t("current channel, has unread messages, private, has a draft message");if(!u&&d&&!v&&p&&!h&&!f&&!m&&b)return n.t("has unread messages, private, has a draft message");if(u&&!d&&!v&&p&&!h&&!f&&!m&&b)return n.t("current channel, private, has a draft message");if(!u&&!d&&!v&&p&&!h&&!f&&!m&&b)return n.t("private, has a draft message");if(u&&d&&v&&!p&&!h&&!f&&!m&&b)return n.t("current channel, has unread messages and notifications, has a draft message");if(!u&&d&&v&&!p&&!h&&!f&&!m&&b)return n.t("has unread messages and notifications, has a draft message");if(u&&!d&&v&&!p&&!h&&!f&&!m&&b)return n.t("current channel, has notifications, has a draft message");if(!u&&!d&&v&&!p&&!h&&!f&&!m&&b)return n.t("has notifications, has a draft message");if(u&&d&&!v&&!p&&!h&&!f&&!m&&b)return n.t("current channel, has unread messages, has a draft message");if(!u&&d&&!v&&!p&&!h&&!f&&!m&&b)return n.t("has unread messages, has a draft message");if(u&&!d&&!v&&!p&&!h&&!f&&!m&&b)return n.t("current channel, has a draft message");if(!u&&!d&&!v&&!p&&!h&&!f&&!m&&b)return n.t("has a draft message");if(u&&d&&v&&p&&h&&f&&m&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted, starred");if(!u&&d&&v&&p&&h&&f&&m&&!b)return n.t("has unread messages and notifications, private, not a member, muted, starred");if(u&&!d&&v&&p&&h&&f&&m&&!b)return n.t("current channel, has notifications, private, not a member, muted, starred");if(!u&&!d&&v&&p&&h&&f&&m&&!b)return n.t("has notifications, private, not a member, muted, starred");if(u&&d&&!v&&p&&h&&f&&m&&!b)return n.t("current channel, has unread messages, private, not a member, muted, starred");if(!u&&d&&!v&&p&&h&&f&&m&&!b)return n.t("has unread messages, private, not a member, muted, starred");if(u&&!d&&!v&&p&&h&&f&&m&&!b)return n.t("current channel, private, not a member, muted, starred");if(!u&&!d&&!v&&p&&h&&f&&m&&!b)return n.t("private, not a member, muted, starred");if(u&&d&&v&&!p&&h&&f&&m&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted, starred");if(!u&&d&&v&&!p&&h&&f&&m&&!b)return n.t("has unread messages and notifications, not a member, muted, starred");if(u&&!d&&v&&!p&&h&&f&&m&&!b)return n.t("current channel, has notifications, not a member, muted, starred");if(!u&&!d&&v&&!p&&h&&f&&m&&!b)return n.t("has notifications, not a member, muted, starred");if(u&&d&&!v&&!p&&h&&f&&m&&!b)return n.t("current channel, has unread messages, not a member, muted, starred");if(!u&&d&&!v&&!p&&h&&f&&m&&!b)return n.t("has unread messages, not a member, muted, starred");if(u&&!d&&!v&&!p&&h&&f&&m&&!b)return n.t("current channel, not a member, muted, starred");if(!u&&!d&&!v&&!p&&h&&f&&m&&!b)return n.t("not a member, muted, starred");if(u&&d&&v&&p&&!h&&f&&m&&!b)return n.t("current channel, has unread messages and notifications, private, muted, starred");if(!u&&d&&v&&p&&!h&&f&&m&&!b)return n.t("has unread messages and notifications, private, muted, starred");if(u&&!d&&v&&p&&!h&&f&&m&&!b)return n.t("current channel, has notifications, private, muted, starred");if(!u&&!d&&v&&p&&!h&&f&&m&&!b)return n.t("has notifications, private, muted, starred");if(u&&d&&!v&&p&&!h&&f&&m&&!b)return n.t("current channel, has unread messages, private, muted, starred");if(!u&&d&&!v&&p&&!h&&f&&m&&!b)return n.t("has unread messages, private, muted, starred");if(u&&!d&&!v&&p&&!h&&f&&m&&!b)return n.t("current channel, private, muted, starred");if(!u&&!d&&!v&&p&&!h&&f&&m&&!b)return n.t("private, muted, starred");if(u&&d&&v&&!p&&!h&&f&&m&&!b)return n.t("current channel, has unread messages and notifications, muted, starred");if(!u&&d&&v&&!p&&!h&&f&&m&&!b)return n.t("has unread messages and notifications, muted, starred");if(u&&!d&&v&&!p&&!h&&f&&m&&!b)return n.t("current channel, has notifications, muted, starred");if(!u&&!d&&v&&!p&&!h&&f&&m&&!b)return n.t("has notifications, muted, starred");if(u&&d&&!v&&!p&&!h&&f&&m&&!b)return n.t("current channel, has unread messages, muted, starred");if(!u&&d&&!v&&!p&&!h&&f&&m&&!b)return n.t("has unread messages, muted, starred");if(u&&!d&&!v&&!p&&!h&&f&&m&&!b)return n.t("current channel, muted, starred");if(!u&&!d&&!v&&!p&&!h&&f&&m&&!b)return n.t("muted, starred");if(u&&d&&v&&p&&h&&!f&&m&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, starred");if(!u&&d&&v&&p&&h&&!f&&m&&!b)return n.t("has unread messages and notifications, private, not a member, starred");if(u&&!d&&v&&p&&h&&!f&&m&&!b)return n.t("current channel, has notifications, private, not a member, starred");if(!u&&!d&&v&&p&&h&&!f&&m&&!b)return n.t("has notifications, private, not a member, starred");if(u&&d&&!v&&p&&h&&!f&&m&&!b)return n.t("current channel, has unread messages, private, not a member, starred");if(!u&&d&&!v&&p&&h&&!f&&m&&!b)return n.t("has unread messages, private, not a member, starred");if(u&&!d&&!v&&p&&h&&!f&&m&&!b)return n.t("current channel, private, not a member, starred");if(!u&&!d&&!v&&p&&h&&!f&&m&&!b)return n.t("private, not a member, starred");if(u&&d&&v&&!p&&h&&!f&&m&&!b)return n.t("current channel, has unread messages and notifications, not a member, starred");if(!u&&d&&v&&!p&&h&&!f&&m&&!b)return n.t("has unread messages and notifications, not a member, starred");if(u&&!d&&v&&!p&&h&&!f&&m&&!b)return n.t("current channel, has notifications, not a member, starred");if(!u&&!d&&v&&!p&&h&&!f&&m&&!b)return n.t("has notifications, not a member, starred");if(u&&d&&!v&&!p&&h&&!f&&m&&!b)return n.t("current channel, has unread messages, not a member, starred");if(!u&&d&&!v&&!p&&h&&!f&&m&&!b)return n.t("has unread messages, not a member, starred");if(u&&!d&&!v&&!p&&h&&!f&&m&&!b)return n.t("current channel, not a member, starred");if(!u&&!d&&!v&&!p&&h&&!f&&m&&!b)return n.t("not a member, starred");if(u&&d&&v&&p&&!h&&!f&&m&&!b)return n.t("current channel, has unread messages and notifications, private, starred");if(!u&&d&&v&&p&&!h&&!f&&m&&!b)return n.t("has unread messages and notifications, private, starred");if(u&&!d&&v&&p&&!h&&!f&&m&&!b)return n.t("current channel, has notifications, private, starred");if(!u&&!d&&v&&p&&!h&&!f&&m&&!b)return n.t("has notifications, private, starred");if(u&&d&&!v&&p&&!h&&!f&&m&&!b)return n.t("current channel, has unread messages, private, starred");if(!u&&d&&!v&&p&&!h&&!f&&m&&!b)return n.t("has unread messages, private, starred");if(u&&!d&&!v&&p&&!h&&!f&&m&&!b)return n.t("current channel, private, starred");if(!u&&!d&&!v&&p&&!h&&!f&&m&&!b)return n.t("private, starred");if(u&&d&&v&&!p&&!h&&!f&&m&&!b)return n.t("current channel, has unread messages and notifications, starred");if(!u&&d&&v&&!p&&!h&&!f&&m&&!b)return n.t("has unread messages and notifications, starred");if(u&&!d&&v&&!p&&!h&&!f&&m&&!b)return n.t("current channel, has notifications, starred");if(!u&&!d&&v&&!p&&!h&&!f&&m&&!b)return n.t("has notifications, starred");if(u&&d&&!v&&!p&&!h&&!f&&m&&!b)return n.t("current channel, has unread messages, starred");if(!u&&d&&!v&&!p&&!h&&!f&&m&&!b)return n.t("has unread messages, starred");if(u&&!d&&!v&&!p&&!h&&!f&&m&&!b)return n.t("current channel, starred");if(!u&&!d&&!v&&!p&&!h&&!f&&m&&!b)return n.t("starred");if(u&&d&&v&&p&&h&&f&&!m&&!b)return n.t("current channel, has unread messages and notifications, private, not a member, muted");if(!u&&d&&v&&p&&h&&f&&!m&&!b)return n.t("has unread messages and notifications, private, not a member, muted");if(u&&!d&&v&&p&&h&&f&&!m&&!b)return n.t("current channel, has notifications, private, not a member, muted");if(!u&&!d&&v&&p&&h&&f&&!m&&!b)return n.t("has notifications, private, not a member, muted");if(u&&d&&!v&&p&&h&&f&&!m&&!b)return n.t("current channel, has unread messages, private, not a member, muted");if(!u&&d&&!v&&p&&h&&f&&!m&&!b)return n.t("has unread messages, private, not a member, muted");if(u&&!d&&!v&&p&&h&&f&&!m&&!b)return n.t("current channel, private, not a member, muted");if(!u&&!d&&!v&&p&&h&&f&&!m&&!b)return n.t("private, not a member, muted");if(u&&d&&v&&!p&&h&&f&&!m&&!b)return n.t("current channel, has unread messages and notifications, not a member, muted");if(!u&&d&&v&&!p&&h&&f&&!m&&!b)return n.t("has unread messages and notifications, not a member, muted");if(u&&!d&&v&&!p&&h&&f&&!m&&!b)return n.t("current channel, has notifications, not a member, muted");if(!u&&!d&&v&&!p&&h&&f&&!m&&!b)return n.t("has notifications, not a member, muted");if(u&&d&&!v&&!p&&h&&f&&!m&&!b)return n.t("current channel, has unread messages, not a member, muted");if(!u&&d&&!v&&!p&&h&&f&&!m&&!b)return n.t("has unread messages, not a member, muted");if(u&&!d&&!v&&!p&&h&&f&&!m&&!b)return n.t("current channel, not a member, muted");if(!u&&!d&&!v&&!p&&h&&f&&!m&&!b)return n.t("not a member, muted");if(u&&d&&v&&p&&!h&&f&&!m&&!b)return n.t("current channel, has unread messages and notifications, private, muted");if(!u&&d&&v&&p&&!h&&f&&!m&&!b)return n.t("has unread messages and notifications, private, muted");if(u&&!d&&v&&p&&!h&&f&&!m&&!b)return n.t("current channel, has notifications, private, muted");if(!u&&!d&&v&&p&&!h&&f&&!m&&!b)return n.t("has notifications, private, muted");if(u&&d&&!v&&p&&!h&&f&&!m&&!b)return n.t("current channel, has unread messages, private, muted");if(!u&&d&&!v&&p&&!h&&f&&!m&&!b)return n.t("has unread messages, private, muted");if(u&&!d&&!v&&p&&!h&&f&&!m&&!b)return n.t("current channel, private, muted");if(!u&&!d&&!v&&p&&!h&&f&&!m&&!b)return n.t("private, muted");if(u&&d&&v&&!p&&!h&&f&&!m&&!b)return n.t("current channel, has unread messages and notifications, muted");if(!u&&d&&v&&!p&&!h&&f&&!m&&!b)return n.t("has unread messages and notifications, muted");if(u&&!d&&v&&!p&&!h&&f&&!m&&!b)return n.t("current channel, has notifications, muted");if(!u&&!d&&v&&!p&&!h&&f&&!m&&!b)return n.t("has notifications, muted");if(u&&d&&!v&&!p&&!h&&f&&!m&&!b)return n.t("current channel, has unread messages, muted");if(!u&&d&&!v&&!p&&!h&&f&&!m&&!b)return n.t("has unread messages, muted");if(u&&!d&&!v&&!p&&!h&&f&&!m&&!b)return n.t("current channel, muted");if(!u&&!d&&!v&&!p&&!h&&f&&!m&&!b)return n.t("muted");if(u&&d&&v&&p&&h&&!f&&!m&&!b)return n.t("current channel, has unread messages and notifications, private, not a member");if(!u&&d&&v&&p&&h&&!f&&!m&&!b)return n.t("has unread messages and notifications, private, not a member");if(u&&!d&&v&&p&&h&&!f&&!m&&!b)return n.t("current channel, has notifications, private, not a member");if(!u&&!d&&v&&p&&h&&!f&&!m&&!b)return n.t("has notifications, private, not a member");if(u&&d&&!v&&p&&h&&!f&&!m&&!b)return n.t("current channel, has unread messages, private, not a member");if(!u&&d&&!v&&p&&h&&!f&&!m&&!b)return n.t("has unread messages, private, not a member");if(u&&!d&&!v&&p&&h&&!f&&!m&&!b)return n.t("current channel, private, not a member");if(!u&&!d&&!v&&p&&h&&!f&&!m&&!b)return n.t("private, not a member");if(u&&d&&v&&!p&&h&&!f&&!m&&!b)return n.t("current channel, has unread messages and notifications, not a member");if(!u&&d&&v&&!p&&h&&!f&&!m&&!b)return n.t("has unread messages and notifications, not a member");if(u&&!d&&v&&!p&&h&&!f&&!m&&!b)return n.t("current channel, has notifications, not a member");if(!u&&!d&&v&&!p&&h&&!f&&!m&&!b)return n.t("has notifications, not a member");if(u&&d&&!v&&!p&&h&&!f&&!m&&!b)return n.t("current channel, has unread messages, not a member");if(!u&&d&&!v&&!p&&h&&!f&&!m&&!b)return n.t("has unread messages, not a member");if(u&&!d&&!v&&!p&&h&&!f&&!m&&!b)return n.t("current channel, not a member");if(!u&&!d&&!v&&!p&&h&&!f&&!m&&!b)return n.t("not a member");if(u&&d&&v&&p&&!h&&!f&&!m&&!b)return n.t("current channel, has unread messages and notifications, private");if(!u&&d&&v&&p&&!h&&!f&&!m&&!b)return n.t("has unread messages and notifications, private");if(u&&!d&&v&&p&&!h&&!f&&!m&&!b)return n.t("current channel, has notifications, private");if(!u&&!d&&v&&p&&!h&&!f&&!m&&!b)return n.t("has notifications, private");if(u&&d&&!v&&p&&!h&&!f&&!m&&!b)return n.t("current channel, has unread messages, private");if(!u&&d&&!v&&p&&!h&&!f&&!m&&!b)return n.t("has unread messages, private");if(u&&!d&&!v&&p&&!h&&!f&&!m&&!b)return n.t("current channel, private");if(!u&&!d&&!v&&p&&!h&&!f&&!m&&!b)return n.t("private");if(u&&d&&v&&!p&&!h&&!f&&!m&&!b)return n.t("current channel, has unread messages and notifications");if(!u&&d&&v&&!p&&!h&&!f&&!m&&!b)return n.t("has unread messages and notifications");if(u&&!d&&v&&!p&&!h&&!f&&!m&&!b)return n.t("current channel, has notifications");if(!u&&!d&&v&&!p&&!h&&!f&&!m&&!b)return n.t("has notifications");if(u&&d&&!v&&!p&&!h&&!f&&!m&&!b)return n.t("current channel, has unread messages");if(!u&&d&&!v&&!p&&!h&&!f&&!m&&!b)return n.t("has unread messages");if(u&&!d&&!v&&!p&&!h&&!f&&!m&&!b)return n.t("current channel");return""}();if(r&&!_&&!y)return n.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:r});if(!r&&!_&&y)return n.t("{channelName} ({context})",{channelName:t,context:y});if(r&&!_&&y)return n.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:r,context:y});if(!r&&_&&!y)return n.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_});if(r&&_&&!y)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_,previousChannelName:r});if(!r&&_&&y)return n.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,context:y});if(r&&_&&y)return n.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,previousChannelName:r,context:y});if(t)return t;return""}},22647:function(e,t,r){"use strict";t["a"]=s;var a=r(5);var n=r(22146);var i=new a["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.isGuest,a=e.isSelf,s=e.isAppOrBot,o=e.isDeleted,c=e.isPrescenceAway,l=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,v=e.isCurrent,p=e.hasNotifications,h=e.isStarred,f=e.isMuted,m=e.hasDraft,b=e.featureLabelsForCoreObjects;if(!b)return null;var g=function(){if(o)return i.t("deactivated");if(s)return i.t("APP");if(r&&!c&&l)return i.t("guest, do not disturb");if(r&&c&&!l)return i.t("guest, away");if(r&&!c&&!l)return i.t("guest");if(a&&!c&&l)return i.t("you, do not disturb");if(a&&!c&&!l)return i.t("you");if(!r&&!c&&l)return i.t("do not disturb");if(!r&&c&&!l)return i.t("away");return""}();var _=u&&Object(n["a"])(u);var y=function(){if(_&&!d)return i.t("{statusEmoji} emoji",{statusEmoji:_});if(_&&d)return i.t("{statusEmoji} emoji {statusText}",{statusEmoji:_,statusText:d});if(!_&&d)return d;return""}();var O=function(){if(v&&p&&f&&h&&m)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!v&&p&&f&&h&&m)return i.t("has notifications, muted, starred, has a draft message");if(v&&!p&&f&&h&&m)return i.t("current conversation, muted, starred, has a draft message");if(!v&&!p&&f&&h&&m)return i.t("muted, starred, has a draft message");if(v&&p&&!f&&h&&m)return i.t("current conversation, has notifications, starred, has a draft message");if(!v&&p&&!f&&h&&m)return i.t("has notifications, starred, has a draft message");if(v&&!p&&!f&&h&&m)return i.t("current conversation, starred, has a draft message");if(!v&&!p&&!f&&h&&m)return i.t("starred, has a draft message");if(v&&p&&f&&!h&&m)return i.t("current conversation, has notifications, muted, has a draft message");if(!v&&p&&f&&!h&&m)return i.t("has notifications, muted, has a draft message");if(v&&!p&&f&&!h&&m)return i.t("current conversation, muted, has a draft message");if(!v&&!p&&f&&!h&&m)return i.t("muted, has a draft message");if(v&&p&&!f&&!h&&m)return i.t("current conversation, has notifications, has a draft message");if(!v&&p&&!f&&!h&&m)return i.t("has notifications, has a draft message");if(v&&!p&&!f&&!h&&m)return i.t("current conversation, has a draft message");if(!v&&!p&&!f&&!h&&m)return i.t("has a draft message");if(v&&p&&f&&h&&!m)return i.t("current conversation, has notifications, muted, starred");if(!v&&p&&f&&h&&!m)return i.t("has notifications, muted, starred");if(v&&!p&&f&&h&&!m)return i.t("current conversation, muted, starred");if(!v&&!p&&f&&h&&!m)return i.t("muted, starred");if(v&&p&&!f&&h&&!m)return i.t("current conversation, has notifications, starred");if(!v&&p&&!f&&h&&!m)return i.t("has notifications, starred");if(v&&!p&&!f&&h&&!m)return i.t("current conversation, starred");if(!v&&!p&&!f&&h&&!m)return i.t("starred");if(v&&p&&f&&!h&&!m)return i.t("current conversation, has notifications, muted");if(!v&&p&&f&&!h&&!m)return i.t("has notifications, muted");if(v&&!p&&f&&!h&&!m)return i.t("current conversation, muted");if(!v&&!p&&f&&!h&&!m)return i.t("muted");if(v&&p&&!f&&!h&&!m)return i.t("current conversation, has notifications");if(!v&&p&&!f&&!h&&!m)return i.t("has notifications");if(v&&!p&&!f&&!h&&!m)return i.t("current conversation");return""}();if(t&&g&&y&&O)return i.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:g,status:y,context:O});if(t&&!g&&y&&O)return i.t("{name}, status: {status} ({context})",{name:t,status:y,context:O});if(t&&g&&!y&&O)return i.t("{name} ({userInfo}) ({context})",{name:t,userInfo:g,context:O});if(t&&!g&&!y&&O)return i.t("{name} ({context})",{name:t,context:O});if(t&&g&&y&&!O)return i.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:g,status:y});if(t&&!g&&y&&!O)return i.t("{name}, status: {status}",{name:t,status:y});if(t&&g&&!y&&!O)return i.t("{name} ({userInfo})",{name:t,userInfo:g});if(t)return t;return""}},22648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21839);Object(a["a"])("interop.currency",{formatCurrency:n["a"]})},22649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(398);var o=r(23049);Object(i["a"])("interop.desktop",n()({},s,o))},22650:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(3044);Object(a["a"])("interop.environment",n)},22651:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,r=e.prefix,n=e.suffix;if(!t)return t;var i=t;if(r&&!Object(a["startsWith"])(i,r)){var s=i.search(/\S/);i=s>0?i.slice(0,s)+r+i.slice(s):r+i}if(n&&!Object(a["endsWith"])(i,n)){var o=i.search(/\s+$/);o>0?i=i.slice(0,o)+n+i.slice(o):i+=n}return i}},22652:function(e,t){},22653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21726);Object(a["a"])("interop.search_autocomplete",{suggestions:n["q"],AutocompleteQuerySuggestion:n["i"],AutocompleteSuggestionType:n["b"],querySuggestionCache:n["o"],queryHistoryCache:n["n"],fileSuggestionCache:n["m"]})},22654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21871);Object(a["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},22655:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21783);var n=r(42);Object(n["a"])("interop.threads",{getThreadKey:a["b"]})},22656:function(e,t,r){"use strict";t["a"]=a;function a(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}},22657:function(e,t,r){"use strict";r.d(t,"b",function(){return o});r.d(t,"c",function(){return c});r.d(t,"a",function(){return l});var a=r(189);var n=r.n(a);var i="_GA";var s=function e(t){return""+i+t};var o=function e(t){return n()({},t,{is_app_action:true,originalId:t.id,id:s(t.id)})};var c=function e(t){return t.startsWith(i)};var l=function e(t){if(!c(t))return null;return t.slice(i.length)}},22658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(21718);Object(a["a"])("interop.versions",n)},2282:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2283);var n=r(42);Object(n["a"])("interop.mountKeyboardShortcuts",a["a"])},2283:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(2284);var l=function e(t,r,a){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["c"])(t);var u=a;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(c["a"],u)),r)};t["a"]=l},2284:function(e,t,r){"use strict";var a=r(2285);var n=r(1101);var i=r(1100);t["a"]=a["a"]},2285:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(333);var g=r(9);var _=r(21942);var y=r(21751);var O=r(12);var k=r(21720);var j=r(5);var C=r(22968);var E=r(497);var S=r(21832);var w=r(1100);var I=r(1103);var T=r(20239);var N=r.n(T);var R={os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,keyboardLocale:h.a.string,sections:h.a.arrayOf(h.a.shape({os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,title:h.a.string,shortcuts:h.a.arrayOf(h.a.shape({os:h.a.oneOf(["windows","mac","linux"]),browser:h.a.string,title:h.a.string,keys:h.a.array,keysLinux:h.a.array,keysWin:h.a.array,hasInfoButton:h.a.bool,infoButtonMessage:h.a.string,id:h.a.string,isSsbOnly:h.a.bool,browserBlackList:h.a.array}))})).isRequired,isShowing:h.a.bool,useGlobalNav:h.a.bool};var A={os:null,browser:null,keyboardLocale:null,isShowing:true,useGlobalNav:false};var M=new j["b"]("shortcuts_flexpane");var P=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderSections",value:function e(){var t=this;return m.a.map(this.props.sections,function(e){return v.a.createElement(w["a"],{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,key:e.id+e.title,title:e.title,id:e.id,shortcuts:e.shortcuts})})}},{key:"renderHeading",value:function e(){if(this.props.useGlobalNav)return null;var t="mac"===this.props.os?M.t("Cmd"):M.t("Ctrl");var r=Object(k["c"])("/",{kb:this.props.keyboardLocale});var a=M.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:t,headerSlashButton:r});return v.a.createElement(S["a"],null,v.a.createElement("span",{id:"shortcuts_tab_aria_label"},M.t("Keyboard Shortcuts")),v.a.createElement("span",{className:"p-shortcuts_flexpane__sub_heading block"},a))}},{key:"render",value:function e(){var t=this;var r=this.props.isShowing;if(!r)return null;return v.a.createElement("div",{className:"p-shortcuts_flexpane"},this.renderHeading(),v.a.createElement("div",{className:"p-shortcuts_flexpane__section"},v.a.createElement(b["a"],null,function(e){var r=e.width,a=e.height;return v.a.createElement(E["a"],{width:r,height:a,monkey:true},t.renderSections())})))}}]);return t}(v.a.PureComponent);P.displayName="KeyboardShortcutsList";P.defaultProps=A;function x(e,t){var r=Object(_["getKeyboardLocale"])(e);var a=Object(y["getFlexpaneState"])(e),n=a.flexName;var i=Object(O["isFeatureEnabled"])(e,"feature_texty_formatting_commands");var s=Object(O["isFeatureEnabled"])(e,"feature_jump_to_unread_shortcut");var o=Object(O["isFeatureEnabled"])(e,"feature_a11y_custom_status");var c=Object(O["isFeatureEnabled"])(e,"feature_threads_copy_change");return{sections:t.sections||Object(I["a"])(r,{featureTextyFormattingCommands:i,featureJumpToUnreadShortcut:s,featureA11yCustomStatus:o,featureThreadsCopyChange:c}),isShowing:"shortcuts"===n,useGlobalNav:Object(C["b"])(e)}}t["a"]=Object(g["connect"])(x)(P)},22883:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(21714);var l=r(12);var u=r(21697);var d=r(907);var v=r(5);var p=new v["b"]("global_nav");var h=function e(t){var r=t.name,a=t.isChannel,i=t.featureGlobalNav;if(!i)return null;var s=void 0;s=r?a?p.t("Thread in {channelName}",{channelName:r}):p.t("Thread with {displayName}",{displayName:r}):p.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},s)};h.displayName="ThreadHeader";h.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var f=function e(t){var r=Object(c["getFlexParams"])(t)[0];var a=r&&r.split("-")[0];var n=Object(u["getChannelById"])(t,a);if(!n)return null;return{name:Object(d["getDisplayNameForChannel"])(t,n),isChannel:Object(d["isPublicChannel"])(n)||Object(d["isPrivateChannel"])(n),featureGlobalNav:Object(l["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(f)(h)},22884:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(85);var s=r(12);var o=r(22050);var c=r(3270);var l=r(3182);var u=r(88);var d=r(21759);var v="PRESENCE-MANAGER";var p=function e(t,r,n){if(!Object(d["a"])()&&!Object(s["isFeatureEnabled"])(n(),"feature_sonic_presence_manager"))return;var i=Object(c["getTeamId"])(n());var u=Object(o["b"])(i);if(!u||Object(a["isEmpty"])(u))return;r(Object(l["info"])(v,"Sending the presence subscription after establishing a websocket connection"));r(Object(o["d"])())};Object(u["b"])({actions:[i["connected"]],sideEffect:p})},22887:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(9);var m=r(3);var b=r.n(m);var g=r(21712);var _=r(5);var y=r(12);var O=r(3271);var k=r(3241);var j=r(1066);var C=r(283);var E=r(1007);var S=new _["b"]("file-details");var w={fileId:b.a.string.isRequired,share:b.a.shape({sharedTeamIds:b.a.arrayOf(b.a.string),teamId:b.a.string,channelId:b.a.string,channelName:b.a.string,isPublic:b.a.bool,ts:b.a.string,threadTs:b.a.string,replyCount:b.a.number}).isRequired,teamIdForIcon:b.a.string,teamDomain:b.a.string,openThread:b.a.func,featureFileThreads:b.a.bool};var I={teamIdForIcon:void 0,teamDomain:void 0,openThread:v.a.noop,featureFileThreads:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onShareClick=r.onShareClick.bind(r);return r}s()(t,[{key:"onShareClick",value:function e(t){var r=this.props,a=r.share,n=r.fileId,i=r.openThread;t.preventDefault();var s=a.threadTs||a.ts;var o=s!==a.ts?a.ts:null;var c="file_details";var l=n;i({channelId:a.channelId,threadTs:s,highlightTs:o,origin:c,originId:l})}},{key:"getReplyCountText",value:function e(t){if(!this.props.featureFileThreads)return null;var r=t||{},a=r.replyCount,n=r.ts,i=r.threadTs;if(!a)return null;var s="";s=i&&n!==i?S.t("from a thread"):S.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});return h.a.createElement(h.a.Fragment,null,h.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),s)}},{key:"render",value:function e(){var t=this.props,r=t.share,a=t.teamIdForIcon,n=t.teamDomain;var i=void 0;var s=false;var o=void 0;var c=void 0;if(a){i={id:r.channelId,name:r.channelName,is_channel:true,is_private:!r.isPublic,shared_team_ids:r.sharedTeamIds,team_id:a};s=true}else c=this.onShareClick;n&&(o=Object(E["constructAbsoluteMsgPermalink"])({teamDomain:n,channelId:r.channelId,ts:r.ts,threadTs:r.threadTs}));return h.a.createElement("div",{className:"p-file_details__share",key:r.channelId+"_"+r.ts},h.a.createElement(C["a"],{href:o,onClick:c},h.a.createElement(k["a"],{channel:i,channelId:r.channelId,className:"p-file_details__share_channel",iconProps:{inherit:true},showTeamIconForXwsChannels:s})),h.a.createElement("span",{className:"p-file_details__share_metadata"},h.a.createElement(j["a"],{timestamp:r.ts,relative:true}),this.getReplyCountText(r)))}}]);return t}(p["Component"]);T.displayName="FileDetailsShareLocation";T.defaultProps=I;function N(e,t){var r=t.share;var a=Object(O["getCurrentTeam"])(e);if(!a)return{};var n=a.id;var i=a.enterprise_id;var s=a.domain;var o=void 0;var c=r.teamId===i&&!v.a.isEmpty(r.sharedTeamIds)&&!v.a.includes(r.sharedTeamIds,n);var l=r.teamId&&r.teamId!==n&&r.teamId!==i;if(c||l){o=v.a.first(r.sharedTeamIds)||r.teamId;var u=Object(O["getTeamsByIdAndMaybeFetchUnknownTeams"])(e,[o]);s=u&&u.length?u[0].domain:null}return{teamIdForIcon:o,teamDomain:s,featureFileThreads:Object(y["isFeatureEnabled"])(e,"feature_file_threads")}}t["a"]=Object(f["connect"])(N,{openThread:g["d"]})(T)},22920:function(e,t,r){"use strict";t["a"]=v;var a=r(21697);var n=r(3271);var i=r(21698);var s=r(12);var o=r(54);var c=r(907);var l=r(3203);var u=r(21703);var d=r(1535);function v(e,t){var r=Object(a["getChannelById"])(e,t);var n=Object(i["getMemberById"])(e,Object(c["getMemberIdFromIm"])(r));if(!r)return false;if(Object(s["pageNeedsEnterprise"])(e)&&(Object(c["isExternallySharedChannel"])(r)||Object(c["isOrgDefaultChannel"])(r)))return false;if(!Object(c["isIm"])(r)&&!p(e))return h(e);if(n&&Object(l["B"])(n))return false;if(n&&Object(l["S"])(n))return false;return true}function p(e){var t=Object(n["getCurrentTeam"])(e);return Object(d["a"])()&&Object(u["isPaidTeam"])(t)}function h(e){var t=Object(o["getTeamPref"])(e,"calling_app_name");return!!(t&&"Slack"!==t)}},22921:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(37);var l=r(60);var u=r(3184);var d=r(21697);var v=r(12);var p=r(907);var h=r(22920);var f=r(1535);var m=r(5);var b=new m["b"]("global_nav");var g={show:s.a.bool,channel:s.a.object,featureGlobalNav:s.a.bool};var _={show:false,channel:void 0,featureGlobalNav:false};var y=function e(t){var r=t.show,a=t.channel,i=t.featureGlobalNav;if(!r||!a||!i)return null;return n.a.createElement(l["d"],{position:"bottom",tip:b.t("Start a call"),offsetY:-4},n.a.createElement(u["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(f["c"])(a)}},n.a.createElement(c["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};y.displayName="CallButton";y.defaultProps=_;var O=function e(t,r){var a=r.channelId;var n=Object(d["getChannelById"])(t,a);if(!n)return null;return{show:Object(h["a"])(t,a)&&(Object(p["isIm"])(n)||Object(p["isMpim"])(n)),channel:n,featureGlobalNav:Object(v["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(O)(y)},22925:function(e,t,r){"use strict";var a=r(22926);t["a"]=a["a"]},22926:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(5);var O=r(3111);var k=r(21860);var j=r(283);var C=r(37);var E=r(69);var S=r(147);var w=r(128);var I=r(1037);var T=r(21801);var N=new y["b"]("migration_table");var R={enterpriseName:m.a.string.isRequired,orgURL:m.a.string,scheduled:m.a.bool,fetchMigrationHistory:m.a.func.isRequired,fetchCurrentAndFutureMigrations:m.a.func.isRequired,featureMigrationStatus:m.a.bool.isRequired};var A={scheduled:false,orgURL:null};var M=function(e){v()(t,e);function t(e){var r;s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(!e.featureMigrationStatus)return r=null,u()(a,r);a.state={completeMigrations:[],scheduledMigrations:[],isCompleteLoading:true,isScheduledLoading:true,errorAlert:false};a.rowTemplate={items:[{value:function e(t){var r=a.renderWorkspaceRow(t.team.icon.image_34,t.team.name,t.team.domain);return r}},{value:function e(t){var r=void 0;switch(t.migration_info.status){case"in_progress":r=h.a.createElement("div",{className:"p-migration_table__in_progress"},h.a.createElement(E["a"],{color:"blue",size:"small"}),h.a.createElement("b",null,N.rt("In Progress")));break;case"scheduled":r=Object(S["a"])(t.migration_info.date_scheduled)+" - "+Object(w["a"])(t.migration_info.date_scheduled);break;case"complete":r=Object(S["a"])(t.migration_info.date_finished)+" - "+Object(w["a"])(t.migration_info.date_finished);break;default:break}return r}},{value:function e(t){var r="in_progress"===t.migration_info.status?a.renderLink(t.migration_info.id):"";return r}}]};return a}c()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.callFetchCurrentAndFutureMigrations();return this.callPastMigrations()}},{key:"componentDidUpdate",value:function e(t){var r=this.props.scheduled;if(r!==t.scheduled){if(r)return this.callFetchCurrentAndFutureMigrations();return this.callPastMigrations()}return g["noop"]}},{key:"callFetchCurrentAndFutureMigrations",value:function e(){var t=this;var r=this.props.fetchCurrentAndFutureMigrations;var a={isScheduledLoading:true};this.setState(a);return r().then(function(e){var r=Object(g["sortBy"])(e[1],[function(e){return e.migration_info.date_scheduled}]);var a=[].concat(n()(e[0]),n()(r));var i=[];a.length>0&&(i=t.updateRowListItemsData(a));var s={scheduledMigrations:i,isScheduledLoading:false};t.setState(s)}).catch(function(){var e={errorAlert:true,isScheduledLoading:false};t.setState(e)})}},{key:"callPastMigrations",value:function e(){var t=this;var r=this.props.fetchMigrationHistory;var a={isCompleteLoading:true};this.setState(a);return r().then(function(e){var r=Object(g["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);var a=t.updateRowListItemsData(r);var n={completeMigrations:a,isCompleteLoading:false};t.setState(n)}).catch(function(){var e={errorAlert:true,isCompleteLoading:false};t.setState(e)})}},{key:"createHeaders",value:function e(){var t=this.props,r=t.featureMigrationStatus,a=t.scheduled;if(!r)return null;var n=a?N.t("Scheduled for"):N.t("Completed on");return[{id:"workspace_under_migration",value:N.t("Workspace")},{id:"when_migration",value:n},{id:"link_to_migration_status",value:""}]}},{key:"updateRowListItemsData",value:function e(t){var r=this;var a=[];var n=0;var i=0;function s(){i+=1;return"row_"+n+"_item"+i}function o(e,t){var r={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var a={value:t.value(e),id:s()};r.items.push(a)});n+=1;return r}t&&t.length&&t.forEach(function(e){a.push(o(e,r.rowTemplate))});return a}},{key:"displayErrorAlert",value:function e(){var t=this.props.featureMigrationStatus;if(!t)return null;return h.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-table-error-alert":true},h.a.createElement("span",{className:"p-migration_table__empty_state_icon"},h.a.createElement(C["b"],{type:"warning-filled"})),h.a.createElement("div",{className:"p-migration_table__empty_state_title"},N.rt("Unable to load past migrations")),h.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},N.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,r=e.text;return h.a.createElement("a",{key:t,href:"https://slack.com/help/contact"},r)})))}},{key:"renderMigrationCount",value:function e(t){var r=this.props.featureMigrationStatus;if(!r)return null;var a=N.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return a}},{key:"renderTable",value:function e(t){var r=this.props.featureMigrationStatus;if(!r)return null;var a=this.createHeaders();return h.a.createElement("div",{className:"c-migration_table_indent_half"},h.a.createElement(k["b"],{headers:a,rows:t,height:"700px","data-qa-migration-table-rows":true}))}},{key:"renderWorkspaceRow",value:function e(t,r,a){return h.a.createElement("div",{className:"p-migration_table__row"},h.a.createElement("img",{className:"p-migration_table__workspace_image_container",src:t,alt:r}),h.a.createElement("div",{className:"p-migration_table__workspace_text"},h.a.createElement("div",{className:"p-migration_table__workspace_name"},r),h.a.createElement("div",{className:"p-migration_table__workspace_domain"},a+".slack.com")))}},{key:"renderLink",value:function e(t){var r=this.props,a=r.featureMigrationStatus,n=r.orgURL;if(!a)return null;return h.a.createElement("div",{className:"p-migration_table__link"},h.a.createElement(j["a"],{href:n+"/migrations/"+t+"/status"},h.a.createElement("span",null,N.t("View Migration Status"))),h.a.createElement(C["b"],{type:"chevron-right"}))}},{key:"renderProgress",value:function e(){return h.a.createElement("div",{className:"p-migration_table__loading"},h.a.createElement(E["a"],{color:"blue",size:"medium","data-qa-migration-loading-spinner":true}))}},{key:"renderScheduled",value:function e(t){var r=this.state.isScheduledLoading;if(!r){var a=0===t.length?this.renderEmptyScheduled():h.a.createElement("div",null,h.a.createElement(O["a"],{title:this.renderMigrationCount(t.length),"data-qa-migration-count-action-bar":true}),this.renderTable(t));return a}return this.renderProgress()}},{key:"renderComplete",value:function e(t){var r=this.state.isCompleteLoading;if(!r){var a=0===t.length?this.renderEmptyComplete():this.renderTable(t);return a}return this.renderProgress()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props,r=t.featureMigrationStatus,a=t.enterpriseName;if(!r)return null;return h.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-empty-scheduled":true},h.a.createElement("div",{className:"p-migration_table__empty_state_title"},N.rt("No scheduled migrations.")),h.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},N.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:a})))}},{key:"renderEmptyComplete",value:function e(){var t=this.props,r=t.featureMigrationStatus,a=t.enterpriseName;if(!r)return null;return h.a.createElement("div",{className:"p-migration_table__empty_state","data-qa-migration-empty-complete":true},h.a.createElement("div",{className:"p-migration_table__empty_state_title"},N.rt("No past migrations.")),h.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},N.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:a})))}},{key:"render",value:function e(){var t=this.props,r=t.featureMigrationStatus,a=t.scheduled;var n=this.state,i=n.scheduledMigrations,s=n.completeMigrations,o=n.errorAlert;if(!r)return null;if(o)return this.displayErrorAlert();return a?this.renderScheduled(i):this.renderComplete(s)}}]);return t}(p["PureComponent"]);M.displayName="MigrationTableView";M.defaultProps=A;var P=function e(t,r){var a=r.enterpriseDomain;var n=function e(){return Object(I["k"])(t)};var i=function e(){return Object(I["j"])(t)};var s=Object(T["a"])(t,a);return{fetchMigrationHistory:n,fetchCurrentAndFutureMigrations:i,orgURL:s}};var x=M;t["a"]=Object(b["connect"])(P)(M)},22929:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(263);var c=r.n(o);var l=r(21697);var u=r(907);var d=r(3271);var v=Object(o["createSelector"])(function(e,t){var r=t.channelId;return Object(l["getChannelById"])(e,r)},function(e){var t=Object(u["getSharedTeamIds"])(e)||[];var r=Object(u["getPendingSharedTeamIds"])(e)||[];return[].concat(n()(t),n()(r))});var p=Object(o["createSelector"])(v,d["getAllTeams"],function(e,t){var r=Object(i["map"])(e,function(e){return t[e]});return Object(i["compact"])(r)});t["a"]=p},22930:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(8);var l=r.n(c);var u=r(37);var d=r(60);var v=r(3184);var p=r(21697);var h=r(12);var f=r(21751);var m=r(907);var b=r(1557);var g=r(5);var _=new g["b"]("channel_header");var y={isChannel:s.a.bool,active:s.a.bool,featureGlobalNav:s.a.bool};var O={isChannel:true,active:false,featureGlobalNav:false};var k=function e(t){var r=t.isChannel,a=t.active,i=t.featureGlobalNav;if(!i)return null;var s=void 0;r&&a&&(s=_.t("Hide channel details"));r&&!a&&(s=_.t("View channel details"));!r&&a&&(s=_.t("Hide conversation details"));r||a||(s=_.t("View conversation details"));var o=l()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":a});return n.a.createElement(d["d"],{position:"bottom-right",tip:s,offsetY:-4},n.a.createElement(v["c"],{className:o,onClick:function e(){return Object(b["d"])("details")}},n.a.createElement(u["b"],{type:"info-circle"})))};k.displayName="Details";k.defaultProps=O;var j=function e(t,r){var a=r.channelId;var n=Object(p["getChannelById"])(t,a);if(!n)return null;return{isChannel:Object(m["isPublicChannel"])(n)||Object(m["isPrivateChannel"])(n),active:"details"===Object(f["getFlexpaneState"])(t).flexName,featureGlobalNav:Object(h["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(o["connect"])(j)(k)},2294:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2295);var n=r(42);Object(n["a"])("interop.mountLazyFilterSelect",a["a"])},2295:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(711);var l=function e(t,r,a){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var l=Object(o["c"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(c["a"],a)),r)};t["a"]=l},22955:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(11);var O=r.n(y);var k=r(266);var j=r(3184);var C=r(21763);var E=r(21697);var S=r(12);var w=r(90);var I=r(5);var T=new I["b"]("global_nav");var N={channelId:m.a.string.isRequired,channel:m.a.object,close:m.a.func,back:m.a.func,featureGlobalNav:m.a.bool};var R={channel:void 0,close:g["noop"],back:g["noop"],featureGlobalNav:false};var A=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onDateChange=r.onDateChange.bind(r);return r}c()(t,[{key:"onDateChange",value:function e(t){var r=t.selectedDate;var a=this.props,n=a.channelId,i=a.close;var s=O()(r,"YYYY-MM-DD").format("X");Object(w["m"])(n,s);i()}},{key:"render",value:function e(){var t=this.props,r=t.channel,a=t.back,i=t.featureGlobalNav;if(!i)return null;var s=r.created?O()(r.created,"X").format("YYYY-MM-DD"):void 0;return h.a.createElement(k["e"],n()({},this.props,{width:325}),h.a.createElement(C["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:O()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),h.a.createElement(j["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back",onClick:a},T.t("Back to menu")))}}]);return t}(p["Component"]);A.displayName="JumpToDate";A.defaultProps=R;var M=function e(t,r){var a=r.channelId;return{channel:Object(E["getChannelById"])(t,a),featureGlobalNav:Object(S["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(b["connect"])(M)(A)},22958:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(3271);var b=r(12);var g=r(21703);var _=r(5);var y=r(22959);var O=r(37);var k=r(283);var j=r(378);var C=r(22960);var E=r.n(C);var S=new _["b"]("search");var w={type:h.a.oneOf(["messages","files"]).isRequired,reason:h.a.oneOf(["messages","storage"]).isRequired,teamPlan:h.a.string.isRequired,teamMessagesCount:h.a.number.isRequired,clogLimitBannerInteraction:h.a.func.isRequired,featureReactSearch:h.a.bool.isRequired};var I={};var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.clogLinkClick=r.clogLinkClick.bind(r);return r}s()(t,[{key:"componentDidMount",value:function e(){if(this.isVisible())switch(this.props.reason){case"messages":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"message_search_link_top"});break;case"storage":this.props.clogLimitBannerInteraction({uiAction:"impression",uiElement:"file_search_pricing_link"});break;default:break}}},{key:"isVisible",value:function e(){return!this.props.teamPlan&&this.props.teamMessagesCount>=10100}},{key:"clogLinkClick",value:function e(){this.props.clogLimitBannerInteraction({uiAction:"click",uiElement:"messages"===this.props.reason?"message_search_link_top":"file_search_pricing_link"})}},{key:"render",value:function e(){var t=this.props,r=t.type,a=t.reason,n=t.featureReactSearch;if(!n)return null;if(this.isVisible()){var i=void 0;i="messages"===r&&"messages"===a?S.t("Some older messages may not be shown because your workspace has over 10,000 messages."):"files"===r&&"messages"===a?S.t("Some older files may not be shown because your workspace has over 10,000 messages."):S.t("Your workspace is over its storage limit.");return v.a.createElement(j["a"],{enabled:["feature_react_search"]},v.a.createElement("div",{className:"p-message_limit_banner"},v.a.createElement("div",{className:"p-message_limit_banner__graphic"},v.a.createElement(O["b"],{type:"eye-closed"})),v.a.createElement("div",{className:"p-message_limit_banner__content"},i,v.a.createElement("br",null),v.a.createElement(k["a"],{href:"/pricing?ui_step=43&ui_element="+("messages"===a?2:3),onClick:this.clogLinkClick,target:"new"},"messages"===a?S.t("Learn more"):S.t("Please upgrade to a paid plan")))))}return null}}]);return t}(d["PureComponent"]);T.displayName="MessageLimitBanner";T.defaultProps=I;var N=function e(t){var r=Object(m["getCurrentTeam"])(t);var a=Object(g["isOverStorageLimit"])(r);return{teamPlan:r.plan,teamMessagesCount:r.messages_count,reason:a?"storage":"messages",featureReactSearch:Object(b["isFeatureEnabled"])(t,"feature_react_search")}};var R={clogLimitBannerInteraction:y["a"]};t["a"]=Object(f["connect"])(N,R)(T)},22959:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(21696);var s=r(91);var o=Object(i["e"])("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.uiElement,n=r.uiAction;Object(s["b"])("GROWTH_PRICING",{contexts:{ui_context:{uiElement:a,uiAction:n,uiStep:"search_pane"}}})});o.propTypes={uiElement:n.a.string.isRequired};t["a"]=o},2296:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2297);var n=r(42);Object(n["a"])("interop.mountMenu",a["a"]);Object(n["a"])("interop.unmountMenu",a["b"])},22960:function(e,t){},22962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(3271);var n=r(3270);var i=r(42);function s(e){var t=TS.redux.getState();var r=Object(n["getTeamId"])(t);Object(a["markObjectsAsFresh"])(r,e)}Object(i["a"])("interop.teams",{markObjectsAsFresh:s})},22963:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(3270);var b=r(12);var g=r(3241);var _=r(37);var y=r(60);var O=r(5);var k=new O["b"]("global_nav");var j={viewId:h.a.string,viewName:h.a.string,teamId:h.a.string,teamName:h.a.string,teamIcon:h.a.string,currentTeamId:h.a.string,featureGlobalNav:h.a.bool,featureThreadsCopyChange:h.a.bool};var C={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false,featureThreadsCopyChange:false};var E=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,r=t.teamIcon,a=t.teamName;return v.a.createElement(y["d"],{tip:a,position:"bottom",zIndex:"above_fs"},v.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+r+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,r=t.teamId,a=t.currentTeamId,n=t.featureGlobalNav,i=t.featureThreadsCopyChange;if(!n)return null;var s=r===a?v.a.createElement(_["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var o=i?k.t("Threads"):k.t("All Threads");return v.a.createElement(d["Fragment"],null,s,o)}},{key:"renderUnreads",value:function e(){var t=this.props,r=t.teamId,a=t.currentTeamId,n=t.featureGlobalNav;if(!n)return null;var i=r===a?v.a.createElement(_["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var s=k.t("All Unreads");return v.a.createElement(d["Fragment"],null,i,s)}},{key:"render",value:function e(){var t=this.props,r=t.viewId,a=t.viewName,n=t.teamId,i=t.currentTeamId;if("Vall_threads"===r)return this.renderThreads();if("Vall_unreads"===r)return this.renderUnreads();if(n===i)return v.a.createElement(g["a"],{channelId:r,className:"p-global_nav__top_history_item_channel_name"});return v.a.createElement(d["Fragment"],null,this.renderTeamIcon(),a)}}]);return t}(d["Component"]);E.displayName="HistoryItem";E.defaultProps=C;var S=function e(t){return{currentTeamId:Object(m["getTeamId"])(t),featureGlobalNav:Object(b["isFeatureEnabled"])(t,"feature_global_nav"),featureThreadsCopyChange:Object(b["isFeatureEnabled"])(t,"feature_threads_copy_change")}};t["a"]=Object(f["connect"])(S)(E)},22964:function(e,t,r){"use strict";var a=r(22965);t["a"]=a["a"]},22965:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(21741);var g=r(140);var _=r(2194);var y=r.n(_);var O=r(22966);var k=r(22967);var j={ids:h.a.array.isRequired,renderItem:h.a.func.isRequired,itemAriaLabel:h.a.func.isRequired,onSelectItem:h.a.func};var C={onSelectItem:f["noop"]};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(f["bindAll"])(r,["onFocusLeave","onItemFocus","onArrowKeyDown","setContainerRef"]);r.state={activeItem:null};r.inferredActiveItem=null;r.containerRef=null;r.keyCommands=null;return r}s()(t,[{key:"onArrowKeyDown",value:function e(t){var r=this;t.preventDefault();var a=0;t.keyCode===_["codes"].up&&(a=-1);t.keyCode===_["codes"].down&&(a=1);0!==a&&this.setState(function(){return{activeItem:Object(k["a"])(r.props.ids,r.state.activeItem,r.inferredActiveItem,a)}})}},{key:"onItemFocus",value:function e(t){var r=t.id,a=t.isLifeCycleUpdate;if(a)return;this.inferredActiveItem=r;this.setState(function(){return{activeItem:null}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{activeItem:null}});this.inferredActiveItem=null}},{key:"setContainerRef",value:function e(t){this.containerRef=t;if(this.keyCommands){this.keyCommands.reset();this.keyCommands=null}if(this.containerRef){var r=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:true}];this.keyCommands=new g["a"](this.containerRef);this.keyCommands.bindAll(r)}}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.ids,n=r.itemAriaLabel,i=r.renderItem,s=r.onSelectItem;return v.a.createElement(b["a"],{onFocusLeave:this.onFocusLeave},v.a.createElement("div",{role:"list",ref:this.setContainerRef},a.map(function(e){return v.a.createElement(O["a"],{key:e,id:e,ariaLabel:n(e),focused:t.state.activeItem===e,onFocusEnter:t.onItemFocus,onSelect:s},i(e))})))}}]);return t}(d["PureComponent"]);E.displayName="FocusManagedList";E.defaultProps=C;t["a"]=E},22966:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(2194);var g=r.n(b);var _=r(21741);var y={id:h.a.any.isRequired,focused:h.a.bool.isRequired,onFocusEnter:h.a.func.isRequired,onSelect:h.a.func.isRequired,ariaLabel:h.a.string.isRequired,children:h.a.any.isRequired};var O=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(f["bindAll"])(e,["setContainerRef","onFocusEnter","onKeyDown"]);e.focusedAfterUpdate=false;return e}s()(t,[{key:"componentDidUpdate",value:function e(t){if(!t.focused&&this.props.focused&&this.container){this.focusedAfterUpdate=true;this.container.focus()}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;if(r&&"mousedown"===r.type)return;this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate});this.focusedAfterUpdate&&(this.focusedAfterUpdate=false)}},{key:"onKeyDown",value:function e(t){t.keyCode===b["codes"].enter&&t.target===this.container&&this.props.onSelect(t,this.props.id)}},{key:"setContainerRef",value:function e(t){this.container=t}},{key:"render",value:function e(){var t=this.props,r=t.ariaLabel,a=t.children;return v.a.createElement(_["a"],{onFocusEnter:this.onFocusEnter},v.a.createElement("div",{tabIndex:"-1",className:"c-focus_manage_list__item",ref:this.setContainerRef,role:"listitem","aria-label":r,onKeyDown:this.onKeyDown},a))}}]);return t}(d["PureComponent"]);O.displayName="FocusManagedListItem";t["a"]=O},22967:function(e,t,r){"use strict";t["a"]=a;function a(e,t,r,a){if(0===e.length)return null;if(null===t&&null!==r)return r;var n=e.indexOf(t);var i=n+a;i>=e.length?i=e.length-1:-1===n&&a<0?i=e.length-1:i<0&&(i=0);return e[i]}},22969:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var a=r(21696);var n=r(21742);var i=r(212);var s=r(22446);var o=r(1068);var c=r(21725);var l=r(268);var u=r(21712);var d=r(277);var v=r(1104);var p=Object(a["e"])("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){var r=t();var a=Object(n["getSearchAutocompleteSuggestions"])(r)[Object(n["getSearchAutocompleteSelectedIndex"])(r)||0];if(!a)return;e(Object(s["a"])({suggestion:a}));if(a.is_type_query_completion){var p=Object(i["l"])(a.suggestion_replacement);e(Object(o["setEditableRequestQueryThenRequest"])({query:p}));e(Object(c["setSearchInputBoxDisplayQuery"])({displayQuery:p}));e(Object(l["setInterfaceMode"])({interfaceMode:l["interfaceModes"].SEARCH_RESULTS}))}else if(a.is_type_navigational){a.is_type_file?e(Object(u["b"])({fileId:a.file.id})):e(Object(d["a"])({id:a.id}));e(Object(c["setSearchInputBoxUserQuery"])({userQuery:""}));Object(v["c"])()}});p.propTypes={}},2297:function(e,t,r){"use strict";r.d(t,"a",function(){return f});r.d(t,"b",function(){return m});var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(50);var c=r.n(o);var l=r(9);var u=r(21709);var d=r(49);var v=r(21708);var p=r(332);var h=r(266);var f=function e(t,r,a,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=function e(){return r};var c="react_menu_render";Object(v["d"])(c+"_mark");Object(u["a"])(s.a.createElement(l["Provider"],{store:Object(d["c"])(t)},s.a.createElement(p["a"],n()({},i,{parentSelector:o,shouldFade:false}),s.a.createElement(h["a"],a))),r,function(){return Object(v["f"])(c,c+"_mark")})};var m=c.a.unmountComponentAtNode;var b={mountMenu:f,unmountMenu:m}},22972:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(9);var h=r(3);var f=r.n(h);var m=r(12);var b=r(23039);var g=r(21952);var _=r(5);var y=r(3184);var O=r(266);var k=r(22590);var j=r(20251);var C=r.n(j);var E=new _["b"]("user_groups");var S={userGroup:f.a.object,onEditMembers:f.a.func.isRequired,onEditDetails:f.a.func.isRequired,featureSonicUserGroups:f.a.bool.isRequired};var w={userGroup:void 0};var I=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderUserGroupOptionsMenu=r.renderUserGroupOptionsMenu.bind(r);return r}s()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return v.a.createElement(k["a"],{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){return v.a.createElement(O["d"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},v.a.createElement(y["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,icon:"ellipsis"}))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(y["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},E.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(y["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},E.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(g["g"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(d["Component"]);I.displayName="UserGroupsDetailsActionBar";var T=function e(t,r){var a=r.groupId;return{userGroup:Object(b["getUserGroupById"])(t,a),featureSonicUserGroups:Object(m["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};I.defaultProps=w;t["a"]=Object(p["connect"])(T)(I)},22975:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"addCustomEmoji",function(){return d});r.d(t,"setNewCustomEmojiData",function(){return v});r.d(t,"removeCustomEmoji",function(){return p});r.d(t,"setIsLoading",function(){return h});r.d(t,"getCustomEmojiData",function(){return b});r.d(t,"getCustomEmojiTotalCount",function(){return g});r.d(t,"getLastPageRetrieved",function(){return _});r.d(t,"getTotalPages",function(){return y});r.d(t,"getIsLoading",function(){return O});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u;var d=Object(l["a"])("Sets the map of custom emoji in the store");d.propTypes={newCustomEmojiData:c.a.object,customEmojiTotalCount:c.a.number};var v=Object(l["a"])("Sets the map of custom emoji in the store");v.propTypes={newCustomEmojiData:c.a.object,customEmojiTotalCount:c.a.number};var p=Object(l["a"])("Removes the specified custom emoji from the store");p.propTypes=c.a.string;var h=Object(l["a"])("Set the loading status for the API request");h.propTypes=c.a.bool.isRequired;var f={customEmojiCount:0,customEmojiData:{},isLoading:false,currentPage:0,totalPages:0};var m=Object(l["c"])((u={},n()(u,d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.newCustomEmojiData,a=t.customEmojiTotalCount,n=t.currentPage,i=t.totalPages;var o=s()({},e,{customEmojiData:s()({},e.customEmojiData,r),customEmojiCount:a,currentPage:n,totalPages:i});return o}),n()(u,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.newCustomEmojiData,a=t.customEmojiTotalCount,n=t.currentPage,i=t.totalPages;var o=s()({},e,{customEmojiData:r,customEmojiCount:a,currentPage:n,totalPages:i});return o}),n()(u,p,function(e,t){var r=e.customEmojiData;var a=e.customEmojiCount;Object.keys(r).forEach(function(e){if(e===t||r[e].is_alias&&r[e].alias_for===t){delete r[e];a-=1}});var n=s()({},e,{customEmojiData:r,customEmojiCount:a});return n}),n()(u,h,function(e,t){var r=s()({},e,{isLoading:t});return r}),u),f);t["default"]=m;var b=Object(l["d"])(function(e){if(e&&!!e.customizeEmoji&&!!e.customizeEmoji.customEmojiData)return e.customizeEmoji.customEmojiData;return{}});var g=Object(l["d"])(function(e){if(e&&!!e.customizeEmoji&&!!e.customizeEmoji.customEmojiCount)return e.customizeEmoji.customEmojiCount;return 0});var _=Object(l["d"])(function(e){if(e&&!!e.customizeEmoji&&!!e.customizeEmoji.currentPage)return e.customizeEmoji.currentPage;return 0});var y=Object(l["d"])(function(e){if(e&&!!e.customizeEmoji&&!!e.customizeEmoji.totalPages)return e.customizeEmoji.totalPages;return 0});var O=Object(l["d"])(function(e){if(e&&!!e.customizeEmoji&&!!e.customizeEmoji.isLoading)return e.customizeEmoji.isLoading;return false})},22978:function(e,t,r){"use strict";r.d(t,"a",function(){return i});r.d(t,"b",function(){return n});r.d(t,"c",function(){return a});var a={NUMBER_OF_USERS_IS_REQUIRED:"number_of_users_is_required",PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS:"invalid_po_number",NUMBER_OF_USERS_INVALID_CHARACTERS:"invalid_number_of_users",NUMBER_OF_USERS_INVALID_MIN_ALLOWED:"invalid_min_number_of_users",NUMBER_OF_USERS_INVALID_MAX_ALLOWED:"invalid_max_number_of_users"};var n={NUMERIC_WITH_MIN_MAX_LENGTH_REGEX:/^\d{1,20}$/,NUMERIC_REGEX:/^\d+$/};var i={NUMBER_OF_USERS:"numberOfUsers",ADDITIONAL_BILLING_CONTACTS:"additionalBillingContacts",PURCHASE_ORDER_NUMBER:"purchaseOrderNumber"}},22979:function(e,t,r){"use strict";t["a"]=u;t["b"]=d;var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(5);var c=r(22978);var l=new o["b"]("checkout_v2");function u(e,t,r,a){var n=f(t,r,a);if(Object(i["isEmpty"])(n))return{};var s={};var o=e.numberOfUsers,c=e.purchaseOrderNumber;var l=v(c,n);l&&(s.purchaseOrderNumber=l);var u=p(o,t,r,n);u&&(s.numberOfUsers=u);return s}function d(e,t,r,a,n){var s=null;var o=f(r,a,n);if(Object(i["isEmpty"])(o))return s;var l=e.numberOfUsers,u=e.purchaseOrderNumber;switch(t){case c["a"].PURCHASE_ORDER_NUMBER:s=v(u,o);break;case c["a"].NUMBER_OF_USERS:s=p(l,r,a,o);break;default:}return s}function v(e,t){var r=null;e&&!c["b"].NUMERIC_WITH_MIN_MAX_LENGTH_REGEX.test(e)&&(r=h(c["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,t));return r}function p(e,t,r,a){var n=null;e?c["b"].NUMERIC_REGEX.test(e)?e<t?n=h(c["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,a):e>r&&(n=h(c["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,a)):n=h(c["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,a):n=h(c["c"].NUMBER_OF_USERS_IS_REQUIRED,a);return n}function h(e,t){return t[e]||{}}function f(e,t){var r;var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!a)return{};return r={},n()(r,c["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,{errorText:l.t("Please enter a valid number between 1 and 20 digits long.")}),n()(r,c["c"].NUMBER_OF_USERS_IS_REQUIRED,{errorText:l.t("Please fill in number of users.")}),n()(r,c["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,{errorText:l.t("Please enter a valid number.")}),n()(r,c["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,{errorText:l.t("Sorry, payment by invoice requires {minInvoiceSeats} or more Users.",{minInvoiceSeats:e})}),n()(r,c["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,{errorText:l.t("Sorry, payment by invoice requires {maxInvoiceSeats} or fewer Users.",{maxInvoiceSeats:t})}),r}},2298:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2299);var n=r(42);Object(n["a"])("interop.mountMessagePane",a["a"])},22980:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(22050);Object(a["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},22985:function(e,t,r){var a=r(9393);function n(e){var t=null==e?0:e.length;return t?a(e,1):[]}e.exports=n},22986:function(e,t,r){var a=r(22990),n=r(22991);function i(e,t){return n(e||[],t||[],a)}e.exports=i},22989:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(22985);var s=r.n(i);var o=r(22986);var c=r.n(o);var l=r(21699);var u=r(21945);var d=r(21702);var v=r(191);var p=r(264);var h=r(5);var f=new h["b"]("cmd_handlers");var m=Object(l["b"])("/collapse slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=Object.values(Object(d["getMessagesByChannelId"])(t(),a)||{});var i=s()(n.map(p["b"]));var o=c()(i,i.map(function(){return false}));e(Object(v["bulkSetExpanded"])(o));Object(u["a"])(f.t("I\u2019ve collapsed all files in this channel for you."),{temporary:false})});m.propTypes={channelId:n.a.string.isRequired};t["a"]=m},2299:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(1561);var l=function e(t,r){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["c"])(t)},n.a.createElement(c["a"],null)),r)};t["a"]=l},22990:function(e,t,r){var a=r(9467),n=r(9388);var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,r){var i=e[t];s.call(e,t)&&n(i,r)&&(void 0!==r||t in e)||a(e,t,r)}e.exports=o},22991:function(e,t){function r(e,t,r){var a=-1,n=e.length,i=t.length,s={};while(++a<n){var o=a<i?t[a]:void 0;r(s,e[a],o)}return s}e.exports=r},22992:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(22985);var s=r.n(i);var o=r(22986);var c=r.n(o);var l=r(21699);var u=r(21945);var d=r(21702);var v=r(191);var p=r(264);var h=r(5);var f=new h["b"]("cmd_handlers");var m=Object(l["b"])("/expand slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=Object.values(Object(d["getMessagesByChannelId"])(t(),a)||{});var i=s()(n.map(p["b"]));var o=c()(i,i.map(function(){return true}));e(Object(v["bulkSetExpanded"])(o));Object(u["a"])(f.t("I\u2019ve expanded all files in this channel for you."),{temporary:false})});m.propTypes={channelId:n.a.string.isRequired};t["a"]=m},22996:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(1);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(113);var k=r(384);var j=r(380);var C=r(1090);var E=r(907);var S=r(5);var w=r(334);var I=r(93);var T=r(77);var N=r(265);var R=r(21741);var A=r(1066);var M=r(1465);var P=r(988);var x=r(381);var D=r(474);var F=r(149);var L=r(21983);var B=r(1490);var U=r(378);var q=r(1539);var H=r(1541);var W=r(37);var G=r(60);var V=r(1058);var z=r(3189);var K=r(20169);var Q=r.n(K);var Y=new S["b"]("search");var J={iid:g.a.string.isRequired,ts:g.a.string.isRequired,permalink:g.a.string.isRequired,user:g.a.string.isRequired,username:g.a.string,text:g.a.string.isRequired,botId:g.a.string,botProfile:g.a.shape({app_id:g.a.string.isRequired,deleted:g.a.bool,icons:g.a.obj,id:g.a.string,name:g.a.string,updated:g.a.number}),channel:g.a.shape({id:g.a.string.isRequired,name:g.a.string.isRequired}).isRequired,extracts:g.a.arrayOf(g.a.shape({text:g.a.string,truncated_head:g.a.bool,truncated_tail:g.a.bool})),files:g.a.arrayOf(O["a"].File()),subtype:g.a.string,theme:g.a.string,hasAdHocSender:g.a.bool.isRequired,expanded:g.a.bool,onClick:g.a.func,onFileClick:g.a.func,onRepliesClick:g.a.func,onExpand:g.a.func.isRequired,canBeTruncated:g.a.bool.isRequired,attachments:g.a.array,reactions:g.a.array,onExpandHoverStart:g.a.func,onExpandHoverEnd:g.a.func,reply_count:g.a.number,featureReactSearch:g.a.bool.isRequired,onLinkClick:g.a.func};var Z={username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:false,onClick:h.a.noop,onFileClick:h.a.noop,onRepliesClick:h.a.noop,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:h.a.noop,onExpandHoverEnd:h.a.noop,reply_count:0,onLinkClick:h.a.noop};var X=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasKeyboardFocus:false};Object(p["bindAll"])(r,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick"]);r.dragging=false;r.dragStartX=null;r.dragStartY=null;return r}c()(t,[{key:"onClick",value:function e(t){if(t.target.dataset.memberId)return;if("BUTTON"===t.target.tagName||"BUTTON"===t.target.parentNode.tagName)return;if(t.target.dataset.channelId||t.target.dataset.messageSender||("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented){this.onLinkClick(t);return}var r=false;if(this.dragging){var a=Math.pow(t.clientX-this.dragStartX,2)+Math.pow(t.clientY-this.dragStartY,2);r=a>16;this.dragging=false}r||t.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onFileClick",value:function e(t,r){var a=r.file;t.preventDefault();this.props.onFileClick(t,{file:a,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function e(t){t.preventDefault();this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function e(t){t.preventDefault();t.stopPropagation();var r=this.props,a=r.channel,n=r.ts,i=r.files,s=r.subtype;var o=this.props.permalink||Object(I["b"])(a.id,n);i&&i.length&&"file_comment"!==s&&(o=i[0].permalink);Object(w["writeText"])(o)}},{key:"onExpandHoverStart",value:function e(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function e(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function e(t){if((1===t.button||1===t.buttons)&&!this.dragging){this.dragging=true;this.dragStartX=t.clientX;this.dragStartY=t.clientY}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onLinkClick",value:function e(t){var r={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};t.target.dataset.channelId?r.type="channel":t.target.dataset.messageSender?r.type="sender":("A"===t.target.tagName&&"_blank"===t.target.target||"A"===t.target.parentNode.tagName&&"_blank"===t.target.parentNode.target)&&!t.defaultPrevented&&(r.type="link");r.type&&this.props.onLinkClick(r)}},{key:"expand",value:function e(t){t.preventDefault();t.stopPropagation();this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function e(){if(!this.props.featureReactSearch)return null;return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("button",{onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},m.a.createElement(G["d"],{tip:Y.t("Show more")},m.a.createElement("span",{className:"c-search__expand_ellipsis"},"..."))))}},{key:"renderExpandButton",value:function e(){if(!this.props.featureReactSearch)return null;return m.a.createElement("button",{onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},m.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",Y.t("Show more")))}},{key:"renderText",value:function e(){var t=this;var r=this.props,a=r.text,n=r.extracts,i=r.expanded,s=r.canBeTruncated;if(!(a.length||n.length))return null;if(i||!s)return m.a.createElement("div",{className:"c-search_message__body"},m.a.createElement(T["a"],{text:a,convertHighlightCharacters:true}));if(n.length)return m.a.createElement("div",{className:"c-search_message__body"},m.a.createElement(f["Fragment"],null,n.map(function(e,r){var a=0===r&&e.truncated_head;var i=e.truncated_tail;var o=r===n.length-1;return m.a.createElement(f["Fragment"],{key:r},a?t.renderEllipsisButton():null,m.a.createElement(T["a"],{text:e.text,convertHighlightCharacters:true}),!i||s&&o?null:t.renderEllipsisButton(),s&&o?t.renderExpandButton():null)})));return m.a.createElement("div",{className:"c-search_message__body"},m.a.createElement(T["a"],{text:a,convertHighlightCharacters:true}))}},{key:"renderAvatar",value:function e(){var t=this.props,r=t.user,a=t.hasAdHocSender,n=t.botId;return m.a.createElement(N["b"],{className:"c-search_message__avatar",ariaHidden:true,userId:r,isAdHocMember:a,botId:n,size:36,isInteractive:true,showCard:true,showTooltip:true,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props,r=t.ts,a=t.permalink;return m.a.createElement(A["b"],{timestamp:r,relative:false,full:false,link:a})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return m.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar());return m.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.user,a=t.botId,n=t.botProfile,i=t.username,s=t.theme,o=t.channel;return m.a.createElement("div",{className:"c-search_message__content_header"},m.a.createElement(B["a"],{userId:r,botId:a,botProfile:n,username:i,channelName:Object(E["getDisplayName"])(o),isInteractive:true}),"light"===s&&this.renderTimestamp())}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.attachments,i=r.expanded,s=r.ts,o=r.channel,c=r.canBeTruncated;if(!a.length)return null;if(i||!c)return h.a.map(a,function(e){return m.a.createElement(M["a"],n()({key:o.id},Object(k["b"])(e),{messageTs:s,activeChannelId:o.id,showDelete:false}))});var l=h.a.map(a,function(e){var r=Object(k["b"])(e);var a=null;if(Object(j["c"])(r)){var n=r.serviceIcon||r.authorIcon;var i=r.serviceName||r.authorName;var o=i===r.authorName?r.authorSubname:r.authorName;a=m.a.createElement("div",null,m.a.createElement(x["a"],{icon:n,name:i,link:r.serviceUrl||r.authorLink,subname:o,subnameLink:r.authorLink}))}var c=r.extracts;var l=null;c&&c.title&&(l=m.a.createElement("div",{className:"c-search_message__attachment_title"},h.a.map(c.title,function(e,t){var r=0===t&&e.truncated_head;var a=e.truncated_tail;return m.a.createElement(f["Fragment"],{key:t}," ",r?"\u2026":null,$(e.text),a?"\u2026":null)})));var u=null;c&&c.pretext&&(u=h.a.map(c.pretext,function(e,r){var a=0===r&&e.truncated_head;var n=e.truncated_tail;return m.a.createElement("span",{className:"c-message_attachment__pretext",key:r}," ",m.a.createElement(f["Fragment"],null,a?t.renderEllipsisButton():null,m.a.createElement(T["a"],{text:e.text,convertHighlightCharacters:true}),n?t.renderEllipsisButton():null))}));var d=null;c&&c.text&&(d=h.a.map(c.text,function(e,r){var a=0===r&&e.truncated_head;var n=e.truncated_tail;return m.a.createElement(f["Fragment"],{key:r}," ",a?t.renderEllipsisButton():null,m.a.createElement(T["a"],{text:e.text,convertHighlightCharacters:true}),n?t.renderEllipsisButton():null)}));var v=null;Object(j["f"])(r)&&(v=m.a.createElement("div",null,m.a.createElement(D["a"],{botId:r.botId,icon:r.footerIcon,isAppUnfurl:r.isAppUnfurl,text:r.footer,ts:s})));return m.a.createElement("div",{className:"c-search_message__attachment"},m.a.createElement(P["a"],{color:r.color}),m.a.createElement("div",{className:"c-search_message__attachment_body"},a,l,u,d,v))});return m.a.createElement("div",{className:"c-search_message__attachments"},l)}},{key:"renderReactionsAndReplies",value:function e(){var t=this.props.reactions;var r=this.props.reply_count;if(!t.length&&!r)return null;var a=h.a.chain(t).sortBy("count").take(2).value();var n=h.a.sumBy(t,"count");var i=null;var s=null;n>0&&(i=m.a.createElement("span",{className:"c-search_message__reactions_count"},Y.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:n})));r>0&&(s=m.a.createElement(z["a"],{className:"c-search_message__replies_count",onClick:this.onRepliesClick},m.a.createElement(W["a"],{type:"comment-alt"}),Y.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:r})));return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement("div",{className:"c-search_message__reactions"},h.a.map(a,function(e){return m.a.createElement(F["a"],{text:":"+e.name+":",key:e.name})}),i,s))}},{key:"renderFile",value:function e(){var t=this.props.files;if(!t||!t.length)return null;var r=t[0];if(!r)return null;return m.a.createElement(L["a"],{key:r.id,file:r,onClick:this.onFileClick,hasHighlightMarkers:true})}},{key:"renderActions",value:function e(){var t=y()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return m.a.createElement(U["a"],{enabled:["feature_react_search"]},m.a.createElement(q["a"],{className:t,ariaLabel:Y.t("Message actions")},m.a.createElement(H["a"],{iconType:"link",label:Y.t("Copy link"),onClick:this.onCopyLink})))}},{key:"render",value:function e(){var t=this.props,r=t.theme,a=t.canBeTruncated,n=t.expanded;var i=y()("c-search_message","c-search_message--"+r,{"c-search_message--collapsed":!n&&a,"c-search_message--focus":this.state.hasKeyboardFocus});return m.a.createElement(R["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{className:i,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),m.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFile(),this.renderActions())))}}]);return t}(f["PureComponent"]);X.displayName="SearchResult";function $(e){return Object(C["a"])(e,function(e,t){return m.a.createElement("span",{className:"c-search__match",key:t},e)})}X.defaultProps=Z;t["a"]=Object(V["a"])("feature_react_search")(X)},22997:function(e,t,r){"use strict";var a=r(22998);t["a"]=a["a"]},22998:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(115);var h=r(22999);var f=r(23001);var m=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={hasError:false};return e}s()(t,[{key:"componentDidCatch",value:function e(t,r){Object(p["d"])(t,"Error caught by ProtectedSearchMessage "+r.componentStack,void 0,false);this.setState(function(){return{hasError:true}})}},{key:"render",value:function e(){if(this.state.hasError)return v.a.createElement(h["a"],this.props);return v.a.createElement(f["a"],this.props)}}]);return t}(d["PureComponent"]);m.displayName="ProtectedSearchMessage";t["a"]=m},22999:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(9);var c=r(265);var l=r(1490);var u=r(5);var d=r(54);var v=r(378);var p=r(12);var h=r(23e3);var f=r.n(h);var m=new u["b"]("search");var b={featureTinyspeck:s.a.bool,ts:s.a.string,channel:s.a.object,user:s.a.string,theme:s.a.string};var g={featureTinyspeck:false,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};function _(e){var t=e.user,r=e.theme,a=e.ts,i=e.channel,s=e.featureTinyspeck;if(s)return n.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},n.a.createElement("strong",null,"Message ",a," in ",i.id||"[Channel id missing]"," failed to render. "),"Please go to #triage-search and ",n.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.");return n.a.createElement(v["a"],{enabled:["feature_react_search"]},n.a.createElement("div",{className:"c-search_message c-search_message--"+r},n.a.createElement("div",{className:"c-search_message__gutter"},n.a.createElement(c["b"],{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),n.a.createElement("div",{className:"c-search_message__content"},n.a.createElement("div",{className:"c-search_message__content_header"},n.a.createElement(l["a"],{userId:t||"",isInteractive:true})),n.a.createElement("div",{className:"c-search_message__body sk_dark_gray"},m.t("There was an error displaying this message.")))))}_.displayName="ErrorSearchMessage";_.defaultProps=g;var y=function e(t){var r="";var a=false;try{r=Object(d["getUserMessagesTheme"])(t);a=Object(p["isFeatureEnabled"])(t,"feature_tinyspeck")}catch(e){}return{theme:r,featureTinyspeck:a}};t["a"]=Object(o["connect"])(y)(_)},2300:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2301);var n=r(42);Object(n["a"])("interop.mountOrgRetentionRequest",a["a"])},23000:function(e,t){},23001:function(e,t,r){"use strict";var a=r(9);var n=r(1);var i=r.n(n);var s=r(54);var o=r(12);var c=r(1560);var l=r(22996);var u=function e(t,r){var a=r.bot_id,n=r.bot_profile,l=r.thread_ts;var u=Object(s["getUserMessagesTheme"])(t);var d=i.a.some(r.extracts,function(e){return e.truncated_head||e.truncated_tail})&&r.text.length>200||!!(r.attachments&&r.attachments.length);return{botId:a,botProfile:n,threadTs:l,theme:u,hasAdHocSender:Object(c["a"])(r),featureTinyspeck:Object(o["isFeatureEnabled"])(t,"feature_tinyspeck"),canBeTruncated:d}};var d=null;t["a"]=Object(a["connect"])(u,d)(l["a"])},2301:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(9);var s=r(21709);var o=r(49);var c=r(2312);var l=r(58);var u=r(2302);var d=function e(t,r,a,d){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var v=Object(o["c"])(t);var p=function n(i,s){Object(c["b"])(i,s).then(function(){e(t,r,a,d)}).catch(function(e){return Object(l["f"])("Failed to submit retention request:",e)})};Object(c["a"])(a).then(function(e){var t=e.id,a=e.has_permission,o=e.all_org_owners,c=e.current_settings,l=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:v},n.a.createElement(u["a"],{submitRequest:p,orgId:t,orgName:d,hasPermission:a,orgOwners:o,currentSettings:c,pendingData:l})),r)}).catch(function(e){return Object(l["f"])("Failed to fetch retention settings:",e)})};t["a"]=d},23011:function(e,t,r){"use strict";var a=r(21707);var n=r(23009);function i(e,t){t(Object(n["upsertCall"])(Object(n["convertRtmRoomMessageForRedux"])(e.room)))}Object(a["a"])("sh_room_join",i);Object(a["a"])("sh_room_leave",i);Object(a["a"])("sh_room_update",i)},23019:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(332);var y=r(11);var O=r.n(y);var k=r(215);var j=r(21763);var C=r(3189);var E=r(37);var S={onDateChange:m.a.func.isRequired,isDateDisabled:m.a.func.isRequired,date:m.a.string,disableDatesAfter:m.a.string,disableDatesBefore:m.a.string,dateLabel:m.a.string.isRequired,dateAriaLabel:m.a.string.isRequired,removeAriaLabel:m.a.string.isRequired};var w={date:null,disableDatesBefore:null,disableDatesAfter:null};var I=-360;var T=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(d["bindAll"])(r,["onClearDateChange"]);return r}s()(t,[{key:"onClearDateChange",value:function e(){this.props.onDateChange(null)}},{key:"render",value:function e(){var t=this.props,r=t.onDateChange,a=t.date,n=t.isDateDisabled,i=t.disableDatesBefore,s=t.disableDatesAfter,o=t.dateLabel,c=t.dateAriaLabel,l=t.removeAriaLabel;var u="";u="es"===O.a.locale()?a?O()(a,"YYYY-MM-DD").format("DD/MM/YYYY"):"":a?Object(k["e"])(O()(a,"YYYY-MM-DD")):"";var d=g()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!a});return h.a.createElement("div",{className:"p-search_filter__date"},h.a.createElement(_["b"],{ariaHasPopup:true,position:"bottom",offsetY:I,renderPopover:function e(t){return h.a.createElement(_["a"],t,h.a.createElement("div",{className:"p-block_kit_date_picker_calendar_wrapper"},h.a.createElement(j["a"],{showInput:false,selectedDate:a,onDateChange:function e(a){var n=a.selectedDate;t.onClose();r(n)},isDateDisabled:n,disableDatesBefore:i,disableDatesAfter:s})))}},h.a.createElement(C["a"],{className:d,ariaLabel:a?void 0:c},h.a.createElement("div",{className:"p-search_filter__date_label"},o),h.a.createElement("div",{className:"p-search_filter__date_readout"},u),a?null:h.a.createElement(E["b"],{type:"calendar",className:"p-search_filter__calendar_icon"}))),a?h.a.createElement(C["a"],{ariaLabel:l,className:"p-search_filter__date_close",onClick:this.onClearDateChange},h.a.createElement(E["b"],{type:" c-icon--times-small"})):null)}}]);return t}(p["PureComponent"]);T.displayName="DateSelector";T.defaultProps=w;t["a"]=T},2302:function(e,t,r){"use strict";var a=r(2303);t["a"]=a["a"]},23023:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(1068);var _=r(115);var y=r(2316);var O={resetSearchAfterUnknownUIError:h.a.func.isRequired};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={hasError:false};r.retryRender=Object(m["throttle"])(r.retryRender.bind(r),100,{leading:false});return r}s()(t,[{key:"componentDidUpdate",value:function e(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function e(t,r){Object(_["d"])(t,"Error caught by ProtectedSearch "+r.componentStack,void 0,false);this.setState(function(){return{hasError:true}});this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function e(){this.setState(function(){return{hasError:false}})}},{key:"render",value:function e(){if(this.state.hasError)return null;return v.a.createElement(y["a"],null)}}]);return t}(d["PureComponent"]);k.displayName="ProtectedSearch";var j={resetSearchAfterUnknownUIError:g["resetSearchAfterUnknownUIError"]};t["a"]=Object(f["connect"])(null,j)(k)},2303:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(96);var h=r.n(p);var f=r(3);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(5);var k=r(1058);var j=r(2304);var C=r(2305);var E=r(2306);var S=r(2307);var w=r(2308);var I=r(715);var T=r(20249);var N=r.n(T);var R=new O["b"]("policy-retention");var A={orgId:m.a.string.isRequired,hasPermission:m.a.bool.isRequired,orgName:m.a.string.isRequired,orgOwners:m.a.object.isRequired,currentSettings:m.a.object.isRequired,submitRequest:m.a.func.isRequired,pendingData:m.a.object,featureGdprExports:m.a.bool.isRequired};var M={pendingData:{}};var P=function(e){h()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false,isSubmittable:false};r.onUpdatePolicySelect=r.onUpdatePolicySelect.bind(r);r.onUpdateRequesterSelect=r.onUpdateRequesterSelect.bind(r);r.onMcUserInput=r.onMcUserInput.bind(r);r.onSubmitRequest=r.onSubmitRequest.bind(r);r.onCancelRequest=r.onCancelRequest.bind(r);r.onCloseModal=r.onCloseModal.bind(r);r.onOpenModal=r.onOpenModal.bind(r);return r}u()(t,[{key:"onUpdatePolicySelect",value:function e(t){var r=t.policyType,a=t.data;var i=this.props.featureGdprExports;var o=this.state.requestedSettings;var c=o[r]||{};var l=this.props.currentSettings[r];var u=s()({},l,c,a);var d=void 0;var v=Object(I["a"])({policyType:r,settingValues:u,featureGdprExports:i});d=y.a.isEqual(l,v)?y.a.omit(o,r):s()({},this.state.requestedSettings,n()({},r,u));this.setState(function(){return{requestedSettings:d}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var r=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",r)})}},{key:"onCancelRequest",value:function e(){var t=this;var r={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",r)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var r=this.state,a=r.requestedSettings,n=r.mcUser,i=r.requester;var s=y.a.reduce(a,function(e,r,a){e[a]=Object(I["a"])({policyType:a,settingValues:r,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var r=this.state.requestedSettings;return y.a.every(r,function(e,r){var a=e.retention_duration,n=e.retention_type;return!(Object(I["f"])({policyType:r,retentionType:n,featureGdprExports:t})&&(0===a||""===a))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,r=t.requestedSettings,a=t.mcUser,n=t.requester;return this.isFormDataValid()&&!y.a.isEmpty(r)&&!y.a.isUndefined(a)&&!y.a.isEmpty(a)&&!y.a.isUndefined(n)&&!y.a.isEmpty(n)}},{key:"maybeRenderPendingAlert",value:function e(t,r,a){if(t)return g.a.createElement(C["a"],{requestTimestamp:y.a.parseInt(a),requesterName:r});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var r=!y.a.isEmpty(this.props.pendingData);var a=this.props.pendingData,n=a.date_create,i=a.requester;if(r){var s=i.name;t=g.a.createElement(j["a"],{orgName:this.props.orgName,requestDate:n,requesterName:s,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var o=this.state.requester.name;t=g.a.createElement(j["a"],{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:o,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,r,a){var n=this.props.featureGdprExports;return g.a.createElement(w["a"],{displaySettings:y.a.get(this.state.requestedSettings,t)||y.a.get(this.props.currentSettings,t),currentSettings:a?y.a.get(this.props.currentSettings,t):{},pendingSettings:y.a.get(r,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:Object(I["c"])({policyType:t,featureGdprExports:n}),isFormPending:a})}},{key:"renderButtons",value:function e(){var t=!y.a.isEmpty(this.props.pendingData);var r=this.isFormSubmittable();var a=void 0;a=t?g.a.createElement("div",null,g.a.createElement("button",{type:"button",className:"btn btn_outline disabled margin_right_75",disabled:true},R.t("Request Submitted")),g.a.createElement("button",{className:"btn btn_outline",onClick:this.onOpenModal},R.t("Cancel"))):r?g.a.createElement("div",null,g.a.createElement("button",{className:"btn",onClick:this.onOpenModal},R.t("Continue"))):g.a.createElement("div",null,g.a.createElement("button",{className:"btn btn_outline disabled",disabled:true},R.t("Continue")));return a}},{key:"render",value:function e(){var t=!y.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var r=this.props.pendingData,a=r.requested_settings,n=r.mc_user,i=r.requester,s=r.date_create;return g.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),g.a.createElement("div",null,this.maybeRenderPendingAlert(!y.a.isEmpty(this.props.pendingData),n,s),g.a.createElement("div",{className:"p-org_retention_request__section_header"},R.t("Message Retention")),g.a.createElement("div",null,this.renderPolicyItem("channels",a,t)),g.a.createElement("div",null,this.renderPolicyItem("private_channels",a,t)),g.a.createElement("div",null,this.renderPolicyItem("dms",a,t)),g.a.createElement("div",null,this.renderPolicyItem("allow_override",a,t)),g.a.createElement("div",{className:"p-org_retention_request__section_header"},R.t("File Retention")),g.a.createElement("div",null,this.renderPolicyItem("files",a,t)),g.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},R.t("Authorization")),g.a.createElement("p",{className:"margin_bottom_200"},R.t("Please include information about who is requesting this update, and your name.")),g.a.createElement("div",null,g.a.createElement("div",null,g.a.createElement(E["a"],{users:this.props.orgOwners,currentSelectionValue:y.a.get(this.state.requester,"id")||y.a.get(i,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),g.a.createElement(S["a"],{currentUserValue:this.state.mcUser||n,isDisabled:t,placeholder:R.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(g.a.Component);P.displayName="OrgRetentionRequest";P.defaultProps=M;t["a"]=Object(k["a"])("feature_gdpr_exports")(P)},23030:function(e,t,r){"use strict";var a=r(23031);t["a"]=a["a"]},23031:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(8);var c=r.n(o);var l=r(9);var u=r(60);var d=r(5);var v=r(12);var p=r(23032);var h=r.n(p);var f=new d["b"]("app_token");var m={type:n.a.oneOf(["unknown","non-existent"]),subtler:n.a.bool,featureAppsStoreM11n:n.a.bool.isRequired};var b={type:"unknown",subtler:false};var g=function e(t){var r=t.featureAppsStoreM11n;if(!r)return null;var a=c()("c-missing_app",{"c-missing_app--unknown":"unknown"===t.type,"c-missing_app--nonexistent":"non-existent"===t.type,"c-missing_app--subtler":t.subtler});if("unknown"===t.type)return s.a.createElement(u["d"],{tip:r?f.t("Loading\u2026"):""},s.a.createElement("span",{className:a}));if("non-existent"===t.type)return s.a.createElement(u["d"],{tip:r?f.t("Private app info"):""},s.a.createElement("span",{className:a}));return null};g.defaultProps=b;var _=function e(t){return{featureAppsStoreM11n:Object(v["isFeatureEnabled"])(t,"feature_apps_store_m11n")}};t["a"]=Object(l["connect"])(_)(g)},23032:function(e,t){},2304:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(1058);var y=r(37);var O=r(5);var k=r(235);var j=r(715);var C=new O["b"]("policy-retention");var E={orgName:v.a.string.isRequired,requesterName:v.a.string.isRequired,onConfirm:v.a.func.isRequired,onCancel:v.a.func.isRequired,requestedPolicies:v.a.object,currentPolicies:v.a.object,requestDate:v.a.string,cancelRequest:v.a.bool,featureGdprExports:v.a.bool.isRequired};var S={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClickCloseOrCancelButton=r.onClickCloseOrCancelButton.bind(r);r.onClickSubmitButton=r.onClickSubmitButton.bind(r);return r}s()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,r=t.requesterName,a=t.orgName;return h.a.createElement("div",null,h.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},h.a.createElement("p",{className:"p-org_retention_request--font_bump"},h.a.createElement("strong",null,r,"\u2019s")," requested changes are listed below. Once you\u2019ve clicked ",h.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",a," to confirm the change."),h.a.createElement("p",null,h.a.createElement("strong",null,"Your name will be included with this request."))),h.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(k["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return h.a.createElement("div",null,h.a.createElement("h2",{className:"margin_bottom_150"},C.t("Are you sure you\u2019d like to cancel the retention policy update request?")),h.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",h.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",h.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var r=this.props.featureGdprExports;return m.a.map(this.props.requestedPolicies,function(e,a){var n=e.retention_type,i=e.retention_duration,s=e.is_locked;var o=0!==n&&"allow_override"!==a||s?n:4;var c=m.a.get(t.props.currentPolicies,a);var l=c.retention_type,u=c.retention_duration,d=c.is_locked;var v=0!==l&&"allow_override"!==a||d?l:4;return h.a.createElement("div",{key:a,className:"p-org_retention_request__modal_section"},h.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},Object(j["c"])({policyType:a,featureGdprExports:r})),h.a.createElement("div",null,h.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe ",h.a.createElement("span",{className:"margin_left_50"},C.t("New:")," ",Object(j["b"])({policyType:a,retentionType:o,policyDurationValue:i,featureGdprExports:r}))),h.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb ",h.a.createElement("span",{className:"margin_left_50"},C.t("Old:")," ",Object(j["b"])({policyType:a,retentionType:v,policyDurationValue:u,featureGdprExports:r})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":C.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var r=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var a=this.props.cancelRequest?C.t("Confirm Cancellation"):C.t("Confirm with Customer");var n=g()("btn",{btn_danger:this.props.cancelRequest});return h.a.createElement("div",{className:"c-modal c-modal--active"},h.a.createElement("div",{className:"c-modal__background"}),h.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},h.a.createElement(y["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),h.a.createElement("div",{className:"c-modal__header"},h.a.createElement("h2",{className:"margin_bottom_0"},t)),h.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},r,h.a.createElement("div",{className:"margin_bottom_400"},h.a.createElement("button",{type:"button",className:"btn btn_outline margin_right_75",onClick:this.onClickCloseOrCancelButton},C.t("Cancel")),h.a.createElement("button",{type:"button",className:n,onClick:this.onClickSubmitButton},a)))))}}]);return t}(h.a.PureComponent);w.displayName="PolicyRequestModal";w.defaultProps=S;t["a"]=Object(_["a"])("feature_gdpr_exports")(w)},23043:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(8);var _=r.n(g);var y=r(12);var O=r(21697);var k=r(487);var j=r(907);var C=r(5);var E=r(3184);var S=r(37);var w=r(604);var I=r(21958);var T=r(23061);var N=r.n(T);var R=new C["b"]("msg_input");var A=function e(t){if(!t)return"";var r=document.createElement("span");r.innerHTML=t;return r.textContent.trim()};var M={channelId:h.a.string,threadTs:h.a.string,placeholder:h.a.string,prepareAndSendMessage:h.a.func,className:h.a.string,enableEmojiButton:h.a.bool,enableMentionButton:h.a.bool,useLegacyCreate:h.a.bool};var P={channelId:void 0,threadTs:void 0,placeholder:void 0,prepareAndSendMessage:d["noop"],className:void 0,enableEmojiButton:false,enableMentionButton:false,useLegacyCreate:false};var x=function(e){u()(t,e);function t(){n()(this,t);var e=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onEnter=e.onEnter.bind(e);e.setTextyRef=e.setTextyRef.bind(e);e.texty=null;return e}s()(t,[{key:"onEnter",value:function e(t){var r=this;var a=t.shiftKey;var n=this.props,i=n.channelId,s=n.threadTs;if(a)return true;if(this.texty.isEmpty({doIgnoreWhitespace:true}))return false;var o=this.texty.value();var c=this.texty.getContents();this.texty.clear();this.props.prepareAndSendMessage({channelId:i,text:o,replyToTs:s}).catch(function(){r.texty.isEmpty()&&r.texty.setContents(c)});return false}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.placeholder,n=r.className,i=r.channelId,s=r.enableEmojiButton,o=r.enableMentionButton,c=r.useLegacyCreate;var l=A(a);var u=_()(n,"p-message_input");return m.a.createElement("div",{className:u},m.a.createElement(I["g"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,renderInput:function e(r){var n=r.modules,u=r.isOpen;return m.a.createElement(w["g"],{channelId:i,className:"p-message_input_field",ariaLabel:l,placeholder:a,onEnter:t.onEnter,"data-qa":"message_input",ref:t.setTextyRef,useLegacyCreate:c,maxLines:8,modules:n,isAutocompleteOpen:u,enableEmojiButton:s,enableMentionButton:o,focusOnMount:true})}}),m.a.createElement(E["c"],{className:"p-message_input_plus"},m.a.createElement(S["b"],{className:"p-message_input_plus_icon",type:"plus-thick"})))}}]);return t}(f["Component"]);x.displayName="MessageInput";x.defaultProps=P;var D=function e(t){var r=t.state,a=t.channel,n=t.currentUserId;if(a){var i=Object(j["isYou"])(n,a);if(i)return R.t("Jot something down");var s=Object(j["getDisplayNameForChannel"])(r,a,{imIncludeAtSign:false});if(s)return R.t("Message {msg}",{msg:s})}return R.t("Message channel")};var F=function e(t,r){var a=r.channelId,n=r.placeholder;var i=Object(O["getChannelById"])(t,a);var s=Object(y["getCurrentUserId"])(t);return{channelId:a,placeholder:n||D({state:t,channel:i,currentUserId:s})}};var L={prepareAndSendMessage:k["b"]};t["a"]=Object(b["connect"])(F,L)(x)},23044:function(e,t,r){"use strict";var a=r(23043);t["a"]=a["a"]},23046:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(9);var u=r(12);var d=r(3271);var v=r(21698);var p=r(21703);var h=r(5);var f=r(22389);var m=r(266);var b=new h["b"]("global_nav");var g={menuProps:c.a.object,teamId:c.a.string.isRequired,isEnterprise:c.a.bool,enterpriseURL:c.a.string,isAppmin:c.a.bool,featureGlobalNav:c.a.bool};var _={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var y=function e(t){var r=t.featureGlobalNav,a=t.teamId,i=t.isEnterprise,o=t.enterpriseURL,c=t.isAppmin,l=t.menuProps;if(!r)return null;var u=[{label:b.t("Manage members"),href:"/admin"},{label:b.t("Workspace settings"),href:"/admin/settings"},{label:b.t("Organization settings"),href:"https://"+o+"/manage",hide:!i},{label:b.t("Manage apps"),href:"/apps/manage",hide:!c},{label:b.t("Manage shared channels"),click:function e(){return Object(f["a"])(a)},hide:i}].filter(function(e){return!e.hide});return s.a.createElement(m["a"],n()({},l,{template:u}))};y.displayName="TeamAdminSubmenu";y.defaultProps=_;var O=function e(t){var r=Object(d["getCurrentTeam"])(t);return{teamId:r.id,isEnterprise:Object(p["isEnterpriseTeam"])(r),enterpriseURL:Object(u["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(v["isAppmin"])(t),featureGlobalNav:Object(u["isFeatureEnabled"])(t,"feature_global_nav")}};t["a"]=Object(l["connect"])(O)(y)},23049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["supportsCallWindowStatus"]=s;t["setCallWindowBusy"]=o;r.d(t,"isCallWindowBusy",function(){return c});t["setCallWindowToken"]=l;t["clearCallWindowToken"]=u;r.d(t,"getCallWindowToken",function(){return d});t["setCallWindowTeamId"]=v;t["clearCallWindowTeamId"]=p;r.d(t,"getCallWindowTeamId",function(){return h});t["setCallWindowTeamName"]=f;t["clearCallWindowTeamName"]=m;r.d(t,"getCallWindowTeamName",function(){return b});t["setIncomingCallWindowBusy"]=g;r.d(t,"isIncomingCallWindowBusy",function(){return _});t["setIncomingCallWindowToken"]=y;t["clearIncomingCallWindowToken"]=O;r.d(t,"getIncomingCallWindowToken",function(){return k});t["setIncomingCallWindowTeamId"]=j;t["clearIncomingCallWindowTeamId"]=C;r.d(t,"getIncomingCallWindowTeamId",function(){return E});t["setIncomingCallWindowTeamName"]=S;t["clearIncomingCallWindowTeamName"]=w;r.d(t,"getIncomingCallWindowTeamName",function(){return I});var a=r(172);var n=r.n(a);var i=r(398);function s(){return Object(i["hasDeviceStorage"])()}function o(e){Object(i["setItem"])("isCallWindowBusy",e)}var c=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("isCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function l(e){Object(i["setItem"])("callWindowToken",e)}function u(){Object(i["removeItem"])("callWindowToken")}var d=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("callWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function v(e){Object(i["setItem"])("callWindowTeamId",e)}function p(){Object(i["removeItem"])("callWindowTeamId")}var h=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("callWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function f(e){Object(i["setItem"])("callWindowTeamName",e)}function m(){Object(i["removeItem"])("callWindowTeamName")}var b=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("callWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function g(e){Object(i["setItem"])("isIncomingCallWindowBusy",e)}var _=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("isIncomingCallWindowBusy"));case 3:t=r.sent;return r.abrupt("return","true"===t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return",false);case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function y(e){Object(i["setItem"])("incomingCallWindowToken",e)}function O(){Object(i["removeItem"])("incomingCallWindowToken")}var k=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("incomingCallWindowToken"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function j(e){Object(i["setItem"])("incomingCallWindowTeamId",e)}function C(){Object(i["removeItem"])("incomingCallWindowTeamId")}var E=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("incomingCallWindowTeamId"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function S(e){Object(i["setItem"])("incomingCallWindowTeamName",e)}function w(){Object(i["removeItem"])("incomingCallWindowTeamName")}var I=function(){var e=Object(a["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return Object(a["resolve"])(Object(i["getItem"])("incomingCallWindowTeamName"));case 3:t=r.sent;return r.abrupt("return",t);case 7:r.prev=7;r.t0=r["catch"](0);return r.abrupt("return","");case 10:case"end":return r.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}()},2305:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(235);var l=r(5);var u=new l["b"]("policy-retention");var d=function e(t){var r=Object(c["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var a=u.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:r});var n=u.t("If you need to modify this request, please cancel it and initiate a new one. ");return s.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},s.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),s.a.createElement("strong",null,a),s.a.createElement("p",{className:"no_margin"},n))};d.displayName="PendingRequestAlert";t["a"]=Object(o["pure"])(d)},23050:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(21699);var s=r(21705);var o=r(23051);var c=Object(i["b"])("Opens the invite (new users) modal",function(e){e(Object(s["openModal"])({element:n.a.createElement(o["a"])}))});t["a"]=c},23051:function(e,t,r){"use strict";var a=r(23052);t["a"]=a["a"]},23052:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(3271);var j=r(12);var C=r(21703);var E=r(23053);var S=r(5);var w=r(3184);var I=r(410);var T=r(1076);var N=r(37);var R=r(195);var A=r(23054);var M=r(23055);var P=r.n(M);var x=new S["b"]("invite");var D={currentTeam:h.a.object.isRequired,onClose:h.a.func.isRequired,sendInvites:h.a.func.isRequired,featureModernizeInvites:h.a.bool};var F={currentTeam:{},onClose:_.a.noop,featureModernizeInvites:false};var L=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={invites:[{},{},{}]};r.updateInviteEmail=r.updateInviteEmail.bind(r);r.updateInviteName=r.updateInviteName.bind(r);r.addInviteRow=r.addInviteRow.bind(r);r.submitForm=r.submitForm.bind(r);return r}c()(t,[{key:"getCopy",value:function e(t){if(!this.props.featureModernizeInvites)return;switch(t){case"email_address_label":return x.t("Email Address");case"name_label":return x.t("Name (optional)");case"initial_email_label_id":return"invite_modal_initial_email_label";case"initial_name_label_id":return"invite_modal_initial_name_label";default:return}}},{key:"deleteInviteRow",value:function e(t){this.setState(function(e){var r=e.invites;var a=_.a.clone(r);a.splice(t,1);return{invites:a}})}},{key:"addInviteRow",value:function e(){this.setState(function(e){var t=e.invites;var r=t.concat([{}]);return{invites:r}})}},{key:"updateInviteEmail",value:function e(t,r){this.updateInviteValue({email:t,emailError:false},r)}},{key:"updateInviteName",value:function e(t,r){this.updateInviteValue({name:t},r)}},{key:"updateInviteValue",value:function e(t,r){this.setState(function(e){var a=e.invites;var n=_.a.clone(a);_.a.assign(n[r],t);return{invites:n}})}},{key:"submitForm",value:function e(t){t.preventDefault();this.setState(function(e){var t=[];e.invites.forEach(function(e){var r=e.email,a=e.name;r&&r.trim()&&t.push({email:r,emailError:Object(E["a"])(r)?void 0:x.t("That doesn\u2019t look like a valid email address!"),name:a})});0===t.length&&t.push({});return{invites:t}},this.props.sendInvites)}},{key:"renderEmailRows",value:function e(){var t=this;if(!this.props.featureModernizeInvites)return null;var r=this.state.invites;return r.map(function(e,a){var i=O()("p-invite_modal__invite_row_field","p-invite_modal__invite_row_field--name",{"p-invite_modal__invite_row_field--name_without_close_button":1===r.length});var s="invite_"+a;var o={};var c={};if(0===a){o.labelId=t.getCopy("initial_email_label_id");c.labelId=t.getCopy("initial_name_label_id")}else{o["aria-label"]=t.getCopy("email_address_label");c["aria-label"]=t.getCopy("name_label")}return m.a.createElement("div",{className:"p-invite_modal__invite_row","data-qa":"invite_modal_invite_row",key:s},m.a.createElement("div",{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--email-address","data-qa":"invite_modal_invite_email"},m.a.createElement(I["a"],n()({name:"invite_modal_email_"+a,id:"invite_modal_email_"+a,placeholder:x.t("name@example.com"),value:e.email,onChange:function e(r){return t.updateInviteEmail(r,a)},spellCheck:"false",errorText:e.emailError||""},o))),m.a.createElement("div",{className:i,"data-qa":"invite_modal_invite_name"},m.a.createElement(I["a"],n()({name:"invite_modal_name_"+a,id:"invite_modal_name_"+a,value:e.name,onChange:function e(r){return t.updateInviteName(r,a)},spellCheck:"false"},c))),1!==r.length&&m.a.createElement("button",{className:"p-invite_modal__invite_row_delete_button",onClick:function e(){return t.deleteInviteRow(a)},"data-qa":"invite_modal_delete_row_button",type:"button"},m.a.createElement(N["b"],{type:"times",size:20})))})}},{key:"render",value:function e(){if(!this.props.featureModernizeInvites)return null;var t=this.props,r=t.currentTeam,a=t.onClose;return m.a.createElement(T["a"],{onCancel:a,showCancelButton:false,showGoButton:false,modalClasses:"p-invite_modal",contentLabel:"invite-modal"},m.a.createElement("header",{className:"p-invite_modal__header"},m.a.createElement(N["b"],{type:"paper_plane",className:"p-invite_modal__header_icon",size:"inherit"}),m.a.createElement("br",null),x.rt('Invite people to <span class="bold">{currentTeamName}</span>',{currentTeamName:Object(C["getTeamDisplayName"])(r)})),m.a.createElement("form",{onSubmit:this.submitForm,"data-qa":"invite_modal_form"},m.a.createElement("div",{className:"p-invite_modal__invite_row"},m.a.createElement(R["a"],{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--email-address",text:this.getCopy("email_address_label"),htmlFor:"invite_modal_email_0",id:this.getCopy("initial_email_label_id")}),m.a.createElement(R["a"],{className:"p-invite_modal__invite_row_field p-invite_modal__invite_row_field--name p-invite_modal__invite_row_field--name_without_close_button",text:this.getCopy("name_label"),htmlFor:"invite_modal_name_0",id:this.getCopy("initial_name_label_id")})),this.renderEmailRows(),m.a.createElement(A["a"],{onClickAddRowButton:this.addInviteRow,featureModernizeInvites:this.props.featureModernizeInvites}),m.a.createElement("div",{className:"p-invite_modal__invitation_buttons"},m.a.createElement("span",{className:"p-invite_modal__show_invite_link_view_wrapper"},m.a.createElement("button",{className:"p-invite_modal__show_invite_link_view",type:"button"},m.a.createElement(N["b"],{type:"link"}),m.a.createElement("span",{className:"p-invite_modal__show_invite_link_view_copy"},x.t("Get an invite link to share")))),m.a.createElement(w["d"],{size:"large",htmlType:"submit"},x.t("Send Invitations")))))}}]);return t}(f["Component"]);L.displayName="InviteModal";L.defaultProps=F;var B=function e(t){return{currentTeam:Object(k["getCurrentTeam"])(t),featureModernizeInvites:Object(j["isFeatureEnabled"])(t,"feature_modernize_invites")}};var U=function e(){return{sendInvites:_.a.noop}};t["a"]=Object(b["connect"])(B,U)(L)},23053:function(e,t,r){"use strict";t["a"]=n;var a=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i");function n(e){var t=e.match(a);return t&&1===t.length&&t[0]===e||false}},23054:function(e,t,r){"use strict";var a=r(12159);var n=r.n(a);var i=r(3);var s=r.n(i);var o=r(5);var c=r(37);var l=new o["b"]("invite");var u={onClickAddRowButton:s.a.func.isRequired,featureModernizeInvites:s.a.bool};var d={featureModernizeInvites:false};var v=function e(t){var r=t.onClickAddRowButton,a=t.featureModernizeInvites;if(!a)return null;return n.a.createElement("span",{className:"p-invite_modal__add_row_and_bulk_copy"},l.rt("<AddRowButton>Add another</AddRowButton> or <BulkInviteButton>add many at once</BulkInviteButton>",null,function(e){var t=e.text,a=e.tag;switch(a){case"AddRowButton":return n.a.createElement("button",{className:"p-invite_modal__add_row_and_bulk_button",onClick:r,"data-qa":"invite_modal_add_row_button",type:"button"},n.a.createElement(c["b"],{type:"plus_circle",size:20,className:"p-invite_modal__add_row_icon"})," ",t);case"BulkInviteButton":return n.a.createElement("button",{className:"p-invite_modal__add_row_and_bulk_button",type:"button"},t);default:return null}}))};v.displayName="InviteModalAddRowButtons";v.defaultProps=d;t["a"]=v},23055:function(e,t){},23058:function(e,t,r){"use strict";var a=r(23060);var n=r(23059);r.d(t,"a",function(){return a["a"]});r.d(t,"b",function(){return n["a"]})},23059:function(e,t,r){"use strict";var a={add:function e(t,r){this.sections||(this.sections={});if(this.sections[t])throw new Error('A section has already been specified at "'+t+'"');this.sections[t]=r},remove:function e(t){if(!this.sections)return;if(!this.sections[t])return;this.sections[t]=null;delete this.sections[t]},get:function e(t){if(!this.sections)return;return this.sections[t]}};t["a"]=a},2306:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=new b["b"]("policy-retention");var _={users:v.a.object.isRequired,onUpdateUserSelection:v.a.func,currentSelectionValue:v.a.string,isFormPending:v.a.bool};var y={onUpdateUserSelection:m.a.noop,currentSelectionValue:"",isFormPending:false};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onOptionSelection=r.onOptionSelection.bind(r);return r}s()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:r})}},{key:"renderOptions",value:function e(){return m.a.map(this.props.users,function(e){return h.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_bottom_200"},h.a.createElement("label",{htmlFor:"policy-requester"},g.t("Requester")),h.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},h.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},h.a.createElement("option",{value:"",disabled:true},g.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(h.a.Component);O.displayName="RequesterSelect";O.defaultProps=y;t["a"]=O},23060:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(23059);var g={order:v.a.number.isRequired,component:v.a.object.isRequired,children:v.a.node};var _={order:void 0,component:void 0,children:null};var y=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=e.component,i=a.focus,s=a.blur;var o=Object(f["isFunction"])(i)&&Object(f["isFunction"])(s);if(o)return c()(r);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentWillMount",value:function e(){b["a"].add(this.props.order,this.props.component)}},{key:"componentWillUnmount",value:function e(){b["a"].remove(this.props.order)}},{key:"render",value:function e(){return this.props.children}}]);return t}(p["PureComponent"]);y.displayName="FocusableSection";y.defaultProps=_;t["a"]=y},23061:function(e,t){},23063:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(211);var c=r(23062);var l=r(42);function u(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return n()({alias:"BKchannel"===t?"group":null},Object(c["a"])(t))})}function d(e,t){return Object(i["map"])(Object(c["c"])(e,t),function(e){return n()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(l["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return d.apply(void 0,[TS.redux.getState()].concat(r))}})},2307:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=new b["b"]("policy-retention");var _={onUpdateUserInput:v.a.func,currentUserValue:v.a.string,placeholder:v.a.string,isDisabled:v.a.bool};var y={onUpdateUserInput:m.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdateInput=r.onUpdateInput.bind(r);return r}s()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_bottom_200"},h.a.createElement("label",{htmlFor:"mc-user"},g.t("Your Full Name")),h.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},h.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(h.a.Component);O.displayName="McUserInput";O.defaultProps=y;t["a"]=O},23077:function(e,t,r){"use strict";var a=r(3);var n=r.n(a);var i=r(22467);var s=r(21945);var o=r(21699);var c=r(21738);var l=r(21711);var u=r(3203);var d=r(907);var v=r(5);var p=new v["b"]("cmd_handlers");var h=Object(o["b"])("/rename slash command",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.originalText,o=r.rest;var v=t();var h=Object(l["e"])(v,a);var f=Object(c["b"])(v);var m=void 0;Object(d["isIm"])(h)||Object(d["isMpim"])(h)?m=p.t("Direct messages don\u2019t even have a name! Ergo, regrettably, you can\u2019t change it."):Object(u["R"])(f)?m=p.t("You don\u2019t have permission to rename."):Object(u["x"])(f)||f.id===h.creator||(m=p.t("Only Workspace Admins (or the channel creator) are allowed to rename channels."));m?Object(s["a"])(m,{input_txt:n,slackbot_feels:"sad_surprise"}):Object(i["a"])(a,"rename",{name:o||Object(d["getDisplayName"])(h)})});h.propTypes={channelId:n.a.string,originalText:n.a.string,rest:n.a.string};t["a"]=h},2308:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(1058);var g=r(5);var _=r(2309);var y=r(715);var O=new g["b"]("policy-retention");var k={displaySettings:v.a.shape({is_locked:v.a.bool,retention_duration:v.a.oneOfType([v.a.string,v.a.number]),retention_type:v.a.number}).isRequired,policyType:v.a.oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:v.a.string.isRequired,currentSettings:v.a.shape({is_locked:v.a.bool,retention_duration:v.a.number,retention_type:v.a.number}),onUpdatePolicy:v.a.func,pendingSettings:v.a.shape({is_locked:v.a.bool,retention_duration:v.a.number,retention_type:v.a.number}),isFormPending:v.a.bool,featureGdprExports:v.a.bool.isRequired};var j={pendingSettings:{},currentSettings:{},onUpdatePolicy:m.a.noop,isFormPending:false};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onUpdatePolicy=r.onUpdatePolicy.bind(r);return r}s()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,r=t.featureGdprExports,a=t.policyType;if(!m.a.isEmpty(this.props.pendingSettings)){var n=this.props.currentSettings,i=n.retention_type,s=n.retention_duration,o=n.is_locked;var c=0!==i&&"allow_override"!==this.props.policyType||o?i:4;var l=Object(y["b"])({policyType:a,retentionType:c,policyDurationValue:s,featureGdprExports:r});var u=O.t("Current:");return h.a.createElement("p",null,u," ",l)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,r=t.isFormPending,a=t.policyType,n=t.featureGdprExports;var i=Object(y["d"])({policyType:a,featureGdprExports:n});var s=this.props.displaySettings;!m.a.isEmpty(this.props.pendingSettings)&&r&&(s=this.props.pendingSettings);var o=s,c=o.is_locked,l=o.retention_duration,u=o.retention_type;var d="allow_override"===a&&!c||0===u&&!c&&Object(y["e"])(a)?4:u;return h.a.createElement(_["a"],{id:"policy_select_"+this.props.policyType,options:i,currentSelectionValue:d,currentDurationValue:l,isDeactivated:r,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},h.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(h.a.Component);C.displayName="PolicyItem";C.defaultProps=j;t["a"]=Object(b["a"])("feature_gdpr_exports")(C)},2309:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(5);var g=new b["b"]("policy-retention");var _={options:v.a.array.isRequired,onUpdatePolicySelection:v.a.func,currentSelectionValue:v.a.number,currentDurationValue:v.a.oneOfType([v.a.string,v.a.number]),isDeactivated:v.a.bool};var y={onUpdatePolicySelection:m.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var O=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onTextInput=r.onTextInput.bind(r);r.onOptionSelection=r.onOptionSelection.bind(r);return r}s()(t,[{key:"onOptionSelection",value:function e(t){var r=t.target.value;var a=4!==m.a.parseInt(r);this.props.onUpdatePolicySelection({retention_type:m.a.parseInt(r),is_locked:a})}},{key:"onTextInput",value:function e(t){var r=m.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:r})}},{key:"maybeRenderDuration",value:function e(){var t=this;var r=m.a.find(this.props.options,function(e){return e.value===m.a.parseInt(t.props.currentSelectionValue)}),a=r.showDuration;if(a)return h.a.createElement("div",{className:"p-org_retention_request__duration_group "},h.a.createElement("span",{className:"p-org_retention_request__duration_label"},g.t("Duration")),h.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),h.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return m.a.map(this.props.options,function(e){return h.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},h.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},h.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(h.a.Component);O.displayName="PolicySelect";O.defaultProps=y;t["a"]=O},2312:function(e,t,r){"use strict";t["a"]=n;t["b"]=i;var a=r(21700);function n(e){return Object(a["c"])("mc.enterprise.retention.get",{enterprise:e}).then(function(e){return e.data})}function i(e,t){var r="newRequest"===e?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest";return Object(a["c"])(r,t).then(function(e){return e.data})}},2313:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2314);var n=r(42);Object(n["a"])("interop.mountSearch",a["a"]);Object(n["a"])("interop.unmountSearch",a["b"])},2314:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r.d(t,"b",function(){return v});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(2315);var d=function e(t,r){if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(t)},n.a.createElement(u["a"],null)),r)};var v=function e(t){s.a.unmountComponentAtNode(t)};var p={mountSearch:d}},2315:function(e,t,r){"use strict";var a=r(23023);t["a"]=a["a"]},2316:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(8);var b=r.n(m);var g=r(1);var _=r.n(g);var y=r(268);var O=r(21725);var k=r(1068);var j=r(332);var C=r(1104);var E=r(37);var S=r(3189);var w=r(398);var I=r(5);var T=r(378);var N=r(1592);var R=r(168);var A=r(22447);var M=r(22969);var P=r(266);var x=r(22448);var D=r(22455);var F=r(2317);var L=new I["b"]("search");var B={interfaceMode:h.a.string.isRequired,displayQuery:h.a.string,request:k["requestPropType"],searchAutocompleteSuggestionAccept:h.a.func.isRequired,searchPrecache:h.a.func.isRequired,setRequestFromEditableRequest:h.a.func.isRequired,setSearchInputBoxUserQuery:h.a.func.isRequired,setInterfaceMode:h.a.func.isRequired,userQuery:h.a.string.isRequired,visible:h.a.bool.isRequired};var U={displayQuery:"",request:null};var q=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(g["bindAll"])(r,["onSearchAutocompleteSuggestionAccept","onSearchInputBoxEscape","onUserQueryChange","onClickRefreshSearch"]);r.onSearchInputBoxFocus=Object(g["throttle"])(function(){return r.props.searchPrecache()},6e4);return r}s()(t,[{key:"componentDidMount",value:function e(){Object(R["a"])()&&Object(w["areDragRegionsRequired"])()&&Object(g["get"])(window,"desktop.app.updateDragRegion")&&window.desktop.app.updateDragRegion([])}},{key:"componentDidUpdate",value:function e(t){t.request!==this.props.request&&this.onRequestChange();t.userQuery!==this.props.userQuery&&this.onUserQueryChange()}},{key:"componentWillUnmount",value:function e(){Object(R["a"])()&&Object(w["areDragRegionsRequired"])()&&Object(A["a"])()}},{key:"onUserQueryChange",value:function e(){this.props.setInterfaceMode({interfaceMode:y["interfaceModes"].EDIT})}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchInputBoxEscape",value:function e(){this.onSearchClose();return true}},{key:"onSearchClose",value:function e(){Object(P["f"])()||Object(C["c"])()}},{key:"onRequestChange",value:function e(){this.props.setInterfaceMode({interfaceMode:y["interfaceModes"].SEARCH_RESULTS})}},{key:"onClickRefreshSearch",value:function e(){this.props.setRequestFromEditableRequest({fetchSuggestions:true})}},{key:"clear",value:function e(){this.props.setSearchInputBoxUserQuery({userQuery:""})}},{key:"renderMode",value:function e(){switch(this.props.interfaceMode){case y["interfaceModes"].SEARCH_RESULTS:return this.renderSearchResults();case y["interfaceModes"].EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function e(){return v.a.createElement(F["a"],{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function e(){return v.a.createElement("div",{className:"c-search-autocomplete"},v.a.createElement(x["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))}},{key:"render",value:function e(){var t={top:0,left:0,bottom:0,right:0};var r=b()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===y["interfaceModes"].EDIT});return v.a.createElement(T["a"],{enabled:["feature_react_search"]},v.a.createElement(j["a"],{ariaRole:"dialog",ariaLabel:L.t("Search"),isOpen:this.props.visible,position:"top-left",targetBounds:t,onClose:this.onSearchClose,shouldFade:false,overlayClassName:r,allowanceX:0,allowanceY:0,shouldFocusAfterRender:true,shouldReturnFocusAfterClose:false},v.a.createElement("div",{className:"c-search__input_and_close"},v.a.createElement(D["a"],{displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus}),v.a.createElement(S["a"],{className:"c-search__input_and_close__close",onClick:C["c"],ariaLabel:L.t("Cancel")},v.a.createElement(E["b"],{type:"times"}))),this.renderMode()))}}]);return t}(d["PureComponent"]);q.displayName="Search";q.defaultProps=U;var H=function e(t){return{interfaceMode:Object(y["getInterfaceMode"])(t),displayQuery:Object(O["getSearchInputBoxDisplayQuery"])(t),request:Object(k["getRequest"])(t),userQuery:Object(O["getSearchInputBoxUserQuery"])(t),visible:Object(y["getVisible"])(t)}};var W={searchAutocompleteSuggestionAccept:M["a"],searchPrecache:N["h"],setInterfaceMode:y["setInterfaceMode"],setRequestFromEditableRequest:k["setRequestFromEditableRequest"],setSearchInputBoxUserQuery:O["setSearchInputBoxUserQuery"]};t["a"]=Object(f["connect"])(H,W)(q)},2317:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(9);var g=r(268);var _=r(22456);var y=r(1104);var O=r(5);var k=r(378);var j=r(22457);var C=r(22462);var E=r(1099);var S=r(20183);var w=r.n(S);var I=new O["b"]("search");var T={tab:h.a.string.isRequired,setTab:h.a.func,scrollPosition:h.a.object.isRequired,setScrollPosition:h.a.func.isRequired,onClickRefreshSearch:h.a.func.isRequired};var N={setTab:m.a.noop};var R=300;var A=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.state={messagesScrolledTop:e.scrollPosition.messages<R,filesScrolledTop:e.scrollPosition.files<R};r.setTab=r.setTab.bind(r);r.setMessageScrollPosition=r.setScrollPosition.bind(r,"messages");r.setFileScrollPosition=r.setScrollPosition.bind(r,"files");r.scrollPosition=e.scrollPosition;return r}s()(t,[{key:"componentWillUnmount",value:function e(){this.props.setScrollPosition({scrollPosition:this.scrollPosition})}},{key:"setTab",value:function e(t){this.props.setTab({tab:t})}},{key:"setScrollPosition",value:function e(t,r){this.scrollPosition[t]=r;var a="messages"===t&&(r<R||true===this.state.messagesScrolledTop);a&&this.setState(function(){return{messagesScrolledTop:r<R}});var n="files"===t&&(r<R||true===this.state.filesScrolledTop);n&&this.setState(function(){return{filesScrolledTop:r<R}})}},{key:"renderCurrentView",value:function e(){switch(this.props.tab){case"messages":return v.a.createElement(j["a"],{isScrolledTop:this.state.messagesScrolledTop,setScrollPosition:this.setMessageScrollPosition,startWithScrollPosition:this.scrollPosition.messages,onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return v.a.createElement(C["a"],{isScrolledTop:this.state.filesScrolledTop,setScrollPosition:this.setFileScrollPosition,startWithScrollPosition:this.scrollPosition.files,onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function e(){return v.a.createElement("div",{className:"c-search__container"},v.a.createElement("div",{className:"c-search"},v.a.createElement(k["a"],{enabled:["feature_react_search"]},v.a.createElement(E["a"],{types:[{id:"messages",name:I.t("Messages")},{id:"files",name:I.t("Files")}],selected:this.props.tab,onSelection:this.setTab,onClose:y["c"]})),this.renderCurrentView()))}}]);return t}(d["PureComponent"]);A.displayName="SearchView";A.defaultProps=N;var M=function e(t){return{visible:Object(g["getVisible"])(t),tab:Object(g["getTab"])(t),scrollPosition:Object(g["getScrollPosition"])(t)}};var P={setTab:_["a"],setScrollPosition:g["setScrollPosition"]};t["a"]=Object(b["connect"])(M,P)(A)},2321:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(12159);var n=r.n(a);var i=r(21727);var s=r(1089);var o=r(42);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},2323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2324);var n=r(42);Object(n["a"])("interop.mountTooltipTip",a["a"]);Object(n["a"])("interop.unmountTooltipTip",a["b"])},2324:function(e,t,r){"use strict";r.d(t,"a",function(){return v});r.d(t,"b",function(){return p});var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(485);var d=r(21750);var v=function e(t,r,a,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(l["c"])(t);a?Object(c["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["a"],{id:a,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),r):Object(c["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),r)};var p=function e(t){s.a.unmountComponentAtNode(t)};var h={mountTooltipTip:v,unmountTooltipTip:p}},2325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(1593);var c=r(22607);var l=r(487);var u=r(21778);var d=r(3182);var v=r(234);var p=r(1549);var h=r(22170);var f=r(22610);var m=r(21867);var b=r(22615);var g=r(21868);var _=r(21980);var y=r(22618);var O=r(22269);var k=r(22171);var j=r(21992);var C=r(3280);var E=r(21876);var S=r(3276);var w=r(3289);var I=r(21820);var T=r(21761);var N=r(42);var R=r(394);var A=Object(R["a"])(r(13041));var M=Object(R["a"])(r(13042));var P=Object(R["a"])(r(7298));var x=Object(R["a"])(r(7299));function D(e){var t=s.a.camelCase(e);if(-1===t.indexOf("Store"))return null;t=t.slice(0,t.lastIndexOf("Store"));return t}function F(e){return s.a.reduce(e,function(e,t,r){var a=D(r);a&&(e[a]=t);return e},{})}var L=n()({},F(A),F(P));var B=n()({},F(M),F(x));Object(N["a"])("interop.redux",{configureStore:o["a"],actions:{sendMessage:l["a"],prepareAndSendMessage:l["b"],saveMessageEdit:p["a"],removeMessageAndTimestamp:u["a"],openCustomStatusDialog:h["a"],openFileUploadDialog:f["a"],openShareDialog:m["a"],getChannelIdForSharing:g["a"],openRenameFileDialog:_["a"],openCreateGDocDialog:b["a"],openSnippetDialog:y["a"],universalSearchSetVisible:O["a"],clearSearchInput:k["a"],editLastUserMessageText:j["a"]},features:L,middleware:{console:d,socketManager:v},models:n()({},B,{channelsMeta:{channelNamesToIds:C,inviters:E,mutedChannels:S,needsApiMarking:w,needsCreatedMessage:I,prqMetrics:T}}),test:{createTestStore:c["a"]}})},2327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(391);var s=r(21703);var o=r(1007);var c=r(907);var l=r(1457);var u=r(21952);var d=r(252);var v=r(21756);var p=r(21879);var h=r(42);Object(h["a"])("interop.rules",{channels:n()({},c,{getDisplayNameForChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return c["getDisplayNameForChannel"].apply(c,[TS.redux.getState()].concat(r))},isYou:function e(t){return c["isYou"](TS.model.user.id,t)},isRelevantTeamForSharedChannel:function e(t){return c["isRelevantTeamForSharedChannel"](t,TS.model.user,TS.model.team.id,TS.model.team.enterprise_id,TS.boot_data.page_needs_enterprise,TS.boot_data.other_accounts)}}),messages:n()({isAutomatedSubtype:i["a"]},o),files:{extendFileWithPinnedInfo:d["extendFileWithPinnedInfo"],getFileType:d["getFileType"]},user:{canLeaveChannel:l["d"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["f"].apply(void 0,[TS.redux.getState()].concat(r))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["e"].apply(void 0,[TS.redux.getState()].concat(r))},canAtMentionEveryone:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["b"].apply(void 0,[TS.redux.getState()].concat(r))},canAtChannelOrGroup:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["a"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInGeneral:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["h"].apply(void 0,[TS.redux.getState()].concat(r))},canPostInChannel:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return l["g"].apply(void 0,[TS.redux.getState()].concat(r))}},user_groups:{isUnknownOrNonExistent:function e(){return u["h"].apply(void 0,arguments)}},emoji:{getEmojiMode:function e(t){return v["a"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return v["b"](TS.redux.getState())}},teams:n()({},s),admin:n()({},p)})},2328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(2329);var n=r(21864);var i=r(21946);var s=r(42);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["i"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["k"].apply(void 0,[TS.redux.getState()].concat(r))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a["j"].apply(void 0,[TS.redux.getState()].concat(r))},showNotification:function e(t,r){return TS.redux.dispatch(Object(i["b"])({message:t,modelObject:r}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:a["c"],getCalculatedMobileNotifySetting:a["d"],getDefaultDesktopNotifySetting:a["e"],getDefaultMobileNotifySetting:a["f"]})},2329:function(e,t,r){"use strict";r.d(t,"a",function(){return C});t["i"]=S;t["k"]=w;t["j"]=I;t["b"]=N;t["h"]=A;t["c"]=H;t["d"]=W;t["e"]=G;t["f"]=V;t["g"]=z;var a=r(12);var n=r(975);var i=r(21714);var s=r(54);var o=r(376);var c=r(21697);var l=r(3278);var u=r(21698);var d=r(21863);var v=r(3270);var p=r(3277);var h=r(907);var f=r(1007);var m=r(398);var b=r(21864);var g=r(329);var _=r(473);var y=r(22144);var O=r(981);var k=r(1003);var j=r(480);var C=m["isDesktop"]||window.Notification||window.webkitNotifications;var E=["channel_leave","channel_join","group_leave","group_join"];function S(e,t,r){if(!t||!r)return b["a"].BAD_ARGUMENTS;if(t.no_display)return b["a"].NO_DISPLAY_OVERRIDE;if(Object(f["isReply"])(t))return b["a"].REPLY_MESSAGE;if(t.subtype&&-1!==E.indexOf(t.subtype))return b["a"].JOIN_LEAVE_MESSAGE;var i=H(e,r.id);if("nothing"===i)return b["a"].SILENT_PREFERENCE;var s=Object(O["a"])(r);var o=Object(a["getCurrentUserId"])(e);var c=T(e,t,s);if("bot_message"===t.subtype&&"everything"!==i&&!c)return b["a"].BOT_MESSAGE;if(Object(a["isFeatureEnabled"])(e,"feature_wta_notifications")&&Object(f["isAppMessage"])(e,t)&&"everything"!==i&&!c)return b["a"].APP_MESSAGE;var l=Object(f["canCountAsUnreadForCurrentUser"])(t,o);var u=c&&l;var d=Object(O["b"])(r.id);l&&!Object(p["isWindowFocused"])(e)&&M(u,d);if(!N())return b["a"].PERMISSION_DENIED;if(!u&&"everything"!==i)return b["a"].NO_MENTIONS;if(x(e,t,r))return b["a"].ACTIVE_VIEW_VISIBLE;if(Object(f["isFromCurrentUser"])(t,o))return b["a"].FROM_CURRENT_USER;if(t.no_notifications)return b["a"].NO_NOTIFICATIONS_OVERRIDE;if(d)return b["a"].MUTED_CHANNEL;if(Object(n["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return b["a"].USER_IN_DND;if(P(e,r))return b["a"].LESS_RELEVANT_ORG_TEAM;if(F(e,t,r))return b["a"].OVERSIZED_MENTION;return b["a"].NONE}function w(e,t,r){if(!t||!r)return b["a"].BAD_ARGUMENTS;if(t.no_display)return b["a"].NO_DISPLAY_OVERRIDE;if(Object(f["isReply"])(t))return b["a"].REPLY_MESSAGE;Object(p["isWindowFocused"])(e)||M(true);if("nothing"===G(e,r.id))return b["a"].SILENT_PREFERENCE;if(!N())return b["a"].PERMISSION_DENIED;if(x(e,t,r))return b["a"].ACTIVE_VIEW_VISIBLE;if(Object(f["isFromCurrentUser"])(t,Object(a["getCurrentUserId"])(e)))return b["a"].FROM_CURRENT_USER;if(t.no_notifications)return b["a"].NO_NOTIFICATIONS_OVERRIDE;if(Object(n["getCurrentMemberDnd"])(e)&&!t._ignore_dnd)return b["a"].USER_IN_DND;if(P(e,r))return b["a"].LESS_RELEVANT_ORG_TEAM;return b["a"].NONE}function I(e,t){if(!t||!t.channel)return b["a"].BAD_ARGUMENTS;var r=false;var a=Object(c["getChannelById"])(e,t.channel,r);if(!a||Object(h["isNonExistent"])(a))return b["a"].BAD_ARGUMENTS;var n=t.msg,i=t.thread_ts;var s={ts:n,thread_ts:i};if(!Object(f["isReply"])(s))return b["a"].NOT_REPLY_MESSAGE;if(P(e,a))return b["a"].LESS_RELEVANT_ORG_TEAM;if(D(e,t,a))return b["a"].ACTIVE_VIEW_VISIBLE;var o=Object(d["getMaxTimestamp"])(e);if(!o||n>o)return b["a"].REDUNDANT_SOCKET_EVENT;var l=Object(k["b"])(a.id,i);if(l&&l.last_read&&l.last_read>=n)return b["a"].ALREADY_SEEN_REPLY;return b["a"].NONE}function T(e,t,r){var n=false;var i=Object(f["isAppMessage"])(e,t);var c=Object(a["isFeatureEnabled"])(e,"feature_wta_notifications");if(r){var l={ignoreHighlightWords:Object(f["shouldIgnoreHighlightWords"])(t,i,c),ignoreAtEveryoneMentions:false,ignoreAtChannelMentions:false,ignoreAtHereMentions:"away"===Object(o["getCurrentMemberPresence"])(e)};n=Object(f["containsMention"])(t,Object(a["getCurrentUserId"])(e),Object(s["getUserHighlightWords"])(e),l);n&&Object(y["a"])()}else{var u={ignoreHighlightWords:Object(f["shouldIgnoreHighlightWords"])(t,i,c),ignoreAtEveryoneMentions:true,ignoreAtChannelMentions:true,ignoreAtHereMentions:true};n=Object(f["containsMention"])(t,Object(a["getCurrentUserId"])(e),Object(s["getUserHighlightWords"])(e),u);n&&Object(y["a"])()}return n}function N(){if(!C)return false;if(m["isDesktop"])return true;return"granted"===A()}function R(){if(!C)return false;if(N())return false;if("denied"===A())return false;return true}function A(){if(m["isDesktop"]||!C)return"na";if(window.Notification)return window.Notification.permission;return"na"}function M(e,t){e&&-1===document.title.indexOf("!")?document.title="! "+document.title:t||-1!==document.title.indexOf("*")||(document.title="* "+document.title)}function P(e,t){if(!Object(h["isOrgShared"])(t))return false;return!Object(h["isRelevantTeamForSharedChannel"])(t,Object(u["getCurrentMember"])(e),Object(v["getTeamId"])(e),Object(l["getEnterpriseId"])(e),Object(a["pageNeedsEnterprise"])(e),Object(a["getFromBootData"])(e,"other_accounts"))}function x(e,t,r){if(!Object(p["isWindowFocused"])(e))return false;if(Object(f["containsAtCommand"])(t.text))return false;var a=Object(i["getPrimaryView"])(e);return r.id===a&&!t._hidden_reply&&!Object(g["b"])()}function D(e,t,r){if(!Object(p["isWindowFocused"])(e))return false;if(Object(f["containsAtCommand"])(t.text))return false;return t.thread_ts&&r.id===Object(j["a"])()&&t.thread_ts===Object(j["b"])()}function F(e,t,r){if(!Object(a["pageNeedsEnterprise"])(e))return false;if(Object(_["g"])(t.text,r.id,t.user))return false;return true}function L(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);return Object(s["getNotificationsGlobalPref"])(e,"global_"+t)}function B(e,t){if("desktop"!==t&&"mobile"!==t)throw new Error("Platform must be desktop or mobile: "+t);if(Object(a["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")){var r=Object(s["getNotificationsGlobalPref"])(e,"global_mpdm_"+t);if(!r){var n=L(e,t);if("nothing"===n)return"nothing";return"everything"}return r}return Object(s["getNotificationsGlobalPref"])(e,"global_"+t)}function U(e,t,r){var a=false;var n=Object(c["getChannelById"])(e,t,a);if(!n||Object(h["isNonExistent"])(n))return null;if(Object(h["isMpim"])(n)||Object(h["isIm"])(n))return B(e,r);return L(e,r)}function q(e,t,r){if("desktop"!==r&&"mobile"!==r)throw new Error("Platform must be desktop or mobile: "+r);var a=false;var n=Object(c["getChannelById"])(e,t,a);if(!n||Object(h["isNonExistent"])(n))return null;if(Object(h["isIm"])(n))throw new Error("IMs do not have a calculated notification setting");var i=Object(s["getNotificationsChannelPref"])(e,t,r);if(i)return i;return U(e,t,r)}function H(e,t){return q(e,t,"desktop")}function W(e,t){return q(e,t,"mobile")}function G(e,t){return U(e,t,"desktop")}function V(e,t){return U(e,t,"mobile")}function z(){var e=N();var t=null;if(!e){var r=A();t="denied"===r?"not_allowed":"default"===r?"not_yet_allowed":"impossible"}return{notificationsEnabled:e,notificationDisabledType:t}}},2330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(604);var i=r(255);var s=r(21729);var o=r(21969);var c=r(21826);var l=r(22629);var u=r(21825);var d=r(21989);var v=r(21835);var p=r(22630);var h=r(21987);var f=r(21971);var m=r(21968);var b=r(21855);var g=r(21905);var _=r(22246);var y=r(21958);var O=r(21972);Object(a["a"])("interop.texty",{Delta:n["a"],PlainClipboardModule:n["b"],Quill:n["c"],SlackKeyboardModule:n["d"],TabCompleteModule:n["e"],TextyClass:n["f"],isRangeInCode:i["i"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:c["a"],getMemberAsContentsString:l["a"],shouldHighlightMention:u["a"],convertContentsStringForSlashCommands:d["a"],convertContentsStringForEncodedMembers:v["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:p["a"],replaceFormatMentions:h["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getPotentialMentionMatches:m["d"],getBroadcastMatch:b["a"],getDisplayTextForSearchResult:g["a"],createPotentialMentionObject:m["b"],buildPotentialMentionsDelta:m["a"],trimAllowedMatchPrefix:_["a"],channelCompleter:y["e"],memberCompleter:y["h"],getContentsFromClipboard:f["a"],detachInvalidMentionsFromContents:O["a"]})},2331:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(1063);Object(i["a"])("interop.client_action_token",n()({},s["a"]))},2332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(334);Object(a["a"])("interop.clipboard",n)},2333:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(64);var i=r(235);var s=r(128);var o=r(1052);var c=r(1049);var l=r(1054);var u=r(496);var d=r(214);var v=r(1053);var p=r(261);var h=r(489);var f=r(387);var m=r(490);var b=r(493);var g=r(494);var _=r(192);var y=r(1047);var O=r(495);var k=r(491);var j=r(1051);var C=r(1043);var E=r(147);var S=r(297);var w=r(1048);var I=r(1050);var T=r(400);var N=r(1041);var R=r(296);var A=r(1040);var M=r(1042);var P=r(262);var x=r(1046);var D=r(492);var F=r(1044);var L=r(399);var B=r(1045);Object(a["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:c["a"],toWeekAmount:l["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:v["a"],dateDifference:p["a"],distanceInDays:h["a"],distanceInMinutes:f["a"],distanceInSeconds:m["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:O["a"],toDayOfTheWeek:k["a"],toHour:j["a"],getActivityDayStamp:C["a"],toCalendarDate:E["a"],toCalendarDateOrNamedDay:S["a"],toCalendarDateIfYesterdayOrToday:w["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:T["a"],convertISOtoUTCReadableDate:N["a"],toTimeAgo:R["a"],addDays:A["a"],daysToYearsPretty:M["a"],maybeGetRelativeDay:P["a"],millisecondsToPrettifiedTime:x["a"],prettifyDateString:D["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"]})},2334:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(1039);var i=r(1038);var s=r(21852);var o=r(1032);var c=r(22651);var l=r(21986);var u=r(21985);Object(a["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],formatTeamName:s["a"],locateHighlightWords:o["a"],surroundTextWith:c["a"],replaceUnicodeDoppelgangers:l["a"],cleanMessageTextWithState:u["a"]})},2335:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(5);var o=r(3044);var c=r(364);var l=r(21720);var u=r(21715);var d=new s["b"]("ns");var v={defaultNamespace:"ns",t:d.t};var p=[];var h=function e(t,r){var a=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v.t(t,n()({},a,{ns:r}))};o["isDev"]&&(a.toString=function(){var e=r+"."+t;if(p.indexOf(e)>=0)return"";p.push(e);var a="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+r+"\n\t\t\tString: "+t;alert(a);return""});return a};Object(i["a"])("interop.i18n",{t:h,number:s["i"],percent:s["j"],deburr:s["a"],listify:s["e"],possessive:s["k"],fullPossessiveString:s["c"],safeString:s["l"],sorter:s["m"],mappedSorter:s["f"],localesEnabled:c["e"],supportedKeyboards:l["e"],keyCodeEquivalent:l["b"],keyEquivalent:l["c"],getReverseKeyCodeMap:l["a"],normalizeKeyboardFromDesktop:l["d"],locale:c["f"],localeSupportsSendButton:c["d"],isPseudoLocale:c["c"],isLocaleCJK:c["b"],zdLocale:c["a"],number_abbreviations:u["c"],locales_number_formatting:u["b"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},2336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(264);var n=r(12);var i=r(54);var s=r(21774);var o=r(1067);var c=r(1007);var l=r(42);Object(l["a"])("interop.messages",{computeRollups:o["a"],getExpandableKey:a["a"],canCountAsUnreadForCurrentUser:c["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,r){return TS.redux.dispatch(Object(s["a"])({imsgs:[t],channelId:r}))[0]},containsMention:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(c["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["getUserHighlightWords"])(TS.redux.getState()),{ignoreAtHereMentions:r,ignoreHighlightWords:a,ignoreAtEveryoneMentions:s,ignoreAtChannelMentions:o})},isReply:c["isReply"],canEditMessage:c["canEditMessage"],shouldRenderFileThread:function e(t){return Object(c["shouldRenderFileThread"])(t,{featureFileThreads:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads"),featureFileThreadsDarkLaunch:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads_dark_launch")})},shouldIgnoreHighlightWords:c["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(c["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:c["atEveryoneRegExp"],atChannelRegExp:c["atChannelRegExp"],atGroupRegExp:c["atGroupRegExp"],atHereRegExp:c["atHereRegExp"]})},2337:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(3226);var i=r(427);var s=r(3227);var o=r(22169);var c=r(1095);var l=r(397);var u=r(1055);var d=r(134);var v=r(1056);var p=r(1064);var h=r(1065);var f=r(499);var m=r(3228);var b=r(3229);var g=r(3230);var _=r(3231);var y=r(21767);var O=r(22656);var k=r(21981);var j=r(22173);var C=r(266);var E=r(271);var S=r(21755);var w=r(1076);var I=r(21764);var T=r(21970);var N=r(22657);var R=r(21721);var A=r(21875);var M=r(3105);var P=r(21734);var x=r(22968);Object(a["a"])("interop.utility",{addJitter:A["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:N["c"],extractAllBotIds:m["a"],extractAllMemberIds:b["a"],extractAllModelObIds:g["a"],extractAllTeamIds:_["a"],getGlobalNavTheme:x["a"],getStringLength:c["a"],getIconSizeToFit:l["a"],getInitials:u["a"],getBotIdFromUrl:d["a"],looksLikeBotId:v["a"],isVisible:p["a"],ipsum:O["a"],isFileSubtype:S["b"],inTabFlow:h["a"],firstFocusableChild:f["b"],lastFocusableChild:f["c"],snakeCaseKeys:y["a"],isModelObjectExternal:k["a"],isMenuVisible:C["f"],isDialogVisible:E["b"],isFSModalVisible:w["b"],normalize:j["a"],convertFilesize:I["a"],getSystemTextPreferences:T["a"],decodeGlobalActionFrecencyId:N["a"],getGlobalActionForFrecency:N["b"],FILE_SUBTYPES:S["a"],uuidv4:R["a"],formatNumberWithAbbreviation:M["a"],isCmdKey:P["a"]})},240:function(e,t,r){var a=r(108);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},241:function(e,t,r){var a=r(242)("keys");var n=r(136);e.exports=function(e){return a[e]||(a[e]=n(e))}},242:function(e,t,r){var a=r(48);var n="__core-js_shared__";var i=a[n]||(a[n]={});e.exports=function(e){return i[e]||(i[e]={})}},243:function(e,t,r){var a=r(108);var n=r(53)("toStringTag");var i="Arguments"==a(function(){return arguments}());var s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),n))?r:i?a(t):"Object"==(o=a(t))&&"function"==typeof t.callee?"Arguments":o}},247:function(e,t,r){var a=r(408);var n=r(275).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return a(t,n)}},248:function(e,t,r){"use strict";var a=r(48);var n=r(61);var i=r(62);var s=r(53)("species");e.exports=function(e){var t=a[e];i&&t&&!t[s]&&n.f(t,s,{configurable:true,get:function(){return this}})}},249:function(e,t){e.exports=function(e,t,r,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(r+": incorrect invocation!");return e}},250:function(e,t,r){var a=r(107);var n=r(409);var i=r(351);var s=r(47);var o=r(67);var c=r(353);var l={};var u={};var t=e.exports=function(e,t,r,d,v){var p=v?function(){return e}:c(e);var h=a(r,d,t?2:1);var f=0;var m,b,g,_;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(i(p))for(m=o(e.length);m>f;f++){_=t?h(s(b=e[f])[0],b[1]):h(e[f]);if(_===l||_===u)return _}else for(g=p.call(e);!(b=g.next()).done;){_=n(g,h,b.value,t);if(_===l||_===u)return _}};t.BREAK=l;t.RETURN=u},251:function(e,t,r){var a=r(92);e.exports=function(e,t,r){for(var n in t)a(e,n,t[n],r);return e}},260:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(9);var g=r(1);var _=r.n(g);var y=r(8);var O=r.n(y);var k=r(54);var j=r(12);var C=r(190);var E=r(21769);var S=r(43);var w=r(2215);var I=r(5);var T=r(2217);var N=r(22264);var R=r(3184);var A=r(3164);var M=r(266);var P=r(60);var x=r(37);var D=r(472);var F=new I["b"]("channel_browser_coachmark");var L={label:h.a.string.isRequired,qaLabel:h.a.string,iconClass:h.a.string,tooltip:h.a.string,tooltipClassName:h.a.string,tooltipArrowOffset:h.a.number,onLabelClick:h.a.func,showPlus:h.a.bool,plusTooltip:h.a.string,onPlusClick:h.a.func,seenChannelBrowserCoachmark:h.a.bool,hasRecentlySharedAChannel:h.a.bool,sidebarFiltersIsEnabled:h.a.bool.isRequired,supportsHighlightsMode:h.a.bool,setSectionFilter:h.a.func,id:h.a.string.isRequired,isCurrentlyHovered:h.a.bool,currentFilter:h.a.string,setUserPrefByApi:h.a.func};var B={label:"",qaLabel:"",iconClass:null,tooltip:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:_.a.noop,showPlus:false,plusTooltip:"",onPlusClick:_.a.noop,seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setSectionFilter:_.a.noop,currentFilter:"",isCurrentlyHovered:false,supportsHighlightsMode:false,setUserPrefByApi:_.a.noop};var U=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onLabelClick=r.onLabelClick.bind(r);r.onPlusClick=r.onPlusClick.bind(r);r.setTooltipRef=r.setTooltipRef.bind(r);r.setPlusTooltipRef=r.setPlusTooltipRef.bind(r);r.renderFilterToggleMenu=r.renderFilterToggleMenu.bind(r);return r}c()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();Object(S["action"])(D["a"],"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();Object(S["action"])(D["a"],"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setFilter",value:function e(t){this.props.setSectionFilter({sectionId:this.props.id,filter:t})}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return m.a.createElement(x["a"],{type:t})}},{key:"renderFilterButtonMaybe",value:function e(){if(!this.props.sidebarFiltersIsEnabled)return null;var t=this.props,r=t.currentFilter,a=t.qaLabel;var n=void 0;var i=void 0;n="shared_channels"===a?"p-channel_sidebar__section_filter_icon_shared_channels ":"";if(r&&"all"!==r){if("unreads"===r){n+="p-channel_sidebar__section_filter_icon p-channel_sidebar__section_filter_icon_unreads";i=m.a.createElement("span",{className:"p-channel_sidebar__section_filter_tip"},"Showing just unreads",m.a.createElement("div",{className:"p-channel_sidebar__section_filter_tip_subtitle"},"Click to change"))}else if("real_time_sort"===r){n+="p-channel_sidebar__section_filter_icon p-channel_sidebar__section_filter_icon_highlights";i=m.a.createElement("span",{className:"p-channel_sidebar__section_filter_tip"},"Showing mentions and highlights",m.a.createElement("div",{className:"p-channel_sidebar__section_filter_tip_subtitle"},"Click to change"))}}else{n+="p-channel_sidebar__section_filter_icon p-channel_sidebar__section_filter_icon_all";i=m.a.createElement("span",{className:"p-channel_sidebar__section_filter_tip"},"Showing all channels",m.a.createElement("div",{className:"p-channel_sidebar__section_filter_tip_subtitle"},"Click to change"))}return m.a.createElement(P["d"],{tip:i,position:"top",delay:P["a"]},m.a.createElement("span",{className:"p-channel_sidebar__section_filter_wrapper"},m.a.createElement(M["d"],{renderMenu:this.renderFilterToggleMenu,position:"right",offsetX:16,offsetY:0},m.a.createElement(R["c"],{className:"btn_unstyle "+n}))))}},{key:"renderFilterToggleMenu",value:function e(t){var r=this;if(!this.props.sidebarFiltersIsEnabled)return null;var a=this.props,i=a.currentFilter,s=a.supportsHighlightsMode;var o=m.a.createElement(x["a"],{type:"check-small"});var c=[{label:"All Channels",click:function e(){return r.setFilter("all")},icon:"all"===i?o:null,className:"all"!==i?"p-channel_sidebar__section_heading_menu_item--not-selected":"",type:"compact_item"},{label:"Just Unreads",click:function e(){return r.setFilter("unreads")},icon:"unreads"===i?o:null,className:"unreads"!==i?"p-channel_sidebar__section_heading_menu_item--not-selected":"",type:"compact_item"}];s&&c.push({label:"Mentions and Highlights",click:function e(){return r.setFilter("real_time_sort")},icon:"real_time_sort"===i?o:null,className:"real_time_sort"!==i?"p-channel_sidebar__section_heading_menu_item--not-selected":"",type:"compact_item"});return m.a.createElement(M["a"],n()({},t,{template:c}))}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,r=t.showPlus,a=t.plusTooltip,n=t.qaLabel,i=t.sidebarFiltersIsEnabled;if(!r||i&&!this.props.isCurrentlyHovered)return null;var s=a||"";var o=this.props.onPlusClick===this.props.onLabelClick;var c=o?"-1":void 0;var l=o?"true":void 0;var u=m.a.createElement(R["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":s,tabIndex:c});var d=a?m.a.createElement(P["d"],{tip:a,position:"top",ref:this.setPlusTooltipRef,delay:P["a"]},u):u;var v=void 0;v=i&&"shared_channels"===n?"p-channel_sidebar__section_heading_right_shared_channels_with_filters":"p-channel_sidebar__section_heading_right";return m.a.createElement("div",{className:v,"aria-hidden":l},d)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var r=this;var a=this.props,n=a.seenChannelBrowserCoachmark,i=a.hasRecentlySharedAChannel,s=a.qaLabel;if("shared_channels"!==s||n)return t;var o=function e(){r.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var c=function e(){o();Object(T["b"])();Object(N["a"])()};return m.a.createElement("div",null,m.a.createElement(A["a"],{hasSkipButton:true,skipButtonText:F.t("Close"),hasSkipLink:false,hasCloseButton:false,continueButtonText:F.t("Show Me"),title:F.t("View and manage shared channels"),content:F.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),shouldShow:i,onSkip:o,onContinue:c,delay:100,position:"right"},t))}},{key:"render",value:function e(){var t=this.props,r=t.label,a=t.qaLabel,n=t.tooltip,i=t.tooltipClassName,s=t.tooltipArrowOffset,o=t.onLabelClick,c=t.isCurrentlyHovered;var l=void 0;var u=o!==_.a.noop;l=u?m.a.createElement(R["c"],{className:O()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":n},this.renderIconMaybe()," ",r):m.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",r);var d=n?m.a.createElement(P["d"],{tip:n,tipClassName:i,position:"top-left",tipArrowOffset:s,ref:this.setTooltipRef,delay:P["a"]},this.renderSharedChannelsCoachmarkMaybe(l)):l;var v=O()("p-channel_sidebar__section_heading",{"p-channel_sidebar__section_heading--hover":c});var p=u?m.a.createElement("h2",{className:"offscreen"},r):null;var h=this.props.onPlusClick!==this.props.onLabelClick;var f=h?"group":void 0;var b=h?r:void 0;return m.a.createElement("div",{className:v,"data-qa-channel-sidebar-section-heading":a,role:f,"aria-label":b},p,d,this.renderFilterButtonMaybe(),this.renderPlusButtonMaybe())}}]);return t}(m.a.PureComponent);U.displayName="SectionHeading";U.defaultProps=B;var q=function e(t,r){var a=r.id;return{seenChannelBrowserCoachmark:Object(k["getUserPref"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(k["getUserPref"])(t,"has_recently_shared_a_channel"),sidebarFiltersIsEnabled:Object(j["isFeatureEnabled"])(t,"feature_sidebar_filters")&&"collapsible"===Object(w["a"])("collapsible_sidebar"),currentFilter:Object(C["getSectionFilter"])(t,a)}};var H={setSectionFilter:C["setSectionFilter"],setUserPrefByApi:E["c"]};t["a"]=Object(b["connect"])(q,H)(U)},268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"SEARCH_SESSION_TIMEOUT_MS",function(){return f});r.d(t,"interfaceModes",function(){return b});r.d(t,"setTabOnly",function(){return g});r.d(t,"setInterfaceIsVisibleOnly",function(){return _});r.d(t,"setLoadingModule",function(){return y});r.d(t,"setPageForModule",function(){return O});r.d(t,"MODULE_ERROR_STATE",function(){return k});r.d(t,"setErrorForAllModules",function(){return C});r.d(t,"setErrorForModule",function(){return E});r.d(t,"setStateForModule",function(){return S});r.d(t,"setScrollPosition",function(){return w});r.d(t,"setDefaultTab",function(){return I});r.d(t,"resetScrollPosition",function(){return T});r.d(t,"setQuerySessionId",function(){return N});r.d(t,"setSearchSessionId",function(){return R});r.d(t,"setSessionTimeoutId",function(){return A});r.d(t,"setLastOpenMethod",function(){return M});r.d(t,"setInterfaceMode",function(){return P});r.d(t,"reset",function(){return x});r.d(t,"getInterfaceMode",function(){return L});r.d(t,"getTab",function(){return B});r.d(t,"getVisible",function(){return U});r.d(t,"getModuleState",function(){return q});r.d(t,"getScrollPosition",function(){return H});r.d(t,"getQuerySessionId",function(){return W});r.d(t,"getSearchSessionId",function(){return G});r.d(t,"getSessionTimeoutId",function(){return V});r.d(t,"getLastOpenMethod",function(){return z});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(21721);var d=r(1);var v=r.n(d);var p=r(21768);var h;var f=3e5;var m=Object(l["a"])("Set the interfaceMode field (see setInterfaceMode thunk for general usage)");m.propTypes={interfaceMode:c.a.oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var b={EDIT:"EDIT",SEARCH_RESULTS:"SEARCH_RESULTS"};var g=Object(l["a"])("Set the currently active tab field in Search (use setTab instead for components)");g.propTypes={tab:c.a.string.isRequired};var _=Object(l["a"])("Set the field representing whether or not Search is visible");_.propTypes={visible:c.a.bool.isRequired};var y=Object(l["a"])("Set the loading state of a specific module");y.propTypes={moduleType:c.a.string.isRequired,loading:c.a.bool.isRequired};var O=Object(l["a"])("Set the pagination state for a specific module");O.propTypes={moduleType:c.a.string.isRequired,page:c.a.number.isRequired};var k={None:"none",Timeout:"timeout",RenderErrorCaught:"renderErrorCaught",Unknown:"unknown"};var j=c.a.oneOf(Object(d["values"])(k));var C=Object(l["a"])("Set the error state for all modules");C.propTypes={error:j.isRequired,loading:c.a.bool.isRequired};var E=Object(l["a"])("Set the error state for a specific module");E.propTypes={moduleType:c.a.string.isRequired,error:j.isRequired,loading:c.a.bool.isRequired};var S=Object(l["a"])("Set the entire UI state for a specific module");S.propTypes={moduleType:c.a.string.isRequired,moduleState:c.a.shape({error:j.isRequired,loading:c.a.bool.isRequired,page:c.a.number.isRequired}).isRequired};var w=Object(l["a"])("Set the last scroll position for all of the search tabs");w.propTypes=c.a.shape({all:c.a.number,messages:c.a.number,files:c.a.number});var I=Object(l["a"])("Set the currently active tab field in Search to the default tab (use setTab instead for components)",{});I.propTypes=null;var T=Object(l["a"])("Reset the scroll position for all of the search tabs to zero");T.propTypes=null;var N=Object(l["a"])("Sets the ID for the query session");N.propTypes={querySessionId:c.a.string.isRequired};var R=Object(l["a"])("Sets the ID for the search session");R.propTypes={searchSessionId:c.a.string.isRequired};var A=Object(l["a"])("Sets the ID associated with the search session clear timer");A.propTypes={sessionTimeoutId:c.a.number};var M=Object(l["a"])("Sets the lastOpenMethod field, which tracks how the search interface was opened");M.propTypes={lastOpenMethod:c.a.string};var P=Object(l["e"])("Set the interface mode",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.interfaceMode;var n=t();var i=n&&n.searchUi&&n.searchUi.interfaceMode===a;var s=n&&n.searchUi&&n.searchUi.visible;if(i)return;e(m({interfaceMode:a}));if(s&&a===b.EDIT){e(N({querySessionId:Object(u["a"])()}));e(Object(p["a"])())}});P.propTypes={interfaceMode:c.a.oneOf(["EDIT","SEARCH_RESULTS"]).isRequired};var x=Object(l["a"])("Reset search ui redux state");x.propTypes={};var D={interfaceMode:"EDIT",tab:"messages",visible:false,requestQuery:null,modules:{},scrollPosition:{all:0,messages:0,files:0},querySessionId:"",searchSessionId:"",sessionTimeoutId:null,lastOpenMethod:null};var F=Object(l["c"])((h={},n()(h,x,function(){return D}),n()(h,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.interfaceMode;return s()({},e,{interfaceMode:r})}),n()(h,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.tab;return s()({},e,{tab:r})}),n()(h,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.visible;return s()({},e,{visible:r})}),n()(h,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.loading;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{loading:a})))})}),n()(h,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.page;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{page:a})))})}),n()(h,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.error,a=t.loading;return s()({},e,{modules:Object(d["mapValues"])(e.modules,function(e){return s()({},e,{error:r,loading:a})})})}),n()(h,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.error,i=t.loading;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],{error:a,loading:i})))})}),n()(h,S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.moduleType,a=t.moduleState;return s()({},e,{modules:s()({},e.modules,n()({},r,s()({},e.modules[r],a)))})}),n()(h,I,function(e){return s()({},e,{tab:D.tab})}),n()(h,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.scrollPosition;return s()({},e,{scrollPosition:r})}),n()(h,T,function(e){return s()({},e,{scrollPosition:D.scrollPosition})}),n()(h,N,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.querySessionId;return s()({},e,{querySessionId:r})}),n()(h,R,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.searchSessionId;return s()({},e,{searchSessionId:r})}),n()(h,A,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sessionTimeoutId;return s()({},e,{sessionTimeoutId:r})}),n()(h,M,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.lastOpenMethod;return s()({},e,{lastOpenMethod:r})}),h),D);t["default"]=F;var L=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.interfaceMode});var B=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.tab});var U=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.visible});var q=Object(l["d"])(function(e,t){return e&&e.searchUi&&e.searchUi.modules&&e.searchUi.modules[t]});var H=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.scrollPosition});var W=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.querySessionId});var G=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.searchSessionId});var V=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.sessionTimeoutId});var z=Object(l["d"])(function(e){return e&&e.searchUi&&e.searchUi.lastOpenMethod})},273:function(e,t,r){var a=r(52);var n=r(48).document;var i=a(n)&&a(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},274:function(e,t,r){var a=r(101);var n=r(67);var i=r(160);e.exports=function(e){return function(t,r,s){var o=a(t);var c=n(o.length);var l=i(s,c);var u;if(e&&r!=r)while(c>l){u=o[l++];if(u!=u)return true}else for(;c>l;l++)if((e||l in o)&&o[l]===r)return e||l||0;return!e&&-1}}},275:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},276:function(e,t,r){var a=r(53)("iterator");var n=false;try{var i=[7][a]();i["return"]=function(){n=true};Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return false;var r=false;try{var i=[7];var s=i[a]();s.next=function(){return{done:r=true}};i[a]=function(){return s};e(i)}catch(e){}return r}},281:function(e,t,r){var a=r(52);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},2832:function(e,t,r){"use strict";var a=r(48);var n=r(81);var i=r(62);var s=r(6);var o=r(92);var c=r(197).KEY;var l=r(51);var u=r(242);var d=r(161);var v=r(136);var p=r(53);var h=r(1105);var f=r(757);var m=r(2833);var b=r(417);var g=r(47);var _=r(52);var y=r(101);var O=r(122);var k=r(135);var j=r(158);var C=r(1106);var E=r(123);var S=r(61);var w=r(159);var I=E.f;var T=S.f;var N=C.f;var R=a.Symbol;var A=a.JSON;var M=A&&A.stringify;var P="prototype";var x=p("_hidden");var D=p("toPrimitive");var F={}.propertyIsEnumerable;var L=u("symbol-registry");var B=u("symbols");var U=u("op-symbols");var q=Object[P];var H="function"==typeof R;var W=a.QObject;var G=!W||!W[P]||!W[P].findChild;var V=i&&l(function(){return 7!=j(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(e,t,r){var a=I(q,t);a&&delete q[t];T(e,t,r);a&&e!==q&&T(q,t,a)}:T;var z=function(e){var t=B[e]=j(R[P]);t._k=e;return t};var K=H&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R};var Q=function e(t,r,a){t===q&&Q(U,r,a);g(t);r=O(r,true);g(a);if(n(B,r)){if(a.enumerable){n(t,x)&&t[x][r]&&(t[x][r]=false);a=j(a,{enumerable:k(0,false)})}else{n(t,x)||T(t,x,k(1,{}));t[x][r]=true}return V(t,r,a)}return T(t,r,a)};var Y=function e(t,r){g(t);var a=m(r=y(r));var n=0;var i=a.length;var s;while(i>n)Q(t,s=a[n++],r[s]);return t};var J=function e(t,r){return void 0===r?j(t):Y(j(t),r)};var Z=function e(t){var r=F.call(this,t=O(t,true));if(this===q&&n(B,t)&&!n(U,t))return false;return!(r||!n(this,t)||!n(B,t)||n(this,x)&&this[x][t])||r};var X=function e(t,r){t=y(t);r=O(r,true);if(t===q&&n(B,r)&&!n(U,r))return;var a=I(t,r);!a||!n(B,r)||n(t,x)&&t[x][r]||(a.enumerable=true);return a};var $=function e(t){var r=N(y(t));var a=[];var i=0;var s;while(r.length>i)n(B,s=r[i++])||s==x||s==c||a.push(s);return a};var ee=function e(t){var r=t===q;var a=N(r?U:y(t));var i=[];var s=0;var o;while(a.length>s)!n(B,o=a[s++])||r&&!n(q,o)||i.push(B[o]);return i};if(!H){R=function e(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=v(arguments.length>0?arguments[0]:void 0);var r=function(e){this===q&&r.call(U,e);n(this,x)&&n(this[x],t)&&(this[x][t]=false);V(this,t,k(1,e))};i&&G&&V(q,t,{configurable:true,set:r});return z(t)};o(R[P],"toString",function e(){return this._k});E.f=X;S.f=Q;r(247).f=C.f=$;r(362).f=Z;r(416).f=ee;i&&!r(157)&&o(q,"propertyIsEnumerable",Z,true);h.f=function(e){return z(p(e))}}s(s.G+s.W+s.F*!H,{Symbol:R});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ae=w(p.store),ne=0;ae.length>ne;)f(ae[ne++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return n(L,e+="")?L[e]:L[e]=R(e)},keyFor:function e(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var r in L)if(L[r]===t)return r},useSetter:function(){G=true},useSimple:function(){G=false}});s(s.S+s.F*!H,"Object",{create:J,defineProperty:Q,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:ee});A&&s(s.S+s.F*(!H||l(function(){var e=R();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function e(t){var r=[t];var a=1;var n,i;while(arguments.length>a)r.push(arguments[a++]);i=n=r[1];if(!_(n)&&void 0===t||K(t))return;b(n)||(n=function(e,t){"function"==typeof i&&(t=i.call(this,e,t));if(!K(t))return t});r[1]=n;return M.apply(A,r)}});R[P][D]||r(83)(R[P],D,R[P].valueOf);d(R,"Symbol");d(Math,"Math",true);d(a.JSON,"JSON",true)},2833:function(e,t,r){var a=r(159);var n=r(416);var i=r(362);e.exports=function(e){var t=a(e);var r=n.f;if(r){var s=r(e);var o=i.f;var c=0;var l;while(s.length>c)o.call(e,l=s[c++])&&t.push(l)}return t}},2837:function(e,t,r){var a=r(101);var n=r(123).f;r(142)("getOwnPropertyDescriptor",function(){return function e(t,r){return n(a(t),r)}})},2838:function(e,t,r){var a=r(76);var n=r(109);r(142)("getPrototypeOf",function(){return function e(t){return n(a(t))}})},2839:function(e,t,r){var a=r(76);var n=r(159);r(142)("keys",function(){return function e(t){return n(a(t))}})},2840:function(e,t,r){r(142)("getOwnPropertyNames",function(){return r(1106).f})},2841:function(e,t,r){var a=r(52);var n=r(197).onFreeze;r(142)("freeze",function(e){return function t(r){return e&&a(r)?e(n(r)):r}})},2842:function(e,t,r){var a=r(52);var n=r(197).onFreeze;r(142)("seal",function(e){return function t(r){return e&&a(r)?e(n(r)):r}})},2843:function(e,t,r){var a=r(52);var n=r(197).onFreeze;r(142)("preventExtensions",function(e){return function t(r){return e&&a(r)?e(n(r)):r}})},2844:function(e,t,r){var a=r(52);r(142)("isFrozen",function(e){return function t(r){return!a(r)||!!e&&e(r)}})},2845:function(e,t,r){var a=r(52);r(142)("isSealed",function(e){return function t(r){return!a(r)||!!e&&e(r)}})},2846:function(e,t,r){var a=r(52);r(142)("isExtensible",function(e){return function t(r){return!!a(r)&&(!e||e(r))}})},2847:function(e,t,r){var a=r(6);a(a.S+a.F,"Object",{assign:r(1107)})},2848:function(e,t,r){var a=r(6);a(a.S,"Object",{is:r(2849)})},2849:function(e,t){e.exports=Object.is||function e(t,r){return t===r?0!==t||1/t===1/r:t!=t&&r!=r}},2853:function(e,t,r){var a=r(61).f;var n=Function.prototype;var i=/^\s*function ([^ (]*)/;var s="name";s in n||r(62)&&a(n,s,{configurable:true,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},2860:function(e,t,r){var a=r(6);a(a.S,"Number",{EPSILON:Math.pow(2,-52)})},2861:function(e,t,r){var a=r(6);var n=r(48).isFinite;a(a.S,"Number",{isFinite:function e(t){return"number"==typeof t&&n(t)}})},2862:function(e,t,r){var a=r(6);a(a.S,"Number",{isInteger:r(1113)})},2863:function(e,t,r){var a=r(6);a(a.S,"Number",{isNaN:function e(t){return t!=t}})},2864:function(e,t,r){var a=r(6);var n=r(1113);var i=Math.abs;a(a.S,"Number",{isSafeInteger:function e(t){return n(t)&&i(t)<=9007199254740991}})},2865:function(e,t,r){var a=r(6);a(a.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},2866:function(e,t,r){var a=r(6);a(a.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},2869:function(e,t,r){var a=r(6);var n=r(1114);var i=Math.sqrt;var s=Math.acosh;a(a.S+a.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&Infinity==s(Infinity)),"Math",{acosh:function e(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:n(t-1+i(t-1)*i(t+1))}})},2870:function(e,t,r){var a=r(6);var n=Math.asinh;function i(e){return isFinite(e=+e)&&0!=e?e<0?-i(-e):Math.log(e+Math.sqrt(e*e+1)):e}a(a.S+a.F*!(n&&1/n(0)>0),"Math",{asinh:i})},2871:function(e,t,r){var a=r(6);var n=Math.atanh;a(a.S+a.F*!(n&&1/n(-0)<0),"Math",{atanh:function e(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},2872:function(e,t,r){var a=r(6);var n=r(762);a(a.S,"Math",{cbrt:function e(t){return n(t=+t)*Math.pow(Math.abs(t),1/3)}})},2873:function(e,t,r){var a=r(6);a(a.S,"Math",{clz32:function e(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},2874:function(e,t,r){var a=r(6);var n=Math.exp;a(a.S,"Math",{cosh:function e(t){return(n(t=+t)+n(-t))/2}})},2875:function(e,t,r){var a=r(6);var n=r(763);a(a.S+a.F*(n!=Math.expm1),"Math",{expm1:n})},2876:function(e,t,r){var a=r(6);a(a.S,"Math",{fround:r(1115)})},2877:function(e,t,r){var a=r(6);var n=Math.abs;a(a.S,"Math",{hypot:function e(t,r){var a=0;var i=0;var s=arguments.length;var o=0;var c,l;while(i<s){c=n(arguments[i++]);if(o<c){l=o/c;a=a*l*l+1;o=c}else if(c>0){l=c/o;a+=l*l}else a+=c}return Infinity===o?Infinity:o*Math.sqrt(a)}})},2878:function(e,t,r){var a=r(6);var n=Math.imul;a(a.S+a.F*r(51)(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function e(t,r){var a=65535;var n=+t;var i=+r;var s=a&n;var o=a&i;return 0|s*o+((a&n>>>16)*o+s*(a&i>>>16)<<16>>>0)}})},2879:function(e,t,r){var a=r(6);a(a.S,"Math",{log10:function e(t){return Math.log(t)*Math.LOG10E}})},2880:function(e,t,r){var a=r(6);a(a.S,"Math",{log1p:r(1114)})},2881:function(e,t,r){var a=r(6);a(a.S,"Math",{log2:function e(t){return Math.log(t)/Math.LN2}})},2882:function(e,t,r){var a=r(6);a(a.S,"Math",{sign:r(762)})},2883:function(e,t,r){var a=r(6);var n=r(763);var i=Math.exp;a(a.S+a.F*r(51)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function e(t){return Math.abs(t=+t)<1?(n(t)-n(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},2884:function(e,t,r){var a=r(6);var n=r(763);var i=Math.exp;a(a.S,"Math",{tanh:function e(t){var r=n(t=+t);var a=n(-t);return Infinity==r?1:Infinity==a?-1:(r-a)/(i(t)+i(-t))}})},2885:function(e,t,r){var a=r(6);a(a.S,"Math",{trunc:function e(t){return(t>0?Math.floor:Math.ceil)(t)}})},2886:function(e,t,r){var a=r(6);var n=r(160);var i=String.fromCharCode;var s=String.fromCodePoint;a(a.S+a.F*(!!s&&1!=s.length),"String",{fromCodePoint:function e(t){var r=[];var a=arguments.length;var s=0;var o;while(a>s){o=+arguments[s++];if(n(o,1114111)!==o)throw RangeError(o+" is not a valid code point");r.push(o<65536?i(o):i(55296+((o-=65536)>>10),o%1024+56320))}return r.join("")}})},2887:function(e,t,r){var a=r(6);var n=r(101);var i=r(67);a(a.S,"String",{raw:function e(t){var r=n(t.raw);var a=i(r.length);var s=arguments.length;var o=[];var c=0;while(a>c){o.push(String(r[c++]));c<s&&o.push(String(arguments[c]))}return o.join("")}})},2889:function(e,t,r){"use strict";var a=r(6);var n=r(347)(false);a(a.P,"String",{codePointAt:function e(t){return n(this,t)}})},2890:function(e,t,r){"use strict";var a=r(6);var n=r(67);var i=r(764);var s="endsWith";var o=""[s];a(a.P+a.F*r(765)(s),"String",{endsWith:function e(t){var r=i(this,t,s);var a=arguments.length>1?arguments[1]:void 0;var c=n(r.length);var l=void 0===a?c:Math.min(n(a),c);var u=String(t);return o?o.call(r,u,l):r.slice(l-u.length,l)===u}})},2891:function(e,t,r){"use strict";var a=r(6);var n=r(764);var i="includes";a(a.P+a.F*r(765)(i),"String",{includes:function e(t){return!!~n(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},2892:function(e,t,r){var a=r(6);a(a.P,"String",{repeat:r(761)})},2893:function(e,t,r){"use strict";var a=r(6);var n=r(67);var i=r(764);var s="startsWith";var o=""[s];a(a.P+a.F*r(765)(s),"String",{startsWith:function e(t){var r=i(this,t,s);var a=n(Math.min(arguments.length>1?arguments[1]:void 0,r.length));var c=String(t);return o?o.call(r,c,a):r.slice(a,a+c.length)===c}})},291:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(3184);var y=r(5);var O=r(43);var k=r(22145);var j=r(472);var C=new y["b"]("channel_sidebar");var E={id:v.a.string.isRequired,label:v.a.string.isRequired,labelUnread:v.a.string,hasUnreads:v.a.bool,badgeCount:v.a.number,isSelected:v.a.bool,selectItem:v.a.func,isDim:v.a.bool};var S={isSelected:false,selectable:true,label:"",labelUnread:"",hasUnreads:false,badgeCount:0,selectItem:m.a.noop,isDim:false};var w=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onClick=r.onClick.bind(r);r.state={};return r}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();Object(O["action"])(j["a"],"Selected "+this.props.id);this.props.selectItem(this.props.id,t)}},{key:"render",value:function e(){var t=this.props,r=t.id,a=t.label,n=t.labelUnread,i=t.hasUnreads,s=t.badgeCount,o=t.isSelected,c=t.isDim;var l=g()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===r,"p-channel_sidebar__link--all-threads":"Vall_threads"===r,"p-channel_sidebar__link--invites":"Vinvites"===r,"p-channel_sidebar__link--selected":o,"p-channel_sidebar__link--unread":i,"p-channel_sidebar__link--dim":c});var u=i&&n?n:a;var d=h.a.createElement("span",{className:"p-channel_sidebar__name"},u);var v=m.a.filter([o?C.t("selected"):null,i&&!s?C.t("has unreads"):null,s?C.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:s}):null],m.a.identity);var p=u+(v.length?" ("+v.join(", ")+")":"");var f=h.a.createElement(k["a"],{count:s,className:"p-channel_sidebar__badge"});return h.a.createElement(_["c"],{className:l,onClick:this.onClick,"aria-label":p},d,f)}}]);return t}(p["PureComponent"]);w.displayName="Link";w.defaultProps=S;t["a"]=w},2915:function(e,t,r){"use strict";var a=r(6);var n=r(352);a(a.S+a.F*r(51)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function e(){var t=0;var r=arguments.length;var a=new("function"==typeof this?this:Array)(r);while(r>t)n(a,t,arguments[t++]);a.length=r;return a}})},2920:function(e,t,r){var a=r(52);var n=r(417);var i=r(53)("species");e.exports=function(e){var t;if(n(e)){t=e.constructor;"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0);if(a(t)){t=t[i];null===t&&(t=void 0)}}return void 0===t?Array:t}},2929:function(e,t,r){var a=r(6);a(a.P,"Array",{copyWithin:r(1117)});r(198)("copyWithin")},2930:function(e,t,r){var a=r(6);a(a.P,"Array",{fill:r(767)});r(198)("fill")},2931:function(e,t,r){"use strict";var a=r(6);var n=r(143)(5);var i="find";var s=true;i in[]&&Array(1)[i](function(){s=false});a(a.P+a.F*s,"Array",{find:function e(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}});r(198)(i)},2932:function(e,t,r){"use strict";var a=r(6);var n=r(143)(6);var i="findIndex";var s=true;i in[]&&Array(1)[i](function(){s=false});a(a.P+a.F*s,"Array",{findIndex:function e(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}});r(198)(i)},2936:function(e,t,r){r(420)("match",1,function(e,t,r){return[function r(a){"use strict";var n=e(this);var i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},r]})},2937:function(e,t,r){r(420)("replace",2,function(e,t,r){return[function a(n,i){"use strict";var s=e(this);var o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,s,i):r.call(String(s),n,i)},r]})},2938:function(e,t,r){r(420)("search",1,function(e,t,r){return[function r(a){"use strict";var n=e(this);var i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n):new RegExp(a)[t](String(n))},r]})},2939:function(e,t,r){r(420)("split",2,function(e,t,a){"use strict";var n=r(418);var i=a;var s=[].push;var o="split";var c="length";var l="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[c]||2!="ab"[o](/(?:ab)*/)[c]||4!="."[o](/(.?)(.?)/)[c]||"."[o](/()()/)[c]>1||""[o](/.?/)[c]){var u=void 0===/()??/.exec("")[1];a=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!n(e))return i.call(r,e,t);var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"");var d=0;var v=void 0===t?4294967295:t>>>0;var p=new RegExp(e.source,o+"g");var h,f,m,b,g;u||(h=new RegExp("^"+p.source+"$(?!\\s)",o));while(f=p.exec(r)){m=f.index+f[0][c];if(m>d){a.push(r.slice(d,f.index));!u&&f[c]>1&&f[0].replace(h,function(){for(g=1;g<arguments[c]-2;g++)void 0===arguments[g]&&(f[g]=void 0)});f[c]>1&&f.index<r[c]&&s.apply(a,f.slice(1));b=f[0][c];d=m;if(a[c]>=v)break}p[l]===f.index&&p[l]++}d===r[c]?!b&&p.test("")||a.push(""):a.push(r.slice(d));return a[c]>v?a.slice(0,v):a}}else"0"[o](void 0,0)[c]&&(a=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function r(n,i){var s=e(this);var o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,s,i):a.call(String(s),n,i)},a]})},2941:function(e,t,r){"use strict";var a=r(1126);var n=r(281);var i="WeakSet";r(422)(i,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function e(t){return a.def(n(this,i),t,true)}},a,false,true)},2942:function(e,t,r){"use strict";var a=r(6);var n=r(423);var i=r(772);var s=r(47);var o=r(160);var c=r(67);var l=r(52);var u=r(48).ArrayBuffer;var d=r(421);var v=i.ArrayBuffer;var p=i.DataView;var h=n.ABV&&u.isView;var f=v.prototype.slice;var m=n.VIEW;var b="ArrayBuffer";a(a.G+a.W+a.F*(u!==v),{ArrayBuffer:v});a(a.S+a.F*!n.CONSTR,b,{isView:function e(t){return h&&h(t)||l(t)&&m in t}});a(a.P+a.U+a.F*r(51)(function(){return!new v(2).slice(1,void 0).byteLength}),b,{slice:function e(t,r){if(void 0!==f&&void 0===r)return f.call(s(this),t);var a=s(this).byteLength;var n=o(t,a);var i=o(void 0===r?a:r,a);var l=new(d(this,v))(c(i-n));var u=new p(this);var h=new p(l);var m=0;while(n<i)h.setUint8(m++,u.getUint8(n++));return l}});r(248)(b)},2944:function(e,t,r){r(184)("Int8",1,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2945:function(e,t,r){r(184)("Uint8",1,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2946:function(e,t,r){r(184)("Uint8",1,function(e){return function t(r,a,n){return e(this,r,a,n)}},true)},2947:function(e,t,r){r(184)("Int16",2,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2948:function(e,t,r){r(184)("Uint16",2,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2949:function(e,t,r){r(184)("Int32",4,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2950:function(e,t,r){r(184)("Uint32",4,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2951:function(e,t,r){r(184)("Float32",4,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2952:function(e,t,r){r(184)("Float64",8,function(e){return function t(r,a,n){return e(this,r,a,n)}})},2953:function(e,t,r){var a=r(6);var n=r(86);var i=r(47);var s=(r(48).Reflect||{}).apply;var o=Function.apply;a(a.S+a.F*!r(51)(function(){s(function(){})}),"Reflect",{apply:function e(t,r,a){var c=n(t);var l=i(a);return s?s(c,r,l):o.call(c,r,l)}})},2954:function(e,t,r){var a=r(6);var n=r(158);var i=r(86);var s=r(47);var o=r(52);var c=r(51);var l=r(1108);var u=(r(48).Reflect||{}).construct;var d=c(function(){function e(){}return!(u(function(){},[],e)instanceof e)});var v=!c(function(){u(function(){})});a(a.S+a.F*(d||v),"Reflect",{construct:function e(t,r){i(t);s(r);var a=arguments.length<3?t:i(arguments[2]);if(v&&!d)return u(t,r,a);if(t==a){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var c=[null];c.push.apply(c,r);return new(l.apply(t,c))}var p=a.prototype;var h=n(o(p)?p:Object.prototype);var f=Function.apply.call(t,h,r);return o(f)?f:h}})},2955:function(e,t,r){var a=r(61);var n=r(6);var i=r(47);var s=r(122);n(n.S+n.F*r(51)(function(){Reflect.defineProperty(a.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function e(t,r,n){i(t);r=s(r,true);i(n);try{a.f(t,r,n);return true}catch(e){return false}}})},2956:function(e,t,r){var a=r(6);var n=r(123).f;var i=r(47);a(a.S,"Reflect",{deleteProperty:function e(t,r){var a=n(i(t),r);return!(a&&!a.configurable)&&delete t[r]}})},2958:function(e,t,r){var a=r(123);var n=r(109);var i=r(81);var s=r(6);var o=r(52);var c=r(47);function l(e,t){var r=arguments.length<3?e:arguments[2];var s,u;if(c(e)===r)return e[t];if(s=a.f(e,t))return i(s,"value")?s.value:void 0!==s.get?s.get.call(r):void 0;if(o(u=n(e)))return l(u,t,r)}s(s.S,"Reflect",{get:l})},2959:function(e,t,r){var a=r(123);var n=r(6);var i=r(47);n(n.S,"Reflect",{getOwnPropertyDescriptor:function e(t,r){return a.f(i(t),r)}})},2960:function(e,t,r){var a=r(6);var n=r(109);var i=r(47);a(a.S,"Reflect",{getPrototypeOf:function e(t){return n(i(t))}})},2961:function(e,t,r){var a=r(6);a(a.S,"Reflect",{has:function e(t,r){return r in t}})},2962:function(e,t,r){var a=r(6);var n=r(47);var i=Object.isExtensible;a(a.S,"Reflect",{isExtensible:function e(t){n(t);return!i||i(t)}})},2963:function(e,t,r){var a=r(6);a(a.S,"Reflect",{ownKeys:r(1128)})},2964:function(e,t,r){var a=r(6);var n=r(47);var i=Object.preventExtensions;a(a.S,"Reflect",{preventExtensions:function e(t){n(t);try{i&&i(t);return true}catch(e){return false}}})},2965:function(e,t,r){var a=r(61);var n=r(123);var i=r(109);var s=r(81);var o=r(6);var c=r(135);var l=r(47);var u=r(52);function d(e,t,r){var o=arguments.length<4?e:arguments[3];var v=n.f(l(e),t);var p,h;if(!v){if(u(h=i(e)))return d(h,t,r,o);v=c(0)}if(s(v,"value")){if(false===v.writable||!u(o))return false;p=n.f(o,t)||c(0);p.value=r;a.f(o,t,p);return true}return void 0!==v.set&&(v.set.call(o,r),true)}o(o.S,"Reflect",{set:d})},2966:function(e,t,r){var a=r(6);var n=r(758);n&&a(a.S,"Reflect",{setPrototypeOf:function e(t,r){n.check(t,r);try{n.set(t,r);return true}catch(e){return false}}})},2967:function(e,t,r){"use strict";var a=r(6);var n=r(274)(true);a(a.P,"Array",{includes:function e(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}});r(198)("includes")},2971:function(e,t,r){"use strict";var a=r(6);var n=r(1130);var i=r(7312);a(a.P+a.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(i),"String",{padStart:function e(t){return n(this,t,arguments.length>1?arguments[1]:void 0,true)}})},2972:function(e,t,r){"use strict";var a=r(6);var n=r(1130);var i=r(7312);a(a.P+a.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(i),"String",{padEnd:function e(t){return n(this,t,arguments.length>1?arguments[1]:void 0,false)}})},2978:function(e,t,r){var a=r(6);var n=r(1128);var i=r(101);var s=r(123);var o=r(352);a(a.S,"Object",{getOwnPropertyDescriptors:function e(t){var r=i(t);var a=s.f;var c=n(r);var l={};var u=0;var d,v;while(c.length>u){v=a(r,d=c[u++]);void 0!==v&&o(l,d,v)}return l}})},2979:function(e,t,r){var a=r(6);var n=r(1131)(false);a(a.S,"Object",{values:function e(t){return n(t)}})},2980:function(e,t,r){var a=r(6);var n=r(1131)(true);a(a.S,"Object",{entries:function e(t){return n(t)}})},3023:function(e,t,r){var a=r(48);var n=r(6);var i=r(7312);var s=[].slice;var o=/MSIE .\./.test(i);var c=function(e){return function(t,r){var a=arguments.length>2;var n=!!a&&s.call(arguments,2);return e(a?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,r)}};n(n.G+n.B+n.F*o,{setTimeout:c(a.setTimeout),setInterval:c(a.setInterval)})},3024:function(e,t,r){var a=r(6);var n=r(769);a(a.G+a.B,{setImmediate:n.set,clearImmediate:n.clear})},3025:function(e,t,r){var a=r(768);var n=r(159);var i=r(92);var s=r(48);var o=r(83);var c=r(141);var l=r(53);var u=l("iterator");var d=l("toStringTag");var v=c.Array;var p={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var h=n(p),f=0;f<h.length;f++){var m=h[f];var b=p[m];var g=s[m];var _=g&&g.prototype;var y;if(_){_[u]||o(_,u,v);_[d]||o(_,d,m);c[m]=v;if(b)for(y in a)_[y]||i(_,y,a[y],true)}}},3031:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(13671);r.d(t,"persistReducer",function(){return a["a"]});var n=r(13674);r.d(t,"persistCombineReducers",function(){return n["a"]});var i=r(3036);r.d(t,"persistStore",function(){return i["a"]});var s=r(13676);r.d(t,"createMigrate",function(){return s["a"]});var o=r(3035);r.d(t,"createTransform",function(){return o["a"]});var c=r(1139);r.d(t,"getStoredState",function(){return c["a"]});var l=r(13672);r.d(t,"createPersistoid",function(){return l["a"]});var u=r(1138);r.d(t,"purgeStoredState",function(){return u["a"]});var d=r(363);r.d(t,"KEY_PREFIX",function(){return d["c"]});r.d(t,"FLUSH",function(){return d["b"]});r.d(t,"REHYDRATE",function(){return d["h"]});r.d(t,"PAUSE",function(){return d["d"]});r.d(t,"PERSIST",function(){return d["e"]});r.d(t,"PURGE",function(){return d["f"]});r.d(t,"REGISTER",function(){return d["g"]});r.d(t,"DEFAULT_VERSION",function(){return d["a"]})},3034:function(e,t){t=e.exports=r;t.getSerialize=a;function r(e,t,r,n){return JSON.stringify(e,a(t,n),r)}function a(e,t){var r=[],a=[];null==t&&(t=function(e,t){if(r[0]===t)return"[Circular ~]";return"[Circular ~."+a.slice(0,r.indexOf(t)).join(".")+"]"});return function(n,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this);~s?a.splice(s,Infinity,n):a.push(n);~r.indexOf(i)&&(i=t.call(this,n,i))}else r.push(i);return null==e?i:e.call(this,n,i)}}},3035:function(e,t,r){"use strict";t["a"]=a;function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a=r.whitelist||null;var n=r.blacklist||null;function i(e){if(a&&-1===a.indexOf(e))return true;if(n&&-1!==n.indexOf(e))return true;return false}return{in:function t(r,a,n){return!i(a)&&e?e(r,a,n):r},out:function e(r,a,n){return!i(a)&&t?t(r,a,n):r}}}},3036:function(e,t,r){"use strict";t["a"]=u;var a=r(295);var n=r(13671);var i=r(363);var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var c={registry:[],bootstrapped:false};var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;var r=arguments[1];switch(r.type){case i["g"]:return s({},t,{registry:[].concat(o(t.registry),[r.key])});case i["h"]:var a=t.registry.indexOf(r.key);var n=[].concat(o(t.registry));n.splice(a,1);return s({},t,{registry:n,bootstrapped:0===n.length});default:return t}};function u(e,t,r){var n;var o;false;var u=r||false;var d=Object(a["createStore"])(l,c,t?t.enhancer:void 0);var v=function e(t){d.dispatch({type:i["g"],key:t})};var p=function t(r,a,n){var s={type:i["h"],payload:a,err:n,key:r};e.dispatch(s);d.dispatch(s);if(u&&h.getState().bootstrapped){u();u=false}};var h=s({},d,{purge:function t(){var r=[];e.dispatch({type:i["f"],result:function e(t){r.push(t)}});return Promise.all(r)},flush:function t(){var r=[];e.dispatch({type:i["b"],result:function e(t){r.push(t)}});return Promise.all(r)},pause:function t(){e.dispatch({type:i["d"]})},persist:function t(){e.dispatch({type:i["e"],register:v,rehydrate:p})}});h.persist();return h}},3043:function(e,t,r){"use strict";t["a"]=n;var a=r(21700);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["d"])("ublockworkaround.history",e)}},3045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(91);Object(a["a"])("interop.clog",{instance:Object(n["a"])(),track:n["b"],trackClick:n["c"],trackClickWithContext:n["d"],trackForm:n["e"]})},3054:function(e,t,r){"use strict";t["b"]=i;t["a"]=s;var a=r(1);var n=r.n(a);function i(e){var t=e.retentionType,r=e.retentionDuration;if(!Object(a["isInteger"])(t))return false;var n=36500;return 0===t||1===t&&Object(a["isInteger"])(r)&&r>0&&r<n}function s(e){var t=e.retentionDuration,r=e.retentionDurationUnit;if(!Object(a["isInteger"])(r))return t;return 0===r?t:365*t}},3056:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21697);var s=r(190);var o=r(54);var c=r(21769);var l=r(1604);var u=r(22208);var d=r(88);var v=10;var p=5;function h(e,t,r){var a=r();if(Object(o["getUserPref"])(a,"show_sidebar_quickswitcher_button"))return;if(Object(o["getUserPref"])(a,"k_key_omnibox_auto_hide_count")===p)return;if(Object(u["a"])())return;if(Object(i["getCountOfOpenChannels"])(a)>=v){t(Object(c["c"])({pref:"show_sidebar_quickswitcher_button",value:true}));t(Object(s["setJumperCoachmarkState"])("SHOW_BUTTON"))}}function f(e,t,r){var a=r();var i=Object(s["getSections"])(a);i&&!n.a.isEmpty(i)&&Object(l["e"])(i)}Object(d["b"])({actions:[i["addOrReplaceChannels"]],sideEffect:h,reasons:[i["CHANNEL_ACTION_REASONS"].ADD_CHANNEL,i["CHANNEL_ACTION_REASONS"].UPSERT_CHANNEL]});Object(d["b"])({actions:[s["toggleSectionFilter"]],sideEffect:f})},3088:function(e,t,r){"use strict";r.d(t,"b",function(){return s});r.d(t,"a",function(){return o});var a=r(1);var n=r.n(a);var i=r(10);var s=Object(i["c"])("TS.client.channel_header.start",n.a.noop);var o=Object(i["c"])("TS.client.channel_header.openTopicInput",n.a.noop)},3091:function(e,t,r){"use strict";var a=r(3089);var n=r(21706);var i=r(3090);var s=r(88);function o(e,t,r){var n=r();var s=e.payload.id;var o=Object(a["getFileRefreshState"])(n,s);if(o!==a["STATE"].REFRESHING)return;var c=Object(a["getFileRefreshTimeout"])(n,s);c&&clearTimeout(c);var l=setTimeout(function(){return t(Object(a["refreshReset"])({fileId:s,timeout:l}))},i["a"]);t(Object(a["refreshDone"])({fileId:s}))}Object(s["b"])({actions:[n["addFile"]],sideEffect:o})},3093:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(395);var n=r.n(a);var i=r(42);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},3096:function(e,t,r){"use strict";var a=r(3097);t["a"]=a["a"]},3097:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(1);var g=r.n(b);var _=r(3098);var y=r(3100);var O=r(20121);var k=r.n(O);var j={tabs:v.a.array.isRequired,defaultTabId:v.a.string,onTabChange:v.a.func,fullHeight:v.a.bool,fullWidthMenu:v.a.bool};var C={defaultTabId:"",onTabChange:b["noop"],fullHeight:false,fullWidthMenu:false};var E=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.renderTabsItems=r.renderTabsItems.bind(r);r.onItemClick=r.onItemClick.bind(r);var a=void 0;var i=r.props,s=i.defaultTabId,o=i.tabs;o&&o.length&&(a=s&&Object(b["find"])(o,{id:s})?s:o[0].id);r.state={selectedTabId:a};return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){var r=this;var a=this.props.defaultTabId;if(a!==t.defaultTabId&&t.defaultTabId){if(!this.props.tabs||!this.props.tabs.length)return;this.setState(function(){return{selectedTabId:t.defaultTabId}},function(){r.props.onTabChange(t.defaultTabId)})}}},{key:"onItemClick",value:function e(t,r){var a=this;this.setState(function(){return{selectedTabId:r}},function(){a.props.onTabChange(r)})}},{key:"renderTabsItems",value:function e(){var t=this;var r=this.props,a=r.tabs,n=r.fullWidthMenu;var i=this.onItemClick;var s=Object(b["map"])(a,function(e){function r(t,r){e.isExternalLink||i(t,r);e.onClick&&e.onClick(r)}return h.a.createElement(_["a"],{key:e.id,id:e.id,icon:e.icon,name:e.title,onClick:r,isSelected:t.state.selectedTabId===e.id,isDisabled:e.isDisabled,fullWidth:n,count:e.titleCount})});return s}},{key:"render",value:function e(){var t=this.props,r=t.tabs,a=t.fullHeight,n=t.fullWidthMenu;var i=this.state.selectedTabId;var s=Object(b["find"])(r,{id:i},"").content;var o=m()({"c-tabs__tab_container--full_height":a});var c=m()("c-tabs__tab_menu",{"c-tabs__tab_menu--full_width":n});return h.a.createElement("div",{className:o},h.a.createElement("div",{role:"tablist",className:c},this.renderTabsItems()),h.a.createElement(y["a"],{content:s,fullHeight:a,fullWidthMenu:n}))}}]);return t}(p["PureComponent"]);E.displayName="Tabs";E.defaultProps=C;t["a"]=E},3098:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(37);var g=r(20121);var _=r.n(g);var y={id:v.a.string.isRequired,name:v.a.node.isRequired,onClick:v.a.func.isRequired,isSelected:v.a.bool,isDisabled:v.a.bool,icon:v.a.string,fullWidth:v.a.bool,count:v.a.number};var O={isSelected:false,isDisabled:false,icon:"",content:"",fullWidth:false,count:NaN};var k=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.maybeCallOnClick=r.maybeCallOnClick.bind(r);return r}s()(t,[{key:"maybeCallOnClick",value:function e(t,r){if(this.props.isDisabled)return;this.props.onClick(t,r)}},{key:"maybeRenderCount",value:function e(){var t=this.props.count;if(isNaN(t))return null;return h.a.createElement("span",{className:"c-tabs__tab_count"},t)}},{key:"maybeRenderIcon",value:function e(){var t=this.props.icon;if(!t)return null;return h.a.createElement(b["b"],{type:t,className:"c-tabs__tab_icon",size:"inherit"})}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.id,n=r.name,i=r.isSelected,s=r.isDisabled,o=r.fullWidth;var c=m()("c-tabs__tab","js-tab",{"c-tabs__tab--active":i,"c-tabs__tab--disabled":s,"c-tabs__tab--full_width":o});return h.a.createElement("div",{role:"tab",tabIndex:"0",className:c,onClick:function e(r){return t.maybeCallOnClick(r,a)}},h.a.createElement("button",{className:"c-tabs__tab_button",tabIndex:"-1"},n,this.maybeRenderCount(),this.maybeRenderIcon()))}}]);return t}(p["PureComponent"]);k.displayName="TabsItem";k.defaultProps=O;t["a"]=k},3100:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(8);var m=r.n(f);var b=r(20121);var g=r.n(b);var _={content:v.a.node.isRequired,fullHeight:v.a.bool};var y={fullHeight:false};var O=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.content,a=t.fullHeight;var n=m()("c-tabs__tab_panel","js-panel","c-tabs__tab_panel--active",{"c-tabs__tab_panel--full_height":a});return h.a.createElement("div",{role:"tabpanel",className:n},r)}}]);return t}(p["PureComponent"]);O.displayName="TabsContent";O.defaultProps=y;t["a"]=O},3109:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(21851);var n=r(21975);var i=r(42);Object(i["a"])("interop.metrics",Object(a["a"])("timing"));Object(i["a"])("interop.metrics.start",function(){return n["a"].start()});Object(i["a"])("interop.metrics.sendDataAndEmptyQueue",function(){return n["a"].sendDataAndEmptyQueue()})},3111:function(e,t,r){"use strict";var a=r(3112);t["a"]=a["a"]},3112:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(1);var m=r.n(f);var b=r(3113);var g=r(20176);var _=r.n(g);var y={title:v.a.node.isRequired,actions:v.a.array};var O={actions:[]};var k=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var r=Object(f["map"])(t,function(e,t){return h.a.createElement(b["a"],{key:t,action:e})});return r}},{key:"render",value:function e(){return h.a.createElement("div",{className:"c-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},h.a.createElement("span",{className:"c-action_bar_title black"},this.props.title),h.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(p["PureComponent"]);k.displayName="ActionBar";k.defaultProps=O;t["a"]=k},3113:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f=r(20176);var m=r.n(f);var b={action:v.a.node};var g={action:null};var _=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){return h.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(p["PureComponent"]);_.displayName="ActionBarItem";_.defaultProps=g;t["a"]=_},3123:function(e,t,r){"use strict";var a=r(21707);var n=r(12);var i=r(3284);var s=r(21728);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app;var r=arguments[1];var a=arguments[2];if(!Object(n["isFeatureEnabled"])(a(),"feature_apps_store_m11n"))return;t&&r(Object(i["bulkUpsertAppsAndMarkAsFresh"])([t]))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var r=arguments[1];var a=arguments[2];if(!Object(n["isFeatureEnabled"])(a(),"feature_apps_store_m11n"))return;t&&r(Object(i["bulkRmApps"])([t]))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var r=arguments[1];var a=arguments[2];Object(n["isFeatureEnabled"])(a(),"feature_better_web_app_model")&&r(Object(s["markAppProfilesForAppAsStale"])(t))}Object(a["a"])("apps_installed",o);Object(a["a"])("apps_changed",o);Object(a["a"])("apps_uninstalled",c);Object(a["a"])("apps_uninstalled",l)},3124:function(e,t,r){"use strict";var a=r(21707);var n=r(12);var i=r(1472);var s=r(3275);var o=r(21728);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var r=arguments[1];var a=arguments[2];Object(n["useReactMessages"])(a())?r(Object(s["upsertBot"])(t)):Object(i["a"])([t])}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var r=arguments[1];var a=arguments[2];Object(n["isFeatureEnabled"])(a(),"feature_better_web_app_model")&&r(Object(o["markAppProfileAsStale"])(t.id))}Object(a["a"])("bot_added",c);Object(a["a"])("bot_changed",c);Object(a["a"])("bot_changed",l)},3125:function(e,t){},3126:function(e,t,r){"use strict";t["a"]=N;t["b"]=A;var a=r(3182);var n=r(21697);var i=r(3273);var s=r(21698);var o=r(487);var c=r(21797);var l=r(3203);var u=r(907);var d=r(21707);var v=r(21856);var p=r(21701);var h=r(277);var f=r(329);var m=r(1435);var b=r(1035);var g=r(74);var _=r(12);var y=r(124);var O=r(21714);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.is_moved;var i=arguments[1];var o=arguments[2];var c=o();var d=Object(n["isChannelExistent"])(c,t)&&Object(n["getChannelById"])(c,t);if(!d){i(Object(a["warn"])("Received archive event for an unknown channel: "+t));return}if(Object(u["isArchived"])(d))return;i(Object(a["info"])("Archived channel "+t));var v=void 0;if(Object(u["isPublicChannel"])(d)){var p=Object(s["getCurrentMember"])(c);v=!Object(l["R"])(p)&&Object(u["isMemberOfChannel"])(d)}else Object(u["isPrivateChannel"])(d)&&(v=!!Object(u["isOpen"])(d));i(Object(n["archiveChannel"])({id:t,isMoved:!!r,wasArchivedThisSession:v}))}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var i=arguments[2];if(Object(u["isIm"])(t)){r(Object(n["upsertChannel"])({channel:t}));Object(g["e"])();r(Object(n["updateOneKeyForChannel"])({id:t.id,opened_this_session:true}));return}if(Object(l["R"])(Object(s["getCurrentMember"])(i())))return;r(Object(a["info"])("Created channel "+t.id));var o=r(Object(n["upsertChannel"])({channel:t}));Object(m["c"])(o)}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user;var i=arguments[1];var l=arguments[2];var d=l();var v=Object(n["isChannelExistent"])(d,t)&&Object(n["getChannelById"])(d,t);if(!v){i(Object(a["error"])("Unknown channel "+t));return}i(Object(n["updateOneKeyForChannel"])({id:t,is_open:true}));if(Object(u["isIm"])(v)){var p=Object(s["isMemberExistent"])(d,r)&&Object(s["getMemberById"])(d,r);if(!p){i(Object(a["error"])("Unknown member "+r));return}}if(Object(c["getShouldBecomeActive"])(l(),r||t)){var f=Object(c["getPendingMsgForChannel"])(l(),r||t);f&&i(Object(o["b"])({channelId:t,text:f}));i(Object(h["a"])({id:t}));i(Object(c["clearPendingOpenChannel"])({memberId:r,channelId:t}))}i(Object(n["updateOneKeyForChannel"])({id:t,opened_this_session:true}));Object(u["isIm"])(v)&&Object(b["b"])(Object(n["getChannelById"])(l(),t))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.converted_to;var i=arguments[1];var s=arguments[2];var o=s();var c=Object(n["isChannelExistent"])(o,t)&&Object(n["getChannelById"])(o,t);if(!c){i(Object(a["error"])("Unknown channel "+t));return}i(Object(n["updateOneKeyForChannel"])({id:t,is_open:false}));var l=void 0;if(r){i(Object(n["updateOneKeyForChannel"])({id:t,latest:null}));l=r}if(t===Object(O["getPrimaryView"])(s())){var d=Object(_["isClientApp"])(s());if(Object(p["a"])()||d&&l){l=l||Object(y["getPrevChannelIdWithFallback"])(s());i(Object(h["a"])({id:l}))}else d&&Object(f["a"])()}Object(u["isIm"])(c)&&Object(b["a"])(Object(n["getChannelById"])(s(),t))}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var i=arguments[2];var s=i();var o=Object(n["isChannelExistent"])(s,t)&&Object(n["getChannelById"])(s,t);if(!o){r(Object(a["warn"])("Received deleted event for an unknown channel: "+t));return}r(Object(a["info"])("Deleted channel "+t));r(Object(n["removeChannels"])({ids:[t]}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var i=arguments[2];r(Object(a["info"])("You joined channel "+t.id));if((Object(u["isMpim"])(t)||Object(u["isPrivateChannel"])(t))&&!Object(u["isExternallySharedChannel"])(t)){var s=i();var o=Object(n["isChannelExistent"])(s,t.id)&&Object(n["getChannelById"])(s,t.id);if(o){r(Object(a["warn"])("Received join event for an mpim or group we already know about ("+t.id+"); ignoring it."));return}}var c=r(Object(n["upsertChannel"])({channel:t}));r(Object(n["joinChannel"])(c))}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var i=arguments[2];r(Object(a["info"])("You left channel "+t));var s=i();var o=Object(n["isChannelExistent"])(s,t)&&Object(n["getChannelById"])(s,t);if(!o){Object(m["m"])(t)||r(Object(a["warn"])("Received left event for a channel we don't know about ("+t+"); ignoring it."));return}r(Object(n["leaveChannel"])(o));Object(u["isPrivateChannel"])(o)&&r(Object(n["removeChannels"])({ids:[o.id]}))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var r=arguments[1];var i=arguments[2];var s=i();var o=Object(n["isChannelExistent"])(s,t.id)&&Object(n["getChannelById"])(s,t.id);if(!o){r(Object(a["warn"])("Received rename event for an unknown channel: "+t.id));return}r(Object(a["info"])("Renamed channel "+t.id));r(Object(n["renameChannel"])({id:t.id,name:t.name,name_normalized:t.name_normalized,_name_lc:t.name.toLowerCase()}))}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,i=e.ts,s=e.purpose;var o=arguments[1];var c=arguments[2];var l=c();var u=Object(n["isChannelExistent"])(l,t)&&Object(n["getChannelById"])(l,t);if(!u){o(Object(a["warn"])("Received channel purpose change event for an unknown channel: "+t));return}o(Object(a["info"])(r+" changed purpose for channel "+t));var d={creator:r,last_set:i,value:s};o(Object(n["setChannelPurpose"])({id:t,purpose:d}))}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.is_moved;var i=arguments[1];var s=arguments[2];var o=s();var c=Object(n["isChannelExistent"])(o,t)&&Object(n["getChannelById"])(o,t);if(!c){i(Object(a["warn"])("Received unarchive event for an unknown channel: "+t));return}if(!Object(u["isArchived"])(c))return;i(Object(a["info"])("Unarchived channel "+t));Object(u["isPublicChannel"])(c)&&c.was_archived_this_session&&i(Object(n["joinConversationApi"])({channelId:t,inBackground:true}));i(Object(n["unarchiveChannel"])({id:t,isMoved:!!r}))}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,r=e.user,i=e.ts,s=e.topic;var o=arguments[1];var c=arguments[2];var l=c();var u=Object(n["isChannelExistent"])(l,t)&&Object(n["getChannelById"])(l,t);if(!u){o(Object(a["warn"])("Received topic change event for an unknown channel: "+t));return}o(Object(a["info"])(r+" changed topic for "+t));var d={creator:r,last_set:i,value:s};o(Object(n["setChannelTopic"])({id:t,topic:d}))}function M(e,t,r){var i=Object(_["isFeatureEnabled"])(r(),"feature_sonic_rtm_marked_events");if(!i&&!Object(p["a"])())return;var s=e.channel,o=e.ts,c=e.type;var l=r();var d=Object(n["isChannelExistent"])(l,s)&&Object(n["getChannelById"])(l,s);if("group_marked"===c&&Object(u["isMpim"])(d))return;if(!d){t(Object(a["error"])("The channel model object was not found for the channel id ("+s+") we received in the "+c+" event"));return}t(Object(v["c"])({id:s,ts:o}))}function P(e,t,r){if(!Object(_["isFeatureEnabled"])(r(),"feature_channel_converted_to_shared_rtm_handler"))return;var i=e&&e.channel&&e.channel.id;if(!i){t(Object(a["warn"])("RTM channel_converted_to_shared: message missing channel ID."));return}var s=r();var o=Object(n["isChannelExistent"])(s,i)&&Object(n["getChannelById"])(r(),i);if(!o){t(Object(a["warn"])("Received channel_converted_to_shared for an unknown channel: "+i));return}if(!Object(u["isOrgShared"])(e.channel)&&!Object(u["isOrgGlobalSharedPublicOrPrivateChannel"])(e.channel)){t(Object(a["warn"])("Ignoring channel_converted_to_shared for a non-org-shared, non-global-shared channel: "+i));return}t(Object(a["info"])("Received channel_converted_to_shared for "+i));t(Object(n["convertToShared"])({channel:o}))}function x(e,t,r){if(!Object(_["isFeatureEnabled"])(r(),"feature_history_changed_modern_rtm_handlers"))return;var s=e&&e.type;var o=e&&e.channel;if(!o){t(Object(a["warn"])("Received "+s+" without a 'channel' id."));return}var c=r();var l=Object(n["isChannelExistent"])(c,o)&&Object(n["getChannelById"])(c,o);if(!l){t(Object(a["warn"])("Received "+s+" for an unknown channel: "+o));return}t(Object(i["removeAllTimestamps"])({channelId:o}))}Object(d["a"])("channel_archive",k);Object(d["a"])("channel_created",j);Object(d["a"])("channel_deleted",S);Object(d["a"])("channel_joined",w);Object(d["a"])("channel_left",I);Object(d["a"])("channel_rename",T);Object(d["a"])("channel_unarchive",R);Object(d["a"])("group_archive",k);Object(d["a"])("group_deleted",S);Object(d["a"])("group_joined",w);Object(d["a"])("group_left",I);Object(d["a"])("group_rename",T);Object(d["a"])("group_unarchive",R);Object(d["a"])("mpim_joined",w);Object(d["a"])("mpim_open",C);Object(d["a"])("im_created",j);Object(d["a"])("im_open",C);Object(d["a"])("mpim_close",E);Object(d["a"])("im_close",E);Object(d["a"])("message.channel_purpose",N);Object(d["a"])("message.group_purpose",N);Object(d["a"])("message.channel_topic",A);Object(d["a"])("message.group_topic",A);Object(d["a"])("channel_marked",M);Object(d["a"])("group_marked",M);Object(d["a"])("mpim_marked",M);Object(d["a"])("im_marked",M);Object(d["a"])("channel_converted_to_shared",P);Object(d["a"])("channel_history_changed",x);Object(d["a"])("im_history_changed",x);Object(d["a"])("mpim_history_changed",x);Object(d["a"])("group_history_changed",x)},3127:function(e,t){},3128:function(e,t){},3129:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(21707);var s=r(3288);var o=r(3270);var c=r(3182);var l=r(21701);var u=r(21953);var d=function e(t,r,a){if(!t||!Object(l["a"])())return;var i=t.name,d=t.names,v=t.subtype,p=t.value,h=t.old_name,f=t.new_name;var m=a();var b=Object(o["getTeamId"])(m);if("add"===v){if(i&&p){var g=Object(u["b"])(n()({},i,p)),_=g.emojis,y=g.aliases;r(Object(s["bulkAddCustomEmoji"])({teamId:b,emojis:_,aliases:y}))}else r(Object(c["warn"])("RTM",'emoji_changed: "add" subtype missing "name" or "value"'));return}if("remove"===v){Array.isArray(d)?r(Object(s["bulkRemoveCustomEmoji"])({teamId:b,names:d})):r(Object(c["warn"])("RTM",'emoji_changed: "remove" subtype missing "names"'));return}if("rename"===v){r(h&&f?Object(s["renameCustomEmoji"])({teamId:b,prevName:h,nextName:f}):Object(c["warn"])("RTM",'emoji_changed: "rename" subtype missing "old_name" or "new_name"'));return}r(Object(c["warn"])("RTM","emoji_changed: unknown or missing subtype"))};Object(i["a"])("emoji_changed",d);var v={handleEmojiChanged:d}},3130:function(e,t,r){"use strict";var a=r(21707);var n=r(21754);var i=r(21706);var s=r(139);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id;var r=arguments[1];var a=arguments[2];if(!t)return;var o=a();var c=Object(i["getFileById"])(o,t);if(!c)return;r(Object(n["setFileChanged"])({fileId:t}));Object(s["c"])(c)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id,r=e.file_ids;var a=r||[t];a.forEach(function(e){return Object(s["o"])(e)})}Object(a["a"])("file_public",o);Object(a["a"])("file_private",o);Object(a["a"])("file_change",o);Object(a["a"])("file_shared",o);Object(a["a"])("file_unshared",o);Object(a["a"])("file_deleted",c)},3132:function(e,t,r){"use strict";var a=r(21707);var n=r(12);var i=r(1458);var s=r(21701);function o(e,t,r){if(!Object(s["a"])()&&"client"!==Object(n["getFromBootData"])(r(),"app"))return;Object(i["b"])()}Object(a["a"])("shared_invite_code_created",o);Object(a["a"])("shared_invite_code_disabled",o)},3133:function(e,t){},3134:function(e,t,r){"use strict";var a=r(21707);var n=r(22231);var i=r(3182);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var r=t.user_lessons;Object(n["c"])(r)}function o(e,t){var r=e.user_event;switch(e.user_event){case"channel_created":Object(n["a"])(e);break;case"message_sent":Object(n["d"])(e);break;case"file_share":Object(n["b"])(e);break;default:t(Object(i["info"])("Received lesson_user_action event with an user_event value of '"+r+"'; ignoring it"))}}Object(a["a"])("lesson_assigned",s);Object(a["a"])("lesson_user_action",o)},3135:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(21702);var s=r(21774);var o=r(3273);var c=r(12);var l=r(21711);var u=r(487);var d=r(21783);var v=r(1007);var p=r(21778);var h=r(124);var f=r(21714);var m=r(905);var b=r(3277);var g=r(54);var _=r(398);var y=r(43);var O=r(21707);var k=r(21701);var j=r(93);var C=r(2219);var E=r(3126);var S=r(21954);var w=r(3145);function I(e,t,r){if(!e)return;switch(e.subtype){case"message_changed":N(e,t,r);return;case"message_deleted":R(e,t,r);return;case"message_replied":Object(w["a"])(e,t,r);return;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":return;case"channel_purpose":case"group_purpose":Object(E["a"])(e,t,r);break;case"channel_topic":case"group_topic":Object(E["b"])(e,t,r);break;default:break}T(e,t,r);Object(S["a"])(e,t,r);A(e,t,r)}function T(e,t,r){if(!Object(k["a"])())return;if(!e||!e.channel)return;var a=r();var l=e.channel;var p={channelId:l,timestamps:[e.ts],oldest:e.ts,hasMore:false,append:true};var h=t(Object(s["a"])({imsgs:[e],channelId:e.channel}));t(Object(i["addMessages"])(h));t(Object(o["addTimestamps"])(p));if(Object(v["isReply"])(e)){var f=Object(d["b"])(l,e.thread_ts);t(Object(o["addTimestamps"])(n()({},p,{channelId:f})))}var m=Object(c["isFeatureEnabled"])(a,"feature_http_sendmsg");m&&Object(u["c"])(r,t,h[0],e)}function N(e,t,r){var a=r();if(!Object(k["a"])()){var n=Object(c["isFeatureEnabled"])(a,"feature_modern_process_imsg");if(!n)return;var u=Object(c["isFeatureEnabled"])(a,"feature_modern_message_changed");if(!u)return}var d=e.message,v=e.channel,p=e._from_evt_log;var h=Object(l["u"])(a,v)&&Object(l["e"])(a,v);if(!d){Object(y["error"])("no message?");return}if(!d.ts){Object(y["error"])("no message ts?");return}if(!h){Object(y["error"])("unknown msg.channel:"+v);return}Object(j["i"])(e);var f=t(Object(s["a"])({imsgs:[d],channelId:v}));t(Object(i["addMessages"])(f));var m={channelId:v,timestamps:[d.ts],fromEvtLog:!!p};t(Object(o["addTimestamps"])(m));Object(j["k"])(h,d,true,false)}function R(e,t,r){var a=r();if(!Object(k["a"])()){var n=Object(c["isFeatureEnabled"])(a,"feature_modern_message_deleted");if(!n)return}var s=e.deleted_ts,o=e.channel,u=e._from_evt_log;if(!s){Object(y["error"])("Error in messageDeleted: no deleted_ts");return}var d=Object(l["u"])(a,o)&&Object(l["e"])(a,o);if(!d){Object(y["error"])("Unknown channelId: "+o);return}Object(j["j"])(d,e);var f=Object(i["getMessageByTimestamp"])(a,o,s);f&&Object(v["isReply"])(f)&&!Object(v["isThreadBroadcast"])(f)?t(Object(p["a"])({channelId:o,ts:s,fromEvtLog:u})):t(Object(h["maybeAnimateDeleteMessage"])({channel:o,ts:s},u));t(Object(m["recordMessageDeleted"])({channelId:o,ts:s}))}function A(e,t,r){var a=r();var n=Object(c["getCurrentUserId"])(a);if(!Object(c["isFeatureEnabled"])(a,"feature_ally_sounds"))return;if(!Object(b["isWindowFocused"])(a))return;if(!Object(_["isScreenReaderEnabled"])())return;if(Object(v["isFromCurrentUser"])(e,n))return;if(Object(v["isReply"])(e))return;if(!Object(v["isFromChannel"])(e,Object(f["getPrimaryView"])(a)))return;var i=Object(v["containsMention"])(e,n,Object(g["getUserHighlightWords"])(a));Object(C["b"])(i)}Object(O["a"])("message",I);Object(k["a"])()&&Object(O["a"])("message.file_share",T);Object(O["a"])("message.message_changed",N);Object(O["a"])("message.message_deleted",R)},3136:function(e,t,r){"use strict";var a=r(21707);var n=r(3137);Object(a["a"])("slackbot_continue",n["c"]);Object(a["a"])("slackbot_response_sent",n["d"]);Object(a["a"])("slackbot_skip_or_stop",n["e"])},3137:function(e,t,r){"use strict";r.d(t,"d",function(){return n});r.d(t,"e",function(){return i});r.d(t,"c",function(){return s});r.d(t,"a",function(){return o});r.d(t,"b",function(){return c});r.d(t,"f",function(){return l});var a=r(10);var n=Object(a["c"])("TS.newxp.slackbot_response_sent_sig.dispatch");var i=Object(a["c"])("TS.newxp.slackbot_skip_or_stop_sig.dispatch");var s=Object(a["c"])("TS.newxp.slackbot_continue_sig.dispatch");var o=Object(a["c"])("TS.newxp.cancelOnboarding");var c=Object(a["c"])("TS.newxp.resumeOnboarding");var l=Object(a["c"])("TS.newxp.startOnboardingClick")},3138:function(e,t){},3139:function(e,t){},3140:function(e,t,r){"use strict";var a=r(1);var n=r.n(a);var i=r(21707);var s=r(3182);var o=r(904);var c=r(93);var l=r(21706);var u=r(21702);var d=r(21740);var v=r(12);var p=r(1559);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.ts,a=e.file,n=e.comment;switch(t){case"message":return!!r;case"file":return"string"===typeof a;case"file_comment":return"string"===typeof a&&!!n;default:return false}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,a=t.ts,n=t.channel,i=t.file,s=t.comment;switch(r){case"message":return Object(u["getMessageByTimestamp"])(e,n,a)||Object(c["e"])(a,n)||void 0;case"file":return Object(l["getFileById"])(e,i)||void 0;case"file_comment":return Object(l["getFileCommentById"])(e,i,s)||void 0;default:return}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,n=e.user,i=e.url,c=e._from_evt_log,l=e.event_ts;var u=arguments[1];var m=arguments[2];if(!Object(a["isObject"])(t)){u(Object(s["error"])("reaction_added has no item"));return}if(!h(t))return;var b=f(m(),t);if(!b)return;var g=t.channel,_=t.type,y=t.ts,O=t.file,k=t.comment;var j=y||k||O;var C=Object(p["d"])(_,j,g);var E=Object(v["getCurrentUserId"])(m());var S=u(Object(d["addReaction"])({key:C,name:r,userId:n,url:i}));if(E!==n&&E===b.user){var w=true;var I=!c&&"message"===_;Object(o["a"])({adding:w,name:r,key:C,userId:n,eventTs:l,shouldAlert:I,channelId:g,url:i})}if(S){var T=c||n!==Object(v["getCurrentUserId"])(m());Object(o["b"])({key:C,name:r,userId:n,type:_,shouldThrottle:T})}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,r=e.reaction,n=e.user,i=e.url,c=e._from_evt_log,l=e.event_ts;var u=arguments[1];var m=arguments[2];if(!Object(a["isObject"])(t)){u(Object(s["error"])("reaction_removed has no item"));return}if(!h(t))return;var b=f(m(),t);if(!b)return;var g=t.channel,_=t.type,y=t.ts,O=t.file,k=t.comment;var j=y||k||O;var C=Object(p["d"])(_,j,g);var E=Object(v["getCurrentUserId"])(m());var S=u(Object(d["removeReaction"])({key:C,name:r,userId:n,url:i}));if(E!==n&&E===b.user){var w=false;var I=!c&&"message"===_;Object(o["a"])({adding:w,name:r,key:C,userId:n,eventTs:l,shouldAlert:I,channelId:g,url:i})}if(S){var T=c||n!==E;Object(o["b"])({key:C,name:r,userId:n,type:_,shouldThrottle:T})}}Object(i["a"])("reaction_added",m);Object(i["a"])("reaction_removed",b)},3142:function(e,t){},3143:function(e,t){},3144:function(e,t,r){"use strict";var a=r(21760);var n=r(21707);var i=r(3182);var s=r(74);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];r(Object(i["info"])("User was added to team "+t));Object(s["g"])(t)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var r=arguments[1];r(Object(i["info"])("User was removed from team "+t));Object(s["h"])(t)}Object(n["a"])("user_added_to_team",o);Object(n["a"])("user_removed_from_team",c);Object(n["a"])("team_plan_change",a["e"])},3145:function(e,t,r){"use strict";r.d(t,"a",function(){return m});var a=r(1);var n=r.n(a);var i=r(21701);var s=r(3182);var o=r(21707);var c=r(21702);var l=r(21697);var u=r(21774);var d=r(12);var v=r(21806);var p=r(377);var h=r(93);var f="RTM-THREADS";var m=function e(t,r,a){var o=a();var v=Object(d["isFeatureEnabled"])(o,"feature_sonic_rtm_message_replied");var p=Object(d["isFeatureEnabled"])(o,"feature_modern_process_imsg");if(!(v&&p)&&!Object(i["a"])())return;var m=t.channel,b=t.message;var g=Object(l["isChannelExistent"])(o,m)&&Object(l["getChannelById"])(o,m);var _=Object(c["getMessageByTimestamp"])(o,m,b.ts);var y=void 0;b&&b.latest_reply?y=b.latest_reply:b&&b.replies&&b.replies.length&&(y=n.a.maxBy(b.replies,"ts").ts);if(_&&_.reply_count){var O=void 0;_&&_.latest_reply?O=_.latest_reply:_&&_.replies&&_.replies.length&&(O=n.a.maxBy(_.replies,"ts").ts);if(y<O){r(Object(s["info"])(f,"Not processing an older message_replied event, "+y+" < "+O+", in "+m));return}}Object(h["i"])(t);var k=r(Object(u["a"])({imsgs:[b],channelId:m}));r(Object(c["addMessages"])(k));Object(h["k"])(g,b,true,false)};function b(e,t){var r=e.subscription||{},a=r.channel,n=r.thread_ts,i=r.last_read;if(!a||!n)return;t(Object(s["info"])(f,"thread_subscribed "+a+" "+n));t(Object(v["upsertSubscriptionAndMarkAsFresh"])({channelId:a,ts:n,subscribed:true,lastRead:i}))}function g(e,t){var r=e.subscription||{},a=r.channel,n=r.thread_ts,i=r.last_read;if(!a||!n)return;t(Object(s["info"])(f,"thread_unsubscribed "+a+" "+n));t(Object(v["upsertSubscriptionAndMarkAsFresh"])({channelId:a,ts:n,subscribed:false,lastRead:i}))}function _(e,t){var r=e.subscription||{},a=r.channel,n=r.thread_ts,i=r.last_read;if(!a||!n)return;t(Object(v["setSubscription"])({channelId:a,ts:n,lastRead:i}))}function y(e,t,r){var a=Object(d["isFeatureEnabled"])(r(),"feature_react_threads");if(!a)return;var i=e.has_unreads,o=e.timestamp,c=e.mention_count,l=e.mention_count_by_channel;t(Object(s["info"])(f,"update_thread_state has_unreads:"+i+" mention_count:"+c+" ts:"+o));t(Object(p["updateUnreadThreads"])({hasUnreads:i,mentionCountByChannel:n.a.isArray(l)?{}:l}))}Object(o["a"])("message.message_replied",m);Object(o["a"])("thread_subscribed",b);Object(o["a"])("thread_unsubscribed",g);Object(o["a"])("thread_marked",_);Object(o["a"])("update_thread_state",y)},3147:function(e,t){!function(t){"use strict";var r=Object.prototype;var a=r.hasOwnProperty;var n;var i="function"===typeof Symbol?Symbol:{};var s=i.iterator||"@@iterator";var o=i.asyncIterator||"@@asyncIterator";var c=i.toStringTag||"@@toStringTag";var l="object"===typeof e;var u=t.regeneratorRuntime;if(u){l&&(e.exports=u);return}u=t.regeneratorRuntime=l?e.exports:{};function d(e,t,r,a){var n=t&&t.prototype instanceof g?t:g;var i=Object.create(n.prototype);var s=new R(a||[]);i._invoke=w(e,r,s);return i}u.wrap=d;function v(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}var p="suspendedStart";var h="suspendedYield";var f="executing";var m="completed";var b={};function g(){}function _(){}function y(){}var O={};O[s]=function(){return this};var k=Object.getPrototypeOf;var j=k&&k(k(A([])));j&&j!==r&&a.call(j,s)&&(O=j);var C=y.prototype=g.prototype=Object.create(O);_.prototype=C.constructor=y;y.constructor=_;y[c]=_.displayName="GeneratorFunction";function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}u.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))};u.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,y);else{e.__proto__=y;c in e||(e[c]="GeneratorFunction")}e.prototype=Object.create(C);return e};u.awrap=function(e){return{__await:e}};function S(e){function t(r,n,i,s){var o=v(e[r],e,n);if("throw"!==o.type){var c=o.arg;var l=c.value;if(l&&"object"===typeof l&&a.call(l,"__await"))return Promise.resolve(l.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)});return Promise.resolve(l).then(function(e){c.value=e;i(c)},s)}s(o.arg)}var r;function n(e,a){function n(){return new Promise(function(r,n){t(e,a,r,n)})}return r=r?r.then(n,n):n()}this._invoke=n}E(S.prototype);S.prototype[o]=function(){return this};u.AsyncIterator=S;u.async=function(e,t,r,a){var n=new S(d(e,t,r,a));return u.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})};function w(e,t,r){var a=p;return function n(i,s){if(a===f)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw s;return M()}r.method=i;r.arg=s;while(true){var o=r.delegate;if(o){var c=I(o,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p){a=m;throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var l=v(e,t,r);if("normal"===l.type){a=r.done?m:h;if(l.arg===b)continue;return{value:l.arg,done:r.done}}if("throw"===l.type){a=m;r.method="throw";r.arg=l.arg}}}}function I(e,t){var r=e.iterator[t.method];if(r===n){t.delegate=null;if("throw"===t.method){if(e.iterator.return){t.method="return";t.arg=n;I(e,t);if("throw"===t.method)return b}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var a=v(r,e.iterator,t.arg);if("throw"===a.type){t.method="throw";t.arg=a.arg;t.delegate=null;return b}var i=a.arg;if(!i){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return b}if(!i.done)return i;t[e.resultName]=i.value;t.next=e.nextLoc;if("return"!==t.method){t.method="next";t.arg=n}t.delegate=null;return b}E(C);C[c]="Generator";C[s]=function(){return this};C.toString=function(){return"[object Generator]"};function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(T,this);this.reset(true)}u.keys=function(e){var t=[];for(var r in e)t.push(r);t.reverse();return function r(){while(t.length){var a=t.pop();if(a in e){r.value=a;r.done=false;return r}}r.done=true;return r}};function A(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){while(++r<e.length)if(a.call(e,r)){t.value=e[r];t.done=false;return t}t.value=n;t.done=true;return t};return i.next=i}}return{next:M}}u.values=A;function M(){return{value:n,done:true}}R.prototype={constructor:R,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=n;this.done=false;this.delegate=null;this.method="next";this.arg=n;this.tryEntries.forEach(N);if(!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,a){o.type="throw";o.arg=e;t.next=r;if(a){t.method="next";t.arg=n}return!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];var o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc");var l=a.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,true);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,true)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};s.type=e;s.arg=t;if(i){this.method="next";this.next=i.finallyLoc;return b}return this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);N(r);return b}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;N(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){this.delegate={iterator:A(e),resultName:t,nextLoc:r};"next"===this.method&&(this.arg=n);return b}}}(function(){return this}()||Function("return this")())},3164:function(e,t,r){"use strict";var a=r(3165);t["a"]=a["a"]},3165:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(50);var g=r.n(b);var _=r(8);var y=r.n(_);var O=r(1);var k=r.n(O);var j=r(3184);var C=r(37);var E=r(332);var S=r(5);var w=r(20190);var I=r.n(w);var T=new S["b"]("coachmarks");var N=150;var R=-500;var A={children:h.a.element,className:h.a.string,position:h.a.string,delay:h.a.number,content:h.a.oneOfType([h.a.node,h.a.func]),zIndex:h.a.oneOf(["above_fs","fs","menu","below_menu"]),onContinue:h.a.func,onShow:h.a.func,onSkip:h.a.func,hasCloseButton:h.a.bool,hasSkipLink:h.a.bool,hasSkipButton:h.a.bool,skipButtonText:h.a.string,continueButtonText:h.a.string,skipLinkPre:h.a.string,skipLinkText:h.a.string,title:h.a.node,shouldShow:h.a.oneOfType([h.a.func,h.a.bool])};var M={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:O["noop"],onShow:O["noop"],onSkip:O["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:T.t("Done?"),skipLinkText:T.t("Click here to skip"),continueButtonText:T.t("Got it!"),title:"",shouldShow:false};var P=function(e){v()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.onResize=Object(O["debounce"])(e.measureContentsAndSetState.bind(e),N,{maxWait:N});return e}c()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(b["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var r=Object(O["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(r){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return m.a.createElement(j["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":T.t("Close")},m.a.createElement(C["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return m.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return m.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre;var r=this.props.skipLinkText;return m.a.createElement("div",{className:"p-coachmark__skip_link"},m.a.createElement("span",null,t),t&&" ",m.a.createElement(j["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},r))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return m.a.createElement(j["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":y()("p-coachmark__footer","margin_top_100");return m.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),m.a.createElement(j["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},this.props.continueButtonText))}},{key:"render",value:function e(){var t=this.props,r=t.children,a=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,c=s.contentsRect;var l=y()("p-coachmark","p-coachmark--"+a,this.props.className);var u=o&&m.a.createElement(E["a"],{isOpen:o,position:a,targetBounds:c,allowanceX:R,allowanceY:R,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},m.a.createElement("div",{className:l,"data-qa":"coachmark",ref:this.setCoachmarkRef},m.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return m.a.cloneElement(r,{ref:this.setCoachmarkedContentRef},[].concat(n()(m.a.Children.toArray(r.props.children)),[u]))}}]);return t}(f["PureComponent"]);P.displayName="Coachmark";P.defaultProps=M;t["a"]=P},3171:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(8);var g=r.n(b);var _=r(20155);var y=r.n(_);var O={children:h.a.node.isRequired,className:h.a.string};var k={className:null};var j=function(e){v()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}c()(t,[{key:"render",value:function e(){var t=this.props.className;var r=g()("c-legend",t);return m.a.createElement("legend",n()({},this.props,{className:r}),this.props.children)}}]);return t}(f["PureComponent"]);j.displayName="Legend";j.defaultProps=k;t["a"]=j},3192:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(42);var n=r(1434);Object(a["a"])("interop.webapp",{handleContextMenuCallback:n["b"]})},3201:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.highlights_briefing.handleFeedback",function(){return false})},3202:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(1395);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21698);var c=r(21793);var l=r(21887);var u=r(3270);var d=r(54);var v=r(12);var p=r(85);var h=r(3204);var f=r(3203);var m=r(269);var b=r(22377);var g=r(42);function _(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var r=TS.redux.getState();var a=Object(o["getMemberById"])(r,t);if(!a)return null;if(a.isUnknown)return null;if(a.isNonExistent)return null;return a}function y(e){return Object(i["isString"])(e)?_(e):e}function O(e){return Object(c["b"])(TS.redux.getState(),e)}function k(e){return TS.redux.dispatch(Object(h["a"])(e))}function j(e){return TS.redux.dispatch(Object(h["d"])(e))}function C(e){return TS.redux.dispatch(Object(h["c"])(e))}function E(e){var t=TS.redux.getState();var r=Object(u["getTeamId"])(t);Object(l["a"])(r,e)}function S(e){var t=TS.redux.getState();var r=Object(i["uniq"])(e);var a=Object(i["partition"])(r,function(e){return Object(o["hasMemberWithId"])(t,e)}),s=n()(a,2),c=s[0],l=s[1];var u=c.map(function(e){return Object(o["getMemberById"])(t,e)});var d=Object(v["isLegacyCallsApp"])(t)&&!Object(p["isConnecting"])(t);if(d||!Object(m["g"])(t))return TS.redux.dispatch(Object(h["b"])({ids:l,reason:"ensureMembersArePresent isEarlyCallsBoot"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)});return TS.redux.dispatch(Object(h["a"])({ids:l,reason:"ensureMembersArePresent"})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.resolved;return u.concat(t)})}Object(g["a"])("interop.members",{getMemberById:_,shouldDisplayRealNames:function e(){return Object(d["shouldDisplayRealNames"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(d["getUserHighlightWords"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return f["r"].apply(void 0,[TS.redux.getState()].concat(r))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return f["s"].apply(void 0,[TS.redux.getState()].concat(r))},getMemberByName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return o["getMemberByName"].apply(void 0,[TS.redux.getState()].concat(r))},memberExistsWithName:function e(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return o["memberExistsWithName"].apply(void 0,[TS.redux.getState()].concat(r))},isAppmin:function e(){return Object(o["isAppmin"])(TS.redux.getState())},isExternal:f["H"],isExternalById:function e(t){return Object(f["I"])(TS.redux.getState(),t)},isMemberOnTeam:f["M"],fetchMemberProfileExtras:h["e"],memberSorterByName:b["a"],getMemberCurrentStatus:o["getMemberCustomStatus"],getMemberMentionName:f["g"],getMemberMentionRegExp:f["h"],getMemberRealName:function e(t){return Object(f["l"])(y(t))},getMemberRealNameLowerCase:function e(t){return Object(f["m"])(y(t))},getMemberProfileFieldDisplayName:function e(t){return Object(f["j"])(y(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(f["k"])(y(t))},getMemberSecondaryName:function e(t){return Object(f["n"])(TS.redux.getState(),y(t))},ensureMembersArePresent:S,processMemberForUpserting:O,fetchAndUpsertMembersById:k,fetchAndUpsertMembersWithQuery:j,fetchAndUpsertMembersFromFlannel:C,markObjectsAsFresh:E})},3205:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.membership.membership_counts_need_refetch_sig.dispatch")},3207:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(9);var h=r(3);var f=r.n(h);var m=r(124);var b=r(277);var g=r(5);var _=r(3184);var y=r(37);var O=new g["b"]("messages");var k={displayModelOrViewById:f.a.func.isRequired,isHighlightsBackButtonVisible:f.a.bool};var j={isHighlightsBackButtonVisible:false};var C=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.backToBriefings=r.backToBriefings.bind(r);return r}s()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return v.a.createElement(_["a"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},v.a.createElement(y["a"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),O.t("Back to my highlights"))}}]);return t}(d["PureComponent"]);C.displayName="BriefingsBackButton";C.defaultProps=j;var E=function e(t){return{isHighlightsBackButtonVisible:Object(m["isHighlightsBackButtonVisible"])(t)}};var S=function e(t){return{displayModelOrViewById:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.id;return t(Object(b["a"])({id:a}))}}};t["a"]=Object(p["connect"])(E,S)(C)},3208:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.prefs_dialog.start")},3214:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r(10);var n=Object(a["c"])("TS.ui.channel_prefs_dialog.start")},3216:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.batchedSubscribe=n;function n(e){if("function"!==typeof e)throw new Error("Expected batch to be a function.");var t=[];var r=t;function n(){r===t&&(r=t.slice())}function i(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=true;n();r.push(e);return function a(){if(!t)return;t=false;n();var i=r.indexOf(e);r.splice(i,1)}}function s(){var e=t=r;for(var a=0;a<e.length;a++)e[a]()}function o(){e(s)}return function(e){return function(){var t=e.apply(void 0,arguments);var r=t.subscribe;function n(){var e=t.dispatch.apply(t,arguments);o();return e}return a({},t,{dispatch:n,subscribe:i,subscribeImmediate:r})}}}},3220:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(72);var s=r.n(i);var o=r(73);var c=r.n(o);var l=r(95);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(9);var h=r(3);var f=r.n(h);var m=r(12159);var b=r.n(m);var g=r(8);var _=r.n(g);var y=r(1);var O=r.n(y);var k=r(12);var j=r(21697);var C=r(54);var E=r(907);var S=r(2329);var w=r(37);var I=r(5);var T=r(1039);var N=r(60);var R=r(3184);var A=r(195);var M=r(1078);var P=r(1075);var x=r(1074);var D=r(335);var F=r(3208);var L=r(115);var B=r(20211);var U=r.n(B);var q=new I["b"]("prefs");var H={channelType:f.a.string,isGeneralChannel:f.a.bool,disableIgnoreAtChannelOption:f.a.bool,notificationsEnabled:f.a.bool,notificationDisabledType:f.a.oneOf(["not_allowed","not_yet_allowed","impossible",null]),onClose:f.a.func,desktop:f.a.string,mobile:f.a.string,muted:f.a.bool,suppressAtChannel:f.a.bool,channelId:f.a.string.isRequired,featureTurnMpdmNotifsOn:f.a.bool.isRequired,setChannelNotificationOverrideAndCallApi:f.a.func.isRequired};var W={channelType:"channel",isGeneralChannel:false,disableIgnoreAtChannelOption:false,notificationsEnabled:true,notificationDisabledType:null,onClose:O.a,desktop:"mentions_dms",mobile:"mentions_dms",muted:false,suppressAtChannel:false};var G=function(e){v()(t,e);function t(e){s()(this,t);var r=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props,n=a.desktop,i=a.mobile;r.state={shouldUseDifferentSettingsForMobile:n!==i};r.onMuteCheckboxClick=r.onMuteCheckboxClick.bind(r);r.onSuppressAtChannelClick=r.onSuppressAtChannelClick.bind(r);r.onDesktopEverythingRadioClick=r.onDesktopEverythingRadioClick.bind(r);r.onDesktopMentionsDmsRadioClick=r.onDesktopMentionsDmsRadioClick.bind(r);r.onDesktopNothingRadioClick=r.onDesktopNothingRadioClick.bind(r);r.onMobileSelectChange=r.onMobileSelectChange.bind(r);r.onMobileOverrideCheckboxClick=r.onMobileOverrideCheckboxClick.bind(r);r.onOpenPreferencesDialogLinkClick=r.onOpenPreferencesDialogLinkClick.bind(r);return r}c()(t,[{key:"onMuteCheckboxClick",value:function e(){this.updateChannelNotificationSetting("muted",!this.props.muted)}},{key:"onSuppressAtChannelClick",value:function e(){this.updateChannelNotificationSetting("suppress_at_channel",!this.props.suppressAtChannel)}},{key:"onDesktopEverythingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","everything",t)}},{key:"onDesktopMentionsDmsRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","mentions_dms",t)}},{key:"onDesktopNothingRadioClick",value:function e(){var t=!this.state.shouldUseDifferentSettingsForMobile;this.updateChannelNotificationSetting("desktop","nothing",t)}},{key:"onMobileSelectChange",value:function e(t){this.updateChannelNotificationSetting("mobile",t.target.value)}},{key:"onMobileOverrideCheckboxClick",value:function e(t){t.target.checked||this.updateChannelNotificationSetting("mobile",this.props.desktop);this.setState(function(e){return{shouldUseDifferentSettingsForMobile:!e.shouldUseDifferentSettingsForMobile}})}},{key:"onOpenPreferencesDialogLinkClick",value:function e(){this.props.onClose();Object(F["a"])("notifications","#growls_permission_div")}},{key:"updateChannelNotificationSetting",value:function e(t,r,a){var n=this.props.channelId;if(!n||!t||null==r)return null;return this.props.setChannelNotificationOverrideAndCallApi({name:t,value:r,channelId:n,sync:a}).then(function(){return null}).catch(function(e){Object(L["d"])(e);return null})}},{key:"getDisabledIgnoreAtChannelTooltipText",value:function e(){var t=this.props,r=t.isGeneralChannel,a=t.featureTurnMpdmNotifsOn;if(!a)return"";if(r)return q.rt("A Workspace Owner has restricted who can post to general and/or restricted the use of <b>{channel}</b> and/or <b>{everyone}</b> to admins and/or owners. These notifications can not be ignored.",{channel:Object(T["a"])({type:"channel"}),everyone:Object(T["a"])({type:"everyone"})});return q.rt("A Workspace Owner has restricted the use of <b>{channel}</b> to admins and/or owners. These notifications cannot be ignored.",{channel:Object(T["a"])({type:"channel"})})}},{key:"getIgnoreAtChannelQualifierText",value:function e(){var t=this.props,r=t.desktop,a=t.mobile,n=t.muted,i=t.disableIgnoreAtChannelOption,s=t.notificationsEnabled,o=t.featureTurnMpdmNotifsOn;if(!o)return"";if(i||n||!s)return"";if("mentions_dms"===r&&"everything"===a)return q.rt("(on desktop)");if("everything"===r&&"mentions_dms"===a)return q.rt("(on mobile)");return""}},{key:"getDisabledIgnoreAtChannelLabelSubtext",value:function e(){return b.a.createElement(N["d"],{tip:this.getDisabledIgnoreAtChannelTooltipText(),zIndex:"above_fs"},b.a.createElement("span",null,q.rt("Disabled by an admin")," ",b.a.createElement(w["a"],{type:"question_circle",inherit:true,align:"baseline"})))}},{key:"renderIgnoreAtChannelOption",value:function e(){var t=this.props,r=t.desktop,a=t.mobile,n=t.suppressAtChannel,i=t.disableIgnoreAtChannelOption,s=t.featureTurnMpdmNotifsOn;if(!s)return null;if("mentions_dms"!==r&&"mentions_dms"!==a)return"";var o=q.rt("Ignore notifications for <strong>@channel</strong> and <strong>@here</strong> {qualifier_text}",{qualifier_text:this.getIgnoreAtChannelQualifierText()});return b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__suppress_checkbox",type:"inline",cursor:i?null:"pointer",disabled:i,text:o,subtext:i?this.getDisabledIgnoreAtChannelLabelSubtext():null},b.a.createElement(M["a"],{id:"p-channel_notification_settings__suppress_checkbox",checked:n&&!i,onChange:this.onSuppressAtChannelClick,disabled:i}))}},{key:"renderMutingOptions",value:function e(){var t=this.props,r=t.channelType,a=t.muted,n=t.featureTurnMpdmNotifsOn;if(!n)return null;var i="mpim"===r;var s=i?q.rt("group DM"):q.rt("channel");var o=q.rt("Mute this {channelTypeText}",{channelTypeText:s});var c=q.rt("You won't receive notifications for this {channelTypeText}, and it will appear grayed out in your channel list.",{channelTypeText:s});return b.a.createElement("div",{className:"margin_bottom_100"},b.a.createElement("h3",{className:"margin_bottom_50"},q.rt("Muting options")),b.a.createElement("div",{className:"margin_bottom_50"},b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mute_checkbox",cursor:"pointer",type:"inline",text:o,subtext:c},b.a.createElement(M["a"],{id:"p-channel_notification_settings__mute_checkbox",checked:a,onChange:this.onMuteCheckboxClick}))),this.renderIgnoreAtChannelOption())}},{key:"renderDisabledNotificationsWarning",value:function e(){var t=this;var r=this.props,a=r.notificationDisabledType,n=r.featureTurnMpdmNotifsOn;if(!n)return null;if("impossible"===a)return b.a.createElement(D["d"],{level:"warning"},q.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",null,function(e){var t=e.text;return b.a.createElement("a",{href:"/downloads",target:"_blank"},t)}));if("not_yet_allowed"===a)return b.a.createElement(D["d"],{level:"warning"},q.rt("You have not yet allowed desktop notification. Open the <a>Preferences Dialog</a> and follow the instructions to set them up.",null,function(e){var r=e.text;return b.a.createElement(R["a"],{type:"link",onClick:t.onOpenPreferencesDialogLinkClick},r)}));if("not_allowed"===a)return b.a.createElement(D["d"],{level:"warning"},q.rt("You\u2018ve disallowed notifications in your browser. You\u2018ll need to open your browser preferences to change that."));return null}},{key:"getRadioButtonLabelClassNames",value:function e(t){if(!t)return"";return _()("p-channel_notification_settings__notification_option",{selected:t===this.props.desktop})}},{key:"renderEnabledNotificationsOptions",value:function e(){var t=this.props,r=t.desktop,a=t.mobile;return b.a.createElement("div",null,b.a.createElement(P["a"],{className:"margin_bottom_25",legendId:"notification_options_title"},b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__everything_checkbox",className:this.getRadioButtonLabelClassNames("everything"),cursor:"pointer",type:"inline",text:q.rt("All new messages")},b.a.createElement(x["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"everything",id:"p-channel_notification_settings__everything_checkbox",checked:"everything"===r,onChange:this.onDesktopEverythingRadioClick})),b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mentions_checkbox",className:this.getRadioButtonLabelClassNames("mentions_dms"),cursor:"pointer",type:"inline",text:q.rt("Just mentions & keywords")},b.a.createElement(x["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"mentions_dms",id:"p-channel_notification_settings__mentions_checkbox",checked:"mentions_dms"===r,onChange:this.onDesktopMentionsDmsRadioClick})),b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__nothing_checkbox",className:this.getRadioButtonLabelClassNames("nothing"),cursor:"pointer",type:"inline",text:q.rt("Nothing")},b.a.createElement(x["a"],{name:"p-channel_notification_settings__notification_radio_buttons",value:"nothing",id:"p-channel_notification_settings__nothing_checkbox",checked:"nothing"===r,onChange:this.onDesktopNothingRadioClick}))),b.a.createElement(A["a"],{htmlFor:"p-channel_notification_settings__mobile_override_checkbox",className:"bold",cursor:"pointer",type:"inline",text:q.rt("Use different settings for my mobile device")},b.a.createElement(M["a"],{id:"p-channel_notification_settings__mobile_override_checkbox",checked:this.state.shouldUseDifferentSettingsForMobile,onChange:this.onMobileOverrideCheckboxClick})),this.state.shouldUseDifferentSettingsForMobile&&b.a.createElement(A["a"],{htmlFor:"channel_notification_settings__mobile_override_select",className:"select small inline_block"},b.a.createElement("select",{id:"p-channel_notification_settings__mobile_override_select",className:"small auto_width block",value:a,onChange:this.onMobileSelectChange,tabIndex:0},b.a.createElement("option",{value:"everything"},q.rt("All new messages")),b.a.createElement("option",{value:"mentions_dms"},q.rt("Just mentions & keywords")),b.a.createElement("option",{value:"nothing"},q.rt("Nothing")))))}},{key:"renderNotificationOptions",value:function e(){var t=this.props,r=t.muted,a=t.notificationsEnabled;if(r)return"";var n="en-us";var i="https://get.slack.help/hc/"+n+"/articles/201355156-Desktop-notifications";return b.a.createElement("div",null,b.a.createElement("h3",{className:"margin_bottom_50"},b.a.createElement("span",{id:"notification_options_title"},q.rt("Notify me about\u2026")),b.a.createElement("a",{className:"p-channel_notification_settings__about_link",href:i,target:"_blank",rel:"noopener noreferrer"},q.rt("About notifications")," ",b.a.createElement(w["a"],{type:"question_circle"}))),a?this.renderEnabledNotificationsOptions():this.renderDisabledNotificationsWarning())}},{key:"render",value:function e(){if(!this.props.featureTurnMpdmNotifsOn)return null;return b.a.createElement("div",{className:"p-channel_notification_settings"},this.renderMutingOptions(),this.renderNotificationOptions())}}]);return t}(m["Component"]);G.displayName="ChannelNotificationSettings";G.defaultProps=W;function V(e,t){var r=Object(C["getTeamPref"])(e,"who_can_at_channel");var a=Object(C["getTeamPref"])(e,"who_can_at_everyone");var n=Object(C["getTeamPref"])(e,"who_can_post_general");if("admin"===r||"owner"===r)return true;if(t&&("admin"===n||"owner"===n||"admin"===a||"owner"===a))return true;return false}function z(e,t){var r=t.channelId,a=t.onClose;if(!r){Object(L["d"])(new Error("Could not render ChannelNotificationSettings: No channel ID found."));return{featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var i=Object(j["getChannelById"])(e,r);if(!i){Object(L["d"])(new Error("Could not render ChannelNotificationSettings: No channel found."));return{featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}var s=Object(E["getChannelType"])(i);var o=Object(E["isGeneral"])(i);var c=V(e,o);var l=Object(S["g"])();var u=Object(S["c"])(e,r);var d=Object(S["d"])(e,r);var v=!!Object(C["getNotificationsChannelPref"])(e,r,"muted");var p=!!Object(C["getNotificationsChannelPref"])(e,r,"suppress_at_channel");return n()({channelId:r,channelType:s,isGeneralChannel:o,disableIgnoreAtChannelOption:c},l,{onClose:a,desktop:u,mobile:d,muted:v,suppressAtChannel:p,featureTurnMpdmNotifsOn:Object(k["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")})}var K={setChannelNotificationOverrideAndCallApi:C["setChannelNotificationOverrideAndCallApi"]};t["a"]=Object(p["connect"])(z,K)(G)},3221:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(3222);var n=r(42);Object(n["a"])("interop.mountChannelNotificationSettings",a["a"]);Object(n["a"])("interop.unmountChannelNotificationSettings",a["b"])},3222:function(e,t,r){"use strict";t["a"]=d;t["b"]=v;var a=r(12159);var n=r.n(a);var i=r(50);var s=r.n(i);var o=r(9);var c=r(21709);var l=r(49);var u=r(3247);function d(e,t,r){if(!e)throw new Error("mountChannelNotificationSettings must be called with a teamId parameter");Object(c["a"])(n.a.createElement(o["Provider"],{store:Object(l["c"])(e)},n.a.createElement(u["a"],r)),t)}function v(e){s.a.unmountComponentAtNode(e)}},3228:function(e,t,r){"use strict";t["a"]=o;var a=r(1);var n=r.n(a);var i=r(134);var s=r(78);function o(e){var t=e.bot_id?[e.bot_id]:[];Object(a["values"])(e).forEach(function(e){if(Object(a["isObject"])(e)){t.push(o(e));return}if(!Object(a["isString"])(e))return;var r=Object(a["compact"])(Object(s["findUrlsInString"])(e).map(i["a"]));t.push(r)});return Object(a["uniq"])(Object(a["flatten"])(t))}},3229:function(e,t,r){"use strict";t["a"]=l;var a=r(942);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var c=r(427);function l(e){var t=[];var r=[];function a(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function s(e){if(!Object(i["isObject"])(e))return;r.push(e);var l=void 0;Object.keys(e).forEach(function(r){l=e[r];if("string"!==typeof l)return;if(!a(r)){Object(o["d"])(l).m_ids.forEach(function(e){Object(i["includes"])(t,e)||t.push(e)});return}if(!Object(c["a"])(l))return;if(Object(i["includes"])(t,l))return;t.push(l)});Object.keys(e).forEach(function(a){l=e[a];if("object"!==("undefined"===typeof l?"undefined":n()(l)))return;if(-1!==r.indexOf(l))return;if(!Object(i["isArray"])(l)||"members"!==a&&"users"!==a){s(l);return}l.forEach(function(e){if(!Object(c["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":n()(e))&&e.id){Object(c["a"])(e.id)&&!Object(i["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(c["a"])(e))return;if(Object(i["includes"])(t,e))return;t.push(e)})})}s(e);return Object(i["uniq"])(t)}},3230:function(e,t,r){"use strict";t["a"]=l;var a=r(942);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(104);var c=r(3226);function l(e){var t=[];var r=[];function a(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function s(e,l){if("object"!==("undefined"===typeof e?"undefined":n()(e)))return;r.push(e);Object(i["forOwn"])(e,function(e,r){if("string"!==typeof e)return;a(r,l)?Object(c["a"])(e)&&!Object(i["includes"])(t,e)&&t.push(e):Object(o["d"])(e).c_ids.forEach(function(e){Object(i["includes"])(t,e)||t.push(e)})});Object(i["forOwn"])(e,function(e,a){if("object"!==("undefined"===typeof e?"undefined":n()(e)))return;if("previous_message"===a)return;if(-1!==r.indexOf(e))return;!Object(i["isArray"])(e)||"string"!==typeof e[0]||"channels"!==a&&"ims"!==a&&"groups"!==a?s(e,a):e.forEach(function(e){Object(c["a"])(e)&&!Object(i["includes"])(t,e)&&t.push(e)})})}s(e);return t}},3231:function(e,t,r){"use strict";t["a"]=s;var a=r(1);var n=r.n(a);var i=r(3227);function s(e){var t=[];Object(a["forOwn"])(e,function(e,r){Object(a["isArray"])(e)?"messages"!==r&&"teams"!==r&&"users"!==r&&"channels"!==r||e.forEach(function(e){t.push(s(e))}):Object(a["isObject"])(e)?t.push(s(e)):Object(a["isString"])(e)&&("team"!==r&&"source_team"!==r&&"user_team"!==r&&"team_id"!==r||Object(i["a"])(e)&&t.push(e))});return Object(a["uniq"])(Object(a["flatten"])(t))}},3232:function(e,t,r){"use strict";t["a"]=a;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=e.isStarred,a=e.isEphemeral,n=e.isCustomResponse,i=e.isSliHighlight;if(t)return"pinned";if(r)return"starred";if(a)return"ephemeral";if(n)return"custom_response";if(i)return"sli_highlight";return}},3234:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(9);var m=r(1);var b=r.n(m);var g=r(12);var _=r(5);var y=r(3208);var O=r(3184);var k=r(271);var j=r(3241);var C=r(3220);var E=new _["b"]("prefs");var S=function(e){u()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.closeAndOpenPreferences=r.closeAndOpenPreferences.bind(r);return r}s()(t,[{key:"closeAndOpenPreferences",value:function e(){this.props.onClose();Object(y["a"])("notifications")}},{key:"render",value:function e(){var t=this;var r=this.props,a=r.channelId,n=r.onClose,i=r.featureTurnMpdmNotifsOn;if(!i)return null;var s=v.a.createElement(j["a"],{channelId:a,inline:true});var o=v.a.createElement("span",null,E.rt("Notification Preferences: {displayName}",{displayName:s}));var c=v.a.createElement("span",null,E.rt("Set your default notifications settings in your <Button>Account Preferences</Button>",null,function(e){var r=e.text;return v.a.createElement(O["a"],{type:"link",onClick:t.closeAndOpenPreferences},r)}));var l={title:o,contentLabel:E.t("Notification Preferences"),showCancelButton:false,goButtonText:E.t("Done"),onGo:n,onCancel:n,footerText:c};return v.a.createElement(k["a"],l,v.a.createElement(C["a"],{channelId:a,onClose:n}))}}]);return t}(d["PureComponent"]);S.displayName="ChannelNotificationSettingsDialog";S.defaultProps={onClose:m["noop"],featureTurnMpdmNotifsOn:false};function w(e){return{featureTurnMpdmNotifsOn:Object(g["isFeatureEnabled"])(e,"feature_turn_mpdm_notifs_on")}}t["a"]=Object(f["connect"])(w)(S)},3235:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(21698);var c=r(21749);var l=r(21722);var u=r(21793);var d=r(21697);var v=r(21876);var p=r(12);var h=r(974);var f=r(54);var m=r(3182);var b=r(907);var g=r(3203);var _=r(21707);var y=r(21701);var O=r(1578);var k=r(74);var j=r(1436);var C=r(1435);var E=r(21733);function S(e,t,r){var a=e.channel_type,i=e.user,u=e.channel,h=e.inviter;var f=r();var _=Object(o["isMemberExistent"])(f,i)&&Object(o["getMemberById"])(f,i);var y=Object(d["isChannelExistent"])(f,u)&&Object(d["getChannelById"])(f,u);var S=Object(o["getCurrentMember"])(f);var w=true;if(Object(p["isFeatureEnabled"])(f,"feature_less_preprocess_fetching")&&Object(p["isFeatureEnabled"])(f,"feature_lazy_channels")&&Object(p["isFeatureEnabled"])(f,"feature_lazy_teams")){var I=t(Object(c["setChannelMembershipInfoForUsers"])({channelId:u,membershipInfo:n()({},i,w)}));if(I){t(Object(l["updateAndInvalidateMemberCounts"])({channelId:u}));t(Object(E["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:i,channelId:u}));Object(g["A"])(_)&&Object(O["b"])(y,w)}if(y&&!Object(b["isIm"])(y)&&!Object(b["isMpim"])(y)){if(!Object(b["isMemberOfChannel"])(y)){t(Object(m["info"])(i+" joined channel "+u+" but we are not a member; ignoring"));return}t(Object(m["info"])(i+" joined channel "+u));h&&i===S.id&&t(Object(v["addInviter"])({channelId:u,inviter:h}));if(I){if("C"===a){Object(C["g"])(y,i);Object(g["x"])(S)||Object(g["H"])(_)&&Object(g["U"])(_)&&t(Object(o["removeMember"])(_))}if("G"===a){_&&Object(k["e"])();Object(j["a"])(y,i)}}}return}if(Object(g["A"])(_)){var T=t(Object(c["setChannelMembershipInfoForUsers"])({channelId:u,membershipInfo:n()({},i,w)}));if(T){t(Object(l["updateAndInvalidateMemberCounts"])({channelId:u,memberCountDelta:0,restrictedMemberCountDelta:0,appCountDelta:1}));t(Object(E["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:_.id,channelId:u}))}Object(O["b"])(y,w)}else if(y&&!Object(b["isIm"])(y)&&!Object(b["isMpim"])(y)){if(!Object(b["isMemberOfChannel"])(y)){t(Object(m["info"])(i+" joined channel "+u+" but we are not a member; ignoring"));return}t(Object(m["info"])(i+" joined channel "+u));h&&i===S.id&&t(Object(v["addInviter"])({channelId:u,inviter:h}));if("G"===a){var N=y.members||[];s.a.includes(N,i)||t(Object(d["updateOneKeyForChannel"])({id:y.id,members:N.concat(i)}))}var R=t(Object(c["setChannelMembershipInfoForUsers"])({channelId:u,membershipInfo:n()({},i,w)}));if(_&&R){t(Object(l["updateAndInvalidateMemberCounts"])({channelId:u,memberCountDelta:1,restrictedMemberCountDelta:Object(g["R"])(_)?1:0,appCountDelta:0}));if("C"===a){Object(C["g"])(y,i);Object(g["x"])(S)||Object(g["H"])(_)&&Object(g["U"])(_)&&t(Object(o["removeMember"])(_))}if("G"===a){Object(k["e"])();Object(j["a"])(y,i)}}}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_type,r=e.user,a=e.channel;var i=arguments[1];var u=arguments[2];var v=u();var h=Object(o["isMemberExistent"])(v,r)&&Object(o["getMemberById"])(v,r);var f=Object(d["isChannelExistent"])(v,a)&&Object(d["getChannelById"])(v,a);var _=false;if(Object(p["isFeatureEnabled"])(v,"feature_less_preprocess_fetching")&&Object(p["isFeatureEnabled"])(v,"feature_lazy_channels")&&Object(p["isFeatureEnabled"])(v,"feature_lazy_teams")){var y=i(Object(c["setChannelMembershipInfoForUsers"])({channelId:a,membershipInfo:n()({},r,_)}));if(y){i(Object(l["updateAndInvalidateMemberCounts"])({channelId:a}));i(Object(E["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:r,channelId:a}));Object(g["A"])(h)&&Object(O["b"])(f,_)}if(f&&!Object(b["isIm"])(f)&&!Object(b["isMpim"])(f)){if(!Object(b["isMemberOfChannel"])(f)){i(Object(m["info"])(r+" left channel "+a+" but we are not a member; ignoring"));return}i(Object(m["info"])(r+" left channel "+a));if(y){if("C"===t){Object(C["h"])(f,r);Object(g["x"])(Object(o["getCurrentMember"])(v))||Object(g["H"])(h)&&!Object(g["U"])(h)&&i(Object(o["removeMember"])(h))}if("G"===t){h&&Object(k["e"])();Object(j["b"])(f,r)}}}return}if(Object(g["A"])(h)){i(Object(c["setChannelMembershipInfoForUsers"])({channelId:a,membershipInfo:n()({},r,_)}));i(Object(l["updateAndInvalidateMemberCounts"])({channelId:a,memberCountDelta:0,restrictedMemberCountDelta:0,appCountDelta:-1}));i(Object(E["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:h.id,channelId:a}));Object(O["b"])(f,_)}else if(f&&!Object(b["isIm"])(f)&&!Object(b["isMpim"])(f)){if(!Object(b["isMemberOfChannel"])(f)){i(Object(m["info"])(r+" left channel "+a+" but we are not a member; ignoring"));return}i(Object(m["info"])(r+" left channel "+a));if("G"===t){var S=f.members||[];s.a.includes(S,r)&&i(Object(d["updateOneKeyForChannel"])({id:f.id,members:s.a.reject(function(e){return e.id===r})}))}var w=i(Object(c["setChannelMembershipInfoForUsers"])({channelId:a,membershipInfo:n()({},r,_)}));if(h&&w){i(Object(l["updateAndInvalidateMemberCounts"])({channelId:a,memberCountDelta:-1,restrictedMemberCountDelta:Object(g["R"])(h)?-1:0,appCountDelta:0}));if("C"===t){Object(C["h"])(f,r);Object(g["x"])(Object(o["getCurrentMember"])(v))||Object(g["H"])(h)&&!Object(g["U"])(h)&&i(Object(o["removeMember"])(h))}if("G"===t){Object(k["e"])();Object(j["b"])(f,r)}}}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user;var r=arguments[1];var a=arguments[2];if(!t)return;var n=a();var i=Object(o["isMemberExistent"])(n,t.id)&&Object(o["getMemberById"])(n,t.id);if(!i)return;if(i.id===Object(p["getCurrentUserId"])(n)&&t.profile&&!t.profile.email&&!Object(f["getTeamPref"])(n,"display_email_addresses")){var s=i.profile&&i.profile.email;if(s){r(Object(m["info"])("user_change: email hidden via team pref. appending email from model for local user, so it is not lost in upsert."));t.profile.email=s}}Object(y["a"])()?r(Object(u["a"])({members:[t]})):Object(k["f"])(t)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,r=e.channel;var a=arguments[1];var n=arguments[2];var i=n();var s=Object(o["isMemberExistent"])(i,t)&&Object(o["getMemberById"])(i,t);if(!s){a(Object(m["error"])("user_typing event from user ("+t+") not in model; ignoring"));return}var c=Object(d["isChannelExistent"])(i,r)&&Object(d["getChannelById"])(i,r);if(!c){a(Object(m["error"])("user_typing event for channel ("+r+") not in model; ignoring"));return}a(Object(h["memberStartedTyping"])({channelId:r,memberId:t}))}Object(_["a"])("member_joined_channel",S);Object(_["a"])("member_left_channel",w);Object(_["a"])("user_change",I);Object(_["a"])("user_typing",T)},3247:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(12159);var v=r.n(d);var p=r(3);var h=r.n(p);var f=r(5);var m=r(3184);var b=r(3220);var g=new f["b"]("prefs");var _=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,r=t.channelId,a=t.onClose,n=t.onReset;return v.a.createElement("div",null,v.a.createElement(b["a"],{channelId:r,onClose:a}),v.a.createElement("div",{className:"p-channel_notification_settings_embedded_actions"},v.a.createElement(m["a"],{onClick:n,type:"link"},g.rt("Reset to your default notification settings")),v.a.createElement(m["a"],{onClick:a},g.rt("Done"))))}}]);return t}(d["PureComponent"]);_.displayName="ChannelNotificationSettingsEmbedded";t["a"]=_},3254:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(22904);var u=r.n(l);var d=r(96);var v=r.n(d);var p=r(189);var h=r.n(p);var f=r(12159);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(1);var y=r.n(_);var O=r(144);var k=r(21966);var j=r(1010);var C=r(1571);var E=400;var S=h()({},k["a"].propTypes,{layout:g.a.instanceOf(C["a"]),loadPre:g.a.func,loadPost:g.a.func,loadAround:g.a.func,itemToScroll:g.a.string});var w=h()({},k["a"].defaultProps,{layout:void 0,loadPre:_["noop"],loadPost:_["noop"],loadAround:_["noop"],itemToScroll:void 0});var I=function(e){v()(t,e);function t(e){n()(this,t);var r=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.onScroll=r.onScroll.bind(r);r.setHeight=r.setHeight.bind(r);r.layout=e.layout||new C["a"];r.node=null;r.scrollTop=r.layout.setContainerHeight(e.height,0);r.scrollTop=r.layout.setKeys(e.keys,r.scrollTop);var a=r.layout.getBounds(r.scrollTop,r.scrollTop+e.height),i=a.start,s=a.end;var o=r.layout.getTops();r.state=h()({},r.state,{start:i,end:s,tops:o});return r}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.possiblySetInitialFocus(t);this.scrollToIfNotVisible(t);this.possiblyUpdateInitialActiveItem(t);t.height!==this.props.height&&(this.scrollTop=this.layout.setContainerHeight(t.height,this.getScrollTop()));Object(O["a"])(t.keys,this.props.keys)||(this.scrollTop=this.layout.setKeys(t.keys,this.getScrollTop()));this.relayout()}},{key:"scrollToIfNotVisible",value:function e(t){var r=t.itemToScroll;r&&this.scrollToKey(r,{lazy:true,animate:true})}},{key:"componentDidUpdate",value:function e(r){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,r);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"componentDidMount",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"onScroll",value:function e(r){this.pendingScrollTop=false;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,r)}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;if(!this.node)return 0;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)}},{key:"setHeight",value:function e(t,r){if(!t)return;if(Math.abs(r-this.layout.getHeight(t))<.5)return;var a=this.getScrollTop();this.scrollTop=this.layout.setHeight(t,r,a);this.relayout()}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=a.keys,i=a.height;var s=this.layout.getTotalHeight();var o=this.layout.getTop(n[t]);var c=this.layout.getBottom(n[r-1]);var l=!n.length||s<=i||o<E;var u=!n.length||s<=i||s-c<E;if(l&&u)return a.loadAround();if(l)return a.loadPre();if(u)return a.loadPost();return null}},{key:"renderItem",value:function e(t,r){var a=this.getTop(t);var n=this.layout.getHeight(t);var i=this.layout.getHeightValidity(t);var s=this.state.activeItem===t;var o=this.state.hoveredItem===t;var c=this.props.getAriaLabelForRow;var l=c&&c(r,{hasFocus:s});return m.a.createElement(j["a"],{key:t,id:t,height:n,validity:i,style:{top:a},role:this.props.itemRole,hasFocus:s,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,ariaLabel:l},this.props.rowRenderer(r,{hasFocus:s,isHovered:o}))}},{key:"render",value:function e(){this.pendingScrollTop=this.scrollTop;this.scrollTop=false;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]);return t}(k["a"]);I.displayName="DynamicList";t["a"]=I;I.propTypes=S;I.defaultProps=w},3256:function(e,t,r){"use strict";var a=r(22903);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(72);var c=r.n(o);var l=r(73);var u=r.n(l);var d=r(95);var v=r.n(d);var p=r(22904);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(12159);var g=r.n(b);var _=r(5);var y=r(1566);var O=r(20244);var k=r.n(O);var j=new _["b"]("messages");var C=20;var E=function(e){m()(t,e);function t(e){c()(this,t);var r=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.pendingUpdate=null;r.recomputeOffsets(e);r.overscan=Math.max(200,e.height/2);return r}u()(t,[{key:"componentDidUpdate",value:function e(){var r;for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];(r=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(r,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(r){var a=r<this.getOffset();var n=r+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(a&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=r;this.relayout()}h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,r-this.getOffset())}},{key:"scrollToOffset",value:function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.animate,i=a.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?r:r-this.getOffset();var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(r);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"isItemInView",value:function e(t){var r=this.getScrollTop();var a=this.layout.getTop(t);return a>r&&a<r+this.props.height}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<=0;var o=r===a.keys.length&&n+a.height>=i;var c=!a.keys.length||i<=a.height||s;var l=!a.keys.length||i<=a.height||o;if(c&&l)return a.loadAround();if(c)return a.loadPre();if(l)return a.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,r){if(r.isLoading)return null;var a=e.start,n=e.end;var i=t.startKey;var o=t.endKey;t.recomputeOffsets(r,a,n);var c=t.node?t.node.scrollTop():0;var l=t.getScrollTop();var u=c-1<=0||l-1<=t.getOffset();var d=c+1>=t.getContentHeight()-r.height||l+1>=t.endBottom-r.height;var v={start:a,end:n};if(t.startKey!==i||t.endKey!==o||u&&0!==a||d&&n!==r.keys.length){e.scrolling&&(t.overscan=8e3);v=t.computeBounds(r,l);var p=v,h=p.start,f=p.end;t.recomputeOffsets(r,h,f);u=l-1<=t.getOffset();d=l+r.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(u&&0===v.start||d&&v.end===r.keys.length||t.layout.getTotalHeight()<r.height&&0===v.start)&&t.loadMore(a,n,r);var m=t.layout.getTops();if(v.start===a&&v.end===n&&m===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=l;return s()({},v,{tops:m})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[r];this.endKey=t.keys[a-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var n=a-this.overscan;var i=a+r.height+this.overscan;var s=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(r,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments[1];var a=r.start,n=r.end;return{start:a<C?0:a,end:t.keys.length-n<C?t.keys.length:n}}},{key:"renderLoading",value:function e(t){if(!this.props.featureReactMessages)return null;var r=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var a=t?"degradedLoadingTop":"degradedLoadingBottom";return g.a.createElement("div",{key:a,className:"p-degraded_list__loading",style:r},j.rt("Loading history..."))}},{key:"renderItems",value:function e(){var r=h()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var a=this.props.keys.length>1&&(!this.props.reachedStart||this.state.start>0);var i=this.props.keys.length>1&&(!this.props.reachedEnd||this.state.end<this.props.keys.length);return[a&&this.renderLoading(true)].concat(n()(r),[i&&this.renderLoading(false)])}}]);return t}(y["a"]);t["a"]=E},3263:function(e,t,r){"use strict";var a=r(3274);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,r=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,c=e.subtype,l=e.sliHighlight;var u="slackbot_response"===c;var d=Object(a["shouldShowHighlightsLabel"])(l);return{isPinned:r,isStarred:o,isEphemeral:i,isCustomResponse:u,isSliHighlight:d}}},3280:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(21696);var u=r(21697);var d=r(907);var v;function p(e){if(!e||!e.id)return false;if(Object(d["isIm"])(e)&&!e.name&&!Object(d["getMemberIdFromIm"])(e))return false;if(Object(d["isMpim"])(e)&&!e.name&&!e._internal_name)return false;if(!e.name)return false;return true}function h(e,t){if(!t||!t.id)return e;e=f(e,t.id);var r=t.id;var a=c.a.toLower(t.name);var n={};if(Object(d["isIm"])(t)&&Object(d["getMemberIdFromIm"])(t)){var i=Object(d["getMemberIdFromIm"])(t);e.ims[i]=r;e.ims[a]=r;n.ims=[i,a]}else if(Object(d["isMpim"])(t)&&t._internal_name){var s=t._internal_name;e.mpims[s]=r;e.mpims[a]=r;n.mpims=[s,a]}else{e.channelsAndGroups[a]=r;n.channelsAndGroups=[a]}e.reverseMap[r]=n;return e}function f(e,t){if(!t)return e;if(!e.reverseMap||!e.reverseMap[t]||c.a.isEmpty(e.reverseMap[t]))return e;var r=s()({},e);var a=e.reverseMap[t];Object.keys(a).forEach(function(e){var t=a[e];if(!t||!t.length)return;t.forEach(function(t){delete r[e][t]})});r.reverseMap[t]={};return r}function m(e,t){if(!t||!t.length||!c.a.isArray(t))return e;var r=c.a.filter(t,p);if(!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){h(a,e)});return a}var b={channelsAndGroups:{},ims:{},mpims:{},reverseMap:{}};var g=Object(l["c"])((v={},n()(v,u["addOrReplaceChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.channels,a=t.reason;if(!a)return e;return m(e,r)}),n()(v,u["removeChannels"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ids;if(!r||!r.length)return e;var a={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};r.forEach(function(e){f(a,e)});return a}),v),b);t["default"]=g},3287:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setSupportsStickyPosition",function(){return d});r.d(t,"setNotificationPermission",function(){return v});r.d(t,"getSupportStickyPosition",function(){return f});r.d(t,"getNotificationPermission",function(){return m});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u;var d=Object(l["a"])("Update the supports_sticky_position");d.propTypes=c.a.bool.isRequired;var v=Object(l["a"])("Update the notificationPermission");v.propTypes=c.a.string.isRequired;var p={};var h=Object(l["c"])((u={},n()(u,d,function(e,t){return s()({},e,{supportsStickyPosition:t})}),n()(u,v,function(e,t){return s()({},e,{notificationPermission:t})}),u),p);t["default"]=h;var f=Object(l["d"])(function(e){return e&&e.environment&&e.environment.supportsStickyPosition});var m=Object(l["d"])(function(e){return e&&e.environment&&e.environment.notificationPermission})},3288:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setStandardEmoji",function(){return f});r.d(t,"bulkAddCustomEmoji",function(){return m});r.d(t,"bulkRemoveCustomEmoji",function(){return b});r.d(t,"renameCustomEmoji",function(){return g});r.d(t,"getEmojiUrl",function(){return y});r.d(t,"test",function(){return k});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v=r(21953);var p;var h={};var f=Object(d["a"])("Set internal standard emoji data");f.propTypes={standardEmojiData:c.a.object.isRequired};var m=Object(d["a"])("Bulk add custom emoji");m.propTypes={teamId:c.a.string.isRequired,emojis:c.a.object,aliases:c.a.object};var b=Object(d["a"])("Bulk remove custom emoji");b.propTypes={teamId:c.a.string.isRequired,names:c.a.arrayOf(c.a.string).isRequired};var g=Object(d["a"])("Rename a custom emoji");g.propTypes={teamId:c.a.string.isRequired,prevName:c.a.string.isRequired,nextName:c.a.string.isRequired,url:c.a.string.isRequired};var _=Object(d["c"])((p={},n()(p,f,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.standardEmojiData;if(Object(l["isEmpty"])(r))return e;h=r;return s()({},e)}),n()(p,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.emojis,i=t.aliases;if(!r)return e;var o={};Object(l["forEach"])(a,function(e,t){if(!e||!t)return;o[t]={url:e}});Object(l["forEach"])(i,function(e,t){if(!e||!t)return;o[t]={aliasOf:e}});if(Object(l["isEmpty"])(o))return e;return s()({},e,n()({},r,s()({},e[r],o)))}),n()(p,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.names;if(!e[r]||Object(l["isEmpty"])(a))return e;var i=Object(l["omit"])(e[r],a);if(Object(l["isEmpty"])(i))return Object(l["omit"])(e,r);return s()({},e,n()({},r,i))}),n()(p,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.teamId,a=t.prevName,i=t.nextName;if(!a||!i||!e[r]||!e[r][a])return e;var o=s()({},e[r]);o[i]=s()({},o[a]);delete o[a];Object(l["forEach"])(o,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.aliasOf;var r=arguments[1];t===a&&(o[r]=s()({},o[r],{aliasOf:i}))});return s()({},e,n()({},r,o))}),p),{});t["default"]=_;var y=Object(d["d"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.text,a=t.teamId;if(!e||!r)return null;var n=Object(v["a"])(r)||{},i=n.name,s=n.skinTone;if(O(i)){var o=h[i];s&&o.skinVariations&&o.skinVariations[s]&&(o=o.skinVariations[s]);return o.unicode}if(!e.emoji||!e.emoji[a])return null;var c=e.emoji[a][i];c&&c.aliasOf&&(c=e.emoji[a][c.aliasOf]);if(!c)return null;return c.url});function O(e){return!!h[e]}var k={resetStandardEmojiData:function e(){h={}}}},3289:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setMarkingState",function(){return h});r.d(t,"clearAllMarkingFlags",function(){return f});r.d(t,"clearMarkingFlagsForIds",function(){return m});r.d(t,"getAllIdsNeedingMarking",function(){return _});r.d(t,"getAllUnmutedIdsNeedingMarking",function(){return y});r.d(t,"getAllMutedIdsNeedingMarking",function(){return O});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(21696);var v=r(3276);var p;var h=Object(d["a"])("Update the apiNeedsMarking flag for a channel");h.propTypes={id:u.a.string.isRequired,needsApiMarking:u.a.bool.isRequired};var f=Object(d["a"])("Wipe out all API needs marking flags when they are all completed");f.propTypes=null;var m=Object(d["a"])("Remove API needs marking flags for specified IDs");m.propTypes=u.a.arrayOf(u.a.string).isRequired;var b={};var g=Object(d["c"])((p={},n()(p,h,function(e,t){if(t.needsApiMarking)return s()({},e,n()({},t.id,t.needsApiMarking));return c.a.omit(e,t.id)}),n()(p,f,function(e){if(c.a.isEqual(e,b))return e;return b}),n()(p,m,function(e,t){if(c.a.isEqual(e,b))return e;return c.a.omit(e,t)}),p),b);t["default"]=g;var _=Object(d["d"])(function(e){var t=e&&e.channelsMeta&&e.channelsMeta.needsApiMarking;if(!t)return[];return c.a.keys(t)});var y=Object(d["d"])(function(e){var t=_(e);return c.a.filter(t,function(t){return!Object(v["isChannelMutedById"])(e,t)})});var O=Object(d["d"])(function(e){var t=_(e);return c.a.filter(t,function(t){return Object(v["isChannelMutedById"])(e,t)})})},3292:function(e,t,r){"use strict";var a=r(295);var n=r(3280);var i=r(21876);var s=r(3276);var o=r(3289);var c=r(21820);var l=r(21761);var u=Object(a["combineReducers"])({channelNamesToIds:n["default"],inviters:i["default"],mutedChannels:s["default"],needsApiMarking:o["default"],needsCreatedMessage:c["default"],prqMetrics:l["default"]});t["a"]=u},347:function(e,t,r){var a=r(105);var n=r(106);e.exports=function(e){return function(t,r){var i=String(n(t));var s=a(r);var o=i.length;var c,l;if(s<0||s>=o)return e?"":void 0;c=i.charCodeAt(s);return c<55296||c>56319||s+1===o||(l=i.charCodeAt(s+1))<56320||l>57343?e?i.charAt(s):c:e?i.slice(s,s+2):l-56320+(c-55296<<10)+65536}}},348:function(e,t,r){"use strict";var a=r(157);var n=r(6);var i=r(92);var s=r(83);var o=r(81);var c=r(141);var l=r(349);var u=r(161);var d=r(109);var v=r(53)("iterator");var p=!([].keys&&"next"in[].keys());var h="@@iterator";var f="keys";var m="values";var b=function(){return this};e.exports=function(e,t,r,g,_,y,O){l(r,t,g);var k=function(e){if(!p&&e in S)return S[e];switch(e){case f:return function t(){return new r(this,e)};case m:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}};var j=t+" Iterator";var C=_==m;var E=false;var S=e.prototype;var w=S[v]||S[h]||_&&S[_];var I=!p&&w||k(_);var T=_?C?k("entries"):I:void 0;var N="Array"==t&&S.entries||w;var R,A,M;if(N){M=d(N.call(new e));if(M!==Object.prototype&&M.next){u(M,j,true);a||o(M,v)||s(M,v,b)}}if(C&&w&&w.name!==m){E=true;I=function e(){return w.call(this)}}a&&!O||!p&&!E&&S[v]||s(S,v,I);c[t]=I;c[j]=b;if(_){R={values:C?I:k(m),keys:y?I:k(f),entries:T};if(O)for(A in R)A in S||i(S,A,R[A]);else n(n.P+n.F*(p||E),t,R)}return R}},349:function(e,t,r){"use strict";var a=r(158);var n=r(135);var i=r(161);var s={};r(83)(s,r(53)("iterator"),function(){return this});e.exports=function(e,t,r){e.prototype=a(s,{next:n(1,r)});i(e,t+" Iterator")}},350:function(e,t,r){var a=r(48).document;e.exports=a&&a.documentElement},351:function(e,t,r){var a=r(141);var n=r(53)("iterator");var i=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||i[n]===e)}},352:function(e,t,r){"use strict";var a=r(61);var n=r(135);e.exports=function(e,t,r){t in e?a.f(e,t,n(0,r)):e[t]=r}},353:function(e,t,r){var a=r(243);var n=r(53)("iterator");var i=r(141);e.exports=r(100).getIteratorMethod=function(e){if(void 0!=e)return e[n]||e["@@iterator"]||i[a(e)]}},362:function(e,t){t.f={}.propertyIsEnumerable},363:function(e,t,r){"use strict";r.d(t,"c",function(){return a});r.d(t,"b",function(){return n});r.d(t,"h",function(){return i});r.d(t,"d",function(){return s});r.d(t,"e",function(){return o});r.d(t,"f",function(){return c});r.d(t,"g",function(){return l});r.d(t,"a",function(){return u});var a="persist:";var n="persist/FLUSH";var i="persist/REHYDRATE";var s="persist/PAUSE";var o="persist/PERSIST";var c="persist/PURGE";var l="persist/REGISTER";var u=-1},377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"updateHasUnreads",function(){return p});r.d(t,"updateHasUnreadThreads",function(){return h});r.d(t,"updateThreadsMentionCount",function(){return f});r.d(t,"updateUnreadThreads",function(){return m});r.d(t,"hasUnreads",function(){return g});r.d(t,"hasUnreadThreads",function(){return _});r.d(t,"getThreadsMentionCount",function(){return y});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(1);var u=r.n(l);var d=r(21696);var v;var p=Object(d["a"])("Update the all unreads state");p.propTypes=c.a.bool.isRequired;var h=Object(d["a"])("Update the all threads state");h.propTypes=c.a.bool.isRequired;var f=Object(d["a"])("Update the threads mention count");f.propTypes=c.a.number.isRequired;var m=Object(d["a"])("Update all the threads state values");m.propTypes={hasUnreads:c.a.bool.isRequired,mentionCountByChannel:c.a.object.isRequired};var b=Object(d["c"])((v={},n()(v,p,function(e,t){if("boolean"!==typeof t)return e;return s()({},e,{hasUnreads:t})}),n()(v,h,function(e,t){if("boolean"!==typeof t)return e;return s()({},e,{hasUnreadThreads:t})}),n()(v,f,function(e,t){if(!u.a.isInteger(t))return e;return s()({},e,{threadsMentionCount:t})}),n()(v,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hasUnreads,a=t.mentionCountByChannel;var n=u.a.isArray(a)?{}:a;var i=u.a.sum(u.a.values(n));!r&&i&&(i=0);return s()({},e,{hasUnreadThreads:r,threadsMentionCount:i,threadsMentionCountByChannel:n})}),v),{hasUnreads:false,hasUnreadThreads:false,threadsMentionCount:0,threadsMentionCountByChannel:{}});t["default"]=b;var g=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.hasUnreads});var _=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.hasUnreadThreads});var y=Object(d["d"])(function(e){return e&&e.allUnreads&&e.allUnreads.threadsMentionCount})},394:function(e,t,r){"use strict";t["a"]=o;var a=r(1);var n=r.n(a);var i=/\.spec\.jsx?$/;function s(e){return!i.test(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={};if(!e||!Object(a["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var n=t?e.keys():e.keys().filter(s);n.forEach(function(t){r[t]=e(t)});return r}},406:function(e,t,r){e.exports=!r(62)&&!r(51)(function(){return 7!=Object.defineProperty(r(273)("div"),"a",{get:function(){return 7}}).a})},407:function(e,t,r){var a=r(61);var n=r(47);var i=r(159);e.exports=r(62)?Object.defineProperties:function e(t,r){n(t);var s=i(r);var o=s.length;var c=0;var l;while(o>c)a.f(t,l=s[c++],r[l]);return t}},408:function(e,t,r){var a=r(81);var n=r(101);var i=r(274)(false);var s=r(241)("IE_PROTO");e.exports=function(e,t){var r=n(e);var o=0;var c=[];var l;for(l in r)l!=s&&a(r,l)&&c.push(l);while(t.length>o)a(r,l=t[o++])&&(~i(c,l)||c.push(l));return c}},409:function(e,t,r){var a=r(47);e.exports=function(e,t,r,n){try{return n?t(a(r)[0],r[1]):t(r)}catch(t){var i=e["return"];void 0!==i&&a(i.call(e));throw t}}},411:function(e,t,r){"use strict";var a=r(189);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(374);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(1);var C=r.n(j);var E=r(335);var S=r(336);var w=r(1997);var I=r(3057);var T=r(594);var N={className:g.a.string,errorId:g.a.string,errorLevel:g.a.oneOf(Object(j["values"])(E["b"])),errorText:g.a.string,errorType:g.a.oneOf(Object(j["values"])(E["c"])),hintText:g.a.node,hintId:g.a.string,id:g.a.string.isRequired,isDisabled:g.a.bool,isRequired:g.a.bool,labelId:g.a.string,name:g.a.string.isRequired,size:g.a.oneOf(Object(j["values"])(w["a"])),onChange:g.a.func,value:g.a.string,maxCharacterLimit:g.a.number};var R={className:null,errorId:null,errorLevel:E["b"].error,errorText:null,errorType:E["c"].nestedBox,hintText:null,hintId:null,isDisabled:false,isRequired:false,labelId:null,onChange:j["noop"],size:w["a"].medium,value:"",maxCharacterLimit:null};var A=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var a=r.props.id;r.state={errorId:Object(j["get"])(r.props,"errorId",Object(T["a"])(a,"error")),hintId:Object(j["get"])(r.props,"hintId",Object(T["a"])(a,"hint")),inputLengthIsInvalid:false,textStyle:{}};r.setInputRef=r.setInputRef.bind(r);r.setCharacterCountRef=r.setCharacterCountRef.bind(r);return r}v()(t,[{key:"componentDidMount",value:function e(){this.getTextStyle()}},{key:"componentWillReceiveProps",value:function e(t){t.maxCharacterLimit&&t.value!==this.props.value&&this.setInputLengthValidity(t.value.length>t.maxCharacterLimit)}},{key:"componentDidUpdate",value:function e(t){this.props.value!==t.value&&this.getTextStyle()}},{key:"setInputLengthValidity",value:function e(t){this.setState(function(){return{inputLengthIsInvalid:t}})}},{key:"setInputRef",value:function e(t){this.input=t}},{key:"setCharacterCountRef",value:function e(t){this.characterCount=t}},{key:"setTextStyle",value:function e(t){this.setState(function(){return{textStyle:t}})}},{key:"getTextStyle",value:function e(){var t=this.props.maxCharacterLimit;if(!t){this.setTextStyle({});return}var r=this.characterCount.getCharacterCountWidth();var a={paddingRight:r};this.setTextStyle(a)}},{key:"focus",value:function e(){this.input.focus()}},{key:"renderErrorMaybe",value:function e(){var t=this.props,r=t.errorLevel,a=t.errorText,n=t.errorType,i=t.maxCharacterLimit;if(a)return y.a.createElement(E["d"],{id:this.state.errorId,level:r,type:n},a);if(i&&this.state.inputLengthIsInvalid)return y.a.createElement(E["d"],{id:this.state.errorId,level:E["b"].error,type:n},Object(T["b"])(i));return null}},{key:"renderHintMaybe",value:function e(){var t=this.props.hintText;if(t)return y.a.createElement(S["a"],{id:this.state.hintId},t);return null}},{key:"renderWrappedTextareaMaybe",value:function e(){var t=this.props,r=t.value,a=t.maxCharacterLimit,n=t.size,i=t.isDisabled;var s=this.renderTextArea();a&&(s=y.a.createElement(I["a"],{ref:this.setCharacterCountRef,currentCount:r.length,isFocused:true,isDisabled:i,maxCharacterLimit:a,type:"multiline",size:n},s));return s}},{key:"renderTextArea",value:function e(){var t;var r=this.props,a=r.className,i=r.errorId,o=r.errorLevel,l=r.errorText,u=r.errorType,d=r.hintId,v=r.hintText,p=r.id,h=r.isRequired,f=r.labelId,m=r.name,b=r.onChange,g=r.maxCharacterLimit,_=c()(r,["className","errorId","errorLevel","errorText","errorType","hintId","hintText","id","isRequired","labelId","name","onChange","maxCharacterLimit"]);var O=void 0;var j=this.state,C=j.inputLengthIsInvalid,E=j.textStyle;var S=!!l||C&&!!g;var I=k()((t={},s()(t,"c-input_textarea--with_"+o,S),s()(t,"c-input_textarea--with_hint",v),s()(t,"c-input_textarea--with_character_count",!!g),t),a);O=S?f+" "+this.state.errorId:f;return y.a.createElement(w["b"],n()({},_,{ref:this.setInputRef,style:E,ariaDescribedby:this.state.hintId,ariaInvalid:S,ariaLabelledby:O,ariaRequired:h,className:I,id:p,name:m,onChange:b}))}},{key:"render",value:function e(){return y.a.createElement("div",{"data-qa-formtextarea":true,className:"c-input_textarea__wrapper"},this.renderWrappedTextareaMaybe(),this.renderErrorMaybe(),this.renderHintMaybe())}}]);return t}(y.a.Component);A.displayName="FormTextarea";A.defaultProps=R;t["a"]=A},412:function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"a",function(){return i});var a=r(10);var n=Object(a["c"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(a["c"])("TS.enterprise.actions.actions",function(){return null})},414:function(e,t,r){"use strict";var a=r(72);var n=r.n(a);var i=r(73);var s=r.n(i);var o=r(95);var c=r.n(o);var l=r(96);var u=r.n(l);var d=r(3);var v=r.n(d);var p=r(12159);var h=r.n(p);var f={emoji:v.a.shape({html:v.a.string})};var m={emoji:{html:null}};var b=function(e){u()(t,e);function t(){n()(this,t);return c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.emoji;return h.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.html}})}}]);return t}(p["PureComponent"]);b.displayName="Emoji";t["a"]=b;b.defaultProps=m},416:function(e,t){t.f=Object.getOwnPropertySymbols},417:function(e,t,r){var a=r(108);e.exports=Array.isArray||function e(t){return"Array"==a(t)}},418:function(e,t,r){var a=r(52);var n=r(108);var i=r(53)("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},419:function(e,t,r){"use strict";var a=r(47);e.exports=function(){var e=a(this);var t="";e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.unicode&&(t+="u");e.sticky&&(t+="y");return t}},42:function(e,t,r){"use strict";t["b"]=s;var a=r(1);var n=r.n(a);window.TSM={interop:{}};function i(e,t){if(n.a.has(window.TSM,e))throw new Error("exportToLegacy: there is already something at "+e+"; we cannot overwrite it");if(!e||0!==e.indexOf("interop"))throw new Error("exportToLegacy: Name "+e+' must start with "interop".');n.a.set(window.TSM,e,t)}t["a"]=i;function s(e){return function(t){return TS.redux.dispatch(e(t)).then(function(e){return{ok:true,request_id:e.request_id,args:e.args,method:t.method,data:e}}).catch(function(e){throw e})}}},420:function(e,t,r){"use strict";var a=r(83);var n=r(92);var i=r(51);var s=r(106);var o=r(53);e.exports=function(e,t,r){var c=o(e);var l=r(s,c,""[e]);var u=l[0];var d=l[1];if(i(function(){var t={};t[c]=function(){return 7};return 7!=""[e](t)})){n(String.prototype,e,u);a(RegExp.prototype,c,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}}},421:function(e,t,r){var a=r(47);var n=r(86);var i=r(53)("species");e.exports=function(e,t){var r=a(e).constructor;var s;return void 0===r||void 0==(s=a(r)[i])?t:n(s)}},422:function(e,t,r){"use strict";var a=r(48);var n=r(6);var i=r(92);var s=r(251);var o=r(197);var c=r(250);var l=r(249);var u=r(52);var d=r(51);var v=r(276);var p=r(161);var h=r(760);e.exports=function(e,t,r,f,m,b){var g=a[e];var _=g;var y=m?"set":"add";var O=_&&_.prototype;var k={};var j=function(e){var t=O[e];i(O,e,"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function e(r){return!(b&&!u(r))&&t.call(this,0===r?0:r)}:"get"==e?function e(r){return b&&!u(r)?void 0:t.call(this,0===r?0:r)}:"add"==e?function e(r){t.call(this,0===r?0:r);return this}:function e(r,a){t.call(this,0===r?0:r,a);return this})};if("function"==typeof _&&(b||O.forEach&&!d(function(){(new _).entries().next()}))){var C=new _;var E=C[y](b?{}:-0,1)!=C;var S=d(function(){C.has(1)});var w=v(function(e){new _(e)});var I=!b&&d(function(){var e=new _;var t=5;while(t--)e[y](t,t);return!e.has(-0)});if(!w){_=t(function(t,r){l(t,_,e);var a=h(new g,t,_);void 0!=r&&c(r,m,a[y],a);return a});_.prototype=O;O.constructor=_}if(S||I){j("delete");j("has");m&&j("get")}(I||E)&&j(y);b&&O.clear&&delete O.clear}else{_=f.getConstructor(t,e,m,y);s(_.prototype,r);o.NEED=true}p(_,e);k[e]=_;n(n.G+n.W+n.F*(_!=g),k);b||f.setStrong(_,e,m);return _}},423:function(e,t,r){var a=r(48);var n=r(83);var i=r(136);var s=i("typed_array");var o=i("view");var c=!!(a.ArrayBuffer&&a.DataView);var l=c;var u=0;var d=9;var v;var p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(u<d)if(v=a[p[u++]]){n(v.prototype,s,true);n(v.prototype,o,true)}else l=false;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:o}},428:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"setFullyBooted",function(){return d});r.d(t,"isFullyBooted",function(){return h});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(3);var c=r.n(o);var l=r(21696);var u=r(21701);var d=Object(l["a"])("Set the app as fully booted");d.propTypes=c.a.bool.isRequired;var v={isFullyBooted:false};var p=Object(l["c"])(n()({},d,function(e,t){return s()({},e,{isFullyBooted:t})}),v);t["default"]=p;var h=Object(l["d"])(function(e){return Object(u["a"])()||e&&e.incrementalBoot&&e.incrementalBoot.isFullyBooted})},47:function(e,t,r){var a=r(52);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},472:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="CHANNEL-SIDEBAR";var n={LOG_LABEL:a}},48:function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},487:function(e,t,r){"use strict";t["c"]=pe;r.d(t,"b",function(){return fe});var a=r(189);var n=r.n(a);var i=r(20615);var s=r.n(i);var o=r(1);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(907);var v=r(21783);var p=r(12);var h=r(3270);var f=r(3273);var m=r(21697);var b=r(21702);var g=r(124);var _=r(21699);var y=r(1224);var O=r(439);var k=r(1244);var j=r(3182);var C=r(21708);var E=r(93);var S=r(234);var w=r(85);var I=r(1226);var T=r(21721);var N=r(91);var R=r(1044);var A=r(21778);var M=r(21701);var P=r(21985);var x=r(21988);var D=r(21789);var F=r(22185);var L=r(2219);var B=r(211);var U=r(5);var q=r(21807);var H=r(21992);var W=r(21756);var G=r(90);var V=r(282);var z;var K=new U["b"]("client");var Q=B["SLASH_COMMAND_ERRORS"].RESTRICTED_COMMAND,Y=B["SLASH_COMMAND_ERRORS"].UNKNOWN_API_ERROR,J=B["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND,Z=B["SLASH_COMMAND_ERRORS"].UNSUPPORTED_IN_THREAD;var X=6;var $=7;var ee=8;var te="restricted_action_read_only_channel";var re="restricted_action_thread_only_channel";var ae="restricted_action_non_threadable_channel";var ne=(z={},s()(z,te,X),s()(z,re,$),s()(z,ae,ee),z);function ie(e,t,r){if(r.thread_ts&&!Object(p["isFeatureEnabled"])(e(),"feature_react_threads")){var a=Object(m["getChannelById"])(e(),r.channel);Object(O["h"])(a,n()({},r))}else{t(Object(b["addMessages"])([r]));var i={channelId:r.channel,timestamps:[r.ts],oldest:r.ts,hasMore:false,append:true};t(Object(f["addTimestamps"])(i));if(Object(p["isFeatureEnabled"])(e(),"feature_react_threads")&&r.thread_ts){var s=Object(v["b"])(r.channel,r.thread_ts);t(Object(f["addTimestamps"])(n()({},i,{channelId:s})))}}}function se(e,t,r){if(r.thread_ts&&!Object(p["isFeatureEnabled"])(e(),"feature_react_threads")){var a=Object(m["getChannelById"])(e(),r.channel);var n=Object(o["find"])(a.msgs,function(e){return e.ts===r.ts});Object(O["k"])(a,n)}else t(Object(A["a"])({channelId:r.channel,ts:r.ts}))}function oe(e,t,r){var a=false;var n=Object(m["getChannelById"])(e(),t,a);if(!n)return;if(Object(y["a"])()){var i=void 0;Object(d["isSlackbot"])(n)?i="slackbot":Object(d["isMpim"])(n)?i="mpim":Object(d["isIm"])(n)?i="im":Object(d["isPrivateChannel"])(n)?i="group":Object(d["isPublicChannel"])(n)&&(i="channel");Object(C["f"])("send_msg_"+i,"msg_input_try_to_submit")}ce(e,t,r);Object(O["m"])(n,r);Object(O["b"])(n,r)}function ce(e,t,r){var a={message_timestamp:r.ts,channel_id:t,channel_type:t?t.charAt(0):""};var i=Object(g["getChannelSessionId"])(e());null!==i&&(a=n()({},a,{channel_session_id:i}));Object(N["b"])("MSG_SENT",a)}var le={};function ue(e){le[e.client_msg_id]=e}function de(e){delete le[e.client_msg_id]}function ve(e){return le[e]}function pe(e,t,r,a){var n=ve(a.client_msg_id);if(n){t(Object(j["action"])("MESSAGE","Resolved a message with clientMsgId "+a.client_msg_id+" in "+r.channel));de(n);se(e,t,n);oe(e,r.channel,r)}Object(F["a"])(Object(h["getTeamId"])(e())).resolve(a)}var he=Object(_["b"])("Send a message",function(e,t,r){var a=r.channel,i=r.reply_broadcast,s=r.text,c=r.thread_ts;var l=Object(p["isFeatureEnabled"])(t(),"feature_http_sendmsg");var u=c?{_hidden_reply:true,_was_reply_broadcast:i}:null;var d=Object(T["a"])();var v=n()({},r,u,{user:Object(p["getCurrentUserId"])(t()),showResend:false,showCancel:false,is_pending:true,client_msg_id:d});var f=void 0;if(l){e(Object(j["action"])("MESSAGE","Sent a message of length "+s.length+" to "+a+" via HTTP, clientMsgId: "+d));var _=n()({},r,{include_channel_perm_error:true,client_msg_id:d});f=Object(F["a"])(Object(h["getTeamId"])(t())).enqueue(_)}else try{e(Object(j["action"])("MESSAGE","Sent a message of length "+s.length+" to "+a+", clientMsgId: "+d));f=e(Object(S["send"])(r))}catch(r){e(Object(j["error"])("MESSAGE",r));f=new Promise(function(e,a){Object(w["promiseToHaveOpenWebSocket"])(t()).then(function(){a(r)})})}ie(t,e,v);l&&ue(v);c||e(Object(g["jumpToTimestamp"])({ts:null}));f.then(function(r){if(l)return;var i=n()({},v,{ts:r.ts,text:r.text});delete i.showResend;delete i.showCancel;delete i.is_pending;se(t,e,v);var s=Object(E["l"])(i,a);ie(t,e,s);oe(t,a,s)}).catch(function(r){if(l&&!ve(v.client_msg_id))return;if(c&&!Object(p["isFeatureEnabled"])(t(),"feature_react_threads")){var i=Object(m["getChannelById"])(t(),a);Object(O["j"])(i,n()({},v),r.msg)}var s=l?Object(o["get"])(r,"data.error"):Object(o["get"])(r,"msg.error.code");var u=l?ne[s]:s;var d=true;var h=true;var f=[X,$,ee,te,re,ae];if(Object(o["includes"])(f,s)&&Object(p["getFromBootData"])(t(),"page_needs_enterprise")&&Object(p["isFeatureEnabled"])(t(),"feature_default_shared_channels")){var g="send-message/sendMessage.catch";Object(I["a"])(a,u,g);d=false}var _=l?"Message failed to send over HTTP":"Message failed to send over websocket";var y=r;Object(o["get"])(y,"msg.SENT_MSG.text")&&delete y.msg.SENT_MSG.text;Object(o["get"])(y,"msg.text")&&delete y.msg.text;Object(o["get"])(y,"args.text")&&delete y.args.text;Object(V["d"])(y instanceof Error?y:new Error(_),_+": "+s+" | "+JSON.stringify(y),"message_send_fail",true);e(Object(j["error"])("MESSAGE",_,s,r));e(Object(b["addMessages"])([n()({},v,{showResend:d,showCancel:h})]))})});he.propTypes={params:u.a.shape({channel:u.a.string.isRequired,reply_broadcast:u.a.bool,text:u.a.string.isRequired,thread_ts:u.a.string,ts:u.a.string.isRequired,type:u.a.string.isRequired})};t["a"]=he;var fe=Object(_["b"])("Prepare a message and dispatch the `sendMessage` thunk",function(e,t,r){var a=r.channelId,i=r.text,s=void 0===i?"":i,o=r.replyToTs,c=r.shouldBroadcast,l=void 0!==c&&c;var u=t();var d=Object(R["a"])(Object(f["getTimestampForNewMessage"])(u,a));var v=Object(P["a"])(t(),s);if(Object(M["a"])()&&Object(x["a"])(s)){var h=Object(q["e"])(s);if(h){e(Object(j["action"])("SLASH-COMMAND",'Command "search/replace" is PENDING'));return e(Object(H["a"])(n()({channelId:a},h))).then(function(){e(Object(j["action"])("SLASH-COMMAND",'Command "search/replace" is RESOLVED'))}).catch(function(t){e(Object(j["action"])("SLASH-COMMAND",'Command "search/replace" is FAILED'));Object(L["c"])("beep");throw t})}var m=Object(W["b"])(u);var b=Object(q["d"])(s,m);var g=o?"threads_temp_slash_cmd_feedback":"temp_slash_cmd_feedback";Object(k["d"])(g);e(Object(j["action"])("SLASH-COMMAND",'Command "'+b.cmd+'" is PENDING'));return e(Object(D["executeCommand"])({args:b,channelId:a,threadTs:o})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.response;e(Object(j["action"])("SLASH-COMMAND",'Command "'+b.cmd+'" is RESOLVED'));r}).catch(function(t){e(Object(j["action"])("SLASH-COMMAND",'Command "'+b.cmd+'" is FAILED'));var r=void 0;if(Object(p["isFeatureEnabled"])(u,"feature_sonic_i18n")){r=t.message===Q?K.t("*{command}* failed because you are not allowed to perform that action. Talk to your Workspace Owner.",{command:b.cmd}):t.message===J?K.t('*{command}* is not a valid command. In Slack, all messages that start with the "/" character are interpreted as commands.\n\nIf you are trying to send a message and not run a command, try preceding the "/" with an empty space.',{command:b.cmd}):t.message===Z?K.t("*{command}* is not supported in threads. Sorry!",{command:b.cmd}):t.message===Y&&t.reason?K.t('*{command}* failed with the error "{reason}"',{command:b.cmd,reason:t.reason}):K.t("*{command}* failed with an unknown error.",{command:b.cmd});Object(G["a"])({text:r,channel:a,slackbot_feels:"sad_surprise",ephemeral_type:g,thread_ts:o})}throw t})}var _=void 0;if(o){if(!Object(p["isFeatureEnabled"])(u,"feature_http_sendmsg"))throw new Error("`prepareAndSendMessage` has not implemented replies. This is a programming error.");_={reply_broadcast:l,thread_ts:o}}e(he(n()({channel:a,text:v.trim(),ts:d,type:"message"},_)));return Promise.resolve()});fe.propTypes={channelId:u.a.string,text:u.a.string,replyToTs:u.a.string,shouldBroadcast:u.a.bool}},51:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},5160:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});t.default=u;var a=r(3031);var n=r(5161);var i=c(n);var s=r(3034);var o=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var l=("undefined"!==typeof e,"production");function u(e){return(0,a.createTransform)(function(e){return i.default.compressToUTF16((0,o.default)(e))},function(e){if("string"!==typeof e){"production"!==l&&console.error("redux-persist-transform-compress: expected outbound state to be a string");return e}try{return JSON.parse(i.default.decompressFromUTF16(e))}catch(e){"production"!==l&&console.error("redux-persist-transform-compress: error while decompressing state",e);return null}},e)}}).call(t,r(7300))},5161:function(e,t,r){var a;var n=function(){var e=String.fromCharCode;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";var a={};function n(e,t){if(!a[e]){a[e]={};for(var r=0;r<e.length;r++)a[e][e.charAt(r)]=r}return a[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){if(null==e)return"";if(""==e)return null;return i._decompress(e.length,32,function(r){return n(t,e.charAt(r))})},compressToUTF16:function(t){if(null==t)return"";return i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){if(null==e)return"";if(""==e)return null;return i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){var t=i.compress(e);var r=new Uint8Array(2*t.length);for(var a=0,n=t.length;a<n;a++){var s=t.charCodeAt(a);r[2*a]=s>>>8;r[2*a+1]=s%256}return r},decompressFromUint8Array:function(t){if(null===t||void 0===t)return i.decompress(t);var r=new Array(t.length/2);for(var a=0,n=r.length;a<n;a++)r[a]=256*t[2*a]+t[2*a+1];var s=[];r.forEach(function(t){s.push(e(t))});return i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){if(null==e)return"";return i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){if(null==e)return"";if(""==e)return null;e=e.replace(/ /g,"+");return i._decompress(e.length,32,function(t){return n(r,e.charAt(t))})},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var a,n,i={},s={},o="",c="",l="",u=2,d=3,v=2,p=[],h=0,f=0,m;for(m=0;m<e.length;m+=1){o=e.charAt(m);if(!Object.prototype.hasOwnProperty.call(i,o)){i[o]=d++;s[o]=true}c=l+o;if(Object.prototype.hasOwnProperty.call(i,c))l=c;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(a=0;a<v;a++){h<<=1;if(f==t-1){f=0;p.push(r(h));h=0}else f++}n=l.charCodeAt(0);for(a=0;a<8;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}else{n=1;for(a=0;a<v;a++){h=h<<1|n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n=0}n=l.charCodeAt(0);for(a=0;a<16;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}u--;if(0==u){u=Math.pow(2,v);v++}delete s[l]}else{n=i[l];for(a=0;a<v;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}u--;if(0==u){u=Math.pow(2,v);v++}i[c]=d++;l=String(o)}}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(a=0;a<v;a++){h<<=1;if(f==t-1){f=0;p.push(r(h));h=0}else f++}n=l.charCodeAt(0);for(a=0;a<8;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}else{n=1;for(a=0;a<v;a++){h=h<<1|n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n=0}n=l.charCodeAt(0);for(a=0;a<16;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}u--;if(0==u){u=Math.pow(2,v);v++}delete s[l]}else{n=i[l];for(a=0;a<v;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}}u--;if(0==u){u=Math.pow(2,v);v++}}n=2;for(a=0;a<v;a++){h=h<<1|1&n;if(f==t-1){f=0;p.push(r(h));h=0}else f++;n>>=1}while(true){h<<=1;if(f==t-1){p.push(r(h));break}f++}return p.join("")},decompress:function(e){if(null==e)return"";if(""==e)return null;return i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,a){var n=[],i,s=4,o=4,c=3,l="",u=[],d,v,p,h,f,m,b,g={val:a(0),position:r,index:1};for(d=0;d<3;d+=1)n[d]=d;p=0;f=Math.pow(2,2);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}switch(i=p){case 0:p=0;f=Math.pow(2,8);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}b=e(p);break;case 1:p=0;f=Math.pow(2,16);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}b=e(p);break;case 2:return""}n[3]=b;v=b;u.push(b);while(true){if(g.index>t)return"";p=0;f=Math.pow(2,c);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}switch(b=p){case 0:p=0;f=Math.pow(2,8);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}n[o++]=e(p);b=o-1;s--;break;case 1:p=0;f=Math.pow(2,16);m=1;while(m!=f){h=g.val&g.position;g.position>>=1;if(0==g.position){g.position=r;g.val=a(g.index++)}p|=(h>0?1:0)*m;m<<=1}n[o++]=e(p);b=o-1;s--;break;case 2:return u.join("")}if(0==s){s=Math.pow(2,c);c++}if(n[b])l=n[b];else{if(b!==o)return null;l=v+v.charAt(0)}u.push(l);n[o++]=v+l.charAt(0);s--;v=l;if(0==s){s=Math.pow(2,c);c++}}}};return i}();true;!(a=function(){return n}.call(t,r,t,e),void 0!==a&&(e.exports=a))},52:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},53:function(e,t,r){var a=r(242)("wks");var n=r(136);var i=r(48).Symbol;var s="function"==typeof i;var o=e.exports=function(e){return a[e]||(a[e]=s&&i[e]||(s?i:n)("Symbol."+e))};o.store=a},6:function(e,t,r){var a=r(48);var n=r(100);var i=r(83);var s=r(92);var o=r(107);var c="prototype";var l=function(e,t,r){var u=e&l.F;var d=e&l.G;var v=e&l.S;var p=e&l.P;var h=e&l.B;var f=d?a:v?a[t]||(a[t]={}):(a[t]||{})[c];var m=d?n:n[t]||(n[t]={});var b=m[c]||(m[c]={});var g,_,y,O;d&&(r=t);for(g in r){_=!u&&f&&void 0!==f[g];y=(_?f:r)[g];O=h&&_?o(y,a):p&&"function"==typeof y?o(Function.call,y):y;f&&s(f,g,y,e&l.U);m[g]!=y&&i(m,g,O);p&&b[g]!=y&&(b[g]=y)}};a.core=n;l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},61:function(e,t,r){var a=r(47);var n=r(406);var i=r(122);var s=Object.defineProperty;t.f=r(62)?Object.defineProperty:function e(t,r,o){a(t);r=i(r,true);a(o);if(n)try{return s(t,r,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");"value"in o&&(t[r]=o.value);return t}},62:function(e,t,r){e.exports=!r(51)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},67:function(e,t,r){var a=r(105);var n=Math.min;e.exports=function(e){return e>0?n(a(e),9007199254740991):0}},698:function(e,t,r){"use strict";var a=r(107);var n=r(6);var i=r(76);var s=r(409);var o=r(351);var c=r(67);var l=r(352);var u=r(353);n(n.S+n.F*!r(276)(function(e){Array.from(e)}),"Array",{from:function e(t){var r=i(t);var n="function"==typeof this?this:Array;var d=arguments.length;var v=d>1?arguments[1]:void 0;var p=void 0!==v;var h=0;var f=u(r);var m,b,g,_;p&&(v=a(v,d>2?arguments[2]:void 0,2));if(void 0==f||n==Array&&o(f)){m=c(r.length);for(b=new n(m);m>h;h++)l(b,h,p?v(r[h],h):r[h])}else for(_=f.call(r),b=new n;!(g=_.next()).done;h++)l(b,h,p?s(_,v,[g.value,h],true):g.value);b.length=h;return b}})},708:function(e,t,r){"use strict";var a=r(2006);t["a"]=a["a"]},709:function(e,t,r){"use strict";t["b"]=a;t["a"]=n;function a(e,t){return e+"_"+t.name}function n(e,t,r){return e+"_"+t.name+"_"+r}function i(e,t,r){return a(e,t)+"_"+r.value}},710:function(e,t,r){"use strict";r.d(t,"b",function(){return n});r.d(t,"d",function(){return i});r.d(t,"a",function(){return s});r.d(t,"c",function(){return o});var a=r(10);var n=Object(a["c"])("TS.ui.channel_options_dialog.promiseToGetWhoCanPostListData",function(){return false});var i=Object(a["c"])("TS.ui.team_picker.createFilterFunction",function(){return function(){return Promise.resolve({items:[]})}});var s=Object(a["c"])("TS.permissions.members.canDisconnectSharedChannels",function(){return false});var o=Object(a["c"])("TS.ui.im_browser.showRequestToDisconnectSharedChannelModal",function(){return false})},711:function(e,t,r){"use strict";var a=r(2193);t["a"]=a["a"]},715:function(e,t,r){"use strict";t["c"]=d;t["d"]=v;t["e"]=p;t["f"]=h;t["b"]=f;t["a"]=m;var a=r(189);var n=r.n(a);var i=r(1);var s=r.n(i);var o=r(5);var c=new o["b"]("policy-retention");function l(e){return{channels:c.t("Channel Retention"),private_channels:c.t("Private Channel Retention"),dms:c.t("Direct Message Retention"),allow_override:e?c.t("Member & Admin Override"):c.t("Direct Message and Private Channel Override"),files:c.t("File Retention")}}function u(e){return{channels:[{value:4,label:e?c.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):c.t("No policy; teams can modify their own retention settings")},{value:0,label:e?c.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):c.t("Retain all messages")},{value:1,label:e?c.t("Keep all messages, including revision history"):c.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?c.t("Delete messages and their revisions after a set number of days"):c.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?c.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):c.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?c.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):c.t("No policy; teams can modify their own retention settings")},{value:0,label:e?c.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):c.t("Retain all messages")},{value:1,label:e?c.t("Keep all messages, including revision history"):c.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?c.t("Delete messages and their revisions after a set number of days"):c.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?c.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):c.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?c.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):c.t("Retain all messages")},{value:1,label:e?c.t("Keep all messages, including revision history"):c.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?c.t("Delete messages and their revisions after a set number of days"):c.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?c.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):c.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?c.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):c.t("No policy; teams can set their own override policy")},{value:0,label:e?c.t("Don\u2019t allow channel and DM overrides"):c.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?c.t("Always allow channel and DM overrides"):c.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?c.t("Keep files"):c.t("Retain all files")},{value:1,label:e?c.t("Keep files, but only for a set number of days"):c.t("Retain all files for only a specific number of days"),showDuration:true}]}}function d(e){var t=e.policyType,r=e.featureGdprExports;var a=l(r);return a[t]}function v(e){var t=e.policyType,r=e.featureGdprExports;var a=u(r);return a[t]}function p(e){return s.a.includes(["channels","private_channels","allow_override"],e)}function h(e){var t=e.policyType,r=e.retentionType,a=e.featureGdprExports;var n=v({policyType:t,featureGdprExports:a});return s.a.get(s.a.find(n,function(e){return e.value===r}),"showDuration",false)}function f(e){var t=e.policyType,r=e.retentionType,a=e.policyDurationValue,n=e.featureGdprExports;if(s.a.isUndefined(t)||s.a.isUndefined(r))return"";var i=h({policyType:t,retentionType:r,featureGdprExports:n});var o=i?a:0;if(0===s.a.parseInt(o)||4===s.a.parseInt(r)){var l=v({policyType:t,featureGdprExports:n});var u=s.a.find(l,function(e){return e.value===r}),d=u.label;return d}if("files"===t)return n?c.t("Keep files for {policyDurationValue} days",{policyDurationValue:a}):c.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:a});switch(s.a.parseInt(r)){case 2:return n?c.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:a}):c.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:a});case 3:return n?c.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:a}):c.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:a});default:return""}}function m(e){var t=e.policyType,r=e.settingValues,a=e.featureGdprExports;var i=r.retention_type;if(4===i){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var s=n()({},r,{is_locked:true});if(!h({policyType:t,retentionType:i,featureGdprExports:a}))return n()({},s,{retention_duration:0});return s}},716:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=r(189);var n=r.n(a);var i=r(42);var s=r(78);var o=r(21801);Object(i["a"])("interop.url",n()({buildWorkspaceUrl:o["b"]},s))},7298:function(e,t,r){var a={"./checkout-flow-store/index.js":21772,"./pricing-plans-store/index.js":21752,"./workspace-store/index.js":21714};function n(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=7298},7299:function(e,t,r){var a={"./channel-history-store/index.js":3273,"./channels-store/index.js":21697,"./files-store/index.js":21706,"./members-store/index.js":21698,"./messages-store/index.js":21702,"./user-groups-store/index.js":23039};function n(e){return r(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function e(){return Object.keys(a)};n.resolve=i;e.exports=n;n.id=7299},7312:function(e,t,r){var a=r(48);var n=a.navigator;e.exports=n&&n.userAgent||""},757:function(e,t,r){var a=r(48);var n=r(100);var i=r(157);var s=r(1105);var o=r(61).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=i?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},758:function(e,t,r){var a=r(52);var n=r(47);var i=function(e,t){n(e);if(!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{a=r(107)(Function.call,r(123).f(Object.prototype,"__proto__").set,2);a(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(r,n){i(r,n);t?r.__proto__=n:a(r,n);return r}}({},false):void 0),check:i}},76:function(e,t,r){var a=r(106);e.exports=function(e){return Object(a(e))}},760:function(e,t,r){var a=r(52);var n=r(758).set;e.exports=function(e,t,r){var i=t.constructor;var s;i!==r&&"function"==typeof i&&(s=i.prototype)!==r.prototype&&a(s)&&n&&n(e,s);return e}},761:function(e,t,r){"use strict";var a=r(105);var n=r(106);e.exports=function e(t){var r=String(n(this));var i="";var s=a(t);if(s<0||Infinity==s)throw RangeError("Count can't be negative");for(;s>0;(s>>>=1)&&(r+=r))1&s&&(i+=r);return i}},762:function(e,t){e.exports=Math.sign||function e(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},763:function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function e(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},764:function(e,t,r){var a=r(418);var n=r(106);e.exports=function(e,t,r){if(a(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(n(e))}},765:function(e,t,r){var a=r(53)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{t[a]=false;return!"/./"[e](t)}catch(e){}}return true}},766:function(e,t,r){var a=r(2920);e.exports=function(e,t){return new(a(e))(t)}},767:function(e,t,r){"use strict";var a=r(76);var n=r(160);var i=r(67);e.exports=function e(t){var r=a(this);var s=i(r.length);var o=arguments.length;var c=n(o>1?arguments[1]:void 0,s);var l=o>2?arguments[2]:void 0;var u=void 0===l?s:n(l,s);while(u>c)r[c++]=t;return r}},768:function(e,t,r){"use strict";var a=r(198);var n=r(1118);var i=r(141);var s=r(101);e.exports=r(348)(Array,"Array",function(e,t){this._t=s(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var r=this._i++;if(!e||r>=e.length){this._t=void 0;return n(1)}if("keys"==t)return n(0,r);if("values"==t)return n(0,e[r]);return n(0,[r,e[r]])},"values");i.Arguments=i.Array;a("keys");a("values");a("entries")},769:function(e,t,r){var a=r(107);var n=r(1109);var i=r(350);var s=r(273);var o=r(48);var c=o.process;var l=o.setImmediate;var u=o.clearImmediate;var d=o.MessageChannel;var v=o.Dispatch;var p=0;var h={};var f="onreadystatechange";var m,b,g;var _=function(){var e=+this;if(h.hasOwnProperty(e)){var t=h[e];delete h[e];t()}};var y=function(e){_.call(e.data)};if(!l||!u){l=function e(t){var r=[];var a=1;while(arguments.length>a)r.push(arguments[a++]);h[++p]=function(){n("function"==typeof t?t:Function(t),r)};m(p);return p};u=function e(t){delete h[t]};if("process"==r(108)(c))m=function(e){c.nextTick(a(_,e,1))};else if(v&&v.now)m=function(e){v.now(a(_,e,1))};else if(d){b=new d;g=b.port2;b.port1.onmessage=y;m=a(g.postMessage,g,1)}else if(o.addEventListener&&"function"==typeof postMessage&&!o.importScripts){m=function(e){o.postMessage(e+"","*")};o.addEventListener("message",y,false)}else m=f in s("script")?function(e){i.appendChild(s("script"))[f]=function(){i.removeChild(this);_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}}e.exports={set:l,clear:u}},772:function(e,t,r){"use strict";var a=r(48);var n=r(62);var i=r(157);var s=r(423);var o=r(83);var c=r(251);var l=r(51);var u=r(249);var d=r(105);var v=r(67);var p=r(1127);var h=r(247).f;var f=r(61).f;var m=r(767);var b=r(161);var g="ArrayBuffer";var _="DataView";var y="prototype";var O="Wrong length!";var k="Wrong index!";var j=a[g];var C=a[_];var E=a.Math;var S=a.RangeError;var w=a.Infinity;var I=j;var T=E.abs;var N=E.pow;var R=E.floor;var A=E.log;var M=E.LN2;var P="buffer";var x="byteLength";var D="byteOffset";var F=n?"_b":P;var L=n?"_l":x;var B=n?"_o":D;function U(e,t,r){var a=new Array(r);var n=8*r-t-1;var i=(1<<n)-1;var s=i>>1;var o=23===t?N(2,-24)-N(2,-77):0;var c=0;var l=e<0||0===e&&1/e<0?1:0;var u,d,v;e=T(e);if(e!=e||e===w){d=e!=e?1:0;u=i}else{u=R(A(e)/M);if(e*(v=N(2,-u))<1){u--;v*=2}e+=u+s>=1?o/v:o*N(2,1-s);if(e*v>=2){u++;v/=2}if(u+s>=i){d=0;u=i}else if(u+s>=1){d=(e*v-1)*N(2,t);u+=s}else{d=e*N(2,s-1)*N(2,t);u=0}}for(;t>=8;a[c++]=255&d,d/=256,t-=8);u=u<<t|d;n+=t;for(;n>0;a[c++]=255&u,u/=256,n-=8);a[--c]|=128*l;return a}function q(e,t,r){var a=8*r-t-1;var n=(1<<a)-1;var i=n>>1;var s=a-7;var o=r-1;var c=e[o--];var l=127&c;var u;c>>=7;for(;s>0;l=256*l+e[o],o--,s-=8);u=l&(1<<-s)-1;l>>=-s;s+=t;for(;s>0;u=256*u+e[o],o--,s-=8);if(0===l)l=1-i;else{if(l===n)return u?NaN:c?-w:w;u+=N(2,t);l-=i}return(c?-1:1)*u*N(2,l-t)}function H(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function W(e){return[255&e]}function G(e){return[255&e,e>>8&255]}function V(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return U(e,52,8)}function K(e){return U(e,23,4)}function Q(e,t,r){f(e[y],t,{get:function(){return this[r]}})}function Y(e,t,r,a){var n=+r;var i=p(n);if(i+t>e[L])throw S(k);var s=e[F]._b;var o=i+e[B];var c=s.slice(o,o+t);return a?c:c.reverse()}function J(e,t,r,a,n,i){var s=+r;var o=p(s);if(o+t>e[L])throw S(k);var c=e[F]._b;var l=o+e[B];var u=a(+n);for(var d=0;d<t;d++)c[l+d]=u[i?d:t-d-1]}if(s.ABV){if(!l(function(){j(1)})||!l(function(){new j(-1)})||l(function(){new j;new j(1.5);new j(NaN);return j.name!=g})){j=function e(t){u(this,j);return new I(p(t))};var Z=j[y]=I[y];for(var X=h(I),$=0,ee;X.length>$;)(ee=X[$++])in j||o(j,ee,I[ee]);i||(Z.constructor=j)}var te=new C(new j(2));var re=C[y].setInt8;te.setInt8(0,2147483648);te.setInt8(1,2147483649);!te.getInt8(0)&&te.getInt8(1)||c(C[y],{setInt8:function e(t,r){re.call(this,t,r<<24>>24)},setUint8:function e(t,r){re.call(this,t,r<<24>>24)}},true)}else{j=function e(t){u(this,j,g);var r=p(t);this._b=m.call(new Array(r),0);this[L]=r};C=function e(t,r,a){u(this,C,_);u(t,j,_);var n=t[L];var i=d(r);if(i<0||i>n)throw S("Wrong offset!");a=void 0===a?n-i:v(a);if(i+a>n)throw S(O);this[F]=t;this[B]=i;this[L]=a};if(n){Q(j,x,"_l");Q(C,P,"_b");Q(C,x,"_l");Q(C,D,"_o")}c(C[y],{getInt8:function e(t){return Y(this,1,t)[0]<<24>>24},getUint8:function e(t){return Y(this,1,t)[0]},getInt16:function e(t){var r=Y(this,2,t,arguments[1]);return(r[1]<<8|r[0])<<16>>16},getUint16:function e(t){var r=Y(this,2,t,arguments[1]);return r[1]<<8|r[0]},getInt32:function e(t){return H(Y(this,4,t,arguments[1]))},getUint32:function e(t){return H(Y(this,4,t,arguments[1]))>>>0},getFloat32:function e(t){return q(Y(this,4,t,arguments[1]),23,4)},getFloat64:function e(t){return q(Y(this,8,t,arguments[1]),52,8)},setInt8:function e(t,r){J(this,1,t,W,r)},setUint8:function e(t,r){J(this,1,t,W,r)},setInt16:function e(t,r){J(this,2,t,G,r,arguments[2])},setUint16:function e(t,r){J(this,2,t,G,r,arguments[2])},setInt32:function e(t,r){J(this,4,t,V,r,arguments[2])},setUint32:function e(t,r){J(this,4,t,V,r,arguments[2])},setFloat32:function e(t,r){J(this,4,t,K,r,arguments[2])},setFloat64:function e(t,r){J(this,8,t,z,r,arguments[2])}})}b(j,g);b(C,_);o(C[y],s.VIEW,true);t[g]=j;t[_]=C},81:function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},83:function(e,t,r){var a=r(61);var n=r(135);e.exports=r(62)?function(e,t,r){return a.f(e,t,n(1,r))}:function(e,t,r){e[t]=r;return e}},86:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},92:function(e,t,r){var a=r(48);var n=r(83);var i=r(81);var s=r(136)("src");var o="toString";var c=Function[o];var l=(""+c).split(o);r(100).inspectSource=function(e){return c.call(e)};(e.exports=function(e,t,r,o){var c="function"==typeof r;c&&(i(r,"name")||n(r,"name",t));if(e[t]===r)return;c&&(i(r,s)||n(r,s,e[t]?""+e[t]:l.join(String(t))));if(e===a)e[t]=r;else if(o)e[t]?e[t]=r:n(e,t,r);else{delete e[t];n(e,t,r)}})(Function.prototype,o,function e(){return"function"==typeof this&&this[s]||c.call(this)})},9357:function(e,t,r){var a;var n;var i;false;e.exports=r(9570)()},9358:function(e,t,r){var a=r(9425),n=r(9430);function i(e,t){var r=n(e,t);return a(r)?r:void 0}e.exports=i},9362:function(e,t,r){"use strict";t.__esModule=true;t["default"]=s;function a(e){return e&&e.__esModule?e:{default:e}}var n=r(9524);var i=a(n);function s(e,t){return!(0,i["default"])(this.props,e)||!(0,i["default"])(this.state,t)}e.exports=t["default"]},9363:function(e,t,r){var a=r(9358);var n=a(Object,"create");e.exports=n},9364:function(e,t,r){var a=r(9435),n=r(9436),i=r(9437),s=r(9438),o=r(9439);function c(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype["delete"]=n;c.prototype.get=i;c.prototype.has=s;c.prototype.set=o;e.exports=c},9365:function(e,t,r){var a=r(9388);function n(e,t){var r=e.length;while(r--)if(a(e[r][0],t))return r;return-1}e.exports=n},9366:function(e,t,r){var a=r(9441);function n(e,t){var r=e.__data__;return a(t)?r["string"==typeof t?"string":"hash"]:r.map}e.exports=n},9368:function(e,t,r){var a=r(9381);var n=1/0;function i(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},9369:function(e,t,r){var a;var n;var i;false;e.exports=r(9522)()},9370:function(e,t,r){"use strict";t.__esModule=true;var a=r(9384);Object.defineProperty(t,"instrument",{enumerable:true,get:function e(){return s(a).default}});Object.defineProperty(t,"ActionCreators",{enumerable:true,get:function e(){return a.ActionCreators}});Object.defineProperty(t,"ActionTypes",{enumerable:true,get:function e(){return a.ActionTypes}});var n=r(9465);Object.defineProperty(t,"persistState",{enumerable:true,get:function e(){return s(n).default}});var i=r(9516);Object.defineProperty(t,"createDevTools",{enumerable:true,get:function e(){return s(i).default}});function s(e){return e&&e.__esModule?e:{default:e}}},9371:function(e,t,r){var a=r(9372),n=r(9445),i=r(9446);function s(e){var t=-1,r=null==e?0:e.length;this.__data__=new a;while(++t<r)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},9372:function(e,t,r){var a=r(9422),n=r(9440),i=r(9442),s=r(9443),o=r(9444);function c(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype["delete"]=n;c.prototype.get=i;c.prototype.has=s;c.prototype.set=o;e.exports=c},9374:function(e,t,r){var a=r(9358),n=r(9355);var i=a(n,"Map");e.exports=i},9375:function(e,t){function r(e,t){return e.has(t)}e.exports=r},9378:function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e){r[++t]=e});return r}e.exports=r},9380:function(e,t,r){var a=r(9356),n=r(9381);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(a(e))return false;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},9381:function(e,t,r){var a=r(9360),n=r(9359);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&a(e)==i}e.exports=s},9382:function(e,t,r){"use strict";t.__esModule=true;var a=r(952);var n=E(a);var i=r(72);var s=E(i);var o=r(95);var c=E(o);var l=r(96);var u=E(l);var d=r(189);var v=E(d);var p=r(12159);var h=E(p);var f=r(9357);var m=E(f);var b=r(9416);var g=E(b);var _=r(9576);var y=E(_);var O=r(9414);var k=E(O);var j=r(9577);var C=E(j);function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r){var a=e.nodeType,n=e.data,i=e.collectionLimit,s=e.circularCache,o=e.keyPath,c=e.postprocessValue,l=e.sortObjectKeys;var u=[];(0,y["default"])(a,n,l,i,t,r).forEach(function(t){if(t.to)u.push(h["default"].createElement(C["default"],(0,v["default"])({},e,{key:"ItemRange--"+t.from+"-"+t.to,from:t.from,to:t.to,renderChildNodes:S})));else{var r=t.key,a=t.value;var n=-1!==s.indexOf(a);var l=h["default"].createElement(k["default"],(0,v["default"])({},e,{postprocessValue:c,collectionLimit:i},{key:"Node--"+r,keyPath:[r].concat(o),value:c(a),circularCache:[].concat(s,[a]),isCircular:n,hideRoot:false}));false!==l&&u.push(l)}});return u}function w(e){var t=!(!e.shouldExpandNode||e.isCircular)&&e.shouldExpandNode(e.keyPath,e.data,e.level);return{expanded:t}}var I=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,c["default"])(this,e.call(this,r));a.handleClick=function(){a.props.expandable&&a.setState({expanded:!a.state.expanded})};a.state=w(r);return a}t.prototype.componentWillReceiveProps=function e(t){var r=w(t);w(this.props).expanded!==r.expanded&&this.setState(r)};t.prototype.shouldComponentUpdate=function e(t,r){var a=this;return!!(0,n["default"])(t).find(function(e){return"circularCache"!==e&&("keyPath"===e?t[e].join("/")!==a.props[e].join("/"):t[e]!==a.props[e])})||r.expanded!==this.state.expanded};t.prototype.render=function e(){var t=this.props,r=t.getItemString,a=t.nodeTypeIndicator,n=t.nodeType,i=t.data,s=t.hideRoot,o=t.createItemString,c=t.styling,l=t.collectionLimit,u=t.keyPath,d=t.labelRenderer,p=t.expandable;var f=this.state.expanded;var m=f||s&&0===this.props.level?S((0,v["default"])({},this.props,{level:this.props.level+1})):null;var b=h["default"].createElement("span",c("nestedNodeItemType",f),a);var _=r(n,i,b,o(i,l));var y=[u,n,f,p];return s?h["default"].createElement("li",c.apply(void 0,["rootNode"].concat(y)),h["default"].createElement("ul",c.apply(void 0,["rootNodeChildren"].concat(y)),m)):h["default"].createElement("li",c.apply(void 0,["nestedNode"].concat(y)),p&&h["default"].createElement(g["default"],{styling:c,nodeType:n,expanded:f,onClick:this.handleClick}),h["default"].createElement("label",(0,v["default"])({},c.apply(void 0,[["label","nestedNodeLabel"]].concat(y)),{onClick:this.handleClick}),d.apply(void 0,y)),h["default"].createElement("span",(0,v["default"])({},c.apply(void 0,["nestedNodeItemString"].concat(y)),{onClick:this.handleClick}),_),h["default"].createElement("ul",c.apply(void 0,["nestedNodeChildren"].concat(y)),m))};return t}(h["default"].Component);I.propTypes={getItemString:m["default"].func.isRequired,nodeTypeIndicator:m["default"].any,nodeType:m["default"].string.isRequired,data:m["default"].any,hideRoot:m["default"].bool.isRequired,createItemString:m["default"].func.isRequired,styling:m["default"].func.isRequired,collectionLimit:m["default"].number,keyPath:m["default"].arrayOf(m["default"].oneOfType([m["default"].string,m["default"].number])).isRequired,labelRenderer:m["default"].func.isRequired,shouldExpandNode:m["default"].func,level:m["default"].number.isRequired,sortObjectKeys:m["default"].oneOfType([m["default"].func,m["default"].bool]),isCircular:m["default"].bool,expandable:m["default"].bool};I.defaultProps={data:[],circularCache:[],level:0,expandable:true};t["default"]=I},9383:function(e,t){function r(e,t,r){return Math.min(Math.max(e,t),r)}e.exports=r},9384:function(e,t,r){"use strict";t.__esModule=true;t.INIT_ACTION=t.ActionCreators=t.ActionTypes=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.liftAction=y;t.liftReducerWith=O;t.unliftState=k;t.unliftStore=j;t.default=C;var i=r(9420);var s=p(i);var o=r(9459);var c=p(o);var l=r(9463);var u=p(l);var d=r(888);var v=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var h=t.ActionTypes={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",SET_ACTIONS_ACTIVE:"SET_ACTIONS_ACTIVE",JUMP_TO_STATE:"JUMP_TO_STATE",JUMP_TO_ACTION:"JUMP_TO_ACTION",REORDER_ACTION:"REORDER_ACTION",IMPORT_STATE:"IMPORT_STATE",LOCK_CHANGES:"LOCK_CHANGES",PAUSE_RECORDING:"PAUSE_RECORDING"};var f=t.ActionCreators={performAction:function e(t){if(!(0,u.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');return{type:h.PERFORM_ACTION,action:t,timestamp:Date.now()}},reset:function e(){return{type:h.RESET,timestamp:Date.now()}},rollback:function e(){return{type:h.ROLLBACK,timestamp:Date.now()}},commit:function e(){return{type:h.COMMIT,timestamp:Date.now()}},sweep:function e(){return{type:h.SWEEP}},toggleAction:function e(t){return{type:h.TOGGLE_ACTION,id:t}},setActionsActive:function e(t,r){var a=arguments.length<=2||void 0===arguments[2]||arguments[2];return{type:h.SET_ACTIONS_ACTIVE,start:t,end:r,active:a}},reorderAction:function e(t,r){return{type:h.REORDER_ACTION,actionId:t,beforeActionId:r}},jumpToState:function e(t){return{type:h.JUMP_TO_STATE,index:t}},jumpToAction:function e(t){return{type:h.JUMP_TO_ACTION,actionId:t}},importState:function e(t,r){return{type:h.IMPORT_STATE,nextLiftedState:t,noRecompute:r}},lockChanges:function e(t){return{type:h.LOCK_CHANGES,status:t}},pauseRecording:function e(t){return{type:h.PAUSE_RECORDING,status:t}}};var m=t.INIT_ACTION={type:"@@INIT"};function b(e,t,r){var a=r;var i=void 0;try{a=e(r,t)}catch(e){i=e.toString();"object"===("undefined"===typeof window?"undefined":n(window))&&("undefined"!==typeof window.chrome||"undefined"!==typeof window.process&&"renderer"===window.process.type)?setTimeout(function(){throw e}):console.error(e)}return{state:a,error:i}}function g(e,t,r,a){if(!a)return{state:e(r,t)};return b(e,t,r)}function _(e,t,r,a,n,i,s,o){if(!e||-1===t||t>=e.length&&e.length===i.length)return e;var c=e.slice(0,t);for(var l=t;l<i.length;l++){var u=i[l];var d=n[u].action;var v=c[l-1];var p=v?v.state:a;var h=s.indexOf(u)>-1;var f=void 0;f=h?v:o&&v&&v.error?{state:p,error:"Interrupted by an error up the chain"}:g(r,d,p,o);c.push(f)}return c}function y(e){return f.performAction(e)}function O(e,t,r,n){var i={monitorState:r(void 0,{}),nextActionId:1,actionsById:{0:y(m)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:true===n.shouldStartLocked,isPaused:false===n.shouldRecordChanges};return function(o,l){var u=o||i;var d=u.monitorState;var v=u.actionsById;var p=u.nextActionId;var f=u.stagedActionIds;var b=u.skippedActionIds;var O=u.committedState;var k=u.currentStateIndex;var j=u.computedStates;var C=u.isLocked;var E=u.isPaused;o||(v=a({},v));function S(e){var t=e;var r=f.slice(1,t+1);for(var a=0;a<r.length;a++){if(j[a+1].error){t=a;r=f.slice(1,t+1);break}delete v[r[a]]}b=b.filter(function(e){return-1===r.indexOf(e)});f=[0].concat(f.slice(t+1));O=j[t].state;j=j.slice(t);k=k>t?k-t:0}function w(t){var i;var s=void 0;if(t){s=j[k];d=r(d,l)}else s=g(e,l.action,j[k].state,false);if(!n.pauseActionType||1===p)return{monitorState:d,actionsById:{0:y(m)},nextActionId:1,stagedActionIds:[0],skippedActionIds:[],committedState:s.state,currentStateIndex:0,computedStates:[s],isLocked:C,isPaused:true};if(t){k===f.length-1&&k++;f=[].concat(f,[p]);p++}return{monitorState:d,actionsById:a({},v,(i={},i[p-1]=y({type:n.pauseActionType}),i)),nextActionId:p,stagedActionIds:f,skippedActionIds:b,committedState:O,currentStateIndex:k,computedStates:[].concat(j.slice(0,f.length-1),[s]),isLocked:C,isPaused:true}}var I=0;switch(l.type){case h.PERFORM_ACTION:if(C)return o||i;if(E)return w();n.maxAge&&f.length===n.maxAge&&S(1);k===f.length-1&&k++;var T=p++;v[T]=l;f=[].concat(f,[T]);I=f.length-1;break;case h.RESET:v={0:y(m)};p=1;f=[0];b=[];O=t;k=0;j=[];break;case h.COMMIT:v={0:y(m)};p=1;f=[0];b=[];O=j[k].state;k=0;j=[];break;case h.ROLLBACK:v={0:y(m)};p=1;f=[0];b=[];k=0;j=[];break;case h.TOGGLE_ACTION:var N=function(){var e=l.id;var t=b.indexOf(e);b=-1===t?[e].concat(b):b.filter(function(t){return t!==e});I=f.indexOf(e);return"break"}();if("break"===N)break;case h.SET_ACTIONS_ACTIVE:var R=l.start;var A=l.end;var M=l.active;var P=[];for(var x=R;x<A;x++)P.push(x);b=M?(0,s.default)(b,P):(0,c.default)(b,P);I=f.indexOf(R);break;case h.JUMP_TO_STATE:k=l.index;I=Infinity;break;case h.JUMP_TO_ACTION:var D=f.indexOf(l.actionId);-1!==D&&(k=D);I=Infinity;break;case h.SWEEP:f=(0,s.default)(f,b);b=[];k=Math.min(k,f.length-1);break;case h.REORDER_ACTION:var F=l.actionId;var L=f.indexOf(F);if(L<1)break;var B=l.beforeActionId;var U=f.indexOf(B);if(U<1){var q=f.length;U=B>f[q-1]?q:1}var H=L-U;if(H>0){f=[].concat(f.slice(0,U),[F],f.slice(U,L),f.slice(L+1));I=U}else if(H<0){f=[].concat(f.slice(0,L),f.slice(L+1,U),[F],f.slice(U));I=L}break;case h.IMPORT_STATE:if(Array.isArray(l.nextLiftedState)){v={0:y(m)};p=1;f=[0];b=[];k=l.nextLiftedState.length;j=[];O=l.preloadedState;I=0;l.nextLiftedState.forEach(function(e){v[p]=y(e);f.push(p);p++})}else{var W=l.nextLiftedState;d=W.monitorState;v=W.actionsById;p=W.nextActionId;f=W.stagedActionIds;b=W.skippedActionIds;O=W.committedState;k=W.currentStateIndex;j=W.computedStates;l.noRecompute&&(I=Infinity)}break;case h.LOCK_CHANGES:C=l.status;I=Infinity;break;case h.PAUSE_RECORDING:E=l.status;if(E)return w(true);v={0:y(m)};p=1;f=[0];b=[];O=j[k].state;k=0;j=[];break;case"@@redux/INIT":if(false===n.shouldHotReload){v={0:y(m)};p=1;f=[0];b=[];O=0===j.length?t:j[k].state;k=0;j=[]}I=0;if(n.maxAge&&f.length>n.maxAge){j=_(j,I,e,O,v,f,b,n.shouldCatchErrors);S(f.length-n.maxAge);I=Infinity}break;default:I=Infinity;break}j=_(j,I,e,O,v,f,b,n.shouldCatchErrors);d=r(d,l);return{monitorState:d,actionsById:v,nextActionId:p,stagedActionIds:f,skippedActionIds:b,committedState:O,currentStateIndex:k,computedStates:j,isLocked:C,isPaused:E}}}function k(e){var t=e.computedStates;var r=e.currentStateIndex;var a=t[r].state;return a}function j(e,t){var r;var i=void 0;function s(){var t=k(e.getState());void 0!==t&&(i=t);return i}return a({},e,(r={liftedStore:e,dispatch:function t(r){e.dispatch(y(r));return r},getState:s,replaceReducer:function r(a){e.replaceReducer(t(a))}},r[v.default]=function(){return a({},e[v.default](),{subscribe:function t(r){if("object"!==("undefined"===typeof r?"undefined":n(r)))throw new TypeError("Expected the observer to be an object.");function a(){r.next&&r.next(s())}a();var i=e.subscribe(a);return{unsubscribe:i}}})},r))}function C(){var e=arguments.length<=0||void 0===arguments[0]?function(){return null}:arguments[0];var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null!=t.maxAge&&t.maxAge<2)throw new Error("DevTools.instrument({ maxAge }) option, if specified, may not be less than 2.");return function(r){return function(a,n,i){function s(r){if("function"!==typeof r){if(r&&"function"===typeof r.default)throw new Error('Expected the reducer to be a function. Instead got an object with a "default" field. Did you pass a module instead of the default export? Try passing require(...).default instead.');throw new Error("Expected the reducer to be a function.")}return O(r,n,e,t)}var o=r(s(a),i);if(o.liftedStore)throw new Error("DevTools instrumentation should not be applied more than once. Check your store configuration.");return j(o,s)}}}},9387:function(e,t){var r=Function.prototype;var a=r.toString;function n(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=n},9388:function(e,t){function r(e,t){return e===t||e!==e&&t!==t}e.exports=r},9389:function(e,t,r){var a=r(9447);function n(e,t){var r=null==e?0:e.length;return!!r&&a(e,t,0)>-1}e.exports=n},9390:function(e,t){function r(e,t,r){var a=-1,n=null==e?0:e.length;while(++a<n)if(r(t,e[a]))return true;return false}e.exports=r},9391:function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}e.exports=r},9393:function(e,t,r){var a=r(9394),n=r(9451);function i(e,t,r,s,o){var c=-1,l=e.length;r||(r=n);o||(o=[]);while(++c<l){var u=e[c];t>0&&r(u)?t>1?i(u,t-1,r,s,o):a(o,u):s||(o[o.length]=u)}return o}e.exports=i},9394:function(e,t){function r(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}e.exports=r},9395:function(e,t,r){var a=r(9367),n=r(9453),i=r(9455);function s(e,t){return i(n(e,t,a),e+"")}e.exports=s},9396:function(e,t,r){var a=r(9358);var n=function(){try{var e=a(Object,"defineProperty");e({},"",{});return e}catch(e){}}();e.exports=n},9397:function(e,t,r){var a=r(9398),n=r(9359);function i(e){return n(e)&&a(e)}e.exports=i},9399:function(e,t,r){var a=r(9358),n=r(9355);var i=a(n,"Set");e.exports=i},9404:function(e,t,r){var a=r(9364),n=r(9482),i=r(9483),s=r(9484),o=r(9485),c=r(9486);function l(e){var t=this.__data__=new a(e);this.size=t.size}l.prototype.clear=n;l.prototype["delete"]=i;l.prototype.get=s;l.prototype.has=o;l.prototype.set=c;e.exports=l},9405:function(e,t,r){var a=r(9487),n=r(9359);function i(e,t,r,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return a(e,t,r,s,i,o)}e.exports=i},9406:function(e,t,r){var a=r(9371),n=r(9488),i=r(9375);var s=1,o=2;function c(e,t,r,c,l,u){var d=r&s,v=e.length,p=t.length;if(v!=p&&!(d&&p>v))return false;var h=u.get(e);if(h&&u.get(t))return h==t;var f=-1,m=true,b=r&o?new a:void 0;u.set(e,t);u.set(t,e);while(++f<v){var g=e[f],_=t[f];if(c)var y=d?c(_,g,f,t,e,u):c(g,_,f,e,t,u);if(void 0!==y){if(y)continue;m=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||l(g,e,r,c,u)))return b.push(t)})){m=false;break}}else if(!(g===_||l(g,_,r,c,u))){m=false;break}}u["delete"](e);u["delete"](t);return m}e.exports=c},9407:function(e,t,r){var a=r(9373);function n(e){return e===e&&!a(e)}e.exports=n},9408:function(e,t){function r(e,t){return function(r){if(null==r)return false;return r[e]===t&&(void 0!==t||e in Object(r))}}e.exports=r},9409:function(e,t,r){var a=r(9410),n=r(9368);function i(e,t){t=a(t,e);var r=0,i=t.length;while(null!=e&&r<i)e=e[n(t[r++])];return r&&r==i?e:void 0}e.exports=i},9410:function(e,t,r){var a=r(9356),n=r(9380),i=r(9505),s=r(9508);function o(e,t){if(a(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},9411:function(e,t,r){"use strict";t.__esModule=true;function a(e){return e&&e.__esModule?e["default"]:e}var n=r(9526);t.threezerotwofour=a(n);var i=r(9527);t.apathy=a(i);var s=r(9528);t.ashes=a(s);var o=r(9529);t.atelierDune=a(o);var c=r(9530);t.atelierForest=a(c);var l=r(9531);t.atelierHeath=a(l);var u=r(9532);t.atelierLakeside=a(u);var d=r(9533);t.atelierSeaside=a(d);var v=r(9534);t.bespin=a(v);var p=r(9535);t.brewer=a(p);var h=r(9536);t.bright=a(h);var f=r(9537);t.chalk=a(f);var m=r(9538);t.codeschool=a(m);var b=r(9539);t.colors=a(b);var g=r(9540);t["default"]=a(g);var _=r(9541);t.eighties=a(_);var y=r(9542);t.embers=a(y);var O=r(9543);t.flat=a(O);var k=r(9544);t.google=a(k);var j=r(9545);t.grayscale=a(j);var C=r(9546);t.greenscreen=a(C);var E=r(9547);t.harmonic=a(E);var S=r(9548);t.hopscotch=a(S);var w=r(9549);t.isotope=a(w);var I=r(9550);t.marrakesh=a(I);var T=r(9551);t.mocha=a(T);var N=r(9552);t.monokai=a(N);var R=r(9553);t.ocean=a(R);var A=r(9554);t.paraiso=a(A);var M=r(9555);t.pop=a(M);var P=r(9556);t.railscasts=a(P);var x=r(9557);t.shapeshifter=a(x);var D=r(9558);t.solarized=a(D);var F=r(9559);t.summerfruit=a(F);var L=r(9560);t.tomorrow=a(L);var B=r(9561);t.tube=a(B);var U=r(9562);t.twilight=a(U)},9412:function(e,t,r){"use strict";t.__esModule=true;t.updateScrollTop=n;t.startConsecutiveToggle=s;var a=t.UPDATE_SCROLL_TOP="@@redux-devtools-log-monitor/UPDATE_SCROLL_TOP";function n(e){return{type:a,scrollTop:e}}var i=t.START_CONSECUTIVE_TOGGLE="@@redux-devtools-log-monitor/START_CONSECUTIVE_TOGGLE";function s(e){return{type:i,id:e}}},9413:function(e,t,r){"use strict";t.__esModule=true;var a=r(374);var n=C(a);var i=r(72);var s=C(i);var o=r(95);var c=C(o);var l=r(96);var u=C(l);var d=r(189);var v=C(d);var p=r(952);var h=C(p);var f=r(12159);var m=C(f);var b=r(9357);var g=C(b);var _=r(9414);var y=C(_);var O=r(9585);var k=C(O);var j=r(9417);function C(e){return e&&e.__esModule?e:{default:e}}var E=function e(t){return t};var S=function e(t,r,a){return 0===a};var w=function e(t,r,a,n){return m["default"].createElement("span",null,a," ",n)};var I=function e(t){var r=t[0];return m["default"].createElement("span",null,r,":")};var T=function e(){return false};function N(e,t){var r={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"};var a=(0,h["default"])(r).filter(function(e){return t[e]});if(a.length>0){e="string"===typeof e?{extend:e}:(0,v["default"])({},e);a.forEach(function(a){console.error('Styling method "'+a+'" is deprecated, use "theme" property instead');e[r[a]]=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var s=e.style;return{style:(0,v["default"])({},s,t[a].apply(t,n))}}})}return e}function R(e){var t=N(e.theme,e);e.invertTheme&&("string"===typeof t?t+=":inverted":t&&t.extend?t="string"===typeof t?(0,v["default"])({},t,{extend:t.extend+":inverted"}):(0,v["default"])({},t,{extend:(0,j.invertTheme)(t.extend)}):t&&(t=(0,j.invertTheme)(t)));return{styling:(0,k["default"])(t)}}var A=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,c["default"])(this,e.call(this,r));a.state=R(r);return a}t.prototype.componentWillReceiveProps=function e(t){var r=this;["theme","invertTheme"].find(function(e){return t[e]!==r.props[e]})&&this.setState(R(t))};t.prototype.shouldComponentUpdate=function e(t){var r=this;return!!(0,h["default"])(t).find(function(e){return"keyPath"===e?t[e].join("/")!==r.props[e].join("/"):t[e]!==r.props[e]})};t.prototype.render=function e(){var t=this.props,r=t.data,a=t.keyPath,i=t.postprocessValue,s=t.hideRoot,o=t.theme,c=t.invertTheme,l=(0,n["default"])(t,["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"]);var u=this.state.styling;return m["default"].createElement("ul",u("tree"),m["default"].createElement(y["default"],(0,v["default"])({},(0,v["default"])({postprocessValue:i,hideRoot:s,styling:u},l),{keyPath:s?[]:a,value:i(r)})))};return t}(m["default"].Component);A.propTypes={data:g["default"].oneOfType([g["default"].array,g["default"].object]).isRequired,hideRoot:g["default"].bool,theme:g["default"].oneOfType([g["default"].object,g["default"].string]),invertTheme:g["default"].bool,keyPath:g["default"].arrayOf(g["default"].oneOfType([g["default"].string,g["default"].number])),postprocessValue:g["default"].func,sortObjectKeys:g["default"].oneOfType([g["default"].func,g["default"].bool])};A.defaultProps={shouldExpandNode:S,hideRoot:false,keyPath:["root"],getItemString:w,labelRenderer:I,valueRenderer:E,postprocessValue:E,isCustomNode:T,collectionLimit:50,invertTheme:true};t["default"]=A},9414:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=O(a);var i=r(374);var s=O(i);var o=r(12159);var c=O(o);var l=r(9357);var u=O(l);var d=r(9572);var v=O(d);var p=r(9573);var h=O(p);var f=r(9578);var m=O(f);var b=r(9579);var g=O(b);var _=r(9584);var y=O(_);function O(e){return e&&e.__esModule?e:{default:e}}var k=function e(t){var r=t.getItemString,a=t.keyPath,i=t.labelRenderer,o=t.styling,l=t.value,u=t.valueRenderer,d=t.isCustomNode,p=(0,s["default"])(t,["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"]);var f=d(l)?"Custom":(0,v["default"])(l);var b={getItemString:r,key:a[0],keyPath:a,labelRenderer:i,nodeType:f,styling:o,value:l,valueRenderer:u};var _=(0,n["default"])({},p,b,{data:l,isCustomNode:d});switch(f){case"Object":case"Error":case"WeakMap":case"WeakSet":return c["default"].createElement(h["default"],_);case"Array":return c["default"].createElement(m["default"],_);case"Iterable":case"Map":case"Set":return c["default"].createElement(g["default"],_);case"String":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return'"'+t+'"'}}));case"Number":return c["default"].createElement(y["default"],b);case"Boolean":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t?"true":"false"}}));case"Date":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toISOString()}}));case"Null":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"null"}}));case"Undefined":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"undefined"}}));case"Function":case"Symbol":return c["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toString()}}));case"Custom":return c["default"].createElement(y["default"],b);default:return null}};k.propTypes={getItemString:u["default"].func.isRequired,keyPath:u["default"].arrayOf(u["default"].oneOfType([u["default"].string,u["default"].number])).isRequired,labelRenderer:u["default"].func.isRequired,styling:u["default"].func.isRequired,value:u["default"].any,valueRenderer:u["default"].func.isRequired,isCustomNode:u["default"].func.isRequired};t["default"]=k},9415:function(e,t,r){e.exports={default:r(9574),__esModule:true}},9416:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=l(a);var i=r(12159);var s=l(i);var o=r(9357);var c=l(o);function l(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var r=t.styling,a=t.arrowStyle,i=t.expanded,o=t.nodeType,c=t.onClick;return s["default"].createElement("div",(0,n["default"])({},r("arrowContainer",a),{onClick:c}),s["default"].createElement("div",r(["arrow","arrowSign"],o,i,a),"\u25b6","double"===a&&s["default"].createElement("div",r(["arrowSign","arrowSignInner"]),"\u25b6")))};u.propTypes={styling:c["default"].func.isRequired,arrowStyle:c["default"].oneOf(["single","double"]),expanded:c["default"].bool.isRequired,nodeType:c["default"].string.isRequired,onClick:c["default"].func.isRequired};u.defaultProps={arrowStyle:"single"};t["default"]=u},9417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBase16Theme=t.createStyling=t.invertTheme=void 0;var a=r(942);var n=j(a);var i=r(189);var s=j(i);var o=r(1395);var c=j(o);var l=r(952);var u=j(l);var d=r(9586);var v=j(d);var p=r(9411);var h=k(p);var f=r(9587);var m=j(f);var b=r(9588);var g=j(b);var _=r(9593);var y=j(_);var O=r(9594);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function j(e){return e&&e.__esModule?e:{default:e}}var C=h.default;var E=(0,u.default)(C);var S=function e(t){return t<.25?1:t<.5?.9-t:1.1-t};var w=(0,y.default)(g.default,O.rgb2yuv,function(e){var t=(0,c.default)(e,3),r=t[0],a=t[1],n=t[2];return[S(r),a,n]},O.yuv2rgb,m.default);var I=function e(t){return function(e){return{className:[e.className,t.className].filter(Boolean).join(" "),style:(0,s.default)({},e.style||{},t.style||{})}}};var T=function e(t,r){if(void 0===t)return r;if(void 0===r)return t;var a="undefined"===typeof t?"undefined":(0,n.default)(t);var i="undefined"===typeof r?"undefined":(0,n.default)(r);switch(a){case"string":switch(i){case"string":return[r,t].filter(Boolean).join(" ");case"object":return I({className:t,style:r});case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return I({className:t})(r.apply(void 0,[e].concat(n)))}}case"object":switch(i){case"string":return I({className:r,style:t});case"object":return(0,s.default)({},r,t);case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return I({style:t})(r.apply(void 0,[e].concat(n)))}}case"function":switch(i){case"string":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({className:r})].concat(n))};case"object":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({style:r})].concat(n))};case"function":return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return t.apply(void 0,[r.apply(void 0,[e].concat(n))].concat(n))}}}};var N=function e(t,r){var a=(0,u.default)(r);for(var n in t)-1===a.indexOf(n)&&a.push(n);return a.reduce(function(e,a){return e[a]=T(t[a],r[a]),e},{})};var R=function e(t,r){for(var a=arguments.length,i=Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];if(null===r)return t;Array.isArray(r)||(r=[r]);var c=r.map(function(e){return t[e]}).filter(Boolean);var l=c.reduce(function(e,t){"string"===typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===("undefined"===typeof t?"undefined":(0,n.default)(t))?e.style=(0,s.default)({},e.style,t):"function"===typeof t&&(e=(0,s.default)({},e,t.apply(void 0,[e].concat(i))));return e},{className:"",style:{}});l.className||delete l.className;0===(0,u.default)(l.style).length&&delete l.style;return l};var A=t.invertTheme=function e(t){return(0,u.default)(t).reduce(function(e,r){return e[r]=/^base/.test(r)?w(t[r]):"scheme"===r?t[r]+":inverted":t[r],e},{})};var M=t.createStyling=(0,v.default)(function(e){for(var t=arguments.length,r=Array(t>3?t-3:0),a=3;a<t;a++)r[a-3]=arguments[a];var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=n.defaultBase16,c=void 0===o?C:o,l=n.base16Themes,d=void 0===l?null:l;var p=P(i,d);p&&(i=(0,s.default)({},p,i));var h=E.reduce(function(e,t){return e[t]=i[t]||c[t],e},{});var f=(0,u.default)(i).reduce(function(e,t){return-1===E.indexOf(t)?(e[t]=i[t],e):e},{});var m=e(h);var b=N(f,m);return(0,v.default)(R,2).apply(void 0,[b].concat(r))},3);var P=t.getBase16Theme=function e(t,r){t&&t.extend&&(t=t.extend);if("string"===typeof t){var a=t.split(":"),n=(0,c.default)(a,2),i=n[0],s=n[1];t=(r||{})[i]||h[i];"inverted"===s&&(t=A(t))}return t&&t.hasOwnProperty("base00")?t:void 0}},9418:function(e,t){var r=/-?\d+(\.\d+)?%?/g;function a(e){return e.match(r)}e.exports=a},9420:function(e,t,r){var a=r(9421),n=r(9393),i=r(9395),s=r(9397);var o=i(function(e,t){return s(e)?a(e,n(t,1,s,true)):[]});e.exports=o},9421:function(e,t,r){var a=r(9371),n=r(9389),i=r(9390),s=r(9391),o=r(9392),c=r(9375);var l=200;function u(e,t,r,u){var d=-1,v=n,p=true,h=e.length,f=[],m=t.length;if(!h)return f;r&&(t=s(t,o(r)));if(u){v=i;p=false}else if(t.length>=l){v=c;p=false;t=new a(t)}e:while(++d<h){var b=e[d],g=null==r?b:r(b);b=u||0!==b?b:0;if(p&&g===g){var _=m;while(_--)if(t[_]===g)continue e;f.push(b)}else v(t,g,u)||f.push(b)}return f}e.exports=u},9422:function(e,t,r){var a=r(9423),n=r(9364),i=r(9374);function s(){this.size=0;this.__data__={hash:new a,map:new(i||n),string:new a}}e.exports=s},9423:function(e,t,r){var a=r(9424),n=r(9431),i=r(9432),s=r(9433),o=r(9434);function c(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype["delete"]=n;c.prototype.get=i;c.prototype.has=s;c.prototype.set=o;e.exports=c},9424:function(e,t,r){var a=r(9363);function n(){this.__data__=a?a(null):{};this.size=0}e.exports=n},9425:function(e,t,r){var a=r(9385),n=r(9428),i=r(9373),s=r(9387);var o=/[\\^$.*+?()[\]{}|]/g;var c=/^\[object .+?Constructor\]$/;var l=Function.prototype,u=Object.prototype;var d=l.toString;var v=u.hasOwnProperty;var p=RegExp("^"+d.call(v).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(e){if(!i(e)||n(e))return false;var t=a(e)?p:c;return t.test(s(e))}e.exports=h},9428:function(e,t,r){var a=r(9429);var n=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function i(e){return!!n&&n in e}e.exports=i},9429:function(e,t,r){var a=r(9355);var n=a["__core-js_shared__"];e.exports=n},9430:function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},9431:function(e,t){function r(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=r},9432:function(e,t,r){var a=r(9363);var n="__lodash_hash_undefined__";var i=Object.prototype;var s=i.hasOwnProperty;function o(e){var t=this.__data__;if(a){var r=t[e];return r===n?void 0:r}return s.call(t,e)?t[e]:void 0}e.exports=o},9433:function(e,t,r){var a=r(9363);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=this.__data__;return a?void 0!==t[e]:i.call(t,e)}e.exports=s},9434:function(e,t,r){var a=r(9363);var n="__lodash_hash_undefined__";function i(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=a&&void 0===t?n:t;return this}e.exports=i},9435:function(e,t){function r(){this.__data__=[];this.size=0}e.exports=r},9436:function(e,t,r){var a=r(9365);var n=Array.prototype;var i=n.splice;function s(e){var t=this.__data__,r=a(t,e);if(r<0)return false;var n=t.length-1;r==n?t.pop():i.call(t,r,1);--this.size;return true}e.exports=s},9437:function(e,t,r){var a=r(9365);function n(e){var t=this.__data__,r=a(t,e);return r<0?void 0:t[r][1]}e.exports=n},9438:function(e,t,r){var a=r(9365);function n(e){return a(this.__data__,e)>-1}e.exports=n},9439:function(e,t,r){var a=r(9365);function n(e,t){var r=this.__data__,n=a(r,e);if(n<0){++this.size;r.push([e,t])}else r[n][1]=t;return this}e.exports=n},9440:function(e,t,r){var a=r(9366);function n(e){var t=a(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=n},9441:function(e,t){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=r},9442:function(e,t,r){var a=r(9366);function n(e){return a(this,e).get(e)}e.exports=n},9443:function(e,t,r){var a=r(9366);function n(e){return a(this,e).has(e)}e.exports=n},9444:function(e,t,r){var a=r(9366);function n(e,t){var r=a(this,e),n=r.size;r.set(e,t);this.size+=r.size==n?0:1;return this}e.exports=n},9445:function(e,t){var r="__lodash_hash_undefined__";function a(e){this.__data__.set(e,r);return this}e.exports=a},9446:function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},9447:function(e,t,r){var a=r(9448),n=r(9449),i=r(9450);function s(e,t,r){return t===t?i(e,t,r):a(e,n,r)}e.exports=s},9448:function(e,t){function r(e,t,r,a){var n=e.length,i=r+(a?1:-1);while(a?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=r},9449:function(e,t){function r(e){return e!==e}e.exports=r},9450:function(e,t){function r(e,t,r){var a=r-1,n=e.length;while(++a<n)if(e[a]===t)return a;return-1}e.exports=r},9451:function(e,t,r){var a=r(9361),n=r(9376),i=r(9356);var s=a?a.isConcatSpreadable:void 0;function o(e){return i(e)||n(e)||!!(s&&e&&e[s])}e.exports=o},9453:function(e,t,r){var a=r(9454);var n=Math.max;function i(e,t,r){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),c=Array(o);while(++s<o)c[s]=i[t+s];s=-1;var l=Array(t+1);while(++s<t)l[s]=i[s];l[t]=r(c);return a(e,this,l)}}e.exports=i},9454:function(e,t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}e.exports=r},9455:function(e,t,r){var a=r(9456),n=r(9458);var i=n(a);e.exports=i},9456:function(e,t,r){var a=r(9457),n=r(9396),i=r(9367);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:a(t),writable:true})}:i;e.exports=s},9457:function(e,t){function r(e){return function(){return e}}e.exports=r},9458:function(e,t){var r=800,a=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=a-(s-i);i=s;if(o>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},9459:function(e,t,r){var a=r(9393),n=r(9395),i=r(9460),s=r(9397);var o=n(function(e){return i(a(e,1,s,true))});e.exports=o},9460:function(e,t,r){var a=r(9371),n=r(9389),i=r(9390),s=r(9375),o=r(9461),c=r(9378);var l=200;function u(e,t,r){var u=-1,d=n,v=e.length,p=true,h=[],f=h;if(r){p=false;d=i}else if(v>=l){var m=t?null:o(e);if(m)return c(m);p=false;d=s;f=new a}else f=t?[]:h;e:while(++u<v){var b=e[u],g=t?t(b):b;b=r||0!==b?b:0;if(p&&g===g){var _=f.length;while(_--)if(f[_]===g)continue e;t&&f.push(g);h.push(b)}else if(!d(f,g,r)){f!==h&&f.push(g);h.push(b)}}return h}e.exports=u},9461:function(e,t,r){var a=r(9399),n=r(9462),i=r(9378);var s=1/0;var o=a&&1/i(new a([,-0]))[1]==s?function(e){return new a(e)}:n;e.exports=o},9462:function(e,t){function r(){}e.exports=r},9463:function(e,t,r){var a=r(9360),n=r(9464),i=r(9359);var s="[object Object]";var o=Function.prototype,c=Object.prototype;var l=o.toString;var u=c.hasOwnProperty;var d=l.call(Object);function v(e){if(!i(e)||a(e)!=s)return false;var t=n(e);if(null===t)return true;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}e.exports=v},9464:function(e,t,r){var a=r(9400);var n=a(Object.getPrototypeOf,Object);e.exports=n},9465:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=l;var n=r(9466);var i=c(n);var s=r(9367);var o=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default;if(!e)return function(e){return function(){return e.apply(void 0,arguments)}};function n(e){return a({},e,{actionsById:(0,i.default)(e.actionsById,function(e){return a({},e,{action:r(e.action)})}),committedState:t(e.committedState),computedStates:e.computedStates.map(function(e){return a({},e,{state:t(e.state)})})})}return function(t){return function(r,i,s){var o="redux-dev-session-"+e;var c=void 0;try{var l=localStorage.getItem(o);if(l){c=n(JSON.parse(l))||i;t(r,i)}}catch(e){console.warn("Could not read debug session from localStorage:",e);try{localStorage.removeItem(o)}finally{c=void 0}}var u=t(r,c,s);return a({},u,{dispatch:function e(t){u.dispatch(t);try{localStorage.setItem(o,JSON.stringify(u.getState()))}catch(e){console.warn("Could not write debug session to localStorage:",e)}return t}})}}}},9466:function(e,t,r){var a=r(9467),n=r(9468),i=r(9479);function s(e,t){var r={};t=i(t,3);n(e,function(e,n,i){a(r,n,t(e,n,i))});return r}e.exports=s},9467:function(e,t,r){var a=r(9396);function n(e,t,r){"__proto__"==t&&a?a(e,t,{configurable:true,enumerable:true,value:r,writable:true}):e[t]=r}e.exports=n},9479:function(e,t,r){var a=r(9480),n=r(9503),i=r(9367),s=r(9356),o=r(9513);function c(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):a(e);return o(e)}e.exports=c},9480:function(e,t,r){var a=r(9481),n=r(9502),i=r(9408);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(r){return r===e||a(r,e,t)}}e.exports=s},9481:function(e,t,r){var a=r(9404),n=r(9405);var i=1,s=2;function o(e,t,r,o){var c=r.length,l=c,u=!o;if(null==e)return!l;e=Object(e);while(c--){var d=r[c];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++c<l){d=r[c];var v=d[0],p=e[v],h=d[1];if(u&&d[2]){if(void 0===p&&!(v in e))return false}else{var f=new a;if(o)var m=o(p,h,v,e,t,f);if(!(void 0===m?n(h,p,i|s,o,f):m))return false}}return true}e.exports=o},9482:function(e,t,r){var a=r(9364);function n(){this.__data__=new a;this.size=0}e.exports=n},9483:function(e,t){function r(e){var t=this.__data__,r=t["delete"](e);this.size=t.size;return r}e.exports=r},9484:function(e,t){function r(e){return this.__data__.get(e)}e.exports=r},9485:function(e,t){function r(e){return this.__data__.has(e)}e.exports=r},9486:function(e,t,r){var a=r(9364),n=r(9374),i=r(9372);var s=200;function o(e,t){var r=this.__data__;if(r instanceof a){var o=r.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++r.size;return this}r=this.__data__=new i(o)}r.set(e,t);this.size=r.size;return this}e.exports=o},9487:function(e,t,r){var a=r(9404),n=r(9406),i=r(9489),s=r(9492),o=r(9498),c=r(9356),l=r(9401),u=r(9403);var d=1;var v="[object Arguments]",p="[object Array]",h="[object Object]";var f=Object.prototype;var m=f.hasOwnProperty;function b(e,t,r,f,b,g){var _=c(e),y=c(t),O=_?p:o(e),k=y?p:o(t);O=O==v?h:O;k=k==v?h:k;var j=O==h,C=k==h,E=O==k;if(E&&l(e)){if(!l(t))return false;_=true;j=false}if(E&&!j){g||(g=new a);return _||u(e)?n(e,t,r,f,b,g):i(e,t,O,r,f,b,g)}if(!(r&d)){var S=j&&m.call(e,"__wrapped__"),w=C&&m.call(t,"__wrapped__");if(S||w){var I=S?e.value():e,T=w?t.value():t;g||(g=new a);return b(I,T,r,f,g)}}if(!E)return false;g||(g=new a);return s(e,t,r,f,b,g)}e.exports=b},9488:function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length;while(++r<a)if(t(e[r],r,e))return true;return false}e.exports=r},9489:function(e,t,r){var a=r(9361),n=r(9490),i=r(9388),s=r(9406),o=r(9491),c=r(9378);var l=1,u=2;var d="[object Boolean]",v="[object Date]",p="[object Error]",h="[object Map]",f="[object Number]",m="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",O="[object DataView]";var k=a?a.prototype:void 0,j=k?k.valueOf:void 0;function C(e,t,r,a,k,C,E){switch(r){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!C(new n(e),new n(t)))return false;return true;case d:case v:case f:return i(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case g:return e==t+"";case h:var S=o;case b:var w=a&l;S||(S=c);if(e.size!=t.size&&!w)return false;var I=E.get(e);if(I)return I==t;a|=u;E.set(e,t);var T=s(S(e),S(t),a,k,C,E);E["delete"](e);return T;case _:if(j)return j.call(e)==j.call(t)}return false}e.exports=C},9490:function(e,t,r){var a=r(9355);var n=a.Uint8Array;e.exports=n},9491:function(e,t){function r(e){var t=-1,r=Array(e.size);e.forEach(function(e,a){r[++t]=[a,e]});return r}e.exports=r},9492:function(e,t,r){var a=r(9493);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,r,i,o,c){var l=r&n,u=a(e),d=u.length,v=a(t),p=v.length;if(d!=p&&!l)return false;var h=d;while(h--){var f=u[h];if(!(l?f in t:s.call(t,f)))return false}var m=c.get(e);if(m&&c.get(t))return m==t;var b=true;c.set(e,t);c.set(t,e);var g=l;while(++h<d){f=u[h];var _=e[f],y=t[f];if(i)var O=l?i(y,_,f,t,e,c):i(_,y,f,e,t,c);if(!(void 0===O?_===y||o(_,y,r,i,c):O)){b=false;break}g||(g="constructor"==f)}if(b&&!g){var k=e.constructor,j=t.constructor;k!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof j&&j instanceof j)&&(b=false)}c["delete"](e);c["delete"](t);return b}e.exports=o},9493:function(e,t,r){var a=r(9494),n=r(9495),i=r(9379);function s(e){return a(e,i,n)}e.exports=s},9494:function(e,t,r){var a=r(9394),n=r(9356);function i(e,t,r){var i=t(e);return n(e)?i:a(i,r(e))}e.exports=i},9495:function(e,t,r){var a=r(9496),n=r(9497);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var c=o?function(e){if(null==e)return[];e=Object(e);return a(o(e),function(t){return s.call(e,t)})}:n;e.exports=c},9496:function(e,t){function r(e,t){var r=-1,a=null==e?0:e.length,n=0,i=[];while(++r<a){var s=e[r];t(s,r,e)&&(i[n++]=s)}return i}e.exports=r},9497:function(e,t){function r(){return[]}e.exports=r},9498:function(e,t,r){var a=r(9499),n=r(9374),i=r(9500),s=r(9399),o=r(9501),c=r(9360),l=r(9387);var u="[object Map]",d="[object Object]",v="[object Promise]",p="[object Set]",h="[object WeakMap]";var f="[object DataView]";var m=l(a),b=l(n),g=l(i),_=l(s),y=l(o);var O=c;(a&&O(new a(new ArrayBuffer(1)))!=f||n&&O(new n)!=u||i&&O(i.resolve())!=v||s&&O(new s)!=p||o&&O(new o)!=h)&&(O=function(e){var t=c(e),r=t==d?e.constructor:void 0,a=r?l(r):"";if(a)switch(a){case m:return f;case b:return u;case g:return v;case _:return p;case y:return h}return t});e.exports=O},9499:function(e,t,r){var a=r(9358),n=r(9355);var i=a(n,"DataView");e.exports=i},9500:function(e,t,r){var a=r(9358),n=r(9355);var i=a(n,"Promise");e.exports=i},9501:function(e,t,r){var a=r(9358),n=r(9355);var i=a(n,"WeakMap");e.exports=i},9502:function(e,t,r){var a=r(9407),n=r(9379);function i(e){var t=n(e),r=t.length;while(r--){var i=t[r],s=e[i];t[r]=[i,s,a(s)]}return t}e.exports=i},9503:function(e,t,r){var a=r(9405),n=r(9504),i=r(9510),s=r(9380),o=r(9407),c=r(9408),l=r(9368);var u=1,d=2;function v(e,t){if(s(e)&&o(t))return c(l(e),t);return function(r){var s=n(r,e);return void 0===s&&s===t?i(r,e):a(t,s,u|d)}}e.exports=v},9504:function(e,t,r){var a=r(9409);function n(e,t,r){var n=null==e?void 0:a(e,t);return void 0===n?r:n}e.exports=n},9505:function(e,t,r){var a=r(9506);var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var s=/\\(\\)?/g;var o=a(function(e){var t=[];n.test(e)&&t.push("");e.replace(i,function(e,r,a,n){t.push(a?n.replace(s,"$1"):r||e)});return t});e.exports=o},9506:function(e,t,r){var a=r(9507);var n=500;function i(e){var t=a(e,function(e){r.size===n&&r.clear();return e});var r=t.cache;return t}e.exports=i},9507:function(e,t,r){var a=r(9372);var n="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],i=r.cache;if(i.has(n))return i.get(n);var s=e.apply(this,a);r.cache=i.set(n,s)||i;return s};r.cache=new(i.Cache||a);return r}i.Cache=a;e.exports=i},9508:function(e,t,r){var a=r(9509);function n(e){return null==e?"":a(e)}e.exports=n},9509:function(e,t,r){var a=r(9361),n=r(9391),i=r(9356),s=r(9381);var o=1/0;var c=a?a.prototype:void 0,l=c?c.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},9510:function(e,t,r){var a=r(9511),n=r(9512);function i(e,t){return null!=e&&n(e,t,a)}e.exports=i},9511:function(e,t){function r(e,t){return null!=e&&t in Object(e)}e.exports=r},9512:function(e,t,r){var a=r(9410),n=r(9376),i=r(9356),s=r(9402),o=r(9377),c=r(9368);function l(e,t,r){t=a(t,e);var l=-1,u=t.length,d=false;while(++l<u){var v=c(t[l]);if(!(d=null!=e&&r(e,v)))break;e=e[v]}if(d||++l!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(v,u)&&(i(e)||n(e))}e.exports=l},9513:function(e,t,r){var a=r(9514),n=r(9515),i=r(9380),s=r(9368);function o(e){return i(e)?a(s(e)):n(e)}e.exports=o},9514:function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}e.exports=r},9515:function(e,t,r){var a=r(9409);function n(e){return function(t){return a(t,e)}}e.exports=n},9516:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=f;var n=r(12159);var i=d(n);var s=r(9517);var o=d(s);var c=r(9);var l=r(9384);var u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e){var t,r;var s=n.Children.only(e);var l=s.props;var d=s.type;var f=(0,c.connect)(function(e){return e})(d);return r=t=function(e){h(t,e);function t(r,a){v(this,t);var n=p(this,e.call(this,r,a));if(!r.store&&!a.store){console.error('Redux DevTools could not render. You must pass the Redux store to <DevTools> either as a "store" prop or by wrapping it in a <Provider store={store}>.');return p(n)}a.store?n.liftedStore=a.store.liftedStore:n.liftedStore=r.store.liftedStore;n.liftedStore||console.error("Redux DevTools could not render. Did you forget to include DevTools.instrument() in your store enhancer chain before using createStore()?");return n}t.prototype.render=function e(){if(!this.liftedStore)return null;return i.default.createElement(f,a({},l,{store:this.liftedStore}))};return t}(n.Component),t.contextTypes={store:o.default.object},t.propTypes={store:o.default.object},t.instrument=function(e){return(0,u.default)(function(e,t){return d.update(l,e,t)},e)},r}},9517:function(e,t,r){var a;var n;var i;false;e.exports=r(9518)()},9518:function(e,t,r){"use strict";var a=r(66);var n=r(36);var i=r(9519);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},9519:function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},9520:function(e,t,r){"use strict";t.__esModule=true;t.default=void 0;var a=r(9521);var n=i(a);function i(e){return e&&e.__esModule?e:{default:e}}t.default=n.default},9521:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(12159);var i=j(n);var s=r(9369);var o=j(s);var c=r(9362);var l=j(c);var u=r(9525);var d=k(u);var v=r(9370);var p=r(9412);var h=r(9564);var f=j(h);var m=r(9565);var b=j(m);var g=r(9568);var _=j(g);var y=r(9597);var O=j(y);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e;return t}function j(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=v.ActionCreators.toggleAction;var I=v.ActionCreators.setActionsActive;var T={container:{fontFamily:"monaco, Consolas, Lucida Console, monospace",position:"relative",overflowY:"hidden",width:"100%",height:"100%",minWidth:300,direction:"ltr"},elements:{position:"absolute",left:0,right:0,top:0,bottom:0,overflowX:"hidden",overflowY:"auto"}};var N=function(e){S(t,e);function t(r){C(this,t);var a=E(this,e.call(this,r));a.shouldComponentUpdate=l.default;a.updateScrollTop=(0,O.default)(function(){var e=a.node;a.props.dispatch((0,p.updateScrollTop)(e?e.scrollTop:0))},500);a.handleToggleAction=a.handleToggleAction.bind(a);a.handleToggleConsecutiveAction=a.handleToggleConsecutiveAction.bind(a);a.getRef=a.getRef.bind(a);return a}t.prototype.scroll=function e(){var t=this.node;if(!t)return;if(this.scrollDown){var r=t.offsetHeight;var a=t.scrollHeight;t.scrollTop=a-r;this.scrollDown=false}};t.prototype.componentDidMount=function e(){var t=this.node;if(!t||!this.props.monitorState)return;if(this.props.preserveScrollTop){t.scrollTop=this.props.monitorState.initialScrollTop;t.addEventListener("scroll",this.updateScrollTop)}else{this.scrollDown=true;this.scroll()}};t.prototype.componentWillUnmount=function e(){var t=this.node;t&&this.props.preserveScrollTop&&t.removeEventListener("scroll",this.updateScrollTop)};t.prototype.componentWillReceiveProps=function e(t){var r=this.node;if(r)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var a=r.scrollTop;var n=r.offsetHeight;var i=r.scrollHeight;this.scrollDown=Math.abs(i-(a+n))<20}else this.scrollDown=false;else this.scrollDown=true};t.prototype.componentDidUpdate=function e(){this.scroll()};t.prototype.handleToggleAction=function e(t){this.props.dispatch(w(t))};t.prototype.handleToggleConsecutiveAction=function e(t){var r=this.props;var a=r.monitorState;var n=r.actionsById;var i=a.consecutiveToggleStartId;if(i&&n[i]){var s=this.props.skippedActionIds;var o=Math.min(i,t);var c=Math.max(i,t);var l=s.indexOf(i)>-1;this.props.dispatch(I(o,c+1,l));this.props.dispatch((0,p.startConsecutiveToggle)(null))}else t>0&&this.props.dispatch((0,p.startConsecutiveToggle)(t))};t.prototype.getTheme=function e(){var t=this.props.theme;if("string"!==typeof t)return t;if("undefined"!==typeof d[t])return d[t];console.warn("DevTools theme "+t+" not found, defaulting to nicinabox");return d.nicinabox};t.prototype.getRef=function e(t){this.node=t};t.prototype.render=function e(){var t=this.getTheme();var r=this.props.monitorState.consecutiveToggleStartId;var n=this.props;var s=n.dispatch;var o=n.actionsById;var c=n.skippedActionIds;var l=n.stagedActionIds;var u=n.computedStates;var d=n.currentStateIndex;var v=n.select;var p=n.expandActionRoot;var h=n.expandStateRoot;var f=n.markStateDiff;var m={theme:t,actionsById:o,skippedActionIds:c,stagedActionIds:l,computedStates:u,currentStateIndex:d,consecutiveToggleStartId:r,select:v,expandActionRoot:p,expandStateRoot:h,markStateDiff:f,onActionClick:this.handleToggleAction,onActionShiftClick:this.handleToggleConsecutiveAction};return i.default.createElement("div",{style:a({},T.container,{backgroundColor:t.base00})},!this.props.hideMainButtons&&i.default.createElement(b.default,{theme:t,dispatch:s,hasStates:u.length>1,hasSkippedActions:c.length>0}),i.default.createElement("div",{style:this.props.hideMainButtons?T.elements:a({},T.elements,{top:30}),ref:this.getRef},i.default.createElement(_.default,m)))};return t}(n.Component);N.update=f.default;N.propTypes={dispatch:o.default.func,computedStates:o.default.array,actionsById:o.default.object,stagedActionIds:o.default.array,skippedActionIds:o.default.array,monitorState:o.default.shape({initialScrollTop:o.default.number,consecutiveToggleStartId:o.default.number}),preserveScrollTop:o.default.bool,select:o.default.func,theme:o.default.oneOfType([o.default.object,o.default.string]),expandActionRoot:o.default.bool,expandStateRoot:o.default.bool,markStateDiff:o.default.bool,hideMainButtons:o.default.bool};N.defaultProps={select:function e(t){return t},theme:"nicinabox",preserveScrollTop:true,expandActionRoot:true,expandStateRoot:true,markStateDiff:false};t.default=N},9522:function(e,t,r){"use strict";var a=r(66);var n=r(36);var i=r(9523);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},9523:function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},9524:function(e,t,r){"use strict";t.__esModule=true;t["default"]=a;function a(e,t){if(e===t)return true;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return false;var r=Object.keys(e);var a=Object.keys(t);if(r.length!==a.length)return false;var n=Object.prototype.hasOwnProperty.bind(t);for(var i=0;i<r.length;i++)if(!n(r[i])||e[r[i]]!==t[r[i]])return false;return true}e.exports=t["default"]},9525:function(e,t,r){"use strict";t.__esModule=true;function a(e){return e&&e.__esModule?e["default"]:e}function n(e,t){var r=t({},e);delete r["default"];return r}function i(e,t){var r=Object.getOwnPropertyNames(t);for(var a=0;a<r.length;a++){var n=r[a];var i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}var s=r(9411);i(t,n(s,i));var o=r(9563);t.nicinabox=a(o)},9526:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};e.exports=t["default"]},9527:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};e.exports=t["default"]},9528:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};e.exports=t["default"]},9529:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};e.exports=t["default"]},9530:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};e.exports=t["default"]},9531:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};e.exports=t["default"]},9532:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};e.exports=t["default"]},9533:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};e.exports=t["default"]},9534:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};e.exports=t["default"]},9535:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};e.exports=t["default"]},9536:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};e.exports=t["default"]},9537:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};e.exports=t["default"]},9538:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};e.exports=t["default"]},9539:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};e.exports=t["default"]},9540:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};e.exports=t["default"]},9541:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};e.exports=t["default"]},9542:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};e.exports=t["default"]},9543:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};e.exports=t["default"]},9544:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};e.exports=t["default"]},9545:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};e.exports=t["default"]},9546:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};e.exports=t["default"]},9547:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};e.exports=t["default"]},9548:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};e.exports=t["default"]},9549:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};e.exports=t["default"]},9550:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};e.exports=t["default"]},9551:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};e.exports=t["default"]},9552:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};e.exports=t["default"]},9553:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};e.exports=t["default"]},9554:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};e.exports=t["default"]},9555:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};e.exports=t["default"]},9556:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};e.exports=t["default"]},9557:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};e.exports=t["default"]},9558:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};e.exports=t["default"]},9559:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};e.exports=t["default"]},9560:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};e.exports=t["default"]},9561:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};e.exports=t["default"]},9562:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};e.exports=t["default"]},9563:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"};e.exports=t["default"]},9564:function(e,t,r){"use strict";t.__esModule=true;t.default=s;var a=r(9412);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=arguments[2];if(!e.preserveScrollTop)return 0;return r.type===a.UPDATE_SCROLL_TOP?r.scrollTop:t}function i(e,t,r){return r.type===a.START_CONSECUTIVE_TOGGLE?r.id:t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=arguments[2];return{initialScrollTop:n(e,t.initialScrollTop,r),consecutiveToggleStartId:i(e,t.consecutiveToggleStartId,r)}}},9565:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(12159);var i=p(n);var s=r(9369);var o=p(s);var c=r(9362);var l=p(c);var u=r(9370);var d=r(9566);var v=p(d);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=u.ActionCreators.reset;var g=u.ActionCreators.rollback;var _=u.ActionCreators.commit;var y=u.ActionCreators.sweep;var O={textAlign:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderColor:"transparent",zIndex:1,display:"flex",flexDirection:"row"};var k=function(e){m(t,e);function t(r){h(this,t);var a=f(this,e.call(this,r));a.shouldComponentUpdate=l.default;a.handleReset=a.handleReset.bind(a);a.handleRollback=a.handleRollback.bind(a);a.handleSweep=a.handleSweep.bind(a);a.handleCommit=a.handleCommit.bind(a);return a}t.prototype.handleRollback=function e(){this.props.dispatch(g())};t.prototype.handleSweep=function e(){this.props.dispatch(y())};t.prototype.handleCommit=function e(){this.props.dispatch(_())};t.prototype.handleReset=function e(){this.props.dispatch(b())};t.prototype.render=function e(){var t=this.props;var r=t.theme;var n=t.hasStates;var s=t.hasSkippedActions;return i.default.createElement("div",{style:a({},O,{borderColor:r.base02})},i.default.createElement(v.default,{theme:r,onClick:this.handleReset,enabled:true},"Reset"),i.default.createElement(v.default,{theme:r,onClick:this.handleRollback,enabled:n},"Revert"),i.default.createElement(v.default,{theme:r,onClick:this.handleSweep,enabled:s},"Sweep"),i.default.createElement(v.default,{theme:r,onClick:this.handleCommit,enabled:n},"Commit"))};return t}(n.Component);k.propTypes={dispatch:o.default.func,theme:o.default.object};t.default=k},9566:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(12159);var i=u(n);var s=r(9567);var o=u(s);var c=r(9362);var l=u(c);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h={base:{cursor:"pointer",fontWeight:"bold",borderRadius:3,padding:4,marginLeft:3,marginRight:3,marginTop:5,marginBottom:5,flexGrow:1,display:"inline-block",fontSize:"0.8em",color:"white",textDecoration:"none"}};var f=function(e){p(t,e);function t(r){d(this,t);var a=v(this,e.call(this,r));a.shouldComponentUpdate=l.default;a.handleMouseEnter=a.handleMouseEnter.bind(a);a.handleMouseLeave=a.handleMouseLeave.bind(a);a.handleMouseDown=a.handleMouseDown.bind(a);a.handleMouseUp=a.handleMouseUp.bind(a);a.onClick=a.onClick.bind(a);a.state={hovered:false,active:false};return a}t.prototype.handleMouseEnter=function e(){this.setState({hovered:true})};t.prototype.handleMouseLeave=function e(){this.setState({hovered:false})};t.prototype.handleMouseDown=function e(){this.setState({active:true})};t.prototype.handleMouseUp=function e(){this.setState({active:false})};t.prototype.onClick=function e(){if(!this.props.enabled)return;this.props.onClick&&this.props.onClick()};t.prototype.render=function e(){var t=a({},h.base,{backgroundColor:this.props.theme.base02});this.props.enabled&&this.state.hovered&&(t=a({},t,{backgroundColor:(0,o.default)(this.props.theme.base02,.2)}));this.props.enabled||(t=a({},t,{opacity:.2,cursor:"text",backgroundColor:"transparent"}));return i.default.createElement("a",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.onClick,style:t},this.props.children)};return t}(i.default.Component);t.default=f},9567:function(e,t,r){"use strict";t.__esModule=true;t.default=function(e,t){var r=String(e).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r.replace(/(.)/g,"$1$1"));var a=t||0;var n="#";var i=void 0;for(var s=0;s<3;++s){i=parseInt(r.substr(2*s,2),16);i=Math.round(Math.min(Math.max(0,i+i*a),255)).toString(16);n+=("00"+i).substr(i.length)}return n}},9568:function(e,t,r){"use strict";t.__esModule=true;var a=r(12159);var n=d(a);var i=r(9369);var s=d(i);var o=r(9569);var c=d(o);var l=r(9362);var u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){h(t,e);function t(){var r,a,n;v(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=(r=(a=p(this,e.call.apply(e,[this].concat(s))),a),a.shouldComponentUpdate=u.default,r),p(a,n)}t.prototype.render=function e(){var t=[];var r=this.props;var a=r.theme;var i=r.actionsById;var s=r.computedStates;var o=r.currentStateIndex;var l=r.consecutiveToggleStartId;var u=r.select;var d=r.skippedActionIds;var v=r.stagedActionIds;var p=r.expandActionRoot;var h=r.expandStateRoot;var f=r.markStateDiff;var m=r.onActionClick;var b=r.onActionShiftClick;for(var g=0;g<v.length;g++){var _=v[g];var y=i[_].action;var O=s[g];var k=O.state;var j=O.error;var C=void 0;g>0&&(C=s[g-1].state);t.push(n.default.createElement(c.default,{key:_,theme:a,select:u,action:y,actionId:_,state:k,previousState:C,collapsed:d.indexOf(_)>-1,inFuture:g>o,selected:l===g,error:j,expandActionRoot:p,expandStateRoot:h,markStateDiff:f,onActionClick:m,onActionShiftClick:b}))}return n.default.createElement("div",null,t)};return t}(a.Component);f.propTypes={actionsById:s.default.object,computedStates:s.default.array,stagedActionIds:s.default.array,skippedActionIds:s.default.array,currentStateIndex:s.default.number,consecutiveToggleStartId:s.default.number,select:s.default.func.isRequired,onActionClick:s.default.func.isRequired,theme:s.default.oneOfType([s.default.object,s.default.string]),expandActionRoot:s.default.bool,expandStateRoot:s.default.bool};t.default=f},9569:function(e,t,r){"use strict";t.__esModule=true;var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var i=r(12159);var s=f(i);var o=r(9369);var c=f(o);var l=r(9413);var u=f(l);var d=r(9596);var v=f(d);var p=r(9362);var h=f(p);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _={entry:{display:"block",WebkitUserSelect:"none"},root:{marginLeft:0}};var y=function e(t,r){return r.reduce(function(e,t){return e&&e[t]},t)};var O=function e(t,r,a){var n=[].concat(a).reverse().slice(1);return y(t,n)===y(r,n)};var k=function(e){g(t,e);function t(r){m(this,t);var a=b(this,e.call(this,r));a.shouldComponentUpdate=h.default;a.handleActionClick=a.handleActionClick.bind(a);a.shouldExpandNode=a.shouldExpandNode.bind(a);return a}t.prototype.printState=function e(t,r){var i=this;var o=r;if(!o)try{var c=function(){var e=i.props.select(t);var r=void 0;i.props.markStateDiff?function(){var t="undefined"!==typeof i.props.previousState?i.props.select(i.props.previousState):void 0;var a=function r(a,s,o){var c=a.style;return{style:n({},c,{backgroundColor:O(e,t,o)?"transparent":i.props.theme.base01})}};var s=function e(t,r){var a=t.style;return{style:n({},a,r.length>1?{}:_.root)}};r={extend:i.props.theme,tree:_.tree,value:a,nestedNode:s}}():r=i.props.theme;return{v:s.default.createElement(u.default,{theme:r,data:e,invertTheme:false,keyPath:["state"],shouldExpandNode:i.shouldExpandNode})}}();if("object"===("undefined"===typeof c?"undefined":a(c)))return c.v}catch(e){o="Error selecting state."}return s.default.createElement("div",{style:{color:this.props.theme.base08,paddingTop:20,paddingLeft:30,paddingRight:30,paddingBottom:35}},o)};t.prototype.handleActionClick=function e(t){var r=this.props;var a=r.actionId;var n=r.onActionClick;var i=r.onActionShiftClick;a>0&&(t.shiftKey?i(a):n(a))};t.prototype.shouldExpandNode=function e(t,r,a){return this.props.expandStateRoot&&0===a};t.prototype.render=function e(){var t=this.props;var r=t.actionId;var a=t.error;var i=t.action;var o=t.state;var c=t.collapsed;var l=t.selected;var u=t.inFuture;var d={opacity:c?.5:1,cursor:r>0?"pointer":"default"};return s.default.createElement("div",{style:{opacity:l?.4:u?.6:1,textDecoration:c?"line-through":"none",color:this.props.theme.base06}},s.default.createElement(v.default,{theme:this.props.theme,collapsed:c,action:i,expandActionRoot:this.props.expandActionRoot,onClick:this.handleActionClick,style:n({},_.entry,d)}),!c&&s.default.createElement("div",{style:{paddingLeft:16}},this.printState(o,a)))};return t}(i.Component);k.propTypes={state:c.default.object.isRequired,action:c.default.object.isRequired,actionId:c.default.number.isRequired,select:c.default.func.isRequired,inFuture:c.default.bool,error:c.default.string,onActionClick:c.default.func.isRequired,onActionShiftClick:c.default.func.isRequired,collapsed:c.default.bool,selected:c.default.bool,expandActionRoot:c.default.bool,expandStateRoot:c.default.bool};t.default=k},9570:function(e,t,r){"use strict";var a=r(66);var n=r(36);var i=r(9571);e.exports=function(){function e(e,t,r,a,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=a;r.PropTypes=r;return r}},9571:function(e,t,r){"use strict";var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=a},9572:function(e,t,r){"use strict";t.__esModule=true;var a=r(1336);var n=i(a);t["default"]=s;function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&"function"===typeof e[n["default"]])return"Iterable";return t}},9573:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=f(a);var i=r(374);var s=f(i);var o=r(9415);var c=f(o);var l=r(12159);var u=f(l);var d=r(9357);var v=f(d);var p=r(9382);var h=f(p);function f(e){return e&&e.__esModule?e:{default:e}}function m(e){var t=(0,c["default"])(e).length;return t+" "+(1!==t?"keys":"key")}var b=function e(t){var r=t.data,a=(0,s["default"])(t,["data"]);return u["default"].createElement(h["default"],(0,n["default"])({},a,{data:r,nodeType:"Object",nodeTypeIndicator:"Error"===a.nodeType?"Error()":"{}",createItemString:m,expandable:(0,c["default"])(r).length>0}))};b.propTypes={data:v["default"].object,nodeType:v["default"].string};t["default"]=b},9574:function(e,t,r){r(9575);var a=r(7302).Object;e.exports=function e(t){return a.getOwnPropertyNames(t)}},9575:function(e,t,r){r(7328)("getOwnPropertyNames",function(){return r(7375).f})},9576:function(e,t,r){"use strict";t.__esModule=true;var a=r(1399);var n=l(a);var i=r(9415);var s=l(i);var o=r(952);var c=l(o);t["default"]=h;function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("Object"===e)return(0,c["default"])(t).length;if("Array"===e)return t.length;return Infinity}function d(e){return"function"===typeof e.set}function v(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Infinity;var o=void 0;if("Object"===e){var c=(0,s["default"])(t);"undefined"!==typeof r&&c.sort(r);c=c.slice(a,i+1);o={entries:c.map(function(e){return{key:e,value:t[e]}})}}else if("Array"===e)o={entries:t.slice(a,i+1).map(function(e,t){return{key:t+a,value:e}})};else{var l=0;var u=[];var v=true;var p=d(t);for(var h=t,f=Array.isArray(h),m=0,h=f?h:(0,n["default"])(h);;){var b;if(f){if(m>=h.length)break;b=h[m++]}else{m=h.next();if(m.done)break;b=m.value}var g=b;if(l>i){v=false;break}a<=l&&(p&&Array.isArray(g)?"string"===typeof g[0]||"number"===typeof g[0]?u.push({key:g[0],value:g[1]}):u.push({key:"[entry "+l+"]",value:{"[key]":g[0],"[value]":g[1]}}):u.push({key:l,value:g}));l++}o={hasMore:!v,entries:u}}return o}function p(e,t,r){var a=[];while(t-e>r*r)r*=r;for(var n=e;n<=t;n+=r)a.push({from:n,to:Math.min(t,n+r-1)});return a}function h(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Infinity;var s=v.bind(null,e,t,r);if(!a)return s().entries;var o=i<Infinity;var c=Math.min(i-n,u(e,t));if("Iterable"!==e){if(c<=a||a<7)return s(n,i).entries}else if(c<=a&&!o)return s(n,i).entries;var l=void 0;if("Iterable"===e){var d=s(n,n+a-1),h=d.hasMore,f=d.entries;l=h?[].concat(f,p(n+a,n+2*a-1,a)):f}else l=o?p(n,i,a):[].concat(s(0,a-5).entries,p(a-4,c-5,a),s(c-4,c-1).entries);return l}},9577:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=b(a);var i=r(72);var s=b(i);var o=r(95);var c=b(o);var l=r(96);var u=b(l);var d=r(12159);var v=b(d);var p=r(9357);var h=b(p);var f=r(9416);var m=b(f);function b(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,u["default"])(t,e);function t(r){(0,s["default"])(this,t);var a=(0,c["default"])(this,e.call(this,r));a.state={expanded:false};a.handleClick=a.handleClick.bind(a);return a}t.prototype.render=function e(){var t=this.props,r=t.styling,a=t.from,i=t.to,s=t.renderChildNodes,o=t.nodeType;return this.state.expanded?v["default"].createElement("div",r("itemRange",this.state.expanded),s(this.props,a,i)):v["default"].createElement("div",(0,n["default"])({},r("itemRange",this.state.expanded),{onClick:this.handleClick}),v["default"].createElement(m["default"],{nodeType:o,styling:r,expanded:false,onClick:this.handleClick,arrowStyle:"double"}),a+" ... "+i)};t.prototype.handleClick=function e(){this.setState({expanded:!this.state.expanded})};return t}(v["default"].Component);g.propTypes={styling:h["default"].func.isRequired,from:h["default"].number.isRequired,to:h["default"].number.isRequired,renderChildNodes:h["default"].func.isRequired,nodeType:h["default"].string.isRequired};t["default"]=g},9578:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=p(a);var i=r(374);var s=p(i);var o=r(12159);var c=p(o);var l=r(9357);var u=p(l);var d=r(9382);var v=p(d);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return e.length+" "+(1!==e.length?"items":"item")}var f=function e(t){var r=t.data,a=(0,s["default"])(t,["data"]);return c["default"].createElement(v["default"],(0,n["default"])({},a,{data:r,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:h,expandable:r.length>0}))};f.propTypes={data:u["default"].array};t["default"]=f},9579:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=f(a);var i=r(374);var s=f(i);var o=r(1399);var c=f(o);var l=r(9580);var u=f(l);t["default"]=b;var d=r(12159);var v=f(d);var p=r(9382);var h=f(p);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r=0;var a=false;if((0,u["default"])(e.size))r=e.size;else for(var n=e,i=Array.isArray(n),s=0,n=i?n:(0,c["default"])(n);;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{s=n.next();if(s.done)break;o=s.value}var l=o;if(t&&r+1>t){a=true;break}r+=1}return(a?">":"")+r+" "+(1!==r?"entries":"entry")}function b(e){var t=(0,s["default"])(e,[]);return v["default"].createElement(h["default"],(0,n["default"])({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:m}))}},9580:function(e,t,r){e.exports={default:r(9581),__esModule:true}},9581:function(e,t,r){r(9582);e.exports=r(7302).Number.isSafeInteger},9582:function(e,t,r){var a=r(7308);var n=r(9583);var i=Math.abs;a(a.S,"Number",{isSafeInteger:function e(t){return n(t)&&i(t)<=9007199254740991}})},9583:function(e,t,r){var a=r(7316);var n=Math.floor;e.exports=function e(t){return!a(t)&&isFinite(t)&&n(t)===t}},9584:function(e,t,r){"use strict";t.__esModule=true;var a=r(12159);var n=o(a);var i=r(9357);var s=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){var r=t.nodeType,a=t.styling,i=t.labelRenderer,s=t.keyPath,o=t.valueRenderer,c=t.value,l=t.valueGetter;return n["default"].createElement("li",a("value",r,s),n["default"].createElement("label",a(["label","valueLabel"],r,s),i(s,r,false,false)),n["default"].createElement("span",a("valueText",r,s),o.apply(void 0,[l(c),c].concat(s))))};c.propTypes={nodeType:s["default"].string.isRequired,styling:s["default"].func.isRequired,labelRenderer:s["default"].func.isRequired,keyPath:s["default"].arrayOf(s["default"].oneOfType([s["default"].string,s["default"].number])).isRequired,valueRenderer:s["default"].func.isRequired,value:s["default"].any,valueGetter:s["default"].func};c.defaultProps={valueGetter:function e(t){return t}};t["default"]=c},9585:function(e,t,r){"use strict";t.__esModule=true;var a=r(189);var n=c(a);var i=r(9417);var s=r(9595);var o=c(s);function c(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){return{BACKGROUND_COLOR:t.base00,TEXT_COLOR:t.base07,STRING_COLOR:t.base0B,DATE_COLOR:t.base0B,NUMBER_COLOR:t.base09,BOOLEAN_COLOR:t.base09,NULL_COLOR:t.base08,UNDEFINED_COLOR:t.base08,FUNCTION_COLOR:t.base08,SYMBOL_COLOR:t.base08,LABEL_COLOR:t.base0D,ARROW_COLOR:t.base0D,ITEM_STRING_COLOR:t.base0B,ITEM_STRING_EXPANDED_COLOR:t.base03}};var u=function e(t){return{String:t.STRING_COLOR,Date:t.DATE_COLOR,Number:t.NUMBER_COLOR,Boolean:t.BOOLEAN_COLOR,Null:t.NULL_COLOR,Undefined:t.UNDEFINED_COLOR,Function:t.FUNCTION_COLOR,Symbol:t.SYMBOL_COLOR}};var d=function e(t){var r=l(t);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:r.BACKGROUND_COLOR},value:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:a.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:r.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function e(t,a){var i=t.style;return{style:(0,n["default"])({},i,{color:u(r)[a]})}},itemRange:function e(t,a){return{style:{paddingTop:a?0:"0.25em",cursor:"pointer",color:r.LABEL_COLOR}}},arrow:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:a?"rotateZ(90deg)":"rotateZ(0deg)",transform:a?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function e(t,r){var a=t.style;return{style:(0,n["default"])({},a,{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===r?"1em":0,cursor:"pointer"})}},arrowSign:{color:r.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function e(t,r,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{position:"relative",paddingTop:"0.25em",marginLeft:r.length>1?"0.875em":0,paddingLeft:s?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function e(t,r,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{margin:0,padding:0,WebkitUserSelect:s?"inherit":"text",MozUserSelect:s?"inherit":"text",cursor:s?"pointer":"default"})}},nestedNodeItemString:function e(t,a,i,s){var o=t.style;return{style:(0,n["default"])({},o,{paddingLeft:"0.5em",cursor:"default",color:s?r.ITEM_STRING_EXPANDED_COLOR:r.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function e(t,r,a){var i=t.style;return{style:(0,n["default"])({},i,{padding:0,margin:0,listStyle:"none",display:a?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}};t["default"]=(0,i.createStyling)(d,{defaultBase16:o["default"]})},9586:function(e,t,r){(function(t){var r="Expected a function";var a="__lodash_placeholder__";var n=1,i=2,s=4,o=8,c=16,l=32,u=64,d=128,v=256,p=512;var h=1/0,f=9007199254740991,m=1.7976931348623157e308,b=NaN;var g=[["ary",d],["bind",n],["bindKey",i],["curry",o],["curryRight",c],["flip",p],["partial",l],["partialRight",u],["rearg",v]];var _="[object Function]",y="[object GeneratorFunction]",O="[object Symbol]";var k=/[\\^$.*+?()[\]{}|]/g;var j=/^\s+|\s+$/g;var C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,E=/\{\n\/\* \[wrapped with (.+)\] \*/,S=/,? & /;var w=/^[-+]0x[0-9a-f]+$/i;var I=/^0b[01]+$/i;var T=/^\[object .+?Constructor\]$/;var N=/^0o[0-7]+$/i;var R=/^(?:0|[1-9]\d*)$/;var A=parseInt;var M="object"==typeof t&&t&&t.Object===Object&&t;var P="object"==typeof self&&self&&self.Object===Object&&self;var x=M||P||Function("return this")();function D(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function F(e,t){var r=-1,a=e?e.length:0;while(++r<a)if(false===t(e[r],r,e))break;return e}function L(e,t){var r=e?e.length:0;return!!r&&U(e,t,0)>-1}function B(e,t,r,a){var n=e.length,i=r+(a?1:-1);while(a?i--:++i<n)if(t(e[i],i,e))return i;return-1}function U(e,t,r){if(t!==t)return B(e,q,r);var a=r-1,n=e.length;while(++a<n)if(e[a]===t)return a;return-1}function q(e){return e!==e}function H(e,t){var r=e.length,a=0;while(r--)e[r]===t&&a++;return a}function W(e,t){return null==e?void 0:e[t]}function G(e){var t=false;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e,t){var r=-1,n=e.length,i=0,s=[];while(++r<n){var o=e[r];if(o===t||o===a){e[r]=a;s[i++]=r}}return s}var z=Function.prototype,K=Object.prototype;var Q=x["__core-js_shared__"];var Y=function(){var e=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var J=z.toString;var Z=K.hasOwnProperty;var X=K.toString;var $=RegExp("^"+J.call(Z).replace(k,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ee=Object.create;var te=Math.max,re=Math.min;var ae=function(){var e=be(Object,"defineProperty"),t=be.name;return t&&t.length>2?e:void 0}();function ne(e){return Ie(e)?ee(e):{}}function ie(e){if(!Ie(e)||Oe(e))return false;var t=we(e)||G(e)?$:T;return t.test(Ce(e))}function se(e,t,r,a){var n=-1,i=e.length,s=r.length,o=-1,c=t.length,l=te(i-s,0),u=Array(c+l),d=!a;while(++o<c)u[o]=t[o];while(++n<s)(d||n<i)&&(u[r[n]]=e[n]);while(l--)u[o++]=e[n++];return u}function oe(e,t,r,a){var n=-1,i=e.length,s=-1,o=r.length,c=-1,l=t.length,u=te(i-o,0),d=Array(u+l),v=!a;while(++n<u)d[n]=e[n];var p=n;while(++c<l)d[p+c]=t[c];while(++s<o)(v||n<i)&&(d[p+r[s]]=e[n++]);return d}function ce(e,t){var r=-1,a=e.length;t||(t=Array(a));while(++r<a)t[r]=e[r];return t}function le(e,t,r){var a=t&n,i=ue(e);function s(){var t=this&&this!==x&&this instanceof s?i:e;return t.apply(a?r:this,arguments)}return s}function ue(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ne(e.prototype),a=e.apply(r,t);return Ie(a)?a:r}}function de(e,t,r){var a=ue(e);function n(){var i=arguments.length,s=Array(i),o=i,c=me(n);while(o--)s[o]=arguments[o];var l=i<3&&s[0]!==c&&s[i-1]!==c?[]:V(s,c);i-=l.length;if(i<r)return he(e,t,ve,n.placeholder,void 0,s,l,void 0,void 0,r-i);var u=this&&this!==x&&this instanceof n?a:e;return D(u,this,s)}return n}function ve(e,t,r,a,s,l,u,v,h,f){var m=t&d,b=t&n,g=t&i,_=t&(o|c),y=t&p,O=g?void 0:ue(e);function k(){var n=arguments.length,i=Array(n),o=n;while(o--)i[o]=arguments[o];if(_)var c=me(k),d=H(i,c);a&&(i=se(i,a,s,_));l&&(i=oe(i,l,u,_));n-=d;if(_&&n<f){var p=V(i,c);return he(e,t,ve,k.placeholder,r,i,p,v,h,f-n)}var j=b?r:this,C=g?j[e]:e;n=i.length;v?i=ke(i,v):y&&n>1&&i.reverse();m&&h<n&&(i.length=h);this&&this!==x&&this instanceof k&&(C=O||ue(C));return C.apply(j,i)}return k}function pe(e,t,r,a){var i=t&n,s=ue(e);function o(){var t=-1,n=arguments.length,c=-1,l=a.length,u=Array(l+n),d=this&&this!==x&&this instanceof o?s:e;while(++c<l)u[c]=a[c];while(n--)u[c++]=arguments[++t];return D(d,i?r:this,u)}return o}function he(e,t,r,a,c,d,v,p,h,f){var m=t&o,b=m?v:void 0,g=m?void 0:v,_=m?d:void 0,y=m?void 0:d;t|=m?l:u;t&=~(m?u:l);t&s||(t&=~(n|i));var O=r(e,t,c,_,b,y,g,p,h,f);O.placeholder=a;return je(O,e,t)}function fe(e,t,a,s,d,v,p,h){var f=t&i;if(!f&&"function"!=typeof e)throw new TypeError(r);var m=s?s.length:0;if(!m){t&=~(l|u);s=d=void 0}p=void 0===p?p:te(Ae(p),0);h=void 0===h?h:Ae(h);m-=d?d.length:0;if(t&u){var b=s,g=d;s=d=void 0}var _=[e,t,a,s,d,b,g,v,p,h];e=_[0];t=_[1];a=_[2];s=_[3];d=_[4];h=_[9]=null==_[9]?f?0:e.length:te(_[9]-m,0);!h&&t&(o|c)&&(t&=~(o|c));if(t&&t!=n)y=t==o||t==c?de(e,t,h):t!=l&&t!=(n|l)||d.length?ve.apply(void 0,_):pe(e,t,a,s);else var y=le(e,t,a);return je(y,e,t)}function me(e){var t=e;return t.placeholder}function be(e,t){var r=W(e,t);return ie(r)?r:void 0}function ge(e){var t=e.match(E);return t?t[1].split(S):[]}function _e(e,t){var r=t.length,a=r-1;t[a]=(r>1?"& ":"")+t[a];t=t.join(r>2?", ":" ");return e.replace(C,"{\n/* [wrapped with "+t+"] */\n")}function ye(e,t){t=null==t?f:t;return!!t&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function Oe(e){return!!Y&&Y in e}function ke(e,t){var r=e.length,a=re(t.length,r),n=ce(e);while(a--){var i=t[a];e[a]=ye(i,r)?n[i]:void 0}return e}var je=ae?function(e,t,r){var a=t+"";return ae(e,"toString",{configurable:true,enumerable:false,value:Pe(_e(a,Ee(ge(a),r)))})}:xe;function Ce(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ee(e,t){F(g,function(r){var a="_."+r[0];t&r[1]&&!L(e,a)&&e.push(a)});return e.sort()}function Se(e,t,r){t=r?void 0:t;var a=fe(e,o,void 0,void 0,void 0,void 0,void 0,t);a.placeholder=Se.placeholder;return a}function we(e){var t=Ie(e)?X.call(e):"";return t==_||t==y}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Te(e){return!!e&&"object"==typeof e}function Ne(e){return"symbol"==typeof e||Te(e)&&X.call(e)==O}function Re(e){if(!e)return 0===e?e:0;e=Me(e);if(e===h||e===-h){var t=e<0?-1:1;return t*m}return e===e?e:0}function Ae(e){var t=Re(e),r=t%1;return t===t?r?t-r:t:0}function Me(e){if("number"==typeof e)return e;if(Ne(e))return b;if(Ie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(j,"");var r=I.test(e);return r||N.test(e)?A(e.slice(2),r?2:8):w.test(e)?b:+e}function Pe(e){return function(){return e}}function xe(e){return e}Se.placeholder={};e.exports=Se}).call(t,r(7))},9587:function(e,t,r){var a=r(9383);function n(e){var t=Math.round(a(e,0,255));var r=t.toString(16);return 1==r.length?"0"+r:r}function i(e){var t=4===e.length?n(255*e[3]):"";return"#"+n(e[0])+n(e[1])+n(e[2])+t}e.exports=i},9588:function(e,t,r){var a=r(9589);var n=r(9590);var i=r(9591);var s=r(9592);function o(e){var t=a(e);var r=s(t);4===t.length&&r.push(t[3]);return r}var c={"#":n,hsl:o,rgb:i};function l(e){for(var t in c)if(0===e.indexOf(t))return c[t](e)}l.rgb=i;l.hsl=a;l.hex=n;e.exports=l},9589:function(e,t,r){var a=r(9418);var n=r(9383);function i(e,t){e=parseFloat(e);switch(t){case 0:return n(e,0,360);case 1:case 2:return n(e,0,100);case 3:return n(e,0,1)}}function s(e){return a(e).map(i)}e.exports=s},9590:function(e,t){function r(e){var t="#";for(var r=1;r<e.length;r++){var a=e.charAt(r);t+=a+a}return t}function a(e){4!==e.length&&5!==e.length||(e=r(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var a=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(a)}return t}e.exports=a},9591:function(e,t,r){var a=r(9418);var n=r(9383);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*n(parseInt(e,10),0,100)/100):n(parseInt(e,10),0,255):n(parseFloat(e),0,1)}function s(e){return a(e).map(i)}e.exports=s},9592:function(e,t){function r(e){var t=e[0]/360,r=e[1]/100,a=e[2]/100,n,i,s,o,c;if(0==r){c=255*a;return[c,c,c]}i=a<.5?a*(1+r):a+r-a*r;n=2*a-i;o=[0,0,0];for(var l=0;l<3;l++){s=t+1/3*-(l-1);s<0&&s++;s>1&&s--;c=6*s<1?n+6*(i-n)*s:2*s<1?i:3*s<2?n+(i-n)*(2/3-s)*6:n;o[l]=255*c}return o}e.exports=r},9593:function(e,t,r){(function(t){var r="Expected a function";var a=9007199254740991;var n="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]";var o="object"==typeof t&&t&&t.Object===Object&&t;var c="object"==typeof self&&self&&self.Object===Object&&self;var l=o||c||Function("return this")();function u(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function d(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var v=Object.prototype;var p=v.hasOwnProperty;var h=v.toString;var f=l.Symbol,m=v.propertyIsEnumerable,b=f?f.isConcatSpreadable:void 0;var g=Math.max;function _(e,t,r,a,n){var i=-1,s=e.length;r||(r=k);n||(n=[]);while(++i<s){var o=e[i];t>0&&r(o)?t>1?_(o,t-1,r,a,n):d(n,o):a||(n[n.length]=o)}return n}function y(e,t){t=g(void 0===t?e.length-1:t,0);return function(){var r=arguments,a=-1,n=g(r.length-t,0),i=Array(n);while(++a<n)i[a]=r[t+a];a=-1;var s=Array(t+1);while(++a<t)s[a]=r[a];s[t]=i;return u(e,this,s)}}function O(e){return y(function(t){t=_(t,1);var a=t.length,n=a;e&&t.reverse();while(n--)if("function"!=typeof t[n])throw new TypeError(r);return function(){var e=0,r=a?t[e].apply(this,arguments):arguments[0];while(++e<a)r=t[e].call(this,r);return r}})}function k(e){return C(e)||j(e)||!!(b&&e&&e[b])}function j(e){return S(e)&&p.call(e,"callee")&&(!m.call(e,"callee")||h.call(e)==n)}var C=Array.isArray;function E(e){return null!=e&&I(e.length)&&!w(e)}function S(e){return N(e)&&E(e)}function w(e){var t=T(e)?h.call(e):"";return t==i||t==s}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){return!!e&&"object"==typeof e}var R=O();e.exports=R}).call(t,r(7))},9594:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.yuv2rgb=a;t.rgb2yuv=n;function a(e){var t=e[0],r=e[1],a=e[2],n,i,s;n=1*t+0*r+1.13983*a;i=1*t+-.39465*r+-.5806*a;s=1*t+2.02311*r+0*a;n=Math.min(Math.max(0,n),1);i=Math.min(Math.max(0,i),1);s=Math.min(Math.max(0,s),1);return[255*n,255*i,255*s]}function n(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255;var n=.299*t+.587*r+.114*a;var i=-.14713*t+-.28886*r+.436*a;var s=.615*t+-.51499*r+-.10001*a;return[n,i,s]}},9595:function(e,t,r){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}},9596:function(e,t,r){"use strict";t.__esModule=true;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};var n=r(12159);var i=c(n);var s=r(9413);var o=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r={};for(var a in e){if(t.indexOf(a)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,a))continue;r[a]=e[a]}return r}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p={actionBar:{paddingTop:8,paddingBottom:7,paddingLeft:16},payload:{margin:0,paddingLeft:16,overflow:"auto"}};var h=function(e){v(t,e);function t(r){u(this,t);var a=d(this,e.call(this,r));a.shouldExpandNode=a.shouldExpandNode.bind(a);return a}t.prototype.renderPayload=function e(t){return i.default.createElement("div",{style:a({},p.payload,{backgroundColor:this.props.theme.base00})},Object.keys(t).length>0?i.default.createElement(o.default,{theme:this.props.theme,invertTheme:false,keyPath:["action"],data:t,shouldExpandNode:this.shouldExpandNode}):"")};t.prototype.shouldExpandNode=function e(t,r,a){return this.props.expandActionRoot&&0===a};t.prototype.render=function e(){var t=this.props.action;var r=t.type;var n=l(t,["type"]);return i.default.createElement("div",{style:a({backgroundColor:this.props.theme.base02,color:this.props.theme.base06},this.props.style)},i.default.createElement("div",{style:p.actionBar,onClick:this.props.onClick},null!==r&&r.toString()),this.props.collapsed?"":this.renderPayload(n))};return t}(n.Component);t.default=h},9597:function(e,t,r){(function(t){var r="Expected a function";var a=NaN;var n="[object Symbol]";var i=/^\s+|\s+$/g;var s=/^[-+]0x[0-9a-f]+$/i;var o=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var l=parseInt;var u="object"==typeof t&&t&&t.Object===Object&&t;var d="object"==typeof self&&self&&self.Object===Object&&self;var v=u||d||Function("return this")();var p=Object.prototype;var h=p.toString;var f=Math.max,m=Math.min;var b=function(){return v.Date.now()};function g(e,t,a){var n,i,s,o,c,l,u=0,d=false,v=false,p=true;if("function"!=typeof e)throw new TypeError(r);t=k(t)||0;if(_(a)){d=!!a.leading;v="maxWait"in a;s=v?f(k(a.maxWait)||0,t):s;p="trailing"in a?!!a.trailing:p}function h(t){var r=n,a=i;n=i=void 0;u=t;o=e.apply(a,r);return o}function g(e){u=e;c=setTimeout(j,t);return d?h(e):o}function y(e){var r=e-l,a=e-u,n=t-r;return v?m(n,s-a):n}function O(e){var r=e-l,a=e-u;return void 0===l||r>=t||r<0||v&&a>=s}function j(){var e=b();if(O(e))return C(e);c=setTimeout(j,y(e))}function C(e){c=void 0;if(p&&n)return h(e);n=i=void 0;return o}function E(){void 0!==c&&clearTimeout(c);u=0;n=l=i=c=void 0}function S(){return void 0===c?o:C(b())}function w(){var e=b(),r=O(e);n=arguments;i=this;l=e;if(r){if(void 0===c)return g(l);if(v){c=setTimeout(j,t);return h(l)}}void 0===c&&(c=setTimeout(j,t));return o}w.cancel=E;w.flush=S;return w}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function O(e){return"symbol"==typeof e||y(e)&&h.call(e)==n}function k(e){if("number"==typeof e)return e;if(O(e))return a;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=o.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):s.test(e)?a:+e}e.exports=g}).call(t,r(7))},974:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});r.d(t,"test",function(){return j});r.d(t,"updateTyping",function(){return C});r.d(t,"clearTyping",function(){return E});r.d(t,"clearTypingCleanupInterval",function(){return S});r.d(t,"bulkClearTyping",function(){return w});r.d(t,"getAllTyping",function(){return A});r.d(t,"getTypingByKey",function(){return M});r.d(t,"getNumberOfRecords",function(){return P});r.d(t,"getTyperIdsInChannel",function(){return x});r.d(t,"removeOldTypingRecords",function(){return D});r.d(t,"memberStartedTyping",function(){return F});r.d(t,"currentUserStartedTyping",function(){return L});r.d(t,"memberEndedTyping",function(){return B});r.d(t,"currentUserEndedTyping",function(){return U});r.d(t,"checkTypingMap",function(){return q});var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(374);var c=r.n(o);var l=r(3);var u=r.n(l);var d=r(1);var v=r.n(d);var p=r(21696);var h=r(234);var f=r(12);var m=r(85);var b=r(1246);var g;var _=m["isConnected"];var y=h["send"];var O=b["b"];var k=b["a"];var j={};Object.defineProperty(j,"isConnected",{get:function e(){return _},set:function e(t){_=t}});Object.defineProperty(j,"send",{get:function e(){return y},set:function e(t){y=t}});Object.defineProperty(j,"legacyMemberTypingStarted",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(j,"legacyMemberTypingEnded",{get:function e(){return k},set:function e(t){k=t}});var C=Object(p["a"])("Update typing timestamp for a given key");C.propTypes={key:u.a.string.isRequired,started:u.a.number.isRequired,model_ob_id:u.a.string.isRequired,member_id:u.a.string.isRequired,member_is_self:u.a.bool};var E=Object(p["a"])("Remove typing activity for a given key");E.propTypes={key:u.a.string.isRequired};var S=Object(p["a"])("Stop the typing cleanup interval because there are no users typing");S.propTypes=null;var w=Object(p["a"])("Remove typing activity for multiple keys");w.propTypes=u.a.arrayOf(u.a.string);var I=5e3;var T=6e3;var N={};var R=Object(p["c"])((g={},n()(g,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=t.key,a=c()(t,["key"]);if(!r)return e;if(e[r])return s()({},e,n()({},r,s()({},e[r],{started:a.started})));return s()({},e,n()({},r,s()({},a)))}),n()(g,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.key;if(!r||!e[r])return e;return v.a.omit(e,r)}),n()(g,w,function(e,t){if(!t||!t.length||!v.a.isArray(t))return e;var r=v.a.omit(e,t);if(Object.keys(r).length===Object.keys(e).length)return e;return r}),g),N);t["default"]=R;var A=Object(p["d"])(function(e){return e&&e.typing});var M=Object(p["d"])(function(e,t){return e&&e.typing&&e.typing[t]});var P=Object(p["d"])(function(e){return e&&e.typing&&Object.keys(e.typing).length});var x=Object(p["d"])(function(e,t){var r=v.a.filter(e&&e.typing,function(e){return e.model_ob_id===t&&!e.member_is_self});return v.a.map(r,"member_id")});var D=Object(p["e"])("remove old typing records",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.now;var n=A(t());var i=v.a.map(n,function(e,t){var r=e.member_is_self?I:T;var n=a-e.started;if(n>=r)return t;return null});i=v.a.compact(i);i.length&&e(w(i))});D.propTypes={now:u.a.number.isRequired};var F=Object(p["e"])("member started typing (also dispatched by currentUserStartedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=t();var s=a+"_"+n;var o=Date.now();var c=!M(i,s);e(C({key:s,started:o,model_ob_id:a,member_id:n,member_is_self:Object(f["getCurrentUserId"])(i)===n}));c&&O(a,n)});F.propTypes={channelId:u.a.string.isRequired,memberId:u.a.string.isRequired};var L=Object(p["e"])("logged in user has started typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;var n=t();if(!_(n))return;if(!a)return;var i=Object(f["getCurrentUserId"])(n);var s=a+"_"+i;if(M(n,s))return;var o={type:"typing",channel:a};e(y(o));e(F({channelId:a,memberId:i}))});L.propTypes={channelId:u.a.string.isRequired};var B=Object(p["e"])("member stopped typing (also dispatched by currentUserEndedTyping)",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId,n=r.memberId;var i=a+"_"+n;e(E({key:i}));k(a,n)});B.propTypes={channelId:u.a.string.isRequired,memberId:u.a.string.isRequired};var U=Object(p["e"])("logged in user has stopped typing",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.channelId;if(!a)return;var n=t();var i=Object(f["getCurrentUserId"])(n);e(B({channelId:a,memberId:i}))});U.propTypes={channelId:u.a.string.isRequired};var q=Object(p["e"])("Periodically update the typing map to look for typing records that have expired, and update legacy of the changes",function(e,t){var r=Date.now();var a=0;var n=A(t());e(D({now:r}));var i=A(t());var s=v.a.difference(Object.keys(n),Object.keys(i));s.forEach(function(e){var t=n[e];k(t.model_ob_id,t.member_id)});a=P(t());a<1&&e(S())})},980:function(e,t,r){"use strict";var a=r(1432);t["a"]=a["a"]},985:function(e,t,r){"use strict";var a=r(20615);var n=r.n(a);var i=r(189);var s=r.n(i);var o=r(1395);var c=r.n(o);var l=r(72);var u=r.n(l);var d=r(73);var v=r.n(d);var p=r(95);var h=r.n(p);var f=r(96);var m=r.n(f);var b=r(3);var g=r.n(b);var _=r(12159);var y=r.n(_);var O=r(8);var k=r.n(O);var j=r(1);var C=r.n(j);var E=r(3274);var S=r(391);var w=r(264);var I=r(379);var T=r(3232);var N=r(3263);var R=r(1007);var A=r(113);var M=r(43);var P=r(211);var x=r(91);var D=r(290);var F=r(384);var L=r(499);var B=r(128);var U=r(297);var q=r(144);var H=r(5);var W=r(21734);var G=r(90);var V=r(1005);var z=r(3184);var K=r(21741);var Q=r(1465);var Y=r(265);var J=r(1494);var Z=r(77);var X=r(60);var $=r(380);var ee=r(478);var te=r(476);var re=r(1552);var ae=r(37);var ne=r(386);var ie=r(22504);var se=r(1490);var oe=r(1498);var ce=r(1499);var le=r(1066);var ue=r(1527);var de=r(1528);var ve=r(1529);var pe=r(1536);var he=r(1538);var fe=r(1547);var me=r(1553);var be=r(1556);var ge=r(20167);var _e=r.n(ge);var ye=new H["b"]("message");var Oe=200;var ke=20;var je="theme_install_button";var Ce={quote:true,pre:true};var Ee={ts:g.a.string,messageNotFound:g.a.bool,channelId:g.a.string,alertType:g.a.string,subtype:g.a.string,text:g.a.string,noSpecials:g.a.bool,theme:g.a.oneOf(["dense","light"]),userId:g.a.string,botId:g.a.string,appId:g.a.string,username:g.a.string,hasAdHocSender:g.a.bool,reactionKey:g.a.string,reactionKeyForInitialFileComment:g.a.string,replies:g.a.arrayOf(g.a.shape({ts:g.a.string,user:g.a.string})),replyCount:g.a.number,replyUsers:g.a.arrayOf(g.a.string),replyUsersCount:g.a.number,latestReply:g.a.string,threadsEverythingPref:g.a.bool,expandInlineImgsPref:g.a.bool,expandNonMediaAttachmentsPref:g.a.bool,threadTs:g.a.string,attachments:g.a.arrayOf(g.a.shape({color:g.a.string,fallback:g.a.string})),fileId:g.a.string,fileIds:g.a.arrayOf(g.a.string),comment:g.a.shape({id:g.a.string,user:g.a.string,comment:g.a.string,is_starred:g.a.bool}),isUpload:g.a.bool,showUser:g.a.bool,isFileFollowup:g.a.bool,isEditing:g.a.bool,isHovered:g.a.bool,maybeStartEditingMessage:g.a.func,edited:g.a.shape({ts:g.a.string,user:g.a.string}),isLast:g.a.bool,rollup:A["a"].Rollup(),logMessage:g.a.func,setUnreadPoint:g.a.func,isStarred:g.a.bool,isStandalone:g.a.bool,isPinned:g.a.bool,currentUserId:g.a.string,pinnedByMemberId:g.a.string,sliHighlight:g.a.shape({loading:g.a.bool,isHighlight:g.a.bool,feedbackOptions:g.a.object,justification:g.a.string,feedback:g.a.string}),isEphemeral:g.a.bool,isDeleting:g.a.bool,icons:g.a.shape({emoji:g.a.string}),botProfile:g.a.object,slackbotFeels:g.a.string,fadeAwayHighlight:g.a.bool,doneHighlighting:g.a.func,isUnprocessed:g.a.bool,showResend:g.a.bool,showCancel:g.a.bool,resendMsg:g.a.func,removeMsg:g.a.func,unfurlLinkCache:g.a.instanceOf(ne["a"]),shouldJumpToTimestamp:g.a.bool,isSelfIm:g.a.bool,isSlackbotIm:g.a.bool,featureTinyspeck:g.a.bool.isRequired,featureFileThreads:g.a.bool.isRequired,featureHideUnfurlUrls:g.a.bool.isRequired,renderFileThread:g.a.bool,channelSessionId:g.a.string,previousMessageIsPinned:g.a.bool,previousMessageIsEphemeral:g.a.bool,previousMessageIsStarred:g.a.bool,previousMessageSubtype:g.a.string,previousMessageSliHighlight:g.a.object,previousMessagePinnedByMemberId:g.a.string,renderActions:g.a.bool,renderActionsOffscreen:g.a.bool,messageContainerType:g.a.string,ariaAssertive:g.a.bool};var Se={ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:j["noop"],edited:null,isLast:false,rollup:null,logMessage:j["noop"],setUnreadPoint:j["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:j["noop"],isUnprocessed:false,showResend:false,showCancel:false,resendMsg:j["noop"],removeMsg:j["noop"],unfurlLinkCache:null,shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,renderFileThread:false,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0};var we=function(e){m()(t,e);function t(e){u()(this,t);var r=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.setRef=r.setRef.bind(r);r.onContainerClick=r.onContainerClick.bind(r);r.onTimestampClick=r.onTimestampClick.bind(r);r.startEditing=r.startEditing.bind(r);r.onFocusEnter=r.onFocusEnter.bind(r);r.onFocusLeave=r.onFocusLeave.bind(r);r.onMouseEnter=r.onMouseEnter.bind(r);r.onMouseLeave=r.onMouseLeave.bind(r);r.onMenuToggle=r.onMenuToggle.bind(r);r.startHighlightingTimer=r.startHighlightingTimer.bind(r);r.onDoneHighlighting=r.onDoneHighlighting.bind(r);r.onDeleteAnimationTick=r.onDeleteAnimationTick.bind(r);r.onDeleteAnimationEnd=r.onDeleteAnimationEnd.bind(r);r.resendMsg=r.resendMsg.bind(r);r.removeMsg=r.removeMsg.bind(r);r.formatInlineAttachmentMaybe=r.formatInlineAttachmentMaybe.bind(r);r.formatThemeInstallButton=r.formatThemeInstallButton.bind(r);r.customFormatHandler=r.customFormatHandler.bind(r);r.customContentHandler=r.customContentHandler.bind(r);r.clogMessageClick=r.clogMessageClick.bind(r);r.clogUserClick=r.clogUserClick.bind(r);r.shouldShowAttachment=r.shouldShowAttachment.bind(r);r.messageRef=null;r.deleteAnimation=null;r.hasDisplayedContent=true;r.inlineAttachmentsKey=0;r.setAttachmentsSorted();r.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null,hasKeyboardFocus:false};return r}v()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var r=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!r&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(W["a"])(t)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onFocusEnter",value:function e(t){var r=t.relatedEvent;r&&"keydown"===r.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var r=this;if(!t){setTimeout(function(){r.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var r=t.value,a=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:r}},a)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(G["m"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=r.attachments,n=r.text;var i=C.a.chain(a).filter(this.shouldShowAttachment).map(F["b"]).partition(function(e){return t.isInlineImage(e,n)}).value(),s=c()(i,2),o=s[0],l=s[1];this.attachmentsInline&&o&&!Object(q["a"])(this.attachmentsInline,o,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=o;this.attachmentsBelow=l}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;return this.props.text.replace(/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g,function(e){return e+" <"+je+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,r=t.attachments,a=t.featureHideUnfurlUrls;if(!a)return[];return C.a.chain(r).filter(this.shouldShowAttachment).map(F["b"]).filter("isMsgUnfurl").map("fromUrl").map(j["unescape"]).compact().value()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var r=t?t.message:"";var a=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;Object(M["error"])("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+r);a&&Object(M["error"])(a)}},{key:"clogMessageClick",value:function e(t){var r=this.props,a=r.ts,n=r.channelId,i=r.userId,o=r.botId,c=r.appId,l=r.channelSessionId;var u=s()({},t,{message_timestamp:a,channel_id:n,channel_type:n?n.charAt(0):"",channel_session_id:l,member_id:i,app_id:c,bot_id:o,request_id:null});Object(x["b"])("MSG_LINK_CLICKED",u);t&&"msg_photo_expand"===t.subtype&&Object(x["b"])("MSG_PHOTO_EXPAND",u)}},{key:"clogUserClick",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.userId,i=t.botId,s=t.appId;Object(x["b"])("USERNAME_CLICK",{message_timestamp:r,channel_id:a,channel_type:a?a.charAt(0):null,member_id:n,app_id:s,bot_id:i})}},{key:"isInlineImage",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return r&&-1!==C.a.unescape(r).indexOf(t.fromUrl)&&Object($["k"])(t)}},{key:"shouldShowAttachment",value:function e(t){var r=this.props,a=r.text,n=r.subtype,i=r.isStandalone,s=r.expandInlineImgsPref,o=r.expandNonMediaAttachmentsPref;return Object(I["d"])({attachment:t,messageText:a,messageSubtype:n,messageIsStandalone:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,r=t.isStandalone;return e&&!r}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(D["a"])({fromValue:t,toValue:0,duration:Oe,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,r=t.maybeStartEditingMessage,a=t.channelId,n=t.ts;r({channelId:a,ts:n})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var r=t.item,a=t.getDefaultOutput;var n=this.props,i=n.ts,o=n.channelId;var c=r.url;var l=Object(j["find"])(this.attachmentsInline,{fromUrl:C.a.unescape(c)});if(!l)return a();return y.a.createElement(_["Fragment"],null,a(),y.a.createElement(Q["a"],s()({},l,{messageTs:i,activeChannelId:o,clogLinkClick:this.clogMessageClick,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var r=t.item;var a=r.contents[0].text.replace(/\s/g,"").split(",");return y.a.createElement("div",{className:"c-message__theme_button_container"},y.a.createElement(me["a"],{colors:a,clogLinkClick:this.clogMessageClick}))}},{key:"customContentHandler",value:function e(t){var r=this.props.edited;var a=t;var n=this.getUrlsToHide();n.length&&(a=Object(ie["a"])({content:t,urls:n}));if(r){var i=C.a.last(a)||{};a.push({type:"custom_edited_label",omitWhitespace:!!Ce[i.type]})}this.hasDisplayedContent=!!a.length;return a}},{key:"customFormatHandler",value:function e(t){var r=t.item,a=t.getDefaultOutput;var n=void 0;"link"===r.type?n=r.url===je?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===r.type&&(n=this.renderEditedLabel({omitWhitespace:r.omitWhitespace}));return n||a()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(L["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(L["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,r=t.showResend,a=t.showCancel;return r||a}},{key:"resendMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId;this.props.resendMsg(a,r)}},{key:"removeMsg",value:function e(){var t=this.props,r=t.ts,a=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===P["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:a,ts:r,broadcastDelete:s})}},{key:"shouldShowMessageLabel",value:function e(t){var r=t.labelTypes;var a=this.props,n=a.showUser,i=a.isFileFollowup,s=a.pinnedByMemberId,o=a.previousMessageIsStarred,c=a.previousMessageIsPinned,l=a.previousMessageIsEphemeral,u=a.previousMessageSubtype,d=a.previousMessageSliHighlight,v=a.previousMessagePinnedByMemberId;if(C.a.isEmpty(r))return false;if(r.sliHighlight)return true;if(!n||i){var p=Object(N["a"])({isStarred:o,isPinned:c,isEphemeral:l,subtype:u,sliHighlight:d});if(Object(q["a"])(r,p))return r.isPinned&&p.isPinned&&v!==s}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.isHiddenFromCopy,a=void 0!==r&&r;var n=this.props,i=n.channelId,o=n.ts,c=n.threadTs,l=n.isStandalone;if(!o||!i)return null;var u=void 0;var d=void 0;if(!l){u=Object(R["constructMsgPermalink"])(i,o,c);d=this.onTimestampClick}var v={};a&&(v["data-stringify-text"]="");return y.a.createElement(le["b"],s()({timestamp:o,relative:false,full:false,link:u,onClick:d},v))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return y.a.createElement("div",{className:"c-message__tombstone_icon"},y.a.createElement(ae["a"],{type:"trash",align:"top"}));var r=this.props,a=r.userId,n=r.hasAdHocSender,i=r.botId,s=r.botProfile,o=r.isStandalone,c=r.icons,l=r.slackbotFeels;return y.a.createElement(Y["b"],{className:"c-message__avatar",userId:a,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:l,size:t,icons:c,isInteractive:!o,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){if("light"===this.props.theme){if(this.props.isFileFollowup)return y.a.createElement("div",{className:"c-message__gutter c-message__gutter--empty"});if(this.props.isEditing||this.props.showUser)return y.a.createElement("div",{className:"c-message__gutter"},this.renderAvatar())}return y.a.createElement("div",{className:"c-message__gutter"},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,r=t.showUser,a=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;return y.a.createElement("div",{className:"c-message__content"},r&&this.renderContentHeader(),"light"===a&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFileThreads(),this.renderAttachments(),!n&&!this.isTombstone()&&this.renderReactions(i),this.renderInitialFileComment(),!n&&!this.isTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,r=t.userId,a=t.botId,n=t.username,i=t.theme,s=t.isStandalone,o=t.botProfile;if(this.isTombstone())return null;return y.a.createElement("div",{className:"c-message__content_header"},y.a.createElement(se["a"],{userId:r,botId:a,username:n,isInteractive:!s,botProfile:o,clogLinkClick:this.clogUserClick}),"light"===i&&this.renderTimestamp(),"dense"===i&&y.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),y.a.createElement("br",null)),"dense"===i&&" ","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,r=t.ts,a=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!r||!n||s||"thread_broadcast"!==i)return null;return y.a.createElement(pe["a"],{ts:r,threadTs:a,channelId:n})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.omitWhitespace,a=void 0!==r&&r;var n=this.props.edited;var i=n.ts;var s=y.a.createElement("span",{key:"edited",className:"c-message__edited_label"},!a&&"\xa0",ye.t("(edited)"));if(i){var o=ye.t("{date} at {time}",{date:Object(U["a"])(i,{shortenMonth:true}),time:Object(B["a"])(i)});return y.a.createElement(X["d"],{key:"edited",delay:X["a"],tip:o},s)}return s}},{key:"renderReplyBar",value:function e(){var t=this.props,r=t.replies,a=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,c=t.threadTs;if(!o||!a)return null;return y.a.createElement(oe["a"],{channelId:o,threadTs:c,replies:r,replyCount:a,replyUsers:n,replyUsersCount:i,latestReply:s})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(!t)return null;return y.a.createElement(J["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var r=this.props,a=r.ts,n=r.channelId;var i=this.attachmentsBelow;if(!i||!i.length)return null;var o=Object(j["map"])(i,function(e,r){var i=e.id||r+1;var o=e.botId||t.props.botId;return y.a.createElement(Q["a"],s()({},e,{service:o,messageTs:a,activeChannelId:n,key:i,clogLinkClick:t.clogMessageClick,isOnlyMessageContent:!t.hasDisplayedContent}))});var c=o.splice(ke);return y.a.createElement("div",{className:"c-message__attachments"},o,this.renderAttachmentsOverLimitMaybe(c))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t){if(!t.length)return null;var r={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(w["a"])("attachmentsOverLimit",this.props.ts,{limit:ke})};return y.a.createElement("div",null,y.a.createElement(ee["a"],r,t),y.a.createElement(te["a"],s()({},r,{render:function e(r,a){return y.a.createElement(re["a"],{isExpanded:r.isExpanded,onClick:a,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.subtype,i=t.renderFileThread;if(!r)return null;var s=null;var o=null;a&&"file_comment"===n&&(o=this.renderFileComment());"file_comment"===n||i||(s=this.renderInlineFile());return[s,o]}},{key:"renderInlineFile",value:function e(){var t=this.props,r=t.ts,a=t.fileId,n=t.channelId,i=t.subtype,s=t.unfurlLinkCache,o=t.isUpload,c=t.userId;if(!a||!n)return null;return y.a.createElement(ce["a"],{key:"inline-file",fileId:a,ts:r,subtype:i,channelId:n,unfurlLinkCache:s,isUpload:o,userId:c,clogLinkClick:this.clogMessageClick})}},{key:"renderFileComment",value:function e(){var t=this.props,r=t.fileId,a=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!r||!a)return null;var c="file_comment"===s&&(!n||"dense"===i)&&y.a.createElement(ue["a"],{fileId:r,comment:a,followup:n,key:a.id+"-meta"});return[c||null,y.a.createElement(Z["a"],{text:a.comment,memberId:o,className:"c-message__comment c-message__body",key:a.id+"-body",clogLinkClick:this.clogMessageClick})]}},{key:"renderInitialFileComment",value:function e(){var t=this.props,r=t.comment,a=t.subtype;if(!r||"file_share"!==a)return null;return this.renderFileComment()}},{key:"renderFileThreads",value:function e(){var t=this;if(!this.props.renderFileThread)return null;var r=this.props,a=r.ts,n=r.fileIds,i=r.channelId,s=r.subtype,o=r.unfurlLinkCache,c=r.isUpload,l=r.userId,u=r.botId,d=r.text;if(!n||!n.length||!i)return null;if("file_comment"===s)return null;var v=n.map(function(e){return y.a.createElement(ce["a"],{key:e,fileId:e,ts:a,subtype:s,channelId:i,unfurlLinkCache:o,isUpload:c,userId:l,botId:u,clogLinkClick:t.clogMessageClick})});var p=k()("c-message__files","c-message__files--file_threads_meta_data",{"c-message__files--empty_body":!d||"file_mention"===s});return y.a.createElement("div",{className:p},v)}},{key:"renderRollup",value:function e(){var t=this.props,r=t.rollup,a=t.channelId,n=t.userId;if(!r||!a)return null;return y.a.createElement(de["a"],{rollup:r,channelId:a,user:n})}},{key:"renderAutomatedSubtype",value:function e(){return y.a.createElement(ve["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this.props,r=t.ts,a=t.fileId,n=t.subtype,i=t.rollup,s=t.userId,o=t.edited,c=t.noSpecials,l=t.ariaAssertive,u=t.attachments;if(this.isTombstone())return y.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},ye.t("This message was deleted."));if(!r)return y.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(a||"file_comment"===n||"file_mention"===n)return null;if(i)return this.renderRollup();if(Object(S["a"])(n))return this.renderAutomatedSubtype();var d=k()("c-message__body",{"c-message__body--me":"me_message"===n});return y.a.createElement(Z["a"],{className:d,text:this.getTextWithThemes(),memberId:s,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogMessageClick,noSpecials:c,ariaAssertive:l,ignoredPropEdited:o,ignoredPropAttachments:u})}},{key:"renderActions",value:function e(){var t=this;var r=this.props,a=r.ts,n=r.reactionKey,i=r.fileId,s=r.fileIds,o=r.comment,c=r.replies,l=r.replyCount,u=r.threadsEverythingPref,d=r.threadTs,v=r.channelId,p=r.subtype,h=r.isStarred,f=r.isPinned,m=r.isEphemeral,b=r.isDeleting,g=r.isStandalone,_=r.setUnreadPoint,O=r.theme,e=r.renderActions,k=r.renderActionsOffscreen,j=r.messageContainerType;var C=this.state,E=C.actionsMenuOpen,S=C.isHovered,w=C.hasKeyboardFocus;if(!a||!v)return null;var I=k&&!w&&!S&&!e;if(!E&&!S&&!w&&!I&&!e)return null;if(b||g)return null;return y.a.createElement(he["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:c,replyCount:l,ts:a,threadsEverythingPref:u,threadTs:d,channelId:v,subtype:p,isStarred:h,isPinned:f,isEphemeral:m,editHandler:this.startEditing,unreadHandler:_,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},theme:O,renderOffscreen:I,messageContainerType:j})}},{key:"renderEdit",value:function e(){var t=this.props,r=t.channelId,a=t.ts,n=t.messageContainerType;if(!a||!r)return null;return y.a.createElement("div",{className:"c-message__content"},y.a.createElement(fe["a"],{channelId:r,ts:a,messageContainerType:n}))}},{key:"renderResendControls",value:function e(){var t=this.props,r=t.showResend,a=t.showCancel;var n=null;r&&(n=y.a.createElement(z["c"],{className:"c-message__resend",onClick:this.resendMsg},ye.t("Try again")));var i=null;a&&(i=y.a.createElement(z["c"],{className:"c-message__cancel",onClick:this.removeMsg},ye.t("Cancel")));var s=null;r&&a&&(s=" | ");return y.a.createElement("div",{className:"c-message__resend_controls"},y.a.createElement("div",{className:"c-message__resend_column"}),ye.t("Slack couldn\u2019t send this message"),n,s,i)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,r=t.ts,a=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return y.a.createElement("div",{style:n},y.a.createElement("strong",null,"Message ",r," in ",a," failed to render. "),"Please go to #triage-core and ",y.a.createElement("strong",null,"read up to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org.")}},{key:"renderMessageLabel",value:function e(t){var r=t.labelTypes,a=t.primaryLabelType;var n=this.props,i=n.sliHighlight,o=n.isSlackbotIm,c=n.isSelfIm,l=n.channelId,u=n.ts,d=n.currentUserId,v=n.pinnedByMemberId;var p=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:r}))return null;return y.a.createElement(be["a"],s()({},r,{primaryType:a,channelId:l,ts:u,isHovered:p,isSlackbotIm:o,isSelfIm:c,sliHighlight:i,currentUserId:d,pinnedByMemberId:v}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var r=this.props,a=r.theme,i=r.isEditing,s=r.showUser,o=r.alertType,c=r.fadeAwayHighlight,l=r.isLast,u=r.isStandalone,d=r.isUnprocessed,v=r.subtype,p=r.rollup,h=r.sliHighlight,f=r.isPinned,m=r.isEphemeral,b=r.isStarred;var g=this.state,_=g.isHovered,O=g.actionsMenuOpen,j=g.height;var C=Object(N["a"])({isPinned:f,isEphemeral:m,isStarred:b,subtype:v,sliHighlight:h});var S=Object(T["a"])(C);var w=k()("c-message",(t={},n()(t,"c-message--"+a,a),n()(t,"c-message--hover",_||O),n()(t,"c-message--focus",this.state.hasKeyboardFocus),n()(t,"c-message--adjacent",!i&&!s&&!u),n()(t,"c-message--thread_broadcast","thread_broadcast"===v),n()(t,"c-message--highlight_yellow_bg","shared_channel_join"===o),n()(t,"c-message--highlight",!u&&i),n()(t,"c-message--fade_highlight",c&&!S),n()(t,"c-message--last",l),n()(t,"c-message--rollup",p),n()(t,"c-message--standalone",u),n()(t,"c-message--unprocessed",d),n()(t,"c-message--resend",this.shouldShowResendControls()),n()(t,"c-message--deleting",this.isDeleting()),n()(t,"c-message--editing",i),n()(t,"c-message--sli_highlight_negative",Object(E["isNegativeHighlightFeedback"])(h)),n()(t,"c-message--"+S,S),t));var I={};null!==j&&(I={height:j});return y.a.createElement(K["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},y.a.createElement("div",{ref:this.setRef,className:w,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,style:I,role:"document","data-qa":"message_container"},this.renderMessageLabel({labelTypes:C,primaryLabelType:S}),this.renderGutter(),!u&&i&&this.renderEdit(),(u||!i)&&this.renderContent(),!u&&!i&&this.renderActions()))}}]);return t}(_["PureComponent"]);we.displayName="Message";we.defaultProps=Se;t["a"]=Object(V["a"])(we)},992:function(e,t,r){"use strict";r.d(t,"b",function(){return k});var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(45);var c=r(8);var l=r.n(c);var u=r(1);var d=r.n(u);var v=r(5);var p=r(22146);var h=r(212);var f=r(3184);var m=r(149);var b=r(60);var g=r(1496);var _=r(20186);var y=r.n(_);var O=new v["b"]("reactions");var k={count:n.a.number.isRequired,name:n.a.string.isRequired,users:n.a.arrayOf(n.a.string).isRequired,url:n.a.string,currentUser:n.a.string,onClick:n.a.func,emojiMode:n.a.string};var j={url:null,currentUser:null,onClick:d.a.noop,emojiMode:null};function C(e){var t=":"+e+":";var r=v["n"]!==v["b"].DEFAULT_LOCALE?Object(h["m"])(t):t;return O.t("React with {emojiName}",{emojiName:Object(p["a"])(r),note:"Screenreader: Label for blind users"})}var E=function e(t){var r=t.count,a=t.name,n=t.users,i=t.url,o=t.currentUser,c=t.onClick,u=t.emojiMode;var v=d.a.includes(n,o);var p=s.a.createElement(g["a"],{users:n,count:r,emoji:a,reacted:v});var h=C(a);return s.a.createElement(b["d"],{tip:p,delay:b["a"]},s.a.createElement(f["c"],{className:l()("c-reaction",{"c-reaction--reacted":v}),onClick:function e(t){t.preventDefault();c(a,v)},"aria-label":h},s.a.createElement(m["a"],{text:":"+a+":",url:i,showTooltip:false,emojiMode:u}),s.a.createElement("span",{className:"c-reaction__count"},r)))};E.displayName="Reaction";E.defaultProps=j;t["a"]=Object(o["pure"])(E)},994:function(e,t,r){"use strict";t["a"]=p;var a=r(3);var n=r.n(a);var i=r(12159);var s=r.n(i);var o=r(3184);var c=r(5);var l=r(37);var u=r(60);var d=new c["b"]("emoji");var v={onClick:n.a.func.isRequired};function p(e){var t=e.onClick;return s.a.createElement(u["d"],{tip:d.t("Add reaction..."),delay:u["a"]},s.a.createElement(o["c"],{className:"c-reaction_add",onClick:t,"aria-label":d.t("Add reaction..."),"data-qa":"add_reaction_button"},s.a.createElement("div",{className:"c-reaction_add__container"},s.a.createElement(l["b"],{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":true}),s.a.createElement(l["b"],{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":true}))))}p.displayName="ReactionAddButton"}},[1977]);